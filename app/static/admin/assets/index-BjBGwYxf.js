(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function l(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(d){if(d.ep)return;d.ep=!0;const h=l(d);fetch(d.href,h)}})();function dd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xh={exports:{}},Zo={};var sy;function AN(){if(sy)return Zo;sy=1;var e=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function l(o,d,h){var f=null;if(h!==void 0&&(f=""+h),d.key!==void 0&&(f=""+d.key),"key"in d){h={};for(var x in d)x!=="key"&&(h[x]=d[x])}else h=d;return d=h.ref,{$$typeof:e,type:o,key:f,ref:d!==void 0?d:null,props:h}}return Zo.Fragment=i,Zo.jsx=l,Zo.jsxs=l,Zo}var ry;function zN(){return ry||(ry=1,xh.exports=AN()),xh.exports}var a=zN(),yh={exports:{}},ut={};var ly;function MN(){if(ly)return ut;ly=1;var e=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),T=Symbol.iterator;function z(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,M={};function I(O,te,P){this.props=O,this.context=te,this.refs=M,this.updater=P||k}I.prototype.isReactComponent={},I.prototype.setState=function(O,te){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,te,"setState")},I.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function R(){}R.prototype=I.prototype;function D(O,te,P){this.props=O,this.context=te,this.refs=M,this.updater=P||k}var K=D.prototype=new R;K.constructor=D,A(K,I.prototype),K.isPureReactComponent=!0;var G=Array.isArray;function V(){}var q={H:null,A:null,T:null,S:null},Q=Object.prototype.hasOwnProperty;function ae(O,te,P){var Z=P.ref;return{$$typeof:e,type:O,key:te,ref:Z!==void 0?Z:null,props:P}}function ve(O,te){return ae(O.type,te,O.props)}function ee(O){return typeof O=="object"&&O!==null&&O.$$typeof===e}function ue(O){var te={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(P){return te[P]})}var _e=/\/+/g;function ne(O,te){return typeof O=="object"&&O!==null&&O.key!=null?ue(""+O.key):te.toString(36)}function W(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(V,V):(O.status="pending",O.then(function(te){O.status==="pending"&&(O.status="fulfilled",O.value=te)},function(te){O.status==="pending"&&(O.status="rejected",O.reason=te)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function B(O,te,P,Z,me){var Se=typeof O;(Se==="undefined"||Se==="boolean")&&(O=null);var Me=!1;if(O===null)Me=!0;else switch(Se){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(O.$$typeof){case e:case i:Me=!0;break;case S:return Me=O._init,B(Me(O._payload),te,P,Z,me)}}if(Me)return me=me(O),Me=Z===""?"."+ne(O,0):Z,G(me)?(P="",Me!=null&&(P=Me.replace(_e,"$&/")+"/"),B(me,te,P,"",function(qe){return qe})):me!=null&&(ee(me)&&(me=ve(me,P+(me.key==null||O&&O.key===me.key?"":(""+me.key).replace(_e,"$&/")+"/")+Me)),te.push(me)),1;Me=0;var Ze=Z===""?".":Z+":";if(G(O))for(var Ve=0;Ve<O.length;Ve++)Z=O[Ve],Se=Ze+ne(Z,Ve),Me+=B(Z,te,P,Se,me);else if(Ve=z(O),typeof Ve=="function")for(O=Ve.call(O),Ve=0;!(Z=O.next()).done;)Z=Z.value,Se=Ze+ne(Z,Ve++),Me+=B(Z,te,P,Se,me);else if(Se==="object"){if(typeof O.then=="function")return B(W(O),te,P,Z,me);throw te=String(O),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Me}function X(O,te,P){if(O==null)return O;var Z=[],me=0;return B(O,Z,"","",function(Se){return te.call(P,Se,me++)}),Z}function de(O){if(O._status===-1){var te=O._result;te=te(),te.then(function(P){(O._status===0||O._status===-1)&&(O._status=1,O._result=P)},function(P){(O._status===0||O._status===-1)&&(O._status=2,O._result=P)}),O._status===-1&&(O._status=0,O._result=te)}if(O._status===1)return O._result.default;throw O._result}var ke=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},J={map:X,forEach:function(O,te,P){X(O,function(){te.apply(this,arguments)},P)},count:function(O){var te=0;return X(O,function(){te++}),te},toArray:function(O){return X(O,function(te){return te})||[]},only:function(O){if(!ee(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return ut.Activity=w,ut.Children=J,ut.Component=I,ut.Fragment=l,ut.Profiler=d,ut.PureComponent=D,ut.StrictMode=o,ut.Suspense=v,ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,ut.__COMPILER_RUNTIME={__proto__:null,c:function(O){return q.H.useMemoCache(O)}},ut.cache=function(O){return function(){return O.apply(null,arguments)}},ut.cacheSignal=function(){return null},ut.cloneElement=function(O,te,P){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var Z=A({},O.props),me=O.key;if(te!=null)for(Se in te.key!==void 0&&(me=""+te.key),te)!Q.call(te,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&te.ref===void 0||(Z[Se]=te[Se]);var Se=arguments.length-2;if(Se===1)Z.children=P;else if(1<Se){for(var Me=Array(Se),Ze=0;Ze<Se;Ze++)Me[Ze]=arguments[Ze+2];Z.children=Me}return ae(O.type,me,Z)},ut.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:h,_context:O},O},ut.createElement=function(O,te,P){var Z,me={},Se=null;if(te!=null)for(Z in te.key!==void 0&&(Se=""+te.key),te)Q.call(te,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(me[Z]=te[Z]);var Me=arguments.length-2;if(Me===1)me.children=P;else if(1<Me){for(var Ze=Array(Me),Ve=0;Ve<Me;Ve++)Ze[Ve]=arguments[Ve+2];me.children=Ze}if(O&&O.defaultProps)for(Z in Me=O.defaultProps,Me)me[Z]===void 0&&(me[Z]=Me[Z]);return ae(O,Se,me)},ut.createRef=function(){return{current:null}},ut.forwardRef=function(O){return{$$typeof:x,render:O}},ut.isValidElement=ee,ut.lazy=function(O){return{$$typeof:S,_payload:{_status:-1,_result:O},_init:de}},ut.memo=function(O,te){return{$$typeof:b,type:O,compare:te===void 0?null:te}},ut.startTransition=function(O){var te=q.T,P={};q.T=P;try{var Z=O(),me=q.S;me!==null&&me(P,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(V,ke)}catch(Se){ke(Se)}finally{te!==null&&P.types!==null&&(te.types=P.types),q.T=te}},ut.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},ut.use=function(O){return q.H.use(O)},ut.useActionState=function(O,te,P){return q.H.useActionState(O,te,P)},ut.useCallback=function(O,te){return q.H.useCallback(O,te)},ut.useContext=function(O){return q.H.useContext(O)},ut.useDebugValue=function(){},ut.useDeferredValue=function(O,te){return q.H.useDeferredValue(O,te)},ut.useEffect=function(O,te){return q.H.useEffect(O,te)},ut.useEffectEvent=function(O){return q.H.useEffectEvent(O)},ut.useId=function(){return q.H.useId()},ut.useImperativeHandle=function(O,te,P){return q.H.useImperativeHandle(O,te,P)},ut.useInsertionEffect=function(O,te){return q.H.useInsertionEffect(O,te)},ut.useLayoutEffect=function(O,te){return q.H.useLayoutEffect(O,te)},ut.useMemo=function(O,te){return q.H.useMemo(O,te)},ut.useOptimistic=function(O,te){return q.H.useOptimistic(O,te)},ut.useReducer=function(O,te,P){return q.H.useReducer(O,te,P)},ut.useRef=function(O){return q.H.useRef(O)},ut.useState=function(O){return q.H.useState(O)},ut.useSyncExternalStore=function(O,te,P){return q.H.useSyncExternalStore(O,te,P)},ut.useTransition=function(){return q.H.useTransition()},ut.version="19.2.4",ut}var oy;function Of(){return oy||(oy=1,yh.exports=MN()),yh.exports}var _=Of();const ON=dd(_);var vh={exports:{}},qo={},bh={exports:{}},_h={};var uy;function DN(){return uy||(uy=1,(function(e){function i(B,X){var de=B.length;B.push(X);e:for(;0<de;){var ke=de-1>>>1,J=B[ke];if(0<d(J,X))B[ke]=X,B[de]=J,de=ke;else break e}}function l(B){return B.length===0?null:B[0]}function o(B){if(B.length===0)return null;var X=B[0],de=B.pop();if(de!==X){B[0]=de;e:for(var ke=0,J=B.length,O=J>>>1;ke<O;){var te=2*(ke+1)-1,P=B[te],Z=te+1,me=B[Z];if(0>d(P,de))Z<J&&0>d(me,P)?(B[ke]=me,B[Z]=de,ke=Z):(B[ke]=P,B[te]=de,ke=te);else if(Z<J&&0>d(me,de))B[ke]=me,B[Z]=de,ke=Z;else break e}}return X}function d(B,X){var de=B.sortIndex-X.sortIndex;return de!==0?de:B.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var f=Date,x=f.now();e.unstable_now=function(){return f.now()-x}}var v=[],b=[],S=1,w=null,T=3,z=!1,k=!1,A=!1,M=!1,I=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function K(B){for(var X=l(b);X!==null;){if(X.callback===null)o(b);else if(X.startTime<=B)o(b),X.sortIndex=X.expirationTime,i(v,X);else break;X=l(b)}}function G(B){if(A=!1,K(B),!k)if(l(v)!==null)k=!0,V||(V=!0,ue());else{var X=l(b);X!==null&&W(G,X.startTime-B)}}var V=!1,q=-1,Q=5,ae=-1;function ve(){return M?!0:!(e.unstable_now()-ae<Q)}function ee(){if(M=!1,V){var B=e.unstable_now();ae=B;var X=!0;try{e:{k=!1,A&&(A=!1,R(q),q=-1),z=!0;var de=T;try{t:{for(K(B),w=l(v);w!==null&&!(w.expirationTime>B&&ve());){var ke=w.callback;if(typeof ke=="function"){w.callback=null,T=w.priorityLevel;var J=ke(w.expirationTime<=B);if(B=e.unstable_now(),typeof J=="function"){w.callback=J,K(B),X=!0;break t}w===l(v)&&o(v),K(B)}else o(v);w=l(v)}if(w!==null)X=!0;else{var O=l(b);O!==null&&W(G,O.startTime-B),X=!1}}break e}finally{w=null,T=de,z=!1}X=void 0}}finally{X?ue():V=!1}}}var ue;if(typeof D=="function")ue=function(){D(ee)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,ne=_e.port2;_e.port1.onmessage=ee,ue=function(){ne.postMessage(null)}}else ue=function(){I(ee,0)};function W(B,X){q=I(function(){B(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_next=function(B){switch(T){case 1:case 2:case 3:var X=3;break;default:X=T}var de=T;T=X;try{return B()}finally{T=de}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(B,X){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var de=T;T=B;try{return X()}finally{T=de}},e.unstable_scheduleCallback=function(B,X,de){var ke=e.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?ke+de:ke):de=ke,B){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=de+J,B={id:S++,callback:X,priorityLevel:B,startTime:de,expirationTime:J,sortIndex:-1},de>ke?(B.sortIndex=de,i(b,B),l(v)===null&&B===l(b)&&(A?(R(q),q=-1):A=!0,W(G,de-ke))):(B.sortIndex=J,i(v,B),k||z||(k=!0,V||(V=!0,ue()))),B},e.unstable_shouldYield=ve,e.unstable_wrapCallback=function(B){var X=T;return function(){var de=T;T=X;try{return B.apply(this,arguments)}finally{T=de}}}})(_h)),_h}var cy;function RN(){return cy||(cy=1,bh.exports=DN()),bh.exports}var Nh={exports:{}},Qn={};var dy;function LN(){if(dy)return Qn;dy=1;var e=Of();function i(v){var b="https://react.dev/errors/"+v;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)b+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+v+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var o={d:{f:l,r:function(){throw Error(i(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},d=Symbol.for("react.portal");function h(v,b,S){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:w==null?null:""+w,children:v,containerInfo:b,implementation:S}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(v,b){if(v==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Qn.createPortal=function(v,b){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(i(299));return h(v,b,null,S)},Qn.flushSync=function(v){var b=f.T,S=o.p;try{if(f.T=null,o.p=2,v)return v()}finally{f.T=b,o.p=S,o.d.f()}},Qn.preconnect=function(v,b){typeof v=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,o.d.C(v,b))},Qn.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},Qn.preinit=function(v,b){if(typeof v=="string"&&b&&typeof b.as=="string"){var S=b.as,w=x(S,b.crossOrigin),T=typeof b.integrity=="string"?b.integrity:void 0,z=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;S==="style"?o.d.S(v,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:z}):S==="script"&&o.d.X(v,{crossOrigin:w,integrity:T,fetchPriority:z,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Qn.preinitModule=function(v,b){if(typeof v=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var S=x(b.as,b.crossOrigin);o.d.M(v,{crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&o.d.M(v)},Qn.preload=function(v,b){if(typeof v=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var S=b.as,w=x(S,b.crossOrigin);o.d.L(v,S,{crossOrigin:w,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Qn.preloadModule=function(v,b){if(typeof v=="string")if(b){var S=x(b.as,b.crossOrigin);o.d.m(v,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else o.d.m(v)},Qn.requestFormReset=function(v){o.d.r(v)},Qn.unstable_batchedUpdates=function(v,b){return v(b)},Qn.useFormState=function(v,b,S){return f.H.useFormState(v,b,S)},Qn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Qn.version="19.2.4",Qn}var my;function PN(){if(my)return Nh.exports;my=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}return e(),Nh.exports=LN(),Nh.exports}var hy;function IN(){if(hy)return qo;hy=1;var e=RN(),i=Of(),l=PN();function o(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function x(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function v(t){if(h(t)!==t)throw Error(o(188))}function b(t){var n=t.alternate;if(!n){if(n=h(t),n===null)throw Error(o(188));return n!==t?null:t}for(var r=t,c=n;;){var p=r.return;if(p===null)break;var g=p.alternate;if(g===null){if(c=p.return,c!==null){r=c;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===r)return v(p),t;if(g===c)return v(p),n;g=g.sibling}throw Error(o(188))}if(r.return!==c.return)r=p,c=g;else{for(var j=!1,C=p.child;C;){if(C===r){j=!0,r=p,c=g;break}if(C===c){j=!0,c=p,r=g;break}C=C.sibling}if(!j){for(C=g.child;C;){if(C===r){j=!0,r=g,c=p;break}if(C===c){j=!0,c=g,r=p;break}C=C.sibling}if(!j)throw Error(o(189))}}if(r.alternate!==c)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?t:n}function S(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=S(t),n!==null)return n;t=t.sibling}return null}var w=Object.assign,T=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),D=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),ve=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function ue(t){return t===null||typeof t!="object"?null:(t=ee&&t[ee]||t["@@iterator"],typeof t=="function"?t:null)}var _e=Symbol.for("react.client.reference");function ne(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===_e?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case A:return"Fragment";case I:return"Profiler";case M:return"StrictMode";case G:return"Suspense";case V:return"SuspenseList";case ae:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case D:return t.displayName||"Context";case R:return(t._context.displayName||"Context")+".Consumer";case K:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case q:return n=t.displayName||null,n!==null?n:ne(t.type)||"Memo";case Q:n=t._payload,t=t._init;try{return ne(t(n))}catch{}}return null}var W=Array.isArray,B=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},ke=[],J=-1;function O(t){return{current:t}}function te(t){0>J||(t.current=ke[J],ke[J]=null,J--)}function P(t,n){J++,ke[J]=t.current,t.current=n}var Z=O(null),me=O(null),Se=O(null),Me=O(null);function Ze(t,n){switch(P(Se,n),P(me,t),P(Z,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Cx(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Cx(n),t=Tx(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}te(Z),P(Z,t)}function Ve(){te(Z),te(me),te(Se)}function qe(t){t.memoizedState!==null&&P(Me,t);var n=Z.current,r=Tx(n,t.type);n!==r&&(P(me,t),P(Z,r))}function Ne(t){me.current===t&&(te(Z),te(me)),Me.current===t&&(te(Me),Io._currentValue=de)}var tt,bt;function rt(t){if(tt===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);tt=n&&n[1]||"",bt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tt+t+bt}var pt=!1;function Ut(t,n){if(!t||pt)return"";pt=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(xe){var ge=xe}Reflect.construct(t,[],Te)}else{try{Te.call()}catch(xe){ge=xe}t.call(Te.prototype)}}else{try{throw Error()}catch(xe){ge=xe}(Te=t())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(xe){if(xe&&ge&&typeof xe.stack=="string")return[xe.stack,ge.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),j=g[0],C=g[1];if(j&&C){var H=j.split(`
`),fe=C.split(`
`);for(p=c=0;c<H.length&&!H[c].includes("DetermineComponentFrameRoot");)c++;for(;p<fe.length&&!fe[p].includes("DetermineComponentFrameRoot");)p++;if(c===H.length||p===fe.length)for(c=H.length-1,p=fe.length-1;1<=c&&0<=p&&H[c]!==fe[p];)p--;for(;1<=c&&0<=p;c--,p--)if(H[c]!==fe[p]){if(c!==1||p!==1)do if(c--,p--,0>p||H[c]!==fe[p]){var je=`
`+H[c].replace(" at new "," at ");return t.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",t.displayName)),je}while(1<=c&&0<=p);break}}}finally{pt=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?rt(r):""}function Dt(t,n){switch(t.tag){case 26:case 27:case 5:return rt(t.type);case 16:return rt("Lazy");case 13:return t.child!==n&&n!==null?rt("Suspense Fallback"):rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return Ut(t.type,!1);case 11:return Ut(t.type.render,!1);case 1:return Ut(t.type,!0);case 31:return rt("Activity");default:return""}}function mt(t){try{var n="",r=null;do n+=Dt(t,r),r=t,t=t.return;while(t);return n}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var rn=Object.prototype.hasOwnProperty,se=e.unstable_scheduleCallback,Ae=e.unstable_cancelCallback,Ke=e.unstable_shouldYield,ce=e.unstable_requestPaint,Re=e.unstable_now,ct=e.unstable_getCurrentPriorityLevel,be=e.unstable_ImmediatePriority,He=e.unstable_UserBlockingPriority,lt=e.unstable_NormalPriority,at=e.unstable_LowPriority,tn=e.unstable_IdlePriority,re=e.log,Y=e.unstable_setDisableYieldValue,Ye=null,st=null;function Vt(t){if(typeof re=="function"&&Y(t),st&&typeof st.setStrictMode=="function")try{st.setStrictMode(Ye,t)}catch{}}var wt=Math.clz32?Math.clz32:Ci,Mn=Math.log,ki=Math.LN2;function Ci(t){return t>>>=0,t===0?32:31-(Mn(t)/ki|0)|0}var Zn=256,pa=262144,Vn=4194304;function On(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ca(t,n,r){var c=t.pendingLanes;if(c===0)return 0;var p=0,g=t.suspendedLanes,j=t.pingedLanes;t=t.warmLanes;var C=c&134217727;return C!==0?(c=C&~g,c!==0?p=On(c):(j&=C,j!==0?p=On(j):r||(r=C&~t,r!==0&&(p=On(r))))):(C=c&~g,C!==0?p=On(C):j!==0?p=On(j):r||(r=c&~t,r!==0&&(p=On(r)))),p===0?0:n!==0&&n!==p&&(n&g)===0&&(g=p&-p,r=n&-n,g>=r||g===32&&(r&4194048)!==0)?n:p}function Yn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function ci(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ti(){var t=Vn;return Vn<<=1,(Vn&62914560)===0&&(Vn=4194304),t}function ie(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function $e(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function zt(t,n,r,c,p,g){var j=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var C=t.entanglements,H=t.expirationTimes,fe=t.hiddenUpdates;for(r=j&~r;0<r;){var je=31-wt(r),Te=1<<je;C[je]=0,H[je]=-1;var ge=fe[je];if(ge!==null)for(fe[je]=null,je=0;je<ge.length;je++){var xe=ge[je];xe!==null&&(xe.lane&=-536870913)}r&=~Te}c!==0&&Cn(t,c,0),g!==0&&p===0&&t.tag!==0&&(t.suspendedLanes|=g&~(j&~n))}function Cn(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var c=31-wt(n);t.entangledLanes|=n,t.entanglements[c]=t.entanglements[c]|1073741824|r&261930}function Ya(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var c=31-wt(r),p=1<<c;p&n|t[c]&n&&(t[c]|=n),r&=~p}}function Ai(t,n){var r=n&-n;return r=(r&42)!==0?1:Nn(r),(r&(t.suspendedLanes|n))!==0?0:r}function Nn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ue(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Gs(){var t=X.p;return t!==0?t:(t=window.event,t===void 0?32:Jx(t.type))}function as(t,n){var r=X.p;try{return X.p=t,n()}finally{X.p=r}}var ga=Math.random().toString(36).slice(2),ln="__reactFiber$"+ga,gn="__reactProps$"+ga,$a="__reactContainer$"+ga,Ta="__reactEvents$"+ga,Ur="__reactListeners$"+ga,Zl="__reactHandles$"+ga,Fr="__reactResources$"+ga,zi="__reactMarker$"+ga;function U(t){delete t[ln],delete t[gn],delete t[Ta],delete t[Ur],delete t[Zl]}function Ie(t){var n=t[ln];if(n)return n;for(var r=t.parentNode;r;){if(n=r[$a]||r[ln]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=Lx(t);t!==null;){if(r=t[ln])return r;t=Lx(t)}return n}t=r,r=t.parentNode}return null}function Et(t){if(t=t[ln]||t[$a]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function qn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(o(33))}function Xa(t){var n=t[Fr];return n||(n=t[Fr]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function nn(t){t[zi]=!0}var Vs=new Set,hu={};function Mi(t,n){di(t,n),di(t+"Capture",n)}function di(t,n){for(hu[t]=n,t=0;t<n.length;t++)Vs.add(n[t])}var Ys=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ql={},Hl={};function $s(t){return rn.call(Hl,t)?!0:rn.call(ql,t)?!1:Ys.test(t)?Hl[t]=!0:(ql[t]=!0,!1)}function gt(t,n,r){if($s(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function Ft(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function ta(t,n,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+c)}}function jn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Oi(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Kl(t,n,r){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,g=c.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return p.call(this)},set:function(j){r=""+j,g.call(this,j)}}),Object.defineProperty(t,n,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(j){r=""+j},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ot(t){if(!t._valueTracker){var n=Oi(t)?"checked":"value";t._valueTracker=Kl(t,n,""+t[n])}}function Xt(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),c="";return t&&(c=Oi(t)?t.checked?"true":"false":t.value),t=c,t!==r?(n.setValue(t),!0):!1}function is(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Zr=/[\n"\\]/g;function Yt(t){return t.replace(Zr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ql(t,n,r,c,p,g,j,C){t.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?t.type=j:t.removeAttribute("type"),n!=null?j==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+jn(n)):t.value!==""+jn(n)&&(t.value=""+jn(n)):j!=="submit"&&j!=="reset"||t.removeAttribute("value"),n!=null?Ja(t,j,jn(n)):r!=null?Ja(t,j,jn(r)):c!=null&&t.removeAttribute("value"),p==null&&g!=null&&(t.defaultChecked=!!g),p!=null&&(t.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.name=""+jn(C):t.removeAttribute("name")}function Xs(t,n,r,c,p,g,j,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),n!=null||r!=null){if(!(g!=="submit"&&g!=="reset"||n!=null)){ot(t);return}r=r!=null?""+jn(r):"",n=n!=null?""+jn(n):r,C||n===t.value||(t.value=n),t.defaultValue=n}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=C?t.checked:!!c,t.defaultChecked=!!c,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(t.name=j),ot(t)}function Ja(t,n,r){n==="number"&&is(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Kt(t,n,r,c){if(t=t.options,n){n={};for(var p=0;p<r.length;p++)n["$"+r[p]]=!0;for(r=0;r<t.length;r++)p=n.hasOwnProperty("$"+t[r].value),t[r].selected!==p&&(t[r].selected=p),p&&c&&(t[r].defaultSelected=!0)}else{for(r=""+jn(r),n=null,p=0;p<t.length;p++){if(t[p].value===r){t[p].selected=!0,c&&(t[p].defaultSelected=!0);return}n!==null||t[p].disabled||(n=t[p])}n!==null&&(n.selected=!0)}}function mi(t,n,r){if(n!=null&&(n=""+jn(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+jn(r):""}function ss(t,n,r,c){if(n==null){if(c!=null){if(r!=null)throw Error(o(92));if(W(c)){if(1<c.length)throw Error(o(93));c=c[0]}r=c}r==null&&(r=""),n=r}r=jn(n),t.defaultValue=r,c=t.textContent,c===r&&c!==""&&c!==null&&(t.value=c),ot(t)}function Aa(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var Gl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rs(t,n,r){var c=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":c?t.setProperty(n,r):typeof r!="number"||r===0||Gl.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function qr(t,n,r){if(n!=null&&typeof n!="object")throw Error(o(62));if(t=t.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var p in n)c=n[p],n.hasOwnProperty(p)&&r[p]!==c&&rs(t,p,c)}else for(var g in n)n.hasOwnProperty(g)&&rs(t,g,n[g])}function Js(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ls(t){return Vl.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function na(){}var Kr=null;function Ws(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var os=null,nt=null;function xa(t){var n=Et(t);if(n&&(t=n.stateNode)){var r=t[gn]||null;e:switch(t=n.stateNode,n.type){case"input":if(Ql(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Yt(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var c=r[n];if(c!==t&&c.form===t.form){var p=c[gn]||null;if(!p)throw Error(o(90));Ql(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(n=0;n<r.length;n++)c=r[n],c.form===t.form&&Xt(c)}break e;case"textarea":mi(t,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&Kt(t,!!r.multiple,n,!1)}}}var Rt=!1;function Yl(t,n,r){if(Rt)return t(n,r);Rt=!0;try{var c=t(n);return c}finally{if(Rt=!1,(os!==null||nt!==null)&&(uc(),os&&(n=os,t=nt,nt=os=null,xa(n),t)))for(n=0;n<t.length;n++)xa(t[n])}}function Di(t,n){var r=t.stateNode;if(r===null)return null;var c=r[gn]||null;if(c===null)return null;r=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(o(231,n,typeof r));return r}var ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),er=!1;if(ya)try{var va={};Object.defineProperty(va,"passive",{get:function(){er=!0}}),window.addEventListener("test",va,va),window.removeEventListener("test",va,va)}catch{er=!1}var za=null,Ri=null,on=null;function hi(){if(on)return on;var t,n=Ri,r=n.length,c,p="value"in za?za.value:za.textContent,g=p.length;for(t=0;t<r&&n[t]===p[t];t++);var j=r-t;for(c=1;c<=j&&n[r-c]===p[g-c];c++);return on=p.slice(t,1<c?1-c:void 0)}function tr(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function nr(){return!0}function fu(){return!1}function Dn(t){function n(r,c,p,g,j){this._reactName=r,this._targetInst=p,this.type=c,this.nativeEvent=g,this.target=j,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(r=t[C],this[C]=r?r(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?nr:fu,this.isPropagationStopped=fu,this}return w(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){},isPersistent:nr}),n}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qr=Dn(Wa),us=w({},Wa,{view:0,detail:0}),_t=Dn(us),$l,$n,ei,ar=w({},us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:no,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ei&&(ei&&t.type==="mousemove"?($l=t.screenX-ei.screenX,$n=t.screenY-ei.screenY):$n=$l=0,ei=t),$l)},movementY:function(t){return"movementY"in t?t.movementY:$n}}),pu=Dn(ar),Xl=w({},ar,{dataTransfer:0}),kd=Dn(Xl),gu=w({},us,{relatedTarget:0}),Jl=Dn(gu),Cd=w({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),Wl=Dn(Cd),Td=w({},Wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ma=Dn(Td),Ad=w({},Wa,{data:0}),eo=Dn(Ad),fi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function to(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=yu[t])?!!n[t]:!1}function no(){return to}var vu=w({},us,{key:function(t){if(t.key){var n=fi[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=tr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:no,charCode:function(t){return t.type==="keypress"?tr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bu=Dn(vu),zd=w({},ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_u=Dn(zd),ao=w({},us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:no}),Md=Dn(ao),Nu=w({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),ju=Dn(Nu),Gr=w({},ar,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Li=Dn(Gr),Od=w({},Wa,{newState:0,oldState:0}),ir=Dn(Od),aa=[9,13,27,32],Vr=ya&&"CompositionEvent"in window,cs=null;ya&&"documentMode"in document&&(cs=document.documentMode);var Dd=ya&&"TextEvent"in window&&!cs,Yr=ya&&(!Vr||cs&&8<cs&&11>=cs),$r=" ",Su=!1;function wu(t,n){switch(t){case"keyup":return aa.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function io(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ds=!1;function ba(t,n){switch(t){case"compositionend":return io(n);case"keypress":return n.which!==32?null:(Su=!0,$r);case"textInput":return t=n.data,t===$r&&Su?null:t;default:return null}}function ms(t,n){if(ds)return t==="compositionend"||!Vr&&wu(t,n)?(t=hi(),on=Ri=za=null,ds=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Yr&&n.locale!=="ko"?null:n.data;default:return null}}var Rd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oa(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Rd[t.type]:n==="textarea"}function Eu(t,n,r,c){os?nt?nt.push(c):nt=[c]:os=c,n=gc(n,"onChange"),0<n.length&&(r=new Qr("onChange","change",null,r,c),t.push({event:r,listeners:n}))}var Da=null,sr=null;function rr(t){Nx(t,0)}function lr(t){var n=qn(t);if(Xt(n))return t}function or(t,n){if(t==="change")return n}var ku=!1;if(ya){var Ra;if(ya){var hs="oninput"in document;if(!hs){var Cu=document.createElement("div");Cu.setAttribute("oninput","return;"),hs=typeof Cu.oninput=="function"}Ra=hs}else Ra=!1;ku=Ra&&(!document.documentMode||9<document.documentMode)}function Xr(){Da&&(Da.detachEvent("onpropertychange",Tu),sr=Da=null)}function Tu(t){if(t.propertyName==="value"&&lr(sr)){var n=[];Eu(n,sr,t,Ws(t)),Yl(rr,n)}}function ti(t,n,r){t==="focusin"?(Xr(),Da=n,sr=r,Da.attachEvent("onpropertychange",Tu)):t==="focusout"&&Xr()}function Ld(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lr(sr)}function fs(t,n){if(t==="click")return lr(n)}function Pd(t,n){if(t==="input"||t==="change")return lr(n)}function ni(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Tn=typeof Object.is=="function"?Object.is:ni;function ps(t,n){if(Tn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),c=Object.keys(n);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var p=r[c];if(!rn.call(n,p)||!Tn(t[p],n[p]))return!1}return!0}function Jr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ur(t,n){var r=Jr(t);t=0;for(var c;r;){if(r.nodeType===3){if(c=t+r.textContent.length,t<=n&&c>=n)return{node:r,offset:n-t};t=c}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jr(r)}}function Wr(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Wr(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function cr(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=is(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=is(t.document)}return n}function pi(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var el=ya&&"documentMode"in document&&11>=document.documentMode,gi=null,tl=null,dr=null,gs=!1;function Au(t,n,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;gs||gi==null||gi!==is(c)||(c=gi,"selectionStart"in c&&pi(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),dr&&ps(dr,c)||(dr=c,c=gc(tl,"onSelect"),0<c.length&&(n=new Qr("onSelect","select",null,n,r),t.push({event:n,listeners:c}),n.target=gi)))}function xi(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var xs={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionrun:xi("Transition","TransitionRun"),transitionstart:xi("Transition","TransitionStart"),transitioncancel:xi("Transition","TransitionCancel"),transitionend:xi("Transition","TransitionEnd")},nl={},zu={};ya&&(zu=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function An(t){if(nl[t])return nl[t];if(!xs[t])return t;var n=xs[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in zu)return nl[t]=n[r];return t}var mr=An("animationend"),Mu=An("animationiteration"),hr=An("animationstart"),Id=An("transitionrun"),Ou=An("transitionstart"),Bd=An("transitioncancel"),ys=An("transitionend"),Du=new Map,yi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yi.push("scrollEnd");function ia(t,n){Du.set(t,n),Mi(n,[t])}var fr=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},sa=[],Hn=0,al=0;function pr(){for(var t=Hn,n=al=Hn=0;n<t;){var r=sa[n];sa[n++]=null;var c=sa[n];sa[n++]=null;var p=sa[n];sa[n++]=null;var g=sa[n];if(sa[n++]=null,c!==null&&p!==null){var j=c.pending;j===null?p.next=p:(p.next=j.next,j.next=p),c.pending=p}g!==0&&vs(r,p,g)}}function vi(t,n,r,c){sa[Hn++]=t,sa[Hn++]=n,sa[Hn++]=r,sa[Hn++]=c,al|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function so(t,n,r,c){return vi(t,n,r,c),gr(t)}function La(t,n){return vi(t,null,null,n),gr(t)}function vs(t,n,r){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r);for(var p=!1,g=t.return;g!==null;)g.childLanes|=r,c=g.alternate,c!==null&&(c.childLanes|=r),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(p=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,p&&n!==null&&(p=31-wt(r),t=g.hiddenUpdates,c=t[p],c===null?t[p]=[n]:c.push(n),n.lane=r|536870912),g):null}function gr(t){if(50<zo)throw zo=0,Fm=null,Error(o(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Pi={};function Ud(t,n,r,c){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(t,n,r,c){return new Ud(t,n,r,c)}function il(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Pa(t,n){var r=t.alternate;return r===null?(r=Kn(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function ro(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function xr(t,n,r,c,p,g){var j=0;if(c=t,typeof t=="function")il(t)&&(j=1);else if(typeof t=="string")j=yN(t,r,Z.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ae:return t=Kn(31,r,n,p),t.elementType=ae,t.lanes=g,t;case A:return Ii(r.children,p,g,n);case M:j=8,p|=24;break;case I:return t=Kn(12,r,n,p|2),t.elementType=I,t.lanes=g,t;case G:return t=Kn(13,r,n,p),t.elementType=G,t.lanes=g,t;case V:return t=Kn(19,r,n,p),t.elementType=V,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D:j=10;break e;case R:j=9;break e;case K:j=11;break e;case q:j=14;break e;case Q:j=16,c=null;break e}j=29,r=Error(o(130,t===null?"null":typeof t,"")),c=null}return n=Kn(j,r,n,p),n.elementType=t,n.type=c,n.lanes=g,n}function Ii(t,n,r,c){return t=Kn(7,t,c,n),t.lanes=r,t}function sl(t,n,r){return t=Kn(6,t,null,n),t.lanes=r,t}function lo(t){var n=Kn(18,null,null,0);return n.stateNode=t,n}function oo(t,n,r){return n=Kn(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var s=new WeakMap;function u(t,n){if(typeof t=="object"&&t!==null){var r=s.get(t);return r!==void 0?r:(n={value:t,source:n,stack:mt(n)},s.set(t,n),n)}return{value:t,source:n,stack:mt(n)}}var m=[],y=0,N=null,E=0,F=[],oe=0,pe=null,Ce=1,De="";function Ge(t,n){m[y++]=E,m[y++]=N,N=t,E=n}function ht(t,n,r){F[oe++]=Ce,F[oe++]=De,F[oe++]=pe,pe=t;var c=Ce;t=De;var p=32-wt(c)-1;c&=~(1<<p),r+=1;var g=32-wt(n)+p;if(30<g){var j=p-p%5;g=(c&(1<<j)-1).toString(32),c>>=j,p-=j,Ce=1<<32-wt(n)+p|r<<p|c,De=g+t}else Ce=1<<g|r<<p|c,De=t}function Sn(t){t.return!==null&&(Ge(t,1),ht(t,1,0))}function un(t){for(;t===N;)N=m[--y],m[y]=null,E=m[--y],m[y]=null;for(;t===pe;)pe=F[--oe],F[oe]=null,De=F[--oe],F[oe]=null,Ce=F[--oe],F[oe]=null}function Xn(t,n){F[oe++]=Ce,F[oe++]=De,F[oe++]=pe,Ce=n.id,De=n.overflow,pe=t}var kt=null,Ct=null,xt=!1,bi=null,ra=!1,rl=Error(o(519));function _i(t){var n=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yr(u(n,t)),rl}function uo(t){var n=t.stateNode,r=t.type,c=t.memoizedProps;switch(n[ln]=t,n[gn]=c,r){case"dialog":vt("cancel",n),vt("close",n);break;case"iframe":case"object":case"embed":vt("load",n);break;case"video":case"audio":for(r=0;r<Oo.length;r++)vt(Oo[r],n);break;case"source":vt("error",n);break;case"img":case"image":case"link":vt("error",n),vt("load",n);break;case"details":vt("toggle",n);break;case"input":vt("invalid",n),Xs(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":vt("invalid",n);break;case"textarea":vt("invalid",n),ss(n,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||c.suppressHydrationWarning===!0||Ex(n.textContent,r)?(c.popover!=null&&(vt("beforetoggle",n),vt("toggle",n)),c.onScroll!=null&&vt("scroll",n),c.onScrollEnd!=null&&vt("scrollend",n),c.onClick!=null&&(n.onclick=na),n=!0):n=!1,n||_i(t,!0)}function an(t){for(kt=t.return;kt;)switch(kt.tag){case 5:case 31:case 13:ra=!1;return;case 27:case 3:ra=!0;return;default:kt=kt.return}}function ai(t){if(t!==kt)return!1;if(!xt)return an(t),xt=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||nh(t.type,t.memoizedProps)),r=!r),r&&Ct&&_i(t),an(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Ct=Rx(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Ct=Rx(t)}else n===27?(n=Ct,Os(t.type)?(t=lh,lh=null,Ct=t):Ct=n):Ct=kt?Ba(t.stateNode.nextSibling):null;return!0}function Bi(){Ct=kt=null,xt=!1}function co(){var t=bi;return t!==null&&(ca===null?ca=t:ca.push.apply(ca,t),bi=null),t}function yr(t){bi===null?bi=[t]:bi.push(t)}var vr=O(null),Ni=null,ii=null;function bs(t,n,r){P(vr,n._currentValue),n._currentValue=r}function Ui(t){t._currentValue=vr.current,te(vr)}function Fd(t,n,r){for(;t!==null;){var c=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),t===r)break;t=t.return}}function Zd(t,n,r,c){var p=t.child;for(p!==null&&(p.return=t);p!==null;){var g=p.dependencies;if(g!==null){var j=p.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=p;for(var H=0;H<n.length;H++)if(C.context===n[H]){g.lanes|=r,C=g.alternate,C!==null&&(C.lanes|=r),Fd(g.return,r,t),c||(j=null);break e}g=C.next}}else if(p.tag===18){if(j=p.return,j===null)throw Error(o(341));j.lanes|=r,g=j.alternate,g!==null&&(g.lanes|=r),Fd(j,r,t),j=null}else j=p.child;if(j!==null)j.return=p;else for(j=p;j!==null;){if(j===t){j=null;break}if(p=j.sibling,p!==null){p.return=j.return,j=p;break}j=j.return}p=j}}function ll(t,n,r,c){t=null;for(var p=n,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var j=p.alternate;if(j===null)throw Error(o(387));if(j=j.memoizedProps,j!==null){var C=p.type;Tn(p.pendingProps.value,j.value)||(t!==null?t.push(C):t=[C])}}else if(p===Me.current){if(j=p.alternate,j===null)throw Error(o(387));j.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(t!==null?t.push(Io):t=[Io])}p=p.return}t!==null&&Zd(n,t,r,c),n.flags|=262144}function Ru(t){for(t=t.firstContext;t!==null;){if(!Tn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function br(t){Ni=t,ii=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Rn(t){return dp(Ni,t)}function Lu(t,n){return Ni===null&&br(t),dp(t,n)}function dp(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},ii===null){if(t===null)throw Error(o(308));ii=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else ii=ii.next=n;return r}var f_=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,c){t.push(c)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},p_=e.unstable_scheduleCallback,g_=e.unstable_NormalPriority,xn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qd(){return{controller:new f_,data:new Map,refCount:0}}function mo(t){t.refCount--,t.refCount===0&&p_(g_,function(){t.controller.abort()})}var ho=null,Hd=0,ol=0,ul=null;function x_(t,n){if(ho===null){var r=ho=[];Hd=0,ol=Gm(),ul={status:"pending",value:void 0,then:function(c){r.push(c)}}}return Hd++,n.then(mp,mp),n}function mp(){if(--Hd===0&&ho!==null){ul!==null&&(ul.status="fulfilled");var t=ho;ho=null,ol=0,ul=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function y_(t,n){var r=[],c={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return t.then(function(){c.status="fulfilled",c.value=n;for(var p=0;p<r.length;p++)(0,r[p])(n)},function(p){for(c.status="rejected",c.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),c}var hp=B.S;B.S=function(t,n){$g=Re(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&x_(t,n),hp!==null&&hp(t,n)};var _r=O(null);function Kd(){var t=_r.current;return t!==null?t:Qt.pooledCache}function Pu(t,n){n===null?P(_r,_r.current):P(_r,n.pool)}function fp(){var t=Kd();return t===null?null:{parent:xn._currentValue,pool:t}}var cl=Error(o(460)),Qd=Error(o(474)),Iu=Error(o(542)),Bu={then:function(){}};function pp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function gp(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(na,na),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,yp(t),t;default:if(typeof n.status=="string")n.then(na,na);else{if(t=Qt,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=n,t.status="pending",t.then(function(c){if(n.status==="pending"){var p=n;p.status="fulfilled",p.value=c}},function(c){if(n.status==="pending"){var p=n;p.status="rejected",p.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,yp(t),t}throw jr=n,cl}}function Nr(t){try{var n=t._init;return n(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(jr=r,cl):r}}var jr=null;function xp(){if(jr===null)throw Error(o(459));var t=jr;return jr=null,t}function yp(t){if(t===cl||t===Iu)throw Error(o(483))}var dl=null,fo=0;function Uu(t){var n=fo;return fo+=1,dl===null&&(dl=[]),gp(dl,t,n)}function po(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Fu(t,n){throw n.$$typeof===T?Error(o(525)):(t=Object.prototype.toString.call(n),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function vp(t){function n(le,$){if(t){var he=le.deletions;he===null?(le.deletions=[$],le.flags|=16):he.push($)}}function r(le,$){if(!t)return null;for(;$!==null;)n(le,$),$=$.sibling;return null}function c(le){for(var $=new Map;le!==null;)le.key!==null?$.set(le.key,le):$.set(le.index,le),le=le.sibling;return $}function p(le,$){return le=Pa(le,$),le.index=0,le.sibling=null,le}function g(le,$,he){return le.index=he,t?(he=le.alternate,he!==null?(he=he.index,he<$?(le.flags|=67108866,$):he):(le.flags|=67108866,$)):(le.flags|=1048576,$)}function j(le){return t&&le.alternate===null&&(le.flags|=67108866),le}function C(le,$,he,we){return $===null||$.tag!==6?($=sl(he,le.mode,we),$.return=le,$):($=p($,he),$.return=le,$)}function H(le,$,he,we){var Je=he.type;return Je===A?je(le,$,he.props.children,we,he.key):$!==null&&($.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===Q&&Nr(Je)===$.type)?($=p($,he.props),po($,he),$.return=le,$):($=xr(he.type,he.key,he.props,null,le.mode,we),po($,he),$.return=le,$)}function fe(le,$,he,we){return $===null||$.tag!==4||$.stateNode.containerInfo!==he.containerInfo||$.stateNode.implementation!==he.implementation?($=oo(he,le.mode,we),$.return=le,$):($=p($,he.children||[]),$.return=le,$)}function je(le,$,he,we,Je){return $===null||$.tag!==7?($=Ii(he,le.mode,we,Je),$.return=le,$):($=p($,he),$.return=le,$)}function Te(le,$,he){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=sl(""+$,le.mode,he),$.return=le,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case z:return he=xr($.type,$.key,$.props,null,le.mode,he),po(he,$),he.return=le,he;case k:return $=oo($,le.mode,he),$.return=le,$;case Q:return $=Nr($),Te(le,$,he)}if(W($)||ue($))return $=Ii($,le.mode,he,null),$.return=le,$;if(typeof $.then=="function")return Te(le,Uu($),he);if($.$$typeof===D)return Te(le,Lu(le,$),he);Fu(le,$)}return null}function ge(le,$,he,we){var Je=$!==null?$.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Je!==null?null:C(le,$,""+he,we);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case z:return he.key===Je?H(le,$,he,we):null;case k:return he.key===Je?fe(le,$,he,we):null;case Q:return he=Nr(he),ge(le,$,he,we)}if(W(he)||ue(he))return Je!==null?null:je(le,$,he,we,null);if(typeof he.then=="function")return ge(le,$,Uu(he),we);if(he.$$typeof===D)return ge(le,$,Lu(le,he),we);Fu(le,he)}return null}function xe(le,$,he,we,Je){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return le=le.get(he)||null,C($,le,""+we,Je);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case z:return le=le.get(we.key===null?he:we.key)||null,H($,le,we,Je);case k:return le=le.get(we.key===null?he:we.key)||null,fe($,le,we,Je);case Q:return we=Nr(we),xe(le,$,he,we,Je)}if(W(we)||ue(we))return le=le.get(he)||null,je($,le,we,Je,null);if(typeof we.then=="function")return xe(le,$,he,Uu(we),Je);if(we.$$typeof===D)return xe(le,$,he,Lu($,we),Je);Fu($,we)}return null}function Fe(le,$,he,we){for(var Je=null,Tt=null,Qe=$,ft=$=0,jt=null;Qe!==null&&ft<he.length;ft++){Qe.index>ft?(jt=Qe,Qe=null):jt=Qe.sibling;var At=ge(le,Qe,he[ft],we);if(At===null){Qe===null&&(Qe=jt);break}t&&Qe&&At.alternate===null&&n(le,Qe),$=g(At,$,ft),Tt===null?Je=At:Tt.sibling=At,Tt=At,Qe=jt}if(ft===he.length)return r(le,Qe),xt&&Ge(le,ft),Je;if(Qe===null){for(;ft<he.length;ft++)Qe=Te(le,he[ft],we),Qe!==null&&($=g(Qe,$,ft),Tt===null?Je=Qe:Tt.sibling=Qe,Tt=Qe);return xt&&Ge(le,ft),Je}for(Qe=c(Qe);ft<he.length;ft++)jt=xe(Qe,le,ft,he[ft],we),jt!==null&&(t&&jt.alternate!==null&&Qe.delete(jt.key===null?ft:jt.key),$=g(jt,$,ft),Tt===null?Je=jt:Tt.sibling=jt,Tt=jt);return t&&Qe.forEach(function(Is){return n(le,Is)}),xt&&Ge(le,ft),Je}function et(le,$,he,we){if(he==null)throw Error(o(151));for(var Je=null,Tt=null,Qe=$,ft=$=0,jt=null,At=he.next();Qe!==null&&!At.done;ft++,At=he.next()){Qe.index>ft?(jt=Qe,Qe=null):jt=Qe.sibling;var Is=ge(le,Qe,At.value,we);if(Is===null){Qe===null&&(Qe=jt);break}t&&Qe&&Is.alternate===null&&n(le,Qe),$=g(Is,$,ft),Tt===null?Je=Is:Tt.sibling=Is,Tt=Is,Qe=jt}if(At.done)return r(le,Qe),xt&&Ge(le,ft),Je;if(Qe===null){for(;!At.done;ft++,At=he.next())At=Te(le,At.value,we),At!==null&&($=g(At,$,ft),Tt===null?Je=At:Tt.sibling=At,Tt=At);return xt&&Ge(le,ft),Je}for(Qe=c(Qe);!At.done;ft++,At=he.next())At=xe(Qe,le,ft,At.value,we),At!==null&&(t&&At.alternate!==null&&Qe.delete(At.key===null?ft:At.key),$=g(At,$,ft),Tt===null?Je=At:Tt.sibling=At,Tt=At);return t&&Qe.forEach(function(TN){return n(le,TN)}),xt&&Ge(le,ft),Je}function Ht(le,$,he,we){if(typeof he=="object"&&he!==null&&he.type===A&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case z:e:{for(var Je=he.key;$!==null;){if($.key===Je){if(Je=he.type,Je===A){if($.tag===7){r(le,$.sibling),we=p($,he.props.children),we.return=le,le=we;break e}}else if($.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===Q&&Nr(Je)===$.type){r(le,$.sibling),we=p($,he.props),po(we,he),we.return=le,le=we;break e}r(le,$);break}else n(le,$);$=$.sibling}he.type===A?(we=Ii(he.props.children,le.mode,we,he.key),we.return=le,le=we):(we=xr(he.type,he.key,he.props,null,le.mode,we),po(we,he),we.return=le,le=we)}return j(le);case k:e:{for(Je=he.key;$!==null;){if($.key===Je)if($.tag===4&&$.stateNode.containerInfo===he.containerInfo&&$.stateNode.implementation===he.implementation){r(le,$.sibling),we=p($,he.children||[]),we.return=le,le=we;break e}else{r(le,$);break}else n(le,$);$=$.sibling}we=oo(he,le.mode,we),we.return=le,le=we}return j(le);case Q:return he=Nr(he),Ht(le,$,he,we)}if(W(he))return Fe(le,$,he,we);if(ue(he)){if(Je=ue(he),typeof Je!="function")throw Error(o(150));return he=Je.call(he),et(le,$,he,we)}if(typeof he.then=="function")return Ht(le,$,Uu(he),we);if(he.$$typeof===D)return Ht(le,$,Lu(le,he),we);Fu(le,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,$!==null&&$.tag===6?(r(le,$.sibling),we=p($,he),we.return=le,le=we):(r(le,$),we=sl(he,le.mode,we),we.return=le,le=we),j(le)):r(le,$)}return function(le,$,he,we){try{fo=0;var Je=Ht(le,$,he,we);return dl=null,Je}catch(Qe){if(Qe===cl||Qe===Iu)throw Qe;var Tt=Kn(29,Qe,null,le.mode);return Tt.lanes=we,Tt.return=le,Tt}}}var Sr=vp(!0),bp=vp(!1),_s=!1;function Gd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vd(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ns(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function js(t,n,r){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Mt&2)!==0){var p=c.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),c.pending=n,n=gr(t),vs(t,null,r),n}return vi(t,c,n,r),gr(t)}function go(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var c=n.lanes;c&=t.pendingLanes,r|=c,n.lanes=r,Ya(t,r)}}function Yd(t,n){var r=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var p=null,g=null;if(r=r.firstBaseUpdate,r!==null){do{var j={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};g===null?p=g=j:g=g.next=j,r=r.next}while(r!==null);g===null?p=g=n:g=g.next=n}else p=g=n;r={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var $d=!1;function xo(){if($d){var t=ul;if(t!==null)throw t}}function yo(t,n,r,c){$d=!1;var p=t.updateQueue;_s=!1;var g=p.firstBaseUpdate,j=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var H=C,fe=H.next;H.next=null,j===null?g=fe:j.next=fe,j=H;var je=t.alternate;je!==null&&(je=je.updateQueue,C=je.lastBaseUpdate,C!==j&&(C===null?je.firstBaseUpdate=fe:C.next=fe,je.lastBaseUpdate=H))}if(g!==null){var Te=p.baseState;j=0,je=fe=H=null,C=g;do{var ge=C.lane&-536870913,xe=ge!==C.lane;if(xe?(Nt&ge)===ge:(c&ge)===ge){ge!==0&&ge===ol&&($d=!0),je!==null&&(je=je.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Fe=t,et=C;ge=n;var Ht=r;switch(et.tag){case 1:if(Fe=et.payload,typeof Fe=="function"){Te=Fe.call(Ht,Te,ge);break e}Te=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=et.payload,ge=typeof Fe=="function"?Fe.call(Ht,Te,ge):Fe,ge==null)break e;Te=w({},Te,ge);break e;case 2:_s=!0}}ge=C.callback,ge!==null&&(t.flags|=64,xe&&(t.flags|=8192),xe=p.callbacks,xe===null?p.callbacks=[ge]:xe.push(ge))}else xe={lane:ge,tag:C.tag,payload:C.payload,callback:C.callback,next:null},je===null?(fe=je=xe,H=Te):je=je.next=xe,j|=ge;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;xe=C,C=xe.next,xe.next=null,p.lastBaseUpdate=xe,p.shared.pending=null}}while(!0);je===null&&(H=Te),p.baseState=H,p.firstBaseUpdate=fe,p.lastBaseUpdate=je,g===null&&(p.shared.lanes=0),Cs|=j,t.lanes=j,t.memoizedState=Te}}function _p(t,n){if(typeof t!="function")throw Error(o(191,t));t.call(n)}function Np(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)_p(r[t],n)}var ml=O(null),Zu=O(0);function jp(t,n){t=Yi,P(Zu,t),P(ml,n),Yi=t|n.baseLanes}function Xd(){P(Zu,Yi),P(ml,ml.current)}function Jd(){Yi=Zu.current,te(ml),te(Zu)}var _a=O(null),Ia=null;function Ss(t){var n=t.alternate;P(fn,fn.current&1),P(_a,t),Ia===null&&(n===null||ml.current!==null||n.memoizedState!==null)&&(Ia=t)}function Wd(t){P(fn,fn.current),P(_a,t),Ia===null&&(Ia=t)}function Sp(t){t.tag===22?(P(fn,fn.current),P(_a,t),Ia===null&&(Ia=t)):ws()}function ws(){P(fn,fn.current),P(_a,_a.current)}function Na(t){te(_a),Ia===t&&(Ia=null),te(fn)}var fn=O(0);function qu(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||sh(r)||rh(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Fi=0,dt=null,Zt=null,yn=null,Hu=!1,hl=!1,wr=!1,Ku=0,vo=0,fl=null,v_=0;function cn(){throw Error(o(321))}function em(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!Tn(t[r],n[r]))return!1;return!0}function tm(t,n,r,c,p,g){return Fi=g,dt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,B.H=t===null||t.memoizedState===null?lg:gm,wr=!1,g=r(c,p),wr=!1,hl&&(g=Ep(n,r,c,p)),wp(t),g}function wp(t){B.H=No;var n=Zt!==null&&Zt.next!==null;if(Fi=0,yn=Zt=dt=null,Hu=!1,vo=0,fl=null,n)throw Error(o(300));t===null||vn||(t=t.dependencies,t!==null&&Ru(t)&&(vn=!0))}function Ep(t,n,r,c){dt=t;var p=0;do{if(hl&&(fl=null),vo=0,hl=!1,25<=p)throw Error(o(301));if(p+=1,yn=Zt=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}B.H=og,g=n(r,c)}while(hl);return g}function b_(){var t=B.H,n=t.useState()[0];return n=typeof n.then=="function"?bo(n):n,t=t.useState()[0],(Zt!==null?Zt.memoizedState:null)!==t&&(dt.flags|=1024),n}function nm(){var t=Ku!==0;return Ku=0,t}function am(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function im(t){if(Hu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Hu=!1}Fi=0,yn=Zt=dt=null,hl=!1,vo=Ku=0,fl=null}function Jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?dt.memoizedState=yn=t:yn=yn.next=t,yn}function pn(){if(Zt===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=Zt.next;var n=yn===null?dt.memoizedState:yn.next;if(n!==null)yn=n,Zt=t;else{if(t===null)throw dt.alternate===null?Error(o(467)):Error(o(310));Zt=t,t={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},yn===null?dt.memoizedState=yn=t:yn=yn.next=t}return yn}function Qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bo(t){var n=vo;return vo+=1,fl===null&&(fl=[]),t=gp(fl,t,n),n=dt,(yn===null?n.memoizedState:yn.next)===null&&(n=n.alternate,B.H=n===null||n.memoizedState===null?lg:gm),t}function Gu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return bo(t);if(t.$$typeof===D)return Rn(t)}throw Error(o(438,String(t)))}function sm(t){var n=null,r=dt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var c=dt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(p){return p.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Qu(),dt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),c=0;c<t;c++)r[c]=ve;return n.index++,r}function Zi(t,n){return typeof n=="function"?n(t):n}function Vu(t){var n=pn();return rm(n,Zt,t)}function rm(t,n,r){var c=t.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=r;var p=t.baseQueue,g=c.pending;if(g!==null){if(p!==null){var j=p.next;p.next=g.next,g.next=j}n.baseQueue=p=g,c.pending=null}if(g=t.baseState,p===null)t.memoizedState=g;else{n=p.next;var C=j=null,H=null,fe=n,je=!1;do{var Te=fe.lane&-536870913;if(Te!==fe.lane?(Nt&Te)===Te:(Fi&Te)===Te){var ge=fe.revertLane;if(ge===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),Te===ol&&(je=!0);else if((Fi&ge)===ge){fe=fe.next,ge===ol&&(je=!0);continue}else Te={lane:0,revertLane:fe.revertLane,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},H===null?(C=H=Te,j=g):H=H.next=Te,dt.lanes|=ge,Cs|=ge;Te=fe.action,wr&&r(g,Te),g=fe.hasEagerState?fe.eagerState:r(g,Te)}else ge={lane:Te,revertLane:fe.revertLane,gesture:fe.gesture,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},H===null?(C=H=ge,j=g):H=H.next=ge,dt.lanes|=Te,Cs|=Te;fe=fe.next}while(fe!==null&&fe!==n);if(H===null?j=g:H.next=C,!Tn(g,t.memoizedState)&&(vn=!0,je&&(r=ul,r!==null)))throw r;t.memoizedState=g,t.baseState=j,t.baseQueue=H,c.lastRenderedState=g}return p===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function lm(t){var n=pn(),r=n.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=t;var c=r.dispatch,p=r.pending,g=n.memoizedState;if(p!==null){r.pending=null;var j=p=p.next;do g=t(g,j.action),j=j.next;while(j!==p);Tn(g,n.memoizedState)||(vn=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),r.lastRenderedState=g}return[g,c]}function kp(t,n,r){var c=dt,p=pn(),g=xt;if(g){if(r===void 0)throw Error(o(407));r=r()}else r=n();var j=!Tn((Zt||p).memoizedState,r);if(j&&(p.memoizedState=r,vn=!0),p=p.queue,cm(Ap.bind(null,c,p,t),[t]),p.getSnapshot!==n||j||yn!==null&&yn.memoizedState.tag&1){if(c.flags|=2048,pl(9,{destroy:void 0},Tp.bind(null,c,p,r,n),null),Qt===null)throw Error(o(349));g||(Fi&127)!==0||Cp(c,n,r)}return r}function Cp(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=dt.updateQueue,n===null?(n=Qu(),dt.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function Tp(t,n,r,c){n.value=r,n.getSnapshot=c,zp(n)&&Mp(t)}function Ap(t,n,r){return r(function(){zp(n)&&Mp(t)})}function zp(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!Tn(t,r)}catch{return!0}}function Mp(t){var n=La(t,2);n!==null&&da(n,t,2)}function om(t){var n=Jn();if(typeof t=="function"){var r=t;if(t=r(),wr){Vt(!0);try{r()}finally{Vt(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:t},n}function Op(t,n,r,c){return t.baseState=r,rm(t,Zt,typeof c=="function"?c:Zi)}function __(t,n,r,c,p){if(Xu(t))throw Error(o(485));if(t=n.action,t!==null){var g={payload:p,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){g.listeners.push(j)}};B.T!==null?r(!0):g.isTransition=!1,c(g),r=n.pending,r===null?(g.next=n.pending=g,Dp(n,g)):(g.next=r.next,n.pending=r.next=g)}}function Dp(t,n){var r=n.action,c=n.payload,p=t.state;if(n.isTransition){var g=B.T,j={};B.T=j;try{var C=r(p,c),H=B.S;H!==null&&H(j,C),Rp(t,n,C)}catch(fe){um(t,n,fe)}finally{g!==null&&j.types!==null&&(g.types=j.types),B.T=g}}else try{g=r(p,c),Rp(t,n,g)}catch(fe){um(t,n,fe)}}function Rp(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Lp(t,n,c)},function(c){return um(t,n,c)}):Lp(t,n,r)}function Lp(t,n,r){n.status="fulfilled",n.value=r,Pp(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,Dp(t,r)))}function um(t,n,r){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=r,Pp(n),n=n.next;while(n!==c)}t.action=null}function Pp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Ip(t,n){return n}function Bp(t,n){if(xt){var r=Qt.formState;if(r!==null){e:{var c=dt;if(xt){if(Ct){t:{for(var p=Ct,g=ra;p.nodeType!==8;){if(!g){p=null;break t}if(p=Ba(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){Ct=Ba(p.nextSibling),c=p.data==="F!";break e}}_i(c)}c=!1}c&&(n=r[0])}}return r=Jn(),r.memoizedState=r.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ip,lastRenderedState:n},r.queue=c,r=ig.bind(null,dt,c),c.dispatch=r,c=om(!1),g=pm.bind(null,dt,!1,c.queue),c=Jn(),p={state:n,dispatch:null,action:t,pending:null},c.queue=p,r=__.bind(null,dt,p,g,r),p.dispatch=r,c.memoizedState=t,[n,r,!1]}function Up(t){var n=pn();return Fp(n,Zt,t)}function Fp(t,n,r){if(n=rm(t,n,Ip)[0],t=Vu(Zi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=bo(n)}catch(j){throw j===cl?Iu:j}else c=n;n=pn();var p=n.queue,g=p.dispatch;return r!==n.memoizedState&&(dt.flags|=2048,pl(9,{destroy:void 0},N_.bind(null,p,r),null)),[c,g,t]}function N_(t,n){t.action=n}function Zp(t){var n=pn(),r=Zt;if(r!==null)return Fp(n,r,t);pn(),n=n.memoizedState,r=pn();var c=r.queue.dispatch;return r.memoizedState=t,[n,c,!1]}function pl(t,n,r,c){return t={tag:t,create:r,deps:c,inst:n,next:null},n=dt.updateQueue,n===null&&(n=Qu(),dt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(c=r.next,r.next=t,t.next=c,n.lastEffect=t),t}function qp(){return pn().memoizedState}function Yu(t,n,r,c){var p=Jn();dt.flags|=t,p.memoizedState=pl(1|n,{destroy:void 0},r,c===void 0?null:c)}function $u(t,n,r,c){var p=pn();c=c===void 0?null:c;var g=p.memoizedState.inst;Zt!==null&&c!==null&&em(c,Zt.memoizedState.deps)?p.memoizedState=pl(n,g,r,c):(dt.flags|=t,p.memoizedState=pl(1|n,g,r,c))}function Hp(t,n){Yu(8390656,8,t,n)}function cm(t,n){$u(2048,8,t,n)}function j_(t){dt.flags|=4;var n=dt.updateQueue;if(n===null)n=Qu(),dt.updateQueue=n,n.events=[t];else{var r=n.events;r===null?n.events=[t]:r.push(t)}}function Kp(t){var n=pn().memoizedState;return j_({ref:n,nextImpl:t}),function(){if((Mt&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}function Qp(t,n){return $u(4,2,t,n)}function Gp(t,n){return $u(4,4,t,n)}function Vp(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Yp(t,n,r){r=r!=null?r.concat([t]):null,$u(4,4,Vp.bind(null,n,t),r)}function dm(){}function $p(t,n){var r=pn();n=n===void 0?null:n;var c=r.memoizedState;return n!==null&&em(n,c[1])?c[0]:(r.memoizedState=[t,n],t)}function Xp(t,n){var r=pn();n=n===void 0?null:n;var c=r.memoizedState;if(n!==null&&em(n,c[1]))return c[0];if(c=t(),wr){Vt(!0);try{t()}finally{Vt(!1)}}return r.memoizedState=[c,n],c}function mm(t,n,r){return r===void 0||(Fi&1073741824)!==0&&(Nt&261930)===0?t.memoizedState=n:(t.memoizedState=r,t=Jg(),dt.lanes|=t,Cs|=t,r)}function Jp(t,n,r,c){return Tn(r,n)?r:ml.current!==null?(t=mm(t,r,c),Tn(t,n)||(vn=!0),t):(Fi&42)===0||(Fi&1073741824)!==0&&(Nt&261930)===0?(vn=!0,t.memoizedState=r):(t=Jg(),dt.lanes|=t,Cs|=t,n)}function Wp(t,n,r,c,p){var g=X.p;X.p=g!==0&&8>g?g:8;var j=B.T,C={};B.T=C,pm(t,!1,n,r);try{var H=p(),fe=B.S;if(fe!==null&&fe(C,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var je=y_(H,c);_o(t,n,je,wa(t))}else _o(t,n,c,wa(t))}catch(Te){_o(t,n,{then:function(){},status:"rejected",reason:Te},wa())}finally{X.p=g,j!==null&&C.types!==null&&(j.types=C.types),B.T=j}}function S_(){}function hm(t,n,r,c){if(t.tag!==5)throw Error(o(476));var p=eg(t).queue;Wp(t,p,n,de,r===null?S_:function(){return tg(t),r(c)})}function eg(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:de},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function tg(t){var n=eg(t);n.next===null&&(n=t.alternate.memoizedState),_o(t,n.next.queue,{},wa())}function fm(){return Rn(Io)}function ng(){return pn().memoizedState}function ag(){return pn().memoizedState}function w_(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=wa();t=Ns(r);var c=js(n,t,r);c!==null&&(da(c,n,r),go(c,n,r)),n={cache:qd()},t.payload=n;return}n=n.return}}function E_(t,n,r){var c=wa();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Xu(t)?sg(n,r):(r=so(t,n,r,c),r!==null&&(da(r,t,c),rg(r,n,c)))}function ig(t,n,r){var c=wa();_o(t,n,r,c)}function _o(t,n,r,c){var p={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Xu(t))sg(n,p);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var j=n.lastRenderedState,C=g(j,r);if(p.hasEagerState=!0,p.eagerState=C,Tn(C,j))return vi(t,n,p,0),Qt===null&&pr(),!1}catch{}if(r=so(t,n,p,c),r!==null)return da(r,t,c),rg(r,n,c),!0}return!1}function pm(t,n,r,c){if(c={lane:2,revertLane:Gm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Xu(t)){if(n)throw Error(o(479))}else n=so(t,r,c,2),n!==null&&da(n,t,2)}function Xu(t){var n=t.alternate;return t===dt||n!==null&&n===dt}function sg(t,n){hl=Hu=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function rg(t,n,r){if((r&4194048)!==0){var c=n.lanes;c&=t.pendingLanes,r|=c,n.lanes=r,Ya(t,r)}}var No={readContext:Rn,use:Gu,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};No.useEffectEvent=cn;var lg={readContext:Rn,use:Gu,useCallback:function(t,n){return Jn().memoizedState=[t,n===void 0?null:n],t},useContext:Rn,useEffect:Hp,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,Yu(4194308,4,Vp.bind(null,n,t),r)},useLayoutEffect:function(t,n){return Yu(4194308,4,t,n)},useInsertionEffect:function(t,n){Yu(4,2,t,n)},useMemo:function(t,n){var r=Jn();n=n===void 0?null:n;var c=t();if(wr){Vt(!0);try{t()}finally{Vt(!1)}}return r.memoizedState=[c,n],c},useReducer:function(t,n,r){var c=Jn();if(r!==void 0){var p=r(n);if(wr){Vt(!0);try{r(n)}finally{Vt(!1)}}}else p=n;return c.memoizedState=c.baseState=p,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:p},c.queue=t,t=t.dispatch=E_.bind(null,dt,t),[c.memoizedState,t]},useRef:function(t){var n=Jn();return t={current:t},n.memoizedState=t},useState:function(t){t=om(t);var n=t.queue,r=ig.bind(null,dt,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:dm,useDeferredValue:function(t,n){var r=Jn();return mm(r,t,n)},useTransition:function(){var t=om(!1);return t=Wp.bind(null,dt,t.queue,!0,!1),Jn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var c=dt,p=Jn();if(xt){if(r===void 0)throw Error(o(407));r=r()}else{if(r=n(),Qt===null)throw Error(o(349));(Nt&127)!==0||Cp(c,n,r)}p.memoizedState=r;var g={value:r,getSnapshot:n};return p.queue=g,Hp(Ap.bind(null,c,g,t),[t]),c.flags|=2048,pl(9,{destroy:void 0},Tp.bind(null,c,g,r,n),null),r},useId:function(){var t=Jn(),n=Qt.identifierPrefix;if(xt){var r=De,c=Ce;r=(c&~(1<<32-wt(c)-1)).toString(32)+r,n="_"+n+"R_"+r,r=Ku++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=v_++,n="_"+n+"r_"+r.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:fm,useFormState:Bp,useActionState:Bp,useOptimistic:function(t){var n=Jn();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=pm.bind(null,dt,!0,r),r.dispatch=n,[t,n]},useMemoCache:sm,useCacheRefresh:function(){return Jn().memoizedState=w_.bind(null,dt)},useEffectEvent:function(t){var n=Jn(),r={impl:t};return n.memoizedState=r,function(){if((Mt&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}},gm={readContext:Rn,use:Gu,useCallback:$p,useContext:Rn,useEffect:cm,useImperativeHandle:Yp,useInsertionEffect:Qp,useLayoutEffect:Gp,useMemo:Xp,useReducer:Vu,useRef:qp,useState:function(){return Vu(Zi)},useDebugValue:dm,useDeferredValue:function(t,n){var r=pn();return Jp(r,Zt.memoizedState,t,n)},useTransition:function(){var t=Vu(Zi)[0],n=pn().memoizedState;return[typeof t=="boolean"?t:bo(t),n]},useSyncExternalStore:kp,useId:ng,useHostTransitionStatus:fm,useFormState:Up,useActionState:Up,useOptimistic:function(t,n){var r=pn();return Op(r,Zt,t,n)},useMemoCache:sm,useCacheRefresh:ag};gm.useEffectEvent=Kp;var og={readContext:Rn,use:Gu,useCallback:$p,useContext:Rn,useEffect:cm,useImperativeHandle:Yp,useInsertionEffect:Qp,useLayoutEffect:Gp,useMemo:Xp,useReducer:lm,useRef:qp,useState:function(){return lm(Zi)},useDebugValue:dm,useDeferredValue:function(t,n){var r=pn();return Zt===null?mm(r,t,n):Jp(r,Zt.memoizedState,t,n)},useTransition:function(){var t=lm(Zi)[0],n=pn().memoizedState;return[typeof t=="boolean"?t:bo(t),n]},useSyncExternalStore:kp,useId:ng,useHostTransitionStatus:fm,useFormState:Zp,useActionState:Zp,useOptimistic:function(t,n){var r=pn();return Zt!==null?Op(r,Zt,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:sm,useCacheRefresh:ag};og.useEffectEvent=Kp;function xm(t,n,r,c){n=t.memoizedState,r=r(c,n),r=r==null?n:w({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ym={enqueueSetState:function(t,n,r){t=t._reactInternals;var c=wa(),p=Ns(c);p.payload=n,r!=null&&(p.callback=r),n=js(t,p,c),n!==null&&(da(n,t,c),go(n,t,c))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var c=wa(),p=Ns(c);p.tag=1,p.payload=n,r!=null&&(p.callback=r),n=js(t,p,c),n!==null&&(da(n,t,c),go(n,t,c))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=wa(),c=Ns(r);c.tag=2,n!=null&&(c.callback=n),n=js(t,c,r),n!==null&&(da(n,t,r),go(n,t,r))}};function ug(t,n,r,c,p,g,j){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,g,j):n.prototype&&n.prototype.isPureReactComponent?!ps(r,c)||!ps(p,g):!0}function cg(t,n,r,c){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,c),n.state!==t&&ym.enqueueReplaceState(n,n.state,null)}function Er(t,n){var r=n;if("ref"in n){r={};for(var c in n)c!=="ref"&&(r[c]=n[c])}if(t=t.defaultProps){r===n&&(r=w({},r));for(var p in t)r[p]===void 0&&(r[p]=t[p])}return r}function dg(t){fr(t)}function mg(t){console.error(t)}function hg(t){fr(t)}function Ju(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function fg(t,n,r){try{var c=t.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function vm(t,n,r){return r=Ns(r),r.tag=3,r.payload={element:null},r.callback=function(){Ju(t,n)},r}function pg(t){return t=Ns(t),t.tag=3,t}function gg(t,n,r,c){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var g=c.value;t.payload=function(){return p(g)},t.callback=function(){fg(n,r,c)}}var j=r.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(t.callback=function(){fg(n,r,c),typeof p!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function k_(t,n,r,c,p){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=r.alternate,n!==null&&ll(n,r,p,!0),r=_a.current,r!==null){switch(r.tag){case 31:case 13:return Ia===null?cc():r.alternate===null&&dn===0&&(dn=3),r.flags&=-257,r.flags|=65536,r.lanes=p,c===Bu?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([c]):n.add(c),Hm(t,c,p)),!1;case 22:return r.flags|=65536,c===Bu?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([c]):r.add(c)),Hm(t,c,p)),!1}throw Error(o(435,r.tag))}return Hm(t,c,p),cc(),!1}if(xt)return n=_a.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=p,c!==rl&&(t=Error(o(422),{cause:c}),yr(u(t,r)))):(c!==rl&&(n=Error(o(423),{cause:c}),yr(u(n,r))),t=t.current.alternate,t.flags|=65536,p&=-p,t.lanes|=p,c=u(c,r),p=vm(t.stateNode,c,p),Yd(t,p),dn!==4&&(dn=2)),!1;var g=Error(o(520),{cause:c});if(g=u(g,r),Ao===null?Ao=[g]:Ao.push(g),dn!==4&&(dn=2),n===null)return!0;c=u(c,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=p&-p,r.lanes|=t,t=vm(r.stateNode,c,t),Yd(r,t),!1;case 1:if(n=r.type,g=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ts===null||!Ts.has(g))))return r.flags|=65536,p&=-p,r.lanes|=p,p=pg(p),gg(p,t,r,c),Yd(r,p),!1}r=r.return}while(r!==null);return!1}var bm=Error(o(461)),vn=!1;function Ln(t,n,r,c){n.child=t===null?bp(n,null,r,c):Sr(n,t.child,r,c)}function xg(t,n,r,c,p){r=r.render;var g=n.ref;if("ref"in c){var j={};for(var C in c)C!=="ref"&&(j[C]=c[C])}else j=c;return br(n),c=tm(t,n,r,j,g,p),C=nm(),t!==null&&!vn?(am(t,n,p),qi(t,n,p)):(xt&&C&&Sn(n),n.flags|=1,Ln(t,n,c,p),n.child)}function yg(t,n,r,c,p){if(t===null){var g=r.type;return typeof g=="function"&&!il(g)&&g.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=g,vg(t,n,g,c,p)):(t=xr(r.type,null,c,n,n.mode,p),t.ref=n.ref,t.return=n,n.child=t)}if(g=t.child,!Cm(t,p)){var j=g.memoizedProps;if(r=r.compare,r=r!==null?r:ps,r(j,c)&&t.ref===n.ref)return qi(t,n,p)}return n.flags|=1,t=Pa(g,c),t.ref=n.ref,t.return=n,n.child=t}function vg(t,n,r,c,p){if(t!==null){var g=t.memoizedProps;if(ps(g,c)&&t.ref===n.ref)if(vn=!1,n.pendingProps=c=g,Cm(t,p))(t.flags&131072)!==0&&(vn=!0);else return n.lanes=t.lanes,qi(t,n,p)}return _m(t,n,r,c,p)}function bg(t,n,r,c){var p=c.children,g=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((n.flags&128)!==0){if(g=g!==null?g.baseLanes|r:r,t!==null){for(c=n.child=t.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~g}else c=0,n.child=null;return _g(t,n,g,r,c)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Pu(n,g!==null?g.cachePool:null),g!==null?jp(n,g):Xd(),Sp(n);else return c=n.lanes=536870912,_g(t,n,g!==null?g.baseLanes|r:r,r,c)}else g!==null?(Pu(n,g.cachePool),jp(n,g),ws(),n.memoizedState=null):(t!==null&&Pu(n,null),Xd(),ws());return Ln(t,n,p,r),n.child}function jo(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function _g(t,n,r,c,p){var g=Kd();return g=g===null?null:{parent:xn._currentValue,pool:g},n.memoizedState={baseLanes:r,cachePool:g},t!==null&&Pu(n,null),Xd(),Sp(n),t!==null&&ll(t,n,c,!0),n.childLanes=p,null}function Wu(t,n){return n=tc({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function Ng(t,n,r){return Sr(n,t.child,null,r),t=Wu(n,n.pendingProps),t.flags|=2,Na(n),n.memoizedState=null,t}function C_(t,n,r){var c=n.pendingProps,p=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(xt){if(c.mode==="hidden")return t=Wu(n,c),n.lanes=536870912,jo(null,t);if(Wd(n),(t=Ct)?(t=Dx(t,ra),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:pe!==null?{id:Ce,overflow:De}:null,retryLane:536870912,hydrationErrors:null},r=lo(t),r.return=n,n.child=r,kt=n,Ct=null)):t=null,t===null)throw _i(n);return n.lanes=536870912,null}return Wu(n,c)}var g=t.memoizedState;if(g!==null){var j=g.dehydrated;if(Wd(n),p)if(n.flags&256)n.flags&=-257,n=Ng(t,n,r);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(o(558));else if(vn||ll(t,n,r,!1),p=(r&t.childLanes)!==0,vn||p){if(c=Qt,c!==null&&(j=Ai(c,r),j!==0&&j!==g.retryLane))throw g.retryLane=j,La(t,j),da(c,t,j),bm;cc(),n=Ng(t,n,r)}else t=g.treeContext,Ct=Ba(j.nextSibling),kt=n,xt=!0,bi=null,ra=!1,t!==null&&Xn(n,t),n=Wu(n,c),n.flags|=4096;return n}return t=Pa(t.child,{mode:c.mode,children:c.children}),t.ref=n.ref,n.child=t,t.return=n,t}function ec(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function _m(t,n,r,c,p){return br(n),r=tm(t,n,r,c,void 0,p),c=nm(),t!==null&&!vn?(am(t,n,p),qi(t,n,p)):(xt&&c&&Sn(n),n.flags|=1,Ln(t,n,r,p),n.child)}function jg(t,n,r,c,p,g){return br(n),n.updateQueue=null,r=Ep(n,c,r,p),wp(t),c=nm(),t!==null&&!vn?(am(t,n,g),qi(t,n,g)):(xt&&c&&Sn(n),n.flags|=1,Ln(t,n,r,g),n.child)}function Sg(t,n,r,c,p){if(br(n),n.stateNode===null){var g=Pi,j=r.contextType;typeof j=="object"&&j!==null&&(g=Rn(j)),g=new r(c,g),n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=ym,n.stateNode=g,g._reactInternals=n,g=n.stateNode,g.props=c,g.state=n.memoizedState,g.refs={},Gd(n),j=r.contextType,g.context=typeof j=="object"&&j!==null?Rn(j):Pi,g.state=n.memoizedState,j=r.getDerivedStateFromProps,typeof j=="function"&&(xm(n,r,j,c),g.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(j=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),j!==g.state&&ym.enqueueReplaceState(g,g.state,null),yo(n,c,g,p),xo(),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(t===null){g=n.stateNode;var C=n.memoizedProps,H=Er(r,C);g.props=H;var fe=g.context,je=r.contextType;j=Pi,typeof je=="object"&&je!==null&&(j=Rn(je));var Te=r.getDerivedStateFromProps;je=typeof Te=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=n.pendingProps!==C,je||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||fe!==j)&&cg(n,g,c,j),_s=!1;var ge=n.memoizedState;g.state=ge,yo(n,c,g,p),xo(),fe=n.memoizedState,C||ge!==fe||_s?(typeof Te=="function"&&(xm(n,r,Te,c),fe=n.memoizedState),(H=_s||ug(n,r,H,c,ge,fe,j))?(je||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(n.flags|=4194308)):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=fe),g.props=c,g.state=fe,g.context=j,c=H):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{g=n.stateNode,Vd(t,n),j=n.memoizedProps,je=Er(r,j),g.props=je,Te=n.pendingProps,ge=g.context,fe=r.contextType,H=Pi,typeof fe=="object"&&fe!==null&&(H=Rn(fe)),C=r.getDerivedStateFromProps,(fe=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(j!==Te||ge!==H)&&cg(n,g,c,H),_s=!1,ge=n.memoizedState,g.state=ge,yo(n,c,g,p),xo();var xe=n.memoizedState;j!==Te||ge!==xe||_s||t!==null&&t.dependencies!==null&&Ru(t.dependencies)?(typeof C=="function"&&(xm(n,r,C,c),xe=n.memoizedState),(je=_s||ug(n,r,je,c,ge,xe,H)||t!==null&&t.dependencies!==null&&Ru(t.dependencies))?(fe||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,xe,H),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,xe,H)),typeof g.componentDidUpdate=="function"&&(n.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof g.componentDidUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=xe),g.props=c,g.state=xe,g.context=H,c=je):(typeof g.componentDidUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(n.flags|=1024),c=!1)}return g=c,ec(t,n),c=(n.flags&128)!==0,g||c?(g=n.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:g.render(),n.flags|=1,t!==null&&c?(n.child=Sr(n,t.child,null,p),n.child=Sr(n,null,r,p)):Ln(t,n,r,p),n.memoizedState=g.state,t=n.child):t=qi(t,n,p),t}function wg(t,n,r,c){return Bi(),n.flags|=256,Ln(t,n,r,c),n.child}var Nm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jm(t){return{baseLanes:t,cachePool:fp()}}function Sm(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=Sa),t}function Eg(t,n,r){var c=n.pendingProps,p=!1,g=(n.flags&128)!==0,j;if((j=g)||(j=t!==null&&t.memoizedState===null?!1:(fn.current&2)!==0),j&&(p=!0,n.flags&=-129),j=(n.flags&32)!==0,n.flags&=-33,t===null){if(xt){if(p?Ss(n):ws(),(t=Ct)?(t=Dx(t,ra),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:pe!==null?{id:Ce,overflow:De}:null,retryLane:536870912,hydrationErrors:null},r=lo(t),r.return=n,n.child=r,kt=n,Ct=null)):t=null,t===null)throw _i(n);return rh(t)?n.lanes=32:n.lanes=536870912,null}var C=c.children;return c=c.fallback,p?(ws(),p=n.mode,C=tc({mode:"hidden",children:C},p),c=Ii(c,p,r,null),C.return=n,c.return=n,C.sibling=c,n.child=C,c=n.child,c.memoizedState=jm(r),c.childLanes=Sm(t,j,r),n.memoizedState=Nm,jo(null,c)):(Ss(n),wm(n,C))}var H=t.memoizedState;if(H!==null&&(C=H.dehydrated,C!==null)){if(g)n.flags&256?(Ss(n),n.flags&=-257,n=Em(t,n,r)):n.memoizedState!==null?(ws(),n.child=t.child,n.flags|=128,n=null):(ws(),C=c.fallback,p=n.mode,c=tc({mode:"visible",children:c.children},p),C=Ii(C,p,r,null),C.flags|=2,c.return=n,C.return=n,c.sibling=C,n.child=c,Sr(n,t.child,null,r),c=n.child,c.memoizedState=jm(r),c.childLanes=Sm(t,j,r),n.memoizedState=Nm,n=jo(null,c));else if(Ss(n),rh(C)){if(j=C.nextSibling&&C.nextSibling.dataset,j)var fe=j.dgst;j=fe,c=Error(o(419)),c.stack="",c.digest=j,yr({value:c,source:null,stack:null}),n=Em(t,n,r)}else if(vn||ll(t,n,r,!1),j=(r&t.childLanes)!==0,vn||j){if(j=Qt,j!==null&&(c=Ai(j,r),c!==0&&c!==H.retryLane))throw H.retryLane=c,La(t,c),da(j,t,c),bm;sh(C)||cc(),n=Em(t,n,r)}else sh(C)?(n.flags|=192,n.child=t.child,n=null):(t=H.treeContext,Ct=Ba(C.nextSibling),kt=n,xt=!0,bi=null,ra=!1,t!==null&&Xn(n,t),n=wm(n,c.children),n.flags|=4096);return n}return p?(ws(),C=c.fallback,p=n.mode,H=t.child,fe=H.sibling,c=Pa(H,{mode:"hidden",children:c.children}),c.subtreeFlags=H.subtreeFlags&65011712,fe!==null?C=Pa(fe,C):(C=Ii(C,p,r,null),C.flags|=2),C.return=n,c.return=n,c.sibling=C,n.child=c,jo(null,c),c=n.child,C=t.child.memoizedState,C===null?C=jm(r):(p=C.cachePool,p!==null?(H=xn._currentValue,p=p.parent!==H?{parent:H,pool:H}:p):p=fp(),C={baseLanes:C.baseLanes|r,cachePool:p}),c.memoizedState=C,c.childLanes=Sm(t,j,r),n.memoizedState=Nm,jo(t.child,c)):(Ss(n),r=t.child,t=r.sibling,r=Pa(r,{mode:"visible",children:c.children}),r.return=n,r.sibling=null,t!==null&&(j=n.deletions,j===null?(n.deletions=[t],n.flags|=16):j.push(t)),n.child=r,n.memoizedState=null,r)}function wm(t,n){return n=tc({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function tc(t,n){return t=Kn(22,t,null,n),t.lanes=0,t}function Em(t,n,r){return Sr(n,t.child,null,r),t=wm(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function kg(t,n,r){t.lanes|=n;var c=t.alternate;c!==null&&(c.lanes|=n),Fd(t.return,n,r)}function km(t,n,r,c,p,g){var j=t.memoizedState;j===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:p,treeForkCount:g}:(j.isBackwards=n,j.rendering=null,j.renderingStartTime=0,j.last=c,j.tail=r,j.tailMode=p,j.treeForkCount=g)}function Cg(t,n,r){var c=n.pendingProps,p=c.revealOrder,g=c.tail;c=c.children;var j=fn.current,C=(j&2)!==0;if(C?(j=j&1|2,n.flags|=128):j&=1,P(fn,j),Ln(t,n,c,r),c=xt?E:0,!C&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kg(t,r,n);else if(t.tag===19)kg(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(p){case"forwards":for(r=n.child,p=null;r!==null;)t=r.alternate,t!==null&&qu(t)===null&&(p=r),r=r.sibling;r=p,r===null?(p=n.child,n.child=null):(p=r.sibling,r.sibling=null),km(n,!1,p,r,g,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=n.child,n.child=null;p!==null;){if(t=p.alternate,t!==null&&qu(t)===null){n.child=p;break}t=p.sibling,p.sibling=r,r=p,p=t}km(n,!0,r,null,g,c);break;case"together":km(n,!1,null,null,void 0,c);break;default:n.memoizedState=null}return n.child}function qi(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),Cs|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(ll(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(o(153));if(n.child!==null){for(t=n.child,r=Pa(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=Pa(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Cm(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Ru(t)))}function T_(t,n,r){switch(n.tag){case 3:Ze(n,n.stateNode.containerInfo),bs(n,xn,t.memoizedState.cache),Bi();break;case 27:case 5:qe(n);break;case 4:Ze(n,n.stateNode.containerInfo);break;case 10:bs(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Wd(n),null;break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(Ss(n),n.flags|=128,null):(r&n.child.childLanes)!==0?Eg(t,n,r):(Ss(n),t=qi(t,n,r),t!==null?t.sibling:null);Ss(n);break;case 19:var p=(t.flags&128)!==0;if(c=(r&n.childLanes)!==0,c||(ll(t,n,r,!1),c=(r&n.childLanes)!==0),p){if(c)return Cg(t,n,r);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),P(fn,fn.current),c)break;return null;case 22:return n.lanes=0,bg(t,n,r,n.pendingProps);case 24:bs(n,xn,t.memoizedState.cache)}return qi(t,n,r)}function Tg(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)vn=!0;else{if(!Cm(t,r)&&(n.flags&128)===0)return vn=!1,T_(t,n,r);vn=(t.flags&131072)!==0}else vn=!1,xt&&(n.flags&1048576)!==0&&ht(n,E,n.index);switch(n.lanes=0,n.tag){case 16:e:{var c=n.pendingProps;if(t=Nr(n.elementType),n.type=t,typeof t=="function")il(t)?(c=Er(t,c),n.tag=1,n=Sg(null,n,t,c,r)):(n.tag=0,n=_m(null,n,t,c,r));else{if(t!=null){var p=t.$$typeof;if(p===K){n.tag=11,n=xg(null,n,t,c,r);break e}else if(p===q){n.tag=14,n=yg(null,n,t,c,r);break e}}throw n=ne(t)||t,Error(o(306,n,""))}}return n;case 0:return _m(t,n,n.type,n.pendingProps,r);case 1:return c=n.type,p=Er(c,n.pendingProps),Sg(t,n,c,p,r);case 3:e:{if(Ze(n,n.stateNode.containerInfo),t===null)throw Error(o(387));c=n.pendingProps;var g=n.memoizedState;p=g.element,Vd(t,n),yo(n,c,null,r);var j=n.memoizedState;if(c=j.cache,bs(n,xn,c),c!==g.cache&&Zd(n,[xn],r,!0),xo(),c=j.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:j.cache},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){n=wg(t,n,c,r);break e}else if(c!==p){p=u(Error(o(424)),n),yr(p),n=wg(t,n,c,r);break e}else for(t=n.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Ct=Ba(t.firstChild),kt=n,xt=!0,bi=null,ra=!0,r=bp(n,null,c,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Bi(),c===p){n=qi(t,n,r);break e}Ln(t,n,c,r)}n=n.child}return n;case 26:return ec(t,n),t===null?(r=Ux(n.type,null,n.pendingProps,null))?n.memoizedState=r:xt||(r=n.type,t=n.pendingProps,c=xc(Se.current).createElement(r),c[ln]=n,c[gn]=t,Pn(c,r,t),nn(c),n.stateNode=c):n.memoizedState=Ux(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return qe(n),t===null&&xt&&(c=n.stateNode=Px(n.type,n.pendingProps,Se.current),kt=n,ra=!0,p=Ct,Os(n.type)?(lh=p,Ct=Ba(c.firstChild)):Ct=p),Ln(t,n,n.pendingProps.children,r),ec(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&xt&&((p=c=Ct)&&(c=sN(c,n.type,n.pendingProps,ra),c!==null?(n.stateNode=c,kt=n,Ct=Ba(c.firstChild),ra=!1,p=!0):p=!1),p||_i(n)),qe(n),p=n.type,g=n.pendingProps,j=t!==null?t.memoizedProps:null,c=g.children,nh(p,g)?c=null:j!==null&&nh(p,j)&&(n.flags|=32),n.memoizedState!==null&&(p=tm(t,n,b_,null,null,r),Io._currentValue=p),ec(t,n),Ln(t,n,c,r),n.child;case 6:return t===null&&xt&&((t=r=Ct)&&(r=rN(r,n.pendingProps,ra),r!==null?(n.stateNode=r,kt=n,Ct=null,t=!0):t=!1),t||_i(n)),null;case 13:return Eg(t,n,r);case 4:return Ze(n,n.stateNode.containerInfo),c=n.pendingProps,t===null?n.child=Sr(n,null,c,r):Ln(t,n,c,r),n.child;case 11:return xg(t,n,n.type,n.pendingProps,r);case 7:return Ln(t,n,n.pendingProps,r),n.child;case 8:return Ln(t,n,n.pendingProps.children,r),n.child;case 12:return Ln(t,n,n.pendingProps.children,r),n.child;case 10:return c=n.pendingProps,bs(n,n.type,c.value),Ln(t,n,c.children,r),n.child;case 9:return p=n.type._context,c=n.pendingProps.children,br(n),p=Rn(p),c=c(p),n.flags|=1,Ln(t,n,c,r),n.child;case 14:return yg(t,n,n.type,n.pendingProps,r);case 15:return vg(t,n,n.type,n.pendingProps,r);case 19:return Cg(t,n,r);case 31:return C_(t,n,r);case 22:return bg(t,n,r,n.pendingProps);case 24:return br(n),c=Rn(xn),t===null?(p=Kd(),p===null&&(p=Qt,g=qd(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=r),p=g),n.memoizedState={parent:c,cache:p},Gd(n),bs(n,xn,p)):((t.lanes&r)!==0&&(Vd(t,n),yo(n,null,null,r),xo()),p=t.memoizedState,g=n.memoizedState,p.parent!==c?(p={parent:c,cache:c},n.memoizedState=p,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=p),bs(n,xn,c)):(c=g.cache,bs(n,xn,c),c!==p.cache&&Zd(n,[xn],r,!0))),Ln(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(o(156,n.tag))}function Hi(t){t.flags|=4}function Tm(t,n,r,c,p){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(p&335544128)===p)if(t.stateNode.complete)t.flags|=8192;else if(nx())t.flags|=8192;else throw jr=Bu,Qd}else t.flags&=-16777217}function Ag(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Kx(n))if(nx())t.flags|=8192;else throw jr=Bu,Qd}function nc(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Ti():536870912,t.lanes|=n,vl|=n)}function So(t,n){if(!xt)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function $t(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,c=0;if(n)for(var p=t.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=c,t.childLanes=r,n}function A_(t,n,r){var c=n.pendingProps;switch(un(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(n),null;case 1:return $t(n),null;case 3:return r=n.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),Ui(xn),Ve(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ai(n)?Hi(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,co())),$t(n),null;case 26:var p=n.type,g=n.memoizedState;return t===null?(Hi(n),g!==null?($t(n),Ag(n,g)):($t(n),Tm(n,p,null,c,r))):g?g!==t.memoizedState?(Hi(n),$t(n),Ag(n,g)):($t(n),n.flags&=-16777217):(t=t.memoizedProps,t!==c&&Hi(n),$t(n),Tm(n,p,t,c,r)),null;case 27:if(Ne(n),r=Se.current,p=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==c&&Hi(n);else{if(!c){if(n.stateNode===null)throw Error(o(166));return $t(n),null}t=Z.current,ai(n)?uo(n):(t=Px(p,c,r),n.stateNode=t,Hi(n))}return $t(n),null;case 5:if(Ne(n),p=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==c&&Hi(n);else{if(!c){if(n.stateNode===null)throw Error(o(166));return $t(n),null}if(g=Z.current,ai(n))uo(n);else{var j=xc(Se.current);switch(g){case 1:g=j.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=j.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=j.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=j.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=j.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?j.createElement("select",{is:c.is}):j.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?j.createElement(p,{is:c.is}):j.createElement(p)}}g[ln]=n,g[gn]=c;e:for(j=n.child;j!==null;){if(j.tag===5||j.tag===6)g.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===n)break e;for(;j.sibling===null;){if(j.return===null||j.return===n)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}n.stateNode=g;e:switch(Pn(g,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Hi(n)}}return $t(n),Tm(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,r),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==c&&Hi(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(o(166));if(t=Se.current,ai(n)){if(t=n.stateNode,r=n.memoizedProps,c=null,p=kt,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}t[ln]=n,t=!!(t.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||Ex(t.nodeValue,r)),t||_i(n,!0)}else t=xc(t).createTextNode(c),t[ln]=n,n.stateNode=t}return $t(n),null;case 31:if(r=n.memoizedState,t===null||t.memoizedState!==null){if(c=ai(n),r!==null){if(t===null){if(!c)throw Error(o(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[ln]=n}else Bi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$t(n),t=!1}else r=co(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return n.flags&256?(Na(n),n):(Na(n),null);if((n.flags&128)!==0)throw Error(o(558))}return $t(n),null;case 13:if(c=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(p=ai(n),c!==null&&c.dehydrated!==null){if(t===null){if(!p)throw Error(o(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));p[ln]=n}else Bi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$t(n),p=!1}else p=co(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=p),p=!0;if(!p)return n.flags&256?(Na(n),n):(Na(n),null)}return Na(n),(n.flags&128)!==0?(n.lanes=r,n):(r=c!==null,t=t!==null&&t.memoizedState!==null,r&&(c=n.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==p&&(c.flags|=2048)),r!==t&&r&&(n.child.flags|=8192),nc(n,n.updateQueue),$t(n),null);case 4:return Ve(),t===null&&Xm(n.stateNode.containerInfo),$t(n),null;case 10:return Ui(n.type),$t(n),null;case 19:if(te(fn),c=n.memoizedState,c===null)return $t(n),null;if(p=(n.flags&128)!==0,g=c.rendering,g===null)if(p)So(c,!1);else{if(dn!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(g=qu(t),g!==null){for(n.flags|=128,So(c,!1),t=g.updateQueue,n.updateQueue=t,nc(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)ro(r,t),r=r.sibling;return P(fn,fn.current&1|2),xt&&Ge(n,c.treeForkCount),n.child}t=t.sibling}c.tail!==null&&Re()>lc&&(n.flags|=128,p=!0,So(c,!1),n.lanes=4194304)}else{if(!p)if(t=qu(g),t!==null){if(n.flags|=128,p=!0,t=t.updateQueue,n.updateQueue=t,nc(n,t),So(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!xt)return $t(n),null}else 2*Re()-c.renderingStartTime>lc&&r!==536870912&&(n.flags|=128,p=!0,So(c,!1),n.lanes=4194304);c.isBackwards?(g.sibling=n.child,n.child=g):(t=c.last,t!==null?t.sibling=g:n.child=g,c.last=g)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Re(),t.sibling=null,r=fn.current,P(fn,p?r&1|2:r&1),xt&&Ge(n,c.treeForkCount),t):($t(n),null);case 22:case 23:return Na(n),Jd(),c=n.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(r&536870912)!==0&&(n.flags&128)===0&&($t(n),n.subtreeFlags&6&&(n.flags|=8192)):$t(n),r=n.updateQueue,r!==null&&nc(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==r&&(n.flags|=2048),t!==null&&te(_r),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Ui(xn),$t(n),null;case 25:return null;case 30:return null}throw Error(o(156,n.tag))}function z_(t,n){switch(un(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Ui(xn),Ve(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Ne(n),null;case 31:if(n.memoizedState!==null){if(Na(n),n.alternate===null)throw Error(o(340));Bi()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Na(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(o(340));Bi()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return te(fn),null;case 4:return Ve(),null;case 10:return Ui(n.type),null;case 22:case 23:return Na(n),Jd(),t!==null&&te(_r),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Ui(xn),null;case 25:return null;default:return null}}function zg(t,n){switch(un(n),n.tag){case 3:Ui(xn),Ve();break;case 26:case 27:case 5:Ne(n);break;case 4:Ve();break;case 31:n.memoizedState!==null&&Na(n);break;case 13:Na(n);break;case 19:te(fn);break;case 10:Ui(n.type);break;case 22:case 23:Na(n),Jd(),t!==null&&te(_r);break;case 24:Ui(xn)}}function wo(t,n){try{var r=n.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var p=c.next;r=p;do{if((r.tag&t)===t){c=void 0;var g=r.create,j=r.inst;c=g(),j.destroy=c}r=r.next}while(r!==p)}}catch(C){Pt(n,n.return,C)}}function Es(t,n,r){try{var c=n.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var g=p.next;c=g;do{if((c.tag&t)===t){var j=c.inst,C=j.destroy;if(C!==void 0){j.destroy=void 0,p=n;var H=r,fe=C;try{fe()}catch(je){Pt(p,H,je)}}}c=c.next}while(c!==g)}}catch(je){Pt(n,n.return,je)}}function Mg(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{Np(n,r)}catch(c){Pt(t,t.return,c)}}}function Og(t,n,r){r.props=Er(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(c){Pt(t,n,c)}}function Eo(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof r=="function"?t.refCleanup=r(c):r.current=c}}catch(p){Pt(t,n,p)}}function ji(t,n){var r=t.ref,c=t.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(p){Pt(t,n,p)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){Pt(t,n,p)}else r.current=null}function Dg(t){var n=t.type,r=t.memoizedProps,c=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break e;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(p){Pt(t,t.return,p)}}function Am(t,n,r){try{var c=t.stateNode;W_(c,t.type,r,n),c[gn]=n}catch(p){Pt(t,t.return,p)}}function Rg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Os(t.type)||t.tag===4}function zm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Os(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mm(t,n,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=na));else if(c!==4&&(c===27&&Os(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(Mm(t,n,r),t=t.sibling;t!==null;)Mm(t,n,r),t=t.sibling}function ac(t,n,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(c!==4&&(c===27&&Os(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(ac(t,n,r),t=t.sibling;t!==null;)ac(t,n,r),t=t.sibling}function Lg(t){var n=t.stateNode,r=t.memoizedProps;try{for(var c=t.type,p=n.attributes;p.length;)n.removeAttributeNode(p[0]);Pn(n,c,r),n[ln]=t,n[gn]=r}catch(g){Pt(t,t.return,g)}}var Ki=!1,bn=!1,Om=!1,Pg=typeof WeakSet=="function"?WeakSet:Set,zn=null;function M_(t,n){if(t=t.containerInfo,eh=Sc,t=cr(t),pi(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var p=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{r.nodeType,g.nodeType}catch{r=null;break e}var j=0,C=-1,H=-1,fe=0,je=0,Te=t,ge=null;t:for(;;){for(var xe;Te!==r||p!==0&&Te.nodeType!==3||(C=j+p),Te!==g||c!==0&&Te.nodeType!==3||(H=j+c),Te.nodeType===3&&(j+=Te.nodeValue.length),(xe=Te.firstChild)!==null;)ge=Te,Te=xe;for(;;){if(Te===t)break t;if(ge===r&&++fe===p&&(C=j),ge===g&&++je===c&&(H=j),(xe=Te.nextSibling)!==null)break;Te=ge,ge=Te.parentNode}Te=xe}r=C===-1||H===-1?null:{start:C,end:H}}else r=null}r=r||{start:0,end:0}}else r=null;for(th={focusedElem:t,selectionRange:r},Sc=!1,zn=n;zn!==null;)if(n=zn,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,zn=t;else for(;zn!==null;){switch(n=zn,g=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)p=t[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,r=n,p=g.memoizedProps,g=g.memoizedState,c=r.stateNode;try{var Fe=Er(r.type,p);t=c.getSnapshotBeforeUpdate(Fe,g),c.__reactInternalSnapshotBeforeUpdate=t}catch(et){Pt(r,r.return,et)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)ih(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":ih(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=n.sibling,t!==null){t.return=n.return,zn=t;break}zn=n.return}}function Ig(t,n,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Gi(t,r),c&4&&wo(5,r);break;case 1:if(Gi(t,r),c&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(j){Pt(r,r.return,j)}else{var p=Er(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(p,n,t.__reactInternalSnapshotBeforeUpdate)}catch(j){Pt(r,r.return,j)}}c&64&&Mg(r),c&512&&Eo(r,r.return);break;case 3:if(Gi(t,r),c&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{Np(t,n)}catch(j){Pt(r,r.return,j)}}break;case 27:n===null&&c&4&&Lg(r);case 26:case 5:Gi(t,r),n===null&&c&4&&Dg(r),c&512&&Eo(r,r.return);break;case 12:Gi(t,r);break;case 31:Gi(t,r),c&4&&Fg(t,r);break;case 13:Gi(t,r),c&4&&Zg(t,r),c&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=F_.bind(null,r),lN(t,r))));break;case 22:if(c=r.memoizedState!==null||Ki,!c){n=n!==null&&n.memoizedState!==null||bn,p=Ki;var g=bn;Ki=c,(bn=n)&&!g?Vi(t,r,(r.subtreeFlags&8772)!==0):Gi(t,r),Ki=p,bn=g}break;case 30:break;default:Gi(t,r)}}function Bg(t){var n=t.alternate;n!==null&&(t.alternate=null,Bg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&U(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Jt=null,la=!1;function Qi(t,n,r){for(r=r.child;r!==null;)Ug(t,n,r),r=r.sibling}function Ug(t,n,r){if(st&&typeof st.onCommitFiberUnmount=="function")try{st.onCommitFiberUnmount(Ye,r)}catch{}switch(r.tag){case 26:bn||ji(r,n),Qi(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:bn||ji(r,n);var c=Jt,p=la;Os(r.type)&&(Jt=r.stateNode,la=!1),Qi(t,n,r),Ro(r.stateNode),Jt=c,la=p;break;case 5:bn||ji(r,n);case 6:if(c=Jt,p=la,Jt=null,Qi(t,n,r),Jt=c,la=p,Jt!==null)if(la)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(r.stateNode)}catch(g){Pt(r,n,g)}else try{Jt.removeChild(r.stateNode)}catch(g){Pt(r,n,g)}break;case 18:Jt!==null&&(la?(t=Jt,Mx(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),kl(t)):Mx(Jt,r.stateNode));break;case 4:c=Jt,p=la,Jt=r.stateNode.containerInfo,la=!0,Qi(t,n,r),Jt=c,la=p;break;case 0:case 11:case 14:case 15:Es(2,r,n),bn||Es(4,r,n),Qi(t,n,r);break;case 1:bn||(ji(r,n),c=r.stateNode,typeof c.componentWillUnmount=="function"&&Og(r,n,c)),Qi(t,n,r);break;case 21:Qi(t,n,r);break;case 22:bn=(c=bn)||r.memoizedState!==null,Qi(t,n,r),bn=c;break;default:Qi(t,n,r)}}function Fg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{kl(t)}catch(r){Pt(n,n.return,r)}}}function Zg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{kl(t)}catch(r){Pt(n,n.return,r)}}function O_(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Pg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Pg),n;default:throw Error(o(435,t.tag))}}function ic(t,n){var r=O_(t);n.forEach(function(c){if(!r.has(c)){r.add(c);var p=Z_.bind(null,t,c);c.then(p,p)}})}function oa(t,n){var r=n.deletions;if(r!==null)for(var c=0;c<r.length;c++){var p=r[c],g=t,j=n,C=j;e:for(;C!==null;){switch(C.tag){case 27:if(Os(C.type)){Jt=C.stateNode,la=!1;break e}break;case 5:Jt=C.stateNode,la=!1;break e;case 3:case 4:Jt=C.stateNode.containerInfo,la=!0;break e}C=C.return}if(Jt===null)throw Error(o(160));Ug(g,j,p),Jt=null,la=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)qg(n,t),n=n.sibling}var si=null;function qg(t,n){var r=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:oa(n,t),ua(t),c&4&&(Es(3,t,t.return),wo(3,t),Es(5,t,t.return));break;case 1:oa(n,t),ua(t),c&512&&(bn||r===null||ji(r,r.return)),c&64&&Ki&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var p=si;if(oa(n,t),ua(t),c&512&&(bn||r===null||ji(r,r.return)),c&4){var g=r!==null?r.memoizedState:null;if(c=t.memoizedState,r===null)if(c===null)if(t.stateNode===null){e:{c=t.type,r=t.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":g=p.getElementsByTagName("title")[0],(!g||g[zi]||g[ln]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(c),p.head.insertBefore(g,p.querySelector("head > title"))),Pn(g,c,r),g[ln]=t,nn(g),c=g;break e;case"link":var j=qx("link","href",p).get(c+(r.href||""));if(j){for(var C=0;C<j.length;C++)if(g=j[C],g.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&g.getAttribute("rel")===(r.rel==null?null:r.rel)&&g.getAttribute("title")===(r.title==null?null:r.title)&&g.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){j.splice(C,1);break t}}g=p.createElement(c),Pn(g,c,r),p.head.appendChild(g);break;case"meta":if(j=qx("meta","content",p).get(c+(r.content||""))){for(C=0;C<j.length;C++)if(g=j[C],g.getAttribute("content")===(r.content==null?null:""+r.content)&&g.getAttribute("name")===(r.name==null?null:r.name)&&g.getAttribute("property")===(r.property==null?null:r.property)&&g.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&g.getAttribute("charset")===(r.charSet==null?null:r.charSet)){j.splice(C,1);break t}}g=p.createElement(c),Pn(g,c,r),p.head.appendChild(g);break;default:throw Error(o(468,c))}g[ln]=t,nn(g),c=g}t.stateNode=c}else Hx(p,t.type,t.stateNode);else t.stateNode=Zx(p,c,t.memoizedProps);else g!==c?(g===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):g.count--,c===null?Hx(p,t.type,t.stateNode):Zx(p,c,t.memoizedProps)):c===null&&t.stateNode!==null&&Am(t,t.memoizedProps,r.memoizedProps)}break;case 27:oa(n,t),ua(t),c&512&&(bn||r===null||ji(r,r.return)),r!==null&&c&4&&Am(t,t.memoizedProps,r.memoizedProps);break;case 5:if(oa(n,t),ua(t),c&512&&(bn||r===null||ji(r,r.return)),t.flags&32){p=t.stateNode;try{Aa(p,"")}catch(Fe){Pt(t,t.return,Fe)}}c&4&&t.stateNode!=null&&(p=t.memoizedProps,Am(t,p,r!==null?r.memoizedProps:p)),c&1024&&(Om=!0);break;case 6:if(oa(n,t),ua(t),c&4){if(t.stateNode===null)throw Error(o(162));c=t.memoizedProps,r=t.stateNode;try{r.nodeValue=c}catch(Fe){Pt(t,t.return,Fe)}}break;case 3:if(bc=null,p=si,si=yc(n.containerInfo),oa(n,t),si=p,ua(t),c&4&&r!==null&&r.memoizedState.isDehydrated)try{kl(n.containerInfo)}catch(Fe){Pt(t,t.return,Fe)}Om&&(Om=!1,Hg(t));break;case 4:c=si,si=yc(t.stateNode.containerInfo),oa(n,t),ua(t),si=c;break;case 12:oa(n,t),ua(t);break;case 31:oa(n,t),ua(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,ic(t,c)));break;case 13:oa(n,t),ua(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(rc=Re()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,ic(t,c)));break;case 22:p=t.memoizedState!==null;var H=r!==null&&r.memoizedState!==null,fe=Ki,je=bn;if(Ki=fe||p,bn=je||H,oa(n,t),bn=je,Ki=fe,ua(t),c&8192)e:for(n=t.stateNode,n._visibility=p?n._visibility&-2:n._visibility|1,p&&(r===null||H||Ki||bn||kr(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){H=r=n;try{if(g=H.stateNode,p)j=g.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{C=H.stateNode;var Te=H.memoizedProps.style,ge=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;C.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(Fe){Pt(H,H.return,Fe)}}}else if(n.tag===6){if(r===null){H=n;try{H.stateNode.nodeValue=p?"":H.memoizedProps}catch(Fe){Pt(H,H.return,Fe)}}}else if(n.tag===18){if(r===null){H=n;try{var xe=H.stateNode;p?Ox(xe,!0):Ox(H.stateNode,!1)}catch(Fe){Pt(H,H.return,Fe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=t.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,ic(t,r))));break;case 19:oa(n,t),ua(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,ic(t,c)));break;case 30:break;case 21:break;default:oa(n,t),ua(t)}}function ua(t){var n=t.flags;if(n&2){try{for(var r,c=t.return;c!==null;){if(Rg(c)){r=c;break}c=c.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var p=r.stateNode,g=zm(t);ac(t,g,p);break;case 5:var j=r.stateNode;r.flags&32&&(Aa(j,""),r.flags&=-33);var C=zm(t);ac(t,C,j);break;case 3:case 4:var H=r.stateNode.containerInfo,fe=zm(t);Mm(t,fe,H);break;default:throw Error(o(161))}}catch(je){Pt(t,t.return,je)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Hg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Hg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Gi(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Ig(t,n.alternate,n),n=n.sibling}function kr(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Es(4,n,n.return),kr(n);break;case 1:ji(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&Og(n,n.return,r),kr(n);break;case 27:Ro(n.stateNode);case 26:case 5:ji(n,n.return),kr(n);break;case 22:n.memoizedState===null&&kr(n);break;case 30:kr(n);break;default:kr(n)}t=t.sibling}}function Vi(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,p=t,g=n,j=g.flags;switch(g.tag){case 0:case 11:case 15:Vi(p,g,r),wo(4,g);break;case 1:if(Vi(p,g,r),c=g,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(fe){Pt(c,c.return,fe)}if(c=g,p=c.updateQueue,p!==null){var C=c.stateNode;try{var H=p.shared.hiddenCallbacks;if(H!==null)for(p.shared.hiddenCallbacks=null,p=0;p<H.length;p++)_p(H[p],C)}catch(fe){Pt(c,c.return,fe)}}r&&j&64&&Mg(g),Eo(g,g.return);break;case 27:Lg(g);case 26:case 5:Vi(p,g,r),r&&c===null&&j&4&&Dg(g),Eo(g,g.return);break;case 12:Vi(p,g,r);break;case 31:Vi(p,g,r),r&&j&4&&Fg(p,g);break;case 13:Vi(p,g,r),r&&j&4&&Zg(p,g);break;case 22:g.memoizedState===null&&Vi(p,g,r),Eo(g,g.return);break;case 30:break;default:Vi(p,g,r)}n=n.sibling}}function Dm(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&mo(r))}function Rm(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&mo(t))}function ri(t,n,r,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Kg(t,n,r,c),n=n.sibling}function Kg(t,n,r,c){var p=n.flags;switch(n.tag){case 0:case 11:case 15:ri(t,n,r,c),p&2048&&wo(9,n);break;case 1:ri(t,n,r,c);break;case 3:ri(t,n,r,c),p&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&mo(t)));break;case 12:if(p&2048){ri(t,n,r,c),t=n.stateNode;try{var g=n.memoizedProps,j=g.id,C=g.onPostCommit;typeof C=="function"&&C(j,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(H){Pt(n,n.return,H)}}else ri(t,n,r,c);break;case 31:ri(t,n,r,c);break;case 13:ri(t,n,r,c);break;case 23:break;case 22:g=n.stateNode,j=n.alternate,n.memoizedState!==null?g._visibility&2?ri(t,n,r,c):ko(t,n):g._visibility&2?ri(t,n,r,c):(g._visibility|=2,gl(t,n,r,c,(n.subtreeFlags&10256)!==0||!1)),p&2048&&Dm(j,n);break;case 24:ri(t,n,r,c),p&2048&&Rm(n.alternate,n);break;default:ri(t,n,r,c)}}function gl(t,n,r,c,p){for(p=p&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var g=t,j=n,C=r,H=c,fe=j.flags;switch(j.tag){case 0:case 11:case 15:gl(g,j,C,H,p),wo(8,j);break;case 23:break;case 22:var je=j.stateNode;j.memoizedState!==null?je._visibility&2?gl(g,j,C,H,p):ko(g,j):(je._visibility|=2,gl(g,j,C,H,p)),p&&fe&2048&&Dm(j.alternate,j);break;case 24:gl(g,j,C,H,p),p&&fe&2048&&Rm(j.alternate,j);break;default:gl(g,j,C,H,p)}n=n.sibling}}function ko(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,c=n,p=c.flags;switch(c.tag){case 22:ko(r,c),p&2048&&Dm(c.alternate,c);break;case 24:ko(r,c),p&2048&&Rm(c.alternate,c);break;default:ko(r,c)}n=n.sibling}}var Co=8192;function xl(t,n,r){if(t.subtreeFlags&Co)for(t=t.child;t!==null;)Qg(t,n,r),t=t.sibling}function Qg(t,n,r){switch(t.tag){case 26:xl(t,n,r),t.flags&Co&&t.memoizedState!==null&&vN(r,si,t.memoizedState,t.memoizedProps);break;case 5:xl(t,n,r);break;case 3:case 4:var c=si;si=yc(t.stateNode.containerInfo),xl(t,n,r),si=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=Co,Co=16777216,xl(t,n,r),Co=c):xl(t,n,r));break;default:xl(t,n,r)}}function Gg(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function To(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var c=n[r];zn=c,Yg(c,t)}Gg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vg(t),t=t.sibling}function Vg(t){switch(t.tag){case 0:case 11:case 15:To(t),t.flags&2048&&Es(9,t,t.return);break;case 3:To(t);break;case 12:To(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,sc(t)):To(t);break;default:To(t)}}function sc(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var c=n[r];zn=c,Yg(c,t)}Gg(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Es(8,n,n.return),sc(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,sc(n));break;default:sc(n)}t=t.sibling}}function Yg(t,n){for(;zn!==null;){var r=zn;switch(r.tag){case 0:case 11:case 15:Es(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:mo(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,zn=c;else e:for(r=t;zn!==null;){c=zn;var p=c.sibling,g=c.return;if(Bg(c),c===r){zn=null;break e}if(p!==null){p.return=g,zn=p;break e}zn=g}}}var D_={getCacheForType:function(t){var n=Rn(xn),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r},cacheSignal:function(){return Rn(xn).controller.signal}},R_=typeof WeakMap=="function"?WeakMap:Map,Mt=0,Qt=null,yt=null,Nt=0,Lt=0,ja=null,ks=!1,yl=!1,Lm=!1,Yi=0,dn=0,Cs=0,Cr=0,Pm=0,Sa=0,vl=0,Ao=null,ca=null,Im=!1,rc=0,$g=0,lc=1/0,oc=null,Ts=null,wn=0,As=null,bl=null,$i=0,Bm=0,Um=null,Xg=null,zo=0,Fm=null;function wa(){return(Mt&2)!==0&&Nt!==0?Nt&-Nt:B.T!==null?Gm():Gs()}function Jg(){if(Sa===0)if((Nt&536870912)===0||xt){var t=pa;pa<<=1,(pa&3932160)===0&&(pa=262144),Sa=t}else Sa=536870912;return t=_a.current,t!==null&&(t.flags|=32),Sa}function da(t,n,r){(t===Qt&&(Lt===2||Lt===9)||t.cancelPendingCommit!==null)&&(_l(t,0),zs(t,Nt,Sa,!1)),$e(t,r),((Mt&2)===0||t!==Qt)&&(t===Qt&&((Mt&2)===0&&(Cr|=r),dn===4&&zs(t,Nt,Sa,!1)),Si(t))}function Wg(t,n,r){if((Mt&6)!==0)throw Error(o(327));var c=!r&&(n&127)===0&&(n&t.expiredLanes)===0||Yn(t,n),p=c?I_(t,n):qm(t,n,!0),g=c;do{if(p===0){yl&&!c&&zs(t,n,0,!1);break}else{if(r=t.current.alternate,g&&!L_(r)){p=qm(t,n,!1),g=!1;continue}if(p===2){if(g=n,t.errorRecoveryDisabledLanes&g)var j=0;else j=t.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){n=j;e:{var C=t;p=Ao;var H=C.current.memoizedState.isDehydrated;if(H&&(_l(C,j).flags|=256),j=qm(C,j,!1),j!==2){if(Lm&&!H){C.errorRecoveryDisabledLanes|=g,Cr|=g,p=4;break e}g=ca,ca=p,g!==null&&(ca===null?ca=g:ca.push.apply(ca,g))}p=j}if(g=!1,p!==2)continue}}if(p===1){_l(t,0),zs(t,n,0,!0);break}e:{switch(c=t,g=p,g){case 0:case 1:throw Error(o(345));case 4:if((n&4194048)!==n)break;case 6:zs(c,n,Sa,!ks);break e;case 2:ca=null;break;case 3:case 5:break;default:throw Error(o(329))}if((n&62914560)===n&&(p=rc+300-Re(),10<p)){if(zs(c,n,Sa,!ks),Ca(c,0,!0)!==0)break e;$i=n,c.timeoutHandle=Ax(ex.bind(null,c,r,ca,oc,Im,n,Sa,Cr,vl,ks,g,"Throttled",-0,0),p);break e}ex(c,r,ca,oc,Im,n,Sa,Cr,vl,ks,g,null,-0,0)}}break}while(!0);Si(t)}function ex(t,n,r,c,p,g,j,C,H,fe,je,Te,ge,xe){if(t.timeoutHandle=-1,Te=n.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:na},Qg(n,g,Te);var Fe=(g&62914560)===g?rc-Re():(g&4194048)===g?$g-Re():0;if(Fe=bN(Te,Fe),Fe!==null){$i=g,t.cancelPendingCommit=Fe(ox.bind(null,t,n,g,r,c,p,j,C,H,je,Te,null,ge,xe)),zs(t,g,j,!fe);return}}ox(t,n,g,r,c,p,j,C,H)}function L_(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var p=r[c],g=p.getSnapshot;p=p.value;try{if(!Tn(g(),p))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function zs(t,n,r,c){n&=~Pm,n&=~Cr,t.suspendedLanes|=n,t.pingedLanes&=~n,c&&(t.warmLanes|=n),c=t.expirationTimes;for(var p=n;0<p;){var g=31-wt(p),j=1<<g;c[g]=-1,p&=~j}r!==0&&Cn(t,r,n)}function uc(){return(Mt&6)===0?(Mo(0),!1):!0}function Zm(){if(yt!==null){if(Lt===0)var t=yt.return;else t=yt,ii=Ni=null,im(t),dl=null,fo=0,t=yt;for(;t!==null;)zg(t.alternate,t),t=t.return;yt=null}}function _l(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,nN(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),$i=0,Zm(),Qt=t,yt=r=Pa(t.current,null),Nt=n,Lt=0,ja=null,ks=!1,yl=Yn(t,n),Lm=!1,vl=Sa=Pm=Cr=Cs=dn=0,ca=Ao=null,Im=!1,(n&8)!==0&&(n|=n&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=n;0<c;){var p=31-wt(c),g=1<<p;n|=t[p],c&=~g}return Yi=n,pr(),r}function tx(t,n){dt=null,B.H=No,n===cl||n===Iu?(n=xp(),Lt=3):n===Qd?(n=xp(),Lt=4):Lt=n===bm?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ja=n,yt===null&&(dn=1,Ju(t,u(n,t.current)))}function nx(){var t=_a.current;return t===null?!0:(Nt&4194048)===Nt?Ia===null:(Nt&62914560)===Nt||(Nt&536870912)!==0?t===Ia:!1}function ax(){var t=B.H;return B.H=No,t===null?No:t}function ix(){var t=B.A;return B.A=D_,t}function cc(){dn=4,ks||(Nt&4194048)!==Nt&&_a.current!==null||(yl=!0),(Cs&134217727)===0&&(Cr&134217727)===0||Qt===null||zs(Qt,Nt,Sa,!1)}function qm(t,n,r){var c=Mt;Mt|=2;var p=ax(),g=ix();(Qt!==t||Nt!==n)&&(oc=null,_l(t,n)),n=!1;var j=dn;e:do try{if(Lt!==0&&yt!==null){var C=yt,H=ja;switch(Lt){case 8:Zm(),j=6;break e;case 3:case 2:case 9:case 6:_a.current===null&&(n=!0);var fe=Lt;if(Lt=0,ja=null,Nl(t,C,H,fe),r&&yl){j=0;break e}break;default:fe=Lt,Lt=0,ja=null,Nl(t,C,H,fe)}}P_(),j=dn;break}catch(je){tx(t,je)}while(!0);return n&&t.shellSuspendCounter++,ii=Ni=null,Mt=c,B.H=p,B.A=g,yt===null&&(Qt=null,Nt=0,pr()),j}function P_(){for(;yt!==null;)sx(yt)}function I_(t,n){var r=Mt;Mt|=2;var c=ax(),p=ix();Qt!==t||Nt!==n?(oc=null,lc=Re()+500,_l(t,n)):yl=Yn(t,n);e:do try{if(Lt!==0&&yt!==null){n=yt;var g=ja;t:switch(Lt){case 1:Lt=0,ja=null,Nl(t,n,g,1);break;case 2:case 9:if(pp(g)){Lt=0,ja=null,rx(n);break}n=function(){Lt!==2&&Lt!==9||Qt!==t||(Lt=7),Si(t)},g.then(n,n);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:pp(g)?(Lt=0,ja=null,rx(n)):(Lt=0,ja=null,Nl(t,n,g,7));break;case 5:var j=null;switch(yt.tag){case 26:j=yt.memoizedState;case 5:case 27:var C=yt;if(j?Kx(j):C.stateNode.complete){Lt=0,ja=null;var H=C.sibling;if(H!==null)yt=H;else{var fe=C.return;fe!==null?(yt=fe,dc(fe)):yt=null}break t}}Lt=0,ja=null,Nl(t,n,g,5);break;case 6:Lt=0,ja=null,Nl(t,n,g,6);break;case 8:Zm(),dn=6;break e;default:throw Error(o(462))}}B_();break}catch(je){tx(t,je)}while(!0);return ii=Ni=null,B.H=c,B.A=p,Mt=r,yt!==null?0:(Qt=null,Nt=0,pr(),dn)}function B_(){for(;yt!==null&&!Ke();)sx(yt)}function sx(t){var n=Tg(t.alternate,t,Yi);t.memoizedProps=t.pendingProps,n===null?dc(t):yt=n}function rx(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=jg(r,n,n.pendingProps,n.type,void 0,Nt);break;case 11:n=jg(r,n,n.pendingProps,n.type.render,n.ref,Nt);break;case 5:im(n);default:zg(r,n),n=yt=ro(n,Yi),n=Tg(r,n,Yi)}t.memoizedProps=t.pendingProps,n===null?dc(t):yt=n}function Nl(t,n,r,c){ii=Ni=null,im(n),dl=null,fo=0;var p=n.return;try{if(k_(t,p,n,r,Nt)){dn=1,Ju(t,u(r,t.current)),yt=null;return}}catch(g){if(p!==null)throw yt=p,g;dn=1,Ju(t,u(r,t.current)),yt=null;return}n.flags&32768?(xt||c===1?t=!0:yl||(Nt&536870912)!==0?t=!1:(ks=t=!0,(c===2||c===9||c===3||c===6)&&(c=_a.current,c!==null&&c.tag===13&&(c.flags|=16384))),lx(n,t)):dc(n)}function dc(t){var n=t;do{if((n.flags&32768)!==0){lx(n,ks);return}t=n.return;var r=A_(n.alternate,n,Yi);if(r!==null){yt=r;return}if(n=n.sibling,n!==null){yt=n;return}yt=n=t}while(n!==null);dn===0&&(dn=5)}function lx(t,n){do{var r=z_(t.alternate,t);if(r!==null){r.flags&=32767,yt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){yt=t;return}yt=t=r}while(t!==null);dn=6,yt=null}function ox(t,n,r,c,p,g,j,C,H){t.cancelPendingCommit=null;do mc();while(wn!==0);if((Mt&6)!==0)throw Error(o(327));if(n!==null){if(n===t.current)throw Error(o(177));if(g=n.lanes|n.childLanes,g|=al,zt(t,r,g,j,C,H),t===Qt&&(yt=Qt=null,Nt=0),bl=n,As=t,$i=r,Bm=g,Um=p,Xg=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,q_(lt,function(){return hx(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=B.T,B.T=null,p=X.p,X.p=2,j=Mt,Mt|=4;try{M_(t,n,r)}finally{Mt=j,X.p=p,B.T=c}}wn=1,ux(),cx(),dx()}}function ux(){if(wn===1){wn=0;var t=As,n=bl,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=B.T,B.T=null;var c=X.p;X.p=2;var p=Mt;Mt|=4;try{qg(n,t);var g=th,j=cr(t.containerInfo),C=g.focusedElem,H=g.selectionRange;if(j!==C&&C&&C.ownerDocument&&Wr(C.ownerDocument.documentElement,C)){if(H!==null&&pi(C)){var fe=H.start,je=H.end;if(je===void 0&&(je=fe),"selectionStart"in C)C.selectionStart=fe,C.selectionEnd=Math.min(je,C.value.length);else{var Te=C.ownerDocument||document,ge=Te&&Te.defaultView||window;if(ge.getSelection){var xe=ge.getSelection(),Fe=C.textContent.length,et=Math.min(H.start,Fe),Ht=H.end===void 0?et:Math.min(H.end,Fe);!xe.extend&&et>Ht&&(j=Ht,Ht=et,et=j);var le=ur(C,et),$=ur(C,Ht);if(le&&$&&(xe.rangeCount!==1||xe.anchorNode!==le.node||xe.anchorOffset!==le.offset||xe.focusNode!==$.node||xe.focusOffset!==$.offset)){var he=Te.createRange();he.setStart(le.node,le.offset),xe.removeAllRanges(),et>Ht?(xe.addRange(he),xe.extend($.node,$.offset)):(he.setEnd($.node,$.offset),xe.addRange(he))}}}}for(Te=[],xe=C;xe=xe.parentNode;)xe.nodeType===1&&Te.push({element:xe,left:xe.scrollLeft,top:xe.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<Te.length;C++){var we=Te[C];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}Sc=!!eh,th=eh=null}finally{Mt=p,X.p=c,B.T=r}}t.current=n,wn=2}}function cx(){if(wn===2){wn=0;var t=As,n=bl,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=B.T,B.T=null;var c=X.p;X.p=2;var p=Mt;Mt|=4;try{Ig(t,n.alternate,n)}finally{Mt=p,X.p=c,B.T=r}}wn=3}}function dx(){if(wn===4||wn===3){wn=0,ce();var t=As,n=bl,r=$i,c=Xg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?wn=5:(wn=0,bl=As=null,mx(t,t.pendingLanes));var p=t.pendingLanes;if(p===0&&(Ts=null),Ue(r),n=n.stateNode,st&&typeof st.onCommitFiberRoot=="function")try{st.onCommitFiberRoot(Ye,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=B.T,p=X.p,X.p=2,B.T=null;try{for(var g=t.onRecoverableError,j=0;j<c.length;j++){var C=c[j];g(C.value,{componentStack:C.stack})}}finally{B.T=n,X.p=p}}($i&3)!==0&&mc(),Si(t),p=t.pendingLanes,(r&261930)!==0&&(p&42)!==0?t===Fm?zo++:(zo=0,Fm=t):zo=0,Mo(0)}}function mx(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,mo(n)))}function mc(){return ux(),cx(),dx(),hx()}function hx(){if(wn!==5)return!1;var t=As,n=Bm;Bm=0;var r=Ue($i),c=B.T,p=X.p;try{X.p=32>r?32:r,B.T=null,r=Um,Um=null;var g=As,j=$i;if(wn=0,bl=As=null,$i=0,(Mt&6)!==0)throw Error(o(331));var C=Mt;if(Mt|=4,Vg(g.current),Kg(g,g.current,j,r),Mt=C,Mo(0,!1),st&&typeof st.onPostCommitFiberRoot=="function")try{st.onPostCommitFiberRoot(Ye,g)}catch{}return!0}finally{X.p=p,B.T=c,mx(t,n)}}function fx(t,n,r){n=u(r,n),n=vm(t.stateNode,n,2),t=js(t,n,2),t!==null&&($e(t,2),Si(t))}function Pt(t,n,r){if(t.tag===3)fx(t,t,r);else for(;n!==null;){if(n.tag===3){fx(n,t,r);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ts===null||!Ts.has(c))){t=u(r,t),r=pg(2),c=js(n,r,2),c!==null&&(gg(r,c,n,t),$e(c,2),Si(c));break}}n=n.return}}function Hm(t,n,r){var c=t.pingCache;if(c===null){c=t.pingCache=new R_;var p=new Set;c.set(n,p)}else p=c.get(n),p===void 0&&(p=new Set,c.set(n,p));p.has(r)||(Lm=!0,p.add(r),t=U_.bind(null,t,n,r),n.then(t,t))}function U_(t,n,r){var c=t.pingCache;c!==null&&c.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Qt===t&&(Nt&r)===r&&(dn===4||dn===3&&(Nt&62914560)===Nt&&300>Re()-rc?(Mt&2)===0&&_l(t,0):Pm|=r,vl===Nt&&(vl=0)),Si(t)}function px(t,n){n===0&&(n=Ti()),t=La(t,n),t!==null&&($e(t,n),Si(t))}function F_(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),px(t,r)}function Z_(t,n){var r=0;switch(t.tag){case 31:case 13:var c=t.stateNode,p=t.memoizedState;p!==null&&(r=p.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(n),px(t,r)}function q_(t,n){return se(t,n)}var hc=null,jl=null,Km=!1,fc=!1,Qm=!1,Ms=0;function Si(t){t!==jl&&t.next===null&&(jl===null?hc=jl=t:jl=jl.next=t),fc=!0,Km||(Km=!0,K_())}function Mo(t,n){if(!Qm&&fc){Qm=!0;do for(var r=!1,c=hc;c!==null;){if(t!==0){var p=c.pendingLanes;if(p===0)var g=0;else{var j=c.suspendedLanes,C=c.pingedLanes;g=(1<<31-wt(42|t)+1)-1,g&=p&~(j&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(r=!0,vx(c,g))}else g=Nt,g=Ca(c,c===Qt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Yn(c,g)||(r=!0,vx(c,g));c=c.next}while(r);Qm=!1}}function H_(){gx()}function gx(){fc=Km=!1;var t=0;Ms!==0&&tN()&&(t=Ms);for(var n=Re(),r=null,c=hc;c!==null;){var p=c.next,g=xx(c,n);g===0?(c.next=null,r===null?hc=p:r.next=p,p===null&&(jl=r)):(r=c,(t!==0||(g&3)!==0)&&(fc=!0)),c=p}wn!==0&&wn!==5||Mo(t),Ms!==0&&(Ms=0)}function xx(t,n){for(var r=t.suspendedLanes,c=t.pingedLanes,p=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var j=31-wt(g),C=1<<j,H=p[j];H===-1?((C&r)===0||(C&c)!==0)&&(p[j]=ci(C,n)):H<=n&&(t.expiredLanes|=C),g&=~C}if(n=Qt,r=Nt,r=Ca(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,r===0||t===n&&(Lt===2||Lt===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Ae(c),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Yn(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(c!==null&&Ae(c),Ue(r)){case 2:case 8:r=He;break;case 32:r=lt;break;case 268435456:r=tn;break;default:r=lt}return c=yx.bind(null,t),r=se(r,c),t.callbackPriority=n,t.callbackNode=r,n}return c!==null&&c!==null&&Ae(c),t.callbackPriority=2,t.callbackNode=null,2}function yx(t,n){if(wn!==0&&wn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(mc()&&t.callbackNode!==r)return null;var c=Nt;return c=Ca(t,t===Qt?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Wg(t,c,n),xx(t,Re()),t.callbackNode!=null&&t.callbackNode===r?yx.bind(null,t):null)}function vx(t,n){if(mc())return null;Wg(t,n,!0)}function K_(){aN(function(){(Mt&6)!==0?se(be,H_):gx()})}function Gm(){if(Ms===0){var t=ol;t===0&&(t=Zn,Zn<<=1,(Zn&261888)===0&&(Zn=256)),Ms=t}return Ms}function bx(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ls(""+t)}function _x(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function Q_(t,n,r,c,p){if(n==="submit"&&r&&r.stateNode===p){var g=bx((p[gn]||null).action),j=c.submitter;j&&(n=(n=j[gn]||null)?bx(n.formAction):j.getAttribute("formAction"),n!==null&&(g=n,j=null));var C=new Qr("action","action",null,c,p);t.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ms!==0){var H=j?_x(p,j):new FormData(p);hm(r,{pending:!0,data:H,method:p.method,action:g},null,H)}}else typeof g=="function"&&(C.preventDefault(),H=j?_x(p,j):new FormData(p),hm(r,{pending:!0,data:H,method:p.method,action:g},g,H))},currentTarget:p}]})}}for(var Vm=0;Vm<yi.length;Vm++){var Ym=yi[Vm],G_=Ym.toLowerCase(),V_=Ym[0].toUpperCase()+Ym.slice(1);ia(G_,"on"+V_)}ia(mr,"onAnimationEnd"),ia(Mu,"onAnimationIteration"),ia(hr,"onAnimationStart"),ia("dblclick","onDoubleClick"),ia("focusin","onFocus"),ia("focusout","onBlur"),ia(Id,"onTransitionRun"),ia(Ou,"onTransitionStart"),ia(Bd,"onTransitionCancel"),ia(ys,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oo));function Nx(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var c=t[r],p=c.event;c=c.listeners;e:{var g=void 0;if(n)for(var j=c.length-1;0<=j;j--){var C=c[j],H=C.instance,fe=C.currentTarget;if(C=C.listener,H!==g&&p.isPropagationStopped())break e;g=C,p.currentTarget=fe;try{g(p)}catch(je){fr(je)}p.currentTarget=null,g=H}else for(j=0;j<c.length;j++){if(C=c[j],H=C.instance,fe=C.currentTarget,C=C.listener,H!==g&&p.isPropagationStopped())break e;g=C,p.currentTarget=fe;try{g(p)}catch(je){fr(je)}p.currentTarget=null,g=H}}}}function vt(t,n){var r=n[Ta];r===void 0&&(r=n[Ta]=new Set);var c=t+"__bubble";r.has(c)||(jx(n,t,2,!1),r.add(c))}function $m(t,n,r){var c=0;n&&(c|=4),jx(r,t,c,n)}var pc="_reactListening"+Math.random().toString(36).slice(2);function Xm(t){if(!t[pc]){t[pc]=!0,Vs.forEach(function(r){r!=="selectionchange"&&(Y_.has(r)||$m(r,!1,t),$m(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[pc]||(n[pc]=!0,$m("selectionchange",!1,n))}}function jx(t,n,r,c){switch(Jx(n)){case 2:var p=jN;break;case 8:p=SN;break;default:p=mh}r=p.bind(null,n,r,t),p=void 0,!er||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),c?p!==void 0?t.addEventListener(n,r,{capture:!0,passive:p}):t.addEventListener(n,r,!0):p!==void 0?t.addEventListener(n,r,{passive:p}):t.addEventListener(n,r,!1)}function Jm(t,n,r,c,p){var g=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var j=c.tag;if(j===3||j===4){var C=c.stateNode.containerInfo;if(C===p)break;if(j===4)for(j=c.return;j!==null;){var H=j.tag;if((H===3||H===4)&&j.stateNode.containerInfo===p)return;j=j.return}for(;C!==null;){if(j=Ie(C),j===null)return;if(H=j.tag,H===5||H===6||H===26||H===27){c=g=j;continue e}C=C.parentNode}}c=c.return}Yl(function(){var fe=g,je=Ws(r),Te=[];e:{var ge=Du.get(t);if(ge!==void 0){var xe=Qr,Fe=t;switch(t){case"keypress":if(tr(r)===0)break e;case"keydown":case"keyup":xe=bu;break;case"focusin":Fe="focus",xe=Jl;break;case"focusout":Fe="blur",xe=Jl;break;case"beforeblur":case"afterblur":xe=Jl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=pu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=kd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=Md;break;case mr:case Mu:case hr:xe=Wl;break;case ys:xe=ju;break;case"scroll":case"scrollend":xe=_t;break;case"wheel":xe=Li;break;case"copy":case"cut":case"paste":xe=Ma;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=_u;break;case"toggle":case"beforetoggle":xe=ir}var et=(n&4)!==0,Ht=!et&&(t==="scroll"||t==="scrollend"),le=et?ge!==null?ge+"Capture":null:ge;et=[];for(var $=fe,he;$!==null;){var we=$;if(he=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||he===null||le===null||(we=Di($,le),we!=null&&et.push(Do($,we,he))),Ht)break;$=$.return}0<et.length&&(ge=new xe(ge,Fe,null,r,je),Te.push({event:ge,listeners:et}))}}if((n&7)===0){e:{if(ge=t==="mouseover"||t==="pointerover",xe=t==="mouseout"||t==="pointerout",ge&&r!==Kr&&(Fe=r.relatedTarget||r.fromElement)&&(Ie(Fe)||Fe[$a]))break e;if((xe||ge)&&(ge=je.window===je?je:(ge=je.ownerDocument)?ge.defaultView||ge.parentWindow:window,xe?(Fe=r.relatedTarget||r.toElement,xe=fe,Fe=Fe?Ie(Fe):null,Fe!==null&&(Ht=h(Fe),et=Fe.tag,Fe!==Ht||et!==5&&et!==27&&et!==6)&&(Fe=null)):(xe=null,Fe=fe),xe!==Fe)){if(et=pu,we="onMouseLeave",le="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&(et=_u,we="onPointerLeave",le="onPointerEnter",$="pointer"),Ht=xe==null?ge:qn(xe),he=Fe==null?ge:qn(Fe),ge=new et(we,$+"leave",xe,r,je),ge.target=Ht,ge.relatedTarget=he,we=null,Ie(je)===fe&&(et=new et(le,$+"enter",Fe,r,je),et.target=he,et.relatedTarget=Ht,we=et),Ht=we,xe&&Fe)t:{for(et=$_,le=xe,$=Fe,he=0,we=le;we;we=et(we))he++;we=0;for(var Je=$;Je;Je=et(Je))we++;for(;0<he-we;)le=et(le),he--;for(;0<we-he;)$=et($),we--;for(;he--;){if(le===$||$!==null&&le===$.alternate){et=le;break t}le=et(le),$=et($)}et=null}else et=null;xe!==null&&Sx(Te,ge,xe,et,!1),Fe!==null&&Ht!==null&&Sx(Te,Ht,Fe,et,!0)}}e:{if(ge=fe?qn(fe):window,xe=ge.nodeName&&ge.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ge.type==="file")var Tt=or;else if(Oa(ge))if(ku)Tt=Pd;else{Tt=Ld;var Qe=ti}else xe=ge.nodeName,!xe||xe.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?fe&&Js(fe.elementType)&&(Tt=or):Tt=fs;if(Tt&&(Tt=Tt(t,fe))){Eu(Te,Tt,r,je);break e}Qe&&Qe(t,ge,fe),t==="focusout"&&fe&&ge.type==="number"&&fe.memoizedProps.value!=null&&Ja(ge,"number",ge.value)}switch(Qe=fe?qn(fe):window,t){case"focusin":(Oa(Qe)||Qe.contentEditable==="true")&&(gi=Qe,tl=fe,dr=null);break;case"focusout":dr=tl=gi=null;break;case"mousedown":gs=!0;break;case"contextmenu":case"mouseup":case"dragend":gs=!1,Au(Te,r,je);break;case"selectionchange":if(el)break;case"keydown":case"keyup":Au(Te,r,je)}var ft;if(Vr)e:{switch(t){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else ds?wu(t,r)&&(jt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(jt="onCompositionStart");jt&&(Yr&&r.locale!=="ko"&&(ds||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&ds&&(ft=hi()):(za=je,Ri="value"in za?za.value:za.textContent,ds=!0)),Qe=gc(fe,jt),0<Qe.length&&(jt=new eo(jt,t,null,r,je),Te.push({event:jt,listeners:Qe}),ft?jt.data=ft:(ft=io(r),ft!==null&&(jt.data=ft)))),(ft=Dd?ba(t,r):ms(t,r))&&(jt=gc(fe,"onBeforeInput"),0<jt.length&&(Qe=new eo("onBeforeInput","beforeinput",null,r,je),Te.push({event:Qe,listeners:jt}),Qe.data=ft)),Q_(Te,t,fe,r,je)}Nx(Te,n)})}function Do(t,n,r){return{instance:t,listener:n,currentTarget:r}}function gc(t,n){for(var r=n+"Capture",c=[];t!==null;){var p=t,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=Di(t,r),p!=null&&c.unshift(Do(t,p,g)),p=Di(t,n),p!=null&&c.push(Do(t,p,g))),t.tag===3)return c;t=t.return}return[]}function $_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Sx(t,n,r,c,p){for(var g=n._reactName,j=[];r!==null&&r!==c;){var C=r,H=C.alternate,fe=C.stateNode;if(C=C.tag,H!==null&&H===c)break;C!==5&&C!==26&&C!==27||fe===null||(H=fe,p?(fe=Di(r,g),fe!=null&&j.unshift(Do(r,fe,H))):p||(fe=Di(r,g),fe!=null&&j.push(Do(r,fe,H)))),r=r.return}j.length!==0&&t.push({event:n,listeners:j})}var X_=/\r\n?/g,J_=/\u0000|\uFFFD/g;function wx(t){return(typeof t=="string"?t:""+t).replace(X_,`
`).replace(J_,"")}function Ex(t,n){return n=wx(n),wx(t)===n}function qt(t,n,r,c,p,g){switch(r){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||Aa(t,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&Aa(t,""+c);break;case"className":Ft(t,"class",c);break;case"tabIndex":Ft(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ft(t,r,c);break;case"style":qr(t,c,g);break;case"data":if(n!=="object"){Ft(t,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=ls(""+c),t.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(r==="formAction"?(n!=="input"&&qt(t,n,"name",p.name,p,null),qt(t,n,"formEncType",p.formEncType,p,null),qt(t,n,"formMethod",p.formMethod,p,null),qt(t,n,"formTarget",p.formTarget,p,null)):(qt(t,n,"encType",p.encType,p,null),qt(t,n,"method",p.method,p,null),qt(t,n,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=ls(""+c),t.setAttribute(r,c);break;case"onClick":c!=null&&(t.onclick=na);break;case"onScroll":c!=null&&vt("scroll",t);break;case"onScrollEnd":c!=null&&vt("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}r=ls(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""+c):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":c===!0?t.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,c):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(r,c):t.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(r):t.setAttribute(r,c);break;case"popover":vt("beforetoggle",t),vt("toggle",t),gt(t,"popover",c);break;case"xlinkActuate":ta(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ta(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ta(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ta(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ta(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ta(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ta(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ta(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ta(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":gt(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Hr.get(r)||r,gt(t,r,c))}}function Wm(t,n,r,c,p,g){switch(r){case"style":qr(t,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"children":typeof c=="string"?Aa(t,c):(typeof c=="number"||typeof c=="bigint")&&Aa(t,""+c);break;case"onScroll":c!=null&&vt("scroll",t);break;case"onScrollEnd":c!=null&&vt("scrollend",t);break;case"onClick":c!=null&&(t.onclick=na);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hu.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),n=r.slice(2,p?r.length-7:void 0),g=t[gn]||null,g=g!=null?g[r]:null,typeof g=="function"&&t.removeEventListener(n,g,p),typeof c=="function")){typeof g!="function"&&g!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,c,p);break e}r in t?t[r]=c:c===!0?t.setAttribute(r,""):gt(t,r,c)}}}function Pn(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",t),vt("load",t);var c=!1,p=!1,g;for(g in r)if(r.hasOwnProperty(g)){var j=r[g];if(j!=null)switch(g){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:qt(t,n,g,j,r,null)}}p&&qt(t,n,"srcSet",r.srcSet,r,null),c&&qt(t,n,"src",r.src,r,null);return;case"input":vt("invalid",t);var C=g=j=p=null,H=null,fe=null;for(c in r)if(r.hasOwnProperty(c)){var je=r[c];if(je!=null)switch(c){case"name":p=je;break;case"type":j=je;break;case"checked":H=je;break;case"defaultChecked":fe=je;break;case"value":g=je;break;case"defaultValue":C=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(o(137,n));break;default:qt(t,n,c,je,r,null)}}Xs(t,g,C,H,fe,j,p,!1);return;case"select":vt("invalid",t),c=j=g=null;for(p in r)if(r.hasOwnProperty(p)&&(C=r[p],C!=null))switch(p){case"value":g=C;break;case"defaultValue":j=C;break;case"multiple":c=C;default:qt(t,n,p,C,r,null)}n=g,r=j,t.multiple=!!c,n!=null?Kt(t,!!c,n,!1):r!=null&&Kt(t,!!c,r,!0);return;case"textarea":vt("invalid",t),g=p=c=null;for(j in r)if(r.hasOwnProperty(j)&&(C=r[j],C!=null))switch(j){case"value":c=C;break;case"defaultValue":p=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:qt(t,n,j,C,r,null)}ss(t,c,p,g);return;case"option":for(H in r)r.hasOwnProperty(H)&&(c=r[H],c!=null)&&(H==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":qt(t,n,H,c,r,null));return;case"dialog":vt("beforetoggle",t),vt("toggle",t),vt("cancel",t),vt("close",t);break;case"iframe":case"object":vt("load",t);break;case"video":case"audio":for(c=0;c<Oo.length;c++)vt(Oo[c],t);break;case"image":vt("error",t),vt("load",t);break;case"details":vt("toggle",t);break;case"embed":case"source":case"link":vt("error",t),vt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in r)if(r.hasOwnProperty(fe)&&(c=r[fe],c!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:qt(t,n,fe,c,r,null)}return;default:if(Js(n)){for(je in r)r.hasOwnProperty(je)&&(c=r[je],c!==void 0&&Wm(t,n,je,c,r,void 0));return}}for(C in r)r.hasOwnProperty(C)&&(c=r[C],c!=null&&qt(t,n,C,c,r,null))}function W_(t,n,r,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,j=null,C=null,H=null,fe=null,je=null;for(xe in r){var Te=r[xe];if(r.hasOwnProperty(xe)&&Te!=null)switch(xe){case"checked":break;case"value":break;case"defaultValue":H=Te;default:c.hasOwnProperty(xe)||qt(t,n,xe,null,c,Te)}}for(var ge in c){var xe=c[ge];if(Te=r[ge],c.hasOwnProperty(ge)&&(xe!=null||Te!=null))switch(ge){case"type":g=xe;break;case"name":p=xe;break;case"checked":fe=xe;break;case"defaultChecked":je=xe;break;case"value":j=xe;break;case"defaultValue":C=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(o(137,n));break;default:xe!==Te&&qt(t,n,ge,xe,c,Te)}}Ql(t,j,C,H,fe,je,g,p);return;case"select":xe=j=C=ge=null;for(g in r)if(H=r[g],r.hasOwnProperty(g)&&H!=null)switch(g){case"value":break;case"multiple":xe=H;default:c.hasOwnProperty(g)||qt(t,n,g,null,c,H)}for(p in c)if(g=c[p],H=r[p],c.hasOwnProperty(p)&&(g!=null||H!=null))switch(p){case"value":ge=g;break;case"defaultValue":C=g;break;case"multiple":j=g;default:g!==H&&qt(t,n,p,g,c,H)}n=C,r=j,c=xe,ge!=null?Kt(t,!!r,ge,!1):!!c!=!!r&&(n!=null?Kt(t,!!r,n,!0):Kt(t,!!r,r?[]:"",!1));return;case"textarea":xe=ge=null;for(C in r)if(p=r[C],r.hasOwnProperty(C)&&p!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:qt(t,n,C,null,c,p)}for(j in c)if(p=c[j],g=r[j],c.hasOwnProperty(j)&&(p!=null||g!=null))switch(j){case"value":ge=p;break;case"defaultValue":xe=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(o(91));break;default:p!==g&&qt(t,n,j,p,c,g)}mi(t,ge,xe);return;case"option":for(var Fe in r)ge=r[Fe],r.hasOwnProperty(Fe)&&ge!=null&&!c.hasOwnProperty(Fe)&&(Fe==="selected"?t.selected=!1:qt(t,n,Fe,null,c,ge));for(H in c)ge=c[H],xe=r[H],c.hasOwnProperty(H)&&ge!==xe&&(ge!=null||xe!=null)&&(H==="selected"?t.selected=ge&&typeof ge!="function"&&typeof ge!="symbol":qt(t,n,H,ge,c,xe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var et in r)ge=r[et],r.hasOwnProperty(et)&&ge!=null&&!c.hasOwnProperty(et)&&qt(t,n,et,null,c,ge);for(fe in c)if(ge=c[fe],xe=r[fe],c.hasOwnProperty(fe)&&ge!==xe&&(ge!=null||xe!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(o(137,n));break;default:qt(t,n,fe,ge,c,xe)}return;default:if(Js(n)){for(var Ht in r)ge=r[Ht],r.hasOwnProperty(Ht)&&ge!==void 0&&!c.hasOwnProperty(Ht)&&Wm(t,n,Ht,void 0,c,ge);for(je in c)ge=c[je],xe=r[je],!c.hasOwnProperty(je)||ge===xe||ge===void 0&&xe===void 0||Wm(t,n,je,ge,c,xe);return}}for(var le in r)ge=r[le],r.hasOwnProperty(le)&&ge!=null&&!c.hasOwnProperty(le)&&qt(t,n,le,null,c,ge);for(Te in c)ge=c[Te],xe=r[Te],!c.hasOwnProperty(Te)||ge===xe||ge==null&&xe==null||qt(t,n,Te,ge,c,xe)}function kx(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function eN(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var p=r[c],g=p.transferSize,j=p.initiatorType,C=p.duration;if(g&&C&&kx(j)){for(j=0,C=p.responseEnd,c+=1;c<r.length;c++){var H=r[c],fe=H.startTime;if(fe>C)break;var je=H.transferSize,Te=H.initiatorType;je&&kx(Te)&&(H=H.responseEnd,j+=je*(H<C?1:(C-fe)/(H-fe)))}if(--c,n+=8*(g+j)/(p.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var eh=null,th=null;function xc(t){return t.nodeType===9?t:t.ownerDocument}function Cx(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tx(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function nh(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ah=null;function tN(){var t=window.event;return t&&t.type==="popstate"?t===ah?!1:(ah=t,!0):(ah=null,!1)}var Ax=typeof setTimeout=="function"?setTimeout:void 0,nN=typeof clearTimeout=="function"?clearTimeout:void 0,zx=typeof Promise=="function"?Promise:void 0,aN=typeof queueMicrotask=="function"?queueMicrotask:typeof zx<"u"?function(t){return zx.resolve(null).then(t).catch(iN)}:Ax;function iN(t){setTimeout(function(){throw t})}function Os(t){return t==="head"}function Mx(t,n){var r=n,c=0;do{var p=r.nextSibling;if(t.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(c===0){t.removeChild(p),kl(n);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")Ro(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Ro(r);for(var g=r.firstChild;g;){var j=g.nextSibling,C=g.nodeName;g[zi]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&g.rel.toLowerCase()==="stylesheet"||r.removeChild(g),g=j}}else r==="body"&&Ro(t.ownerDocument.body);r=p}while(r);kl(n)}function Ox(t,n){var r=t;t=0;do{var c=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=c}while(r)}function ih(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":ih(r),U(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function sN(t,n,r,c){for(;t.nodeType===1;){var p=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[zi])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==p.rel||t.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||t.getAttribute("title")!==(p.title==null?null:p.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(p.src==null?null:p.src)||t.getAttribute("type")!==(p.type==null?null:p.type)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=Ba(t.nextSibling),t===null)break}return null}function rN(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Ba(t.nextSibling),t===null))return null;return t}function Dx(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Ba(t.nextSibling),t===null))return null;return t}function sh(t){return t.data==="$?"||t.data==="$~"}function rh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function lN(t,n){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||r.readyState!=="loading")n();else{var c=function(){n(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function Ba(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var lh=null;function Rx(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(n===0)return Ba(t.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}t=t.nextSibling}return null}function Lx(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return t;n--}else r!=="/$"&&r!=="/&"||n++}t=t.previousSibling}return null}function Px(t,n,r){switch(n=xc(r),t){case"html":if(t=n.documentElement,!t)throw Error(o(452));return t;case"head":if(t=n.head,!t)throw Error(o(453));return t;case"body":if(t=n.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Ro(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);U(t)}var Ua=new Map,Ix=new Set;function yc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Xi=X.d;X.d={f:oN,r:uN,D:cN,C:dN,L:mN,m:hN,X:pN,S:fN,M:gN};function oN(){var t=Xi.f(),n=uc();return t||n}function uN(t){var n=Et(t);n!==null&&n.tag===5&&n.type==="form"?tg(n):Xi.r(t)}var Sl=typeof document>"u"?null:document;function Bx(t,n,r){var c=Sl;if(c&&typeof n=="string"&&n){var p=Yt(n);p='link[rel="'+t+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),Ix.has(p)||(Ix.add(p),t={rel:t,crossOrigin:r,href:n},c.querySelector(p)===null&&(n=c.createElement("link"),Pn(n,"link",t),nn(n),c.head.appendChild(n)))}}function cN(t){Xi.D(t),Bx("dns-prefetch",t,null)}function dN(t,n){Xi.C(t,n),Bx("preconnect",t,n)}function mN(t,n,r){Xi.L(t,n,r);var c=Sl;if(c&&t&&n){var p='link[rel="preload"][as="'+Yt(n)+'"]';n==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+Yt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+Yt(r.imageSizes)+'"]')):p+='[href="'+Yt(t)+'"]';var g=p;switch(n){case"style":g=wl(t);break;case"script":g=El(t)}Ua.has(g)||(t=w({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),Ua.set(g,t),c.querySelector(p)!==null||n==="style"&&c.querySelector(Lo(g))||n==="script"&&c.querySelector(Po(g))||(n=c.createElement("link"),Pn(n,"link",t),nn(n),c.head.appendChild(n)))}}function hN(t,n){Xi.m(t,n);var r=Sl;if(r&&t){var c=n&&typeof n.as=="string"?n.as:"script",p='link[rel="modulepreload"][as="'+Yt(c)+'"][href="'+Yt(t)+'"]',g=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=El(t)}if(!Ua.has(g)&&(t=w({rel:"modulepreload",href:t},n),Ua.set(g,t),r.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Po(g)))return}c=r.createElement("link"),Pn(c,"link",t),nn(c),r.head.appendChild(c)}}}function fN(t,n,r){Xi.S(t,n,r);var c=Sl;if(c&&t){var p=Xa(c).hoistableStyles,g=wl(t);n=n||"default";var j=p.get(g);if(!j){var C={loading:0,preload:null};if(j=c.querySelector(Lo(g)))C.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":n},r),(r=Ua.get(g))&&oh(t,r);var H=j=c.createElement("link");nn(H),Pn(H,"link",t),H._p=new Promise(function(fe,je){H.onload=fe,H.onerror=je}),H.addEventListener("load",function(){C.loading|=1}),H.addEventListener("error",function(){C.loading|=2}),C.loading|=4,vc(j,n,c)}j={type:"stylesheet",instance:j,count:1,state:C},p.set(g,j)}}}function pN(t,n){Xi.X(t,n);var r=Sl;if(r&&t){var c=Xa(r).hoistableScripts,p=El(t),g=c.get(p);g||(g=r.querySelector(Po(p)),g||(t=w({src:t,async:!0},n),(n=Ua.get(p))&&uh(t,n),g=r.createElement("script"),nn(g),Pn(g,"link",t),r.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(p,g))}}function gN(t,n){Xi.M(t,n);var r=Sl;if(r&&t){var c=Xa(r).hoistableScripts,p=El(t),g=c.get(p);g||(g=r.querySelector(Po(p)),g||(t=w({src:t,async:!0,type:"module"},n),(n=Ua.get(p))&&uh(t,n),g=r.createElement("script"),nn(g),Pn(g,"link",t),r.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(p,g))}}function Ux(t,n,r,c){var p=(p=Se.current)?yc(p):null;if(!p)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=wl(r.href),r=Xa(p).hoistableStyles,c=r.get(n),c||(c={type:"style",instance:null,count:0,state:null},r.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=wl(r.href);var g=Xa(p).hoistableStyles,j=g.get(t);if(j||(p=p.ownerDocument||p,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,j),(g=p.querySelector(Lo(t)))&&!g._p&&(j.instance=g,j.state.loading=5),Ua.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Ua.set(t,r),g||xN(p,t,r,j.state))),n&&c===null)throw Error(o(528,""));return j}if(n&&c!==null)throw Error(o(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=El(r),r=Xa(p).hoistableScripts,c=r.get(n),c||(c={type:"script",instance:null,count:0,state:null},r.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function wl(t){return'href="'+Yt(t)+'"'}function Lo(t){return'link[rel="stylesheet"]['+t+"]"}function Fx(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function xN(t,n,r,c){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=t.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Pn(n,"link",r),nn(n),t.head.appendChild(n))}function El(t){return'[src="'+Yt(t)+'"]'}function Po(t){return"script[async]"+t}function Zx(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var c=t.querySelector('style[data-href~="'+Yt(r.href)+'"]');if(c)return n.instance=c,nn(c),c;var p=w({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),nn(c),Pn(c,"style",p),vc(c,r.precedence,t),n.instance=c;case"stylesheet":p=wl(r.href);var g=t.querySelector(Lo(p));if(g)return n.state.loading|=4,n.instance=g,nn(g),g;c=Fx(r),(p=Ua.get(p))&&oh(c,p),g=(t.ownerDocument||t).createElement("link"),nn(g);var j=g;return j._p=new Promise(function(C,H){j.onload=C,j.onerror=H}),Pn(g,"link",c),n.state.loading|=4,vc(g,r.precedence,t),n.instance=g;case"script":return g=El(r.src),(p=t.querySelector(Po(g)))?(n.instance=p,nn(p),p):(c=r,(p=Ua.get(g))&&(c=w({},r),uh(c,p)),t=t.ownerDocument||t,p=t.createElement("script"),nn(p),Pn(p,"link",c),t.head.appendChild(p),n.instance=p);case"void":return null;default:throw Error(o(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,vc(c,r.precedence,t));return n.instance}function vc(t,n,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,g=p,j=0;j<c.length;j++){var C=c[j];if(C.dataset.precedence===n)g=C;else if(g!==p)break}g?g.parentNode.insertBefore(t,g.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function oh(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function uh(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var bc=null;function qx(t,n,r){if(bc===null){var c=new Map,p=bc=new Map;p.set(r,c)}else p=bc,c=p.get(r),c||(c=new Map,p.set(r,c));if(c.has(t))return c;for(c.set(t,null),r=r.getElementsByTagName(t),p=0;p<r.length;p++){var g=r[p];if(!(g[zi]||g[ln]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var j=g.getAttribute(n)||"";j=t+j;var C=c.get(j);C?C.push(g):c.set(j,[g])}}return c}function Hx(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function yN(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(t=n.disabled,typeof n.precedence=="string"&&t==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Kx(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function vN(t,n,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=wl(c.href),g=n.querySelector(Lo(p));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=_c.bind(t),n.then(t,t)),r.state.loading|=4,r.instance=g,nn(g);return}g=n.ownerDocument||n,c=Fx(c),(p=Ua.get(p))&&oh(c,p),g=g.createElement("link"),nn(g);var j=g;j._p=new Promise(function(C,H){j.onload=C,j.onerror=H}),Pn(g,"link",c),r.instance=g}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=_c.bind(t),n.addEventListener("load",r),n.addEventListener("error",r))}}var ch=0;function bN(t,n){return t.stylesheets&&t.count===0&&jc(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var c=setTimeout(function(){if(t.stylesheets&&jc(t,t.stylesheets),t.unsuspend){var g=t.unsuspend;t.unsuspend=null,g()}},6e4+n);0<t.imgBytes&&ch===0&&(ch=62500*eN());var p=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&jc(t,t.stylesheets),t.unsuspend)){var g=t.unsuspend;t.unsuspend=null,g()}},(t.imgBytes>ch?50:800)+n);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function _c(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Nc=null;function jc(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Nc=new Map,n.forEach(_N,t),Nc=null,_c.call(t))}function _N(t,n){if(!(n.state.loading&4)){var r=Nc.get(t);if(r)var c=r.get(null);else{r=new Map,Nc.set(t,r);for(var p=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var j=p[g];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(r.set(j.dataset.precedence,j),c=j)}c&&r.set(null,c)}p=n.instance,j=p.getAttribute("data-precedence"),g=r.get(j)||c,g===c&&r.set(null,p),r.set(j,p),this.count++,c=_c.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),g?g.parentNode.insertBefore(p,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(p,t.firstChild)),n.state.loading|=4}}var Io={$$typeof:D,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function NN(t,n,r,c,p,g,j,C,H){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ie(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ie(0),this.hiddenUpdates=ie(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function Qx(t,n,r,c,p,g,j,C,H,fe,je,Te){return t=new NN(t,n,r,j,H,fe,je,Te,C),n=1,g===!0&&(n|=24),g=Kn(3,null,null,n),t.current=g,g.stateNode=t,n=qd(),n.refCount++,t.pooledCache=n,n.refCount++,g.memoizedState={element:c,isDehydrated:r,cache:n},Gd(g),t}function Gx(t){return t?(t=Pi,t):Pi}function Vx(t,n,r,c,p,g){p=Gx(p),c.context===null?c.context=p:c.pendingContext=p,c=Ns(n),c.payload={element:r},g=g===void 0?null:g,g!==null&&(c.callback=g),r=js(t,c,n),r!==null&&(da(r,t,n),go(r,t,n))}function Yx(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function dh(t,n){Yx(t,n),(t=t.alternate)&&Yx(t,n)}function $x(t){if(t.tag===13||t.tag===31){var n=La(t,67108864);n!==null&&da(n,t,67108864),dh(t,67108864)}}function Xx(t){if(t.tag===13||t.tag===31){var n=wa();n=Nn(n);var r=La(t,n);r!==null&&da(r,t,n),dh(t,n)}}var Sc=!0;function jN(t,n,r,c){var p=B.T;B.T=null;var g=X.p;try{X.p=2,mh(t,n,r,c)}finally{X.p=g,B.T=p}}function SN(t,n,r,c){var p=B.T;B.T=null;var g=X.p;try{X.p=8,mh(t,n,r,c)}finally{X.p=g,B.T=p}}function mh(t,n,r,c){if(Sc){var p=hh(c);if(p===null)Jm(t,n,c,wc,r),Wx(t,c);else if(EN(p,t,n,r,c))c.stopPropagation();else if(Wx(t,c),n&4&&-1<wN.indexOf(t)){for(;p!==null;){var g=Et(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var j=On(g.pendingLanes);if(j!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;j;){var H=1<<31-wt(j);C.entanglements[1]|=H,j&=~H}Si(g),(Mt&6)===0&&(lc=Re()+500,Mo(0))}}break;case 31:case 13:C=La(g,2),C!==null&&da(C,g,2),uc(),dh(g,2)}if(g=hh(c),g===null&&Jm(t,n,c,wc,r),g===p)break;p=g}p!==null&&c.stopPropagation()}else Jm(t,n,c,null,r)}}function hh(t){return t=Ws(t),fh(t)}var wc=null;function fh(t){if(wc=null,t=Ie(t),t!==null){var n=h(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=f(n),t!==null)return t;t=null}else if(r===31){if(t=x(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return wc=t,null}function Jx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ct()){case be:return 2;case He:return 8;case lt:case at:return 32;case tn:return 268435456;default:return 32}default:return 32}}var ph=!1,Ds=null,Rs=null,Ls=null,Bo=new Map,Uo=new Map,Ps=[],wN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wx(t,n){switch(t){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":Bo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uo.delete(n.pointerId)}}function Fo(t,n,r,c,p,g){return t===null||t.nativeEvent!==g?(t={blockedOn:n,domEventName:r,eventSystemFlags:c,nativeEvent:g,targetContainers:[p]},n!==null&&(n=Et(n),n!==null&&$x(n)),t):(t.eventSystemFlags|=c,n=t.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),t)}function EN(t,n,r,c,p){switch(n){case"focusin":return Ds=Fo(Ds,t,n,r,c,p),!0;case"dragenter":return Rs=Fo(Rs,t,n,r,c,p),!0;case"mouseover":return Ls=Fo(Ls,t,n,r,c,p),!0;case"pointerover":var g=p.pointerId;return Bo.set(g,Fo(Bo.get(g)||null,t,n,r,c,p)),!0;case"gotpointercapture":return g=p.pointerId,Uo.set(g,Fo(Uo.get(g)||null,t,n,r,c,p)),!0}return!1}function ey(t){var n=Ie(t.target);if(n!==null){var r=h(n);if(r!==null){if(n=r.tag,n===13){if(n=f(r),n!==null){t.blockedOn=n,as(t.priority,function(){Xx(r)});return}}else if(n===31){if(n=x(r),n!==null){t.blockedOn=n,as(t.priority,function(){Xx(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ec(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=hh(t.nativeEvent);if(r===null){r=t.nativeEvent;var c=new r.constructor(r.type,r);Kr=c,r.target.dispatchEvent(c),Kr=null}else return n=Et(r),n!==null&&$x(n),t.blockedOn=r,!1;n.shift()}return!0}function ty(t,n,r){Ec(t)&&r.delete(n)}function kN(){ph=!1,Ds!==null&&Ec(Ds)&&(Ds=null),Rs!==null&&Ec(Rs)&&(Rs=null),Ls!==null&&Ec(Ls)&&(Ls=null),Bo.forEach(ty),Uo.forEach(ty)}function kc(t,n){t.blockedOn===n&&(t.blockedOn=null,ph||(ph=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,kN)))}var Cc=null;function ny(t){Cc!==t&&(Cc=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Cc===t&&(Cc=null);for(var n=0;n<t.length;n+=3){var r=t[n],c=t[n+1],p=t[n+2];if(typeof c!="function"){if(fh(c||r)===null)continue;break}var g=Et(r);g!==null&&(t.splice(n,3),n-=3,hm(g,{pending:!0,data:p,method:r.method,action:c},c,p))}}))}function kl(t){function n(H){return kc(H,t)}Ds!==null&&kc(Ds,t),Rs!==null&&kc(Rs,t),Ls!==null&&kc(Ls,t),Bo.forEach(n),Uo.forEach(n);for(var r=0;r<Ps.length;r++){var c=Ps[r];c.blockedOn===t&&(c.blockedOn=null)}for(;0<Ps.length&&(r=Ps[0],r.blockedOn===null);)ey(r),r.blockedOn===null&&Ps.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var p=r[c],g=r[c+1],j=p[gn]||null;if(typeof g=="function")j||ny(r);else if(j){var C=null;if(g&&g.hasAttribute("formAction")){if(p=g,j=g[gn]||null)C=j.formAction;else if(fh(p)!==null)continue}else C=j.action;typeof C=="function"?r[c+1]=C:(r.splice(c,3),c-=3),ny(r)}}}function ay(){function t(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(j){return p=j})},focusReset:"manual",scroll:"manual"})}function n(){p!==null&&(p(),p=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),p!==null&&(p(),p=null)}}}function gh(t){this._internalRoot=t}Tc.prototype.render=gh.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(o(409));var r=n.current,c=wa();Vx(r,c,t,n,null,null)},Tc.prototype.unmount=gh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Vx(t.current,2,null,t,null,null),uc(),n[$a]=null}};function Tc(t){this._internalRoot=t}Tc.prototype.unstable_scheduleHydration=function(t){if(t){var n=Gs();t={blockedOn:null,target:t,priority:n};for(var r=0;r<Ps.length&&n!==0&&n<Ps[r].priority;r++);Ps.splice(r,0,t),r===0&&ey(t)}};var iy=i.version;if(iy!=="19.2.4")throw Error(o(527,iy,"19.2.4"));X.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=b(n),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var CN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ac.isDisabled&&Ac.supportsFiber)try{Ye=Ac.inject(CN),st=Ac}catch{}}return qo.createRoot=function(t,n){if(!d(t))throw Error(o(299));var r=!1,c="",p=dg,g=mg,j=hg;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(p=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(j=n.onRecoverableError)),n=Qx(t,1,!1,null,null,r,c,null,p,g,j,ay),t[$a]=n.current,Xm(t),new gh(n)},qo.hydrateRoot=function(t,n,r){if(!d(t))throw Error(o(299));var c=!1,p="",g=dg,j=mg,C=hg,H=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(j=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError),r.formState!==void 0&&(H=r.formState)),n=Qx(t,1,!0,n,r??null,c,p,H,g,j,C,ay),n.context=Gx(null),r=n.current,c=wa(),c=Nn(c),p=Ns(c),p.callback=null,js(r,p,c),r=c,n.current.lanes=r,$e(n,r),Si(n),t[$a]=n.current,Xm(t),new Tc(n)},qo.version="19.2.4",qo}var fy;function BN(){if(fy)return vh.exports;fy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}return e(),vh.exports=IN(),vh.exports}var UN=BN();const FN=dd(UN);var Dl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ZN={setTimeout:(e,i)=>setTimeout(e,i),clearTimeout:e=>clearTimeout(e),setInterval:(e,i)=>setInterval(e,i),clearInterval:e=>clearInterval(e)},qN=class{#e=ZN;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,i){return this.#e.setTimeout(e,i)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,i){return this.#e.setInterval(e,i)}clearInterval(e){this.#e.clearInterval(e)}},Tr=new qN;function HN(e){setTimeout(e,0)}var Mr=typeof window>"u"||"Deno"in globalThis;function ea(){}function KN(e,i){return typeof e=="function"?e(i):e}function cf(e){return typeof e=="number"&&e>=0&&e!==1/0}function gv(e,i){return Math.max(e+(i||0)-Date.now(),0)}function Fs(e,i){return typeof e=="function"?e(i):e}function Fa(e,i){return typeof e=="function"?e(i):e}function py(e,i){const{type:l="all",exact:o,fetchStatus:d,predicate:h,queryKey:f,stale:x}=e;if(f){if(o){if(i.queryHash!==Df(f,i.options))return!1}else if(!Wo(i.queryKey,f))return!1}if(l!=="all"){const v=i.isActive();if(l==="active"&&!v||l==="inactive"&&v)return!1}return!(typeof x=="boolean"&&i.isStale()!==x||d&&d!==i.state.fetchStatus||h&&!h(i))}function gy(e,i){const{exact:l,status:o,predicate:d,mutationKey:h}=e;if(h){if(!i.options.mutationKey)return!1;if(l){if(Or(i.options.mutationKey)!==Or(h))return!1}else if(!Wo(i.options.mutationKey,h))return!1}return!(o&&i.state.status!==o||d&&!d(i))}function Df(e,i){return(i?.queryKeyHashFn||Or)(e)}function Or(e){return JSON.stringify(e,(i,l)=>df(l)?Object.keys(l).sort().reduce((o,d)=>(o[d]=l[d],o),{}):l)}function Wo(e,i){return e===i?!0:typeof e!=typeof i?!1:e&&i&&typeof e=="object"&&typeof i=="object"?Object.keys(i).every(l=>Wo(e[l],i[l])):!1}var QN=Object.prototype.hasOwnProperty;function xv(e,i,l=0){if(e===i)return e;if(l>500)return i;const o=xy(e)&&xy(i);if(!o&&!(df(e)&&df(i)))return i;const h=(o?e:Object.keys(e)).length,f=o?i:Object.keys(i),x=f.length,v=o?new Array(x):{};let b=0;for(let S=0;S<x;S++){const w=o?S:f[S],T=e[w],z=i[w];if(T===z){v[w]=T,(o?S<h:QN.call(e,w))&&b++;continue}if(T===null||z===null||typeof T!="object"||typeof z!="object"){v[w]=z;continue}const k=xv(T,z,l+1);v[w]=k,k===T&&b++}return h===x&&b===h?e:v}function ed(e,i){if(!i||Object.keys(e).length!==Object.keys(i).length)return!1;for(const l in e)if(e[l]!==i[l])return!1;return!0}function xy(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function df(e){if(!yy(e))return!1;const i=e.constructor;if(i===void 0)return!0;const l=i.prototype;return!(!yy(l)||!l.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function yy(e){return Object.prototype.toString.call(e)==="[object Object]"}function GN(e){return new Promise(i=>{Tr.setTimeout(i,e)})}function mf(e,i,l){return typeof l.structuralSharing=="function"?l.structuralSharing(e,i):l.structuralSharing!==!1?xv(e,i):i}function VN(e,i,l=0){const o=[...e,i];return l&&o.length>l?o.slice(1):o}function YN(e,i,l=0){const o=[i,...e];return l&&o.length>l?o.slice(0,-1):o}var Rf=Symbol();function yv(e,i){return!e.queryFn&&i?.initialPromise?()=>i.initialPromise:!e.queryFn||e.queryFn===Rf?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Lf(e,i){return typeof e=="function"?e(...i):!!e}function $N(e,i,l){let o=!1,d;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(d??=i(),o||(o=!0,d.aborted?l():d.addEventListener("abort",l,{once:!0})),d)}),e}var XN=class extends Dl{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Mr&&window.addEventListener){const i=()=>e();return window.addEventListener("visibilitychange",i,!1),()=>{window.removeEventListener("visibilitychange",i)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(i=>{i(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Pf=new XN;function hf(){let e,i;const l=new Promise((d,h)=>{e=d,i=h});l.status="pending",l.catch(()=>{});function o(d){Object.assign(l,d),delete l.resolve,delete l.reject}return l.resolve=d=>{o({status:"fulfilled",value:d}),e(d)},l.reject=d=>{o({status:"rejected",reason:d}),i(d)},l}var JN=HN;function WN(){let e=[],i=0,l=x=>{x()},o=x=>{x()},d=JN;const h=x=>{i?e.push(x):d(()=>{l(x)})},f=()=>{const x=e;e=[],x.length&&d(()=>{o(()=>{x.forEach(v=>{l(v)})})})};return{batch:x=>{let v;i++;try{v=x()}finally{i--,i||f()}return v},batchCalls:x=>(...v)=>{h(()=>{x(...v)})},schedule:h,setNotifyFunction:x=>{l=x},setBatchNotifyFunction:x=>{o=x},setScheduler:x=>{d=x}}}var En=WN(),ej=class extends Dl{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Mr&&window.addEventListener){const i=()=>e(!0),l=()=>e(!1);return window.addEventListener("online",i,!1),window.addEventListener("offline",l,!1),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",l)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(l=>{l(e)}))}isOnline(){return this.#e}},td=new ej;function tj(e){return Math.min(1e3*2**e,3e4)}function vv(e){return(e??"online")==="online"?td.isOnline():!0}var ff=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function bv(e){let i=!1,l=0,o;const d=hf(),h=()=>d.status!=="pending",f=A=>{if(!h()){const M=new ff(A);T(M),e.onCancel?.(M)}},x=()=>{i=!0},v=()=>{i=!1},b=()=>Pf.isFocused()&&(e.networkMode==="always"||td.isOnline())&&e.canRun(),S=()=>vv(e.networkMode)&&e.canRun(),w=A=>{h()||(o?.(),d.resolve(A))},T=A=>{h()||(o?.(),d.reject(A))},z=()=>new Promise(A=>{o=M=>{(h()||b())&&A(M)},e.onPause?.()}).then(()=>{o=void 0,h()||e.onContinue?.()}),k=()=>{if(h())return;let A;const M=l===0?e.initialPromise:void 0;try{A=M??e.fn()}catch(I){A=Promise.reject(I)}Promise.resolve(A).then(w).catch(I=>{if(h())return;const R=e.retry??(Mr?0:3),D=e.retryDelay??tj,K=typeof D=="function"?D(l,I):D,G=R===!0||typeof R=="number"&&l<R||typeof R=="function"&&R(l,I);if(i||!G){T(I);return}l++,e.onFail?.(l,I),GN(K).then(()=>b()?void 0:z()).then(()=>{i?T(I):k()})})};return{promise:d,status:()=>d.status,cancel:f,continue:()=>(o?.(),d),cancelRetry:x,continueRetry:v,canStart:S,start:()=>(S()?k():z().then(k),d)}}var _v=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),cf(this.gcTime)&&(this.#e=Tr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Mr?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Tr.clearTimeout(this.#e),this.#e=void 0)}},nj=class extends _v{#e;#t;#n;#i;#a;#r;#l;constructor(e){super(),this.#l=!1,this.#r=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#n=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=by(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(e){if(this.options={...this.#r,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const i=by(this.options);i.data!==void 0&&(this.setState(vy(i.data,i.dataUpdatedAt)),this.#e=i)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,i){const l=mf(this.state.data,e,this.options);return this.#s({data:l,type:"success",dataUpdatedAt:i?.updatedAt,manual:i?.manual}),l}setState(e,i){this.#s({type:"setState",state:e,setStateOptions:i})}cancel(e){const i=this.#a?.promise;return this.#a?.cancel(e),i?i.then(ea).catch(ea):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Fa(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Rf||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Fs(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!gv(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(i=>i.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(i=>i.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(i=>i!==e),this.observers.length||(this.#a&&(this.#l?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,i){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&i?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(v=>v.options.queryFn);x&&this.setOptions(x.options)}const l=new AbortController,o=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(this.#l=!0,l.signal)})},d=()=>{const x=yv(this.options,i),b=(()=>{const S={client:this.#i,queryKey:this.queryKey,meta:this.meta};return o(S),S})();return this.#l=!1,this.options.persister?this.options.persister(x,b,this):x(b)},f=(()=>{const x={fetchOptions:i,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:d};return o(x),x})();this.options.behavior?.onFetch(f,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==f.fetchOptions?.meta)&&this.#s({type:"fetch",meta:f.fetchOptions?.meta}),this.#a=bv({initialPromise:i?.initialPromise,fn:f.fetchFn,onCancel:x=>{x instanceof ff&&x.revert&&this.setState({...this.#t,fetchStatus:"idle"}),l.abort()},onFail:(x,v)=>{this.#s({type:"failed",failureCount:x,error:v})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0});try{const x=await this.#a.start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),this.#n.config.onSuccess?.(x,this),this.#n.config.onSettled?.(x,this.state.error,this),x}catch(x){if(x instanceof ff){if(x.silent)return this.#a.promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw this.#s({type:"error",error:x}),this.#n.config.onError?.(x,this),this.#n.config.onSettled?.(this.state.data,x,this),x}finally{this.scheduleGc()}}#s(e){const i=l=>{switch(e.type){case"failed":return{...l,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...l,fetchStatus:"paused"};case"continue":return{...l,fetchStatus:"fetching"};case"fetch":return{...l,...Nv(l.data,this.options),fetchMeta:e.meta??null};case"success":const o={...l,...vy(e.data,e.dataUpdatedAt),dataUpdateCount:l.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?o:void 0,o;case"error":const d=e.error;return{...l,error:d,errorUpdateCount:l.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:l.fetchFailureCount+1,fetchFailureReason:d,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...l,isInvalidated:!0};case"setState":return{...l,...e.state}}};this.state=i(this.state),En.batch(()=>{this.observers.forEach(l=>{l.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function Nv(e,i){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vv(i.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function vy(e,i){return{data:e,dataUpdatedAt:i??Date.now(),error:null,isInvalidated:!1,status:"success"}}function by(e){const i=typeof e.initialData=="function"?e.initialData():e.initialData,l=i!==void 0,o=l?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:i,dataUpdateCount:0,dataUpdatedAt:l?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:l?"success":"pending",fetchStatus:"idle"}}var aj=class extends Dl{constructor(e,i){super(),this.options=i,this.#e=e,this.#s=null,this.#l=hf(),this.bindMethods(),this.setOptions(i)}#e;#t=void 0;#n=void 0;#i=void 0;#a;#r;#l;#s;#p;#m;#h;#u;#c;#o;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),_y(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return pf(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return pf(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#_(),this.#t.removeObserver(this)}setOptions(e){const i=this.options,l=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Fa(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),i._defaulted&&!ed(this.options,i)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const o=this.hasListeners();o&&Ny(this.#t,l,this.options,i)&&this.#d(),this.updateResult(),o&&(this.#t!==l||Fa(this.options.enabled,this.#t)!==Fa(i.enabled,this.#t)||Fs(this.options.staleTime,this.#t)!==Fs(i.staleTime,this.#t))&&this.#g();const d=this.#x();o&&(this.#t!==l||Fa(this.options.enabled,this.#t)!==Fa(i.enabled,this.#t)||d!==this.#o)&&this.#y(d)}getOptimisticResult(e){const i=this.#e.getQueryCache().build(this.#e,e),l=this.createResult(i,e);return sj(this,l)&&(this.#i=l,this.#r=this.options,this.#a=this.#t.state),l}getCurrentResult(){return this.#i}trackResult(e,i){return new Proxy(e,{get:(l,o)=>(this.trackProp(o),i?.(o),o==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#l.status==="pending"&&this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(l,o))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const i=this.#e.defaultQueryOptions(e),l=this.#e.getQueryCache().build(this.#e,i);return l.fetch().then(()=>this.createResult(l,i))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#d(e){this.#N();let i=this.#t.fetch(this.options,e);return e?.throwOnError||(i=i.catch(ea)),i}#g(){this.#b();const e=Fs(this.options.staleTime,this.#t);if(Mr||this.#i.isStale||!cf(e))return;const l=gv(this.#i.dataUpdatedAt,e)+1;this.#u=Tr.setTimeout(()=>{this.#i.isStale||this.updateResult()},l)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#_(),this.#o=e,!(Mr||Fa(this.options.enabled,this.#t)===!1||!cf(this.#o)||this.#o===0)&&(this.#c=Tr.setInterval(()=>{(this.options.refetchIntervalInBackground||Pf.isFocused())&&this.#d()},this.#o))}#v(){this.#g(),this.#y(this.#x())}#b(){this.#u&&(Tr.clearTimeout(this.#u),this.#u=void 0)}#_(){this.#c&&(Tr.clearInterval(this.#c),this.#c=void 0)}createResult(e,i){const l=this.#t,o=this.options,d=this.#i,h=this.#a,f=this.#r,v=e!==l?e.state:this.#n,{state:b}=e;let S={...b},w=!1,T;if(i._optimisticResults){const Q=this.hasListeners(),ae=!Q&&_y(e,i),ve=Q&&Ny(e,l,i,o);(ae||ve)&&(S={...S,...Nv(b.data,e.options)}),i._optimisticResults==="isRestoring"&&(S.fetchStatus="idle")}let{error:z,errorUpdatedAt:k,status:A}=S;T=S.data;let M=!1;if(i.placeholderData!==void 0&&T===void 0&&A==="pending"){let Q;d?.isPlaceholderData&&i.placeholderData===f?.placeholderData?(Q=d.data,M=!0):Q=typeof i.placeholderData=="function"?i.placeholderData(this.#h?.state.data,this.#h):i.placeholderData,Q!==void 0&&(A="success",T=mf(d?.data,Q,i),w=!0)}if(i.select&&T!==void 0&&!M)if(d&&T===h?.data&&i.select===this.#p)T=this.#m;else try{this.#p=i.select,T=i.select(T),T=mf(d?.data,T,i),this.#m=T,this.#s=null}catch(Q){this.#s=Q}this.#s&&(z=this.#s,T=this.#m,k=Date.now(),A="error");const I=S.fetchStatus==="fetching",R=A==="pending",D=A==="error",K=R&&I,G=T!==void 0,q={status:A,fetchStatus:S.fetchStatus,isPending:R,isSuccess:A==="success",isError:D,isInitialLoading:K,isLoading:K,data:T,dataUpdatedAt:S.dataUpdatedAt,error:z,errorUpdatedAt:k,failureCount:S.fetchFailureCount,failureReason:S.fetchFailureReason,errorUpdateCount:S.errorUpdateCount,isFetched:S.dataUpdateCount>0||S.errorUpdateCount>0,isFetchedAfterMount:S.dataUpdateCount>v.dataUpdateCount||S.errorUpdateCount>v.errorUpdateCount,isFetching:I,isRefetching:I&&!R,isLoadingError:D&&!G,isPaused:S.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:D&&G,isStale:If(e,i),refetch:this.refetch,promise:this.#l,isEnabled:Fa(i.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const Q=q.data!==void 0,ae=q.status==="error"&&!Q,ve=_e=>{ae?_e.reject(q.error):Q&&_e.resolve(q.data)},ee=()=>{const _e=this.#l=q.promise=hf();ve(_e)},ue=this.#l;switch(ue.status){case"pending":e.queryHash===l.queryHash&&ve(ue);break;case"fulfilled":(ae||q.data!==ue.value)&&ee();break;case"rejected":(!ae||q.error!==ue.reason)&&ee();break}}return q}updateResult(){const e=this.#i,i=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#r=this.options,this.#a.data!==void 0&&(this.#h=this.#t),ed(i,e))return;this.#i=i;const l=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,d=typeof o=="function"?o():o;if(d==="all"||!d&&!this.#f.size)return!0;const h=new Set(d??this.#f);return this.options.throwOnError&&h.add("error"),Object.keys(this.#i).some(f=>{const x=f;return this.#i[x]!==e[x]&&h.has(x)})};this.#j({listeners:l()})}#N(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const i=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(i?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#j(e){En.batch(()=>{e.listeners&&this.listeners.forEach(i=>{i(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function ij(e,i){return Fa(i.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&i.retryOnMount===!1)}function _y(e,i){return ij(e,i)||e.state.data!==void 0&&pf(e,i,i.refetchOnMount)}function pf(e,i,l){if(Fa(i.enabled,e)!==!1&&Fs(i.staleTime,e)!=="static"){const o=typeof l=="function"?l(e):l;return o==="always"||o!==!1&&If(e,i)}return!1}function Ny(e,i,l,o){return(e!==i||Fa(o.enabled,e)===!1)&&(!l.suspense||e.state.status!=="error")&&If(e,l)}function If(e,i){return Fa(i.enabled,e)!==!1&&e.isStaleByTime(Fs(i.staleTime,e))}function sj(e,i){return!ed(e.getCurrentResult(),i)}function jy(e){return{onFetch:(i,l)=>{const o=i.options,d=i.fetchOptions?.meta?.fetchMore?.direction,h=i.state.data?.pages||[],f=i.state.data?.pageParams||[];let x={pages:[],pageParams:[]},v=0;const b=async()=>{let S=!1;const w=k=>{$N(k,()=>i.signal,()=>S=!0)},T=yv(i.options,i.fetchOptions),z=async(k,A,M)=>{if(S)return Promise.reject();if(A==null&&k.pages.length)return Promise.resolve(k);const R=(()=>{const V={client:i.client,queryKey:i.queryKey,pageParam:A,direction:M?"backward":"forward",meta:i.options.meta};return w(V),V})(),D=await T(R),{maxPages:K}=i.options,G=M?YN:VN;return{pages:G(k.pages,D,K),pageParams:G(k.pageParams,A,K)}};if(d&&h.length){const k=d==="backward",A=k?rj:Sy,M={pages:h,pageParams:f},I=A(o,M);x=await z(M,I,k)}else{const k=e??h.length;do{const A=v===0?f[0]??o.initialPageParam:Sy(o,x);if(v>0&&A==null)break;x=await z(x,A),v++}while(v<k)}return x};i.options.persister?i.fetchFn=()=>i.options.persister?.(b,{client:i.client,queryKey:i.queryKey,meta:i.options.meta,signal:i.signal},l):i.fetchFn=b}}}function Sy(e,{pages:i,pageParams:l}){const o=i.length-1;return i.length>0?e.getNextPageParam(i[o],i,l[o],l):void 0}function rj(e,{pages:i,pageParams:l}){return i.length>0?e.getPreviousPageParam?.(i[0],i,l[0],l):void 0}var lj=class extends _v{#e;#t;#n;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||jv(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(i=>i!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const i=()=>{this.#a({type:"continue"})},l={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=bv({fn:()=>this.options.mutationFn?this.options.mutationFn(e,l):Promise.reject(new Error("No mutationFn found")),onFail:(h,f)=>{this.#a({type:"failed",failureCount:h,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:i,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const o=this.state.status==="pending",d=!this.#i.canStart();try{if(o)i();else{this.#a({type:"pending",variables:e,isPaused:d}),this.#n.config.onMutate&&await this.#n.config.onMutate(e,this,l);const f=await this.options.onMutate?.(e,l);f!==this.state.context&&this.#a({type:"pending",context:f,variables:e,isPaused:d})}const h=await this.#i.start();return await this.#n.config.onSuccess?.(h,e,this.state.context,this,l),await this.options.onSuccess?.(h,e,this.state.context,l),await this.#n.config.onSettled?.(h,null,this.state.variables,this.state.context,this,l),await this.options.onSettled?.(h,null,e,this.state.context,l),this.#a({type:"success",data:h}),h}catch(h){try{await this.#n.config.onError?.(h,e,this.state.context,this,l)}catch(f){Promise.reject(f)}try{await this.options.onError?.(h,e,this.state.context,l)}catch(f){Promise.reject(f)}try{await this.#n.config.onSettled?.(void 0,h,this.state.variables,this.state.context,this,l)}catch(f){Promise.reject(f)}try{await this.options.onSettled?.(void 0,h,e,this.state.context,l)}catch(f){Promise.reject(f)}throw this.#a({type:"error",error:h}),h}finally{this.#n.runNext(this)}}#a(e){const i=l=>{switch(e.type){case"failed":return{...l,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...l,isPaused:!0};case"continue":return{...l,isPaused:!1};case"pending":return{...l,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...l,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...l,data:void 0,error:e.error,failureCount:l.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=i(this.state),En.batch(()=>{this.#t.forEach(l=>{l.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function jv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var oj=class extends Dl{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,i,l){const o=new lj({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(i),state:l});return this.add(o),o}add(e){this.#e.add(e);const i=zc(e);if(typeof i=="string"){const l=this.#t.get(i);l?l.push(e):this.#t.set(i,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const i=zc(e);if(typeof i=="string"){const l=this.#t.get(i);if(l)if(l.length>1){const o=l.indexOf(e);o!==-1&&l.splice(o,1)}else l[0]===e&&this.#t.delete(i)}}this.notify({type:"removed",mutation:e})}canRun(e){const i=zc(e);if(typeof i=="string"){const o=this.#t.get(i)?.find(d=>d.state.status==="pending");return!o||o===e}else return!0}runNext(e){const i=zc(e);return typeof i=="string"?this.#t.get(i)?.find(o=>o!==e&&o.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){En.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const i={exact:!0,...e};return this.getAll().find(l=>gy(i,l))}findAll(e={}){return this.getAll().filter(i=>gy(e,i))}notify(e){En.batch(()=>{this.listeners.forEach(i=>{i(e)})})}resumePausedMutations(){const e=this.getAll().filter(i=>i.state.isPaused);return En.batch(()=>Promise.all(e.map(i=>i.continue().catch(ea))))}};function zc(e){return e.options.scope?.id}var uj=class extends Dl{#e;#t=void 0;#n;#i;constructor(i,l){super(),this.#e=i,this.setOptions(l),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(i){const l=this.options;this.options=this.#e.defaultMutationOptions(i),ed(this.options,l)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),l?.mutationKey&&this.options.mutationKey&&Or(l.mutationKey)!==Or(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(i){this.#a(),this.#r(i)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#a(),this.#r()}mutate(i,l){return this.#i=l,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(i)}#a(){const i=this.#n?.state??jv();this.#t={...i,isPending:i.status==="pending",isSuccess:i.status==="success",isError:i.status==="error",isIdle:i.status==="idle",mutate:this.mutate,reset:this.reset}}#r(i){En.batch(()=>{if(this.#i&&this.hasListeners()){const l=this.#t.variables,o=this.#t.context,d={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(i?.type==="success"){try{this.#i.onSuccess?.(i.data,l,o,d)}catch(h){Promise.reject(h)}try{this.#i.onSettled?.(i.data,null,l,o,d)}catch(h){Promise.reject(h)}}else if(i?.type==="error"){try{this.#i.onError?.(i.error,l,o,d)}catch(h){Promise.reject(h)}try{this.#i.onSettled?.(void 0,i.error,l,o,d)}catch(h){Promise.reject(h)}}}this.listeners.forEach(l=>{l(this.#t)})})}},cj=class extends Dl{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,i,l){const o=i.queryKey,d=i.queryHash??Df(o,i);let h=this.get(d);return h||(h=new nj({client:e,queryKey:o,queryHash:d,options:e.defaultQueryOptions(i),state:l,defaultOptions:e.getQueryDefaults(o)}),this.add(h)),h}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const i=this.#e.get(e.queryHash);i&&(e.destroy(),i===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){En.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const i={exact:!0,...e};return this.getAll().find(l=>py(i,l))}findAll(e={}){const i=this.getAll();return Object.keys(e).length>0?i.filter(l=>py(e,l)):i}notify(e){En.batch(()=>{this.listeners.forEach(i=>{i(e)})})}onFocus(){En.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){En.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},dj=class{#e;#t;#n;#i;#a;#r;#l;#s;constructor(e={}){this.#e=e.queryCache||new cj,this.#t=e.mutationCache||new oj,this.#n=e.defaultOptions||{},this.#i=new Map,this.#a=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#l=Pf.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=td.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#l?.(),this.#l=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const i=this.defaultQueryOptions({queryKey:e});return this.#e.get(i.queryHash)?.state.data}ensureQueryData(e){const i=this.defaultQueryOptions(e),l=this.#e.build(this,i),o=l.state.data;return o===void 0?this.fetchQuery(e):(e.revalidateIfStale&&l.isStaleByTime(Fs(i.staleTime,l))&&this.prefetchQuery(i),Promise.resolve(o))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:i,state:l})=>{const o=l.data;return[i,o]})}setQueryData(e,i,l){const o=this.defaultQueryOptions({queryKey:e}),h=this.#e.get(o.queryHash)?.state.data,f=KN(i,h);if(f!==void 0)return this.#e.build(this,o).setData(f,{...l,manual:!0})}setQueriesData(e,i,l){return En.batch(()=>this.#e.findAll(e).map(({queryKey:o})=>[o,this.setQueryData(o,i,l)]))}getQueryState(e){const i=this.defaultQueryOptions({queryKey:e});return this.#e.get(i.queryHash)?.state}removeQueries(e){const i=this.#e;En.batch(()=>{i.findAll(e).forEach(l=>{i.remove(l)})})}resetQueries(e,i){const l=this.#e;return En.batch(()=>(l.findAll(e).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...e},i)))}cancelQueries(e,i={}){const l={revert:!0,...i},o=En.batch(()=>this.#e.findAll(e).map(d=>d.cancel(l)));return Promise.all(o).then(ea).catch(ea)}invalidateQueries(e,i={}){return En.batch(()=>(this.#e.findAll(e).forEach(l=>{l.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},i)))}refetchQueries(e,i={}){const l={...i,cancelRefetch:i.cancelRefetch??!0},o=En.batch(()=>this.#e.findAll(e).filter(d=>!d.isDisabled()&&!d.isStatic()).map(d=>{let h=d.fetch(void 0,l);return l.throwOnError||(h=h.catch(ea)),d.state.fetchStatus==="paused"?Promise.resolve():h}));return Promise.all(o).then(ea)}fetchQuery(e){const i=this.defaultQueryOptions(e);i.retry===void 0&&(i.retry=!1);const l=this.#e.build(this,i);return l.isStaleByTime(Fs(i.staleTime,l))?l.fetch(i):Promise.resolve(l.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ea).catch(ea)}fetchInfiniteQuery(e){return e.behavior=jy(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ea).catch(ea)}ensureInfiniteQueryData(e){return e.behavior=jy(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return td.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,i){this.#i.set(Or(e),{queryKey:e,defaultOptions:i})}getQueryDefaults(e){const i=[...this.#i.values()],l={};return i.forEach(o=>{Wo(e,o.queryKey)&&Object.assign(l,o.defaultOptions)}),l}setMutationDefaults(e,i){this.#a.set(Or(e),{mutationKey:e,defaultOptions:i})}getMutationDefaults(e){const i=[...this.#a.values()],l={};return i.forEach(o=>{Wo(e,o.mutationKey)&&Object.assign(l,o.defaultOptions)}),l}defaultQueryOptions(e){if(e._defaulted)return e;const i={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return i.queryHash||(i.queryHash=Df(i.queryKey,i)),i.refetchOnReconnect===void 0&&(i.refetchOnReconnect=i.networkMode!=="always"),i.throwOnError===void 0&&(i.throwOnError=!!i.suspense),!i.networkMode&&i.persister&&(i.networkMode="offlineFirst"),i.queryFn===Rf&&(i.enabled=!1),i}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Sv=_.createContext(void 0),Un=e=>{const i=_.useContext(Sv);if(!i)throw new Error("No QueryClient set, use QueryClientProvider to set one");return i},mj=({client:e,children:i})=>(_.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(Sv.Provider,{value:e,children:i})),wv=_.createContext(!1),hj=()=>_.useContext(wv);wv.Provider;function fj(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var pj=_.createContext(fj()),gj=()=>_.useContext(pj),xj=(e,i,l)=>{const o=l?.state.error&&typeof e.throwOnError=="function"?Lf(e.throwOnError,[l.state.error,l]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||o)&&(i.isReset()||(e.retryOnMount=!1))},yj=e=>{_.useEffect(()=>{e.clearReset()},[e])},vj=({result:e,errorResetBoundary:i,throwOnError:l,query:o,suspense:d})=>e.isError&&!i.isReset()&&!e.isFetching&&o&&(d&&e.data===void 0||Lf(l,[e.error,o])),bj=e=>{if(e.suspense){const l=d=>d==="static"?d:Math.max(d??1e3,1e3),o=e.staleTime;e.staleTime=typeof o=="function"?(...d)=>l(o(...d)):l(o),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},_j=(e,i)=>e.isLoading&&e.isFetching&&!i,Nj=(e,i)=>e?.suspense&&i.isPending,wy=(e,i,l)=>i.fetchOptimistic(e).catch(()=>{l.clearReset()});function jj(e,i,l){const o=hj(),d=gj(),h=Un(),f=h.defaultQueryOptions(e);h.getDefaultOptions().queries?._experimental_beforeQuery?.(f);const x=h.getQueryCache().get(f.queryHash);f._optimisticResults=o?"isRestoring":"optimistic",bj(f),xj(f,d,x),yj(d);const v=!h.getQueryCache().get(f.queryHash),[b]=_.useState(()=>new i(h,f)),S=b.getOptimisticResult(f),w=!o&&e.subscribed!==!1;if(_.useSyncExternalStore(_.useCallback(T=>{const z=w?b.subscribe(En.batchCalls(T)):ea;return b.updateResult(),z},[b,w]),()=>b.getCurrentResult(),()=>b.getCurrentResult()),_.useEffect(()=>{b.setOptions(f)},[f,b]),Nj(f,S))throw wy(f,b,d);if(vj({result:S,errorResetBoundary:d,throwOnError:f.throwOnError,query:x,suspense:f.suspense}))throw S.error;return h.getDefaultOptions().queries?._experimental_afterQuery?.(f,S),f.experimental_prefetchInRender&&!Mr&&_j(S,o)&&(v?wy(f,b,d):x?.promise)?.catch(ea).finally(()=>{b.updateResult()}),f.notifyOnChangeProps?S:b.trackResult(S)}function Be(e,i){return jj(e,aj)}function Xe(e,i){const l=Un(),[o]=_.useState(()=>new uj(l,e));_.useEffect(()=>{o.setOptions(e)},[o,e]);const d=_.useSyncExternalStore(_.useCallback(f=>o.subscribe(En.batchCalls(f)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),h=_.useCallback((f,x)=>{o.mutate(f,x).catch(ea)},[o]);if(d.error&&Lf(o.options.throwOnError,[d.error]))throw d.error;return{...d,mutate:h,mutateAsync:d.mutate}}var Ey="popstate";function Sj(e={}){function i(o,d){let{pathname:h,search:f,hash:x}=o.location;return gf("",{pathname:h,search:f,hash:x},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function l(o,d){return typeof d=="string"?d:eu(d)}return Ej(i,l,null,e)}function Wt(e,i){if(e===!1||e===null||typeof e>"u")throw new Error(i)}function Ha(e,i){if(!e){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function wj(){return Math.random().toString(36).substring(2,10)}function ky(e,i){return{usr:e.state,key:e.key,idx:i}}function gf(e,i,l=null,o){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof i=="string"?Rl(i):i,state:l,key:i&&i.key||o||wj()}}function eu({pathname:e="/",search:i="",hash:l=""}){return i&&i!=="?"&&(e+=i.charAt(0)==="?"?i:"?"+i),l&&l!=="#"&&(e+=l.charAt(0)==="#"?l:"#"+l),e}function Rl(e){let i={};if(e){let l=e.indexOf("#");l>=0&&(i.hash=e.substring(l),e=e.substring(0,l));let o=e.indexOf("?");o>=0&&(i.search=e.substring(o),e=e.substring(0,o)),e&&(i.pathname=e)}return i}function Ej(e,i,l,o={}){let{window:d=document.defaultView,v5Compat:h=!1}=o,f=d.history,x="POP",v=null,b=S();b==null&&(b=0,f.replaceState({...f.state,idx:b},""));function S(){return(f.state||{idx:null}).idx}function w(){x="POP";let M=S(),I=M==null?null:M-b;b=M,v&&v({action:x,location:A.location,delta:I})}function T(M,I){x="PUSH";let R=gf(A.location,M,I);b=S()+1;let D=ky(R,b),K=A.createHref(R);try{f.pushState(D,"",K)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;d.location.assign(K)}h&&v&&v({action:x,location:A.location,delta:1})}function z(M,I){x="REPLACE";let R=gf(A.location,M,I);b=S();let D=ky(R,b),K=A.createHref(R);f.replaceState(D,"",K),h&&v&&v({action:x,location:A.location,delta:0})}function k(M){return kj(M)}let A={get action(){return x},get location(){return e(d,f)},listen(M){if(v)throw new Error("A history only accepts one active listener");return d.addEventListener(Ey,w),v=M,()=>{d.removeEventListener(Ey,w),v=null}},createHref(M){return i(d,M)},createURL:k,encodeLocation(M){let I=k(M);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:T,replace:z,go(M){return f.go(M)}};return A}function kj(e,i=!1){let l="http://localhost";typeof window<"u"&&(l=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(l,"No window.location.(origin|href) available to create URL");let o=typeof e=="string"?e:eu(e);return o=o.replace(/ $/,"%20"),!i&&o.startsWith("//")&&(o=l+o),new URL(o,l)}function Ev(e,i,l="/"){return Cj(e,i,l,!1)}function Cj(e,i,l,o){let d=typeof i=="string"?Rl(i):i,h=ns(d.pathname||"/",l);if(h==null)return null;let f=kv(e);Tj(f);let x=null;for(let v=0;x==null&&v<f.length;++v){let b=Uj(h);x=Ij(f[v],b,o)}return x}function kv(e,i=[],l=[],o="",d=!1){let h=(f,x,v=d,b)=>{let S={relativePath:b===void 0?f.path||"":b,caseSensitive:f.caseSensitive===!0,childrenIndex:x,route:f};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(o)&&v)return;Wt(S.relativePath.startsWith(o),`Absolute route path "${S.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(o.length)}let w=es([o,S.relativePath]),T=l.concat(S);f.children&&f.children.length>0&&(Wt(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),kv(f.children,i,T,w,v)),!(f.path==null&&!f.index)&&i.push({path:w,score:Lj(w,f.index),routesMeta:T})};return e.forEach((f,x)=>{if(f.path===""||!f.path?.includes("?"))h(f,x);else for(let v of Cv(f.path))h(f,x,!0,v)}),i}function Cv(e){let i=e.split("/");if(i.length===0)return[];let[l,...o]=i,d=l.endsWith("?"),h=l.replace(/\?$/,"");if(o.length===0)return d?[h,""]:[h];let f=Cv(o.join("/")),x=[];return x.push(...f.map(v=>v===""?h:[h,v].join("/"))),d&&x.push(...f),x.map(v=>e.startsWith("/")&&v===""?"/":v)}function Tj(e){e.sort((i,l)=>i.score!==l.score?l.score-i.score:Pj(i.routesMeta.map(o=>o.childrenIndex),l.routesMeta.map(o=>o.childrenIndex)))}var Aj=/^:[\w-]+$/,zj=3,Mj=2,Oj=1,Dj=10,Rj=-2,Cy=e=>e==="*";function Lj(e,i){let l=e.split("/"),o=l.length;return l.some(Cy)&&(o+=Rj),i&&(o+=Mj),l.filter(d=>!Cy(d)).reduce((d,h)=>d+(Aj.test(h)?zj:h===""?Oj:Dj),o)}function Pj(e,i){return e.length===i.length&&e.slice(0,-1).every((o,d)=>o===i[d])?e[e.length-1]-i[i.length-1]:0}function Ij(e,i,l=!1){let{routesMeta:o}=e,d={},h="/",f=[];for(let x=0;x<o.length;++x){let v=o[x],b=x===o.length-1,S=h==="/"?i:i.slice(h.length)||"/",w=nd({path:v.relativePath,caseSensitive:v.caseSensitive,end:b},S),T=v.route;if(!w&&b&&l&&!o[o.length-1].route.index&&(w=nd({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},S)),!w)return null;Object.assign(d,w.params),f.push({params:d,pathname:es([h,w.pathname]),pathnameBase:Hj(es([h,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(h=es([h,w.pathnameBase]))}return f}function nd(e,i){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[l,o]=Bj(e.path,e.caseSensitive,e.end),d=i.match(l);if(!d)return null;let h=d[0],f=h.replace(/(.)\/+$/,"$1"),x=d.slice(1);return{params:o.reduce((b,{paramName:S,isOptional:w},T)=>{if(S==="*"){let k=x[T]||"";f=h.slice(0,h.length-k.length).replace(/(.)\/+$/,"$1")}const z=x[T];return w&&!z?b[S]=void 0:b[S]=(z||"").replace(/%2F/g,"/"),b},{}),pathname:h,pathnameBase:f,pattern:e}}function Bj(e,i=!1,l=!0){Ha(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let o=[],d="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,x,v)=>(o.push({paramName:x,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(o.push({paramName:"*"}),d+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?d+="\\/*$":e!==""&&e!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,i?void 0:"i"),o]}function Uj(e){try{return e.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return Ha(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),e}}function ns(e,i){if(i==="/")return e;if(!e.toLowerCase().startsWith(i.toLowerCase()))return null;let l=i.endsWith("/")?i.length-1:i.length,o=e.charAt(l);return o&&o!=="/"?null:e.slice(l)||"/"}var Fj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Zj(e,i="/"){let{pathname:l,search:o="",hash:d=""}=typeof e=="string"?Rl(e):e,h;return l?(l=l.replace(/\/\/+/g,"/"),l.startsWith("/")?h=Ty(l.substring(1),"/"):h=Ty(l,i)):h=i,{pathname:h,search:Kj(o),hash:Qj(d)}}function Ty(e,i){let l=i.replace(/\/+$/,"").split("/");return e.split("/").forEach(d=>{d===".."?l.length>1&&l.pop():d!=="."&&l.push(d)}),l.length>1?l.join("/"):"/"}function jh(e,i,l,o){return`Cannot include a '${e}' character in a manually specified \`to.${i}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${l}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qj(e){return e.filter((i,l)=>l===0||i.route.path&&i.route.path.length>0)}function Bf(e){let i=qj(e);return i.map((l,o)=>o===i.length-1?l.pathname:l.pathnameBase)}function Uf(e,i,l,o=!1){let d;typeof e=="string"?d=Rl(e):(d={...e},Wt(!d.pathname||!d.pathname.includes("?"),jh("?","pathname","search",d)),Wt(!d.pathname||!d.pathname.includes("#"),jh("#","pathname","hash",d)),Wt(!d.search||!d.search.includes("#"),jh("#","search","hash",d)));let h=e===""||d.pathname==="",f=h?"/":d.pathname,x;if(f==null)x=l;else{let w=i.length-1;if(!o&&f.startsWith("..")){let T=f.split("/");for(;T[0]==="..";)T.shift(),w-=1;d.pathname=T.join("/")}x=w>=0?i[w]:"/"}let v=Zj(d,x),b=f&&f!=="/"&&f.endsWith("/"),S=(h||f===".")&&l.endsWith("/");return!v.pathname.endsWith("/")&&(b||S)&&(v.pathname+="/"),v}var es=e=>e.join("/").replace(/\/\/+/g,"/"),Hj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Kj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Qj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Gj=class{constructor(e,i,l,o=!1){this.status=e,this.statusText=i||"",this.internal=o,l instanceof Error?(this.data=l.toString(),this.error=l):this.data=l}};function Vj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Yj(e){return e.map(i=>i.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Tv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Av(e,i){let l=e;if(typeof l!="string"||!Fj.test(l))return{absoluteURL:void 0,isExternal:!1,to:l};let o=l,d=!1;if(Tv)try{let h=new URL(window.location.href),f=l.startsWith("//")?new URL(h.protocol+l):new URL(l),x=ns(f.pathname,i);f.origin===h.origin&&x!=null?l=x+f.search+f.hash:d=!0}catch{Ha(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:d,to:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zv=["POST","PUT","PATCH","DELETE"];new Set(zv);var $j=["GET",...zv];new Set($j);var Ll=_.createContext(null);Ll.displayName="DataRouter";var md=_.createContext(null);md.displayName="DataRouterState";var Xj=_.createContext(!1),Mv=_.createContext({isTransitioning:!1});Mv.displayName="ViewTransition";var Jj=_.createContext(new Map);Jj.displayName="Fetchers";var Wj=_.createContext(null);Wj.displayName="Await";var Ea=_.createContext(null);Ea.displayName="Navigation";var iu=_.createContext(null);iu.displayName="Location";var Qa=_.createContext({outlet:null,matches:[],isDataRoute:!1});Qa.displayName="Route";var Ff=_.createContext(null);Ff.displayName="RouteError";var Ov="REACT_ROUTER_ERROR",eS="REDIRECT",tS="ROUTE_ERROR_RESPONSE";function nS(e){if(e.startsWith(`${Ov}:${eS}:{`))try{let i=JSON.parse(e.slice(28));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.location=="string"&&typeof i.reloadDocument=="boolean"&&typeof i.replace=="boolean")return i}catch{}}function aS(e){if(e.startsWith(`${Ov}:${tS}:{`))try{let i=JSON.parse(e.slice(40));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string")return new Gj(i.status,i.statusText,i.data)}catch{}}function iS(e,{relative:i}={}){Wt(Pl(),"useHref() may be used only in the context of a <Router> component.");let{basename:l,navigator:o}=_.useContext(Ea),{hash:d,pathname:h,search:f}=su(e,{relative:i}),x=h;return l!=="/"&&(x=h==="/"?l:es([l,h])),o.createHref({pathname:x,search:f,hash:d})}function Pl(){return _.useContext(iu)!=null}function Ga(){return Wt(Pl(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(iu).location}var Dv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rv(e){_.useContext(Ea).static||_.useLayoutEffect(e)}function Il(){let{isDataRoute:e}=_.useContext(Qa);return e?bS():sS()}function sS(){Wt(Pl(),"useNavigate() may be used only in the context of a <Router> component.");let e=_.useContext(Ll),{basename:i,navigator:l}=_.useContext(Ea),{matches:o}=_.useContext(Qa),{pathname:d}=Ga(),h=JSON.stringify(Bf(o)),f=_.useRef(!1);return Rv(()=>{f.current=!0}),_.useCallback((v,b={})=>{if(Ha(f.current,Dv),!f.current)return;if(typeof v=="number"){l.go(v);return}let S=Uf(v,JSON.parse(h),d,b.relative==="path");e==null&&i!=="/"&&(S.pathname=S.pathname==="/"?i:es([i,S.pathname])),(b.replace?l.replace:l.push)(S,b.state,b)},[i,l,h,d,e])}var rS=_.createContext(null);function lS(e){let i=_.useContext(Qa).outlet;return _.useMemo(()=>i&&_.createElement(rS.Provider,{value:e},i),[i,e])}function oS(){let{matches:e}=_.useContext(Qa),i=e[e.length-1];return i?i.params:{}}function su(e,{relative:i}={}){let{matches:l}=_.useContext(Qa),{pathname:o}=Ga(),d=JSON.stringify(Bf(l));return _.useMemo(()=>Uf(e,JSON.parse(d),o,i==="path"),[e,d,o,i])}function uS(e,i){return Lv(e,i)}function Lv(e,i,l,o,d){Wt(Pl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=_.useContext(Ea),{matches:f}=_.useContext(Qa),x=f[f.length-1],v=x?x.params:{},b=x?x.pathname:"/",S=x?x.pathnameBase:"/",w=x&&x.route;{let R=w&&w.path||"";Iv(b,!w||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let T=Ga(),z;if(i){let R=typeof i=="string"?Rl(i):i;Wt(S==="/"||R.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${R.pathname}" was given in the \`location\` prop.`),z=R}else z=T;let k=z.pathname||"/",A=k;if(S!=="/"){let R=S.replace(/^\//,"").split("/");A="/"+k.replace(/^\//,"").split("/").slice(R.length).join("/")}let M=Ev(e,{pathname:A});Ha(w||M!=null,`No routes matched location "${z.pathname}${z.search}${z.hash}" `),Ha(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${z.pathname}${z.search}${z.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=fS(M&&M.map(R=>Object.assign({},R,{params:Object.assign({},v,R.params),pathname:es([S,h.encodeLocation?h.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?S:es([S,h.encodeLocation?h.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),f,l,o,d);return i&&I?_.createElement(iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...z},navigationType:"POP"}},I):I}function cS(){let e=vS(),i=Vj(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),l=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:o},h={padding:"2px 4px",backgroundColor:o},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:h},"ErrorBoundary")," or"," ",_.createElement("code",{style:h},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},i),l?_.createElement("pre",{style:d},l):null,f)}var dS=_.createElement(cS,null),Pv=class extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,i){return i.location!==e.location||i.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:i.error,location:i.location,revalidation:e.revalidation||i.revalidation}}componentDidCatch(e,i){this.props.onError?this.props.onError(e,i):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const l=aS(e.digest);l&&(e=l)}let i=e!==void 0?_.createElement(Qa.Provider,{value:this.props.routeContext},_.createElement(Ff.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?_.createElement(mS,{error:e},i):i}};Pv.contextType=Xj;var Sh=new WeakMap;function mS({children:e,error:i}){let{basename:l}=_.useContext(Ea);if(typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){let o=nS(i.digest);if(o){let d=Sh.get(i);if(d)throw d;let h=Av(o.location,l);if(Tv&&!Sh.get(i))if(h.isExternal||o.reloadDocument)window.location.href=h.absoluteURL||h.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(h.to,{replace:o.replace}));throw Sh.set(i,f),f}return _.createElement("meta",{httpEquiv:"refresh",content:`0;url=${h.absoluteURL||h.to}`})}}return e}function hS({routeContext:e,match:i,children:l}){let o=_.useContext(Ll);return o&&o.static&&o.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=i.route.id),_.createElement(Qa.Provider,{value:e},l)}function fS(e,i=[],l=null,o=null,d=null){if(e==null){if(!l)return null;if(l.errors)e=l.matches;else if(i.length===0&&!l.initialized&&l.matches.length>0)e=l.matches;else return null}let h=e,f=l?.errors;if(f!=null){let S=h.findIndex(w=>w.route.id&&f?.[w.route.id]!==void 0);Wt(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),h=h.slice(0,Math.min(h.length,S+1))}let x=!1,v=-1;if(l)for(let S=0;S<h.length;S++){let w=h[S];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(v=S),w.route.id){let{loaderData:T,errors:z}=l,k=w.route.loader&&!T.hasOwnProperty(w.route.id)&&(!z||z[w.route.id]===void 0);if(w.route.lazy||k){x=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}let b=l&&o?(S,w)=>{o(S,{location:l.location,params:l.matches?.[0]?.params??{},unstable_pattern:Yj(l.matches),errorInfo:w})}:void 0;return h.reduceRight((S,w,T)=>{let z,k=!1,A=null,M=null;l&&(z=f&&w.route.id?f[w.route.id]:void 0,A=w.route.errorElement||dS,x&&(v<0&&T===0?(Iv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,M=null):v===T&&(k=!0,M=w.route.hydrateFallbackElement||null)));let I=i.concat(h.slice(0,T+1)),R=()=>{let D;return z?D=A:k?D=M:w.route.Component?D=_.createElement(w.route.Component,null):w.route.element?D=w.route.element:D=S,_.createElement(hS,{match:w,routeContext:{outlet:S,matches:I,isDataRoute:l!=null},children:D})};return l&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?_.createElement(Pv,{location:l.location,revalidation:l.revalidation,component:A,error:z,children:R(),routeContext:{outlet:null,matches:I,isDataRoute:!0},onError:b}):R()},null)}function Zf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pS(e){let i=_.useContext(Ll);return Wt(i,Zf(e)),i}function gS(e){let i=_.useContext(md);return Wt(i,Zf(e)),i}function xS(e){let i=_.useContext(Qa);return Wt(i,Zf(e)),i}function qf(e){let i=xS(e),l=i.matches[i.matches.length-1];return Wt(l.route.id,`${e} can only be used on routes that contain a unique "id"`),l.route.id}function yS(){return qf("useRouteId")}function vS(){let e=_.useContext(Ff),i=gS("useRouteError"),l=qf("useRouteError");return e!==void 0?e:i.errors?.[l]}function bS(){let{router:e}=pS("useNavigate"),i=qf("useNavigate"),l=_.useRef(!1);return Rv(()=>{l.current=!0}),_.useCallback(async(d,h={})=>{Ha(l.current,Dv),l.current&&(typeof d=="number"?await e.navigate(d):await e.navigate(d,{fromRouteId:i,...h}))},[e,i])}var Ay={};function Iv(e,i,l){!i&&!Ay[e]&&(Ay[e]=!0,Ha(!1,l))}_.memo(_S);function _S({routes:e,future:i,state:l,onError:o}){return Lv(e,void 0,l,o,i)}function Hf({to:e,replace:i,state:l,relative:o}){Wt(Pl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:d}=_.useContext(Ea);Ha(!d,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=_.useContext(Qa),{pathname:f}=Ga(),x=Il(),v=Uf(e,Bf(h),f,o==="path"),b=JSON.stringify(v);return _.useEffect(()=>{x(JSON.parse(b),{replace:i,state:l,relative:o})},[x,b,o,i,l]),null}function Kf(e){return lS(e.context)}function It(e){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function NS({basename:e="/",children:i=null,location:l,navigationType:o="POP",navigator:d,static:h=!1,unstable_useTransitions:f}){Wt(!Pl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let x=e.replace(/^\/*/,"/"),v=_.useMemo(()=>({basename:x,navigator:d,static:h,unstable_useTransitions:f,future:{}}),[x,d,h,f]);typeof l=="string"&&(l=Rl(l));let{pathname:b="/",search:S="",hash:w="",state:T=null,key:z="default"}=l,k=_.useMemo(()=>{let A=ns(b,x);return A==null?null:{location:{pathname:A,search:S,hash:w,state:T,key:z},navigationType:o}},[x,b,S,w,T,z,o]);return Ha(k!=null,`<Router basename="${x}"> is not able to match the URL "${b}${S}${w}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:_.createElement(Ea.Provider,{value:v},_.createElement(iu.Provider,{children:i,value:k}))}function jS({children:e,location:i}){return uS(xf(e),i)}function xf(e,i=[]){let l=[];return _.Children.forEach(e,(o,d)=>{if(!_.isValidElement(o))return;let h=[...i,d];if(o.type===_.Fragment){l.push.apply(l,xf(o.props.children,h));return}Wt(o.type===It,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!o.props.index||!o.props.children,"An index route cannot have child routes.");let f={id:o.props.id||h.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(f.children=xf(o.props.children,h)),l.push(f)}),l}var Vc="get",Yc="application/x-www-form-urlencoded";function hd(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function SS(e){return hd(e)&&e.tagName.toLowerCase()==="button"}function wS(e){return hd(e)&&e.tagName.toLowerCase()==="form"}function ES(e){return hd(e)&&e.tagName.toLowerCase()==="input"}function kS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function CS(e,i){return e.button===0&&(!i||i==="_self")&&!kS(e)}function yf(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((i,l)=>{let o=e[l];return i.concat(Array.isArray(o)?o.map(d=>[l,d]):[[l,o]])},[]))}function TS(e,i){let l=yf(e);return i&&i.forEach((o,d)=>{l.has(d)||i.getAll(d).forEach(h=>{l.append(d,h)})}),l}var Mc=null;function AS(){if(Mc===null)try{new FormData(document.createElement("form"),0),Mc=!1}catch{Mc=!0}return Mc}var zS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wh(e){return e!=null&&!zS.has(e)?(Ha(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yc}"`),null):e}function MS(e,i){let l,o,d,h,f;if(wS(e)){let x=e.getAttribute("action");o=x?ns(x,i):null,l=e.getAttribute("method")||Vc,d=wh(e.getAttribute("enctype"))||Yc,h=new FormData(e)}else if(SS(e)||ES(e)&&(e.type==="submit"||e.type==="image")){let x=e.form;if(x==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=e.getAttribute("formaction")||x.getAttribute("action");if(o=v?ns(v,i):null,l=e.getAttribute("formmethod")||x.getAttribute("method")||Vc,d=wh(e.getAttribute("formenctype"))||wh(x.getAttribute("enctype"))||Yc,h=new FormData(x,e),!AS()){let{name:b,type:S,value:w}=e;if(S==="image"){let T=b?`${b}.`:"";h.append(`${T}x`,"0"),h.append(`${T}y`,"0")}else b&&h.append(b,w)}}else{if(hd(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');l=Vc,o=null,d=Yc,f=e}return h&&d==="text/plain"&&(f=h,h=void 0),{action:o,method:l.toLowerCase(),encType:d,formData:h,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Qf(e,i){if(e===!1||e===null||typeof e>"u")throw new Error(i)}function OS(e,i,l,o){let d=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return l?d.pathname.endsWith("/")?d.pathname=`${d.pathname}_.${o}`:d.pathname=`${d.pathname}.${o}`:d.pathname==="/"?d.pathname=`_root.${o}`:i&&ns(d.pathname,i)==="/"?d.pathname=`${i.replace(/\/$/,"")}/_root.${o}`:d.pathname=`${d.pathname.replace(/\/$/,"")}.${o}`,d}async function DS(e,i){if(e.id in i)return i[e.id];try{let l=await import(e.module);return i[e.id]=l,l}catch(l){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(l),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RS(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function LS(e,i,l){let o=await Promise.all(e.map(async d=>{let h=i.routes[d.route.id];if(h){let f=await DS(h,l);return f.links?f.links():[]}return[]}));return US(o.flat(1).filter(RS).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function zy(e,i,l,o,d,h){let f=(v,b)=>l[b]?v.route.id!==l[b].route.id:!0,x=(v,b)=>l[b].pathname!==v.pathname||l[b].route.path?.endsWith("*")&&l[b].params["*"]!==v.params["*"];return h==="assets"?i.filter((v,b)=>f(v,b)||x(v,b)):h==="data"?i.filter((v,b)=>{let S=o.routes[v.route.id];if(!S||!S.hasLoader)return!1;if(f(v,b)||x(v,b))return!0;if(v.route.shouldRevalidate){let w=v.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:l[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function PS(e,i,{includeHydrateFallback:l}={}){return IS(e.map(o=>{let d=i.routes[o.route.id];if(!d)return[];let h=[d.module];return d.clientActionModule&&(h=h.concat(d.clientActionModule)),d.clientLoaderModule&&(h=h.concat(d.clientLoaderModule)),l&&d.hydrateFallbackModule&&(h=h.concat(d.hydrateFallbackModule)),d.imports&&(h=h.concat(d.imports)),h}).flat(1))}function IS(e){return[...new Set(e)]}function BS(e){let i={},l=Object.keys(e).sort();for(let o of l)i[o]=e[o];return i}function US(e,i){let l=new Set;return new Set(i),e.reduce((o,d)=>{let h=JSON.stringify(BS(d));return l.has(h)||(l.add(h),o.push({key:h,link:d})),o},[])}function Bv(){let e=_.useContext(Ll);return Qf(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function FS(){let e=_.useContext(md);return Qf(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Gf=_.createContext(void 0);Gf.displayName="FrameworkContext";function Uv(){let e=_.useContext(Gf);return Qf(e,"You must render this element inside a <HydratedRouter> element"),e}function ZS(e,i){let l=_.useContext(Gf),[o,d]=_.useState(!1),[h,f]=_.useState(!1),{onFocus:x,onBlur:v,onMouseEnter:b,onMouseLeave:S,onTouchStart:w}=i,T=_.useRef(null);_.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let A=I=>{I.forEach(R=>{f(R.isIntersecting)})},M=new IntersectionObserver(A,{threshold:.5});return T.current&&M.observe(T.current),()=>{M.disconnect()}}},[e]),_.useEffect(()=>{if(o){let A=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(A)}}},[o]);let z=()=>{d(!0)},k=()=>{d(!1),f(!1)};return l?e!=="intent"?[h,T,{}]:[h,T,{onFocus:Ho(x,z),onBlur:Ho(v,k),onMouseEnter:Ho(b,z),onMouseLeave:Ho(S,k),onTouchStart:Ho(w,z)}]:[!1,T,{}]}function Ho(e,i){return l=>{e&&e(l),l.defaultPrevented||i(l)}}function qS({page:e,...i}){let{router:l}=Bv(),o=_.useMemo(()=>Ev(l.routes,e,l.basename),[l.routes,e,l.basename]);return o?_.createElement(KS,{page:e,matches:o,...i}):null}function HS(e){let{manifest:i,routeModules:l}=Uv(),[o,d]=_.useState([]);return _.useEffect(()=>{let h=!1;return LS(e,i,l).then(f=>{h||d(f)}),()=>{h=!0}},[e,i,l]),o}function KS({page:e,matches:i,...l}){let o=Ga(),{future:d,manifest:h,routeModules:f}=Uv(),{basename:x}=Bv(),{loaderData:v,matches:b}=FS(),S=_.useMemo(()=>zy(e,i,b,h,o,"data"),[e,i,b,h,o]),w=_.useMemo(()=>zy(e,i,b,h,o,"assets"),[e,i,b,h,o]),T=_.useMemo(()=>{if(e===o.pathname+o.search+o.hash)return[];let A=new Set,M=!1;if(i.forEach(R=>{let D=h.routes[R.route.id];!D||!D.hasLoader||(!S.some(K=>K.route.id===R.route.id)&&R.route.id in v&&f[R.route.id]?.shouldRevalidate||D.hasClientLoader?M=!0:A.add(R.route.id))}),A.size===0)return[];let I=OS(e,x,d.unstable_trailingSlashAwareDataRequests,"data");return M&&A.size>0&&I.searchParams.set("_routes",i.filter(R=>A.has(R.route.id)).map(R=>R.route.id).join(",")),[I.pathname+I.search]},[x,d.unstable_trailingSlashAwareDataRequests,v,o,h,S,i,e,f]),z=_.useMemo(()=>PS(w,h),[w,h]),k=HS(w);return _.createElement(_.Fragment,null,T.map(A=>_.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...l})),z.map(A=>_.createElement("link",{key:A,rel:"modulepreload",href:A,...l})),k.map(({key:A,link:M})=>_.createElement("link",{key:A,nonce:l.nonce,...M,crossOrigin:M.crossOrigin??l.crossOrigin})))}function QS(...e){return i=>{e.forEach(l=>{typeof l=="function"?l(i):l!=null&&(l.current=i)})}}var GS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{GS&&(window.__reactRouterVersion="7.13.0")}catch{}function VS({basename:e,children:i,unstable_useTransitions:l,window:o}){let d=_.useRef();d.current==null&&(d.current=Sj({window:o,v5Compat:!0}));let h=d.current,[f,x]=_.useState({action:h.action,location:h.location}),v=_.useCallback(b=>{l===!1?x(b):_.startTransition(()=>x(b))},[l]);return _.useLayoutEffect(()=>h.listen(v),[h,v]),_.createElement(NS,{basename:e,children:i,location:f.location,navigationType:f.action,navigator:h,unstable_useTransitions:l})}var Fv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,li=_.forwardRef(function({onClick:i,discover:l="render",prefetch:o="none",relative:d,reloadDocument:h,replace:f,state:x,target:v,to:b,preventScrollReset:S,viewTransition:w,unstable_defaultShouldRevalidate:T,...z},k){let{basename:A,unstable_useTransitions:M}=_.useContext(Ea),I=typeof b=="string"&&Fv.test(b),R=Av(b,A);b=R.to;let D=iS(b,{relative:d}),[K,G,V]=ZS(o,z),q=XS(b,{replace:f,state:x,target:v,preventScrollReset:S,relative:d,viewTransition:w,unstable_defaultShouldRevalidate:T,unstable_useTransitions:M});function Q(ve){i&&i(ve),ve.defaultPrevented||q(ve)}let ae=_.createElement("a",{...z,...V,href:R.absoluteURL||D,onClick:R.isExternal||h?i:Q,ref:QS(k,G),target:v,"data-discover":!I&&l==="render"?"true":void 0});return K&&!I?_.createElement(_.Fragment,null,ae,_.createElement(qS,{page:D})):ae});li.displayName="Link";var Zv=_.forwardRef(function({"aria-current":i="page",caseSensitive:l=!1,className:o="",end:d=!1,style:h,to:f,viewTransition:x,children:v,...b},S){let w=su(f,{relative:b.relative}),T=Ga(),z=_.useContext(md),{navigator:k,basename:A}=_.useContext(Ea),M=z!=null&&nw(w)&&x===!0,I=k.encodeLocation?k.encodeLocation(w).pathname:w.pathname,R=T.pathname,D=z&&z.navigation&&z.navigation.location?z.navigation.location.pathname:null;l||(R=R.toLowerCase(),D=D?D.toLowerCase():null,I=I.toLowerCase()),D&&A&&(D=ns(D,A)||D);const K=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let G=R===I||!d&&R.startsWith(I)&&R.charAt(K)==="/",V=D!=null&&(D===I||!d&&D.startsWith(I)&&D.charAt(I.length)==="/"),q={isActive:G,isPending:V,isTransitioning:M},Q=G?i:void 0,ae;typeof o=="function"?ae=o(q):ae=[o,G?"active":null,V?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let ve=typeof h=="function"?h(q):h;return _.createElement(li,{...b,"aria-current":Q,className:ae,ref:S,style:ve,to:f,viewTransition:x},typeof v=="function"?v(q):v)});Zv.displayName="NavLink";var YS=_.forwardRef(({discover:e="render",fetcherKey:i,navigate:l,reloadDocument:o,replace:d,state:h,method:f=Vc,action:x,onSubmit:v,relative:b,preventScrollReset:S,viewTransition:w,unstable_defaultShouldRevalidate:T,...z},k)=>{let{unstable_useTransitions:A}=_.useContext(Ea),M=ew(),I=tw(x,{relative:b}),R=f.toLowerCase()==="get"?"get":"post",D=typeof x=="string"&&Fv.test(x),K=G=>{if(v&&v(G),G.defaultPrevented)return;G.preventDefault();let V=G.nativeEvent.submitter,q=V?.getAttribute("formmethod")||f,Q=()=>M(V||G.currentTarget,{fetcherKey:i,method:q,navigate:l,replace:d,state:h,relative:b,preventScrollReset:S,viewTransition:w,unstable_defaultShouldRevalidate:T});A&&l!==!1?_.startTransition(()=>Q()):Q()};return _.createElement("form",{ref:k,method:R,action:I,onSubmit:o?v:K,...z,"data-discover":!D&&e==="render"?"true":void 0})});YS.displayName="Form";function $S(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qv(e){let i=_.useContext(Ll);return Wt(i,$S(e)),i}function XS(e,{target:i,replace:l,state:o,preventScrollReset:d,relative:h,viewTransition:f,unstable_defaultShouldRevalidate:x,unstable_useTransitions:v}={}){let b=Il(),S=Ga(),w=su(e,{relative:h});return _.useCallback(T=>{if(CS(T,i)){T.preventDefault();let z=l!==void 0?l:eu(S)===eu(w),k=()=>b(e,{replace:z,state:o,preventScrollReset:d,relative:h,viewTransition:f,unstable_defaultShouldRevalidate:x});v?_.startTransition(()=>k()):k()}},[S,b,w,l,o,i,e,d,h,f,x,v])}function fd(e){Ha(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let i=_.useRef(yf(e)),l=_.useRef(!1),o=Ga(),d=_.useMemo(()=>TS(o.search,l.current?null:i.current),[o.search]),h=Il(),f=_.useCallback((x,v)=>{const b=yf(typeof x=="function"?x(new URLSearchParams(d)):x);l.current=!0,h("?"+b,v)},[h,d]);return[d,f]}var JS=0,WS=()=>`__${String(++JS)}__`;function ew(){let{router:e}=qv("useSubmit"),{basename:i}=_.useContext(Ea),l=yS(),o=e.fetch,d=e.navigate;return _.useCallback(async(h,f={})=>{let{action:x,method:v,encType:b,formData:S,body:w}=MS(h,i);if(f.navigate===!1){let T=f.fetcherKey||WS();await o(T,l,f.action||x,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:S,body:w,formMethod:f.method||v,formEncType:f.encType||b,flushSync:f.flushSync})}else await d(f.action||x,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:S,body:w,formMethod:f.method||v,formEncType:f.encType||b,replace:f.replace,state:f.state,fromRouteId:l,flushSync:f.flushSync,viewTransition:f.viewTransition})},[o,d,i,l])}function tw(e,{relative:i}={}){let{basename:l}=_.useContext(Ea),o=_.useContext(Qa);Wt(o,"useFormAction must be used inside a RouteContext");let[d]=o.matches.slice(-1),h={...su(e||".",{relative:i})},f=Ga();if(e==null){h.search=f.search;let x=new URLSearchParams(h.search),v=x.getAll("index");if(v.some(S=>S==="")){x.delete("index"),v.filter(w=>w).forEach(w=>x.append("index",w));let S=x.toString();h.search=S?`?${S}`:""}}return(!e||e===".")&&d.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),l!=="/"&&(h.pathname=h.pathname==="/"?l:es([l,h.pathname])),eu(h)}function nw(e,{relative:i}={}){let l=_.useContext(Mv);Wt(l!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=qv("useViewTransitionState"),d=su(e,{relative:i});if(!l.isTransitioning)return!1;let h=ns(l.currentLocation.pathname,o)||l.currentLocation.pathname,f=ns(l.nextLocation.pathname,o)||l.nextLocation.pathname;return nd(d.pathname,f)!=null||nd(d.pathname,h)!=null}const qa={signatureText:"YABUJIN",signatureTagline:"Rainwater Systems",buildVersion:"dev"};function Hv(e,i){return function(){return e.apply(i,arguments)}}const{toString:aw}=Object.prototype,{getPrototypeOf:Vf}=Object,{iterator:pd,toStringTag:Kv}=Symbol,gd=(e=>i=>{const l=aw.call(i);return e[l]||(e[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),oi=e=>(e=e.toLowerCase(),i=>gd(i)===e),xd=e=>i=>typeof i===e,{isArray:Bl}=Array,Ol=xd("undefined");function ru(e){return e!==null&&!Ol(e)&&e.constructor!==null&&!Ol(e.constructor)&&ma(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Qv=oi("ArrayBuffer");function iw(e){let i;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?i=ArrayBuffer.isView(e):i=e&&e.buffer&&Qv(e.buffer),i}const sw=xd("string"),ma=xd("function"),Gv=xd("number"),lu=e=>e!==null&&typeof e=="object",rw=e=>e===!0||e===!1,$c=e=>{if(gd(e)!=="object")return!1;const i=Vf(e);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Kv in e)&&!(pd in e)},lw=e=>{if(!lu(e)||ru(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},ow=oi("Date"),uw=oi("File"),cw=oi("Blob"),dw=oi("FileList"),mw=e=>lu(e)&&ma(e.pipe),hw=e=>{let i;return e&&(typeof FormData=="function"&&e instanceof FormData||ma(e.append)&&((i=gd(e))==="formdata"||i==="object"&&ma(e.toString)&&e.toString()==="[object FormData]"))},fw=oi("URLSearchParams"),[pw,gw,xw,yw]=["ReadableStream","Request","Response","Headers"].map(oi),vw=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ou(e,i,{allOwnKeys:l=!1}={}){if(e===null||typeof e>"u")return;let o,d;if(typeof e!="object"&&(e=[e]),Bl(e))for(o=0,d=e.length;o<d;o++)i.call(null,e[o],o,e);else{if(ru(e))return;const h=l?Object.getOwnPropertyNames(e):Object.keys(e),f=h.length;let x;for(o=0;o<f;o++)x=h[o],i.call(null,e[x],x,e)}}function Vv(e,i){if(ru(e))return null;i=i.toLowerCase();const l=Object.keys(e);let o=l.length,d;for(;o-- >0;)if(d=l[o],i===d.toLowerCase())return d;return null}const Ar=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Yv=e=>!Ol(e)&&e!==Ar;function vf(){const{caseless:e,skipUndefined:i}=Yv(this)&&this||{},l={},o=(d,h)=>{const f=e&&Vv(l,h)||h;$c(l[f])&&$c(d)?l[f]=vf(l[f],d):$c(d)?l[f]=vf({},d):Bl(d)?l[f]=d.slice():(!i||!Ol(d))&&(l[f]=d)};for(let d=0,h=arguments.length;d<h;d++)arguments[d]&&ou(arguments[d],o);return l}const bw=(e,i,l,{allOwnKeys:o}={})=>(ou(i,(d,h)=>{l&&ma(d)?Object.defineProperty(e,h,{value:Hv(d,l),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,h,{value:d,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:o}),e),_w=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Nw=(e,i,l,o)=>{e.prototype=Object.create(i.prototype,o),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:i.prototype}),l&&Object.assign(e.prototype,l)},jw=(e,i,l,o)=>{let d,h,f;const x={};if(i=i||{},e==null)return i;do{for(d=Object.getOwnPropertyNames(e),h=d.length;h-- >0;)f=d[h],(!o||o(f,e,i))&&!x[f]&&(i[f]=e[f],x[f]=!0);e=l!==!1&&Vf(e)}while(e&&(!l||l(e,i))&&e!==Object.prototype);return i},Sw=(e,i,l)=>{e=String(e),(l===void 0||l>e.length)&&(l=e.length),l-=i.length;const o=e.indexOf(i,l);return o!==-1&&o===l},ww=e=>{if(!e)return null;if(Bl(e))return e;let i=e.length;if(!Gv(i))return null;const l=new Array(i);for(;i-- >0;)l[i]=e[i];return l},Ew=(e=>i=>e&&i instanceof e)(typeof Uint8Array<"u"&&Vf(Uint8Array)),kw=(e,i)=>{const o=(e&&e[pd]).call(e);let d;for(;(d=o.next())&&!d.done;){const h=d.value;i.call(e,h[0],h[1])}},Cw=(e,i)=>{let l;const o=[];for(;(l=e.exec(i))!==null;)o.push(l);return o},Tw=oi("HTMLFormElement"),Aw=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(l,o,d){return o.toUpperCase()+d}),My=(({hasOwnProperty:e})=>(i,l)=>e.call(i,l))(Object.prototype),zw=oi("RegExp"),$v=(e,i)=>{const l=Object.getOwnPropertyDescriptors(e),o={};ou(l,(d,h)=>{let f;(f=i(d,h,e))!==!1&&(o[h]=f||d)}),Object.defineProperties(e,o)},Mw=e=>{$v(e,(i,l)=>{if(ma(e)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const o=e[l];if(ma(o)){if(i.enumerable=!1,"writable"in i){i.writable=!1;return}i.set||(i.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},Ow=(e,i)=>{const l={},o=d=>{d.forEach(h=>{l[h]=!0})};return Bl(e)?o(e):o(String(e).split(i)),l},Dw=()=>{},Rw=(e,i)=>e!=null&&Number.isFinite(e=+e)?e:i;function Lw(e){return!!(e&&ma(e.append)&&e[Kv]==="FormData"&&e[pd])}const Pw=e=>{const i=new Array(10),l=(o,d)=>{if(lu(o)){if(i.indexOf(o)>=0)return;if(ru(o))return o;if(!("toJSON"in o)){i[d]=o;const h=Bl(o)?[]:{};return ou(o,(f,x)=>{const v=l(f,d+1);!Ol(v)&&(h[x]=v)}),i[d]=void 0,h}}return o};return l(e,0)},Iw=oi("AsyncFunction"),Bw=e=>e&&(lu(e)||ma(e))&&ma(e.then)&&ma(e.catch),Xv=((e,i)=>e?setImmediate:i?((l,o)=>(Ar.addEventListener("message",({source:d,data:h})=>{d===Ar&&h===l&&o.length&&o.shift()()},!1),d=>{o.push(d),Ar.postMessage(l,"*")}))(`axios@${Math.random()}`,[]):l=>setTimeout(l))(typeof setImmediate=="function",ma(Ar.postMessage)),Uw=typeof queueMicrotask<"u"?queueMicrotask.bind(Ar):typeof process<"u"&&process.nextTick||Xv,Fw=e=>e!=null&&ma(e[pd]),ye={isArray:Bl,isArrayBuffer:Qv,isBuffer:ru,isFormData:hw,isArrayBufferView:iw,isString:sw,isNumber:Gv,isBoolean:rw,isObject:lu,isPlainObject:$c,isEmptyObject:lw,isReadableStream:pw,isRequest:gw,isResponse:xw,isHeaders:yw,isUndefined:Ol,isDate:ow,isFile:uw,isBlob:cw,isRegExp:zw,isFunction:ma,isStream:mw,isURLSearchParams:fw,isTypedArray:Ew,isFileList:dw,forEach:ou,merge:vf,extend:bw,trim:vw,stripBOM:_w,inherits:Nw,toFlatObject:jw,kindOf:gd,kindOfTest:oi,endsWith:Sw,toArray:ww,forEachEntry:kw,matchAll:Cw,isHTMLForm:Tw,hasOwnProperty:My,hasOwnProp:My,reduceDescriptors:$v,freezeMethods:Mw,toObjectSet:Ow,toCamelCase:Aw,noop:Dw,toFiniteNumber:Rw,findKey:Vv,global:Ar,isContextDefined:Yv,isSpecCompliantForm:Lw,toJSONObject:Pw,isAsyncFn:Iw,isThenable:Bw,setImmediate:Xv,asap:Uw,isIterable:Fw};let it=class Jv extends Error{static from(i,l,o,d,h,f){const x=new Jv(i.message,l||i.code,o,d,h);return x.cause=i,x.name=i.name,f&&Object.assign(x,f),x}constructor(i,l,o,d,h){super(i),this.name="AxiosError",this.isAxiosError=!0,l&&(this.code=l),o&&(this.config=o),d&&(this.request=d),h&&(this.response=h,this.status=h.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ye.toJSONObject(this.config),code:this.code,status:this.status}}};it.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";it.ERR_BAD_OPTION="ERR_BAD_OPTION";it.ECONNABORTED="ECONNABORTED";it.ETIMEDOUT="ETIMEDOUT";it.ERR_NETWORK="ERR_NETWORK";it.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";it.ERR_DEPRECATED="ERR_DEPRECATED";it.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";it.ERR_BAD_REQUEST="ERR_BAD_REQUEST";it.ERR_CANCELED="ERR_CANCELED";it.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";it.ERR_INVALID_URL="ERR_INVALID_URL";const Zw=null;function bf(e){return ye.isPlainObject(e)||ye.isArray(e)}function Wv(e){return ye.endsWith(e,"[]")?e.slice(0,-2):e}function Oy(e,i,l){return e?e.concat(i).map(function(d,h){return d=Wv(d),!l&&h?"["+d+"]":d}).join(l?".":""):i}function qw(e){return ye.isArray(e)&&!e.some(bf)}const Hw=ye.toFlatObject(ye,{},null,function(i){return/^is[A-Z]/.test(i)});function yd(e,i,l){if(!ye.isObject(e))throw new TypeError("target must be an object");i=i||new FormData,l=ye.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,M){return!ye.isUndefined(M[A])});const o=l.metaTokens,d=l.visitor||S,h=l.dots,f=l.indexes,v=(l.Blob||typeof Blob<"u"&&Blob)&&ye.isSpecCompliantForm(i);if(!ye.isFunction(d))throw new TypeError("visitor must be a function");function b(k){if(k===null)return"";if(ye.isDate(k))return k.toISOString();if(ye.isBoolean(k))return k.toString();if(!v&&ye.isBlob(k))throw new it("Blob is not supported. Use a Buffer instead.");return ye.isArrayBuffer(k)||ye.isTypedArray(k)?v&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function S(k,A,M){let I=k;if(k&&!M&&typeof k=="object"){if(ye.endsWith(A,"{}"))A=o?A:A.slice(0,-2),k=JSON.stringify(k);else if(ye.isArray(k)&&qw(k)||(ye.isFileList(k)||ye.endsWith(A,"[]"))&&(I=ye.toArray(k)))return A=Wv(A),I.forEach(function(D,K){!(ye.isUndefined(D)||D===null)&&i.append(f===!0?Oy([A],K,h):f===null?A:A+"[]",b(D))}),!1}return bf(k)?!0:(i.append(Oy(M,A,h),b(k)),!1)}const w=[],T=Object.assign(Hw,{defaultVisitor:S,convertValue:b,isVisitable:bf});function z(k,A){if(!ye.isUndefined(k)){if(w.indexOf(k)!==-1)throw Error("Circular reference detected in "+A.join("."));w.push(k),ye.forEach(k,function(I,R){(!(ye.isUndefined(I)||I===null)&&d.call(i,I,ye.isString(R)?R.trim():R,A,T))===!0&&z(I,A?A.concat(R):[R])}),w.pop()}}if(!ye.isObject(e))throw new TypeError("data must be an object");return z(e),i}function Dy(e){const i={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return i[o]})}function Yf(e,i){this._pairs=[],e&&yd(e,this,i)}const eb=Yf.prototype;eb.append=function(i,l){this._pairs.push([i,l])};eb.toString=function(i){const l=i?function(o){return i.call(this,o,Dy)}:Dy;return this._pairs.map(function(d){return l(d[0])+"="+l(d[1])},"").join("&")};function Kw(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function tb(e,i,l){if(!i)return e;const o=l&&l.encode||Kw,d=ye.isFunction(l)?{serialize:l}:l,h=d&&d.serialize;let f;if(h?f=h(i,d):f=ye.isURLSearchParams(i)?i.toString():new Yf(i,d).toString(o),f){const x=e.indexOf("#");x!==-1&&(e=e.slice(0,x)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class Ry{constructor(){this.handlers=[]}use(i,l,o){return this.handlers.push({fulfilled:i,rejected:l,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(i){this.handlers[i]&&(this.handlers[i]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(i){ye.forEach(this.handlers,function(o){o!==null&&i(o)})}}const nb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Qw=typeof URLSearchParams<"u"?URLSearchParams:Yf,Gw=typeof FormData<"u"?FormData:null,Vw=typeof Blob<"u"?Blob:null,Yw={isBrowser:!0,classes:{URLSearchParams:Qw,FormData:Gw,Blob:Vw},protocols:["http","https","file","blob","url","data"]},$f=typeof window<"u"&&typeof document<"u",_f=typeof navigator=="object"&&navigator||void 0,$w=$f&&(!_f||["ReactNative","NativeScript","NS"].indexOf(_f.product)<0),Xw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Jw=$f&&window.location.href||"http://localhost",Ww=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$f,hasStandardBrowserEnv:$w,hasStandardBrowserWebWorkerEnv:Xw,navigator:_f,origin:Jw},Symbol.toStringTag,{value:"Module"})),Gn={...Ww,...Yw};function e2(e,i){return yd(e,new Gn.classes.URLSearchParams,{visitor:function(l,o,d,h){return Gn.isNode&&ye.isBuffer(l)?(this.append(o,l.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)},...i})}function t2(e){return ye.matchAll(/\w+|\[(\w*)]/g,e).map(i=>i[0]==="[]"?"":i[1]||i[0])}function n2(e){const i={},l=Object.keys(e);let o;const d=l.length;let h;for(o=0;o<d;o++)h=l[o],i[h]=e[h];return i}function ab(e){function i(l,o,d,h){let f=l[h++];if(f==="__proto__")return!0;const x=Number.isFinite(+f),v=h>=l.length;return f=!f&&ye.isArray(d)?d.length:f,v?(ye.hasOwnProp(d,f)?d[f]=[d[f],o]:d[f]=o,!x):((!d[f]||!ye.isObject(d[f]))&&(d[f]=[]),i(l,o,d[f],h)&&ye.isArray(d[f])&&(d[f]=n2(d[f])),!x)}if(ye.isFormData(e)&&ye.isFunction(e.entries)){const l={};return ye.forEachEntry(e,(o,d)=>{i(t2(o),d,l,0)}),l}return null}function a2(e,i,l){if(ye.isString(e))try{return(i||JSON.parse)(e),ye.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(l||JSON.stringify)(e)}const uu={transitional:nb,adapter:["xhr","http","fetch"],transformRequest:[function(i,l){const o=l.getContentType()||"",d=o.indexOf("application/json")>-1,h=ye.isObject(i);if(h&&ye.isHTMLForm(i)&&(i=new FormData(i)),ye.isFormData(i))return d?JSON.stringify(ab(i)):i;if(ye.isArrayBuffer(i)||ye.isBuffer(i)||ye.isStream(i)||ye.isFile(i)||ye.isBlob(i)||ye.isReadableStream(i))return i;if(ye.isArrayBufferView(i))return i.buffer;if(ye.isURLSearchParams(i))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),i.toString();let x;if(h){if(o.indexOf("application/x-www-form-urlencoded")>-1)return e2(i,this.formSerializer).toString();if((x=ye.isFileList(i))||o.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return yd(x?{"files[]":i}:i,v&&new v,this.formSerializer)}}return h||d?(l.setContentType("application/json",!1),a2(i)):i}],transformResponse:[function(i){const l=this.transitional||uu.transitional,o=l&&l.forcedJSONParsing,d=this.responseType==="json";if(ye.isResponse(i)||ye.isReadableStream(i))return i;if(i&&ye.isString(i)&&(o&&!this.responseType||d)){const f=!(l&&l.silentJSONParsing)&&d;try{return JSON.parse(i,this.parseReviver)}catch(x){if(f)throw x.name==="SyntaxError"?it.from(x,it.ERR_BAD_RESPONSE,this,null,this.response):x}}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gn.classes.FormData,Blob:Gn.classes.Blob},validateStatus:function(i){return i>=200&&i<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ye.forEach(["delete","get","head","post","put","patch"],e=>{uu.headers[e]={}});const i2=ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),s2=e=>{const i={};let l,o,d;return e&&e.split(`
`).forEach(function(f){d=f.indexOf(":"),l=f.substring(0,d).trim().toLowerCase(),o=f.substring(d+1).trim(),!(!l||i[l]&&i2[l])&&(l==="set-cookie"?i[l]?i[l].push(o):i[l]=[o]:i[l]=i[l]?i[l]+", "+o:o)}),i},Ly=Symbol("internals");function Ko(e){return e&&String(e).trim().toLowerCase()}function Xc(e){return e===!1||e==null?e:ye.isArray(e)?e.map(Xc):String(e)}function r2(e){const i=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=l.exec(e);)i[o[1]]=o[2];return i}const l2=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Eh(e,i,l,o,d){if(ye.isFunction(o))return o.call(this,i,l);if(d&&(i=l),!!ye.isString(i)){if(ye.isString(o))return i.indexOf(o)!==-1;if(ye.isRegExp(o))return o.test(i)}}function o2(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(i,l,o)=>l.toUpperCase()+o)}function u2(e,i){const l=ye.toCamelCase(" "+i);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+l,{value:function(d,h,f){return this[o].call(this,i,d,h,f)},configurable:!0})})}let ha=class{constructor(i){i&&this.set(i)}set(i,l,o){const d=this;function h(x,v,b){const S=Ko(v);if(!S)throw new Error("header name must be a non-empty string");const w=ye.findKey(d,S);(!w||d[w]===void 0||b===!0||b===void 0&&d[w]!==!1)&&(d[w||v]=Xc(x))}const f=(x,v)=>ye.forEach(x,(b,S)=>h(b,S,v));if(ye.isPlainObject(i)||i instanceof this.constructor)f(i,l);else if(ye.isString(i)&&(i=i.trim())&&!l2(i))f(s2(i),l);else if(ye.isObject(i)&&ye.isIterable(i)){let x={},v,b;for(const S of i){if(!ye.isArray(S))throw TypeError("Object iterator must return a key-value pair");x[b=S[0]]=(v=x[b])?ye.isArray(v)?[...v,S[1]]:[v,S[1]]:S[1]}f(x,l)}else i!=null&&h(l,i,o);return this}get(i,l){if(i=Ko(i),i){const o=ye.findKey(this,i);if(o){const d=this[o];if(!l)return d;if(l===!0)return r2(d);if(ye.isFunction(l))return l.call(this,d,o);if(ye.isRegExp(l))return l.exec(d);throw new TypeError("parser must be boolean|regexp|function")}}}has(i,l){if(i=Ko(i),i){const o=ye.findKey(this,i);return!!(o&&this[o]!==void 0&&(!l||Eh(this,this[o],o,l)))}return!1}delete(i,l){const o=this;let d=!1;function h(f){if(f=Ko(f),f){const x=ye.findKey(o,f);x&&(!l||Eh(o,o[x],x,l))&&(delete o[x],d=!0)}}return ye.isArray(i)?i.forEach(h):h(i),d}clear(i){const l=Object.keys(this);let o=l.length,d=!1;for(;o--;){const h=l[o];(!i||Eh(this,this[h],h,i,!0))&&(delete this[h],d=!0)}return d}normalize(i){const l=this,o={};return ye.forEach(this,(d,h)=>{const f=ye.findKey(o,h);if(f){l[f]=Xc(d),delete l[h];return}const x=i?o2(h):String(h).trim();x!==h&&delete l[h],l[x]=Xc(d),o[x]=!0}),this}concat(...i){return this.constructor.concat(this,...i)}toJSON(i){const l=Object.create(null);return ye.forEach(this,(o,d)=>{o!=null&&o!==!1&&(l[d]=i&&ye.isArray(o)?o.join(", "):o)}),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([i,l])=>i+": "+l).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(i){return i instanceof this?i:new this(i)}static concat(i,...l){const o=new this(i);return l.forEach(d=>o.set(d)),o}static accessor(i){const o=(this[Ly]=this[Ly]={accessors:{}}).accessors,d=this.prototype;function h(f){const x=Ko(f);o[x]||(u2(d,f),o[x]=!0)}return ye.isArray(i)?i.forEach(h):h(i),this}};ha.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ye.reduceDescriptors(ha.prototype,({value:e},i)=>{let l=i[0].toUpperCase()+i.slice(1);return{get:()=>e,set(o){this[l]=o}}});ye.freezeMethods(ha);function kh(e,i){const l=this||uu,o=i||l,d=ha.from(o.headers);let h=o.data;return ye.forEach(e,function(x){h=x.call(l,h,d.normalize(),i?i.status:void 0)}),d.normalize(),h}function ib(e){return!!(e&&e.__CANCEL__)}let cu=class extends it{constructor(i,l,o){super(i??"canceled",it.ERR_CANCELED,l,o),this.name="CanceledError",this.__CANCEL__=!0}};function sb(e,i,l){const o=l.config.validateStatus;!l.status||!o||o(l.status)?e(l):i(new it("Request failed with status code "+l.status,[it.ERR_BAD_REQUEST,it.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}function c2(e){const i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return i&&i[1]||""}function d2(e,i){e=e||10;const l=new Array(e),o=new Array(e);let d=0,h=0,f;return i=i!==void 0?i:1e3,function(v){const b=Date.now(),S=o[h];f||(f=b),l[d]=v,o[d]=b;let w=h,T=0;for(;w!==d;)T+=l[w++],w=w%e;if(d=(d+1)%e,d===h&&(h=(h+1)%e),b-f<i)return;const z=S&&b-S;return z?Math.round(T*1e3/z):void 0}}function m2(e,i){let l=0,o=1e3/i,d,h;const f=(b,S=Date.now())=>{l=S,d=null,h&&(clearTimeout(h),h=null),e(...b)};return[(...b)=>{const S=Date.now(),w=S-l;w>=o?f(b,S):(d=b,h||(h=setTimeout(()=>{h=null,f(d)},o-w)))},()=>d&&f(d)]}const ad=(e,i,l=3)=>{let o=0;const d=d2(50,250);return m2(h=>{const f=h.loaded,x=h.lengthComputable?h.total:void 0,v=f-o,b=d(v),S=f<=x;o=f;const w={loaded:f,total:x,progress:x?f/x:void 0,bytes:v,rate:b||void 0,estimated:b&&x&&S?(x-f)/b:void 0,event:h,lengthComputable:x!=null,[i?"download":"upload"]:!0};e(w)},l)},Py=(e,i)=>{const l=e!=null;return[o=>i[0]({lengthComputable:l,total:e,loaded:o}),i[1]]},Iy=e=>(...i)=>ye.asap(()=>e(...i)),h2=Gn.hasStandardBrowserEnv?((e,i)=>l=>(l=new URL(l,Gn.origin),e.protocol===l.protocol&&e.host===l.host&&(i||e.port===l.port)))(new URL(Gn.origin),Gn.navigator&&/(msie|trident)/i.test(Gn.navigator.userAgent)):()=>!0,f2=Gn.hasStandardBrowserEnv?{write(e,i,l,o,d,h,f){if(typeof document>"u")return;const x=[`${e}=${encodeURIComponent(i)}`];ye.isNumber(l)&&x.push(`expires=${new Date(l).toUTCString()}`),ye.isString(o)&&x.push(`path=${o}`),ye.isString(d)&&x.push(`domain=${d}`),h===!0&&x.push("secure"),ye.isString(f)&&x.push(`SameSite=${f}`),document.cookie=x.join("; ")},read(e){if(typeof document>"u")return null;const i=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return i?decodeURIComponent(i[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function p2(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function g2(e,i){return i?e.replace(/\/?\/$/,"")+"/"+i.replace(/^\/+/,""):e}function rb(e,i,l){let o=!p2(i);return e&&(o||l==!1)?g2(e,i):i}const By=e=>e instanceof ha?{...e}:e;function Dr(e,i){i=i||{};const l={};function o(b,S,w,T){return ye.isPlainObject(b)&&ye.isPlainObject(S)?ye.merge.call({caseless:T},b,S):ye.isPlainObject(S)?ye.merge({},S):ye.isArray(S)?S.slice():S}function d(b,S,w,T){if(ye.isUndefined(S)){if(!ye.isUndefined(b))return o(void 0,b,w,T)}else return o(b,S,w,T)}function h(b,S){if(!ye.isUndefined(S))return o(void 0,S)}function f(b,S){if(ye.isUndefined(S)){if(!ye.isUndefined(b))return o(void 0,b)}else return o(void 0,S)}function x(b,S,w){if(w in i)return o(b,S);if(w in e)return o(void 0,b)}const v={url:h,method:h,data:h,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:x,headers:(b,S,w)=>d(By(b),By(S),w,!0)};return ye.forEach(Object.keys({...e,...i}),function(S){const w=v[S]||d,T=w(e[S],i[S],S);ye.isUndefined(T)&&w!==x||(l[S]=T)}),l}const lb=e=>{const i=Dr({},e);let{data:l,withXSRFToken:o,xsrfHeaderName:d,xsrfCookieName:h,headers:f,auth:x}=i;if(i.headers=f=ha.from(f),i.url=tb(rb(i.baseURL,i.url,i.allowAbsoluteUrls),e.params,e.paramsSerializer),x&&f.set("Authorization","Basic "+btoa((x.username||"")+":"+(x.password?unescape(encodeURIComponent(x.password)):""))),ye.isFormData(l)){if(Gn.hasStandardBrowserEnv||Gn.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(ye.isFunction(l.getHeaders)){const v=l.getHeaders(),b=["content-type","content-length"];Object.entries(v).forEach(([S,w])=>{b.includes(S.toLowerCase())&&f.set(S,w)})}}if(Gn.hasStandardBrowserEnv&&(o&&ye.isFunction(o)&&(o=o(i)),o||o!==!1&&h2(i.url))){const v=d&&h&&f2.read(h);v&&f.set(d,v)}return i},x2=typeof XMLHttpRequest<"u",y2=x2&&function(e){return new Promise(function(l,o){const d=lb(e);let h=d.data;const f=ha.from(d.headers).normalize();let{responseType:x,onUploadProgress:v,onDownloadProgress:b}=d,S,w,T,z,k;function A(){z&&z(),k&&k(),d.cancelToken&&d.cancelToken.unsubscribe(S),d.signal&&d.signal.removeEventListener("abort",S)}let M=new XMLHttpRequest;M.open(d.method.toUpperCase(),d.url,!0),M.timeout=d.timeout;function I(){if(!M)return;const D=ha.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),G={data:!x||x==="text"||x==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:D,config:e,request:M};sb(function(q){l(q),A()},function(q){o(q),A()},G),M=null}"onloadend"in M?M.onloadend=I:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(I)},M.onabort=function(){M&&(o(new it("Request aborted",it.ECONNABORTED,e,M)),M=null)},M.onerror=function(K){const G=K&&K.message?K.message:"Network Error",V=new it(G,it.ERR_NETWORK,e,M);V.event=K||null,o(V),M=null},M.ontimeout=function(){let K=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded";const G=d.transitional||nb;d.timeoutErrorMessage&&(K=d.timeoutErrorMessage),o(new it(K,G.clarifyTimeoutError?it.ETIMEDOUT:it.ECONNABORTED,e,M)),M=null},h===void 0&&f.setContentType(null),"setRequestHeader"in M&&ye.forEach(f.toJSON(),function(K,G){M.setRequestHeader(G,K)}),ye.isUndefined(d.withCredentials)||(M.withCredentials=!!d.withCredentials),x&&x!=="json"&&(M.responseType=d.responseType),b&&([T,k]=ad(b,!0),M.addEventListener("progress",T)),v&&M.upload&&([w,z]=ad(v),M.upload.addEventListener("progress",w),M.upload.addEventListener("loadend",z)),(d.cancelToken||d.signal)&&(S=D=>{M&&(o(!D||D.type?new cu(null,e,M):D),M.abort(),M=null)},d.cancelToken&&d.cancelToken.subscribe(S),d.signal&&(d.signal.aborted?S():d.signal.addEventListener("abort",S)));const R=c2(d.url);if(R&&Gn.protocols.indexOf(R)===-1){o(new it("Unsupported protocol "+R+":",it.ERR_BAD_REQUEST,e));return}M.send(h||null)})},v2=(e,i)=>{const{length:l}=e=e?e.filter(Boolean):[];if(i||l){let o=new AbortController,d;const h=function(b){if(!d){d=!0,x();const S=b instanceof Error?b:this.reason;o.abort(S instanceof it?S:new cu(S instanceof Error?S.message:S))}};let f=i&&setTimeout(()=>{f=null,h(new it(`timeout of ${i}ms exceeded`,it.ETIMEDOUT))},i);const x=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(b=>{b.unsubscribe?b.unsubscribe(h):b.removeEventListener("abort",h)}),e=null)};e.forEach(b=>b.addEventListener("abort",h));const{signal:v}=o;return v.unsubscribe=()=>ye.asap(x),v}},b2=function*(e,i){let l=e.byteLength;if(l<i){yield e;return}let o=0,d;for(;o<l;)d=o+i,yield e.slice(o,d),o=d},_2=async function*(e,i){for await(const l of N2(e))yield*b2(l,i)},N2=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const i=e.getReader();try{for(;;){const{done:l,value:o}=await i.read();if(l)break;yield o}}finally{await i.cancel()}},Uy=(e,i,l,o)=>{const d=_2(e,i);let h=0,f,x=v=>{f||(f=!0,o&&o(v))};return new ReadableStream({async pull(v){try{const{done:b,value:S}=await d.next();if(b){x(),v.close();return}let w=S.byteLength;if(l){let T=h+=w;l(T)}v.enqueue(new Uint8Array(S))}catch(b){throw x(b),b}},cancel(v){return x(v),d.return()}},{highWaterMark:2})},Fy=64*1024,{isFunction:Oc}=ye,j2=(({Request:e,Response:i})=>({Request:e,Response:i}))(ye.global),{ReadableStream:Zy,TextEncoder:qy}=ye.global,Hy=(e,...i)=>{try{return!!e(...i)}catch{return!1}},S2=e=>{e=ye.merge.call({skipUndefined:!0},j2,e);const{fetch:i,Request:l,Response:o}=e,d=i?Oc(i):typeof fetch=="function",h=Oc(l),f=Oc(o);if(!d)return!1;const x=d&&Oc(Zy),v=d&&(typeof qy=="function"?(k=>A=>k.encode(A))(new qy):async k=>new Uint8Array(await new l(k).arrayBuffer())),b=h&&x&&Hy(()=>{let k=!1;const A=new l(Gn.origin,{body:new Zy,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!A}),S=f&&x&&Hy(()=>ye.isReadableStream(new o("").body)),w={stream:S&&(k=>k.body)};d&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!w[k]&&(w[k]=(A,M)=>{let I=A&&A[k];if(I)return I.call(A);throw new it(`Response type '${k}' is not supported`,it.ERR_NOT_SUPPORT,M)})});const T=async k=>{if(k==null)return 0;if(ye.isBlob(k))return k.size;if(ye.isSpecCompliantForm(k))return(await new l(Gn.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(ye.isArrayBufferView(k)||ye.isArrayBuffer(k))return k.byteLength;if(ye.isURLSearchParams(k)&&(k=k+""),ye.isString(k))return(await v(k)).byteLength},z=async(k,A)=>{const M=ye.toFiniteNumber(k.getContentLength());return M??T(A)};return async k=>{let{url:A,method:M,data:I,signal:R,cancelToken:D,timeout:K,onDownloadProgress:G,onUploadProgress:V,responseType:q,headers:Q,withCredentials:ae="same-origin",fetchOptions:ve}=lb(k),ee=i||fetch;q=q?(q+"").toLowerCase():"text";let ue=v2([R,D&&D.toAbortSignal()],K),_e=null;const ne=ue&&ue.unsubscribe&&(()=>{ue.unsubscribe()});let W;try{if(V&&b&&M!=="get"&&M!=="head"&&(W=await z(Q,I))!==0){let O=new l(A,{method:"POST",body:I,duplex:"half"}),te;if(ye.isFormData(I)&&(te=O.headers.get("content-type"))&&Q.setContentType(te),O.body){const[P,Z]=Py(W,ad(Iy(V)));I=Uy(O.body,Fy,P,Z)}}ye.isString(ae)||(ae=ae?"include":"omit");const B=h&&"credentials"in l.prototype,X={...ve,signal:ue,method:M.toUpperCase(),headers:Q.normalize().toJSON(),body:I,duplex:"half",credentials:B?ae:void 0};_e=h&&new l(A,X);let de=await(h?ee(_e,ve):ee(A,X));const ke=S&&(q==="stream"||q==="response");if(S&&(G||ke&&ne)){const O={};["status","statusText","headers"].forEach(me=>{O[me]=de[me]});const te=ye.toFiniteNumber(de.headers.get("content-length")),[P,Z]=G&&Py(te,ad(Iy(G),!0))||[];de=new o(Uy(de.body,Fy,P,()=>{Z&&Z(),ne&&ne()}),O)}q=q||"text";let J=await w[ye.findKey(w,q)||"text"](de,k);return!ke&&ne&&ne(),await new Promise((O,te)=>{sb(O,te,{data:J,headers:ha.from(de.headers),status:de.status,statusText:de.statusText,config:k,request:_e})})}catch(B){throw ne&&ne(),B&&B.name==="TypeError"&&/Load failed|fetch/i.test(B.message)?Object.assign(new it("Network Error",it.ERR_NETWORK,k,_e),{cause:B.cause||B}):it.from(B,B&&B.code,k,_e)}}},w2=new Map,ob=e=>{let i=e&&e.env||{};const{fetch:l,Request:o,Response:d}=i,h=[o,d,l];let f=h.length,x=f,v,b,S=w2;for(;x--;)v=h[x],b=S.get(v),b===void 0&&S.set(v,b=x?new Map:S2(i)),S=b;return b};ob();const Xf={http:Zw,xhr:y2,fetch:{get:ob}};ye.forEach(Xf,(e,i)=>{if(e){try{Object.defineProperty(e,"name",{value:i})}catch{}Object.defineProperty(e,"adapterName",{value:i})}});const Ky=e=>`- ${e}`,E2=e=>ye.isFunction(e)||e===null||e===!1;function k2(e,i){e=ye.isArray(e)?e:[e];const{length:l}=e;let o,d;const h={};for(let f=0;f<l;f++){o=e[f];let x;if(d=o,!E2(o)&&(d=Xf[(x=String(o)).toLowerCase()],d===void 0))throw new it(`Unknown adapter '${x}'`);if(d&&(ye.isFunction(d)||(d=d.get(i))))break;h[x||"#"+f]=d}if(!d){const f=Object.entries(h).map(([v,b])=>`adapter ${v} `+(b===!1?"is not supported by the environment":"is not available in the build"));let x=l?f.length>1?`since :
`+f.map(Ky).join(`
`):" "+Ky(f[0]):"as no adapter specified";throw new it("There is no suitable adapter to dispatch the request "+x,"ERR_NOT_SUPPORT")}return d}const ub={getAdapter:k2,adapters:Xf};function Ch(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new cu(null,e)}function Qy(e){return Ch(e),e.headers=ha.from(e.headers),e.data=kh.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ub.getAdapter(e.adapter||uu.adapter,e)(e).then(function(o){return Ch(e),o.data=kh.call(e,e.transformResponse,o),o.headers=ha.from(o.headers),o},function(o){return ib(o)||(Ch(e),o&&o.response&&(o.response.data=kh.call(e,e.transformResponse,o.response),o.response.headers=ha.from(o.response.headers))),Promise.reject(o)})}const cb="1.13.4",vd={};["object","boolean","number","function","string","symbol"].forEach((e,i)=>{vd[e]=function(o){return typeof o===e||"a"+(i<1?"n ":" ")+e}});const Gy={};vd.transitional=function(i,l,o){function d(h,f){return"[Axios v"+cb+"] Transitional option '"+h+"'"+f+(o?". "+o:"")}return(h,f,x)=>{if(i===!1)throw new it(d(f," has been removed"+(l?" in "+l:"")),it.ERR_DEPRECATED);return l&&!Gy[f]&&(Gy[f]=!0,console.warn(d(f," has been deprecated since v"+l+" and will be removed in the near future"))),i?i(h,f,x):!0}};vd.spelling=function(i){return(l,o)=>(console.warn(`${o} is likely a misspelling of ${i}`),!0)};function C2(e,i,l){if(typeof e!="object")throw new it("options must be an object",it.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let d=o.length;for(;d-- >0;){const h=o[d],f=i[h];if(f){const x=e[h],v=x===void 0||f(x,h,e);if(v!==!0)throw new it("option "+h+" must be "+v,it.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new it("Unknown option "+h,it.ERR_BAD_OPTION)}}const Jc={assertOptions:C2,validators:vd},wi=Jc.validators;let zr=class{constructor(i){this.defaults=i||{},this.interceptors={request:new Ry,response:new Ry}}async request(i,l){try{return await this._request(i,l)}catch(o){if(o instanceof Error){let d={};Error.captureStackTrace?Error.captureStackTrace(d):d=new Error;const h=d.stack?d.stack.replace(/^.+\n/,""):"";try{o.stack?h&&!String(o.stack).endsWith(h.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+h):o.stack=h}catch{}}throw o}}_request(i,l){typeof i=="string"?(l=l||{},l.url=i):l=i||{},l=Dr(this.defaults,l);const{transitional:o,paramsSerializer:d,headers:h}=l;o!==void 0&&Jc.assertOptions(o,{silentJSONParsing:wi.transitional(wi.boolean),forcedJSONParsing:wi.transitional(wi.boolean),clarifyTimeoutError:wi.transitional(wi.boolean)},!1),d!=null&&(ye.isFunction(d)?l.paramsSerializer={serialize:d}:Jc.assertOptions(d,{encode:wi.function,serialize:wi.function},!0)),l.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?l.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:l.allowAbsoluteUrls=!0),Jc.assertOptions(l,{baseUrl:wi.spelling("baseURL"),withXsrfToken:wi.spelling("withXSRFToken")},!0),l.method=(l.method||this.defaults.method||"get").toLowerCase();let f=h&&ye.merge(h.common,h[l.method]);h&&ye.forEach(["delete","get","head","post","put","patch","common"],k=>{delete h[k]}),l.headers=ha.concat(f,h);const x=[];let v=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(l)===!1||(v=v&&A.synchronous,x.unshift(A.fulfilled,A.rejected))});const b=[];this.interceptors.response.forEach(function(A){b.push(A.fulfilled,A.rejected)});let S,w=0,T;if(!v){const k=[Qy.bind(this),void 0];for(k.unshift(...x),k.push(...b),T=k.length,S=Promise.resolve(l);w<T;)S=S.then(k[w++],k[w++]);return S}T=x.length;let z=l;for(;w<T;){const k=x[w++],A=x[w++];try{z=k(z)}catch(M){A.call(this,M);break}}try{S=Qy.call(this,z)}catch(k){return Promise.reject(k)}for(w=0,T=b.length;w<T;)S=S.then(b[w++],b[w++]);return S}getUri(i){i=Dr(this.defaults,i);const l=rb(i.baseURL,i.url,i.allowAbsoluteUrls);return tb(l,i.params,i.paramsSerializer)}};ye.forEach(["delete","get","head","options"],function(i){zr.prototype[i]=function(l,o){return this.request(Dr(o||{},{method:i,url:l,data:(o||{}).data}))}});ye.forEach(["post","put","patch"],function(i){function l(o){return function(h,f,x){return this.request(Dr(x||{},{method:i,headers:o?{"Content-Type":"multipart/form-data"}:{},url:h,data:f}))}}zr.prototype[i]=l(),zr.prototype[i+"Form"]=l(!0)});let T2=class db{constructor(i){if(typeof i!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(h){l=h});const o=this;this.promise.then(d=>{if(!o._listeners)return;let h=o._listeners.length;for(;h-- >0;)o._listeners[h](d);o._listeners=null}),this.promise.then=d=>{let h;const f=new Promise(x=>{o.subscribe(x),h=x}).then(d);return f.cancel=function(){o.unsubscribe(h)},f},i(function(h,f,x){o.reason||(o.reason=new cu(h,f,x),l(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]}unsubscribe(i){if(!this._listeners)return;const l=this._listeners.indexOf(i);l!==-1&&this._listeners.splice(l,1)}toAbortSignal(){const i=new AbortController,l=o=>{i.abort(o)};return this.subscribe(l),i.signal.unsubscribe=()=>this.unsubscribe(l),i.signal}static source(){let i;return{token:new db(function(d){i=d}),cancel:i}}};function A2(e){return function(l){return e.apply(null,l)}}function z2(e){return ye.isObject(e)&&e.isAxiosError===!0}const Nf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Nf).forEach(([e,i])=>{Nf[i]=e});function mb(e){const i=new zr(e),l=Hv(zr.prototype.request,i);return ye.extend(l,zr.prototype,i,{allOwnKeys:!0}),ye.extend(l,i,null,{allOwnKeys:!0}),l.create=function(d){return mb(Dr(e,d))},l}const Gt=mb(uu);Gt.Axios=zr;Gt.CanceledError=cu;Gt.CancelToken=T2;Gt.isCancel=ib;Gt.VERSION=cb;Gt.toFormData=yd;Gt.AxiosError=it;Gt.Cancel=Gt.CanceledError;Gt.all=function(i){return Promise.all(i)};Gt.spread=A2;Gt.isAxiosError=z2;Gt.mergeConfig=Dr;Gt.AxiosHeaders=ha;Gt.formToJSON=e=>ab(ye.isHTMLForm(e)?new FormData(e):e);Gt.getAdapter=ub.getAdapter;Gt.HttpStatusCode=Nf;Gt.default=Gt;const{Axios:l3,AxiosError:o3,CanceledError:u3,isCancel:c3,CancelToken:d3,VERSION:m3,all:h3,Cancel:f3,isAxiosError:p3,spread:g3,toFormData:x3,AxiosHeaders:y3,HttpStatusCode:v3,formToJSON:b3,getAdapter:_3,mergeConfig:N3}=Gt,Jf="puantaj_access_token",id="puantaj_refresh_token";function hb(){return localStorage.getItem(Jf)}function jf(){return localStorage.getItem(id)}function Sf(e,i){if(localStorage.setItem(Jf,e),i){localStorage.setItem(id,i);return}localStorage.removeItem(id)}function fb(){localStorage.removeItem(Jf),localStorage.removeItem(id)}function M2(e){try{const i=e.split(".")[1];if(!i)return null;const l=i.replace(/-/g,"+").replace(/_/g,"/"),o=l.padEnd(l.length+(4-l.length%4)%4,"=");return JSON.parse(atob(o))}catch{return null}}function O2(e){if(!e)return!1;const i=M2(e);if(!i?.exp)return!1;const l=Math.floor(Date.now()/1e3);return i.exp>l+10}const wf="http://127.0.0.1:8000",D2=wf.includes("127.0.0.1")||wf.includes("localhost"),R2=typeof window<"u"&&window.location.hostname!=="127.0.0.1"&&window.location.hostname!=="localhost",Wf=R2&&D2?window.location.origin:wf,Th="/admin-panel/",Dc=Th.endsWith("/")?Th.slice(0,-1):Th,ze=Gt.create({baseURL:Wf,headers:{"Content-Type":"application/json"}}),du=Gt.create({baseURL:Wf,headers:{"Content-Type":"application/json"}});function Vy(){if(fb(),typeof window>"u")return;const e=`${window.location.pathname}${window.location.search}`,i=Dc&&e.startsWith(Dc)?e.slice(Dc.length)||"/":e;if(i==="/login"||i.startsWith("/login?")){window.dispatchEvent(new Event("auth:logout"));return}const l=`${Dc}/login?redirect=${encodeURIComponent(i)}`;window.location.replace(l)}ze.interceptors.request.use(e=>{const i=hb();return i&&(e.headers.Authorization=`Bearer ${i}`),e});let Rc=null;async function L2(){const e=jf();if(!e)return Vy(),null;try{const i=await Gt.post(`${Wf}/api/admin/auth/refresh`,{refresh_token:e});return Sf(i.data.access_token,i.data.refresh_token??e),i.data.access_token}catch{return Vy(),null}}ze.interceptors.response.use(e=>e,async e=>{const i=e.config;if(!i||e.response?.status!==401||i._retry)return Promise.reject(e);const o=i.url??"";if(o.includes("/api/admin/auth/login")||o.includes("/api/admin/auth/refresh")||o.includes("/api/admin/auth/logout"))return Promise.reject(e);i._retry=!0,Rc||(Rc=L2().finally(()=>{Rc=null}));const h=await Rc;return h?(i.headers.Authorization=`Bearer ${h}`,ze(i)):Promise.reject(e)});async function P2(e){return(await ze.post("/api/admin/auth/login",e)).data}async function I2(e){return(await ze.post("/api/admin/auth/refresh",e)).data}async function B2(e){return(await ze.post("/api/admin/auth/logout",e)).data}async function Ah(){return(await ze.get("/api/admin/auth/me")).data}async function pb(){return(await ze.get("/api/admin/admin-users")).data}async function U2(e){return(await ze.get(`/api/admin/admin-users/${e}/claim-detail`)).data}async function bd(e){return(await ze.get("/api/admin/regions",{params:e})).data}async function F2(e){return(await ze.post("/api/admin/regions",e)).data}async function Z2(e,i){return(await ze.patch(`/api/admin/regions/${e}`,i)).data}async function q2(e){return(await ze.post("/api/admin/admin-users",e)).data}async function H2(e,i){return(await ze.patch(`/api/admin/admin-users/${e}`,i)).data}async function K2(e){await ze.delete(`/api/admin/admin-users/${e}`)}async function Q2(e){return(await ze.get(`/api/admin/admin-users/${e}/mfa`)).data}async function G2(e){return(await ze.post(`/api/admin/admin-users/${e}/mfa/setup/start`)).data}async function V2(e,i){return(await ze.post(`/api/admin/admin-users/${e}/mfa/setup/confirm`,i)).data}async function Y2(e,i){return(await ze.post(`/api/admin/admin-users/${e}/mfa/recovery-codes/regenerate`,i)).data}async function $2(e,i){return(await ze.post(`/api/admin/admin-users/${e}/mfa/reset`,i)).data}async function Hs(){return(await ze.get("/admin/departments")).data}async function X2(e){return(await ze.get("/admin/departments",{params:e})).data}async function J2(e){return(await ze.post("/admin/departments",e)).data}async function W2(e,i){return(await ze.patch(`/admin/departments/${e}`,i)).data}async function ui(e={}){return(await ze.get("/admin/employees",{params:e})).data}async function eE(e){return(await ze.post("/admin/employees",e)).data}async function tE(e){return(await ze.get(`/api/admin/employees/${e}/detail`)).data}async function nE(e,i){return(await ze.patch(`/api/admin/employees/${e}`,i)).data}async function gb(e,i){return(await ze.patch(`/api/admin/employees/${e}/active`,i)).data}async function aE(e,i){return(await ze.patch(`/api/admin/employees/${e}/shift`,i)).data}async function iE(e,i){return(await ze.patch(`/api/admin/employees/${e}/department`,i)).data}async function sE(e,i){return(await ze.put(`/admin/employee-locations/${e}`,i)).data}async function rE(){return(await ze.get("/admin/work-rules")).data}async function lE(e){return(await ze.post("/admin/work-rules",e)).data}async function xb(e){return(await ze.get("/admin/department-weekly-rules",{params:e})).data}async function yb(e){return(await ze.post("/admin/department-weekly-rules",e)).data}async function mu(e){return(await ze.get("/admin/department-shifts",{params:e})).data}async function sd(e){return(await ze.post("/admin/department-shifts",e)).data}async function vb(e){return(await ze.delete(`/admin/department-shifts/${e}`)).data}async function oE(e={}){return(await ze.get("/api/admin/qr/codes",{params:e})).data}async function uE(e){return(await ze.post("/api/admin/qr/codes",e)).data}async function cE(e,i){return(await ze.patch(`/api/admin/qr/codes/${e}`,i)).data}async function dE(e,i){return(await ze.post(`/api/admin/qr/codes/${e}/points`,i)).data}async function mE(e,i){return(await ze.delete(`/api/admin/qr/codes/${e}/points/${i}`)).data}async function hE(e={}){return(await ze.get("/api/admin/qr/points",{params:e})).data}async function fE(e){return(await ze.post("/api/admin/qr/points",e)).data}async function pE(e,i){return(await ze.patch(`/api/admin/qr/points/${e}`,i)).data}async function gE(e){return(await ze.delete(`/api/admin/qr/points/${e}`)).data}async function Yy(e){return(await ze.post("/api/admin/schedule-plans",e)).data}async function xE(e={}){return(await ze.get("/api/admin/schedule-plans",{params:e})).data}async function yE(e){return(await ze.delete(`/api/admin/schedule-plans/${e}`)).data}async function ep(e={}){return(await ze.get("/admin/attendance-events",{params:e})).data}async function vE(e){return(await ze.post("/api/admin/attendance-events",e)).data}async function bE(e,i){return(await ze.patch(`/api/admin/attendance-events/${e}`,i)).data}async function _E(e,i=!1){return(await ze.delete(`/api/admin/attendance-events/${e}`,{params:{force:i}})).data}async function bb(e={}){return(await ze.get("/api/admin/audit-logs",{params:e})).data}async function NE(e={}){return(await ze.get("/api/admin/notifications/jobs",{params:e})).data}async function jE(e={}){return(await ze.get("/api/admin/notifications/delivery-logs",{params:e})).data}async function SE(e){return(await ze.post(`/api/admin/notifications/jobs/${e}/cancel`)).data}async function wE(e={}){return(await ze.get("/api/admin/notifications/subscriptions",{params:e})).data}async function EE(e={}){return(await ze.get("/api/admin/notifications/admin-subscriptions",{params:e})).data}async function $y(){return(await ze.get("/api/admin/notifications/push/config")).data}async function kE(){return(await du.get("/api/admin/notifications/push/config/public")).data}async function CE(){return(await ze.get("/api/admin/notifications/admin-self-check")).data}async function TE(){return(await ze.post("/api/admin/notifications/admin-self-test")).data}async function AE(e){return(await ze.post("/api/admin/notifications/admin-device-invite",e)).data}async function zE(e){return(await du.post("/api/admin/notifications/admin-device-claim/public",e)).data}async function ME(e){return(await ze.post("/api/admin/notifications/admin-device-heal",e)).data}async function _b(e){return(await ze.post("/api/admin/notifications/send",e)).data}async function OE(e={}){return(await ze.get("/api/admin/daily-report-archives",{params:e})).data}function DE(e){if(!e)return null;const i=e.match(/filename\*=UTF-8''([^;]+)/i);if(i?.[1])try{return decodeURIComponent(i[1].trim())}catch{return i[1].trim()}const l=e.match(/filename="?([^";]+)"?/i);return l?.[1]?l[1].trim():null}async function RE(e){return(await ze.get(`/api/admin/daily-report-archives/${e}/download`,{responseType:"blob"})).data}async function LE(e,i){const l=await du.post(`/api/admin/daily-report-archives/${e}/password-download`,i,{responseType:"blob"}),o=l.headers["content-disposition"];return{blob:l.data,file_name:DE(o)}}async function PE(e){return(await du.get("/api/admin/attendance-extra-checkin-approval",{params:{token:e}})).data}async function IE(e){return(await du.post("/api/admin/attendance-extra-checkin-approval/approve",e)).data}async function BE(e,i={}){return(await ze.post(`/api/admin/daily-report-archives/${e}/notify`,i)).data}async function Nb(){return(await ze.get("/admin/devices")).data}async function Ef(e={}){return(await ze.get("/api/admin/employee-device-overview",{params:e})).data}async function jb(e){return(await ze.get("/api/admin/dashboard/employee-snapshot",{params:e})).data}async function UE(e,i){return(await ze.patch(`/api/admin/devices/${e}/active`,i)).data}async function Sb(e={}){return(await ze.get("/api/admin/leaves",{params:e})).data}async function FE(e){return(await ze.post("/api/admin/leaves",e)).data}async function ZE(e){await ze.delete(`/api/admin/leaves/${e}`)}async function wb(e){return(await ze.post("/api/admin/device-invite",e)).data}async function tu(e){return(await ze.get("/api/admin/monthly/employee",{params:e})).data}async function qE(e){return(await ze.get("/api/admin/monthly/department-summary",{params:e})).data}async function HE(e,i){return(await ze.post("/api/admin/manual-overrides/day",i,{params:{employee_id:e}})).data}async function KE(e,i,l){return(await ze.get("/api/admin/manual-overrides/day",{params:{employee_id:e,year:i,month:l}})).data}async function QE(e){await ze.delete(`/api/admin/manual-overrides/day/${e}`)}async function GE(){return(await ze.get("/api/admin/compliance-settings")).data}async function VE(e){return(await ze.put("/api/admin/compliance-settings",e)).data}async function YE(e){return(await ze.get("/api/admin/exports/puantaj.xlsx",{params:e,responseType:"blob"})).data}async function $E(e){return(await ze.get("/api/admin/export/employee-monthly",{params:e,responseType:"blob"})).data}async function XE(e){return(await ze.get("/api/admin/export/department-monthly",{params:e,responseType:"blob"})).data}async function JE(e){return(await ze.get("/api/admin/export/all-monthly",{params:e,responseType:"blob"})).data}async function WE(e){return(await ze.get("/api/admin/export/puantaj-range.xlsx",{params:e,responseType:"blob"})).data}const Eb=_.createContext(void 0);function e1({children:e}){const[i,l]=_.useState(null),[o,d]=_.useState(!0),h=_.useCallback(()=>{fb(),l(null)},[]),f=_.useCallback(async()=>{const w=jf();if(!w)return h(),!1;try{const T=await I2({refresh_token:w});Sf(T.access_token,T.refresh_token??w);const z=await Ah();return l(z),!0}catch{return h(),!1}},[h]),x=_.useCallback(async()=>{const w=hb();if(!w){l(null),d(!1);return}if(O2(w)){try{const T=await Ah();l(T)}catch{await f()}finally{d(!1)}return}await f(),d(!1)},[f]);_.useEffect(()=>{x()},[x]),_.useEffect(()=>{const w=()=>{l(null)};return window.addEventListener("auth:logout",w),()=>{window.removeEventListener("auth:logout",w)}},[]);const v=_.useCallback(async(w,T,z,k)=>{const A=await P2({username:w,password:T,mfa_code:z?.trim()||void 0,mfa_recovery_code:k?.trim()||void 0});Sf(A.access_token,A.refresh_token);const M=await Ah();l(M)},[]),b=_.useCallback(async()=>{const w=jf();if(w)try{await B2({refresh_token:w})}catch{}h()},[h]),S=_.useMemo(()=>({user:i,isAuthenticated:!!i,isBootstrapping:o,isSuperAdmin:!!i?.is_super_admin,login:v,logout:b,refreshSession:f,hasPermission:(w,T="read")=>{if(!i)return!1;if(i.is_super_admin)return!0;const z=i.permissions?.[w];return z?T==="write"?!!z.write:!!(z.read||z.write):!1}}),[i,o,v,b,f]);return a.jsx(Eb.Provider,{value:S,children:e})}function Ul(){const e=_.useContext(Eb);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const t1=[{to:"/management-console",label:"Ynetim Konsolu"},{to:"/dashboard",label:"Genel Bak"},{to:"/regions",label:"Blgeler",permission:"regions"},{to:"/departments",label:"Departmanlar",permission:"departments"},{to:"/employees",label:"alanlar",permission:"employees"},{to:"/quick-setup",label:"Hzl Ayarlar",permission:"schedule"},{to:"/work-rules",label:"Mesai Kurallar",permission:"work_rules"},{to:"/attendance-events",label:"Yoklama Kaytlar",permission:"attendance_events"},{to:"/devices",label:"Cihazlar",permission:"devices"},{to:"/compliance-settings",label:"Uyumluluk Ayarlar",permission:"compliance"},{to:"/qr-kodlar",label:"QR Kodlar"},{to:"/leaves",label:"zinler",permission:"leaves"},{to:"/reports/employee-monthly",label:"Aylk alan Raporu",permission:"reports"},{to:"/reports/department-summary",label:"Departman zeti",permission:"reports"},{to:"/reports/excel-export",label:"Excel Da Aktar",permission:"reports"},{to:"/notifications",label:"Bildirimler",permission:"audit"},{to:"/audit-logs",label:"Sistem Loglar",permission:"audit"},{to:"/admin-users",label:"Admin Kullanclar",permission:"admin_users"}],n1={"/management-console":"Ynetim Konsolu","/dashboard":"Genel Bak","/regions":"Blgeler","/departments":"Departmanlar","/employees":"alanlar","/quick-setup":"Hzl Ayarlar","/work-rules":"Mesai Kurallar","/attendance-events":"Yoklama Kaytlar","/devices":"Cihazlar","/compliance-settings":"Uyumluluk Ayarlar","/qr-kodlar":"QR Kodlar","/leaves":"zinler","/reports/employee-monthly":"Aylk alan Raporu","/reports/department-summary":"Departman zeti","/reports/excel-export":"Excel Da Aktar","/notifications":"Bildirimler","/audit-logs":"Sistem Loglar","/admin-users":"Admin Kullanclar"};function a1(){const e=Ga(),{user:i,logout:l,hasPermission:o}=Ul(),d=_.useRef(null),h=_.useRef(null),f=_.useRef(!1),x=_.useRef(null),[v,b]=_.useState(!1),[S,w]=_.useState("erie geiliyor..."),T=t1.filter(D=>!D.permission||o(D.permission)),z=n1[e.pathname]??(e.pathname.startsWith("/employees/")?"alan Detay":"Admin Panel"),k=()=>typeof window<"u"&&window.innerWidth<1024,A=()=>{x.current!==null&&(window.clearTimeout(x.current),x.current=null)},M=(D,K)=>{w(K),b(!0),D==="content"?h.current?.scrollIntoView({behavior:"smooth",block:"start"}):d.current?.scrollIntoView({behavior:"smooth",block:"start"}),A(),x.current=window.setTimeout(()=>{b(!1)},1200)},I=D=>{if(k()){if(e.pathname===D){window.requestAnimationFrame(()=>{M("content","erie geiliyor...")});return}w("erie geiliyor..."),b(!0),f.current=!0}},R=()=>{k()&&window.requestAnimationFrame(()=>{M("sidebar","Sidebar'a dnlyor...")})};return _.useEffect(()=>{k()&&window.scrollTo({top:0})},[]),_.useEffect(()=>{f.current&&(f.current=!1,window.requestAnimationFrame(()=>{M("content","erie geiliyor...")}))},[e.pathname]),_.useEffect(()=>()=>{A()},[]),a.jsxs("div",{className:"admin-shell min-h-screen bg-slate-100 lg:grid lg:grid-cols-[260px_1fr]",children:[v?a.jsxs("div",{className:"mobile-nav-loader lg:hidden",role:"status","aria-live":"polite","aria-label":"Sayfa geii",children:[a.jsxs("div",{className:"mobile-nav-loader-logo","aria-hidden":"true",children:[a.jsx("div",{className:"mobile-nav-loader-halo"}),a.jsx("div",{className:"mobile-nav-loader-ring"}),a.jsx("div",{className:"mobile-nav-loader-spark"}),a.jsxs("div",{className:"mobile-nav-loader-core",children:[a.jsx("span",{className:"mobile-nav-loader-brand",children:"YABUJIN"}),a.jsx("span",{className:"mobile-nav-loader-sub",children:"CONTROL CORE"})]})]}),a.jsx("p",{className:"mobile-nav-loader-text",children:S})]}):null,a.jsxs("aside",{ref:d,className:"admin-sidebar flex flex-col px-4 py-6 text-slate-100 shadow-panel",children:[a.jsx("h1",{className:"px-2 text-xl font-bold tracking-tight",children:"Puantaj Admin"}),a.jsx("p",{className:"px-2 pt-1 text-xs text-slate-400",children:"FastAPI Ynetim Paneli"}),a.jsx("nav",{className:"mt-6 flex flex-col gap-1",children:T.map(D=>a.jsx(Zv,{to:D.to,onClick:()=>I(D.to),className:({isActive:K})=>`rounded-lg px-3 py-2 text-sm font-medium transition ${K?"bg-brand-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800/85 hover:text-white"}`,children:D.label},D.to))}),a.jsxs("div",{className:"admin-signature",children:[a.jsx("p",{className:"admin-signature-main",children:qa.signatureText}),a.jsx("p",{className:"admin-signature-sub",children:qa.signatureTagline})]})]}),a.jsxs("div",{ref:h,className:"flex min-h-screen flex-col",children:[a.jsx("header",{className:"admin-topbar border-b border-slate-200 bg-white/90 px-4 py-4 backdrop-blur sm:px-6",children:a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:z}),a.jsxs("p",{className:"text-xs text-slate-500",children:["Oturum: ",i?.username??i?.sub??"admin"," / Rol: ",i?.role??"admin"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:R,className:"btn-animated rounded-lg border border-slate-300 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-100 lg:hidden",children:"Sidebar'a Git"}),a.jsx("button",{type:"button",onClick:()=>{l()},className:"btn-animated rounded-lg bg-slate-900 px-4 py-2 text-sm font-medium text-white hover:bg-slate-700",children:"k"})]})]})}),a.jsx("main",{className:"admin-main flex-1 p-4 sm:p-6",children:a.jsx(Kf,{})}),a.jsxs("footer",{className:"admin-footer-signature px-6 pb-4 pt-1 text-center text-xs tracking-wide text-slate-500",children:[a.jsx("span",{className:"admin-footer-brand",children:qa.signatureText}),a.jsx("span",{className:"admin-footer-sub",children:qa.signatureTagline}),a.jsxs("span",{className:"admin-footer-build",children:["BUILD: ",qa.buildVersion]})]})]})]})}function i1(){const{isAuthenticated:e,isBootstrapping:i}=Ul(),l=Ga();if(i)return a.jsx("div",{className:"flex min-h-screen items-center justify-center text-slate-600",children:"Oturum kontrol ediliyor..."});if(!e){const o=`${l.pathname}${l.search}`;return a.jsx(Hf,{to:"/login",replace:!0,state:{from:o}})}return a.jsx(Kf,{})}function s1(){const{isAuthenticated:e,isBootstrapping:i}=Ul();return i?a.jsx("div",{className:"flex min-h-screen items-center justify-center text-slate-600",children:"Ykleniyor..."}):e?a.jsx(Hf,{to:"/dashboard",replace:!0}):a.jsx(Kf,{})}const Xy={INVALID_CREDENTIALS:"Kullanici adi veya sifre hatali.",TOO_MANY_ATTEMPTS:"Cok fazla deneme yaptiniz. Lutfen daha sonra tekrar deneyin.",INVALID_TOKEN:"Oturum gecersiz veya suresi dolmus. Lutfen tekrar giris yapin.",FORBIDDEN:"Bu islem icin yetkiniz yok.",INTERNAL_ERROR:"Sunucu hatasi olustu. Lutfen tekrar deneyin.",MFA_REQUIRED:"MFA kodu zorunlu. Authenticator kodunu girin.",INVALID_MFA_CODE:"MFA kodu gecersiz. Tekrar deneyin.",MFA_SETUP_REQUIRED:"Bu hesap icin MFA kurulumu tamamlanmamis.",MFA_SETUP_NOT_STARTED:"Once MFA kurulumunu baslatin.",MFA_NOT_ENABLED:"Bu hesapta MFA aktif degil.",ARCHIVE_DECRYPT_FAILED:"Arsiv dosyasi acilamadi. Sunucu anahtarini kontrol edin.",EXTRA_CHECKIN_APPROVAL_NOT_FOUND:"Ek giris onay talebi bulunamadi.",EXTRA_CHECKIN_APPROVAL_EXPIRED:"Ek giris onay talebinin suresi dolmus."};function Le(e,i){if(Gt.isAxiosError(e)){const l=e.response?.data;if(typeof l=="string")return{message:l};const o=l?.error?.code,d=l?.error?.request_id,h=l?.error?.message;if(o&&Xy[o])return{code:o,requestId:d,message:Xy[o]};if(h)return{code:o,requestId:d,message:h};if(e.message)return{message:e.message}}return e instanceof Error&&e.message?{message:e.message}:{message:i}}function r1(e,i){return Le(e,i).message}function kb(e){const i="=".repeat((4-e.length%4)%4),l=`${e}${i}`.replace(/-/g,"+").replace(/_/g,"/"),o=window.atob(l),d=new Uint8Array(o.length);for(let h=0;h<o.length;h+=1)d[h]=o.charCodeAt(h);return d}const Jy="pf_admin_push_vapid_public_key";function l1(){const e=Il(),[i]=fd(),l=_.useMemo(()=>i.get("token")?.trim()??"",[i]),[o,d]=_.useState("admin"),[h,f]=_.useState(""),[x,v]=_.useState(!1),[b,S]=_.useState(null),[w,T]=_.useState(null),[z,k]=_.useState(null),A=async M=>{if(M.preventDefault(),T(null),k(null),S(null),!l){T("Davet token bulunamad. Ltfen yeni balant isteyin.");return}const I=o.trim(),R=h.trim();if(!I||!R){T("Admin kullanc ad ve ifre zorunludur.");return}try{v(!0);const D=await kE();if(!D.enabled||!D.vapid_public_key){T("Push bildirim servisi yaplandrlmam.");return}if(!("serviceWorker"in navigator)||!("PushManager"in window)){T("Bu tarayc push bildirimlerini desteklemiyor.");return}if((Notification.permission==="granted"?"granted":await Notification.requestPermission())!=="granted"){T("Bildirim izni verilmedi. Cihaz balama tamamlanamad.");return}const V=await navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"});let q=await V.pushManager.getSubscription();const Q=window.localStorage.getItem(Jy);if(q&&Q&&Q!==D.vapid_public_key){try{await q.unsubscribe()}catch{}q=null}q||(q=await V.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:kb(D.vapid_public_key)})),await zE({token:l,username:I,password:R,subscription:q.toJSON()}),window.localStorage.setItem(Jy,D.vapid_public_key),S("Admin cihaz baaryla baland. Bildirimler bu cihaza gnderilecek."),window.setTimeout(()=>{e("/login",{replace:!0})},1e3)}catch(D){const K=Le(D,"Cihaz balama ilemi baarsz oldu.");T(K.message),k(K.requestId??null)}finally{v(!1)}};return a.jsxs("div",{className:"mx-auto mt-10 w-full max-w-lg rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[a.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Admin Cihaz Balama"}),a.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Bu cihaz admin bildirimleri iin kaydetmek adna hesabnzla giri yapn."}),a.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:["Token: ",l||"Bulunamad"]}),a.jsxs("form",{className:"mt-4 space-y-3",onSubmit:A,children:[a.jsxs("label",{className:"block text-sm text-slate-700",children:["Kullanc ad",a.jsx("input",{value:o,onChange:M=>d(M.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",autoComplete:"username"})]}),a.jsxs("label",{className:"block text-sm text-slate-700",children:["ifre",a.jsx("input",{type:"password",value:h,onChange:M=>f(M.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",autoComplete:"current-password"})]}),w?a.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:[a.jsx("p",{children:w}),z?a.jsxs("p",{className:"mt-1 text-xs",children:["request_id: ",z]}):null]}):null,b?a.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:b}):null,a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"submit",disabled:x,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:x?"Balanyor...":"Cihaz Bala"}),a.jsx(li,{to:"/login",className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Login ekran"})]})]})]})}function Lc(e){return`#${e.id} - ${e.full_name}`}function Ka({label:e,employees:i,value:l,onChange:o,placeholder:d="alan ad veya ID yazn...",emptyLabel:h="Seiniz",helperText:f,disabled:x=!1,className:v=""}){const b=_.useMemo(()=>i.find(M=>String(M.id)===l),[i,l]),[S,w]=_.useState(b?Lc(b):""),[T,z]=_.useState(!1);_.useEffect(()=>{if(b){w(Lc(b));return}l||w("")},[b,l]);const k=_.useMemo(()=>{const M=S.trim().toLowerCase();return(M?i.filter(R=>{const D=R.full_name.toLowerCase().includes(M),K=String(R.id).includes(M.replace("#",""));return D||K}):i).slice(0,60)},[i,S]),A=M=>{o(String(M.id)),w(Lc(M)),z(!1)};return a.jsxs("div",{className:v,children:[a.jsxs("label",{className:"text-sm text-slate-700",children:[e,a.jsxs("div",{className:"relative mt-1",children:[a.jsx("input",{type:"text",value:S,disabled:x,onFocus:()=>z(!0),onChange:M=>{const I=M.target.value;w(I),z(!0),I.trim()||o("")},onBlur:()=>{window.setTimeout(()=>z(!1),120)},placeholder:d,className:"w-full rounded-lg border border-slate-300 px-3 py-2"}),a.jsx("button",{type:"button",disabled:x,onClick:()=>{o(""),w(""),z(!1)},className:"absolute right-2 top-1/2 -translate-y-1/2 rounded px-1 text-xs text-slate-500 hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-50",children:"Temizle"}),T?a.jsxs("div",{className:"absolute z-20 mt-1 max-h-72 w-full overflow-y-auto rounded-lg border border-slate-200 bg-white shadow-lg",children:[a.jsx("button",{type:"button",onMouseDown:M=>M.preventDefault(),onClick:()=>{o(""),w(""),z(!1)},className:"flex w-full items-center justify-between border-b border-slate-100 px-3 py-2 text-left text-sm text-slate-600 hover:bg-slate-50",children:a.jsx("span",{children:h})}),k.map(M=>a.jsxs("button",{type:"button",onMouseDown:I=>I.preventDefault(),onClick:()=>A(M),className:"flex w-full items-center justify-between px-3 py-2 text-left text-sm hover:bg-slate-50",children:[a.jsx("span",{children:Lc(M)}),M.is_active?null:a.jsx("span",{className:"rounded-full bg-amber-100 px-2 py-0.5 text-[11px] font-semibold text-amber-700",children:"Pasif"})]},M.id)),k.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"Sonu bulunamad."}):null]}):null]})]}),f?a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:f}):null]})}function St({message:e}){return a.jsx("div",{className:"error-block admin-panel rounded-xl border border-rose-200 bg-rose-50 p-4 text-sm text-rose-700 shadow-sm",children:e})}function Ot({label:e="Ykleniyor..."}){return a.jsxs("div",{className:"loading-block admin-panel rounded-xl border border-slate-200 bg-white p-8 text-center text-sm text-slate-600 shadow-sm",children:[a.jsx("span",{className:"loading-spinner","aria-hidden":"true"}),a.jsx("span",{children:e})]})}function o1(e){return Number.isFinite(e)?Math.max(0,Math.floor(e)):0}function Cb(e){const i=o1(e),l=Math.floor(i/60),o=i%60;return{hours:l,minutes:o}}function u1(e){const{hours:i,minutes:l}=Cb(e),o=String(i).padStart(2,"0"),d=String(l).padStart(2,"0");return`${o}:${d}`}function c1(e){const{hours:i,minutes:l}=Cb(e);return i===0?`${l}dk`:`${i}s ${l}dk`}function Wc(e){return`${u1(e)} (${c1(e)})`}function Pe({minutes:e}){return a.jsx("span",{className:"whitespace-nowrap",children:Wc(e)})}function Zs({open:e,title:i,onClose:l,children:o}){return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/45 px-4",children:a.jsxs("div",{className:"admin-panel page-enter w-full max-w-xl rounded-xl border border-slate-200 bg-white p-5 shadow-2xl",children:[a.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:i}),a.jsx("button",{type:"button",onClick:l,className:"btn-animated rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Kapat"})]}),o]})}):null}function kn({title:e,description:i,action:l}){return a.jsxs("div",{className:"mb-5 flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:e}),i?a.jsx("p",{className:"mt-1 text-sm text-slate-600",children:i}):null]}),l]})}function Oe({children:e,className:i=""}){return a.jsx("section",{className:`admin-panel rounded-xl border border-slate-200 bg-white p-5 shadow-sm ${i}`,children:e})}function Tb({suspicious:e,label:i="Supheli",tooltip:l}){return e?a.jsx("span",{className:"status-badge status-badge-incomplete",title:l,children:i}):a.jsx("span",{className:"status-badge status-badge-neutral",children:"Normal"})}const d1={DUPLICATE_EVENT:{label:"Mkerrer kayt",description:"Ayn gn iinde ayn tipte (IN/OUT) birden fazla kayt tespit edildi.",tone:"warning"},MANUAL_CHECKOUT:{label:"Manuel k",description:"k kayd alan tarafndan manuel butonla oluturuldu.",tone:"info"},NEEDS_SHIFT_REVIEW:{label:"Vardiya kontrol gerekli",description:"Otomatik atanan vardiya ile giri saati arasnda yksek fark var. K kontrol etmelidir.",tone:"warning"},SHIFT_WEEKLY_RULE_OVERRIDE:{label:"Vardiya-kural akmas",description:"Ayn gn iin haftalk gn kural ile vardiya sresi/mola bilgisi farkl. Hesaplamada vardiya kural nceliklendirildi.",tone:"warning"},CROSS_MIDNIGHT_CHECKOUT:{label:"Gece vardiyas k",description:"Giri bir gn, k ertesi gn alnm. Sistem k nceki gnn mesaisine balayarak hesaplad.",tone:"info"},RULE_SOURCE_MANUAL_OVERRIDE:{label:"Kural manuel seildi",description:"Bu gn iin kural kayna K tarafndan manuel olarak seildi.",tone:"info"},RULE_OVERRIDE_INVALID:{label:"Geersiz manuel kural",description:"Manuel seilen kural kayna o gn iin uygulanamad; sistem otomatik kurala dnd.",tone:"warning"},UNDERWORKED:{label:"Eksik alma",description:"Net alma sresi, o gn iin planlanan srenin altnda kald.",tone:"warning"},SECOND_CHECKIN_APPROVED:{label:"2. giri admin onay",description:"Gnlk maksimum vardiya dngs tamamlandktan sonra, ek giri kayd admin onay ile ald.",tone:"info"},LOCATION_NO_LOCATION:{label:"Konum yok",description:"Kayt srasnda konum bilgisi gnderilmedi veya alnamad.",tone:"warning"},LOCATION_UNVERIFIED:{label:"Ev d konum",description:"Kayt, tanml ev konumu yarap dnda alnd.",tone:"warning"},ADMIN_MANUAL_EVENT:{label:"Admin manuel kayt",description:"Kayt admin tarafndan manuel olarak eklenmi/dzenlenmi.",tone:"info"},EKSIK_GUN:{label:"Eksik gn",description:"Gn iinde giri veya k kayd eksik olduu iin gn tamamlanmam grnyor.",tone:"danger"},MISSING_IN:{label:"Giri eksik",description:"Bu gn iin giri (IN) kayd bulunamad.",tone:"danger"},MISSING_OUT:{label:"k eksik",description:"Bu gn iin k (OUT) kayd bulunamad.",tone:"danger"},DAILY_MAX_EXCEEDED:{label:"Gnlk sre ald",description:"Gnlk azami alma sresi (11 saat) ald.",tone:"danger"},MIN_BREAK_NOT_MET:{label:"Yasal mola yetersiz",description:"Tanml mola, yasal minimum mola sresinin altnda kald.",tone:"warning"},NIGHT_WORK_EXCEEDED:{label:"Gece alma snr ald",description:"Gece alma sresi yasal snrn zerinde grnyor.",tone:"danger"},ANNUAL_OVERTIME_CAP_EXCEEDED:{label:"Yllk fazla mesai limiti ald",description:"alann yllk fazla mesai limiti ald.",tone:"danger"}};function Za(e){return d1[e]??{label:e,description:`${e} bayra iin aklama tanml deil.`,tone:"neutral"}}function m1(){return["DAILY_MAX_EXCEEDED","MIN_BREAK_NOT_MET","NIGHT_WORK_EXCEEDED","ANNUAL_OVERTIME_CAP_EXCEEDED","SHIFT_WEEKLY_RULE_OVERRIDE","UNDERWORKED"]}function h1(e){return e==="danger"||e==="warning"?"status-badge status-badge-incomplete":e==="info"?"status-badge status-badge-leave":"status-badge status-badge-neutral"}function Ab({reasons:e}){return e.length===0?a.jsx("span",{className:"status-badge status-badge-neutral",children:"Sorun yok"}):a.jsx("div",{className:"flex flex-wrap gap-1",children:e.map(i=>a.jsx("span",{title:Za(i).description,className:h1(Za(i).tone),children:Za(i).label},i))})}const zb=_.createContext(void 0);function f1(e){return e==="success"?"border-emerald-200 bg-emerald-50 text-emerald-900":e==="error"?"border-rose-200 bg-rose-50 text-rose-900":"border-sky-200 bg-sky-50 text-sky-900"}function p1({children:e}){const[i,l]=_.useState([]),o=_.useCallback(f=>{l(x=>x.map(v=>v.id===f?{...v,isClosing:!0}:v)),window.setTimeout(()=>{l(x=>x.filter(v=>v.id!==f))},170)},[]),d=_.useCallback(f=>{const x=crypto.randomUUID(),v={id:x,title:f.title,description:f.description,durationMs:f.durationMs??3500,variant:f.variant??"info"};l(b=>[...b,v]),window.setTimeout(()=>{o(x)},v.durationMs)},[o]),h=_.useMemo(()=>({pushToast:d,removeToast:o}),[d,o]);return a.jsxs(zb.Provider,{value:h,children:[e,a.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 flex w-full max-w-sm flex-col gap-2",children:i.map(f=>a.jsx("div",{className:`toast-card pointer-events-auto rounded-lg border px-4 py-3 shadow-lg ${f1(f.variant)} ${f.isClosing?"is-leaving":""}`,role:"status",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold",children:f.title}),f.description?a.jsx("p",{className:"mt-1 text-xs",children:f.description}):null]}),a.jsx("button",{type:"button",onClick:()=>o(f.id),className:"rounded px-2 py-1 text-xs font-medium opacity-80 hover:opacity-100",children:"Kapat"})]})},f.id))})]})}function Fn(){const e=_.useContext(zb);return e||{pushToast:()=>{},removeToast:()=>{}}}function g1(e){const[i,l,o]=e.split("-"),d=Number(i),h=Number(l),f=Number(o);return!Number.isInteger(d)||!Number.isInteger(h)||!Number.isInteger(f)?new Date("invalid"):new Date(Date.UTC(d,h-1,f))}function x1(e){return e.leave_type==="PUBLIC_HOLIDAY"||e.flags.includes("PUBLIC_HOLIDAY")}function y1(e){return e.worked_minutes>0?!0:!!(e.in||e.out)}function _d(e){if(x1(e))return{key:"SPECIAL",label:"zel Gn"};const i=g1(e.date);return!Number.isNaN(i.getTime())&&i.getUTCDay()===0?{key:"SUNDAY",label:"Pazar"}:{key:"WEEKDAY",label:"Hafta i"}}function tp(e){const i={workedMinutes:0,overtimeMinutes:0,planOvertimeMinutes:0,legalExtraWorkMinutes:0,workedDayCount:0,overtimeDayCount:0,planOvertimeDayCount:0,sundayWorkedDayCount:0,weekdayWorkedDayCount:0,specialWorkedDayCount:0,sundayWorkedMinutes:0,weekdayWorkedMinutes:0,specialWorkedMinutes:0};for(const l of e){const o=l.plan_overtime_minutes??l.overtime_minutes,d=l.legal_extra_work_minutes??0,h=l.legal_overtime_minutes??l.overtime_minutes;if(i.workedMinutes+=l.worked_minutes,i.planOvertimeMinutes+=o,i.legalExtraWorkMinutes+=d,i.overtimeMinutes+=h,y1(l)){i.workedDayCount+=1;const x=_d(l);x.key==="SPECIAL"?(i.specialWorkedDayCount+=1,i.specialWorkedMinutes+=l.worked_minutes):x.key==="SUNDAY"?(i.sundayWorkedDayCount+=1,i.sundayWorkedMinutes+=l.worked_minutes):(i.weekdayWorkedDayCount+=1,i.weekdayWorkedMinutes+=l.worked_minutes)}o>0&&(i.planOvertimeDayCount+=1),h>0&&(i.overtimeDayCount+=1)}return i}const v1=[{value:"ALL",label:"Tm konum durumlar"},{value:"VERIFIED_HOME",label:"Evde onayl"},{value:"UNVERIFIED_LOCATION",label:"Ev d"},{value:"NO_LOCATION",label:"Konum yok"}],b1=[{value:"ALL",label:"Tm tipler"},{value:"IN",label:"IN (Giri)"},{value:"OUT",label:"OUT (k)"}],Pc={employeeId:"",departmentId:"",dateFrom:"",dateTo:"",eventType:"ALL",locationStatus:"ALL",duplicatesOnly:!1,suspiciousOnly:!1,includeDeleted:!1,limit:"200"};function Yo(e,i){return e[i]===!0}function Wy(e){if(typeof e=="number"&&Number.isInteger(e)&&e>0)return e;if(typeof e=="string"){const i=Number(e.trim());if(Number.isInteger(i)&&i>0)return i}return null}function Ic(e){return new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"medium"}).format(new Date(e))}function _1(e){const i=new Date(e);return new Date(i.getTime()-i.getTimezoneOffset()*6e4).toISOString().slice(0,16)}function N1(e){return e==="VERIFIED_HOME"?"Evde onayl":e==="UNVERIFIED_LOCATION"?"Ev d":"Konum yok"}function zh(e){const i=[],l=e.flags.reason==="home_location_not_set";return Yo(e.flags,"DUPLICATE_EVENT")&&i.push("DUPLICATE_EVENT"),Yo(e.flags,"MANUAL_CHECKOUT")&&i.push("MANUAL_CHECKOUT"),Yo(e.flags,"NEEDS_SHIFT_REVIEW")&&i.push("NEEDS_SHIFT_REVIEW"),e.location_status==="NO_LOCATION"&&i.push("LOCATION_NO_LOCATION"),e.location_status==="UNVERIFIED_LOCATION"&&!l&&i.push("LOCATION_UNVERIFIED"),(e.source==="MANUAL"||e.created_by_admin||Yo(e.flags,"ADMIN_MANUAL"))&&i.push("ADMIN_MANUAL_EVENT"),i}function Mh(e){const i=Number(e);return Number.isInteger(i)&&i>0?i:null}function j1(e){return e.length?e.map(i=>`${Za(i).label} (${i})`).join(", "):"-"}function S1(){const e=Un(),{pushToast:i}=Fn(),[l,o]=_.useState(Pc),[d,h]=_.useState(Pc),[f,x]=_.useState(""),[v,b]=_.useState("IN"),[S,w]=_.useState(""),[T,z]=_.useState(""),[k,A]=_.useState(""),[M,I]=_.useState(!1),[R,D]=_.useState(null),[K,G]=_.useState("IN"),[V,q]=_.useState(""),[Q,ae]=_.useState(""),[ve,ee]=_.useState(""),[ue,_e]=_.useState(!1),[ne,W]=_.useState(!1),[B,X]=_.useState(null),[de,ke]=_.useState(!1),J=Be({queryKey:["employees","all"],queryFn:()=>ui({status:"all",include_inactive:!0})}),O=Be({queryKey:["departments"],queryFn:Hs}),te=Be({queryKey:["department-shifts","all"],queryFn:()=>mu({active_only:!1})}),P=_.useMemo(()=>{const re=Number(d.employeeId),Y=Number(d.departmentId),Ye=Number(d.limit);return{employee_id:re>0?re:void 0,department_id:Y>0?Y:void 0,start_date:d.dateFrom||void 0,end_date:d.dateTo||void 0,type:d.eventType==="ALL"?void 0:d.eventType,location_status:d.locationStatus==="ALL"?void 0:d.locationStatus,duplicates_only:d.duplicatesOnly||void 0,include_deleted:d.includeDeleted||void 0,limit:Ye>0?Ye:200}},[d]),Z=Be({queryKey:["attendance-events",P],queryFn:()=>ep(P)}),me=Be({queryKey:["audit-logs","attendance-events"],queryFn:()=>bb({entity_type:"attendance_event",limit:50})}),Se=Number(d.employeeId),Me=_.useMemo(()=>{const re=d.dateFrom||d.dateTo;if(!re)return new Date;const Y=new Date(`${re}T00:00:00`);return Number.isNaN(Y.getTime())?new Date:Y},[d.dateFrom,d.dateTo]),Ze=Be({queryKey:["attendance-events-monthly-summary",Se,Me.getFullYear(),Me.getMonth()+1],queryFn:()=>tu({employee_id:Se,year:Me.getFullYear(),month:Me.getMonth()+1}),enabled:Number.isInteger(Se)&&Se>0,staleTime:15e3}),Ve=Xe({mutationFn:vE,onSuccess:()=>{i({variant:"success",title:"Manuel event kaydedildi",description:"Kayt baaryla oluturuldu."}),z(""),A(""),I(!1),e.invalidateQueries({queryKey:["attendance-events"]}),e.invalidateQueries({queryKey:["audit-logs"]})},onError:re=>{i({variant:"error",title:"Kayt oluturulamad",description:Le(re,"lem baarsz.").message})}}),qe=Xe({mutationFn:({eventId:re,payload:Y})=>bE(re,Y),onSuccess:()=>{i({variant:"success",title:"Event gncellendi",description:"Deiiklikler kaydedildi."}),D(null),e.invalidateQueries({queryKey:["attendance-events"]}),e.invalidateQueries({queryKey:["audit-logs"]})},onError:re=>{i({variant:"error",title:"Event gncellenemedi",description:Le(re,"lem baarsz.").message})}}),Ne=Xe({mutationFn:({eventId:re,force:Y})=>_E(re,Y),onSuccess:()=>{i({variant:"success",title:"Event soft silindi",description:"Kayt pasife alnd."}),X(null),ke(!1),e.invalidateQueries({queryKey:["attendance-events"]}),e.invalidateQueries({queryKey:["audit-logs"]})},onError:re=>{i({variant:"error",title:"Silme baarsz",description:Le(re,"lem baarsz.").message})}}),tt=J.data??[],bt=O.data??[],rt=te.data??[],pt=Z.data??[],Ut=_.useMemo(()=>(Ze.data?.days??[]).filter(Y=>!(d.dateFrom&&Y.date<d.dateFrom||d.dateTo&&Y.date>d.dateTo)),[Ze.data?.days,d.dateFrom,d.dateTo]),Dt=_.useMemo(()=>tp(Ut),[Ut]),mt=_.useMemo(()=>new Map(tt.map(re=>[re.id,re])),[tt]),rn=_.useMemo(()=>new Map(tt.map(re=>[re.id,re.full_name])),[tt]),se=_.useMemo(()=>new Map(bt.map(re=>[re.id,re.name])),[bt]),Ae=_.useMemo(()=>new Map(rt.map(re=>[re.id,re])),[rt]),Ke=_.useMemo(()=>mt.get(Number(f)),[mt,f]),ce=_.useMemo(()=>Ke?.department_id?rt.filter(re=>re.department_id===Ke.department_id):rt,[Ke?.department_id,rt]),Re=_.useMemo(()=>{if(!R)return rt;const re=mt.get(R.employee_id);return re?.department_id?rt.filter(Y=>Y.department_id===re.department_id):rt},[mt,R,rt]),ct=_.useMemo(()=>d.suspiciousOnly?pt.filter(re=>zh(re).length>0):pt,[pt,d.suspiciousOnly]),be=()=>h({...l}),He=()=>{o(Pc),h(Pc)},lt=re=>{re.preventDefault();const Y=Mh(f);if(!Y||!S){i({variant:"error",title:"Eksik alan",description:"alan ve tarih/saat zorunludur."});return}const Ye=Mh(k);Ve.mutate({employee_id:Y,type:v,ts_utc:new Date(S).toISOString(),note:T||void 0,shift_id:Ye??void 0,allow_duplicate:M})},at=re=>{D(re),G(re.type),q(_1(re.ts_utc)),ae(re.note??""),_e(!1),W(!1),ee(String(Wy(re.flags.SHIFT_ID)??""))},tn=re=>{if(re.preventDefault(),!R||!V)return;const Y=Mh(ve);qe.mutate({eventId:R.id,payload:{type:K,ts_utc:new Date(V).toISOString(),note:Q||null,shift_id:Y??void 0,allow_duplicate:ue,force_edit:ne}})};return J.isLoading||O.isLoading||te.isLoading?a.jsx(Ot,{}):J.isError||O.isError||te.isError?a.jsx(St,{message:"alan/departman/vardiya bilgileri alnamad."}):a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"Yoklama Kaytlar",description:"Manuel event ekleme, vardiya dzeltme, soft silme ve audit takibi."}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),a.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:[a.jsx(Ka,{label:"alan",employees:tt,value:l.employeeId,onChange:re=>o(Y=>({...Y,employeeId:re})),emptyLabel:"Tm",helperText:"Ad-soyad veya ID ile arayn."}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",a.jsxs("select",{value:l.departmentId,onChange:re=>o(Y=>({...Y,departmentId:re.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Tm"}),bt.map(re=>a.jsxs("option",{value:re.id,children:["#",re.id," - ",re.name]},re.id))]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Balang",a.jsx("input",{type:"date",value:l.dateFrom,onChange:re=>o(Y=>({...Y,dateFrom:re.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Biti",a.jsx("input",{type:"date",value:l.dateTo,onChange:re=>o(Y=>({...Y,dateTo:re.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Event tipi",a.jsx("select",{value:l.eventType,onChange:re=>o(Y=>({...Y,eventType:re.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:b1.map(re=>a.jsx("option",{value:re.value,children:re.label},re.value))})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Konum",a.jsx("select",{value:l.locationStatus,onChange:re=>o(Y=>({...Y,locationStatus:re.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:v1.map(re=>a.jsx("option",{value:re.value,children:re.label},re.value))})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Limit",a.jsx("input",{type:"number",value:l.limit,onChange:re=>o(Y=>({...Y,limit:re.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("div",{className:"flex flex-col justify-end gap-2 text-sm text-slate-700",children:[a.jsxs("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:l.duplicatesOnly,onChange:re=>o(Y=>({...Y,duplicatesOnly:re.target.checked}))}),"Sadece mkerrer"]}),a.jsxs("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:l.suspiciousOnly,onChange:re=>o(Y=>({...Y,suspiciousOnly:re.target.checked}))}),"Sadece pheli"]}),a.jsxs("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:l.includeDeleted,onChange:re=>o(Y=>({...Y,includeDeleted:re.target.checked}))}),"Silinenleri gster"]})]})]}),a.jsxs("div",{className:"mt-4 flex gap-2",children:[a.jsx("button",{type:"button",onClick:be,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),a.jsx("button",{type:"button",onClick:He,className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Manuel Event Ekle"}),a.jsxs("form",{onSubmit:lt,className:"mt-3 grid gap-3 md:grid-cols-3",children:[a.jsx(Ka,{label:"alan",employees:tt,value:f,onChange:x,emptyLabel:"Seiniz",helperText:"Manuel kayt iin alan sein.",className:"md:col-span-2"}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Event tipi",a.jsxs("select",{value:v,onChange:re=>b(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"IN",children:"IN (Giri)"}),a.jsx("option",{value:"OUT",children:"OUT (k)"})]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Tarih/saat",a.jsx("input",{type:"datetime-local",value:S,onChange:re=>w(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya (opsiyonel)",a.jsxs("select",{value:k,onChange:re=>A(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Otomatik/bo"}),ce.map(re=>a.jsxs("option",{value:re.id,children:["#",re.id," - ",re.name," (",re.start_time_local,"-",re.end_time_local,")"]},re.id))]})]}),a.jsxs("label",{className:"text-sm text-slate-700 md:col-span-3",children:["Not",a.jsx("input",{type:"text",value:T,onChange:re=>z(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 md:col-span-3",children:[a.jsx("input",{type:"checkbox",checked:M,onChange:re=>I(re.target.checked)}),"Sra akyorsa duplicate olarak kaydet"]}),a.jsx("div",{className:"md:col-span-3",children:a.jsx("button",{type:"submit",disabled:Ve.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Ve.isPending?"Kaydediliyor...":"Manuel event kaydet"})})]})]}),a.jsxs(Oe,{children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Puantaj Analiz Ozeti"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Secili calisan icin saat bazli net calisma, fazla mesai ve gun tipi kirilimlari."})]}),a.jsxs("p",{className:"text-xs text-slate-500",children:["Ay: ",Me.getFullYear(),"-",String(Me.getMonth()+1).padStart(2,"0")]})]}),Se?Ze.isLoading?a.jsx(Ot,{}):Ze.isError?a.jsx(St,{message:Le(Ze.error,"Puantaj analiz ozeti alinamadi.").message}):a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-5",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Net calisma"}),a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:a.jsx(Pe,{minutes:Dt.workedMinutes})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Plan ustu sure"}),a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:a.jsx(Pe,{minutes:Dt.planOvertimeMinutes})}),a.jsxs("p",{className:"text-xs text-slate-500",children:[Dt.planOvertimeDayCount," gun"]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Yasal fazla mesai"}),a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:a.jsx(Pe,{minutes:Dt.overtimeMinutes})}),a.jsxs("p",{className:"text-xs text-slate-500",children:[Dt.overtimeDayCount," gun"]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Calisilan gun"}),a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:Dt.workedDayCount}),a.jsxs("p",{className:"text-xs text-slate-500",children:["Hafta ici: ",Dt.weekdayWorkedDayCount]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Pazar / Ozel"}),a.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[Dt.sundayWorkedDayCount," / ",Dt.specialWorkedDayCount," gun"]})]})]}),a.jsxs("div",{className:"max-h-[44vh] overflow-auto overscroll-contain",children:[a.jsxs("table",{className:"min-w-[1100px] text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Tarih"}),a.jsx("th",{className:"py-2",children:"Gun Tipi"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2",children:"Giris"}),a.jsx("th",{className:"py-2",children:"Cikis"}),a.jsx("th",{className:"py-2",children:"Calisma"}),a.jsx("th",{className:"py-2",children:"Plan Ustu"}),a.jsx("th",{className:"py-2",children:"Yasal Fazla Sure"}),a.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"}),a.jsx("th",{className:"py-2",children:"Bayraklar"})]})}),a.jsx("tbody",{children:Ut.map(re=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:re.date}),a.jsx("td",{className:"py-2",children:_d(re).label}),a.jsx("td",{className:"py-2",children:re.status}),a.jsx("td",{className:"py-2",children:re.in?Ic(re.in):"-"}),a.jsx("td",{className:"py-2",children:re.out?Ic(re.out):"-"}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:re.worked_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:re.plan_overtime_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:re.legal_extra_work_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:re.legal_overtime_minutes})}),a.jsx("td",{className:"py-2 text-xs text-slate-600",children:j1(re.flags)})]},re.date))})]}),Ut.length===0?a.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Secili aralikta puantaj gun kaydi bulunamadi."}):null]})]}):a.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Analiz gormek icin filtrelerden bir calisan secin."})]}),a.jsxs(Oe,{children:[a.jsxs("div",{className:"mb-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Toplam kayt"}),a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ct.length})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"pheli kayt"}),a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ct.filter(re=>zh(re).length>0).length})]})]}),Z.isLoading?a.jsx(Ot,{}):null,Z.isError?a.jsx(St,{message:Le(Z.error,"Yoklama kaytlar alnamad.").message}):null,!Z.isLoading&&!Z.isError?a.jsxs("div",{className:"max-h-[66vh] overflow-auto overscroll-contain",children:[a.jsxs("table",{className:"min-w-[1320px] text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"ID"}),a.jsx("th",{className:"py-2",children:"alan"}),a.jsx("th",{className:"py-2",children:"Departman"}),a.jsx("th",{className:"py-2",children:"Tip"}),a.jsx("th",{className:"py-2",children:"Kaynak"}),a.jsx("th",{className:"py-2",children:"Zaman"}),a.jsx("th",{className:"py-2",children:"Konum"}),a.jsx("th",{className:"py-2",children:"Vardiya"}),a.jsx("th",{className:"py-2",children:"Not"}),a.jsx("th",{className:"py-2",children:"Bayraklar"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2",children:"Aksiyon"})]})}),a.jsx("tbody",{children:ct.map(re=>{const Y=zh(re),Ye=mt.get(re.employee_id),st=Ye?.department_id!=null?se.get(Ye.department_id):"-",Vt=re.source==="MANUAL"||re.created_by_admin||Yo(re.flags,"ADMIN_MANUAL"),wt=Wy(re.flags.SHIFT_ID),Mn=typeof re.flags.SHIFT_NAME=="string"?re.flags.SHIFT_NAME:wt&&Ae.get(wt)?Ae.get(wt)?.name:null;return a.jsxs("tr",{className:`border-t border-slate-100 ${Y.length>0?"bg-amber-50/40":""}`,children:[a.jsx("td",{className:"py-2",children:re.id}),a.jsxs("td",{className:"py-2",children:["#",re.employee_id," - ",rn.get(re.employee_id)??"-"]}),a.jsx("td",{className:"py-2",children:st??"-"}),a.jsx("td",{className:"py-2",children:re.type}),a.jsxs("td",{className:"py-2",children:[Vt?a.jsx("span",{className:"inline-flex rounded-full bg-indigo-100 px-2 py-1 text-[11px] font-semibold text-indigo-700",children:"MANUEL"}):"CHAZ",re.deleted_at?a.jsx("span",{className:"ml-1 inline-flex rounded-full bg-rose-100 px-2 py-1 text-[11px] font-semibold text-rose-700",children:"SLND"}):null]}),a.jsx("td",{className:"py-2",children:Ic(re.ts_utc)}),a.jsx("td",{className:"py-2",children:N1(re.location_status)}),a.jsx("td",{className:"py-2",children:Mn?a.jsxs("span",{children:[Mn,wt?` (#${wt})`:""]}):wt?a.jsxs("span",{children:["#",wt]}):"-"}),a.jsx("td",{className:"py-2",children:re.note||"-"}),a.jsx("td",{className:"py-2",children:a.jsx(Ab,{reasons:Y})}),a.jsx("td",{className:"py-2",children:a.jsx(Tb,{suspicious:Y.length>0,label:"pheli"})}),a.jsx("td",{className:"py-2",children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{type:"button",onClick:()=>at(re),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Dzenle"}),a.jsx("button",{type:"button",onClick:()=>X(re),className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50",children:"Soft sil"})]})})]},re.id)})})]}),ct.length===0?a.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Filtreye uygun kayt bulunamad."}):null]}):null]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Audit Log"}),me.isLoading?a.jsx(Ot,{}):null,me.isError?a.jsx(St,{message:Le(me.error,"Audit loglar alnamad.").message}):null,!me.isLoading&&!me.isError?a.jsx("div",{className:"mt-3 max-h-[40vh] overflow-auto overscroll-contain",children:a.jsxs("table",{className:"min-w-[980px] text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Zaman"}),a.jsx("th",{className:"py-2",children:"Aksiyon"}),a.jsx("th",{className:"py-2",children:"Kullanc"}),a.jsx("th",{className:"py-2",children:"Entity"}),a.jsx("th",{className:"py-2",children:"Durum"})]})}),a.jsx("tbody",{children:(me.data??[]).map(re=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:Ic(re.ts_utc)}),a.jsx("td",{className:"py-2",children:re.action}),a.jsxs("td",{className:"py-2",children:[re.actor_type,":",re.actor_id]}),a.jsxs("td",{className:"py-2",children:[re.entity_type??"-"," ",re.entity_id?`#${re.entity_id}`:""]}),a.jsx("td",{className:"py-2",children:re.success?"Baarl":"Hatal"})]},re.id))})]})}):null]}),a.jsx(Zs,{open:R!==null,title:R?`Event #${R.id} dzenle`:"Event dzenle",onClose:()=>D(null),children:a.jsxs("form",{onSubmit:tn,className:"space-y-3",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Event tipi",a.jsxs("select",{value:K,onChange:re=>G(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"IN",children:"IN (Giri)"}),a.jsx("option",{value:"OUT",children:"OUT (k)"})]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Tarih/saat",a.jsx("input",{type:"datetime-local",value:V,onChange:re=>q(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya (opsiyonel)",a.jsxs("select",{value:ve,onChange:re=>ee(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Deitirme"}),Re.map(re=>a.jsxs("option",{value:re.id,children:["#",re.id," - ",re.name," (",re.start_time_local,"-",re.end_time_local,")"]},re.id))]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Not",a.jsx("input",{type:"text",value:Q,onChange:re=>ae(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:ue,onChange:re=>_e(re.target.checked)})," Sra akyorsa duplicate olarak gncelle"]}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:ne,onChange:re=>W(re.target.checked)})," Manuel olmayan kaytlarda zorla dzenle"]}),a.jsx("button",{type:"submit",disabled:qe.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:qe.isPending?"Kaydediliyor...":"Kaydet"})]})}),a.jsx(Zs,{open:B!==null,title:B?`Event #${B.id} soft sil`:"Event soft sil",onClose:()=>X(null),children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-sm text-slate-700",children:"Kayt hard delete edilmez, soft delete olarak iaretlenir."}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:de,onChange:re=>ke(re.target.checked)})," Manuel olmayan kaytlarda zorla sil"]}),a.jsx("button",{type:"button",onClick:()=>B&&Ne.mutate({eventId:B.id,force:de}),disabled:Ne.isPending,className:"btn-danger rounded-lg bg-rose-600 px-4 py-2 text-sm font-semibold text-white hover:bg-rose-700 disabled:opacity-60",children:Ne.isPending?"Siliniyor...":"Soft sil"})]})})]})}function Ee(e,i,l){function o(x,v){if(x._zod||Object.defineProperty(x,"_zod",{value:{def:v,constr:f,traits:new Set},enumerable:!1}),x._zod.traits.has(e))return;x._zod.traits.add(e),i(x,v);const b=f.prototype,S=Object.keys(b);for(let w=0;w<S.length;w++){const T=S[w];T in x||(x[T]=b[T].bind(x))}}const d=l?.Parent??Object;class h extends d{}Object.defineProperty(h,"name",{value:e});function f(x){var v;const b=l?.Parent?new h:this;o(b,x),(v=b._zod).deferred??(v.deferred=[]);for(const S of b._zod.deferred)S();return b}return Object.defineProperty(f,"init",{value:o}),Object.defineProperty(f,Symbol.hasInstance,{value:x=>l?.Parent&&x instanceof l.Parent?!0:x?._zod?.traits?.has(e)}),Object.defineProperty(f,"name",{value:e}),f}class Ml extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Mb extends Error{constructor(i){super(`Encountered unidirectional transform during encode: ${i}`),this.name="ZodEncodeError"}}const Ob={};function Rr(e){return Ob}function Db(e){const i=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,d])=>i.indexOf(+o)===-1).map(([o,d])=>d)}function kf(e,i){return typeof i=="bigint"?i.toString():i}function np(e){return{get value(){{const i=e();return Object.defineProperty(this,"value",{value:i}),i}}}}function ap(e){return e==null}function ip(e){const i=e.startsWith("^")?1:0,l=e.endsWith("$")?e.length-1:e.length;return e.slice(i,l)}function w1(e,i){const l=(e.toString().split(".")[1]||"").length,o=i.toString();let d=(o.split(".")[1]||"").length;if(d===0&&/\d?e-\d?/.test(o)){const v=o.match(/\d?e-(\d?)/);v?.[1]&&(d=Number.parseInt(v[1]))}const h=l>d?l:d,f=Number.parseInt(e.toFixed(h).replace(".","")),x=Number.parseInt(i.toFixed(h).replace(".",""));return f%x/10**h}const e0=Symbol("evaluating");function Bt(e,i,l){let o;Object.defineProperty(e,i,{get(){if(o!==e0)return o===void 0&&(o=e0,o=l()),o},set(d){Object.defineProperty(e,i,{value:d})},configurable:!0})}function Pr(e,i,l){Object.defineProperty(e,i,{value:l,writable:!0,enumerable:!0,configurable:!0})}function Ks(...e){const i={};for(const l of e){const o=Object.getOwnPropertyDescriptors(l);Object.assign(i,o)}return Object.defineProperties({},i)}function t0(e){return JSON.stringify(e)}function E1(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Rb="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function rd(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const k1=np(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function nu(e){if(rd(e)===!1)return!1;const i=e.constructor;if(i===void 0||typeof i!="function")return!0;const l=i.prototype;return!(rd(l)===!1||Object.prototype.hasOwnProperty.call(l,"isPrototypeOf")===!1)}function Lb(e){return nu(e)?{...e}:Array.isArray(e)?[...e]:e}const C1=new Set(["string","number","symbol"]);function Nd(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Qs(e,i,l){const o=new e._zod.constr(i??e._zod.def);return(!i||l?.parent)&&(o._zod.parent=e),o}function We(e){const i=e;if(!i)return{};if(typeof i=="string")return{error:()=>i};if(i?.message!==void 0){if(i?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");i.error=i.message}return delete i.message,typeof i.error=="string"?{...i,error:()=>i.error}:i}function T1(e){return Object.keys(e).filter(i=>e[i]._zod.optin==="optional"&&e[i]._zod.optout==="optional")}const A1={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function z1(e,i){const l=e._zod.def,o=l.checks;if(o&&o.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const h=Ks(e._zod.def,{get shape(){const f={};for(const x in i){if(!(x in l.shape))throw new Error(`Unrecognized key: "${x}"`);i[x]&&(f[x]=l.shape[x])}return Pr(this,"shape",f),f},checks:[]});return Qs(e,h)}function M1(e,i){const l=e._zod.def,o=l.checks;if(o&&o.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const h=Ks(e._zod.def,{get shape(){const f={...e._zod.def.shape};for(const x in i){if(!(x in l.shape))throw new Error(`Unrecognized key: "${x}"`);i[x]&&delete f[x]}return Pr(this,"shape",f),f},checks:[]});return Qs(e,h)}function O1(e,i){if(!nu(i))throw new Error("Invalid input to extend: expected a plain object");const l=e._zod.def.checks;if(l&&l.length>0){const h=e._zod.def.shape;for(const f in i)if(Object.getOwnPropertyDescriptor(h,f)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const d=Ks(e._zod.def,{get shape(){const h={...e._zod.def.shape,...i};return Pr(this,"shape",h),h}});return Qs(e,d)}function D1(e,i){if(!nu(i))throw new Error("Invalid input to safeExtend: expected a plain object");const l=Ks(e._zod.def,{get shape(){const o={...e._zod.def.shape,...i};return Pr(this,"shape",o),o}});return Qs(e,l)}function R1(e,i){const l=Ks(e._zod.def,{get shape(){const o={...e._zod.def.shape,...i._zod.def.shape};return Pr(this,"shape",o),o},get catchall(){return i._zod.def.catchall},checks:[]});return Qs(e,l)}function L1(e,i,l){const d=i._zod.def.checks;if(d&&d.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const f=Ks(i._zod.def,{get shape(){const x=i._zod.def.shape,v={...x};if(l)for(const b in l){if(!(b in x))throw new Error(`Unrecognized key: "${b}"`);l[b]&&(v[b]=e?new e({type:"optional",innerType:x[b]}):x[b])}else for(const b in x)v[b]=e?new e({type:"optional",innerType:x[b]}):x[b];return Pr(this,"shape",v),v},checks:[]});return Qs(i,f)}function P1(e,i,l){const o=Ks(i._zod.def,{get shape(){const d=i._zod.def.shape,h={...d};if(l)for(const f in l){if(!(f in h))throw new Error(`Unrecognized key: "${f}"`);l[f]&&(h[f]=new e({type:"nonoptional",innerType:d[f]}))}else for(const f in d)h[f]=new e({type:"nonoptional",innerType:d[f]});return Pr(this,"shape",h),h}});return Qs(i,o)}function zl(e,i=0){if(e.aborted===!0)return!0;for(let l=i;l<e.issues.length;l++)if(e.issues[l]?.continue!==!0)return!0;return!1}function Pb(e,i){return i.map(l=>{var o;return(o=l).path??(o.path=[]),l.path.unshift(e),l})}function Bc(e){return typeof e=="string"?e:e?.message}function Lr(e,i,l){const o={...e,path:e.path??[]};if(!e.message){const d=Bc(e.inst?._zod.def?.error?.(e))??Bc(i?.error?.(e))??Bc(l.customError?.(e))??Bc(l.localeError?.(e))??"Invalid input";o.message=d}return delete o.inst,delete o.continue,i?.reportInput||delete o.input,o}function sp(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function au(...e){const[i,l,o]=e;return typeof i=="string"?{message:i,code:"custom",input:l,inst:o}:{...i}}const Ib=(e,i)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:i,enumerable:!1}),e.message=JSON.stringify(i,kf,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Bb=Ee("$ZodError",Ib),Ub=Ee("$ZodError",Ib,{Parent:Error});function I1(e,i=l=>l.message){const l={},o=[];for(const d of e.issues)d.path.length>0?(l[d.path[0]]=l[d.path[0]]||[],l[d.path[0]].push(i(d))):o.push(i(d));return{formErrors:o,fieldErrors:l}}function B1(e,i=l=>l.message){const l={_errors:[]},o=d=>{for(const h of d.issues)if(h.code==="invalid_union"&&h.errors.length)h.errors.map(f=>o({issues:f}));else if(h.code==="invalid_key")o({issues:h.issues});else if(h.code==="invalid_element")o({issues:h.issues});else if(h.path.length===0)l._errors.push(i(h));else{let f=l,x=0;for(;x<h.path.length;){const v=h.path[x];x===h.path.length-1?(f[v]=f[v]||{_errors:[]},f[v]._errors.push(i(h))):f[v]=f[v]||{_errors:[]},f=f[v],x++}}};return o(e),l}const rp=e=>(i,l,o,d)=>{const h=o?Object.assign(o,{async:!1}):{async:!1},f=i._zod.run({value:l,issues:[]},h);if(f instanceof Promise)throw new Ml;if(f.issues.length){const x=new(d?.Err??e)(f.issues.map(v=>Lr(v,h,Rr())));throw Rb(x,d?.callee),x}return f.value},lp=e=>async(i,l,o,d)=>{const h=o?Object.assign(o,{async:!0}):{async:!0};let f=i._zod.run({value:l,issues:[]},h);if(f instanceof Promise&&(f=await f),f.issues.length){const x=new(d?.Err??e)(f.issues.map(v=>Lr(v,h,Rr())));throw Rb(x,d?.callee),x}return f.value},jd=e=>(i,l,o)=>{const d=o?{...o,async:!1}:{async:!1},h=i._zod.run({value:l,issues:[]},d);if(h instanceof Promise)throw new Ml;return h.issues.length?{success:!1,error:new(e??Bb)(h.issues.map(f=>Lr(f,d,Rr())))}:{success:!0,data:h.value}},U1=jd(Ub),Sd=e=>async(i,l,o)=>{const d=o?Object.assign(o,{async:!0}):{async:!0};let h=i._zod.run({value:l,issues:[]},d);return h instanceof Promise&&(h=await h),h.issues.length?{success:!1,error:new e(h.issues.map(f=>Lr(f,d,Rr())))}:{success:!0,data:h.value}},F1=Sd(Ub),Z1=e=>(i,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return rp(e)(i,l,d)},q1=e=>(i,l,o)=>rp(e)(i,l,o),H1=e=>async(i,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return lp(e)(i,l,d)},K1=e=>async(i,l,o)=>lp(e)(i,l,o),Q1=e=>(i,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return jd(e)(i,l,d)},G1=e=>(i,l,o)=>jd(e)(i,l,o),V1=e=>async(i,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Sd(e)(i,l,d)},Y1=e=>async(i,l,o)=>Sd(e)(i,l,o),$1=/^[cC][^\s-]{8,}$/,X1=/^[0-9a-z]+$/,J1=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,W1=/^[0-9a-vA-V]{20}$/,ek=/^[A-Za-z0-9]{27}$/,tk=/^[a-zA-Z0-9_-]{21}$/,nk=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ak=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,n0=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,ik=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,sk="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function rk(){return new RegExp(sk,"u")}const lk=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ok=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,uk=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,ck=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dk=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Fb=/^[A-Za-z0-9_-]*$/,mk=/^\+[1-9]\d{6,14}$/,Zb="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",hk=new RegExp(`^${Zb}$`);function qb(e){const i="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${i}`:e.precision===0?`${i}:[0-5]\\d`:`${i}:[0-5]\\d\\.\\d{${e.precision}}`:`${i}(?::[0-5]\\d(?:\\.\\d+)?)?`}function fk(e){return new RegExp(`^${qb(e)}$`)}function pk(e){const i=qb({precision:e.precision}),l=["Z"];e.local&&l.push(""),e.offset&&l.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const o=`${i}(?:${l.join("|")})`;return new RegExp(`^${Zb}T(?:${o})$`)}const gk=e=>{const i=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${i}$`)},xk=/^-?\d+$/,yk=/^-?\d+(?:\.\d+)?$/,vk=/^(?:true|false)$/i,bk=/^null$/i,_k=/^[^A-Z]*$/,Nk=/^[^a-z]*$/,fa=Ee("$ZodCheck",(e,i)=>{var l;e._zod??(e._zod={}),e._zod.def=i,(l=e._zod).onattach??(l.onattach=[])}),Hb={number:"number",bigint:"bigint",object:"date"},Kb=Ee("$ZodCheckLessThan",(e,i)=>{fa.init(e,i);const l=Hb[typeof i.value];e._zod.onattach.push(o=>{const d=o._zod.bag,h=(i.inclusive?d.maximum:d.exclusiveMaximum)??Number.POSITIVE_INFINITY;i.value<h&&(i.inclusive?d.maximum=i.value:d.exclusiveMaximum=i.value)}),e._zod.check=o=>{(i.inclusive?o.value<=i.value:o.value<i.value)||o.issues.push({origin:l,code:"too_big",maximum:typeof i.value=="object"?i.value.getTime():i.value,input:o.value,inclusive:i.inclusive,inst:e,continue:!i.abort})}}),Qb=Ee("$ZodCheckGreaterThan",(e,i)=>{fa.init(e,i);const l=Hb[typeof i.value];e._zod.onattach.push(o=>{const d=o._zod.bag,h=(i.inclusive?d.minimum:d.exclusiveMinimum)??Number.NEGATIVE_INFINITY;i.value>h&&(i.inclusive?d.minimum=i.value:d.exclusiveMinimum=i.value)}),e._zod.check=o=>{(i.inclusive?o.value>=i.value:o.value>i.value)||o.issues.push({origin:l,code:"too_small",minimum:typeof i.value=="object"?i.value.getTime():i.value,input:o.value,inclusive:i.inclusive,inst:e,continue:!i.abort})}}),jk=Ee("$ZodCheckMultipleOf",(e,i)=>{fa.init(e,i),e._zod.onattach.push(l=>{var o;(o=l._zod.bag).multipleOf??(o.multipleOf=i.value)}),e._zod.check=l=>{if(typeof l.value!=typeof i.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof l.value=="bigint"?l.value%i.value===BigInt(0):w1(l.value,i.value)===0)||l.issues.push({origin:typeof l.value,code:"not_multiple_of",divisor:i.value,input:l.value,inst:e,continue:!i.abort})}}),Sk=Ee("$ZodCheckNumberFormat",(e,i)=>{fa.init(e,i),i.format=i.format||"float64";const l=i.format?.includes("int"),o=l?"int":"number",[d,h]=A1[i.format];e._zod.onattach.push(f=>{const x=f._zod.bag;x.format=i.format,x.minimum=d,x.maximum=h,l&&(x.pattern=xk)}),e._zod.check=f=>{const x=f.value;if(l){if(!Number.isInteger(x)){f.issues.push({expected:o,format:i.format,code:"invalid_type",continue:!1,input:x,inst:e});return}if(!Number.isSafeInteger(x)){x>0?f.issues.push({input:x,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,inclusive:!0,continue:!i.abort}):f.issues.push({input:x,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,inclusive:!0,continue:!i.abort});return}}x<d&&f.issues.push({origin:"number",input:x,code:"too_small",minimum:d,inclusive:!0,inst:e,continue:!i.abort}),x>h&&f.issues.push({origin:"number",input:x,code:"too_big",maximum:h,inclusive:!0,inst:e,continue:!i.abort})}}),wk=Ee("$ZodCheckMaxLength",(e,i)=>{var l;fa.init(e,i),(l=e._zod.def).when??(l.when=o=>{const d=o.value;return!ap(d)&&d.length!==void 0}),e._zod.onattach.push(o=>{const d=o._zod.bag.maximum??Number.POSITIVE_INFINITY;i.maximum<d&&(o._zod.bag.maximum=i.maximum)}),e._zod.check=o=>{const d=o.value;if(d.length<=i.maximum)return;const f=sp(d);o.issues.push({origin:f,code:"too_big",maximum:i.maximum,inclusive:!0,input:d,inst:e,continue:!i.abort})}}),Ek=Ee("$ZodCheckMinLength",(e,i)=>{var l;fa.init(e,i),(l=e._zod.def).when??(l.when=o=>{const d=o.value;return!ap(d)&&d.length!==void 0}),e._zod.onattach.push(o=>{const d=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;i.minimum>d&&(o._zod.bag.minimum=i.minimum)}),e._zod.check=o=>{const d=o.value;if(d.length>=i.minimum)return;const f=sp(d);o.issues.push({origin:f,code:"too_small",minimum:i.minimum,inclusive:!0,input:d,inst:e,continue:!i.abort})}}),kk=Ee("$ZodCheckLengthEquals",(e,i)=>{var l;fa.init(e,i),(l=e._zod.def).when??(l.when=o=>{const d=o.value;return!ap(d)&&d.length!==void 0}),e._zod.onattach.push(o=>{const d=o._zod.bag;d.minimum=i.length,d.maximum=i.length,d.length=i.length}),e._zod.check=o=>{const d=o.value,h=d.length;if(h===i.length)return;const f=sp(d),x=h>i.length;o.issues.push({origin:f,...x?{code:"too_big",maximum:i.length}:{code:"too_small",minimum:i.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!i.abort})}}),wd=Ee("$ZodCheckStringFormat",(e,i)=>{var l,o;fa.init(e,i),e._zod.onattach.push(d=>{const h=d._zod.bag;h.format=i.format,i.pattern&&(h.patterns??(h.patterns=new Set),h.patterns.add(i.pattern))}),i.pattern?(l=e._zod).check??(l.check=d=>{i.pattern.lastIndex=0,!i.pattern.test(d.value)&&d.issues.push({origin:"string",code:"invalid_format",format:i.format,input:d.value,...i.pattern?{pattern:i.pattern.toString()}:{},inst:e,continue:!i.abort})}):(o=e._zod).check??(o.check=()=>{})}),Ck=Ee("$ZodCheckRegex",(e,i)=>{wd.init(e,i),e._zod.check=l=>{i.pattern.lastIndex=0,!i.pattern.test(l.value)&&l.issues.push({origin:"string",code:"invalid_format",format:"regex",input:l.value,pattern:i.pattern.toString(),inst:e,continue:!i.abort})}}),Tk=Ee("$ZodCheckLowerCase",(e,i)=>{i.pattern??(i.pattern=_k),wd.init(e,i)}),Ak=Ee("$ZodCheckUpperCase",(e,i)=>{i.pattern??(i.pattern=Nk),wd.init(e,i)}),zk=Ee("$ZodCheckIncludes",(e,i)=>{fa.init(e,i);const l=Nd(i.includes),o=new RegExp(typeof i.position=="number"?`^.{${i.position}}${l}`:l);i.pattern=o,e._zod.onattach.push(d=>{const h=d._zod.bag;h.patterns??(h.patterns=new Set),h.patterns.add(o)}),e._zod.check=d=>{d.value.includes(i.includes,i.position)||d.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:i.includes,input:d.value,inst:e,continue:!i.abort})}}),Mk=Ee("$ZodCheckStartsWith",(e,i)=>{fa.init(e,i);const l=new RegExp(`^${Nd(i.prefix)}.*`);i.pattern??(i.pattern=l),e._zod.onattach.push(o=>{const d=o._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(l)}),e._zod.check=o=>{o.value.startsWith(i.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:i.prefix,input:o.value,inst:e,continue:!i.abort})}}),Ok=Ee("$ZodCheckEndsWith",(e,i)=>{fa.init(e,i);const l=new RegExp(`.*${Nd(i.suffix)}$`);i.pattern??(i.pattern=l),e._zod.onattach.push(o=>{const d=o._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(l)}),e._zod.check=o=>{o.value.endsWith(i.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:i.suffix,input:o.value,inst:e,continue:!i.abort})}}),Dk=Ee("$ZodCheckOverwrite",(e,i)=>{fa.init(e,i),e._zod.check=l=>{l.value=i.tx(l.value)}});class Rk{constructor(i=[]){this.content=[],this.indent=0,this&&(this.args=i)}indented(i){this.indent+=1,i(this),this.indent-=1}write(i){if(typeof i=="function"){i(this,{execution:"sync"}),i(this,{execution:"async"});return}const o=i.split(`
`).filter(f=>f),d=Math.min(...o.map(f=>f.length-f.trimStart().length)),h=o.map(f=>f.slice(d)).map(f=>" ".repeat(this.indent*2)+f);for(const f of h)this.content.push(f)}compile(){const i=Function,l=this?.args,d=[...(this?.content??[""]).map(h=>`  ${h}`)];return new i(...l,d.join(`
`))}}const Lk={major:4,minor:3,patch:6},mn=Ee("$ZodType",(e,i)=>{var l;e??(e={}),e._zod.def=i,e._zod.bag=e._zod.bag||{},e._zod.version=Lk;const o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(const d of o)for(const h of d._zod.onattach)h(e);if(o.length===0)(l=e._zod).deferred??(l.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const d=(f,x,v)=>{let b=zl(f),S;for(const w of x){if(w._zod.def.when){if(!w._zod.def.when(f))continue}else if(b)continue;const T=f.issues.length,z=w._zod.check(f);if(z instanceof Promise&&v?.async===!1)throw new Ml;if(S||z instanceof Promise)S=(S??Promise.resolve()).then(async()=>{await z,f.issues.length!==T&&(b||(b=zl(f,T)))});else{if(f.issues.length===T)continue;b||(b=zl(f,T))}}return S?S.then(()=>f):f},h=(f,x,v)=>{if(zl(f))return f.aborted=!0,f;const b=d(x,o,v);if(b instanceof Promise){if(v.async===!1)throw new Ml;return b.then(S=>e._zod.parse(S,v))}return e._zod.parse(b,v)};e._zod.run=(f,x)=>{if(x.skipChecks)return e._zod.parse(f,x);if(x.direction==="backward"){const b=e._zod.parse({value:f.value,issues:[]},{...x,skipChecks:!0});return b instanceof Promise?b.then(S=>h(S,f,x)):h(b,f,x)}const v=e._zod.parse(f,x);if(v instanceof Promise){if(x.async===!1)throw new Ml;return v.then(b=>d(b,o,x))}return d(v,o,x)}}Bt(e,"~standard",()=>({validate:d=>{try{const h=U1(e,d);return h.success?{value:h.data}:{issues:h.error?.issues}}catch{return F1(e,d).then(f=>f.success?{value:f.data}:{issues:f.error?.issues})}},vendor:"zod",version:1}))}),op=Ee("$ZodString",(e,i)=>{mn.init(e,i),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??gk(e._zod.bag),e._zod.parse=(l,o)=>{if(i.coerce)try{l.value=String(l.value)}catch{}return typeof l.value=="string"||l.issues.push({expected:"string",code:"invalid_type",input:l.value,inst:e}),l}}),en=Ee("$ZodStringFormat",(e,i)=>{wd.init(e,i),op.init(e,i)}),Pk=Ee("$ZodGUID",(e,i)=>{i.pattern??(i.pattern=ak),en.init(e,i)}),Ik=Ee("$ZodUUID",(e,i)=>{if(i.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[i.version];if(o===void 0)throw new Error(`Invalid UUID version: "${i.version}"`);i.pattern??(i.pattern=n0(o))}else i.pattern??(i.pattern=n0());en.init(e,i)}),Bk=Ee("$ZodEmail",(e,i)=>{i.pattern??(i.pattern=ik),en.init(e,i)}),Uk=Ee("$ZodURL",(e,i)=>{en.init(e,i),e._zod.check=l=>{try{const o=l.value.trim(),d=new URL(o);i.hostname&&(i.hostname.lastIndex=0,i.hostname.test(d.hostname)||l.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:i.hostname.source,input:l.value,inst:e,continue:!i.abort})),i.protocol&&(i.protocol.lastIndex=0,i.protocol.test(d.protocol.endsWith(":")?d.protocol.slice(0,-1):d.protocol)||l.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:i.protocol.source,input:l.value,inst:e,continue:!i.abort})),i.normalize?l.value=d.href:l.value=o;return}catch{l.issues.push({code:"invalid_format",format:"url",input:l.value,inst:e,continue:!i.abort})}}}),Fk=Ee("$ZodEmoji",(e,i)=>{i.pattern??(i.pattern=rk()),en.init(e,i)}),Zk=Ee("$ZodNanoID",(e,i)=>{i.pattern??(i.pattern=tk),en.init(e,i)}),qk=Ee("$ZodCUID",(e,i)=>{i.pattern??(i.pattern=$1),en.init(e,i)}),Hk=Ee("$ZodCUID2",(e,i)=>{i.pattern??(i.pattern=X1),en.init(e,i)}),Kk=Ee("$ZodULID",(e,i)=>{i.pattern??(i.pattern=J1),en.init(e,i)}),Qk=Ee("$ZodXID",(e,i)=>{i.pattern??(i.pattern=W1),en.init(e,i)}),Gk=Ee("$ZodKSUID",(e,i)=>{i.pattern??(i.pattern=ek),en.init(e,i)}),Vk=Ee("$ZodISODateTime",(e,i)=>{i.pattern??(i.pattern=pk(i)),en.init(e,i)}),Yk=Ee("$ZodISODate",(e,i)=>{i.pattern??(i.pattern=hk),en.init(e,i)}),$k=Ee("$ZodISOTime",(e,i)=>{i.pattern??(i.pattern=fk(i)),en.init(e,i)}),Xk=Ee("$ZodISODuration",(e,i)=>{i.pattern??(i.pattern=nk),en.init(e,i)}),Jk=Ee("$ZodIPv4",(e,i)=>{i.pattern??(i.pattern=lk),en.init(e,i),e._zod.bag.format="ipv4"}),Wk=Ee("$ZodIPv6",(e,i)=>{i.pattern??(i.pattern=ok),en.init(e,i),e._zod.bag.format="ipv6",e._zod.check=l=>{try{new URL(`http://[${l.value}]`)}catch{l.issues.push({code:"invalid_format",format:"ipv6",input:l.value,inst:e,continue:!i.abort})}}}),eC=Ee("$ZodCIDRv4",(e,i)=>{i.pattern??(i.pattern=uk),en.init(e,i)}),tC=Ee("$ZodCIDRv6",(e,i)=>{i.pattern??(i.pattern=ck),en.init(e,i),e._zod.check=l=>{const o=l.value.split("/");try{if(o.length!==2)throw new Error;const[d,h]=o;if(!h)throw new Error;const f=Number(h);if(`${f}`!==h)throw new Error;if(f<0||f>128)throw new Error;new URL(`http://[${d}]`)}catch{l.issues.push({code:"invalid_format",format:"cidrv6",input:l.value,inst:e,continue:!i.abort})}}});function Gb(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const nC=Ee("$ZodBase64",(e,i)=>{i.pattern??(i.pattern=dk),en.init(e,i),e._zod.bag.contentEncoding="base64",e._zod.check=l=>{Gb(l.value)||l.issues.push({code:"invalid_format",format:"base64",input:l.value,inst:e,continue:!i.abort})}});function aC(e){if(!Fb.test(e))return!1;const i=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),l=i.padEnd(Math.ceil(i.length/4)*4,"=");return Gb(l)}const iC=Ee("$ZodBase64URL",(e,i)=>{i.pattern??(i.pattern=Fb),en.init(e,i),e._zod.bag.contentEncoding="base64url",e._zod.check=l=>{aC(l.value)||l.issues.push({code:"invalid_format",format:"base64url",input:l.value,inst:e,continue:!i.abort})}}),sC=Ee("$ZodE164",(e,i)=>{i.pattern??(i.pattern=mk),en.init(e,i)});function rC(e,i=null){try{const l=e.split(".");if(l.length!==3)return!1;const[o]=l;if(!o)return!1;const d=JSON.parse(atob(o));return!("typ"in d&&d?.typ!=="JWT"||!d.alg||i&&(!("alg"in d)||d.alg!==i))}catch{return!1}}const lC=Ee("$ZodJWT",(e,i)=>{en.init(e,i),e._zod.check=l=>{rC(l.value,i.alg)||l.issues.push({code:"invalid_format",format:"jwt",input:l.value,inst:e,continue:!i.abort})}}),Vb=Ee("$ZodNumber",(e,i)=>{mn.init(e,i),e._zod.pattern=e._zod.bag.pattern??yk,e._zod.parse=(l,o)=>{if(i.coerce)try{l.value=Number(l.value)}catch{}const d=l.value;if(typeof d=="number"&&!Number.isNaN(d)&&Number.isFinite(d))return l;const h=typeof d=="number"?Number.isNaN(d)?"NaN":Number.isFinite(d)?void 0:"Infinity":void 0;return l.issues.push({expected:"number",code:"invalid_type",input:d,inst:e,...h?{received:h}:{}}),l}}),oC=Ee("$ZodNumberFormat",(e,i)=>{Sk.init(e,i),Vb.init(e,i)}),uC=Ee("$ZodBoolean",(e,i)=>{mn.init(e,i),e._zod.pattern=vk,e._zod.parse=(l,o)=>{if(i.coerce)try{l.value=!!l.value}catch{}const d=l.value;return typeof d=="boolean"||l.issues.push({expected:"boolean",code:"invalid_type",input:d,inst:e}),l}}),cC=Ee("$ZodNull",(e,i)=>{mn.init(e,i),e._zod.pattern=bk,e._zod.values=new Set([null]),e._zod.parse=(l,o)=>{const d=l.value;return d===null||l.issues.push({expected:"null",code:"invalid_type",input:d,inst:e}),l}}),dC=Ee("$ZodUnknown",(e,i)=>{mn.init(e,i),e._zod.parse=l=>l}),mC=Ee("$ZodNever",(e,i)=>{mn.init(e,i),e._zod.parse=(l,o)=>(l.issues.push({expected:"never",code:"invalid_type",input:l.value,inst:e}),l)});function a0(e,i,l){e.issues.length&&i.issues.push(...Pb(l,e.issues)),i.value[l]=e.value}const hC=Ee("$ZodArray",(e,i)=>{mn.init(e,i),e._zod.parse=(l,o)=>{const d=l.value;if(!Array.isArray(d))return l.issues.push({expected:"array",code:"invalid_type",input:d,inst:e}),l;l.value=Array(d.length);const h=[];for(let f=0;f<d.length;f++){const x=d[f],v=i.element._zod.run({value:x,issues:[]},o);v instanceof Promise?h.push(v.then(b=>a0(b,l,f))):a0(v,l,f)}return h.length?Promise.all(h).then(()=>l):l}});function ld(e,i,l,o,d){if(e.issues.length){if(d&&!(l in o))return;i.issues.push(...Pb(l,e.issues))}e.value===void 0?l in o&&(i.value[l]=void 0):i.value[l]=e.value}function Yb(e){const i=Object.keys(e.shape);for(const o of i)if(!e.shape?.[o]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${o}": expected a Zod schema`);const l=T1(e.shape);return{...e,keys:i,keySet:new Set(i),numKeys:i.length,optionalKeys:new Set(l)}}function $b(e,i,l,o,d,h){const f=[],x=d.keySet,v=d.catchall._zod,b=v.def.type,S=v.optout==="optional";for(const w in i){if(x.has(w))continue;if(b==="never"){f.push(w);continue}const T=v.run({value:i[w],issues:[]},o);T instanceof Promise?e.push(T.then(z=>ld(z,l,w,i,S))):ld(T,l,w,i,S)}return f.length&&l.issues.push({code:"unrecognized_keys",keys:f,input:i,inst:h}),e.length?Promise.all(e).then(()=>l):l}const fC=Ee("$ZodObject",(e,i)=>{if(mn.init(e,i),!Object.getOwnPropertyDescriptor(i,"shape")?.get){const x=i.shape;Object.defineProperty(i,"shape",{get:()=>{const v={...x};return Object.defineProperty(i,"shape",{value:v}),v}})}const o=np(()=>Yb(i));Bt(e._zod,"propValues",()=>{const x=i.shape,v={};for(const b in x){const S=x[b]._zod;if(S.values){v[b]??(v[b]=new Set);for(const w of S.values)v[b].add(w)}}return v});const d=rd,h=i.catchall;let f;e._zod.parse=(x,v)=>{f??(f=o.value);const b=x.value;if(!d(b))return x.issues.push({expected:"object",code:"invalid_type",input:b,inst:e}),x;x.value={};const S=[],w=f.shape;for(const T of f.keys){const z=w[T],k=z._zod.optout==="optional",A=z._zod.run({value:b[T],issues:[]},v);A instanceof Promise?S.push(A.then(M=>ld(M,x,T,b,k))):ld(A,x,T,b,k)}return h?$b(S,b,x,v,o.value,e):S.length?Promise.all(S).then(()=>x):x}}),pC=Ee("$ZodObjectJIT",(e,i)=>{fC.init(e,i);const l=e._zod.parse,o=np(()=>Yb(i)),d=T=>{const z=new Rk(["shape","payload","ctx"]),k=o.value,A=D=>{const K=t0(D);return`shape[${K}]._zod.run({ value: input[${K}], issues: [] }, ctx)`};z.write("const input = payload.value;");const M=Object.create(null);let I=0;for(const D of k.keys)M[D]=`key_${I++}`;z.write("const newResult = {};");for(const D of k.keys){const K=M[D],G=t0(D),q=T[D]?._zod?.optout==="optional";z.write(`const ${K} = ${A(D)};`),q?z.write(`
        if (${K}.issues.length) {
          if (${G} in input) {
            payload.issues = payload.issues.concat(${K}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${G}, ...iss.path] : [${G}]
            })));
          }
        }
        
        if (${K}.value === undefined) {
          if (${G} in input) {
            newResult[${G}] = undefined;
          }
        } else {
          newResult[${G}] = ${K}.value;
        }
        
      `):z.write(`
        if (${K}.issues.length) {
          payload.issues = payload.issues.concat(${K}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${G}, ...iss.path] : [${G}]
          })));
        }
        
        if (${K}.value === undefined) {
          if (${G} in input) {
            newResult[${G}] = undefined;
          }
        } else {
          newResult[${G}] = ${K}.value;
        }
        
      `)}z.write("payload.value = newResult;"),z.write("return payload;");const R=z.compile();return(D,K)=>R(T,D,K)};let h;const f=rd,x=!Ob.jitless,b=x&&k1.value,S=i.catchall;let w;e._zod.parse=(T,z)=>{w??(w=o.value);const k=T.value;return f(k)?x&&b&&z?.async===!1&&z.jitless!==!0?(h||(h=d(i.shape)),T=h(T,z),S?$b([],k,T,z,w,e):T):l(T,z):(T.issues.push({expected:"object",code:"invalid_type",input:k,inst:e}),T)}});function i0(e,i,l,o){for(const h of e)if(h.issues.length===0)return i.value=h.value,i;const d=e.filter(h=>!zl(h));return d.length===1?(i.value=d[0].value,d[0]):(i.issues.push({code:"invalid_union",input:i.value,inst:l,errors:e.map(h=>h.issues.map(f=>Lr(f,o,Rr())))}),i)}const gC=Ee("$ZodUnion",(e,i)=>{mn.init(e,i),Bt(e._zod,"optin",()=>i.options.some(d=>d._zod.optin==="optional")?"optional":void 0),Bt(e._zod,"optout",()=>i.options.some(d=>d._zod.optout==="optional")?"optional":void 0),Bt(e._zod,"values",()=>{if(i.options.every(d=>d._zod.values))return new Set(i.options.flatMap(d=>Array.from(d._zod.values)))}),Bt(e._zod,"pattern",()=>{if(i.options.every(d=>d._zod.pattern)){const d=i.options.map(h=>h._zod.pattern);return new RegExp(`^(${d.map(h=>ip(h.source)).join("|")})$`)}});const l=i.options.length===1,o=i.options[0]._zod.run;e._zod.parse=(d,h)=>{if(l)return o(d,h);let f=!1;const x=[];for(const v of i.options){const b=v._zod.run({value:d.value,issues:[]},h);if(b instanceof Promise)x.push(b),f=!0;else{if(b.issues.length===0)return b;x.push(b)}}return f?Promise.all(x).then(v=>i0(v,d,e,h)):i0(x,d,e,h)}}),xC=Ee("$ZodIntersection",(e,i)=>{mn.init(e,i),e._zod.parse=(l,o)=>{const d=l.value,h=i.left._zod.run({value:d,issues:[]},o),f=i.right._zod.run({value:d,issues:[]},o);return h instanceof Promise||f instanceof Promise?Promise.all([h,f]).then(([v,b])=>s0(l,v,b)):s0(l,h,f)}});function Cf(e,i){if(e===i)return{valid:!0,data:e};if(e instanceof Date&&i instanceof Date&&+e==+i)return{valid:!0,data:e};if(nu(e)&&nu(i)){const l=Object.keys(i),o=Object.keys(e).filter(h=>l.indexOf(h)!==-1),d={...e,...i};for(const h of o){const f=Cf(e[h],i[h]);if(!f.valid)return{valid:!1,mergeErrorPath:[h,...f.mergeErrorPath]};d[h]=f.data}return{valid:!0,data:d}}if(Array.isArray(e)&&Array.isArray(i)){if(e.length!==i.length)return{valid:!1,mergeErrorPath:[]};const l=[];for(let o=0;o<e.length;o++){const d=e[o],h=i[o],f=Cf(d,h);if(!f.valid)return{valid:!1,mergeErrorPath:[o,...f.mergeErrorPath]};l.push(f.data)}return{valid:!0,data:l}}return{valid:!1,mergeErrorPath:[]}}function s0(e,i,l){const o=new Map;let d;for(const x of i.issues)if(x.code==="unrecognized_keys"){d??(d=x);for(const v of x.keys)o.has(v)||o.set(v,{}),o.get(v).l=!0}else e.issues.push(x);for(const x of l.issues)if(x.code==="unrecognized_keys")for(const v of x.keys)o.has(v)||o.set(v,{}),o.get(v).r=!0;else e.issues.push(x);const h=[...o].filter(([,x])=>x.l&&x.r).map(([x])=>x);if(h.length&&d&&e.issues.push({...d,keys:h}),zl(e))return e;const f=Cf(i.value,l.value);if(!f.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(f.mergeErrorPath)}`);return e.value=f.data,e}const yC=Ee("$ZodEnum",(e,i)=>{mn.init(e,i);const l=Db(i.entries),o=new Set(l);e._zod.values=o,e._zod.pattern=new RegExp(`^(${l.filter(d=>C1.has(typeof d)).map(d=>typeof d=="string"?Nd(d):d.toString()).join("|")})$`),e._zod.parse=(d,h)=>{const f=d.value;return o.has(f)||d.issues.push({code:"invalid_value",values:l,input:f,inst:e}),d}}),vC=Ee("$ZodTransform",(e,i)=>{mn.init(e,i),e._zod.parse=(l,o)=>{if(o.direction==="backward")throw new Mb(e.constructor.name);const d=i.transform(l.value,l);if(o.async)return(d instanceof Promise?d:Promise.resolve(d)).then(f=>(l.value=f,l));if(d instanceof Promise)throw new Ml;return l.value=d,l}});function r0(e,i){return e.issues.length&&i===void 0?{issues:[],value:void 0}:e}const Xb=Ee("$ZodOptional",(e,i)=>{mn.init(e,i),e._zod.optin="optional",e._zod.optout="optional",Bt(e._zod,"values",()=>i.innerType._zod.values?new Set([...i.innerType._zod.values,void 0]):void 0),Bt(e._zod,"pattern",()=>{const l=i.innerType._zod.pattern;return l?new RegExp(`^(${ip(l.source)})?$`):void 0}),e._zod.parse=(l,o)=>{if(i.innerType._zod.optin==="optional"){const d=i.innerType._zod.run(l,o);return d instanceof Promise?d.then(h=>r0(h,l.value)):r0(d,l.value)}return l.value===void 0?l:i.innerType._zod.run(l,o)}}),bC=Ee("$ZodExactOptional",(e,i)=>{Xb.init(e,i),Bt(e._zod,"values",()=>i.innerType._zod.values),Bt(e._zod,"pattern",()=>i.innerType._zod.pattern),e._zod.parse=(l,o)=>i.innerType._zod.run(l,o)}),_C=Ee("$ZodNullable",(e,i)=>{mn.init(e,i),Bt(e._zod,"optin",()=>i.innerType._zod.optin),Bt(e._zod,"optout",()=>i.innerType._zod.optout),Bt(e._zod,"pattern",()=>{const l=i.innerType._zod.pattern;return l?new RegExp(`^(${ip(l.source)}|null)$`):void 0}),Bt(e._zod,"values",()=>i.innerType._zod.values?new Set([...i.innerType._zod.values,null]):void 0),e._zod.parse=(l,o)=>l.value===null?l:i.innerType._zod.run(l,o)}),NC=Ee("$ZodDefault",(e,i)=>{mn.init(e,i),e._zod.optin="optional",Bt(e._zod,"values",()=>i.innerType._zod.values),e._zod.parse=(l,o)=>{if(o.direction==="backward")return i.innerType._zod.run(l,o);if(l.value===void 0)return l.value=i.defaultValue,l;const d=i.innerType._zod.run(l,o);return d instanceof Promise?d.then(h=>l0(h,i)):l0(d,i)}});function l0(e,i){return e.value===void 0&&(e.value=i.defaultValue),e}const jC=Ee("$ZodPrefault",(e,i)=>{mn.init(e,i),e._zod.optin="optional",Bt(e._zod,"values",()=>i.innerType._zod.values),e._zod.parse=(l,o)=>(o.direction==="backward"||l.value===void 0&&(l.value=i.defaultValue),i.innerType._zod.run(l,o))}),SC=Ee("$ZodNonOptional",(e,i)=>{mn.init(e,i),Bt(e._zod,"values",()=>{const l=i.innerType._zod.values;return l?new Set([...l].filter(o=>o!==void 0)):void 0}),e._zod.parse=(l,o)=>{const d=i.innerType._zod.run(l,o);return d instanceof Promise?d.then(h=>o0(h,e)):o0(d,e)}});function o0(e,i){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:i}),e}const wC=Ee("$ZodCatch",(e,i)=>{mn.init(e,i),Bt(e._zod,"optin",()=>i.innerType._zod.optin),Bt(e._zod,"optout",()=>i.innerType._zod.optout),Bt(e._zod,"values",()=>i.innerType._zod.values),e._zod.parse=(l,o)=>{if(o.direction==="backward")return i.innerType._zod.run(l,o);const d=i.innerType._zod.run(l,o);return d instanceof Promise?d.then(h=>(l.value=h.value,h.issues.length&&(l.value=i.catchValue({...l,error:{issues:h.issues.map(f=>Lr(f,o,Rr()))},input:l.value}),l.issues=[]),l)):(l.value=d.value,d.issues.length&&(l.value=i.catchValue({...l,error:{issues:d.issues.map(h=>Lr(h,o,Rr()))},input:l.value}),l.issues=[]),l)}}),EC=Ee("$ZodPipe",(e,i)=>{mn.init(e,i),Bt(e._zod,"values",()=>i.in._zod.values),Bt(e._zod,"optin",()=>i.in._zod.optin),Bt(e._zod,"optout",()=>i.out._zod.optout),Bt(e._zod,"propValues",()=>i.in._zod.propValues),e._zod.parse=(l,o)=>{if(o.direction==="backward"){const h=i.out._zod.run(l,o);return h instanceof Promise?h.then(f=>Uc(f,i.in,o)):Uc(h,i.in,o)}const d=i.in._zod.run(l,o);return d instanceof Promise?d.then(h=>Uc(h,i.out,o)):Uc(d,i.out,o)}});function Uc(e,i,l){return e.issues.length?(e.aborted=!0,e):i._zod.run({value:e.value,issues:e.issues},l)}const kC=Ee("$ZodReadonly",(e,i)=>{mn.init(e,i),Bt(e._zod,"propValues",()=>i.innerType._zod.propValues),Bt(e._zod,"values",()=>i.innerType._zod.values),Bt(e._zod,"optin",()=>i.innerType?._zod?.optin),Bt(e._zod,"optout",()=>i.innerType?._zod?.optout),e._zod.parse=(l,o)=>{if(o.direction==="backward")return i.innerType._zod.run(l,o);const d=i.innerType._zod.run(l,o);return d instanceof Promise?d.then(u0):u0(d)}});function u0(e){return e.value=Object.freeze(e.value),e}const CC=Ee("$ZodCustom",(e,i)=>{fa.init(e,i),mn.init(e,i),e._zod.parse=(l,o)=>l,e._zod.check=l=>{const o=l.value,d=i.fn(o);if(d instanceof Promise)return d.then(h=>c0(h,l,o,e));c0(d,l,o,e)}});function c0(e,i,l,o){if(!e){const d={code:"custom",input:l,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(d.params=o._zod.def.params),i.issues.push(au(d))}}var d0;class TC{constructor(){this._map=new WeakMap,this._idmap=new Map}add(i,...l){const o=l[0];return this._map.set(i,o),o&&typeof o=="object"&&"id"in o&&this._idmap.set(o.id,i),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(i){const l=this._map.get(i);return l&&typeof l=="object"&&"id"in l&&this._idmap.delete(l.id),this._map.delete(i),this}get(i){const l=i._zod.parent;if(l){const o={...this.get(l)??{}};delete o.id;const d={...o,...this._map.get(i)};return Object.keys(d).length?d:void 0}return this._map.get(i)}has(i){return this._map.has(i)}}function AC(){return new TC}(d0=globalThis).__zod_globalRegistry??(d0.__zod_globalRegistry=AC());const $o=globalThis.__zod_globalRegistry;function zC(e,i){return new e({type:"string",...We(i)})}function MC(e,i){return new e({type:"string",format:"email",check:"string_format",abort:!1,...We(i)})}function m0(e,i){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...We(i)})}function OC(e,i){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...We(i)})}function DC(e,i){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...We(i)})}function RC(e,i){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...We(i)})}function LC(e,i){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...We(i)})}function PC(e,i){return new e({type:"string",format:"url",check:"string_format",abort:!1,...We(i)})}function IC(e,i){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...We(i)})}function BC(e,i){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...We(i)})}function UC(e,i){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...We(i)})}function FC(e,i){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...We(i)})}function ZC(e,i){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...We(i)})}function qC(e,i){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...We(i)})}function HC(e,i){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...We(i)})}function KC(e,i){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...We(i)})}function QC(e,i){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...We(i)})}function GC(e,i){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...We(i)})}function VC(e,i){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...We(i)})}function YC(e,i){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...We(i)})}function $C(e,i){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...We(i)})}function XC(e,i){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...We(i)})}function JC(e,i){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...We(i)})}function WC(e,i){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...We(i)})}function eT(e,i){return new e({type:"string",format:"date",check:"string_format",...We(i)})}function tT(e,i){return new e({type:"string",format:"time",check:"string_format",precision:null,...We(i)})}function nT(e,i){return new e({type:"string",format:"duration",check:"string_format",...We(i)})}function aT(e,i){return new e({type:"number",coerce:!0,checks:[],...We(i)})}function iT(e,i){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...We(i)})}function sT(e,i){return new e({type:"boolean",...We(i)})}function rT(e,i){return new e({type:"null",...We(i)})}function lT(e){return new e({type:"unknown"})}function oT(e,i){return new e({type:"never",...We(i)})}function h0(e,i){return new Kb({check:"less_than",...We(i),value:e,inclusive:!1})}function Oh(e,i){return new Kb({check:"less_than",...We(i),value:e,inclusive:!0})}function f0(e,i){return new Qb({check:"greater_than",...We(i),value:e,inclusive:!1})}function Dh(e,i){return new Qb({check:"greater_than",...We(i),value:e,inclusive:!0})}function p0(e,i){return new jk({check:"multiple_of",...We(i),value:e})}function Jb(e,i){return new wk({check:"max_length",...We(i),maximum:e})}function od(e,i){return new Ek({check:"min_length",...We(i),minimum:e})}function Wb(e,i){return new kk({check:"length_equals",...We(i),length:e})}function uT(e,i){return new Ck({check:"string_format",format:"regex",...We(i),pattern:e})}function cT(e){return new Tk({check:"string_format",format:"lowercase",...We(e)})}function dT(e){return new Ak({check:"string_format",format:"uppercase",...We(e)})}function mT(e,i){return new zk({check:"string_format",format:"includes",...We(i),includes:e})}function hT(e,i){return new Mk({check:"string_format",format:"starts_with",...We(i),prefix:e})}function fT(e,i){return new Ok({check:"string_format",format:"ends_with",...We(i),suffix:e})}function Fl(e){return new Dk({check:"overwrite",tx:e})}function pT(e){return Fl(i=>i.normalize(e))}function gT(){return Fl(e=>e.trim())}function xT(){return Fl(e=>e.toLowerCase())}function yT(){return Fl(e=>e.toUpperCase())}function vT(){return Fl(e=>E1(e))}function bT(e,i,l){return new e({type:"array",element:i,...We(l)})}function _T(e,i,l){return new e({type:"custom",check:"custom",fn:i,...We(l)})}function NT(e){const i=jT(l=>(l.addIssue=o=>{if(typeof o=="string")l.issues.push(au(o,l.value,i._zod.def));else{const d=o;d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=l.value),d.inst??(d.inst=i),d.continue??(d.continue=!i._zod.def.abort),l.issues.push(au(d))}},e(l.value,l)));return i}function jT(e,i){const l=new fa({check:"custom",...We(i)});return l._zod.check=e,l}function e_(e){let i=e?.target??"draft-2020-12";return i==="draft-4"&&(i="draft-04"),i==="draft-7"&&(i="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??$o,target:i,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function Bn(e,i,l={path:[],schemaPath:[]}){var o;const d=e._zod.def,h=i.seen.get(e);if(h)return h.count++,l.schemaPath.includes(e)&&(h.cycle=l.path),h.schema;const f={schema:{},count:1,cycle:void 0,path:l.path};i.seen.set(e,f);const x=e._zod.toJSONSchema?.();if(x)f.schema=x;else{const S={...l,schemaPath:[...l.schemaPath,e],path:l.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(i,f.schema,S);else{const T=f.schema,z=i.processors[d.type];if(!z)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${d.type}`);z(e,i,T,S)}const w=e._zod.parent;w&&(f.ref||(f.ref=w),Bn(w,i,S),i.seen.get(w).isParent=!0)}const v=i.metadataRegistry.get(e);return v&&Object.assign(f.schema,v),i.io==="input"&&Wn(e)&&(delete f.schema.examples,delete f.schema.default),i.io==="input"&&f.schema._prefault&&((o=f.schema).default??(o.default=f.schema._prefault)),delete f.schema._prefault,i.seen.get(e).schema}function t_(e,i){const l=e.seen.get(i);if(!l)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=new Map;for(const f of e.seen.entries()){const x=e.metadataRegistry.get(f[0])?.id;if(x){const v=o.get(x);if(v&&v!==f[0])throw new Error(`Duplicate schema id "${x}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);o.set(x,f[0])}}const d=f=>{const x=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const w=e.external.registry.get(f[0])?.id,T=e.external.uri??(k=>k);if(w)return{ref:T(w)};const z=f[1].defId??f[1].schema.id??`schema${e.counter++}`;return f[1].defId=z,{defId:z,ref:`${T("__shared")}#/${x}/${z}`}}if(f[1]===l)return{ref:"#"};const b=`#/${x}/`,S=f[1].schema.id??`__schema${e.counter++}`;return{defId:S,ref:b+S}},h=f=>{if(f[1].schema.$ref)return;const x=f[1],{ref:v,defId:b}=d(f);x.def={...x.schema},b&&(x.defId=b);const S=x.schema;for(const w in S)delete S[w];S.$ref=v};if(e.cycles==="throw")for(const f of e.seen.entries()){const x=f[1];if(x.cycle)throw new Error(`Cycle detected: #/${x.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const f of e.seen.entries()){const x=f[1];if(i===f[0]){h(f);continue}if(e.external){const b=e.external.registry.get(f[0])?.id;if(i!==f[0]&&b){h(f);continue}}if(e.metadataRegistry.get(f[0])?.id){h(f);continue}if(x.cycle){h(f);continue}if(x.count>1&&e.reused==="ref"){h(f);continue}}}function n_(e,i){const l=e.seen.get(i);if(!l)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=f=>{const x=e.seen.get(f);if(x.ref===null)return;const v=x.def??x.schema,b={...v},S=x.ref;if(x.ref=null,S){o(S);const T=e.seen.get(S),z=T.schema;if(z.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(v.allOf=v.allOf??[],v.allOf.push(z)):Object.assign(v,z),Object.assign(v,b),f._zod.parent===S)for(const A in v)A==="$ref"||A==="allOf"||A in b||delete v[A];if(z.$ref&&T.def)for(const A in v)A==="$ref"||A==="allOf"||A in T.def&&JSON.stringify(v[A])===JSON.stringify(T.def[A])&&delete v[A]}const w=f._zod.parent;if(w&&w!==S){o(w);const T=e.seen.get(w);if(T?.schema.$ref&&(v.$ref=T.schema.$ref,T.def))for(const z in v)z==="$ref"||z==="allOf"||z in T.def&&JSON.stringify(v[z])===JSON.stringify(T.def[z])&&delete v[z]}e.override({zodSchema:f,jsonSchema:v,path:x.path??[]})};for(const f of[...e.seen.entries()].reverse())o(f[0]);const d={};if(e.target==="draft-2020-12"?d.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?d.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?d.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const f=e.external.registry.get(i)?.id;if(!f)throw new Error("Schema is missing an `id` property");d.$id=e.external.uri(f)}Object.assign(d,l.def??l.schema);const h=e.external?.defs??{};for(const f of e.seen.entries()){const x=f[1];x.def&&x.defId&&(h[x.defId]=x.def)}e.external||Object.keys(h).length>0&&(e.target==="draft-2020-12"?d.$defs=h:d.definitions=h);try{const f=JSON.parse(JSON.stringify(d));return Object.defineProperty(f,"~standard",{value:{...i["~standard"],jsonSchema:{input:ud(i,"input",e.processors),output:ud(i,"output",e.processors)}},enumerable:!1,writable:!1}),f}catch{throw new Error("Error converting schema to JSON.")}}function Wn(e,i){const l=i??{seen:new Set};if(l.seen.has(e))return!1;l.seen.add(e);const o=e._zod.def;if(o.type==="transform")return!0;if(o.type==="array")return Wn(o.element,l);if(o.type==="set")return Wn(o.valueType,l);if(o.type==="lazy")return Wn(o.getter(),l);if(o.type==="promise"||o.type==="optional"||o.type==="nonoptional"||o.type==="nullable"||o.type==="readonly"||o.type==="default"||o.type==="prefault")return Wn(o.innerType,l);if(o.type==="intersection")return Wn(o.left,l)||Wn(o.right,l);if(o.type==="record"||o.type==="map")return Wn(o.keyType,l)||Wn(o.valueType,l);if(o.type==="pipe")return Wn(o.in,l)||Wn(o.out,l);if(o.type==="object"){for(const d in o.shape)if(Wn(o.shape[d],l))return!0;return!1}if(o.type==="union"){for(const d of o.options)if(Wn(d,l))return!0;return!1}if(o.type==="tuple"){for(const d of o.items)if(Wn(d,l))return!0;return!!(o.rest&&Wn(o.rest,l))}return!1}const ST=(e,i={})=>l=>{const o=e_({...l,processors:i});return Bn(e,o),t_(o,e),n_(o,e)},ud=(e,i,l={})=>o=>{const{libraryOptions:d,target:h}=o??{},f=e_({...d??{},target:h,io:i,processors:l});return Bn(e,f),t_(f,e),n_(f,e)},wT={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},ET=(e,i,l,o)=>{const d=l;d.type="string";const{minimum:h,maximum:f,format:x,patterns:v,contentEncoding:b}=e._zod.bag;if(typeof h=="number"&&(d.minLength=h),typeof f=="number"&&(d.maxLength=f),x&&(d.format=wT[x]??x,d.format===""&&delete d.format,x==="time"&&delete d.format),b&&(d.contentEncoding=b),v&&v.size>0){const S=[...v];S.length===1?d.pattern=S[0].source:S.length>1&&(d.allOf=[...S.map(w=>({...i.target==="draft-07"||i.target==="draft-04"||i.target==="openapi-3.0"?{type:"string"}:{},pattern:w.source}))])}},kT=(e,i,l,o)=>{const d=l,{minimum:h,maximum:f,format:x,multipleOf:v,exclusiveMaximum:b,exclusiveMinimum:S}=e._zod.bag;typeof x=="string"&&x.includes("int")?d.type="integer":d.type="number",typeof S=="number"&&(i.target==="draft-04"||i.target==="openapi-3.0"?(d.minimum=S,d.exclusiveMinimum=!0):d.exclusiveMinimum=S),typeof h=="number"&&(d.minimum=h,typeof S=="number"&&i.target!=="draft-04"&&(S>=h?delete d.minimum:delete d.exclusiveMinimum)),typeof b=="number"&&(i.target==="draft-04"||i.target==="openapi-3.0"?(d.maximum=b,d.exclusiveMaximum=!0):d.exclusiveMaximum=b),typeof f=="number"&&(d.maximum=f,typeof b=="number"&&i.target!=="draft-04"&&(b<=f?delete d.maximum:delete d.exclusiveMaximum)),typeof v=="number"&&(d.multipleOf=v)},CT=(e,i,l,o)=>{l.type="boolean"},TT=(e,i,l,o)=>{i.target==="openapi-3.0"?(l.type="string",l.nullable=!0,l.enum=[null]):l.type="null"},AT=(e,i,l,o)=>{l.not={}},zT=(e,i,l,o)=>{},MT=(e,i,l,o)=>{const d=e._zod.def,h=Db(d.entries);h.every(f=>typeof f=="number")&&(l.type="number"),h.every(f=>typeof f=="string")&&(l.type="string"),l.enum=h},OT=(e,i,l,o)=>{if(i.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},DT=(e,i,l,o)=>{if(i.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},RT=(e,i,l,o)=>{const d=l,h=e._zod.def,{minimum:f,maximum:x}=e._zod.bag;typeof f=="number"&&(d.minItems=f),typeof x=="number"&&(d.maxItems=x),d.type="array",d.items=Bn(h.element,i,{...o,path:[...o.path,"items"]})},LT=(e,i,l,o)=>{const d=l,h=e._zod.def;d.type="object",d.properties={};const f=h.shape;for(const b in f)d.properties[b]=Bn(f[b],i,{...o,path:[...o.path,"properties",b]});const x=new Set(Object.keys(f)),v=new Set([...x].filter(b=>{const S=h.shape[b]._zod;return i.io==="input"?S.optin===void 0:S.optout===void 0}));v.size>0&&(d.required=Array.from(v)),h.catchall?._zod.def.type==="never"?d.additionalProperties=!1:h.catchall?h.catchall&&(d.additionalProperties=Bn(h.catchall,i,{...o,path:[...o.path,"additionalProperties"]})):i.io==="output"&&(d.additionalProperties=!1)},PT=(e,i,l,o)=>{const d=e._zod.def,h=d.inclusive===!1,f=d.options.map((x,v)=>Bn(x,i,{...o,path:[...o.path,h?"oneOf":"anyOf",v]}));h?l.oneOf=f:l.anyOf=f},IT=(e,i,l,o)=>{const d=e._zod.def,h=Bn(d.left,i,{...o,path:[...o.path,"allOf",0]}),f=Bn(d.right,i,{...o,path:[...o.path,"allOf",1]}),x=b=>"allOf"in b&&Object.keys(b).length===1,v=[...x(h)?h.allOf:[h],...x(f)?f.allOf:[f]];l.allOf=v},BT=(e,i,l,o)=>{const d=e._zod.def,h=Bn(d.innerType,i,o),f=i.seen.get(e);i.target==="openapi-3.0"?(f.ref=d.innerType,l.nullable=!0):l.anyOf=[h,{type:"null"}]},UT=(e,i,l,o)=>{const d=e._zod.def;Bn(d.innerType,i,o);const h=i.seen.get(e);h.ref=d.innerType},FT=(e,i,l,o)=>{const d=e._zod.def;Bn(d.innerType,i,o);const h=i.seen.get(e);h.ref=d.innerType,l.default=JSON.parse(JSON.stringify(d.defaultValue))},ZT=(e,i,l,o)=>{const d=e._zod.def;Bn(d.innerType,i,o);const h=i.seen.get(e);h.ref=d.innerType,i.io==="input"&&(l._prefault=JSON.parse(JSON.stringify(d.defaultValue)))},qT=(e,i,l,o)=>{const d=e._zod.def;Bn(d.innerType,i,o);const h=i.seen.get(e);h.ref=d.innerType;let f;try{f=d.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}l.default=f},HT=(e,i,l,o)=>{const d=e._zod.def,h=i.io==="input"?d.in._zod.def.type==="transform"?d.out:d.in:d.out;Bn(h,i,o);const f=i.seen.get(e);f.ref=h},KT=(e,i,l,o)=>{const d=e._zod.def;Bn(d.innerType,i,o);const h=i.seen.get(e);h.ref=d.innerType,l.readOnly=!0},a_=(e,i,l,o)=>{const d=e._zod.def;Bn(d.innerType,i,o);const h=i.seen.get(e);h.ref=d.innerType},QT=Ee("ZodISODateTime",(e,i)=>{Vk.init(e,i),sn.init(e,i)});function GT(e){return WC(QT,e)}const VT=Ee("ZodISODate",(e,i)=>{Yk.init(e,i),sn.init(e,i)});function YT(e){return eT(VT,e)}const $T=Ee("ZodISOTime",(e,i)=>{$k.init(e,i),sn.init(e,i)});function XT(e){return tT($T,e)}const JT=Ee("ZodISODuration",(e,i)=>{Xk.init(e,i),sn.init(e,i)});function WT(e){return nT(JT,e)}const eA=(e,i)=>{Bb.init(e,i),e.name="ZodError",Object.defineProperties(e,{format:{value:l=>B1(e,l)},flatten:{value:l=>I1(e,l)},addIssue:{value:l=>{e.issues.push(l),e.message=JSON.stringify(e.issues,kf,2)}},addIssues:{value:l=>{e.issues.push(...l),e.message=JSON.stringify(e.issues,kf,2)}},isEmpty:{get(){return e.issues.length===0}}})},Va=Ee("ZodError",eA,{Parent:Error}),tA=rp(Va),nA=lp(Va),aA=jd(Va),iA=Sd(Va),sA=Z1(Va),rA=q1(Va),lA=H1(Va),oA=K1(Va),uA=Q1(Va),cA=G1(Va),dA=V1(Va),mA=Y1(Va),hn=Ee("ZodType",(e,i)=>(mn.init(e,i),Object.assign(e["~standard"],{jsonSchema:{input:ud(e,"input"),output:ud(e,"output")}}),e.toJSONSchema=ST(e,{}),e.def=i,e.type=i.type,Object.defineProperty(e,"_def",{value:i}),e.check=(...l)=>e.clone(Ks(i,{checks:[...i.checks??[],...l.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]}),{parent:!0}),e.with=e.check,e.clone=(l,o)=>Qs(e,l,o),e.brand=()=>e,e.register=((l,o)=>(l.add(e,o),e)),e.parse=(l,o)=>tA(e,l,o,{callee:e.parse}),e.safeParse=(l,o)=>aA(e,l,o),e.parseAsync=async(l,o)=>nA(e,l,o,{callee:e.parseAsync}),e.safeParseAsync=async(l,o)=>iA(e,l,o),e.spa=e.safeParseAsync,e.encode=(l,o)=>sA(e,l,o),e.decode=(l,o)=>rA(e,l,o),e.encodeAsync=async(l,o)=>lA(e,l,o),e.decodeAsync=async(l,o)=>oA(e,l,o),e.safeEncode=(l,o)=>uA(e,l,o),e.safeDecode=(l,o)=>cA(e,l,o),e.safeEncodeAsync=async(l,o)=>dA(e,l,o),e.safeDecodeAsync=async(l,o)=>mA(e,l,o),e.refine=(l,o)=>e.check(sz(l,o)),e.superRefine=l=>e.check(rz(l)),e.overwrite=l=>e.check(Fl(l)),e.optional=()=>v0(e),e.exactOptional=()=>QA(e),e.nullable=()=>b0(e),e.nullish=()=>v0(b0(e)),e.nonoptional=l=>JA(e,l),e.array=()=>IA(e),e.or=l=>cd([e,l]),e.and=l=>ZA(e,l),e.transform=l=>_0(e,HA(l)),e.default=l=>YA(e,l),e.prefault=l=>XA(e,l),e.catch=l=>ez(e,l),e.pipe=l=>_0(e,l),e.readonly=()=>az(e),e.describe=l=>{const o=e.clone();return $o.add(o,{description:l}),o},Object.defineProperty(e,"description",{get(){return $o.get(e)?.description},configurable:!0}),e.meta=(...l)=>{if(l.length===0)return $o.get(e);const o=e.clone();return $o.add(o,l[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=l=>l(e),e)),i_=Ee("_ZodString",(e,i)=>{op.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(o,d,h)=>ET(e,o,d);const l=e._zod.bag;e.format=l.format??null,e.minLength=l.minimum??null,e.maxLength=l.maximum??null,e.regex=(...o)=>e.check(uT(...o)),e.includes=(...o)=>e.check(mT(...o)),e.startsWith=(...o)=>e.check(hT(...o)),e.endsWith=(...o)=>e.check(fT(...o)),e.min=(...o)=>e.check(od(...o)),e.max=(...o)=>e.check(Jb(...o)),e.length=(...o)=>e.check(Wb(...o)),e.nonempty=(...o)=>e.check(od(1,...o)),e.lowercase=o=>e.check(cT(o)),e.uppercase=o=>e.check(dT(o)),e.trim=()=>e.check(gT()),e.normalize=(...o)=>e.check(pT(...o)),e.toLowerCase=()=>e.check(xT()),e.toUpperCase=()=>e.check(yT()),e.slugify=()=>e.check(vT())}),hA=Ee("ZodString",(e,i)=>{op.init(e,i),i_.init(e,i),e.email=l=>e.check(MC(fA,l)),e.url=l=>e.check(PC(pA,l)),e.jwt=l=>e.check(JC(AA,l)),e.emoji=l=>e.check(IC(gA,l)),e.guid=l=>e.check(m0(g0,l)),e.uuid=l=>e.check(OC(Fc,l)),e.uuidv4=l=>e.check(DC(Fc,l)),e.uuidv6=l=>e.check(RC(Fc,l)),e.uuidv7=l=>e.check(LC(Fc,l)),e.nanoid=l=>e.check(BC(xA,l)),e.guid=l=>e.check(m0(g0,l)),e.cuid=l=>e.check(UC(yA,l)),e.cuid2=l=>e.check(FC(vA,l)),e.ulid=l=>e.check(ZC(bA,l)),e.base64=l=>e.check(YC(kA,l)),e.base64url=l=>e.check($C(CA,l)),e.xid=l=>e.check(qC(_A,l)),e.ksuid=l=>e.check(HC(NA,l)),e.ipv4=l=>e.check(KC(jA,l)),e.ipv6=l=>e.check(QC(SA,l)),e.cidrv4=l=>e.check(GC(wA,l)),e.cidrv6=l=>e.check(VC(EA,l)),e.e164=l=>e.check(XC(TA,l)),e.datetime=l=>e.check(GT(l)),e.date=l=>e.check(YT(l)),e.time=l=>e.check(XT(l)),e.duration=l=>e.check(WT(l))});function In(e){return zC(hA,e)}const sn=Ee("ZodStringFormat",(e,i)=>{en.init(e,i),i_.init(e,i)}),fA=Ee("ZodEmail",(e,i)=>{Bk.init(e,i),sn.init(e,i)}),g0=Ee("ZodGUID",(e,i)=>{Pk.init(e,i),sn.init(e,i)}),Fc=Ee("ZodUUID",(e,i)=>{Ik.init(e,i),sn.init(e,i)}),pA=Ee("ZodURL",(e,i)=>{Uk.init(e,i),sn.init(e,i)}),gA=Ee("ZodEmoji",(e,i)=>{Fk.init(e,i),sn.init(e,i)}),xA=Ee("ZodNanoID",(e,i)=>{Zk.init(e,i),sn.init(e,i)}),yA=Ee("ZodCUID",(e,i)=>{qk.init(e,i),sn.init(e,i)}),vA=Ee("ZodCUID2",(e,i)=>{Hk.init(e,i),sn.init(e,i)}),bA=Ee("ZodULID",(e,i)=>{Kk.init(e,i),sn.init(e,i)}),_A=Ee("ZodXID",(e,i)=>{Qk.init(e,i),sn.init(e,i)}),NA=Ee("ZodKSUID",(e,i)=>{Gk.init(e,i),sn.init(e,i)}),jA=Ee("ZodIPv4",(e,i)=>{Jk.init(e,i),sn.init(e,i)}),SA=Ee("ZodIPv6",(e,i)=>{Wk.init(e,i),sn.init(e,i)}),wA=Ee("ZodCIDRv4",(e,i)=>{eC.init(e,i),sn.init(e,i)}),EA=Ee("ZodCIDRv6",(e,i)=>{tC.init(e,i),sn.init(e,i)}),kA=Ee("ZodBase64",(e,i)=>{nC.init(e,i),sn.init(e,i)}),CA=Ee("ZodBase64URL",(e,i)=>{iC.init(e,i),sn.init(e,i)}),TA=Ee("ZodE164",(e,i)=>{sC.init(e,i),sn.init(e,i)}),AA=Ee("ZodJWT",(e,i)=>{lC.init(e,i),sn.init(e,i)}),s_=Ee("ZodNumber",(e,i)=>{Vb.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(o,d,h)=>kT(e,o,d),e.gt=(o,d)=>e.check(f0(o,d)),e.gte=(o,d)=>e.check(Dh(o,d)),e.min=(o,d)=>e.check(Dh(o,d)),e.lt=(o,d)=>e.check(h0(o,d)),e.lte=(o,d)=>e.check(Oh(o,d)),e.max=(o,d)=>e.check(Oh(o,d)),e.int=o=>e.check(x0(o)),e.safe=o=>e.check(x0(o)),e.positive=o=>e.check(f0(0,o)),e.nonnegative=o=>e.check(Dh(0,o)),e.negative=o=>e.check(h0(0,o)),e.nonpositive=o=>e.check(Oh(0,o)),e.multipleOf=(o,d)=>e.check(p0(o,d)),e.step=(o,d)=>e.check(p0(o,d)),e.finite=()=>e;const l=e._zod.bag;e.minValue=Math.max(l.minimum??Number.NEGATIVE_INFINITY,l.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(l.maximum??Number.POSITIVE_INFINITY,l.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(l.format??"").includes("int")||Number.isSafeInteger(l.multipleOf??.5),e.isFinite=!0,e.format=l.format??null}),zA=Ee("ZodNumberFormat",(e,i)=>{oC.init(e,i),s_.init(e,i)});function x0(e){return iT(zA,e)}const MA=Ee("ZodBoolean",(e,i)=>{uC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>CT(e,l,o)});function Ed(e){return sT(MA,e)}const OA=Ee("ZodNull",(e,i)=>{cC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>TT(e,l,o)});function Tf(e){return rT(OA,e)}const DA=Ee("ZodUnknown",(e,i)=>{dC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>zT()});function y0(){return lT(DA)}const RA=Ee("ZodNever",(e,i)=>{mC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>AT(e,l,o)});function LA(e){return oT(RA,e)}const PA=Ee("ZodArray",(e,i)=>{hC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>RT(e,l,o,d),e.element=i.element,e.min=(l,o)=>e.check(od(l,o)),e.nonempty=l=>e.check(od(1,l)),e.max=(l,o)=>e.check(Jb(l,o)),e.length=(l,o)=>e.check(Wb(l,o)),e.unwrap=()=>e.element});function IA(e,i){return bT(PA,e,i)}const BA=Ee("ZodObject",(e,i)=>{pC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>LT(e,l,o,d),Bt(e,"shape",()=>i.shape),e.keyof=()=>zf(Object.keys(e._zod.def.shape)),e.catchall=l=>e.clone({...e._zod.def,catchall:l}),e.passthrough=()=>e.clone({...e._zod.def,catchall:y0()}),e.loose=()=>e.clone({...e._zod.def,catchall:y0()}),e.strict=()=>e.clone({...e._zod.def,catchall:LA()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=l=>O1(e,l),e.safeExtend=l=>D1(e,l),e.merge=l=>R1(e,l),e.pick=l=>z1(e,l),e.omit=l=>M1(e,l),e.partial=(...l)=>L1(r_,e,l[0]),e.required=(...l)=>P1(l_,e,l[0])});function ka(e,i){const l={type:"object",shape:e??{},...We(i)};return new BA(l)}const UA=Ee("ZodUnion",(e,i)=>{gC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>PT(e,l,o,d),e.options=i.options});function cd(e,i){return new UA({type:"union",options:e,...We(i)})}const FA=Ee("ZodIntersection",(e,i)=>{xC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>IT(e,l,o,d)});function ZA(e,i){return new FA({type:"intersection",left:e,right:i})}const Af=Ee("ZodEnum",(e,i)=>{yC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(o,d,h)=>MT(e,o,d),e.enum=i.entries,e.options=Object.values(i.entries);const l=new Set(Object.keys(i.entries));e.extract=(o,d)=>{const h={};for(const f of o)if(l.has(f))h[f]=i.entries[f];else throw new Error(`Key ${f} not found in enum`);return new Af({...i,checks:[],...We(d),entries:h})},e.exclude=(o,d)=>{const h={...i.entries};for(const f of o)if(l.has(f))delete h[f];else throw new Error(`Key ${f} not found in enum`);return new Af({...i,checks:[],...We(d),entries:h})}});function zf(e,i){const l=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new Af({type:"enum",entries:l,...We(i)})}const qA=Ee("ZodTransform",(e,i)=>{vC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>DT(e,l),e._zod.parse=(l,o)=>{if(o.direction==="backward")throw new Mb(e.constructor.name);l.addIssue=h=>{if(typeof h=="string")l.issues.push(au(h,l.value,i));else{const f=h;f.fatal&&(f.continue=!1),f.code??(f.code="custom"),f.input??(f.input=l.value),f.inst??(f.inst=e),l.issues.push(au(f))}};const d=i.transform(l.value,l);return d instanceof Promise?d.then(h=>(l.value=h,l)):(l.value=d,l)}});function HA(e){return new qA({type:"transform",transform:e})}const r_=Ee("ZodOptional",(e,i)=>{Xb.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>a_(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function v0(e){return new r_({type:"optional",innerType:e})}const KA=Ee("ZodExactOptional",(e,i)=>{bC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>a_(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function QA(e){return new KA({type:"optional",innerType:e})}const GA=Ee("ZodNullable",(e,i)=>{_C.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>BT(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function b0(e){return new GA({type:"nullable",innerType:e})}const VA=Ee("ZodDefault",(e,i)=>{NC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>FT(e,l,o,d),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function YA(e,i){return new VA({type:"default",innerType:e,get defaultValue(){return typeof i=="function"?i():Lb(i)}})}const $A=Ee("ZodPrefault",(e,i)=>{jC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>ZT(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function XA(e,i){return new $A({type:"prefault",innerType:e,get defaultValue(){return typeof i=="function"?i():Lb(i)}})}const l_=Ee("ZodNonOptional",(e,i)=>{SC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>UT(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function JA(e,i){return new l_({type:"nonoptional",innerType:e,...We(i)})}const WA=Ee("ZodCatch",(e,i)=>{wC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>qT(e,l,o,d),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function ez(e,i){return new WA({type:"catch",innerType:e,catchValue:typeof i=="function"?i:()=>i})}const tz=Ee("ZodPipe",(e,i)=>{EC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>HT(e,l,o,d),e.in=i.in,e.out=i.out});function _0(e,i){return new tz({type:"pipe",in:e,out:i})}const nz=Ee("ZodReadonly",(e,i)=>{kC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>KT(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function az(e){return new nz({type:"readonly",innerType:e})}const iz=Ee("ZodCustom",(e,i)=>{CC.init(e,i),hn.init(e,i),e._zod.processJSONSchema=(l,o,d)=>OT(e,l)});function sz(e,i={}){return _T(iz,e,i)}function rz(e){return NT(e)}function _n(e){return aT(s_,e)}const lz=ka({employee_id:_n().int().positive(),expires_in_minutes:_n().int().positive().max(1440)});function Zc(e){return e?new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"short"}).format(new Date(e)):"-"}function N0(e,i){return`${new Intl.DateTimeFormat("tr-TR",{month:"long"}).format(new Date(Date.UTC(e,i-1,1)))} ${e}`}function oz(e){return e==="FINISHED"?"status-badge status-badge-ok":e==="IN_PROGRESS"?"status-badge status-badge-pending":"status-badge status-badge-neutral"}function uz(){const e=Un(),[i,l]=_.useState(""),[o,d]=_.useState("60"),[h,f]=_.useState(null),[x,v]=_.useState(null),b=Be({queryKey:["departments"],queryFn:Hs}),S=Be({queryKey:["employees"],queryFn:()=>ui({status:"active"})}),w=Be({queryKey:["devices"],queryFn:Nb}),T=Be({queryKey:["leaves","dashboard"],queryFn:()=>Sb({})}),z=Be({queryKey:["attendance-events","dashboard"],queryFn:()=>ep({limit:8})}),k=Be({queryKey:["dashboard-employee-snapshot",i],queryFn:()=>jb({employee_id:Number(i)}),enabled:!!i,staleTime:2e4}),A=Xe({mutationFn:wb,onSuccess:q=>{f({token:q.token,invite_url:q.invite_url}),v(null),e.invalidateQueries({queryKey:["devices"]})},onError:q=>{v(r1(q,"Claim token olusturulamadi."))}}),M=()=>{f(null),v(null);const q=lz.safeParse({employee_id:i,expires_in_minutes:o});if(!q.success){v(q.error.issues[0]?.message??"Form alanlarini kontrol et.");return}A.mutate(q.data)},I=b.data??[],R=S.data??[],D=w.data??[],K=T.data??[],G=z.data??[],V=_.useMemo(()=>R.find(q=>String(q.id)===i)??null,[R,i]);return b.isLoading||S.isLoading||w.isLoading||T.isLoading||z.isLoading?a.jsx(Ot,{}):b.isError||S.isError||w.isError||T.isError||z.isError?a.jsx(St,{message:"Dashboard verileri alinamadi."}):a.jsxs("div",{className:"space-y-6",children:[a.jsx(kn,{title:"Genel Bakis",description:"Calisan odakli claim token operasyonu ve anlik puantaj gorunumu."}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[a.jsxs(Oe,{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Departman"}),a.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:I.length})]}),a.jsxs(Oe,{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Calisan"}),a.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:R.length})]}),a.jsxs(Oe,{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Cihaz"}),a.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:D.length})]}),a.jsxs(Oe,{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Izin Kaydi"}),a.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:K.length})]})]}),a.jsxs("div",{className:"grid gap-4 xl:grid-cols-[1.05fr_1.3fr]",children:[a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Claim Token Uretimi"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Calisan adi veya ID secip employee claim URL olustur."}),a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsx(Ka,{label:"Calisan",employees:R,value:i,onChange:l,placeholder:"Calisan adi veya #ID",helperText:"Tek bir calisan secildiginde dashboard ozet kartlari otomatik dolar."}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Token suresi (dakika)",a.jsx("input",{value:o,onChange:q=>d(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"60"})]})]}),V?a.jsxs("div",{className:"mt-3 rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:[a.jsxs("p",{children:["Secili: #",V.id," - ",V.full_name]}),a.jsxs("p",{children:["Departman: ",V.department_id??"-"]})]}):null,a.jsx("button",{type:"button",onClick:M,disabled:A.isPending||!i,className:"mt-4 rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:A.isPending?"Olusturuluyor...":"Claim Token Olustur"}),h?a.jsxs("div",{className:"mt-3 rounded-lg border border-emerald-200 bg-emerald-50 p-3 text-sm text-emerald-700",children:[a.jsxs("p",{className:"font-semibold",children:["Token: ",h.token]}),a.jsxs("p",{className:"mt-1 break-all",children:["URL: ",h.invite_url]})]}):null,x?a.jsx("div",{className:"form-validation",children:x}):null]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Calisan Canli Ozet"}),i?null:a.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Bir calisan secildiginde bu ay/gecen ay mesai, cihaz ve konum bilgisi gorunur."}),i&&k.isLoading?a.jsx(Ot,{label:"Calisan ozeti yukleniyor..."}):null,i&&k.isError?a.jsx(St,{message:"Calisan ozeti alinamadi."}):null,k.data?a.jsxs("div",{className:"mt-3 space-y-4 text-sm",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:oz(k.data.today_status),children:k.data.today_status}),a.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs text-slate-700",children:["Aktif cihaz: ",k.data.active_devices,"/",k.data.total_devices]}),a.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs text-slate-700",children:["Son guncelleme: ",Zc(k.data.generated_at_utc)]})]}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:N0(k.data.current_month.year,k.data.current_month.month)}),a.jsxs("p",{className:"mt-2 text-xs text-slate-600",children:["Toplam net sure: ",a.jsx(Pe,{minutes:k.data.current_month.worked_minutes})]}),a.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Plan ustu sure: ",a.jsx(Pe,{minutes:k.data.current_month.plan_overtime_minutes})]}),a.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla sure: ",a.jsx(Pe,{minutes:k.data.current_month.extra_work_minutes})]}),a.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla mesai: ",a.jsx(Pe,{minutes:k.data.current_month.overtime_minutes})]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:N0(k.data.previous_month.year,k.data.previous_month.month)}),a.jsxs("p",{className:"mt-2 text-xs text-slate-600",children:["Toplam net sure: ",a.jsx(Pe,{minutes:k.data.previous_month.worked_minutes})]}),a.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Plan ustu sure: ",a.jsx(Pe,{minutes:k.data.previous_month.plan_overtime_minutes})]}),a.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla sure: ",a.jsx(Pe,{minutes:k.data.previous_month.extra_work_minutes})]}),a.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla mesai: ",a.jsx(Pe,{minutes:k.data.previous_month.overtime_minutes})]})]})]}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Son Puantaj Olayi"}),k.data.last_event?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"mt-2 text-xs text-slate-700",children:["Tip: ",k.data.last_event.event_type]}),a.jsxs("p",{className:"mt-1 text-xs text-slate-700",children:["Zaman: ",Zc(k.data.last_event.ts_utc)]}),a.jsxs("p",{className:"mt-1 text-xs text-slate-700",children:["Konum: ",k.data.last_event.location_status]})]}):a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Kayit bulunamadi."})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Son Konum"}),k.data.latest_location?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"mt-2 text-xs text-slate-700",children:["Lat/Lon: ",k.data.latest_location.lat.toFixed(6),", ",k.data.latest_location.lon.toFixed(6)]}),a.jsxs("p",{className:"mt-1 text-xs text-slate-700",children:["Zaman: ",Zc(k.data.latest_location.ts_utc)]})]}):a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Konum verisi yok."})]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Cihazlar"}),k.data.devices.length===0?a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Cihaz kaydi bulunamadi."}):a.jsx("div",{className:"mt-2 space-y-1 text-xs text-slate-700",children:k.data.devices.slice(0,8).map(q=>a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded border border-slate-100 px-2 py-1",children:[a.jsxs("span",{children:["#",q.id," - ",q.device_fingerprint]}),a.jsx("span",{className:q.is_active?"status-badge status-badge-ok":"status-badge status-badge-danger",children:q.is_active?"AKTIF":"PASIF"})]},q.id))})]})]}):null]})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Son Attendance Eventleri"}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"ID"}),a.jsx("th",{className:"py-2",children:"Calisan"}),a.jsx("th",{className:"py-2",children:"Tip"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2",children:"Zaman"})]})}),a.jsx("tbody",{children:G.map(q=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:q.id}),a.jsx("td",{className:"py-2",children:q.employee_id}),a.jsx("td",{className:"py-2",children:q.type}),a.jsx("td",{className:"py-2",children:q.location_status}),a.jsx("td",{className:"py-2",children:Zc(q.ts_utc)})]},q.id))})]})})]})]})}function cz(e,i){const l=window.URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=i,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l)}function dz(){const e=new Date,{pushToast:i}=Fn(),l={year:String(e.getFullYear()),month:String(e.getMonth()+1),departmentId:"",includeInactive:!1},[o,d]=_.useState(l),[h,f]=_.useState(l),[x,v]=_.useState(!1),b=Be({queryKey:["departments"],queryFn:Hs}),S=Number(h.year),w=Number(h.month),T=Number(h.departmentId),z=Number.isFinite(S)&&S>0&&Number.isFinite(w)&&w>=1&&w<=12,k=Be({queryKey:["department-summary",S,w,h.departmentId||"all",h.includeInactive?"with-inactive":"active-only"],queryFn:()=>qE({year:S,month:w,department_id:Number.isFinite(T)&&T>0?T:void 0,include_inactive:h.includeInactive}),enabled:z}),A=k.data??[],M=_.useMemo(()=>A.reduce((G,V)=>(G.worked+=V.worked_minutes,G.planOvertime+=V.plan_overtime_minutes,G.legalExtra+=V.legal_extra_work_minutes,G.legalOvertime+=V.legal_overtime_minutes,G.employeeCount+=V.employee_count,G),{worked:0,planOvertime:0,legalExtra:0,legalOvertime:0,employeeCount:0}),[A]),I=_.useMemo(()=>{const G=[`Yl: ${h.year}`,`Ay: ${h.month}`];if(h.departmentId){const V=b.data?.find(q=>q.id===Number(h.departmentId));G.push(`Departman: ${V?.name??h.departmentId}`)}return h.includeInactive&&G.push("Arivdekiler dahil"),G},[h,b.data]),R=()=>f({...o}),D=()=>{d(l),f(l)},K=async()=>{if(!z){i({variant:"error",title:"Filtre hatas",description:"Excel indirmek iin geerli yl ve ay sein."});return}try{v(!0);const G=Number.isFinite(T)&&T>0?await XE({department_id:T,year:S,month:w,include_inactive:h.includeInactive}):await JE({year:S,month:w,include_inactive:h.includeInactive}),V=Number.isFinite(T)&&T>0?`department-${T}`:"all";cz(G,`puantaj-${V}-${S}-${String(w).padStart(2,"0")}.xlsx`)}catch(G){i({variant:"error",title:"Excel indirilemedi",description:Le(G,"Dosya oluturulamad.").message})}finally{v(!1)}};return a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"Departman Aylk zeti",description:"Departman baznda aylk toplam alma, plan st sre ve yasal fazla mesai deerlerini karlatrn.",action:a.jsx("button",{type:"button",onClick:()=>{K()},disabled:x,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:x?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"inline-spinner inline-spinner-dark","aria-hidden":"true"}),"Hazrlanyor..."]}):"Excel ndir"})}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),a.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-4",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Yl",a.jsx("input",{type:"number",value:o.year,onChange:G=>d(V=>({...V,year:G.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",a.jsx("input",{type:"number",value:o.month,onChange:G=>d(V=>({...V,month:G.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Departman",a.jsxs("select",{value:o.departmentId,onChange:G=>d(V=>({...V,departmentId:G.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",disabled:b.isLoading,children:[a.jsx("option",{value:"",children:"Tm"}),(b.data??[]).map(G=>a.jsxs("option",{value:G.id,children:["#",G.id," - ",G.name]},G.id))]})]})]}),a.jsxs("label",{className:"mt-3 inline-flex items-center gap-2 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:o.includeInactive,onChange:G=>d(V=>({...V,includeInactive:G.target.checked}))}),"Arivdeki alanlar dahil et"]}),a.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[a.jsx("button",{type:"button",onClick:R,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),a.jsx("button",{type:"button",onClick:D,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]}),a.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:I.map(G=>a.jsx("span",{className:"inline-flex rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:G},G))})]}),z?null:a.jsx(St,{message:"Yl ve ay deerleri geersiz."}),k.isLoading?a.jsx(Ot,{}):null,k.isError?a.jsx(St,{message:Le(k.error,"Departman zeti alnamad.").message}):null,!k.isLoading&&!k.isError?a.jsxs(a.Fragment,{children:[a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Toplamlar"}),a.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 xl:grid-cols-5",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Toplam alma"}),a.jsx("p",{className:"text-lg font-semibold",children:a.jsx(Pe,{minutes:M.worked})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Plan st Sre"}),a.jsx("p",{className:"text-lg font-semibold",children:a.jsx(Pe,{minutes:M.planOvertime})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Yasal Fazla Sre"}),a.jsx("p",{className:"text-lg font-semibold",children:a.jsx(Pe,{minutes:M.legalExtra})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Yasal Fazla Mesai"}),a.jsx("p",{className:"text-lg font-semibold",children:a.jsx(Pe,{minutes:M.legalOvertime})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Toplam alan Says"}),a.jsx("p",{className:"text-lg font-semibold",children:M.employeeCount})]})]})]}),A.length===0?a.jsx(Oe,{children:a.jsx("p",{className:"text-sm text-slate-600",children:"Seilen filtrede departman zeti bulunamad."})}):a.jsx(Oe,{children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Departman"}),a.jsx("th",{className:"py-2",children:"alan Says"}),a.jsx("th",{className:"py-2",children:"Toplam alma"}),a.jsx("th",{className:"py-2",children:"Plan st"}),a.jsx("th",{className:"py-2",children:"Yasal Fazla Sre"}),a.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"})]})}),a.jsx("tbody",{children:A.map(G=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsxs("td",{className:"py-2",children:["#",G.department_id," - ",G.department_name]}),a.jsx("td",{className:"py-2",children:G.employee_count}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:G.worked_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:G.plan_overtime_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:G.legal_extra_work_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:G.legal_overtime_minutes})})]},G.department_id))})]})})})]}):null]})}function ts({value:e,onChange:i,placeholder:l="Isme gore ara..."}){return a.jsxs("label",{className:"block text-sm text-slate-700",children:["Ara",a.jsx("input",{value:e,onChange:o=>i(o.target.value),placeholder:l,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring"})]})}const j0=ka({name:In().min(2,"Departman adi en az 2 karakter olmali.").max(255),region_id:cd([_n().int().positive(),Tf()])});function S0(e){if(Gt.isAxiosError(e)&&e.response?.status===409)return"Bu departman adi zaten mevcut. Lutfen farkli bir ad girin.";const i=Le(e,"Departman olusturulamadi.");return i.message.toLowerCase().includes("department name already exists")?"Bu departman adi zaten mevcut. Lutfen farkli bir ad girin.":i.message}function mz(){const e=Un(),{pushToast:i}=Fn(),[l,o]=_.useState(""),[d,h]=_.useState(""),[f,x]=_.useState(""),[v,b]=_.useState(!1),[S,w]=_.useState(""),[T,z]=_.useState(null),[k,A]=_.useState(""),[M,I]=_.useState(""),[R,D]=_.useState(null),K=Be({queryKey:["departments",S],queryFn:()=>X2(S?{region_id:Number(S)}:void 0)}),G=Be({queryKey:["regions","departments-page"],queryFn:()=>bd({include_inactive:!0})}),V=Xe({mutationFn:J2,onSuccess:ne=>{o(""),h(""),D(null),b(!1),i({variant:"success",title:"Departman olusturuldu",description:`${ne.name} basariyla eklendi.`}),e.invalidateQueries({queryKey:["departments"]})},onError:ne=>{const W=S0(ne);D(W),i({variant:"error",title:"Departman olusturulamadi",description:W})}}),q=Xe({mutationFn:({departmentId:ne,name:W,regionIdValue:B})=>W2(ne,{name:W,region_id:B}),onSuccess:ne=>{D(null),z(null),A(""),I(""),i({variant:"success",title:"Departman guncellendi",description:`${ne.name} basariyla guncellendi.`}),e.invalidateQueries({queryKey:["departments"]})},onError:ne=>{const W=S0(ne);D(W),i({variant:"error",title:"Departman guncellenemedi",description:W})}}),Q=ne=>{ne.preventDefault(),D(null);const W=d.trim()===""?null:Number(d),B=j0.safeParse({name:l,region_id:W});if(!B.success){const X=B.error.issues[0]?.message??"Departman alanlarini kontrol edin.";D(X),i({variant:"error",title:"Form hatasi",description:X});return}V.mutate({name:B.data.name,region_id:B.data.region_id})},ae=ne=>{if(ne.preventDefault(),D(null),!T)return;const W=M.trim()===""?null:Number(M),B=j0.safeParse({name:k,region_id:W});if(!B.success){const X=B.error.issues[0]?.message??"Departman alanlarini kontrol edin.";D(X),i({variant:"error",title:"Form hatasi",description:X});return}q.mutate({departmentId:T,name:B.data.name,regionIdValue:B.data.region_id})},ve=K.data??[],ee=G.data??[],ue=_.useMemo(()=>new Map(ee.map(ne=>[ne.id,ne.name])),[ee]),_e=_.useMemo(()=>{const ne=f.trim().toLowerCase();return ne?ve.filter(W=>W.name.toLowerCase().includes(ne)):ve},[ve,f]);return a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"Departmanlar",description:"Departman kayitlarini bolge bazli olarak yonetin.",action:a.jsx("button",{type:"button",onClick:()=>b(ne=>!ne),className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Yeni Departman"})}),v?a.jsxs(Oe,{children:[a.jsxs("form",{onSubmit:Q,className:"grid gap-3 md:grid-cols-3 md:items-end",children:[a.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Departman adi",a.jsx("input",{value:l,onChange:ne=>o(ne.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Insan Kaynaklari"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge",a.jsxs("select",{value:d,onChange:ne=>h(ne.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Bolge yok"}),ee.map(ne=>a.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),a.jsxs("div",{className:"flex gap-2 md:col-span-3",children:[a.jsx("button",{type:"submit",disabled:V.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:V.isPending?"Kaydediliyor...":"Kaydet"}),a.jsx("button",{type:"button",onClick:()=>{b(!1),D(null)},className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),R?a.jsx("div",{className:"form-validation",children:R}):null]}):null,T?a.jsxs(Oe,{children:[a.jsxs("form",{onSubmit:ae,className:"grid gap-3 md:grid-cols-3 md:items-end",children:[a.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Departman adi",a.jsx("input",{value:k,onChange:ne=>A(ne.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge",a.jsxs("select",{value:M,onChange:ne=>I(ne.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Bolge yok"}),ee.map(ne=>a.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),a.jsxs("div",{className:"flex gap-2 md:col-span-3",children:[a.jsx("button",{type:"submit",disabled:q.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:q.isPending?"Guncelleniyor...":"Guncelle"}),a.jsx("button",{type:"button",onClick:()=>{z(null),A(""),I(""),D(null)},className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),R?a.jsx("div",{className:"form-validation",children:R}):null]}):null,K.isLoading||G.isLoading?a.jsx(Ot,{}):null,K.isError||G.isError?a.jsx(St,{message:"Departman verileri alinamadi."}):null,!K.isLoading&&!K.isError&&!G.isLoading&&!G.isError?a.jsxs(Oe,{children:[a.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-3",children:[a.jsx(ts,{value:f,onChange:x,placeholder:"Departman adina gore ara..."}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge filtresi",a.jsxs("select",{value:S,onChange:ne=>w(ne.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Tum bolgeler"}),ee.map(ne=>a.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Departman ID"}),a.jsx("th",{className:"py-2",children:"Departman Adi"}),a.jsx("th",{className:"py-2",children:"Bolge"}),a.jsx("th",{className:"py-2",children:"Islem"})]})}),a.jsx("tbody",{children:_e.map(ne=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:ne.id}),a.jsx("td",{className:"py-2",children:ne.name}),a.jsx("td",{className:"py-2",children:ne.region_name??(ne.region_id?ue.get(ne.region_id):"-")??"-"}),a.jsx("td",{className:"py-2",children:a.jsx("button",{type:"button",onClick:()=>{z(ne.id),A(ne.name),I(ne.region_id?String(ne.region_id):""),D(null)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"})})]},ne.id))})]})}),_e.length===0?a.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Arama kriterine uygun departman bulunamadi."}):null]}):null]})}function qs({value:e}){const i=e.toUpperCase();return i==="OK"||i==="AKTIF"||i==="APPROVED"?a.jsx("span",{className:"status-badge status-badge-ok",children:e}):i==="INCOMPLETE"?a.jsx("span",{className:"status-badge status-badge-incomplete",children:"INCOMPLETE"}):i==="LEAVE"?a.jsx("span",{className:"status-badge status-badge-leave",children:"LEAVE"}):i==="OFF"?a.jsx("span",{className:"status-badge status-badge-neutral",children:"OFF"}):i==="PENDING"?a.jsx("span",{className:"status-badge status-badge-pending",children:"PENDING"}):i==="REJECTED"||i==="PASIF"?a.jsx("span",{className:"status-badge status-badge-danger",children:e}):a.jsx("span",{className:"status-badge status-badge-neutral",children:e})}function Rh(e){return e?new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"short"}).format(new Date(e)):"-"}function hz(e){return e==="ACTIVE"?"Aktif":"Kullanildi/Suresi Doldu"}function fz(){const e=Un(),{pushToast:i}=Fn(),[l,o]=_.useState(""),[d,h]=_.useState(""),[f,x]=_.useState(!0),[v,b]=_.useState(""),[S,w]=_.useState(1),[T,z]=_.useState(50),[k,A]=_.useState(null),[M,I]=_.useState(null),R=l?Number(l):void 0,D=R?0:(S-1)*T,K=Be({queryKey:["employee-device-overview-summary",R??null,d,f,v,S,T],queryFn:()=>Ef({employee_id:R,region_id:d?Number(d):void 0,include_inactive:f,q:v.trim()||void 0,offset:D,limit:R?1:T,device_limit:1})}),G=Be({queryKey:["employee-device-overview-detail",k],enabled:k!==null,queryFn:()=>Ef({employee_id:k??void 0,include_inactive:!0,include_recovery_secrets:!0,offset:0,limit:1,device_limit:100})}),V=Be({queryKey:["employees","all-for-devices"],queryFn:()=>ui({include_inactive:!0,status:"all"})}),q=Be({queryKey:["regions","devices-page"],queryFn:()=>bd({include_inactive:!0})}),Q=Xe({mutationFn:({deviceId:W,isActive:B})=>UE(W,{is_active:B}),onSuccess:W=>{i({variant:"success",title:W.is_active?"Cihaz aktif edildi":"Cihaz pasife alnd",description:`Cihaz #${W.id} durumu gncellendi.`}),e.invalidateQueries({queryKey:["employee-device-overview-summary"]}),e.invalidateQueries({queryKey:["employee-device-overview-detail"]})},onError:W=>{i({variant:"error",title:"Cihaz durumu gncellenemedi",description:Le(W,"lem baarsz.").message})}}),ae=V.data??[],ve=q.data??[],ee=K.data??[],ue=G.data?.[0],_e=!R&&ee.length===T,ne=!R&&S>1;return K.isLoading||V.isLoading||q.isLoading?a.jsx(Ot,{}):K.isError?a.jsx(St,{message:Le(K.error,"Cihaz verisi alnamad.").message}):V.isError?a.jsx(St,{message:Le(V.error,"alan listesi alnamad.").message}):q.isError?a.jsx(St,{message:Le(q.error,"Bolge listesi alinamadi.").message}):a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"Cihazlar ve Token Takibi",description:"Youn kullanm iin optimize edilmi liste grnm. Satrdan detay ap cihazlar ynetin."}),a.jsxs(Oe,{children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-5 md:items-end",children:[a.jsx(Ka,{label:"alan filtresi",employees:ae,value:l,onChange:W=>{o(W),w(1),A(null)},emptyLabel:"Tm",helperText:"Ad-soyad veya ID ile filtreleyin."}),a.jsxs("label",{className:"text-sm text-slate-700",children:["zet arama",a.jsx("input",{type:"text",value:v,onChange:W=>{b(W.target.value),w(1),A(null)},placeholder:"alan ad veya ID",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Sayfa boyutu",a.jsxs("select",{value:T,onChange:W=>{z(Number(W.target.value)),w(1),A(null)},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:20,children:"20"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"})]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge filtresi",a.jsxs("select",{value:d,onChange:W=>{h(W.target.value),w(1),A(null)},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Tum bolgeler"}),ve.map(W=>a.jsx("option",{value:W.id,children:W.name},W.id))]})]}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:f,onChange:W=>{x(W.target.checked),w(1),A(null)}}),"Pasif alanlar gster"]})]}),R?null:a.jsxs("div",{className:"mt-3 flex items-center justify-end gap-2",children:[a.jsx("button",{type:"button",disabled:!ne,onClick:()=>{w(W=>Math.max(1,W-1)),A(null)},className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"nceki"}),a.jsxs("span",{className:"text-xs text-slate-500",children:["Sayfa ",S]}),a.jsx("button",{type:"button",disabled:!_e,onClick:()=>{w(W=>W+1),A(null)},className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}),a.jsxs(Oe,{children:[a.jsx("div",{className:"max-h-[68vh] overflow-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"sticky top-0 z-10 bg-white text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-2",children:"alan"}),a.jsx("th",{className:"px-2 py-2",children:"Departman"}),a.jsx("th",{className:"px-2 py-2",children:"Durum"}),a.jsx("th",{className:"px-2 py-2",children:"Cihaz"}),a.jsx("th",{className:"px-2 py-2",children:"Token"}),a.jsx("th",{className:"px-2 py-2 text-right",children:"lem"})]})}),a.jsx("tbody",{children:ee.map(W=>{const B=k===W.employee_id;return a.jsxs(_.Fragment,{children:[a.jsxs("tr",{className:"border-t border-slate-100 align-top hover:bg-slate-50/60",children:[a.jsx("td",{className:"px-2 py-2",children:a.jsxs("div",{className:"font-medium text-slate-900",children:["#",W.employee_id," - ",W.employee_name]})}),a.jsx("td",{className:"px-2 py-2 text-xs text-slate-600",children:W.department_name??W.department_id??"-"}),a.jsx("td",{className:"px-2 py-2",children:a.jsx(qs,{value:W.is_employee_active?"Aktif":"Pasif"})}),a.jsxs("td",{className:"px-2 py-2 text-xs text-slate-700",children:[a.jsx("span",{className:"font-semibold",children:W.active_devices})," aktif / ",W.total_devices," toplam"]}),a.jsxs("td",{className:"px-2 py-2 text-xs text-slate-700",children:["K:",W.token_used," B:",W.token_pending," D:",W.token_expired," T:",W.token_total]}),a.jsx("td",{className:"px-2 py-2 text-right",children:a.jsx("button",{type:"button",onClick:()=>{A(X=>X===W.employee_id?null:W.employee_id)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:B?"Kapat":"Cihazlar Ynet"})})]}),B?a.jsx("tr",{className:"border-t border-slate-100 bg-slate-50/70",children:a.jsx("td",{colSpan:6,className:"px-2 py-3",children:G.isLoading?a.jsx("p",{className:"text-xs text-slate-500",children:"Cihaz listesi ykleniyor..."}):G.isError?a.jsx("p",{className:"text-xs text-rose-700",children:"Cihaz detaylar alnamad."}):ue?a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"min-w-full text-left text-xs",children:[a.jsx("thead",{className:"uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Cihaz ID"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2",children:"Fingerprint"}),a.jsx("th",{className:"py-2",children:"Recovery"}),a.jsx("th",{className:"py-2",children:"Oluturulma"}),a.jsx("th",{className:"py-2 text-right",children:"lem"})]})}),a.jsx("tbody",{children:ue.devices.map(X=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:X.id}),a.jsx("td",{className:"py-2",children:a.jsx(qs,{value:X.is_active?"Aktif":"Pasif"})}),a.jsx("td",{className:"py-2 font-mono",children:X.device_fingerprint}),a.jsx("td",{className:"py-2 text-[11px] text-slate-700",children:X.recovery_ready?a.jsxs("span",{className:"rounded-full bg-emerald-100 px-2 py-1 font-semibold text-emerald-700",children:["Hazir (",X.recovery_code_active_count,")"]}):a.jsx("span",{className:"rounded-full bg-amber-100 px-2 py-1 font-semibold text-amber-700",children:"Kurulu Degil"})}),a.jsx("td",{className:"py-2",children:Rh(X.created_at)}),a.jsx("td",{className:"py-2 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>I(X),className:"rounded-lg border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",children:"Detay"}),a.jsx("button",{type:"button",disabled:Q.isPending,onClick:()=>Q.mutate({deviceId:X.id,isActive:!X.is_active}),className:`rounded-lg px-2 py-1 text-[11px] font-semibold text-white ${X.is_active?"bg-rose-600 hover:bg-rose-700":"bg-emerald-600 hover:bg-emerald-700"} disabled:cursor-not-allowed disabled:opacity-60`,children:X.is_active?"Pasife Al":"Aktif Et"})]})})]},X.id))})]}),ue.has_more_devices?a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Bu alan iin daha fazla cihaz var. lk 100 cihaz gsteriliyor."}):null,ue.devices.length===0?a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Bu alana bal cihaz yok."}):null]}):a.jsx("p",{className:"text-xs text-slate-500",children:"Cihaz detay bulunamad."})})}):null]},W.employee_id)})})]})}),ee.length===0?a.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Seilen filtreye uygun alan veya cihaz kayd yok."}):null]}),a.jsx(Zs,{open:M!==null,title:M?`Cihaz #${M.id} Recovery Detayi`:"Recovery Detayi",onClose:()=>I(null),children:M?a.jsxs("div",{className:"space-y-3 text-sm",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Fingerprint"}),a.jsx("p",{className:"mt-1 break-all font-mono text-xs text-slate-800",children:M.device_fingerprint})]}),a.jsxs("div",{className:"grid gap-2 rounded-lg border border-slate-200 p-3 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recovery Durumu"}),a.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:M.recovery_ready?"Hazir":"Kurulu Degil"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Aktif Kod"}),a.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:M.recovery_code_active_count})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"PIN Son Guncelleme"}),a.jsx("p",{className:"mt-1 text-slate-800",children:Rh(M.recovery_pin_updated_at)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Kod Son Gecerlilik"}),a.jsx("p",{className:"mt-1 text-slate-800",children:Rh(M.recovery_expires_at)})]})]}),a.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 p-3",children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-rose-700",children:"Recovery PIN"}),a.jsx("p",{className:"mt-1 font-mono text-lg font-semibold text-rose-900",children:M.recovery_pin_plain??"-"})]}),M.recovery_code_entries.length>0?a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recovery Kodlari"}),a.jsx("div",{className:"mt-2 space-y-2",children:M.recovery_code_entries.map(W=>a.jsxs("div",{className:"flex items-center justify-between rounded border border-slate-200 px-3 py-2",children:[a.jsx("span",{className:"font-mono text-slate-900",children:W.code}),a.jsx("span",{className:`rounded-full px-2 py-1 text-[11px] font-semibold ${W.status==="ACTIVE"?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:hz(W.status)})]},`${M.id}-${W.code}`))})]}):a.jsx("p",{className:"text-xs text-slate-500",children:"Bu cihaz icin kayitli recovery kodu bulunamadi."})]}):null})]})}function pz(){const e=Un(),{pushToast:i}=Fn(),l=Be({queryKey:["compliance-settings"],queryFn:GE}),[o,d]=_.useState({name:"TR_DEFAULT",weekly_normal_minutes_default:2700,daily_max_minutes:660,enforce_min_break_rules:!1,night_work_max_minutes_default:450,night_work_exceptions_note_enabled:!0,overtime_annual_cap_minutes:16200,overtime_premium:1.5,extra_work_premium:1.25,overtime_rounding_mode:"OFF"});_.useEffect(()=>{l.data&&d({name:l.data.name,weekly_normal_minutes_default:l.data.weekly_normal_minutes_default,daily_max_minutes:l.data.daily_max_minutes,enforce_min_break_rules:l.data.enforce_min_break_rules,night_work_max_minutes_default:l.data.night_work_max_minutes_default,night_work_exceptions_note_enabled:l.data.night_work_exceptions_note_enabled,overtime_annual_cap_minutes:l.data.overtime_annual_cap_minutes,overtime_premium:l.data.overtime_premium,extra_work_premium:l.data.extra_work_premium,overtime_rounding_mode:l.data.overtime_rounding_mode})},[l.data]);const h=Xe({mutationFn:VE,onSuccess:()=>{i({variant:"success",title:"Uyumluluk ayarlari guncellendi",description:"Yasal puantaj hesaplama parametreleri kaydedildi."}),e.invalidateQueries({queryKey:["compliance-settings"]}),e.invalidateQueries({queryKey:["employee-monthly"]})},onError:f=>{i({variant:"error",title:"Kayit hatasi",description:Le(f,"Ayarlar kaydedilemedi.").message})}});return l.isLoading?a.jsx(Ot,{}):l.isError?a.jsx(St,{message:Le(l.error,"Uyumluluk ayarlari alinamadi.").message}):a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"Uyumluluk Ayarlar",description:"Turk is kanunu varsayimlarini yonetmek iin bu ayarlari kullanin."}),a.jsx(Oe,{children:a.jsxs("form",{className:"grid gap-3 md:grid-cols-2",onSubmit:f=>{f.preventDefault(),h.mutate(o)},children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Profil Adi",a.jsx("input",{value:o.name,onChange:f=>d(x=>({...x,name:f.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Haftalik Normal Sure (dk)",a.jsx("input",{type:"number",min:1,value:o.weekly_normal_minutes_default,onChange:f=>d(x=>({...x,weekly_normal_minutes_default:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Gnlk Azami Sure (dk)",a.jsx("input",{type:"number",min:1,value:o.daily_max_minutes,onChange:f=>d(x=>({...x,daily_max_minutes:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Gece Azami Sure (dk)",a.jsx("input",{type:"number",min:1,value:o.night_work_max_minutes_default,onChange:f=>d(x=>({...x,night_work_max_minutes_default:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Yillik Fazla Mesai Limiti (dk)",a.jsx("input",{type:"number",min:1,value:o.overtime_annual_cap_minutes,onChange:f=>d(x=>({...x,overtime_annual_cap_minutes:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Fazla Mesai Carpani",a.jsx("input",{type:"number",min:1,step:"0.01",value:o.overtime_premium,onChange:f=>d(x=>({...x,overtime_premium:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Ek Calisma Carpani",a.jsx("input",{type:"number",min:1,step:"0.01",value:o.extra_work_premium,onChange:f=>d(x=>({...x,extra_work_premium:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Fazla Mesai Yuvarlama",a.jsxs("select",{value:o.overtime_rounding_mode,onChange:f=>d(x=>({...x,overtime_rounding_mode:f.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"OFF",children:"OFF"}),a.jsx("option",{value:"REG_HALF_HOUR",children:"REG_HALF_HOUR"})]})]}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 md:col-span-2",children:[a.jsx("input",{type:"checkbox",checked:o.enforce_min_break_rules,onChange:f=>d(x=>({...x,enforce_min_break_rules:f.target.checked}))}),"Asgari mola kurallarini uygula (Is Kanunu madde 68)"]}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 md:col-span-2",children:[a.jsx("input",{type:"checkbox",checked:o.night_work_exceptions_note_enabled,onChange:f=>d(x=>({...x,night_work_exceptions_note_enabled:f.target.checked}))}),"Gece calisma istisna notu bayragini aktif tut"]}),a.jsx("div",{className:"md:col-span-2",children:a.jsx("button",{type:"submit",disabled:h.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:h.isPending?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Kaydediliyor..."]}):"Ayarlar Kaydet"})})]})}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Hizli zet"}),a.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-3",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Haftalik normal sure"}),a.jsx("p",{className:"font-semibold",children:a.jsx(Pe,{minutes:o.weekly_normal_minutes_default})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Gnlk ust sinir"}),a.jsx("p",{className:"font-semibold",children:a.jsx(Pe,{minutes:o.daily_max_minutes})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Yillik fazla mesai limiti"}),a.jsx("p",{className:"font-semibold",children:a.jsx(Pe,{minutes:o.overtime_annual_cap_minutes})})]})]})]})]})}const gz=ka({username:In().min(1,"Kullanici adi gerekli."),password:In().min(1,"Sifre gerekli.")});function xz(e,i){const l=window.URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=i,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l)}function yz(e){return e.code==="INVALID_CREDENTIALS"?"Sifre dogrulanamadi":e.code==="TOO_MANY_ATTEMPTS"?"Cok fazla deneme":e.code==="INTERNAL_ERROR"?"Sunucu hatasi":"Indirme basarisiz"}function vz(){const[e]=fd(),[i,l]=_.useState("admin"),[o,d]=_.useState(""),[h,f]=_.useState(null),[x,v]=_.useState(null),[b,S]=_.useState(!1),w=_.useMemo(()=>{const z=e.get("archive_id");if(!z)return null;const k=Number(z);return!Number.isInteger(k)||k<=0?null:k},[e]),T=async z=>{if(z.preventDefault(),f(null),v(null),!w){f({message:"Gecerli bir arsiv kimligi bulunamadi."});return}const k=gz.safeParse({username:i,password:o});if(!k.success){f({message:k.error.issues[0]?.message??"Form alanlarini kontrol edin."});return}S(!0);try{const A=await LE(w,k.data),M=A.file_name??`arsiv-${w}.xlsx`;xz(A.blob,M),v("Indirme baslatildi. Dosya cihaziniza kaydedildi."),d("")}catch(A){f(Le(A,"Excel dosyasi indirilemedi."))}finally{S(!1)}};return a.jsx("div",{className:"admin-auth-screen flex min-h-screen items-center justify-center px-4",children:a.jsxs("div",{className:"admin-auth-card w-full max-w-md rounded-2xl border border-slate-200 bg-white p-8 shadow-panel",children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Excel Arsiv Indirme"}),a.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Admin sifreni dogrula, gunluk puantaj Excel dosyasi panel acmadan indirilsin."}),a.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Arsiv ID: ",w??"-"]}),a.jsxs("form",{onSubmit:T,className:"mt-6 space-y-4",children:[a.jsxs("label",{className:"block",children:[a.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Kullanici Adi"}),a.jsx("input",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:i,onChange:z=>l(z.target.value)})]}),a.jsxs("label",{className:"block",children:[a.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Sifre"}),a.jsx("input",{type:"password",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:o,onChange:z=>d(z.target.value)})]}),h?a.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[a.jsx("p",{className:"font-semibold",children:yz(h)}),a.jsx("p",{className:"mt-1",children:h.message}),h.requestId?a.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",h.requestId]}):null]}):null,x?a.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-3 text-sm text-emerald-700",children:x}):null,a.jsx("button",{type:"submit",disabled:b||!w,className:"btn-animated w-full rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:b?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Dogrulaniyor..."]}):"Sifreyi dogrula ve indir"})]}),a.jsxs("p",{className:"admin-auth-signature mt-5 text-center text-xs tracking-wide text-slate-500",children:[qa.signatureText," | BUILD: ",qa.buildVersion]})]})})}const bz=ka({username:In().min(1,"Kullanici adi gerekli."),password:In().min(1,"Sifre gerekli.")});function Lh(e){if(!e)return"-";const i=new Date(e);return Number.isNaN(i.getTime())?e:new Intl.DateTimeFormat("tr-TR",{timeZone:"Europe/Istanbul",dateStyle:"medium",timeStyle:"medium"}).format(i)}function _z(e){return e==="PENDING"?"Onay Bekliyor":e==="APPROVED"?"Onaylandi":e==="CONSUMED"?"Kullanildi":"Suresi Doldu"}function Nz(e){return e==="PENDING"?"bg-amber-100 text-amber-800 border-amber-200":e==="APPROVED"?"bg-emerald-100 text-emerald-800 border-emerald-200":e==="CONSUMED"?"bg-cyan-100 text-cyan-800 border-cyan-200":"bg-rose-100 text-rose-800 border-rose-200"}function w0(e){return e.code==="INVALID_CREDENTIALS"?"Sifre dogrulanamadi":e.code==="TOO_MANY_ATTEMPTS"?"Cok fazla deneme":e.code==="EXTRA_CHECKIN_APPROVAL_EXPIRED"?"Talep suresi dolmus":e.code==="EXTRA_CHECKIN_APPROVAL_NOT_FOUND"?"Talep bulunamadi":"Onay islemi basarisiz"}function jz(){const[e]=fd(),i=_.useMemo(()=>e.get("token")?.trim()??"",[e]),[l,o]=_.useState(null),[d,h]=_.useState(!1),[f,x]=_.useState(null),[v,b]=_.useState(null),[S,w]=_.useState(null),[T,z]=_.useState("admin"),[k,A]=_.useState(""),[M,I]=_.useState(!1);_.useEffect(()=>{if(!i){x({message:"Onay tokeni bulunamadi."}),o(null);return}let D=!1;return(async()=>{h(!0),x(null);try{const G=await PE(i);D||o(G)}catch(G){D||(x(Le(G,"Onay talebi yuklenemedi.")),o(null))}finally{D||h(!1)}})(),()=>{D=!0}},[i]);const R=async D=>{if(D.preventDefault(),b(null),w(null),!l||l.status!=="PENDING")return;const K=bz.safeParse({username:T,password:k});if(!K.success){b({message:K.error.issues[0]?.message??"Form alanlarini kontrol edin."});return}I(!0);try{const G=await IE({token:i,username:K.data.username,password:K.data.password});o(G.approval),A(""),w(G.already_processed?"Talep daha once islenmis. Calisan tekrar giris deneyebilir.":"Onay verildi. Calisan ikinci giris islemini tekrar deneyebilir.")}catch(G){b(Le(G,"Onay islemi tamamlanamadi."))}finally{I(!1)}};return a.jsx("div",{className:"admin-auth-screen flex min-h-screen items-center justify-center px-4",children:a.jsxs("div",{className:"admin-auth-card w-full max-w-2xl rounded-2xl border border-slate-200 bg-white p-8 shadow-panel",children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Ek Giris Admin Onayi"}),a.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Gunluk mesai tamamlama sonrasi ikinci giris denemesi icin sifre dogrulayarak onay verin."}),i?null:a.jsx("div",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:"Gecerli bir token olmadan onay islemi baslatilamaz."}),d?a.jsx("div",{className:"mt-4 rounded-lg border border-slate-200 bg-slate-50 px-3 py-3 text-sm text-slate-700",children:"Talep yukleniyor..."}):null,f?a.jsxs("div",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[a.jsx("p",{className:"font-semibold",children:w0(f)}),a.jsx("p",{className:"mt-1",children:f.message}),f.requestId?a.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",f.requestId]}):null]}):null,l?a.jsxs("section",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:["#",l.employee_id," - ",l.employee_name]}),a.jsx("span",{className:`inline-flex rounded-full border px-2 py-1 text-xs font-semibold ${Nz(l.status)}`,children:_z(l.status)})]}),a.jsxs("div",{className:"mt-3 grid gap-2 text-xs text-slate-600 sm:grid-cols-2",children:[a.jsxs("p",{children:["Mesai gunu: ",l.local_day]}),a.jsxs("p",{children:["Istenen cihaz ID: ",l.device_id??"-"]}),a.jsxs("p",{children:["Talep zamani: ",Lh(l.requested_at)]}),a.jsxs("p",{children:["Son gecerlilik: ",Lh(l.expires_at)]}),a.jsxs("p",{children:["Onaylayan: ",l.approved_by_username??"-"]}),a.jsxs("p",{children:["Kullanilma zamani: ",Lh(l.consumed_at)]})]}),a.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Push dagitimi: hedef ",l.push_total_targets," | gonderilen ",l.push_sent," | hata ",l.push_failed]})]}):null,S?a.jsx("div",{className:"mt-4 rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-3 text-sm text-emerald-700",children:S}):null,l?.status==="PENDING"?a.jsxs("form",{onSubmit:R,className:"mt-5 space-y-4",children:[a.jsxs("label",{className:"block",children:[a.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Kullanici Adi"}),a.jsx("input",{value:T,onChange:D=>z(D.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",autoComplete:"username"})]}),a.jsxs("label",{className:"block",children:[a.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Sifre (MFA gerektirmez)"}),a.jsx("input",{type:"password",value:k,onChange:D=>A(D.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",autoComplete:"current-password"})]}),v?a.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[a.jsx("p",{className:"font-semibold",children:w0(v)}),a.jsx("p",{className:"mt-1",children:v.message}),v.requestId?a.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",v.requestId]}):null]}):null,a.jsx("button",{type:"submit",disabled:M,className:"btn-animated w-full rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:M?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Onay veriliyor..."]}):"Evet, 2. Girisi Onayla"})]}):null,a.jsxs("p",{className:"admin-auth-signature mt-5 text-center text-xs tracking-wide text-slate-500",children:[qa.signatureText," | BUILD: ",qa.buildVersion]})]})})}var Cl={},Ph,E0;function Sz(){return E0||(E0=1,Ph=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Ph}var Ih={},Bs={},k0;function Ir(){if(k0)return Bs;k0=1;let e;const i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Bs.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},Bs.getSymbolTotalCodewords=function(o){return i[o]},Bs.getBCHDigit=function(l){let o=0;for(;l!==0;)o++,l>>>=1;return o},Bs.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');e=o},Bs.isKanjiModeEnabled=function(){return typeof e<"u"},Bs.toSJIS=function(o){return e(o)},Bs}var Bh={},C0;function up(){return C0||(C0=1,(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function i(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+l)}}e.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},e.from=function(o,d){if(e.isValid(o))return o;try{return i(o)}catch{return d}}})(Bh)),Bh}var Uh,T0;function wz(){if(T0)return Uh;T0=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(i){const l=Math.floor(i/8);return(this.buffer[l]>>>7-i%8&1)===1},put:function(i,l){for(let o=0;o<l;o++)this.putBit((i>>>l-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){const l=Math.floor(this.length/8);this.buffer.length<=l&&this.buffer.push(0),i&&(this.buffer[l]|=128>>>this.length%8),this.length++}},Uh=e,Uh}var Fh,A0;function Ez(){if(A0)return Fh;A0=1;function e(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}return e.prototype.set=function(i,l,o,d){const h=i*this.size+l;this.data[h]=o,d&&(this.reservedBit[h]=!0)},e.prototype.get=function(i,l){return this.data[i*this.size+l]},e.prototype.xor=function(i,l,o){this.data[i*this.size+l]^=o},e.prototype.isReserved=function(i,l){return this.reservedBit[i*this.size+l]},Fh=e,Fh}var Zh={},z0;function kz(){return z0||(z0=1,(function(e){const i=Ir().getSymbolSize;e.getRowColCoords=function(o){if(o===1)return[];const d=Math.floor(o/7)+2,h=i(o),f=h===145?26:Math.ceil((h-13)/(2*d-2))*2,x=[h-7];for(let v=1;v<d-1;v++)x[v]=x[v-1]-f;return x.push(6),x.reverse()},e.getPositions=function(o){const d=[],h=e.getRowColCoords(o),f=h.length;for(let x=0;x<f;x++)for(let v=0;v<f;v++)x===0&&v===0||x===0&&v===f-1||x===f-1&&v===0||d.push([h[x],h[v]]);return d}})(Zh)),Zh}var qh={},M0;function Cz(){if(M0)return qh;M0=1;const e=Ir().getSymbolSize,i=7;return qh.getPositions=function(o){const d=e(o);return[[0,0],[d-i,0],[0,d-i]]},qh}var Hh={},O0;function Tz(){return O0||(O0=1,(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const i={N1:3,N2:3,N3:40,N4:10};e.isValid=function(d){return d!=null&&d!==""&&!isNaN(d)&&d>=0&&d<=7},e.from=function(d){return e.isValid(d)?parseInt(d,10):void 0},e.getPenaltyN1=function(d){const h=d.size;let f=0,x=0,v=0,b=null,S=null;for(let w=0;w<h;w++){x=v=0,b=S=null;for(let T=0;T<h;T++){let z=d.get(w,T);z===b?x++:(x>=5&&(f+=i.N1+(x-5)),b=z,x=1),z=d.get(T,w),z===S?v++:(v>=5&&(f+=i.N1+(v-5)),S=z,v=1)}x>=5&&(f+=i.N1+(x-5)),v>=5&&(f+=i.N1+(v-5))}return f},e.getPenaltyN2=function(d){const h=d.size;let f=0;for(let x=0;x<h-1;x++)for(let v=0;v<h-1;v++){const b=d.get(x,v)+d.get(x,v+1)+d.get(x+1,v)+d.get(x+1,v+1);(b===4||b===0)&&f++}return f*i.N2},e.getPenaltyN3=function(d){const h=d.size;let f=0,x=0,v=0;for(let b=0;b<h;b++){x=v=0;for(let S=0;S<h;S++)x=x<<1&2047|d.get(b,S),S>=10&&(x===1488||x===93)&&f++,v=v<<1&2047|d.get(S,b),S>=10&&(v===1488||v===93)&&f++}return f*i.N3},e.getPenaltyN4=function(d){let h=0;const f=d.data.length;for(let v=0;v<f;v++)h+=d.data[v];return Math.abs(Math.ceil(h*100/f/5)-10)*i.N4};function l(o,d,h){switch(o){case e.Patterns.PATTERN000:return(d+h)%2===0;case e.Patterns.PATTERN001:return d%2===0;case e.Patterns.PATTERN010:return h%3===0;case e.Patterns.PATTERN011:return(d+h)%3===0;case e.Patterns.PATTERN100:return(Math.floor(d/2)+Math.floor(h/3))%2===0;case e.Patterns.PATTERN101:return d*h%2+d*h%3===0;case e.Patterns.PATTERN110:return(d*h%2+d*h%3)%2===0;case e.Patterns.PATTERN111:return(d*h%3+(d+h)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}e.applyMask=function(d,h){const f=h.size;for(let x=0;x<f;x++)for(let v=0;v<f;v++)h.isReserved(v,x)||h.xor(v,x,l(d,v,x))},e.getBestMask=function(d,h){const f=Object.keys(e.Patterns).length;let x=0,v=1/0;for(let b=0;b<f;b++){h(b),e.applyMask(b,d);const S=e.getPenaltyN1(d)+e.getPenaltyN2(d)+e.getPenaltyN3(d)+e.getPenaltyN4(d);e.applyMask(b,d),S<v&&(v=S,x=b)}return x}})(Hh)),Hh}var qc={},D0;function o_(){if(D0)return qc;D0=1;const e=up(),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],l=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return qc.getBlocksCount=function(d,h){switch(h){case e.L:return i[(d-1)*4+0];case e.M:return i[(d-1)*4+1];case e.Q:return i[(d-1)*4+2];case e.H:return i[(d-1)*4+3];default:return}},qc.getTotalCodewordsCount=function(d,h){switch(h){case e.L:return l[(d-1)*4+0];case e.M:return l[(d-1)*4+1];case e.Q:return l[(d-1)*4+2];case e.H:return l[(d-1)*4+3];default:return}},qc}var Kh={},Qo={},R0;function Az(){if(R0)return Qo;R0=1;const e=new Uint8Array(512),i=new Uint8Array(256);return(function(){let o=1;for(let d=0;d<255;d++)e[d]=o,i[o]=d,o<<=1,o&256&&(o^=285);for(let d=255;d<512;d++)e[d]=e[d-255]})(),Qo.log=function(o){if(o<1)throw new Error("log("+o+")");return i[o]},Qo.exp=function(o){return e[o]},Qo.mul=function(o,d){return o===0||d===0?0:e[i[o]+i[d]]},Qo}var L0;function zz(){return L0||(L0=1,(function(e){const i=Az();e.mul=function(o,d){const h=new Uint8Array(o.length+d.length-1);for(let f=0;f<o.length;f++)for(let x=0;x<d.length;x++)h[f+x]^=i.mul(o[f],d[x]);return h},e.mod=function(o,d){let h=new Uint8Array(o);for(;h.length-d.length>=0;){const f=h[0];for(let v=0;v<d.length;v++)h[v]^=i.mul(d[v],f);let x=0;for(;x<h.length&&h[x]===0;)x++;h=h.slice(x)}return h},e.generateECPolynomial=function(o){let d=new Uint8Array([1]);for(let h=0;h<o;h++)d=e.mul(d,new Uint8Array([1,i.exp(h)]));return d}})(Kh)),Kh}var Qh,P0;function Mz(){if(P0)return Qh;P0=1;const e=zz();function i(l){this.genPoly=void 0,this.degree=l,this.degree&&this.initialize(this.degree)}return i.prototype.initialize=function(o){this.degree=o,this.genPoly=e.generateECPolynomial(this.degree)},i.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const d=new Uint8Array(o.length+this.degree);d.set(o);const h=e.mod(d,this.genPoly),f=this.degree-h.length;if(f>0){const x=new Uint8Array(this.degree);return x.set(h,f),x}return h},Qh=i,Qh}var Gh={},Vh={},Yh={},I0;function u_(){return I0||(I0=1,Yh.isValid=function(i){return!isNaN(i)&&i>=1&&i<=40}),Yh}var Ei={},B0;function c_(){if(B0)return Ei;B0=1;const e="[0-9]+",i="[A-Z $%*+\\-./:]+";let l="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";l=l.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+l+`)(?:.|[\r
]))+`;Ei.KANJI=new RegExp(l,"g"),Ei.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ei.BYTE=new RegExp(o,"g"),Ei.NUMERIC=new RegExp(e,"g"),Ei.ALPHANUMERIC=new RegExp(i,"g");const d=new RegExp("^"+l+"$"),h=new RegExp("^"+e+"$"),f=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ei.testKanji=function(v){return d.test(v)},Ei.testNumeric=function(v){return h.test(v)},Ei.testAlphanumeric=function(v){return f.test(v)},Ei}var U0;function Br(){return U0||(U0=1,(function(e){const i=u_(),l=c_();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(h,f){if(!h.ccBits)throw new Error("Invalid mode: "+h);if(!i.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?h.ccBits[0]:f<27?h.ccBits[1]:h.ccBits[2]},e.getBestModeForData=function(h){return l.testNumeric(h)?e.NUMERIC:l.testAlphanumeric(h)?e.ALPHANUMERIC:l.testKanji(h)?e.KANJI:e.BYTE},e.toString=function(h){if(h&&h.id)return h.id;throw new Error("Invalid mode")},e.isValid=function(h){return h&&h.bit&&h.ccBits};function o(d){if(typeof d!="string")throw new Error("Param is not a string");switch(d.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+d)}}e.from=function(h,f){if(e.isValid(h))return h;try{return o(h)}catch{return f}}})(Vh)),Vh}var F0;function Oz(){return F0||(F0=1,(function(e){const i=Ir(),l=o_(),o=up(),d=Br(),h=u_(),f=7973,x=i.getBCHDigit(f);function v(T,z,k){for(let A=1;A<=40;A++)if(z<=e.getCapacity(A,k,T))return A}function b(T,z){return d.getCharCountIndicator(T,z)+4}function S(T,z){let k=0;return T.forEach(function(A){const M=b(A.mode,z);k+=M+A.getBitsLength()}),k}function w(T,z){for(let k=1;k<=40;k++)if(S(T,k)<=e.getCapacity(k,z,d.MIXED))return k}e.from=function(z,k){return h.isValid(z)?parseInt(z,10):k},e.getCapacity=function(z,k,A){if(!h.isValid(z))throw new Error("Invalid QR Code version");typeof A>"u"&&(A=d.BYTE);const M=i.getSymbolTotalCodewords(z),I=l.getTotalCodewordsCount(z,k),R=(M-I)*8;if(A===d.MIXED)return R;const D=R-b(A,z);switch(A){case d.NUMERIC:return Math.floor(D/10*3);case d.ALPHANUMERIC:return Math.floor(D/11*2);case d.KANJI:return Math.floor(D/13);case d.BYTE:default:return Math.floor(D/8)}},e.getBestVersionForData=function(z,k){let A;const M=o.from(k,o.M);if(Array.isArray(z)){if(z.length>1)return w(z,M);if(z.length===0)return 1;A=z[0]}else A=z;return v(A.mode,A.getLength(),M)},e.getEncodedBits=function(z){if(!h.isValid(z)||z<7)throw new Error("Invalid QR Code version");let k=z<<12;for(;i.getBCHDigit(k)-x>=0;)k^=f<<i.getBCHDigit(k)-x;return z<<12|k}})(Gh)),Gh}var $h={},Z0;function Dz(){if(Z0)return $h;Z0=1;const e=Ir(),i=1335,l=21522,o=e.getBCHDigit(i);return $h.getEncodedBits=function(h,f){const x=h.bit<<3|f;let v=x<<10;for(;e.getBCHDigit(v)-o>=0;)v^=i<<e.getBCHDigit(v)-o;return(x<<10|v)^l},$h}var Xh={},Jh,q0;function Rz(){if(q0)return Jh;q0=1;const e=Br();function i(l){this.mode=e.NUMERIC,this.data=l.toString()}return i.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(o){let d,h,f;for(d=0;d+3<=this.data.length;d+=3)h=this.data.substr(d,3),f=parseInt(h,10),o.put(f,10);const x=this.data.length-d;x>0&&(h=this.data.substr(d),f=parseInt(h,10),o.put(f,x*3+1))},Jh=i,Jh}var Wh,H0;function Lz(){if(H0)return Wh;H0=1;const e=Br(),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function l(o){this.mode=e.ALPHANUMERIC,this.data=o}return l.getBitsLength=function(d){return 11*Math.floor(d/2)+6*(d%2)},l.prototype.getLength=function(){return this.data.length},l.prototype.getBitsLength=function(){return l.getBitsLength(this.data.length)},l.prototype.write=function(d){let h;for(h=0;h+2<=this.data.length;h+=2){let f=i.indexOf(this.data[h])*45;f+=i.indexOf(this.data[h+1]),d.put(f,11)}this.data.length%2&&d.put(i.indexOf(this.data[h]),6)},Wh=l,Wh}var ef,K0;function Pz(){if(K0)return ef;K0=1;const e=Br();function i(l){this.mode=e.BYTE,typeof l=="string"?this.data=new TextEncoder().encode(l):this.data=new Uint8Array(l)}return i.getBitsLength=function(o){return o*8},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(l){for(let o=0,d=this.data.length;o<d;o++)l.put(this.data[o],8)},ef=i,ef}var tf,Q0;function Iz(){if(Q0)return tf;Q0=1;const e=Br(),i=Ir();function l(o){this.mode=e.KANJI,this.data=o}return l.getBitsLength=function(d){return d*13},l.prototype.getLength=function(){return this.data.length},l.prototype.getBitsLength=function(){return l.getBitsLength(this.data.length)},l.prototype.write=function(o){let d;for(d=0;d<this.data.length;d++){let h=i.toSJIS(this.data[d]);if(h>=33088&&h<=40956)h-=33088;else if(h>=57408&&h<=60351)h-=49472;else throw new Error("Invalid SJIS character: "+this.data[d]+`
Make sure your charset is UTF-8`);h=(h>>>8&255)*192+(h&255),o.put(h,13)}},tf=l,tf}var nf={exports:{}},G0;function Bz(){return G0||(G0=1,(function(e){var i={single_source_shortest_paths:function(l,o,d){var h={},f={};f[o]=0;var x=i.PriorityQueue.make();x.push(o,0);for(var v,b,S,w,T,z,k,A,M;!x.empty();){v=x.pop(),b=v.value,w=v.cost,T=l[b]||{};for(S in T)T.hasOwnProperty(S)&&(z=T[S],k=w+z,A=f[S],M=typeof f[S]>"u",(M||A>k)&&(f[S]=k,x.push(S,k),h[S]=b))}if(typeof d<"u"&&typeof f[d]>"u"){var I=["Could not find a path from ",o," to ",d,"."].join("");throw new Error(I)}return h},extract_shortest_path_from_predecessor_list:function(l,o){for(var d=[],h=o;h;)d.push(h),l[h],h=l[h];return d.reverse(),d},find_path:function(l,o,d){var h=i.single_source_shortest_paths(l,o,d);return i.extract_shortest_path_from_predecessor_list(h,d)},PriorityQueue:{make:function(l){var o=i.PriorityQueue,d={},h;l=l||{};for(h in o)o.hasOwnProperty(h)&&(d[h]=o[h]);return d.queue=[],d.sorter=l.sorter||o.default_sorter,d},default_sorter:function(l,o){return l.cost-o.cost},push:function(l,o){var d={value:l,cost:o};this.queue.push(d),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=i})(nf)),nf.exports}var V0;function Uz(){return V0||(V0=1,(function(e){const i=Br(),l=Rz(),o=Lz(),d=Pz(),h=Iz(),f=c_(),x=Ir(),v=Bz();function b(I){return unescape(encodeURIComponent(I)).length}function S(I,R,D){const K=[];let G;for(;(G=I.exec(D))!==null;)K.push({data:G[0],index:G.index,mode:R,length:G[0].length});return K}function w(I){const R=S(f.NUMERIC,i.NUMERIC,I),D=S(f.ALPHANUMERIC,i.ALPHANUMERIC,I);let K,G;return x.isKanjiModeEnabled()?(K=S(f.BYTE,i.BYTE,I),G=S(f.KANJI,i.KANJI,I)):(K=S(f.BYTE_KANJI,i.BYTE,I),G=[]),R.concat(D,K,G).sort(function(q,Q){return q.index-Q.index}).map(function(q){return{data:q.data,mode:q.mode,length:q.length}})}function T(I,R){switch(R){case i.NUMERIC:return l.getBitsLength(I);case i.ALPHANUMERIC:return o.getBitsLength(I);case i.KANJI:return h.getBitsLength(I);case i.BYTE:return d.getBitsLength(I)}}function z(I){return I.reduce(function(R,D){const K=R.length-1>=0?R[R.length-1]:null;return K&&K.mode===D.mode?(R[R.length-1].data+=D.data,R):(R.push(D),R)},[])}function k(I){const R=[];for(let D=0;D<I.length;D++){const K=I[D];switch(K.mode){case i.NUMERIC:R.push([K,{data:K.data,mode:i.ALPHANUMERIC,length:K.length},{data:K.data,mode:i.BYTE,length:K.length}]);break;case i.ALPHANUMERIC:R.push([K,{data:K.data,mode:i.BYTE,length:K.length}]);break;case i.KANJI:R.push([K,{data:K.data,mode:i.BYTE,length:b(K.data)}]);break;case i.BYTE:R.push([{data:K.data,mode:i.BYTE,length:b(K.data)}])}}return R}function A(I,R){const D={},K={start:{}};let G=["start"];for(let V=0;V<I.length;V++){const q=I[V],Q=[];for(let ae=0;ae<q.length;ae++){const ve=q[ae],ee=""+V+ae;Q.push(ee),D[ee]={node:ve,lastCount:0},K[ee]={};for(let ue=0;ue<G.length;ue++){const _e=G[ue];D[_e]&&D[_e].node.mode===ve.mode?(K[_e][ee]=T(D[_e].lastCount+ve.length,ve.mode)-T(D[_e].lastCount,ve.mode),D[_e].lastCount+=ve.length):(D[_e]&&(D[_e].lastCount=ve.length),K[_e][ee]=T(ve.length,ve.mode)+4+i.getCharCountIndicator(ve.mode,R))}}G=Q}for(let V=0;V<G.length;V++)K[G[V]].end=0;return{map:K,table:D}}function M(I,R){let D;const K=i.getBestModeForData(I);if(D=i.from(R,K),D!==i.BYTE&&D.bit<K.bit)throw new Error('"'+I+'" cannot be encoded with mode '+i.toString(D)+`.
 Suggested mode is: `+i.toString(K));switch(D===i.KANJI&&!x.isKanjiModeEnabled()&&(D=i.BYTE),D){case i.NUMERIC:return new l(I);case i.ALPHANUMERIC:return new o(I);case i.KANJI:return new h(I);case i.BYTE:return new d(I)}}e.fromArray=function(R){return R.reduce(function(D,K){return typeof K=="string"?D.push(M(K,null)):K.data&&D.push(M(K.data,K.mode)),D},[])},e.fromString=function(R,D){const K=w(R,x.isKanjiModeEnabled()),G=k(K),V=A(G,D),q=v.find_path(V.map,"start","end"),Q=[];for(let ae=1;ae<q.length-1;ae++)Q.push(V.table[q[ae]].node);return e.fromArray(z(Q))},e.rawSplit=function(R){return e.fromArray(w(R,x.isKanjiModeEnabled()))}})(Xh)),Xh}var Y0;function Fz(){if(Y0)return Ih;Y0=1;const e=Ir(),i=up(),l=wz(),o=Ez(),d=kz(),h=Cz(),f=Tz(),x=o_(),v=Mz(),b=Oz(),S=Dz(),w=Br(),T=Uz();function z(V,q){const Q=V.size,ae=h.getPositions(q);for(let ve=0;ve<ae.length;ve++){const ee=ae[ve][0],ue=ae[ve][1];for(let _e=-1;_e<=7;_e++)if(!(ee+_e<=-1||Q<=ee+_e))for(let ne=-1;ne<=7;ne++)ue+ne<=-1||Q<=ue+ne||(_e>=0&&_e<=6&&(ne===0||ne===6)||ne>=0&&ne<=6&&(_e===0||_e===6)||_e>=2&&_e<=4&&ne>=2&&ne<=4?V.set(ee+_e,ue+ne,!0,!0):V.set(ee+_e,ue+ne,!1,!0))}}function k(V){const q=V.size;for(let Q=8;Q<q-8;Q++){const ae=Q%2===0;V.set(Q,6,ae,!0),V.set(6,Q,ae,!0)}}function A(V,q){const Q=d.getPositions(q);for(let ae=0;ae<Q.length;ae++){const ve=Q[ae][0],ee=Q[ae][1];for(let ue=-2;ue<=2;ue++)for(let _e=-2;_e<=2;_e++)ue===-2||ue===2||_e===-2||_e===2||ue===0&&_e===0?V.set(ve+ue,ee+_e,!0,!0):V.set(ve+ue,ee+_e,!1,!0)}}function M(V,q){const Q=V.size,ae=b.getEncodedBits(q);let ve,ee,ue;for(let _e=0;_e<18;_e++)ve=Math.floor(_e/3),ee=_e%3+Q-8-3,ue=(ae>>_e&1)===1,V.set(ve,ee,ue,!0),V.set(ee,ve,ue,!0)}function I(V,q,Q){const ae=V.size,ve=S.getEncodedBits(q,Q);let ee,ue;for(ee=0;ee<15;ee++)ue=(ve>>ee&1)===1,ee<6?V.set(ee,8,ue,!0):ee<8?V.set(ee+1,8,ue,!0):V.set(ae-15+ee,8,ue,!0),ee<8?V.set(8,ae-ee-1,ue,!0):ee<9?V.set(8,15-ee-1+1,ue,!0):V.set(8,15-ee-1,ue,!0);V.set(ae-8,8,1,!0)}function R(V,q){const Q=V.size;let ae=-1,ve=Q-1,ee=7,ue=0;for(let _e=Q-1;_e>0;_e-=2)for(_e===6&&_e--;;){for(let ne=0;ne<2;ne++)if(!V.isReserved(ve,_e-ne)){let W=!1;ue<q.length&&(W=(q[ue]>>>ee&1)===1),V.set(ve,_e-ne,W),ee--,ee===-1&&(ue++,ee=7)}if(ve+=ae,ve<0||Q<=ve){ve-=ae,ae=-ae;break}}}function D(V,q,Q){const ae=new l;Q.forEach(function(ne){ae.put(ne.mode.bit,4),ae.put(ne.getLength(),w.getCharCountIndicator(ne.mode,V)),ne.write(ae)});const ve=e.getSymbolTotalCodewords(V),ee=x.getTotalCodewordsCount(V,q),ue=(ve-ee)*8;for(ae.getLengthInBits()+4<=ue&&ae.put(0,4);ae.getLengthInBits()%8!==0;)ae.putBit(0);const _e=(ue-ae.getLengthInBits())/8;for(let ne=0;ne<_e;ne++)ae.put(ne%2?17:236,8);return K(ae,V,q)}function K(V,q,Q){const ae=e.getSymbolTotalCodewords(q),ve=x.getTotalCodewordsCount(q,Q),ee=ae-ve,ue=x.getBlocksCount(q,Q),_e=ae%ue,ne=ue-_e,W=Math.floor(ae/ue),B=Math.floor(ee/ue),X=B+1,de=W-B,ke=new v(de);let J=0;const O=new Array(ue),te=new Array(ue);let P=0;const Z=new Uint8Array(V.buffer);for(let Ve=0;Ve<ue;Ve++){const qe=Ve<ne?B:X;O[Ve]=Z.slice(J,J+qe),te[Ve]=ke.encode(O[Ve]),J+=qe,P=Math.max(P,qe)}const me=new Uint8Array(ae);let Se=0,Me,Ze;for(Me=0;Me<P;Me++)for(Ze=0;Ze<ue;Ze++)Me<O[Ze].length&&(me[Se++]=O[Ze][Me]);for(Me=0;Me<de;Me++)for(Ze=0;Ze<ue;Ze++)me[Se++]=te[Ze][Me];return me}function G(V,q,Q,ae){let ve;if(Array.isArray(V))ve=T.fromArray(V);else if(typeof V=="string"){let W=q;if(!W){const B=T.rawSplit(V);W=b.getBestVersionForData(B,Q)}ve=T.fromString(V,W||40)}else throw new Error("Invalid data");const ee=b.getBestVersionForData(ve,Q);if(!ee)throw new Error("The amount of data is too big to be stored in a QR Code");if(!q)q=ee;else if(q<ee)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ee+`.
`);const ue=D(q,Q,ve),_e=e.getSymbolSize(q),ne=new o(_e);return z(ne,q),k(ne),A(ne,q),I(ne,Q,0),q>=7&&M(ne,q),R(ne,ue),isNaN(ae)&&(ae=f.getBestMask(ne,I.bind(null,ne,Q))),f.applyMask(ae,ne),I(ne,Q,ae),{modules:ne,version:q,errorCorrectionLevel:Q,maskPattern:ae,segments:ve}}return Ih.create=function(q,Q){if(typeof q>"u"||q==="")throw new Error("No input text");let ae=i.M,ve,ee;return typeof Q<"u"&&(ae=i.from(Q.errorCorrectionLevel,i.M),ve=b.from(Q.version),ee=f.from(Q.maskPattern),Q.toSJISFunc&&e.setToSJISFunction(Q.toSJISFunc)),G(q,ve,ae,ee)},Ih}var af={},sf={},$0;function d_(){return $0||($0=1,(function(e){function i(l){if(typeof l=="number"&&(l=l.toString()),typeof l!="string")throw new Error("Color should be defined as hex string");let o=l.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+l);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(h){return[h,h]}))),o.length===6&&o.push("F","F");const d=parseInt(o.join(""),16);return{r:d>>24&255,g:d>>16&255,b:d>>8&255,a:d&255,hex:"#"+o.slice(0,6).join("")}}e.getOptions=function(o){o||(o={}),o.color||(o.color={});const d=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,h=o.width&&o.width>=21?o.width:void 0,f=o.scale||4;return{width:h,scale:h?4:f,margin:d,color:{dark:i(o.color.dark||"#000000ff"),light:i(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},e.getScale=function(o,d){return d.width&&d.width>=o+d.margin*2?d.width/(o+d.margin*2):d.scale},e.getImageWidth=function(o,d){const h=e.getScale(o,d);return Math.floor((o+d.margin*2)*h)},e.qrToImageData=function(o,d,h){const f=d.modules.size,x=d.modules.data,v=e.getScale(f,h),b=Math.floor((f+h.margin*2)*v),S=h.margin*v,w=[h.color.light,h.color.dark];for(let T=0;T<b;T++)for(let z=0;z<b;z++){let k=(T*b+z)*4,A=h.color.light;if(T>=S&&z>=S&&T<b-S&&z<b-S){const M=Math.floor((T-S)/v),I=Math.floor((z-S)/v);A=w[x[M*f+I]?1:0]}o[k++]=A.r,o[k++]=A.g,o[k++]=A.b,o[k]=A.a}}})(sf)),sf}var X0;function Zz(){return X0||(X0=1,(function(e){const i=d_();function l(d,h,f){d.clearRect(0,0,h.width,h.height),h.style||(h.style={}),h.height=f,h.width=f,h.style.height=f+"px",h.style.width=f+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(h,f,x){let v=x,b=f;typeof v>"u"&&(!f||!f.getContext)&&(v=f,f=void 0),f||(b=o()),v=i.getOptions(v);const S=i.getImageWidth(h.modules.size,v),w=b.getContext("2d"),T=w.createImageData(S,S);return i.qrToImageData(T.data,h,v),l(w,b,S),w.putImageData(T,0,0),b},e.renderToDataURL=function(h,f,x){let v=x;typeof v>"u"&&(!f||!f.getContext)&&(v=f,f=void 0),v||(v={});const b=e.render(h,f,v),S=v.type||"image/png",w=v.rendererOpts||{};return b.toDataURL(S,w.quality)}})(af)),af}var rf={},J0;function qz(){if(J0)return rf;J0=1;const e=d_();function i(d,h){const f=d.a/255,x=h+'="'+d.hex+'"';return f<1?x+" "+h+'-opacity="'+f.toFixed(2).slice(1)+'"':x}function l(d,h,f){let x=d+h;return typeof f<"u"&&(x+=" "+f),x}function o(d,h,f){let x="",v=0,b=!1,S=0;for(let w=0;w<d.length;w++){const T=Math.floor(w%h),z=Math.floor(w/h);!T&&!b&&(b=!0),d[w]?(S++,w>0&&T>0&&d[w-1]||(x+=b?l("M",T+f,.5+z+f):l("m",v,0),v=0,b=!1),T+1<h&&d[w+1]||(x+=l("h",S),S=0)):v++}return x}return rf.render=function(h,f,x){const v=e.getOptions(f),b=h.modules.size,S=h.modules.data,w=b+v.margin*2,T=v.color.light.a?"<path "+i(v.color.light,"fill")+' d="M0 0h'+w+"v"+w+'H0z"/>':"",z="<path "+i(v.color.dark,"stroke")+' d="'+o(S,b,v.margin)+'"/>',k='viewBox="0 0 '+w+" "+w+'"',M='<svg xmlns="http://www.w3.org/2000/svg" '+(v.width?'width="'+v.width+'" height="'+v.width+'" ':"")+k+' shape-rendering="crispEdges">'+T+z+`</svg>
`;return typeof x=="function"&&x(null,M),M},rf}var W0;function Hz(){if(W0)return Cl;W0=1;const e=Sz(),i=Fz(),l=Zz(),o=qz();function d(h,f,x,v,b){const S=[].slice.call(arguments,1),w=S.length,T=typeof S[w-1]=="function";if(!T&&!e())throw new Error("Callback required as last argument");if(T){if(w<2)throw new Error("Too few arguments provided");w===2?(b=x,x=f,f=v=void 0):w===3&&(f.getContext&&typeof b>"u"?(b=v,v=void 0):(b=v,v=x,x=f,f=void 0))}else{if(w<1)throw new Error("Too few arguments provided");return w===1?(x=f,f=v=void 0):w===2&&!f.getContext&&(v=x,x=f,f=void 0),new Promise(function(z,k){try{const A=i.create(x,v);z(h(A,f,v))}catch(A){k(A)}})}try{const z=i.create(x,v);b(null,h(z,f,v))}catch(z){b(z)}}return Cl.create=i.create,Cl.toCanvas=d.bind(null,l.render),Cl.toDataURL=d.bind(null,l.renderToDataURL),Cl.toString=d.bind(null,function(h,f,x){return o.render(h,x)}),Cl}var Kz=Hz();const Mf=dd(Kz),cp=[{key:"regions",label:"Bolgeler"},{key:"departments",label:"Departmanlar"},{key:"employees",label:"Calisanlar"},{key:"devices",label:"Cihazlar"},{key:"work_rules",label:"Mesai Kurallari"},{key:"attendance_events",label:"Yoklama Kayitlari"},{key:"leaves",label:"Izinler"},{key:"reports",label:"Raporlar"},{key:"compliance",label:"Uyumluluk"},{key:"schedule",label:"Planlama"},{key:"manual_overrides",label:"Manuel Duzeltme"},{key:"audit",label:"Denetim Kayitlari"},{key:"admin_users",label:"Admin Kullanicilari"}];function Jo(){return Object.fromEntries(cp.map(e=>[e.key,{read:!1,write:!1}]))}function Qz(e){const i=Jo();return e&&cp.forEach(({key:l})=>{const o=e[l];o&&(i[l]={read:!!(o.read||o.write),write:!!o.write})}),i}function ev({value:e,disabled:i=!1,onChange:l}){const o=(d,h,f)=>{const v={...e[d]??{read:!1,write:!1}};h==="read"?(v.read=f,f||(v.write=!1)):(v.write=f,f&&(v.read=!0)),l({...e,[d]:v})};return a.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2",children:"Modul"}),a.jsx("th",{className:"px-3 py-2",children:"Goruntule"}),a.jsx("th",{className:"px-3 py-2",children:"Duzenle"})]})}),a.jsx("tbody",{children:cp.map(d=>{const h=e[d.key]??{read:!1,write:!1};return a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"px-3 py-2",children:d.label}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("input",{type:"checkbox",checked:h.read,disabled:i,onChange:f=>o(d.key,"read",f.target.checked)})}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("input",{type:"checkbox",checked:h.write,disabled:i,onChange:f=>o(d.key,"write",f.target.checked)})})]},d.key)})})]})})}function tv(){return{username:"",full_name:"",password:"",is_active:!0,is_super_admin:!1,permissions:Jo()}}function lf(e){return e?new Date(e).toLocaleString("tr-TR"):"-"}function Gz(e){const i=(e??"").trim();return i?i.length<=80?i:`${i.slice(0,80)}...`:"-"}function Vz(e){const i=e.trim();return i?i.length<=60?i:`${i.slice(0,30)}...${i.slice(-22)}`:"-"}function Yz(){const e=Un(),{pushToast:i}=Fn(),{hasPermission:l,isSuperAdmin:o,user:d}=Ul(),h=l("admin_users"),f=l("admin_users","write"),[x,v]=_.useState(tv()),[b,S]=_.useState(null),[w,T]=_.useState(""),[z,k]=_.useState(""),[A,M]=_.useState(""),[I,R]=_.useState(!0),[D,K]=_.useState(!1),[G,V]=_.useState(Jo()),[q,Q]=_.useState(null),[ae,ve]=_.useState(null),[ee,ue]=_.useState(null),[_e,ne]=_.useState(""),[W,B]=_.useState(""),[X,de]=_.useState(null),[ke,J]=_.useState([]),[O,te]=_.useState(null),P=Be({queryKey:["admin-users"],queryFn:pb,enabled:h}),Z=Be({queryKey:["admin-user-mfa-status",ae?.id],queryFn:()=>Q2(ae.id),enabled:!!ae}),me=Be({queryKey:["admin-user-claim-detail",q?.id],queryFn:()=>U2(q.id),enabled:!!q}),Se=Xe({mutationFn:q2,onSuccess:()=>{i({variant:"success",title:"Admin kullanici olusturuldu",description:"Yeni admin hesabi kaydedildi."}),v(tv()),e.invalidateQueries({queryKey:["admin-users"]})},onError:ce=>{const Re=Le(ce,"Admin kullanici olusturulamadi.");i({variant:"error",title:"Kayit basarisiz",description:Re.message})}}),Me=Xe({mutationFn:({userId:ce,payload:Re})=>H2(ce,Re),onSuccess:()=>{i({variant:"success",title:"Admin kullanici guncellendi",description:"Kullanici yetkileri guncellendi."}),S(null),M(""),e.invalidateQueries({queryKey:["admin-users"]})},onError:ce=>{const Re=Le(ce,"Admin kullanici guncellenemedi.");i({variant:"error",title:"Guncelleme basarisiz",description:Re.message})}}),Ze=Xe({mutationFn:K2,onSuccess:()=>{i({variant:"success",title:"Admin kullanici silindi",description:"Kullanici kaydi sistemden kaldirildi."}),e.invalidateQueries({queryKey:["admin-users"]})},onError:ce=>{const Re=Le(ce,"Admin kullanici silinemedi.");i({variant:"error",title:"Silme basarisiz",description:Re.message})}}),Ve=Xe({mutationFn:ce=>G2(ce),onSuccess:ce=>{ue(ce),ne(""),J([]),te(null),Z.refetch(),i({variant:"success",title:"MFA kurulumu baslatildi",description:"QR kodu taratip 6 haneli kodu onaylayin."})},onError:ce=>{const Re=Le(ce,"MFA kurulumu baslatilamadi.");i({variant:"error",title:"MFA kurulum hatasi",description:Re.message})}}),qe=Xe({mutationFn:({adminUserId:ce,code:Re})=>V2(ce,{code:Re}),onSuccess:ce=>{J(ce.recovery_codes),te(ce.recovery_code_expires_at),ue(null),ne(""),e.invalidateQueries({queryKey:["admin-users"]}),Z.refetch(),i({variant:"success",title:"MFA aktif edildi",description:"Recovery kodlari olusturuldu."})},onError:ce=>{const Re=Le(ce,"MFA kodu dogrulanamadi.");i({variant:"error",title:"MFA onay hatasi",description:Re.message})}}),Ne=Xe({mutationFn:({adminUserId:ce,currentPassword:Re})=>Y2(ce,{current_password:Re}),onSuccess:ce=>{J(ce.recovery_codes),te(ce.recovery_code_expires_at),B(""),Z.refetch(),i({variant:"success",title:"Recovery kodlari yenilendi",description:"Eski kodlar pasif edildi."})},onError:ce=>{const Re=Le(ce,"Recovery kodlari yenilenemedi.");i({variant:"error",title:"Yenileme hatasi",description:Re.message})}}),tt=Xe({mutationFn:({adminUserId:ce,currentPassword:Re})=>$2(ce,{current_password:Re}),onSuccess:()=>{ue(null),ne(""),de(null),J([]),te(null),B(""),e.invalidateQueries({queryKey:["admin-users"]}),Z.refetch(),i({variant:"success",title:"MFA sifirlandi",description:"Kullanici tekrar MFA kurabilir."})},onError:ce=>{const Re=Le(ce,"MFA sifirlanamadi.");i({variant:"error",title:"Sifirlama hatasi",description:Re.message})}});_.useEffect(()=>{if(!ee?.otpauth_uri){de(null);return}let ce=!1;return Mf.toDataURL(ee.otpauth_uri,{margin:1,width:220}).then(Re=>{ce||de(Re)}).catch(()=>{ce||de(null)}),()=>{ce=!0}},[ee]);const bt=_.useMemo(()=>[...P.data??[]].sort((Re,ct)=>Re.username.localeCompare(ct.username)),[P.data]),rt=Z.data;if(!h)return a.jsx(St,{message:"Bu alani goruntuleme yetkiniz yok."});if(P.isLoading)return a.jsx(Ot,{label:"Admin kullanicilar yukleniyor..."});if(P.isError)return a.jsx(St,{message:"Admin kullanici listesi alinamadi."});const pt=ce=>{if(ce.preventDefault(),!!f){if(!o){i({variant:"info",title:"Yetki siniri",description:"Sadece super admin yeni admin kullanici olusturabilir."});return}if(x.password.length<8){i({variant:"error",title:"Kayit basarisiz",description:"Sifre alani en az 8 karakter olmali."});return}Se.mutate({username:x.username.trim(),full_name:x.full_name.trim()||null,password:x.password,is_active:x.is_active,is_super_admin:x.is_super_admin,permissions:x.is_super_admin?Jo():x.permissions})}},Ut=ce=>{S(ce),T(ce.username),k(ce.full_name??""),M(""),R(ce.is_active),K(ce.is_super_admin),V(Qz(ce.permissions))},Dt=ce=>{Q(ce)},mt=()=>{Q(null)},rn=ce=>{ve(ce),ue(null),ne(""),B(""),de(null),J([]),te(null)},se=()=>{ve(null),ue(null),ne(""),B(""),de(null),J([]),te(null)},Ae=ce=>{if(ce.preventDefault(),!(!b||!f)){if(A.trim()&&A.trim().length<8){i({variant:"error",title:"Guncelleme basarisiz",description:"Yeni sifre en az 8 karakter olmali."});return}Me.mutate({userId:b.id,payload:{username:w.trim(),full_name:z.trim()||null,password:A.trim()?A:void 0,is_active:I,is_super_admin:D,permissions:D?Jo():G}})}},Ke=ce=>{ce.preventDefault(),!(!ae||!_e.trim())&&qe.mutate({adminUserId:ae.id,code:_e.trim()})};return a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"Admin Kullanici ve Yetki Yonetimi",description:"Belirli modullere erisebilen read-only veya tam yetkili admin hesaplari olusturun."}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"mb-3 text-base font-semibold text-slate-900",children:"Yeni Admin Kullanici"}),a.jsxs("p",{className:"mb-3 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:["Sistem super admin hesabi: ",a.jsx("strong",{children:"admin"})," (env). Bu hesap her zaman tam yetkilidir."]}),o?null:a.jsx("p",{className:"mb-3 rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-sm text-amber-800",children:"Sadece super admin hesaplari yeni admin olusturabilir ve yetki duzenleyebilir."}),a.jsxs("form",{onSubmit:pt,className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Kullanici Adi",a.jsx("input",{value:x.username,onChange:ce=>v(Re=>({...Re,username:ce.target.value})),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"ik_readonly"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Ad Soyad",a.jsx("input",{value:x.full_name,onChange:ce=>v(Re=>({...Re,full_name:ce.target.value})),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"IK Operasyon"})]}),a.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Sifre",a.jsx("input",{type:"password",value:x.password,onChange:ce=>v(Re=>({...Re,password:ce.target.value})),disabled:!f||!o,minLength:8,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"En az 8 karakter"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-700",children:[a.jsxs("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:x.is_active,disabled:!f||!o,onChange:ce=>v(Re=>({...Re,is_active:ce.target.checked}))}),"Aktif"]}),a.jsxs("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:x.is_super_admin,disabled:!f||!o,onChange:ce=>v(Re=>({...Re,is_super_admin:ce.target.checked}))}),"Super Admin"]})]}),x.is_super_admin?a.jsx("p",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:"Super admin secili oldugu icin tum modullerde tam yetki verilecektir."}):a.jsx(ev,{value:x.permissions,disabled:!f||!o,onChange:ce=>v(Re=>({...Re,permissions:ce}))}),a.jsx("button",{type:"submit",disabled:!f||!o||Se.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Se.isPending?"Kaydediliyor...":"Kullanici Olustur"})]})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"mb-3 text-base font-semibold text-slate-900",children:"Mevcut Admin Kullanicilar"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"ID"}),a.jsx("th",{className:"py-2",children:"Kullanici"}),a.jsx("th",{className:"py-2",children:"Ad Soyad"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2",children:"Rol"}),a.jsx("th",{className:"py-2",children:"MFA"}),a.jsx("th",{className:"py-2",children:"Islem"})]})}),a.jsx("tbody",{children:bt.map(ce=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:ce.id}),a.jsx("td",{className:"py-2 font-medium text-slate-900",children:ce.username}),a.jsx("td",{className:"py-2",children:ce.full_name??"-"}),a.jsx("td",{className:"py-2",children:a.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${ce.is_active?"bg-emerald-100 text-emerald-800":"bg-rose-100 text-rose-800"}`,children:ce.is_active?"Aktif":"Pasif"})}),a.jsx("td",{className:"py-2",children:ce.is_super_admin?"Super Admin":"Yetkili Admin"}),a.jsx("td",{className:"py-2",children:a.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${ce.mfa_enabled?"bg-emerald-100 text-emerald-800":ce.mfa_secret_configured?"bg-amber-100 text-amber-800":"bg-slate-100 text-slate-700"}`,children:ce.mfa_enabled?"Aktif":ce.mfa_secret_configured?"Kurulum Bekliyor":"Kapali"})}),a.jsx("td",{className:"py-2",children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{type:"button",onClick:()=>Dt(ce),className:"rounded-lg border border-emerald-300 px-3 py-1 text-xs font-medium text-emerald-700 hover:bg-emerald-50",children:"Detay"}),a.jsx("button",{type:"button",disabled:!(o||(d?.admin_user_id??0)===ce.id),onClick:()=>rn(ce),className:"rounded-lg border border-brand-200 px-3 py-1 text-xs font-medium text-brand-700 hover:bg-brand-50 disabled:opacity-50",children:"MFA"}),a.jsx("button",{type:"button",disabled:!f||!o,onClick:()=>Ut(ce),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50",children:"Duzenle"}),a.jsx("button",{type:"button",disabled:!f||!o||Ze.isPending,onClick:()=>{window.confirm(`${ce.username} kullanicisini silmek istediginize emin misiniz?`)&&Ze.mutate(ce.id)},className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50 disabled:opacity-50",children:"Sil"})]})})]},ce.id))})]})}),bt.length===0?a.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Kayitli admin kullanici bulunamadi."}):null]}),a.jsx(Zs,{open:!!q,title:q?`Admin Detay: ${q.username}`:"Admin Detay",onClose:mt,children:q?a.jsxs("div",{className:"space-y-4",children:[me.isLoading?a.jsx("p",{className:"text-sm text-slate-500",children:"Detay yukleniyor..."}):null,me.isError?a.jsx(St,{message:"Admin claim detayi alinamadi."}):null,me.data?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid gap-2 md:grid-cols-3",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm",children:["Toplam claim: ",a.jsx("strong",{children:me.data.claim_total})]}),a.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",children:["Aktif claim: ",a.jsx("strong",{children:me.data.claim_active_total})]}),a.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:["Pasif claim: ",a.jsx("strong",{children:me.data.claim_inactive_total})]})]}),a.jsxs("section",{children:[a.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Bagli Cihaz / Claim Listesi"}),a.jsxs("div",{className:"mt-2 max-h-60 overflow-auto rounded-lg border border-slate-200",children:[a.jsxs("table",{className:"min-w-full text-left text-xs",children:[a.jsx("thead",{className:"sticky top-0 bg-slate-50 uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-2",children:"ID"}),a.jsx("th",{className:"px-2 py-2",children:"Durum"}),a.jsx("th",{className:"px-2 py-2",children:"Fingerprint"}),a.jsx("th",{className:"px-2 py-2",children:"Son Gorulme"}),a.jsx("th",{className:"px-2 py-2",children:"Hata"}),a.jsx("th",{className:"px-2 py-2",children:"Tarayici"}),a.jsx("th",{className:"px-2 py-2",children:"Endpoint"})]})}),a.jsx("tbody",{children:me.data.claims.map(ce=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"px-2 py-2",children:ce.id}),a.jsx("td",{className:"px-2 py-2",children:a.jsx("span",{className:`rounded-full px-2 py-1 text-[11px] font-semibold ${ce.is_active?"bg-emerald-100 text-emerald-800":"bg-rose-100 text-rose-800"}`,children:ce.is_active?"Aktif":"Pasif"})}),a.jsx("td",{className:"px-2 py-2 font-mono text-[11px]",children:ce.endpoint_fingerprint}),a.jsx("td",{className:"px-2 py-2",children:lf(ce.last_seen_at)}),a.jsx("td",{className:"px-2 py-2",children:ce.last_error?.trim()?ce.last_error:"-"}),a.jsx("td",{className:"px-2 py-2",title:ce.user_agent??"-",children:Gz(ce.user_agent)}),a.jsx("td",{className:"px-2 py-2 font-mono text-[11px]",title:ce.endpoint,children:Vz(ce.endpoint)})]},ce.id))})]}),me.data.claims.length===0?a.jsx("p",{className:"px-2 py-2 text-sm text-slate-500",children:"Bu kullanici icin claim kaydi yok."}):null]})]}),a.jsxs("section",{children:[a.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Olusturulan Claim Davetleri"}),a.jsxs("div",{className:"mt-2 max-h-40 overflow-auto rounded-lg border border-slate-200",children:[a.jsxs("table",{className:"min-w-full text-left text-xs",children:[a.jsx("thead",{className:"sticky top-0 bg-slate-50 uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-2",children:"ID"}),a.jsx("th",{className:"px-2 py-2",children:"Durum"}),a.jsx("th",{className:"px-2 py-2",children:"Deneme"}),a.jsx("th",{className:"px-2 py-2",children:"Bitis"}),a.jsx("th",{className:"px-2 py-2",children:"Kullanan"})]})}),a.jsx("tbody",{children:me.data.created_invites.map(ce=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"px-2 py-2",children:ce.id}),a.jsx("td",{className:"px-2 py-2",children:ce.status}),a.jsxs("td",{className:"px-2 py-2",children:[ce.attempt_count,"/",ce.max_attempts]}),a.jsx("td",{className:"px-2 py-2",children:lf(ce.expires_at)}),a.jsx("td",{className:"px-2 py-2",children:ce.used_by_username??"-"})]},ce.id))})]}),me.data.created_invites.length===0?a.jsx("p",{className:"px-2 py-2 text-sm text-slate-500",children:"Kayit yok."}):null]})]}),a.jsxs("section",{children:[a.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Kullandigi Claim Davetleri"}),a.jsxs("div",{className:"mt-2 max-h-40 overflow-auto rounded-lg border border-slate-200",children:[a.jsxs("table",{className:"min-w-full text-left text-xs",children:[a.jsx("thead",{className:"sticky top-0 bg-slate-50 uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-2",children:"ID"}),a.jsx("th",{className:"px-2 py-2",children:"Durum"}),a.jsx("th",{className:"px-2 py-2",children:"Olusturan"}),a.jsx("th",{className:"px-2 py-2",children:"Kullanilan Zaman"})]})}),a.jsx("tbody",{children:me.data.used_invites.map(ce=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"px-2 py-2",children:ce.id}),a.jsx("td",{className:"px-2 py-2",children:ce.status}),a.jsx("td",{className:"px-2 py-2",children:ce.created_by_username}),a.jsx("td",{className:"px-2 py-2",children:lf(ce.used_at)})]},ce.id))})]}),me.data.used_invites.length===0?a.jsx("p",{className:"px-2 py-2 text-sm text-slate-500",children:"Kayit yok."}):null]})]})]}):null]}):null}),a.jsx(Zs,{open:!!b,title:"Admin Kullanici Duzenle",onClose:()=>{S(null),M("")},children:b?a.jsxs("form",{onSubmit:Ae,className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Kullanici Adi",a.jsx("input",{value:w,onChange:ce=>T(ce.target.value),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Ad Soyad",a.jsx("input",{value:z,onChange:ce=>k(ce.target.value),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Yeni Sifre (bos birakilirsa degismez)",a.jsx("input",{type:"password",value:A,onChange:ce=>M(ce.target.value),disabled:!f||!o,minLength:8,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Opsiyonel"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-700",children:[a.jsxs("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:I,disabled:!f||!o,onChange:ce=>R(ce.target.checked)}),"Aktif"]}),a.jsxs("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:D,disabled:!f||!o,onChange:ce=>K(ce.target.checked)}),"Super Admin"]})]}),D?a.jsx("p",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:"Super admin secili oldugu icin tum modullerde tam yetki verilecektir."}):a.jsx(ev,{value:G,disabled:!f||!o,onChange:V}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{S(null),M("")},className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50",children:"Vazgec"}),a.jsx("button",{type:"submit",disabled:!f||!o||Me.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Me.isPending?"Kaydediliyor...":"Guncelle"})]})]}):null}),a.jsx(Zs,{open:!!ae,title:ae?`MFA Yonetimi: ${ae.username}`:"MFA Yonetimi",onClose:se,children:ae?a.jsxs("div",{className:"space-y-4",children:[Z.isLoading?a.jsx("p",{className:"text-sm text-slate-500",children:"MFA durumu yukleniyor..."}):null,rt?a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-3 text-sm text-slate-700",children:[a.jsxs("p",{children:["Durum:"," ",a.jsx("strong",{children:rt.mfa_enabled?"MFA aktif":rt.has_secret?"Kurulum bekliyor":"Kapali"})]}),a.jsxs("p",{children:["Aktif recovery kodu: ",rt.recovery_code_active_count]}),a.jsxs("p",{children:["Son guncelleme:"," ",rt.updated_at?new Date(rt.updated_at).toLocaleString("tr-TR"):"-"]}),a.jsxs("p",{children:["Kod son gecerlilik:"," ",rt.recovery_code_expires_at?new Date(rt.recovery_code_expires_at).toLocaleDateString("tr-TR"):"-"]})]}):null,a.jsx("div",{className:"flex flex-wrap gap-2",children:a.jsx("button",{type:"button",disabled:Ve.isPending,onClick:()=>Ve.mutate(ae.id),className:"rounded-lg border border-brand-300 px-3 py-2 text-xs font-semibold text-brand-700 hover:bg-brand-50 disabled:opacity-60",children:Ve.isPending?"Baslatiliyor...":"Kurulumu Baslat / Yenile"})}),ee?a.jsxs("form",{onSubmit:Ke,className:"space-y-3 rounded-lg border border-brand-100 bg-brand-50/40 px-3 py-3",children:[a.jsx("p",{className:"text-sm font-medium text-brand-900",children:"1) Authenticator ile QR kodu tarat"}),X?a.jsx("img",{src:X,alt:"MFA QR",className:"h-44 w-44 rounded-lg border border-brand-200 bg-white p-2"}):a.jsx("p",{className:"text-xs text-slate-600",children:"QR olusturulamadi. Asagidaki anahtari manuel girin."}),a.jsxs("p",{className:"text-xs text-slate-700",children:["Secret: ",a.jsx("code",{children:ee.secret_key})]}),a.jsx("p",{className:"text-xs text-slate-600 break-all",children:ee.otpauth_uri}),a.jsxs("label",{className:"block text-sm text-slate-700",children:["2) Uretilen 6 haneli kod",a.jsx("input",{value:_e,onChange:ce=>ne(ce.target.value),inputMode:"numeric",pattern:"[0-9]*",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"123456"})]}),a.jsx("button",{type:"submit",disabled:qe.isPending||!_e.trim(),className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:qe.isPending?"Onaylaniyor...":"MFA Kurulumunu Onayla"})]}):null,a.jsxs("div",{className:"space-y-2 rounded-lg border border-slate-200 px-3 py-3",children:[a.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Kritik Islemler (Sizin sifreniz gerekli)"}),a.jsxs("label",{className:"block text-sm text-slate-700",children:["Mevcut sifreniz",a.jsx("input",{type:"password",value:W,onChange:ce=>B(ce.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Sizin admin sifreniz"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{type:"button",disabled:Ne.isPending||!W.trim()||!rt?.mfa_enabled,onClick:()=>{W.trim()&&Ne.mutate({adminUserId:ae.id,currentPassword:W})},className:"rounded-lg border border-emerald-300 px-3 py-2 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:Ne.isPending?"Yenileniyor...":"Recovery Kodlarini Yenile"}),a.jsx("button",{type:"button",disabled:tt.isPending||!W.trim(),onClick:()=>{!window.confirm(`${ae.username} icin MFA sifirlansin mi?`)||!W.trim()||tt.mutate({adminUserId:ae.id,currentPassword:W})},className:"rounded-lg border border-rose-300 px-3 py-2 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:tt.isPending?"Sifirlaniyor...":"MFA Sifirla"})]})]}),ke.length>0?a.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-3 text-sm text-amber-900",children:[a.jsx("p",{className:"font-semibold",children:"Recovery kodlari (tek seferlik gosterim)"}),a.jsxs("p",{className:"mt-1 text-xs",children:["Gecerlilik:"," ",O?new Date(O).toLocaleDateString("tr-TR"):"-"]}),a.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:ke.map(ce=>a.jsx("code",{className:"rounded bg-white px-2 py-1 text-slate-900",children:ce},ce))})]}):null]}):null})]})}function nv({label:e,value:i,onCopy:l}){return a.jsxs("label",{className:"block text-sm text-slate-700",children:[e,a.jsxs("div",{className:"mt-1 flex items-stretch gap-2",children:[a.jsx("input",{readOnly:!0,value:i,className:"w-full rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm text-slate-700"}),a.jsx("button",{type:"button",onClick:()=>l(i),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:"Kopyala"})]})]})}var Xo={exports:{}};var $z=Xo.exports,av;function Xz(){return av||(av=1,(function(e,i){(function(l,o){o(i)})($z,(function(l){var o="1.9.4";function d(s){var u,m,y,N;for(m=1,y=arguments.length;m<y;m++){N=arguments[m];for(u in N)s[u]=N[u]}return s}var h=Object.create||(function(){function s(){}return function(u){return s.prototype=u,new s}})();function f(s,u){var m=Array.prototype.slice;if(s.bind)return s.bind.apply(s,m.call(arguments,1));var y=m.call(arguments,2);return function(){return s.apply(u,y.length?y.concat(m.call(arguments)):arguments)}}var x=0;function v(s){return"_leaflet_id"in s||(s._leaflet_id=++x),s._leaflet_id}function b(s,u,m){var y,N,E,F;return F=function(){y=!1,N&&(E.apply(m,N),N=!1)},E=function(){y?N=arguments:(s.apply(m,arguments),setTimeout(F,u),y=!0)},E}function S(s,u,m){var y=u[1],N=u[0],E=y-N;return s===y&&m?s:((s-N)%E+E)%E+N}function w(){return!1}function T(s,u){if(u===!1)return s;var m=Math.pow(10,u===void 0?6:u);return Math.round(s*m)/m}function z(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function k(s){return z(s).split(/\s+/)}function A(s,u){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?h(s.options):{});for(var m in u)s.options[m]=u[m];return s.options}function M(s,u,m){var y=[];for(var N in s)y.push(encodeURIComponent(m?N.toUpperCase():N)+"="+encodeURIComponent(s[N]));return(!u||u.indexOf("?")===-1?"?":"&")+y.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function R(s,u){return s.replace(I,function(m,y){var N=u[y];if(N===void 0)throw new Error("No value provided for variable "+m);return typeof N=="function"&&(N=N(u)),N})}var D=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function K(s,u){for(var m=0;m<s.length;m++)if(s[m]===u)return m;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function V(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var q=0;function Q(s){var u=+new Date,m=Math.max(0,16-(u-q));return q=u+m,window.setTimeout(s,m)}var ae=window.requestAnimationFrame||V("RequestAnimationFrame")||Q,ve=window.cancelAnimationFrame||V("CancelAnimationFrame")||V("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function ee(s,u,m){if(m&&ae===Q)s.call(u);else return ae.call(window,f(s,u))}function ue(s){s&&ve.call(window,s)}var _e={__proto__:null,extend:d,create:h,bind:f,get lastId(){return x},stamp:v,throttle:b,wrapNum:S,falseFn:w,formatNum:T,trim:z,splitWords:k,setOptions:A,getParamString:M,template:R,isArray:D,indexOf:K,emptyImageUrl:G,requestFn:ae,cancelFn:ve,requestAnimFrame:ee,cancelAnimFrame:ue};function ne(){}ne.extend=function(s){var u=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=u.__super__=this.prototype,y=h(m);y.constructor=u,u.prototype=y;for(var N in this)Object.prototype.hasOwnProperty.call(this,N)&&N!=="prototype"&&N!=="__super__"&&(u[N]=this[N]);return s.statics&&d(u,s.statics),s.includes&&(W(s.includes),d.apply(null,[y].concat(s.includes))),d(y,s),delete y.statics,delete y.includes,y.options&&(y.options=m.options?h(m.options):{},d(y.options,s.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,F=y._initHooks.length;E<F;E++)y._initHooks[E].call(this)}},u},ne.include=function(s){var u=this.prototype.options;return d(this.prototype,s),s.options&&(this.prototype.options=u,this.mergeOptions(s.options)),this},ne.mergeOptions=function(s){return d(this.prototype.options,s),this},ne.addInitHook=function(s){var u=Array.prototype.slice.call(arguments,1),m=typeof s=="function"?s:function(){this[s].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function W(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=D(s)?s:[s];for(var u=0;u<s.length;u++)s[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var B={on:function(s,u,m){if(typeof s=="object")for(var y in s)this._on(y,s[y],u);else{s=k(s);for(var N=0,E=s.length;N<E;N++)this._on(s[N],u,m)}return this},off:function(s,u,m){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var y in s)this._off(y,s[y],u);else{s=k(s);for(var N=arguments.length===1,E=0,F=s.length;E<F;E++)N?this._off(s[E]):this._off(s[E],u,m)}return this},_on:function(s,u,m,y){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(s,u,m)===!1){m===this&&(m=void 0);var N={fn:u,ctx:m};y&&(N.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(N)}},_off:function(s,u,m){var y,N,E;if(this._events&&(y=this._events[s],!!y)){if(arguments.length===1){if(this._firingCount)for(N=0,E=y.length;N<E;N++)y[N].fn=w;delete this._events[s];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var F=this._listens(s,u,m);if(F!==!1){var oe=y[F];this._firingCount&&(oe.fn=w,this._events[s]=y=y.slice()),y.splice(F,1)}}},fire:function(s,u,m){if(!this.listens(s,m))return this;var y=d({},u,{type:s,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var N=this._events[s];if(N){this._firingCount=this._firingCount+1||1;for(var E=0,F=N.length;E<F;E++){var oe=N[E],pe=oe.fn;oe.once&&this.off(s,pe,oe.ctx),pe.call(oe.ctx||this,y)}this._firingCount--}}return m&&this._propagateEvent(y),this},listens:function(s,u,m,y){typeof s!="string"&&console.warn('"string" type argument expected');var N=u;typeof u!="function"&&(y=!!u,N=void 0,m=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,N,m)!==!1)return!0;if(y){for(var F in this._eventParents)if(this._eventParents[F].listens(s,u,m,y))return!0}return!1},_listens:function(s,u,m){if(!this._events)return!1;var y=this._events[s]||[];if(!u)return!!y.length;m===this&&(m=void 0);for(var N=0,E=y.length;N<E;N++)if(y[N].fn===u&&y[N].ctx===m)return N;return!1},once:function(s,u,m){if(typeof s=="object")for(var y in s)this._on(y,s[y],u,!0);else{s=k(s);for(var N=0,E=s.length;N<E;N++)this._on(s[N],u,m,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[v(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[v(s)],this},_propagateEvent:function(s){for(var u in this._eventParents)this._eventParents[u].fire(s.type,d({layer:s.target,propagatedFrom:s.target},s),!0)}};B.addEventListener=B.on,B.removeEventListener=B.clearAllEventListeners=B.off,B.addOneTimeEventListener=B.once,B.fireEvent=B.fire,B.hasEventListeners=B.listens;var X=ne.extend(B);function de(s,u,m){this.x=m?Math.round(s):s,this.y=m?Math.round(u):u}var ke=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};de.prototype={clone:function(){return new de(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new de(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new de(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ke(this.x),this.y=ke(this.y),this},distanceTo:function(s){s=J(s);var u=s.x-this.x,m=s.y-this.y;return Math.sqrt(u*u+m*m)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function J(s,u,m){return s instanceof de?s:D(s)?new de(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new de(s.x,s.y):new de(s,u,m)}function O(s,u){if(s)for(var m=u?[s,u]:s,y=0,N=m.length;y<N;y++)this.extend(m[y])}O.prototype={extend:function(s){var u,m;if(!s)return this;if(s instanceof de||typeof s[0]=="number"||"x"in s)u=m=J(s);else if(s=te(s),u=s.min,m=s.max,!u||!m)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=m.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var u,m;return typeof s[0]=="number"||s instanceof de?s=J(s):s=te(s),s instanceof O?(u=s.min,m=s.max):u=m=s,u.x>=this.min.x&&m.x<=this.max.x&&u.y>=this.min.y&&m.y<=this.max.y},intersects:function(s){s=te(s);var u=this.min,m=this.max,y=s.min,N=s.max,E=N.x>=u.x&&y.x<=m.x,F=N.y>=u.y&&y.y<=m.y;return E&&F},overlaps:function(s){s=te(s);var u=this.min,m=this.max,y=s.min,N=s.max,E=N.x>u.x&&y.x<m.x,F=N.y>u.y&&y.y<m.y;return E&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var u=this.min,m=this.max,y=Math.abs(u.x-m.x)*s,N=Math.abs(u.y-m.y)*s;return te(J(u.x-y,u.y-N),J(m.x+y,m.y+N))},equals:function(s){return s?(s=te(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function te(s,u){return!s||s instanceof O?s:new O(s,u)}function P(s,u){if(s)for(var m=u?[s,u]:s,y=0,N=m.length;y<N;y++)this.extend(m[y])}P.prototype={extend:function(s){var u=this._southWest,m=this._northEast,y,N;if(s instanceof me)y=s,N=s;else if(s instanceof P){if(y=s._southWest,N=s._northEast,!y||!N)return this}else return s?this.extend(Se(s)||Z(s)):this;return!u&&!m?(this._southWest=new me(y.lat,y.lng),this._northEast=new me(N.lat,N.lng)):(u.lat=Math.min(y.lat,u.lat),u.lng=Math.min(y.lng,u.lng),m.lat=Math.max(N.lat,m.lat),m.lng=Math.max(N.lng,m.lng)),this},pad:function(s){var u=this._southWest,m=this._northEast,y=Math.abs(u.lat-m.lat)*s,N=Math.abs(u.lng-m.lng)*s;return new P(new me(u.lat-y,u.lng-N),new me(m.lat+y,m.lng+N))},getCenter:function(){return new me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new me(this.getNorth(),this.getWest())},getSouthEast:function(){return new me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof me||"lat"in s?s=Se(s):s=Z(s);var u=this._southWest,m=this._northEast,y,N;return s instanceof P?(y=s.getSouthWest(),N=s.getNorthEast()):y=N=s,y.lat>=u.lat&&N.lat<=m.lat&&y.lng>=u.lng&&N.lng<=m.lng},intersects:function(s){s=Z(s);var u=this._southWest,m=this._northEast,y=s.getSouthWest(),N=s.getNorthEast(),E=N.lat>=u.lat&&y.lat<=m.lat,F=N.lng>=u.lng&&y.lng<=m.lng;return E&&F},overlaps:function(s){s=Z(s);var u=this._southWest,m=this._northEast,y=s.getSouthWest(),N=s.getNorthEast(),E=N.lat>u.lat&&y.lat<m.lat,F=N.lng>u.lng&&y.lng<m.lng;return E&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,u){return s?(s=Z(s),this._southWest.equals(s.getSouthWest(),u)&&this._northEast.equals(s.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Z(s,u){return s instanceof P?s:new P(s,u)}function me(s,u,m){if(isNaN(s)||isNaN(u))throw new Error("Invalid LatLng object: ("+s+", "+u+")");this.lat=+s,this.lng=+u,m!==void 0&&(this.alt=+m)}me.prototype={equals:function(s,u){if(!s)return!1;s=Se(s);var m=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return m<=(u===void 0?1e-9:u)},toString:function(s){return"LatLng("+T(this.lat,s)+", "+T(this.lng,s)+")"},distanceTo:function(s){return Ze.distance(this,Se(s))},wrap:function(){return Ze.wrapLatLng(this)},toBounds:function(s){var u=180*s/40075017,m=u/Math.cos(Math.PI/180*this.lat);return Z([this.lat-u,this.lng-m],[this.lat+u,this.lng+m])},clone:function(){return new me(this.lat,this.lng,this.alt)}};function Se(s,u,m){return s instanceof me?s:D(s)&&typeof s[0]!="object"?s.length===3?new me(s[0],s[1],s[2]):s.length===2?new me(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new me(s.lat,"lng"in s?s.lng:s.lon,s.alt):u===void 0?null:new me(s,u,m)}var Me={latLngToPoint:function(s,u){var m=this.projection.project(s),y=this.scale(u);return this.transformation._transform(m,y)},pointToLatLng:function(s,u){var m=this.scale(u),y=this.transformation.untransform(s,m);return this.projection.unproject(y)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var u=this.projection.bounds,m=this.scale(s),y=this.transformation.transform(u.min,m),N=this.transformation.transform(u.max,m);return new O(y,N)},infinite:!1,wrapLatLng:function(s){var u=this.wrapLng?S(s.lng,this.wrapLng,!0):s.lng,m=this.wrapLat?S(s.lat,this.wrapLat,!0):s.lat,y=s.alt;return new me(m,u,y)},wrapLatLngBounds:function(s){var u=s.getCenter(),m=this.wrapLatLng(u),y=u.lat-m.lat,N=u.lng-m.lng;if(y===0&&N===0)return s;var E=s.getSouthWest(),F=s.getNorthEast(),oe=new me(E.lat-y,E.lng-N),pe=new me(F.lat-y,F.lng-N);return new P(oe,pe)}},Ze=d({},Me,{wrapLng:[-180,180],R:6371e3,distance:function(s,u){var m=Math.PI/180,y=s.lat*m,N=u.lat*m,E=Math.sin((u.lat-s.lat)*m/2),F=Math.sin((u.lng-s.lng)*m/2),oe=E*E+Math.cos(y)*Math.cos(N)*F*F,pe=2*Math.atan2(Math.sqrt(oe),Math.sqrt(1-oe));return this.R*pe}}),Ve=6378137,qe={R:Ve,MAX_LATITUDE:85.0511287798,project:function(s){var u=Math.PI/180,m=this.MAX_LATITUDE,y=Math.max(Math.min(m,s.lat),-m),N=Math.sin(y*u);return new de(this.R*s.lng*u,this.R*Math.log((1+N)/(1-N))/2)},unproject:function(s){var u=180/Math.PI;return new me((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*u,s.x*u/this.R)},bounds:(function(){var s=Ve*Math.PI;return new O([-s,-s],[s,s])})()};function Ne(s,u,m,y){if(D(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=u,this._c=m,this._d=y}Ne.prototype={transform:function(s,u){return this._transform(s.clone(),u)},_transform:function(s,u){return u=u||1,s.x=u*(this._a*s.x+this._b),s.y=u*(this._c*s.y+this._d),s},untransform:function(s,u){return u=u||1,new de((s.x/u-this._b)/this._a,(s.y/u-this._d)/this._c)}};function tt(s,u,m,y){return new Ne(s,u,m,y)}var bt=d({},Ze,{code:"EPSG:3857",projection:qe,transformation:(function(){var s=.5/(Math.PI*qe.R);return tt(s,.5,-s,.5)})()}),rt=d({},bt,{code:"EPSG:900913"});function pt(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Ut(s,u){var m="",y,N,E,F,oe,pe;for(y=0,E=s.length;y<E;y++){for(oe=s[y],N=0,F=oe.length;N<F;N++)pe=oe[N],m+=(N?"L":"M")+pe.x+" "+pe.y;m+=u?Ue.svg?"z":"x":""}return m||"M0 0"}var Dt=document.documentElement.style,mt="ActiveXObject"in window,rn=mt&&!document.addEventListener,se="msLaunchUri"in navigator&&!("documentMode"in document),Ae=Nn("webkit"),Ke=Nn("android"),ce=Nn("android 2")||Nn("android 3"),Re=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ct=Ke&&Nn("Google")&&Re<537&&!("AudioNode"in window),be=!!window.opera,He=!se&&Nn("chrome"),lt=Nn("gecko")&&!Ae&&!be&&!mt,at=!He&&Nn("safari"),tn=Nn("phantom"),re="OTransition"in Dt,Y=navigator.platform.indexOf("Win")===0,Ye=mt&&"transition"in Dt,st="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ce,Vt="MozPerspective"in Dt,wt=!window.L_DISABLE_3D&&(Ye||st||Vt)&&!re&&!tn,Mn=typeof orientation<"u"||Nn("mobile"),ki=Mn&&Ae,Ci=Mn&&st,Zn=!window.PointerEvent&&window.MSPointerEvent,pa=!!(window.PointerEvent||Zn),Vn="ontouchstart"in window||!!window.TouchEvent,On=!window.L_NO_TOUCH&&(Vn||pa),Ca=Mn&&be,Yn=Mn&&lt,ci=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ti=(function(){var s=!1;try{var u=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",w,u),window.removeEventListener("testPassiveEventSupport",w,u)}catch{}return s})(),ie=(function(){return!!document.createElement("canvas").getContext})(),$e=!!(document.createElementNS&&pt("svg").createSVGRect),zt=!!$e&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Cn=!$e&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var u=s.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}})(),Ya=navigator.platform.indexOf("Mac")===0,Ai=navigator.platform.indexOf("Linux")===0;function Nn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var Ue={ie:mt,ielt9:rn,edge:se,webkit:Ae,android:Ke,android23:ce,androidStock:ct,opera:be,chrome:He,gecko:lt,safari:at,phantom:tn,opera12:re,win:Y,ie3d:Ye,webkit3d:st,gecko3d:Vt,any3d:wt,mobile:Mn,mobileWebkit:ki,mobileWebkit3d:Ci,msPointer:Zn,pointer:pa,touch:On,touchNative:Vn,mobileOpera:Ca,mobileGecko:Yn,retina:ci,passiveEvents:Ti,canvas:ie,svg:$e,vml:Cn,inlineSvg:zt,mac:Ya,linux:Ai},Gs=Ue.msPointer?"MSPointerDown":"pointerdown",as=Ue.msPointer?"MSPointerMove":"pointermove",ga=Ue.msPointer?"MSPointerUp":"pointerup",ln=Ue.msPointer?"MSPointerCancel":"pointercancel",gn={touchstart:Gs,touchmove:as,touchend:ga,touchcancel:ln},$a={touchstart:Xa,touchmove:qn,touchend:qn,touchcancel:qn},Ta={},Ur=!1;function Zl(s,u,m){return u==="touchstart"&&Et(),$a[u]?(m=$a[u].bind(this,m),s.addEventListener(gn[u],m,!1),m):(console.warn("wrong event specified:",u),w)}function Fr(s,u,m){if(!gn[u]){console.warn("wrong event specified:",u);return}s.removeEventListener(gn[u],m,!1)}function zi(s){Ta[s.pointerId]=s}function U(s){Ta[s.pointerId]&&(Ta[s.pointerId]=s)}function Ie(s){delete Ta[s.pointerId]}function Et(){Ur||(document.addEventListener(Gs,zi,!0),document.addEventListener(as,U,!0),document.addEventListener(ga,Ie,!0),document.addEventListener(ln,Ie,!0),Ur=!0)}function qn(s,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var m in Ta)u.touches.push(Ta[m]);u.changedTouches=[u],s(u)}}function Xa(s,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&on(u),qn(s,u)}function nn(s){var u={},m,y;for(y in s)m=s[y],u[y]=m&&m.bind?m.bind(s):m;return s=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var Vs=200;function hu(s,u){s.addEventListener("dblclick",u);var m=0,y;function N(E){if(E.detail!==1){y=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var F=tr(E);if(!(F.some(function(pe){return pe instanceof HTMLLabelElement&&pe.attributes.for})&&!F.some(function(pe){return pe instanceof HTMLInputElement||pe instanceof HTMLSelectElement}))){var oe=Date.now();oe-m<=Vs?(y++,y===2&&u(nn(E))):y=1,m=oe}}}return s.addEventListener("click",N),{dblclick:u,simDblclick:N}}function Mi(s,u){s.removeEventListener("dblclick",u.dblclick),s.removeEventListener("click",u.simDblclick)}var di=Xs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ys=Xs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ql=Ys==="webkitTransition"||Ys==="OTransition"?Ys+"End":"transitionend";function Hl(s){return typeof s=="string"?document.getElementById(s):s}function $s(s,u){var m=s.style[u]||s.currentStyle&&s.currentStyle[u];if((!m||m==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(s,null);m=y?y[u]:null}return m==="auto"?null:m}function gt(s,u,m){var y=document.createElement(s);return y.className=u||"",m&&m.appendChild(y),y}function Ft(s){var u=s.parentNode;u&&u.removeChild(s)}function ta(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function jn(s){var u=s.parentNode;u&&u.lastChild!==s&&u.appendChild(s)}function Oi(s){var u=s.parentNode;u&&u.firstChild!==s&&u.insertBefore(s,u.firstChild)}function Kl(s,u){if(s.classList!==void 0)return s.classList.contains(u);var m=Zr(s);return m.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(m)}function ot(s,u){if(s.classList!==void 0)for(var m=k(u),y=0,N=m.length;y<N;y++)s.classList.add(m[y]);else if(!Kl(s,u)){var E=Zr(s);is(s,(E?E+" ":"")+u)}}function Xt(s,u){s.classList!==void 0?s.classList.remove(u):is(s,z((" "+Zr(s)+" ").replace(" "+u+" "," ")))}function is(s,u){s.className.baseVal===void 0?s.className=u:s.className.baseVal=u}function Zr(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Yt(s,u){"opacity"in s.style?s.style.opacity=u:"filter"in s.style&&Ql(s,u)}function Ql(s,u){var m=!1,y="DXImageTransform.Microsoft.Alpha";try{m=s.filters.item(y)}catch{if(u===1)return}u=Math.round(u*100),m?(m.Enabled=u!==100,m.Opacity=u):s.style.filter+=" progid:"+y+"(opacity="+u+")"}function Xs(s){for(var u=document.documentElement.style,m=0;m<s.length;m++)if(s[m]in u)return s[m];return!1}function Ja(s,u,m){var y=u||new de(0,0);s.style[di]=(Ue.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(m?" scale("+m+")":"")}function Kt(s,u){s._leaflet_pos=u,Ue.any3d?Ja(s,u):(s.style.left=u.x+"px",s.style.top=u.y+"px")}function mi(s){return s._leaflet_pos||new de(0,0)}var ss,Aa,Gl;if("onselectstart"in document)ss=function(){nt(window,"selectstart",on)},Aa=function(){Rt(window,"selectstart",on)};else{var rs=Xs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ss=function(){if(rs){var s=document.documentElement.style;Gl=s[rs],s[rs]="none"}},Aa=function(){rs&&(document.documentElement.style[rs]=Gl,Gl=void 0)}}function qr(){nt(window,"dragstart",on)}function Js(){Rt(window,"dragstart",on)}var Hr,Vl;function ls(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(na(),Hr=s,Vl=s.style.outlineStyle,s.style.outlineStyle="none",nt(window,"keydown",na))}function na(){Hr&&(Hr.style.outlineStyle=Vl,Hr=void 0,Vl=void 0,Rt(window,"keydown",na))}function Kr(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Ws(s){var u=s.getBoundingClientRect();return{x:u.width/s.offsetWidth||1,y:u.height/s.offsetHeight||1,boundingClientRect:u}}var os={__proto__:null,TRANSFORM:di,TRANSITION:Ys,TRANSITION_END:ql,get:Hl,getStyle:$s,create:gt,remove:Ft,empty:ta,toFront:jn,toBack:Oi,hasClass:Kl,addClass:ot,removeClass:Xt,setClass:is,getClass:Zr,setOpacity:Yt,testProp:Xs,setTransform:Ja,setPosition:Kt,getPosition:mi,get disableTextSelection(){return ss},get enableTextSelection(){return Aa},disableImageDrag:qr,enableImageDrag:Js,preventOutline:ls,restoreOutline:na,getSizedParentNode:Kr,getScale:Ws};function nt(s,u,m,y){if(u&&typeof u=="object")for(var N in u)ya(s,N,u[N],m);else{u=k(u);for(var E=0,F=u.length;E<F;E++)ya(s,u[E],m,y)}return this}var xa="_leaflet_events";function Rt(s,u,m,y){if(arguments.length===1)Yl(s),delete s[xa];else if(u&&typeof u=="object")for(var N in u)er(s,N,u[N],m);else if(u=k(u),arguments.length===2)Yl(s,function(oe){return K(u,oe)!==-1});else for(var E=0,F=u.length;E<F;E++)er(s,u[E],m,y);return this}function Yl(s,u){for(var m in s[xa]){var y=m.split(/\d/)[0];(!u||u(y))&&er(s,y,null,null,m)}}var Di={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ya(s,u,m,y){var N=u+v(m)+(y?"_"+v(y):"");if(s[xa]&&s[xa][N])return this;var E=function(oe){return m.call(y||s,oe||window.event)},F=E;!Ue.touchNative&&Ue.pointer&&u.indexOf("touch")===0?E=Zl(s,u,E):Ue.touch&&u==="dblclick"?E=hu(s,E):"addEventListener"in s?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?s.addEventListener(Di[u]||u,E,Ue.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(E=function(oe){oe=oe||window.event,Wa(s,oe)&&F(oe)},s.addEventListener(Di[u],E,!1)):s.addEventListener(u,F,!1):s.attachEvent("on"+u,E),s[xa]=s[xa]||{},s[xa][N]=E}function er(s,u,m,y,N){N=N||u+v(m)+(y?"_"+v(y):"");var E=s[xa]&&s[xa][N];if(!E)return this;!Ue.touchNative&&Ue.pointer&&u.indexOf("touch")===0?Fr(s,u,E):Ue.touch&&u==="dblclick"?Mi(s,E):"removeEventListener"in s?s.removeEventListener(Di[u]||u,E,!1):s.detachEvent("on"+u,E),s[xa][N]=null}function va(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function za(s){return ya(s,"wheel",va),this}function Ri(s){return nt(s,"mousedown touchstart dblclick contextmenu",va),s._leaflet_disable_click=!0,this}function on(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function hi(s){return on(s),va(s),this}function tr(s){if(s.composedPath)return s.composedPath();for(var u=[],m=s.target;m;)u.push(m),m=m.parentNode;return u}function nr(s,u){if(!u)return new de(s.clientX,s.clientY);var m=Ws(u),y=m.boundingClientRect;return new de((s.clientX-y.left)/m.x-u.clientLeft,(s.clientY-y.top)/m.y-u.clientTop)}var fu=Ue.linux&&Ue.chrome?window.devicePixelRatio:Ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Dn(s){return Ue.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/fu:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Wa(s,u){var m=u.relatedTarget;if(!m)return!0;try{for(;m&&m!==s;)m=m.parentNode}catch{return!1}return m!==s}var Qr={__proto__:null,on:nt,off:Rt,stopPropagation:va,disableScrollPropagation:za,disableClickPropagation:Ri,preventDefault:on,stop:hi,getPropagationPath:tr,getMousePosition:nr,getWheelDelta:Dn,isExternalTarget:Wa,addListener:nt,removeListener:Rt},us=X.extend({run:function(s,u,m,y){this.stop(),this._el=s,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=mi(s),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ee(this._animate,this),this._step()},_step:function(s){var u=+new Date-this._startTime,m=this._duration*1e3;u<m?this._runFrame(this._easeOut(u/m),s):(this._runFrame(1),this._complete())},_runFrame:function(s,u){var m=this._startPos.add(this._offset.multiplyBy(s));u&&m._round(),Kt(this._el,m),this.fire("step")},_complete:function(){ue(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),_t=X.extend({options:{crs:bt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,u){u=A(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(Se(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ys&&Ue.any3d&&!Ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),nt(this._proxy,ql,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,u,m){if(u=u===void 0?this._zoom:this._limitZoom(u),s=this._limitCenter(Se(s),u,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=d({animate:m.animate},m.zoom),m.pan=d({animate:m.animate,duration:m.duration},m.pan));var y=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,u,m.zoom):this._tryAnimatedPan(s,m.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(s,u,m.pan&&m.pan.noMoveStart),this},setZoom:function(s,u){return this._loaded?this.setView(this.getCenter(),s,{zoom:u}):(this._zoom=s,this)},zoomIn:function(s,u){return s=s||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,u)},zoomOut:function(s,u){return s=s||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,u)},setZoomAround:function(s,u,m){var y=this.getZoomScale(u),N=this.getSize().divideBy(2),E=s instanceof de?s:this.latLngToContainerPoint(s),F=E.subtract(N).multiplyBy(1-1/y),oe=this.containerPointToLatLng(N.add(F));return this.setView(oe,u,{zoom:m})},_getBoundsCenterZoom:function(s,u){u=u||{},s=s.getBounds?s.getBounds():Z(s);var m=J(u.paddingTopLeft||u.padding||[0,0]),y=J(u.paddingBottomRight||u.padding||[0,0]),N=this.getBoundsZoom(s,!1,m.add(y));if(N=typeof u.maxZoom=="number"?Math.min(u.maxZoom,N):N,N===1/0)return{center:s.getCenter(),zoom:N};var E=y.subtract(m).divideBy(2),F=this.project(s.getSouthWest(),N),oe=this.project(s.getNorthEast(),N),pe=this.unproject(F.add(oe).divideBy(2).add(E),N);return{center:pe,zoom:N}},fitBounds:function(s,u){if(s=Z(s),!s.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(s,u);return this.setView(m.center,m.zoom,u)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,u){return this.setView(s,this._zoom,{pan:u})},panBy:function(s,u){if(s=J(s).round(),u=u||{},!s.x&&!s.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new us,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){ot(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,m,u.duration||.25,u.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,u,m){if(m=m||{},m.animate===!1||!Ue.any3d)return this.setView(s,u,m);this._stop();var y=this.project(this.getCenter()),N=this.project(s),E=this.getSize(),F=this._zoom;s=Se(s),u=u===void 0?F:u;var oe=Math.max(E.x,E.y),pe=oe*this.getZoomScale(F,u),Ce=N.distanceTo(y)||1,De=1.42,Ge=De*De;function ht(an){var ai=an?-1:1,Bi=an?pe:oe,co=pe*pe-oe*oe+ai*Ge*Ge*Ce*Ce,yr=2*Bi*Ge*Ce,vr=co/yr,Ni=Math.sqrt(vr*vr+1)-vr,ii=Ni<1e-9?-18:Math.log(Ni);return ii}function Sn(an){return(Math.exp(an)-Math.exp(-an))/2}function un(an){return(Math.exp(an)+Math.exp(-an))/2}function Xn(an){return Sn(an)/un(an)}var kt=ht(0);function Ct(an){return oe*(un(kt)/un(kt+De*an))}function xt(an){return oe*(un(kt)*Xn(kt+De*an)-Sn(kt))/Ge}function bi(an){return 1-Math.pow(1-an,1.5)}var ra=Date.now(),rl=(ht(1)-kt)/De,_i=m.duration?1e3*m.duration:1e3*rl*.8;function uo(){var an=(Date.now()-ra)/_i,ai=bi(an)*rl;an<=1?(this._flyToFrame=ee(uo,this),this._move(this.unproject(y.add(N.subtract(y).multiplyBy(xt(ai)/Ce)),F),this.getScaleZoom(oe/Ct(ai),F),{flyTo:!0})):this._move(s,u)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),uo.call(this),this},flyToBounds:function(s,u){var m=this._getBoundsCenterZoom(s,u);return this.flyTo(m.center,m.zoom,u)},setMaxBounds:function(s){return s=Z(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var u=this.options.minZoom;return this.options.minZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var u=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,u){this._enforcingBounds=!0;var m=this.getCenter(),y=this._limitCenter(m,this._zoom,Z(s));return m.equals(y)||this.panTo(y,u),this._enforcingBounds=!1,this},panInside:function(s,u){u=u||{};var m=J(u.paddingTopLeft||u.padding||[0,0]),y=J(u.paddingBottomRight||u.padding||[0,0]),N=this.project(this.getCenter()),E=this.project(s),F=this.getPixelBounds(),oe=te([F.min.add(m),F.max.subtract(y)]),pe=oe.getSize();if(!oe.contains(E)){this._enforcingBounds=!0;var Ce=E.subtract(oe.getCenter()),De=oe.extend(E).getSize().subtract(pe);N.x+=Ce.x<0?-De.x:De.x,N.y+=Ce.y<0?-De.y:De.y,this.panTo(this.unproject(N),u),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=d({animate:!1,pan:!0},s===!0?{animate:!0}:s);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),y=u.divideBy(2).round(),N=m.divideBy(2).round(),E=y.subtract(N);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=d({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=f(this._handleGeolocationResponse,this),m=f(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,m,s):navigator.geolocation.getCurrentPosition(u,m,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var u=s.code,m=s.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var u=s.coords.latitude,m=s.coords.longitude,y=new me(u,m),N=y.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var F=this.getBoundsZoom(N);this.setView(y,E.maxZoom?Math.min(F,E.maxZoom):F)}var oe={latlng:y,bounds:N,timestamp:s.timestamp};for(var pe in s.coords)typeof s.coords[pe]=="number"&&(oe[pe]=s.coords[pe]);this.fire("locationfound",oe)}},addHandler:function(s,u){if(!u)return this;var m=this[s]=new u(this);return this._handlers.push(m),this.options[s]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ft(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ue(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ft(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,u){var m="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),y=gt("div",m,u||this._mapPane);return s&&(this._panes[s]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),u=this.unproject(s.getBottomLeft()),m=this.unproject(s.getTopRight());return new P(u,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,u,m){s=Z(s),m=J(m||[0,0]);var y=this.getZoom()||0,N=this.getMinZoom(),E=this.getMaxZoom(),F=s.getNorthWest(),oe=s.getSouthEast(),pe=this.getSize().subtract(m),Ce=te(this.project(oe,y),this.project(F,y)).getSize(),De=Ue.any3d?this.options.zoomSnap:1,Ge=pe.x/Ce.x,ht=pe.y/Ce.y,Sn=u?Math.max(Ge,ht):Math.min(Ge,ht);return y=this.getScaleZoom(Sn,y),De&&(y=Math.round(y/(De/100))*(De/100),y=u?Math.ceil(y/De)*De:Math.floor(y/De)*De),Math.max(N,Math.min(E,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new de(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,u){var m=this._getTopLeftPoint(s,u);return new O(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,u){var m=this.options.crs;return u=u===void 0?this._zoom:u,m.scale(s)/m.scale(u)},getScaleZoom:function(s,u){var m=this.options.crs;u=u===void 0?this._zoom:u;var y=m.zoom(s*m.scale(u));return isNaN(y)?1/0:y},project:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(Se(s),u)},unproject:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(J(s),u)},layerPointToLatLng:function(s){var u=J(s).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(s){var u=this.project(Se(s))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(Se(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Z(s))},distance:function(s,u){return this.options.crs.distance(Se(s),Se(u))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var u=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Se(s)))},mouseEventToContainerPoint:function(s){return nr(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var u=this._container=Hl(s);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");nt(u,"scroll",this._onScroll,this),this._containerId=v(u)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ue.any3d,ot(s,"leaflet-container"+(Ue.touch?" leaflet-touch":"")+(Ue.retina?" leaflet-retina":"")+(Ue.ielt9?" leaflet-oldie":"")+(Ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=$s(s,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Kt(this._mapPane,new de(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ot(s.markerPane,"leaflet-zoom-hide"),ot(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,u,m){Kt(this._mapPane,new de(0,0));var y=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var N=this._zoom!==u;this._moveStart(N,m)._move(s,u)._moveEnd(N),this.fire("viewreset"),y&&this.fire("load")},_moveStart:function(s,u){return s&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(s,u,m,y){u===void 0&&(u=this._zoom);var N=this._zoom!==u;return this._zoom=u,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),y?m&&m.pinch&&this.fire("zoom",m):((N||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ue(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Kt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[v(this._container)]=this;var u=s?Rt:nt;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Ue.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ue(this._resizeRequest),this._resizeRequest=ee(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,u){for(var m=[],y,N=u==="mouseout"||u==="mouseover",E=s.target||s.srcElement,F=!1;E;){if(y=this._targets[v(E)],y&&(u==="click"||u==="preclick")&&this._draggableMoved(y)){F=!0;break}if(y&&y.listens(u,!0)&&(N&&!Wa(E,s)||(m.push(y),N))||E===this._container)break;E=E.parentNode}return!m.length&&!F&&!N&&this.listens(u,!0)&&(m=[this]),m},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var u=s.target||s.srcElement;if(!(!this._loaded||u._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(u))){var m=s.type;m==="mousedown"&&ls(u),this._fireDOMEvent(s,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,u,m){if(s.type==="click"){var y=d({},s);y.type="preclick",this._fireDOMEvent(y,y.type,m)}var N=this._findEventTargets(s,u);if(m){for(var E=[],F=0;F<m.length;F++)m[F].listens(u,!0)&&E.push(m[F]);N=E.concat(N)}if(N.length){u==="contextmenu"&&on(s);var oe=N[0],pe={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Ce=oe.getLatLng&&(!oe._radius||oe._radius<=10);pe.containerPoint=Ce?this.latLngToContainerPoint(oe.getLatLng()):this.mouseEventToContainerPoint(s),pe.layerPoint=this.containerPointToLayerPoint(pe.containerPoint),pe.latlng=Ce?oe.getLatLng():this.layerPointToLatLng(pe.layerPoint)}for(F=0;F<N.length;F++)if(N[F].fire(u,pe,!0),pe.originalEvent._stopped||N[F].options.bubblingMouseEvents===!1&&K(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,u=this._handlers.length;s<u;s++)this._handlers[s].disable()},whenReady:function(s,u){return this._loaded?s.call(u||this,{target:this}):this.on("load",s,u),this},_getMapPanePos:function(){return mi(this._mapPane)||new de(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,u){var m=s&&u!==void 0?this._getNewPixelOrigin(s,u):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,u){var m=this.getSize()._divideBy(2);return this.project(s,u)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,u,m){var y=this._getNewPixelOrigin(m,u);return this.project(s,u)._subtract(y)},_latLngBoundsToNewLayerBounds:function(s,u,m){var y=this._getNewPixelOrigin(m,u);return te([this.project(s.getSouthWest(),u)._subtract(y),this.project(s.getNorthWest(),u)._subtract(y),this.project(s.getSouthEast(),u)._subtract(y),this.project(s.getNorthEast(),u)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,u,m){if(!m)return s;var y=this.project(s,u),N=this.getSize().divideBy(2),E=new O(y.subtract(N),y.add(N)),F=this._getBoundsOffset(E,m,u);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?s:this.unproject(y.add(F),u)},_limitOffset:function(s,u){if(!u)return s;var m=this.getPixelBounds(),y=new O(m.min.add(s),m.max.add(s));return s.add(this._getBoundsOffset(y,u))},_getBoundsOffset:function(s,u,m){var y=te(this.project(u.getNorthEast(),m),this.project(u.getSouthWest(),m)),N=y.min.subtract(s.min),E=y.max.subtract(s.max),F=this._rebound(N.x,-E.x),oe=this._rebound(N.y,-E.y);return new de(F,oe)},_rebound:function(s,u){return s+u>0?Math.round(s-u)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(u))},_limitZoom:function(s){var u=this.getMinZoom(),m=this.getMaxZoom(),y=Ue.any3d?this.options.zoomSnap:1;return y&&(s=Math.round(s/y)*y),Math.max(u,Math.min(m,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,u){var m=this._getCenterOffset(s)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,u),!0)},_createAnimProxy:function(){var s=this._proxy=gt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(u){var m=di,y=this._proxy.style[m];Ja(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),y===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ft(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),u=this.getZoom();Ja(this._proxy,this.project(s,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,u,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(u),N=this._getCenterOffset(s)._divideBy(1-1/y);return m.animate!==!0&&!this.getSize().contains(N)?!1:(ee(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(s,u,!0)},this),!0)},_animateZoom:function(s,u,m,y){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=u,ot(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:u,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $l(s,u){return new _t(s,u)}var $n=ne.extend({options:{position:"topright"},initialize:function(s){A(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var u=this._map;return u&&u.removeControl(this),this.options.position=s,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var u=this._container=this.onAdd(s),m=this.getPosition(),y=s._controlCorners[m];return ot(u,"leaflet-control"),m.indexOf("bottom")!==-1?y.insertBefore(u,y.firstChild):y.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ft(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),ei=function(s){return new $n(s)};_t.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},u="leaflet-",m=this._controlContainer=gt("div",u+"control-container",this._container);function y(N,E){var F=u+N+" "+u+E;s[N+E]=gt("div",F,m)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ft(this._controlCorners[s]);Ft(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ar=$n.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,u,m,y){return m<y?-1:y<m?1:0}},initialize:function(s,u,m){A(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var y in s)this._addLayer(s[y],y);for(y in u)this._addLayer(u[y],y,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return $n.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,u){return this._addLayer(s,u),this._map?this._update():this},addOverlay:function(s,u){return this._addLayer(s,u,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var u=this._getLayer(v(s));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){ot(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ot(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Xt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",u=this._container=gt("div",s),m=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Ri(u),za(u);var y=this._section=gt("section",s+"-list");m&&(this._map.on("click",this.collapse,this),nt(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var N=this._layersLink=gt("a",s+"-toggle",u);N.href="#",N.title="Layers",N.setAttribute("role","button"),nt(N,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){on(E),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=gt("div",s+"-base",y),this._separator=gt("div",s+"-separator",y),this._overlaysList=gt("div",s+"-overlays",y),u.appendChild(y)},_getLayer:function(s){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&v(this._layers[u].layer)===s)return this._layers[u]},_addLayer:function(s,u,m){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:u,overlay:m}),this.options.sortLayers&&this._layers.sort(f(function(y,N){return this.options.sortFunction(y.layer,N.layer,y.name,N.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ta(this._baseLayersList),ta(this._overlaysList),this._layerControlInputs=[];var s,u,m,y,N=0;for(m=0;m<this._layers.length;m++)y=this._layers[m],this._addItem(y),u=u||y.overlay,s=s||!y.overlay,N+=y.overlay?0:1;return this.options.hideSingleBase&&(s=s&&N>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=u&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var u=this._getLayer(v(s.target)),m=u.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;m&&this._map.fire(m,u)},_createRadioElement:function(s,u){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(u?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=m,y.firstChild},_addItem:function(s){var u=document.createElement("label"),m=this._map.hasLayer(s.layer),y;s.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=m):y=this._createRadioElement("leaflet-base-layers_"+v(this),m),this._layerControlInputs.push(y),y.layerId=v(s.layer),nt(y,"click",this._onInputClick,this);var N=document.createElement("span");N.innerHTML=" "+s.name;var E=document.createElement("span");u.appendChild(E),E.appendChild(y),E.appendChild(N);var F=s.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,u,m,y=[],N=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)u=s[E],m=this._getLayer(u.layerId).layer,u.checked?y.push(m):u.checked||N.push(m);for(E=0;E<N.length;E++)this._map.hasLayer(N[E])&&this._map.removeLayer(N[E]);for(E=0;E<y.length;E++)this._map.hasLayer(y[E])||this._map.addLayer(y[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,u,m,y=this._map.getZoom(),N=s.length-1;N>=0;N--)u=s[N],m=this._getLayer(u.layerId).layer,u.disabled=m.options.minZoom!==void 0&&y<m.options.minZoom||m.options.maxZoom!==void 0&&y>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,nt(s,"click",on),this.expand();var u=this;setTimeout(function(){Rt(s,"click",on),u._preventClick=!1})}}),pu=function(s,u,m){return new ar(s,u,m)},Xl=$n.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var u="leaflet-control-zoom",m=gt("div",u+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,u+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,u+"-out",m,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,u,m,y,N){var E=gt("a",m,y);return E.innerHTML=s,E.href="#",E.title=u,E.setAttribute("role","button"),E.setAttribute("aria-label",u),Ri(E),nt(E,"click",hi),nt(E,"click",N,this),nt(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,u="leaflet-disabled";Xt(this._zoomInButton,u),Xt(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ot(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ot(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});_t.mergeOptions({zoomControl:!0}),_t.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Xl,this.addControl(this.zoomControl))});var kd=function(s){return new Xl(s)},gu=$n.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var u="leaflet-control-scale",m=gt("div",u),y=this.options;return this._addScales(y,u+"-line",m),s.on(y.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),m},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,u,m){s.metric&&(this._mScale=gt("div",u,m)),s.imperial&&(this._iScale=gt("div",u,m))},_update:function(){var s=this._map,u=s.getSize().y/2,m=s.distance(s.containerPointToLatLng([0,u]),s.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(m)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var u=this._getRoundNum(s),m=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,m,u/s)},_updateImperial:function(s){var u=s*3.2808399,m,y,N;u>5280?(m=u/5280,y=this._getRoundNum(m),this._updateScale(this._iScale,y+" mi",y/m)):(N=this._getRoundNum(u),this._updateScale(this._iScale,N+" ft",N/u))},_updateScale:function(s,u,m){s.style.width=Math.round(this.options.maxWidth*m)+"px",s.innerHTML=u},_getRoundNum:function(s){var u=Math.pow(10,(Math.floor(s)+"").length-1),m=s/u;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,u*m}}),Jl=function(s){return new gu(s)},Cd='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Wl=$n.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ue.inlineSvg?Cd+" ":"")+"Leaflet</a>"},initialize:function(s){A(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=gt("div","leaflet-control-attribution"),Ri(this._container);for(var u in s._layers)s._layers[u].getAttribution&&this.addAttribution(s._layers[u].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var u in this._attributions)this._attributions[u]&&s.push(u);var m=[];this.options.prefix&&m.push(this.options.prefix),s.length&&m.push(s.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});_t.mergeOptions({attributionControl:!0}),_t.addInitHook(function(){this.options.attributionControl&&new Wl().addTo(this)});var Td=function(s){return new Wl(s)};$n.Layers=ar,$n.Zoom=Xl,$n.Scale=gu,$n.Attribution=Wl,ei.layers=pu,ei.zoom=kd,ei.scale=Jl,ei.attribution=Td;var Ma=ne.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ma.addTo=function(s,u){return s.addHandler(u,this),this};var Ad={Events:B},eo=Ue.touch?"touchstart mousedown":"mousedown",fi=X.extend({options:{clickTolerance:3},initialize:function(s,u,m,y){A(this,y),this._element=s,this._dragStartTarget=u||s,this._preventOutline=m},enable:function(){this._enabled||(nt(this._dragStartTarget,eo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(fi._dragging===this&&this.finishDrag(!0),Rt(this._dragStartTarget,eo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Kl(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){fi._dragging===this&&this.finishDrag();return}if(!(fi._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(fi._dragging=this,this._preventOutline&&ls(this._element),qr(),ss(),!this._moving)){this.fire("down");var u=s.touches?s.touches[0]:s,m=Kr(this._element);this._startPoint=new de(u.clientX,u.clientY),this._startPos=mi(this._element),this._parentScale=Ws(m);var y=s.type==="mousedown";nt(document,y?"mousemove":"touchmove",this._onMove,this),nt(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var u=s.touches&&s.touches.length===1?s.touches[0]:s,m=new de(u.clientX,u.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,on(s),this._moved||(this.fire("dragstart"),this._moved=!0,ot(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ot(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Kt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Xt(document.body,"leaflet-dragging"),this._lastTarget&&(Xt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Rt(document,"mousemove touchmove",this._onMove,this),Rt(document,"mouseup touchend touchcancel",this._onUp,this),Js(),Aa();var u=this._moved&&this._moving;this._moving=!1,fi._dragging=!1,u&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function xu(s,u,m){var y,N=[1,4,2,8],E,F,oe,pe,Ce,De,Ge,ht;for(E=0,De=s.length;E<De;E++)s[E]._code=Li(s[E],u);for(oe=0;oe<4;oe++){for(Ge=N[oe],y=[],E=0,De=s.length,F=De-1;E<De;F=E++)pe=s[E],Ce=s[F],pe._code&Ge?Ce._code&Ge||(ht=Gr(Ce,pe,Ge,u,m),ht._code=Li(ht,u),y.push(ht)):(Ce._code&Ge&&(ht=Gr(Ce,pe,Ge,u,m),ht._code=Li(ht,u),y.push(ht)),y.push(pe));s=y}return s}function yu(s,u){var m,y,N,E,F,oe,pe,Ce,De;if(!s||s.length===0)throw new Error("latlngs not passed");aa(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Ge=Se([0,0]),ht=Z(s),Sn=ht.getNorthWest().distanceTo(ht.getSouthWest())*ht.getNorthEast().distanceTo(ht.getNorthWest());Sn<1700&&(Ge=to(s));var un=s.length,Xn=[];for(m=0;m<un;m++){var kt=Se(s[m]);Xn.push(u.project(Se([kt.lat-Ge.lat,kt.lng-Ge.lng])))}for(oe=pe=Ce=0,m=0,y=un-1;m<un;y=m++)N=Xn[m],E=Xn[y],F=N.y*E.x-E.y*N.x,pe+=(N.x+E.x)*F,Ce+=(N.y+E.y)*F,oe+=F*3;oe===0?De=Xn[0]:De=[pe/oe,Ce/oe];var Ct=u.unproject(J(De));return Se([Ct.lat+Ge.lat,Ct.lng+Ge.lng])}function to(s){for(var u=0,m=0,y=0,N=0;N<s.length;N++){var E=Se(s[N]);u+=E.lat,m+=E.lng,y++}return Se([u/y,m/y])}var no={__proto__:null,clipPolygon:xu,polygonCenter:yu,centroid:to};function vu(s,u){if(!u||!s.length)return s.slice();var m=u*u;return s=Md(s,m),s=_u(s,m),s}function bu(s,u,m){return Math.sqrt(ir(s,u,m,!0))}function zd(s,u,m){return ir(s,u,m)}function _u(s,u){var m=s.length,y=typeof Uint8Array<"u"?Uint8Array:Array,N=new y(m);N[0]=N[m-1]=1,ao(s,N,u,0,m-1);var E,F=[];for(E=0;E<m;E++)N[E]&&F.push(s[E]);return F}function ao(s,u,m,y,N){var E=0,F,oe,pe;for(oe=y+1;oe<=N-1;oe++)pe=ir(s[oe],s[y],s[N],!0),pe>E&&(F=oe,E=pe);E>m&&(u[F]=1,ao(s,u,m,y,F),ao(s,u,m,F,N))}function Md(s,u){for(var m=[s[0]],y=1,N=0,E=s.length;y<E;y++)Od(s[y],s[N])>u&&(m.push(s[y]),N=y);return N<E-1&&m.push(s[E-1]),m}var Nu;function ju(s,u,m,y,N){var E=y?Nu:Li(s,m),F=Li(u,m),oe,pe,Ce;for(Nu=F;;){if(!(E|F))return[s,u];if(E&F)return!1;oe=E||F,pe=Gr(s,u,oe,m,N),Ce=Li(pe,m),oe===E?(s=pe,E=Ce):(u=pe,F=Ce)}}function Gr(s,u,m,y,N){var E=u.x-s.x,F=u.y-s.y,oe=y.min,pe=y.max,Ce,De;return m&8?(Ce=s.x+E*(pe.y-s.y)/F,De=pe.y):m&4?(Ce=s.x+E*(oe.y-s.y)/F,De=oe.y):m&2?(Ce=pe.x,De=s.y+F*(pe.x-s.x)/E):m&1&&(Ce=oe.x,De=s.y+F*(oe.x-s.x)/E),new de(Ce,De,N)}function Li(s,u){var m=0;return s.x<u.min.x?m|=1:s.x>u.max.x&&(m|=2),s.y<u.min.y?m|=4:s.y>u.max.y&&(m|=8),m}function Od(s,u){var m=u.x-s.x,y=u.y-s.y;return m*m+y*y}function ir(s,u,m,y){var N=u.x,E=u.y,F=m.x-N,oe=m.y-E,pe=F*F+oe*oe,Ce;return pe>0&&(Ce=((s.x-N)*F+(s.y-E)*oe)/pe,Ce>1?(N=m.x,E=m.y):Ce>0&&(N+=F*Ce,E+=oe*Ce)),F=s.x-N,oe=s.y-E,y?F*F+oe*oe:new de(N,E)}function aa(s){return!D(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Vr(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),aa(s)}function cs(s,u){var m,y,N,E,F,oe,pe,Ce;if(!s||s.length===0)throw new Error("latlngs not passed");aa(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var De=Se([0,0]),Ge=Z(s),ht=Ge.getNorthWest().distanceTo(Ge.getSouthWest())*Ge.getNorthEast().distanceTo(Ge.getNorthWest());ht<1700&&(De=to(s));var Sn=s.length,un=[];for(m=0;m<Sn;m++){var Xn=Se(s[m]);un.push(u.project(Se([Xn.lat-De.lat,Xn.lng-De.lng])))}for(m=0,y=0;m<Sn-1;m++)y+=un[m].distanceTo(un[m+1])/2;if(y===0)Ce=un[0];else for(m=0,E=0;m<Sn-1;m++)if(F=un[m],oe=un[m+1],N=F.distanceTo(oe),E+=N,E>y){pe=(E-y)/N,Ce=[oe.x-pe*(oe.x-F.x),oe.y-pe*(oe.y-F.y)];break}var kt=u.unproject(J(Ce));return Se([kt.lat+De.lat,kt.lng+De.lng])}var Dd={__proto__:null,simplify:vu,pointToSegmentDistance:bu,closestPointOnSegment:zd,clipSegment:ju,_getEdgeIntersection:Gr,_getBitCode:Li,_sqClosestPointOnSegment:ir,isFlat:aa,_flat:Vr,polylineCenter:cs},Yr={project:function(s){return new de(s.lng,s.lat)},unproject:function(s){return new me(s.y,s.x)},bounds:new O([-180,-90],[180,90])},$r={R:6378137,R_MINOR:6356752314245179e-9,bounds:new O([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var u=Math.PI/180,m=this.R,y=s.lat*u,N=this.R_MINOR/m,E=Math.sqrt(1-N*N),F=E*Math.sin(y),oe=Math.tan(Math.PI/4-y/2)/Math.pow((1-F)/(1+F),E/2);return y=-m*Math.log(Math.max(oe,1e-10)),new de(s.lng*u*m,y)},unproject:function(s){for(var u=180/Math.PI,m=this.R,y=this.R_MINOR/m,N=Math.sqrt(1-y*y),E=Math.exp(-s.y/m),F=Math.PI/2-2*Math.atan(E),oe=0,pe=.1,Ce;oe<15&&Math.abs(pe)>1e-7;oe++)Ce=N*Math.sin(F),Ce=Math.pow((1-Ce)/(1+Ce),N/2),pe=Math.PI/2-2*Math.atan(E*Ce)-F,F+=pe;return new me(F*u,s.x*u/m)}},Su={__proto__:null,LonLat:Yr,Mercator:$r,SphericalMercator:qe},wu=d({},Ze,{code:"EPSG:3395",projection:$r,transformation:(function(){var s=.5/(Math.PI*$r.R);return tt(s,.5,-s,.5)})()}),io=d({},Ze,{code:"EPSG:4326",projection:Yr,transformation:tt(1/180,1,-1/180,.5)}),ds=d({},Me,{projection:Yr,transformation:tt(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,u){var m=u.lng-s.lng,y=u.lat-s.lat;return Math.sqrt(m*m+y*y)},infinite:!0});Me.Earth=Ze,Me.EPSG3395=wu,Me.EPSG3857=bt,Me.EPSG900913=rt,Me.EPSG4326=io,Me.Simple=ds;var ba=X.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[v(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[v(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var u=s.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var m=this.getEvents();u.on(m,this),this.once("remove",function(){u.off(m,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});_t.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var u=v(s);return this._layers[u]?this:(this._layers[u]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var u=v(s);return this._layers[u]?(this._loaded&&s.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return v(s)in this._layers},eachLayer:function(s,u){for(var m in this._layers)s.call(u,this._layers[m]);return this},_addLayers:function(s){s=s?D(s)?s:[s]:[];for(var u=0,m=s.length;u<m;u++)this.addLayer(s[u])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[v(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var u=v(s);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,u=-1/0,m=this._getZoomSpan();for(var y in this._zoomBoundLayers){var N=this._zoomBoundLayers[y].options;s=N.minZoom===void 0?s:Math.min(s,N.minZoom),u=N.maxZoom===void 0?u:Math.max(u,N.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=s===1/0?void 0:s,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ms=ba.extend({initialize:function(s,u){A(this,u),this._layers={};var m,y;if(s)for(m=0,y=s.length;m<y;m++)this.addLayer(s[m])},addLayer:function(s){var u=this.getLayerId(s);return this._layers[u]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var u=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(s){var u=typeof s=="number"?s:this.getLayerId(s);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var u=Array.prototype.slice.call(arguments,1),m,y;for(m in this._layers)y=this._layers[m],y[s]&&y[s].apply(y,u);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,u){for(var m in this._layers)s.call(u,this._layers[m]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return v(s)}}),Rd=function(s,u){return new ms(s,u)},Oa=ms.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),ms.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),ms.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new P;for(var u in this._layers){var m=this._layers[u];s.extend(m.getBounds?m.getBounds():m.getLatLng())}return s}}),Eu=function(s,u){return new Oa(s,u)},Da=ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){A(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,u){var m=this._getIconUrl(s);if(!m){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(m,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(y,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(s,u){var m=this.options,y=m[u+"Size"];typeof y=="number"&&(y=[y,y]);var N=J(y),E=J(u==="shadow"&&m.shadowAnchor||m.iconAnchor||N&&N.divideBy(2,!0));s.className="leaflet-marker-"+u+" "+(m.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),N&&(s.style.width=N.x+"px",s.style.height=N.y+"px")},_createImg:function(s,u){return u=u||document.createElement("img"),u.src=s,u},_getIconUrl:function(s){return Ue.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function sr(s){return new Da(s)}var rr=Da.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof rr.imagePath!="string"&&(rr.imagePath=this._detectIconPath()),(this.options.imagePath||rr.imagePath)+Da.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var u=function(m,y,N){var E=y.exec(m);return E&&E[N]};return s=u(s,/^url\((['"])?(.+)\1\)$/,2),s&&u(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=gt("div","leaflet-default-icon-path",document.body),u=$s(s,"background-image")||$s(s,"backgroundImage");if(document.body.removeChild(s),u=this._stripUrl(u),u)return u;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),lr=Ma.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new fi(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ot(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var u=this._marker,m=u._map,y=this._marker.options.autoPanSpeed,N=this._marker.options.autoPanPadding,E=mi(u._icon),F=m.getPixelBounds(),oe=m.getPixelOrigin(),pe=te(F.min._subtract(oe).add(N),F.max._subtract(oe).subtract(N));if(!pe.contains(E)){var Ce=J((Math.max(pe.max.x,E.x)-pe.max.x)/(F.max.x-pe.max.x)-(Math.min(pe.min.x,E.x)-pe.min.x)/(F.min.x-pe.min.x),(Math.max(pe.max.y,E.y)-pe.max.y)/(F.max.y-pe.max.y)-(Math.min(pe.min.y,E.y)-pe.min.y)/(F.min.y-pe.min.y)).multiplyBy(y);m.panBy(Ce,{animate:!1}),this._draggable._newPos._add(Ce),this._draggable._startPos._add(Ce),Kt(u._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=ee(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(ue(this._panRequest),this._panRequest=ee(this._adjustPan.bind(this,s)))},_onDrag:function(s){var u=this._marker,m=u._shadow,y=mi(u._icon),N=u._map.layerPointToLatLng(y);m&&Kt(m,y),u._latlng=N,s.latlng=N,s.oldLatLng=this._oldLatLng,u.fire("move",s).fire("drag",s)},_onDragEnd:function(s){ue(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),or=ba.extend({options:{icon:new rr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,u){A(this,u),this._latlng=Se(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var u=this._latlng;return this._latlng=Se(s),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=s.icon.createIcon(this._icon),y=!1;m!==this._icon&&(this._icon&&this._removeIcon(),y=!0,s.title&&(m.title=s.title),m.tagName==="IMG"&&(m.alt=s.alt||"")),ot(m,u),s.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nt(m,"focus",this._panOnFocus,this);var N=s.icon.createShadow(this._shadow),E=!1;N!==this._shadow&&(this._removeShadow(),E=!0),N&&(ot(N,u),N.alt=""),this._shadow=N,s.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),N&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Rt(this._icon,"focus",this._panOnFocus,this),Ft(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ft(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Kt(this._icon,s),this._shadow&&Kt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(ot(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),lr)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new lr(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Yt(this._icon,s),this._shadow&&Yt(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var u=this.options.icon.options,m=u.iconSize?J(u.iconSize):J(0,0),y=u.iconAnchor?J(u.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:m.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ku(s,u){return new or(s,u)}var Ra=ba.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return A(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),hs=Ra.extend({options:{fill:!0,radius:10},initialize:function(s,u){A(this,u),this._latlng=Se(s),this._radius=this.options.radius},setLatLng:function(s){var u=this._latlng;return this._latlng=Se(s),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var u=s&&s.radius||this._radius;return Ra.prototype.setStyle.call(this,s),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,u=this._radiusY||s,m=this._clickTolerance(),y=[s+m,u+m];this._pxBounds=new O(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Cu(s,u){return new hs(s,u)}var Xr=hs.extend({initialize:function(s,u,m){if(typeof u=="number"&&(u=d({},m,{radius:u})),A(this,u),this._latlng=Se(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new P(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Ra.prototype.setStyle,_project:function(){var s=this._latlng.lng,u=this._latlng.lat,m=this._map,y=m.options.crs;if(y.distance===Ze.distance){var N=Math.PI/180,E=this._mRadius/Ze.R/N,F=m.project([u+E,s]),oe=m.project([u-E,s]),pe=F.add(oe).divideBy(2),Ce=m.unproject(pe).lat,De=Math.acos((Math.cos(E*N)-Math.sin(u*N)*Math.sin(Ce*N))/(Math.cos(u*N)*Math.cos(Ce*N)))/N;(isNaN(De)||De===0)&&(De=E/Math.cos(Math.PI/180*u)),this._point=pe.subtract(m.getPixelOrigin()),this._radius=isNaN(De)?0:pe.x-m.project([Ce,s-De]).x,this._radiusY=pe.y-F.y}else{var Ge=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(Ge).x}this._updateBounds()}});function Tu(s,u,m){return new Xr(s,u,m)}var ti=Ra.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,u){A(this,u),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var u=1/0,m=null,y=ir,N,E,F=0,oe=this._parts.length;F<oe;F++)for(var pe=this._parts[F],Ce=1,De=pe.length;Ce<De;Ce++){N=pe[Ce-1],E=pe[Ce];var Ge=y(s,N,E,!0);Ge<u&&(u=Ge,m=y(s,N,E))}return m&&(m.distance=Math.sqrt(u)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return cs(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,u){return u=u||this._defaultShape(),s=Se(s),u.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new P,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return aa(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var u=[],m=aa(s),y=0,N=s.length;y<N;y++)m?(u[y]=Se(s[y]),this._bounds.extend(u[y])):u[y]=this._convertLatLngs(s[y]);return u},_project:function(){var s=new O;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),u=new de(s,s);this._rawPxBounds&&(this._pxBounds=new O([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(s,u,m){var y=s[0]instanceof me,N=s.length,E,F;if(y){for(F=[],E=0;E<N;E++)F[E]=this._map.latLngToLayerPoint(s[E]),m.extend(F[E]);u.push(F)}else for(E=0;E<N;E++)this._projectLatlngs(s[E],u,m)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,m,y,N,E,F,oe,pe;for(m=0,N=0,E=this._rings.length;m<E;m++)for(pe=this._rings[m],y=0,F=pe.length;y<F-1;y++)oe=ju(pe[y],pe[y+1],s,y,!0),oe&&(u[N]=u[N]||[],u[N].push(oe[0]),(oe[1]!==pe[y+1]||y===F-2)&&(u[N].push(oe[1]),N++))}},_simplifyPoints:function(){for(var s=this._parts,u=this.options.smoothFactor,m=0,y=s.length;m<y;m++)s[m]=vu(s[m],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,u){var m,y,N,E,F,oe,pe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(m=0,E=this._parts.length;m<E;m++)for(oe=this._parts[m],y=0,F=oe.length,N=F-1;y<F;N=y++)if(!(!u&&y===0)&&bu(s,oe[N],oe[y])<=pe)return!0;return!1}});function Ld(s,u){return new ti(s,u)}ti._flat=Vr;var fs=ti.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var u=ti.prototype._convertLatLngs.call(this,s),m=u.length;return m>=2&&u[0]instanceof me&&u[0].equals(u[m-1])&&u.pop(),u},_setLatLngs:function(s){ti.prototype._setLatLngs.call(this,s),aa(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return aa(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,u=this.options.weight,m=new de(u,u);if(s=new O(s.min.subtract(m),s.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,N=this._rings.length,E;y<N;y++)E=xu(this._rings[y],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var u=!1,m,y,N,E,F,oe,pe,Ce;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,pe=this._parts.length;E<pe;E++)for(m=this._parts[E],F=0,Ce=m.length,oe=Ce-1;F<Ce;oe=F++)y=m[F],N=m[oe],y.y>s.y!=N.y>s.y&&s.x<(N.x-y.x)*(s.y-y.y)/(N.y-y.y)+y.x&&(u=!u);return u||ti.prototype._containsPoint.call(this,s,!0)}});function Pd(s,u){return new fs(s,u)}var ni=Oa.extend({initialize:function(s,u){A(this,u),this._layers={},s&&this.addData(s)},addData:function(s){var u=D(s)?s:s.features,m,y,N;if(u){for(m=0,y=u.length;m<y;m++)N=u[m],(N.geometries||N.geometry||N.features||N.coordinates)&&this.addData(N);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var F=Tn(s,E);return F?(F.feature=el(s),F.defaultOptions=F.options,this.resetStyle(F),E.onEachFeature&&E.onEachFeature(s,F),this.addLayer(F)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=d({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(u){this._setLayerStyle(u,s)},this)},_setLayerStyle:function(s,u){s.setStyle&&(typeof u=="function"&&(u=u(s.feature)),s.setStyle(u))}});function Tn(s,u){var m=s.type==="Feature"?s.geometry:s,y=m?m.coordinates:null,N=[],E=u&&u.pointToLayer,F=u&&u.coordsToLatLng||Jr,oe,pe,Ce,De;if(!y&&!m)return null;switch(m.type){case"Point":return oe=F(y),ps(E,s,oe,u);case"MultiPoint":for(Ce=0,De=y.length;Ce<De;Ce++)oe=F(y[Ce]),N.push(ps(E,s,oe,u));return new Oa(N);case"LineString":case"MultiLineString":return pe=ur(y,m.type==="LineString"?0:1,F),new ti(pe,u);case"Polygon":case"MultiPolygon":return pe=ur(y,m.type==="Polygon"?1:2,F),new fs(pe,u);case"GeometryCollection":for(Ce=0,De=m.geometries.length;Ce<De;Ce++){var Ge=Tn({geometry:m.geometries[Ce],type:"Feature",properties:s.properties},u);Ge&&N.push(Ge)}return new Oa(N);case"FeatureCollection":for(Ce=0,De=m.features.length;Ce<De;Ce++){var ht=Tn(m.features[Ce],u);ht&&N.push(ht)}return new Oa(N);default:throw new Error("Invalid GeoJSON object.")}}function ps(s,u,m,y){return s?s(u,m):new or(m,y&&y.markersInheritOptions&&y)}function Jr(s){return new me(s[1],s[0],s[2])}function ur(s,u,m){for(var y=[],N=0,E=s.length,F;N<E;N++)F=u?ur(s[N],u-1,m):(m||Jr)(s[N]),y.push(F);return y}function Wr(s,u){return s=Se(s),s.alt!==void 0?[T(s.lng,u),T(s.lat,u),T(s.alt,u)]:[T(s.lng,u),T(s.lat,u)]}function cr(s,u,m,y){for(var N=[],E=0,F=s.length;E<F;E++)N.push(u?cr(s[E],aa(s[E])?0:u-1,m,y):Wr(s[E],y));return!u&&m&&N.length>0&&N.push(N[0].slice()),N}function pi(s,u){return s.feature?d({},s.feature,{geometry:u}):el(u)}function el(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var gi={toGeoJSON:function(s){return pi(this,{type:"Point",coordinates:Wr(this.getLatLng(),s)})}};or.include(gi),Xr.include(gi),hs.include(gi),ti.include({toGeoJSON:function(s){var u=!aa(this._latlngs),m=cr(this._latlngs,u?1:0,!1,s);return pi(this,{type:(u?"Multi":"")+"LineString",coordinates:m})}}),fs.include({toGeoJSON:function(s){var u=!aa(this._latlngs),m=u&&!aa(this._latlngs[0]),y=cr(this._latlngs,m?2:u?1:0,!0,s);return u||(y=[y]),pi(this,{type:(m?"Multi":"")+"Polygon",coordinates:y})}}),ms.include({toMultiPoint:function(s){var u=[];return this.eachLayer(function(m){u.push(m.toGeoJSON(s).geometry.coordinates)}),pi(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(s){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(s);var m=u==="GeometryCollection",y=[];return this.eachLayer(function(N){if(N.toGeoJSON){var E=N.toGeoJSON(s);if(m)y.push(E.geometry);else{var F=el(E);F.type==="FeatureCollection"?y.push.apply(y,F.features):y.push(F)}}}),m?pi(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function tl(s,u){return new ni(s,u)}var dr=tl,gs=ba.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,u,m){this._url=s,this._bounds=Z(u),A(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ot(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ft(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&jn(this._image),this},bringToBack:function(){return this._map&&Oi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Z(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",u=this._image=s?this._url:gt("img");if(ot(u,"leaflet-image-layer"),this._zoomAnimated&&ot(u,"leaflet-zoom-animated"),this.options.className&&ot(u,this.options.className),u.onselectstart=w,u.onmousemove=w,u.onload=f(this.fire,this,"load"),u.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(s){var u=this._map.getZoomScale(s.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Ja(this._image,m,u)},_reset:function(){var s=this._image,u=new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=u.getSize();Kt(s,u.min),s.style.width=m.x+"px",s.style.height=m.y+"px"},_updateOpacity:function(){Yt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),Au=function(s,u,m){return new gs(s,u,m)},xi=gs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",u=this._image=s?this._url:gt("video");if(ot(u,"leaflet-image-layer"),this._zoomAnimated&&ot(u,"leaflet-zoom-animated"),this.options.className&&ot(u,this.options.className),u.onselectstart=w,u.onmousemove=w,u.onloadeddata=f(this.fire,this,"load"),s){for(var m=u.getElementsByTagName("source"),y=[],N=0;N<m.length;N++)y.push(m[N].src);this._url=m.length>0?y:[u.src];return}D(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var F=gt("source");F.src=this._url[E],u.appendChild(F)}}});function xs(s,u,m){return new xi(s,u,m)}var nl=gs.extend({_initImage:function(){var s=this._image=this._url;ot(s,"leaflet-image-layer"),this._zoomAnimated&&ot(s,"leaflet-zoom-animated"),this.options.className&&ot(s,this.options.className),s.onselectstart=w,s.onmousemove=w}});function zu(s,u,m){return new nl(s,u,m)}var An=ba.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,u){s&&(s instanceof me||D(s))?(this._latlng=Se(s),A(this,u)):(A(this,s),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Yt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Yt(this._container,1),this.bringToFront(),this.options.interactive&&(ot(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Yt(this._container,0),this._removeTimeout=setTimeout(f(Ft,void 0,this._container),200)):Ft(this._container),this.options.interactive&&(Xt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=Se(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&jn(this._container),this},bringToBack:function(){return this._map&&Oi(this._container),this},_prepareOpen:function(s){var u=this._source;if(!u._map)return!1;if(u instanceof Oa){u=null;var m=this._source._layers;for(var y in m)if(m[y]._map){u=m[y];break}if(!u)return!1;this._source=u}if(!s)if(u.getCenter)s=u.getCenter();else if(u.getLatLng)s=u.getLatLng();else if(u.getBounds)s=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")s.innerHTML=u;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),u=J(this.options.offset),m=this._getAnchor();this._zoomAnimated?Kt(this._container,s.add(m)):u=u.add(s).add(m);var y=this._containerBottom=-u.y,N=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=y+"px",this._container.style.left=N+"px"}},_getAnchor:function(){return[0,0]}});_t.include({_initOverlay:function(s,u,m,y){var N=u;return N instanceof s||(N=new s(y).setContent(u)),m&&N.setLatLng(m),N}}),ba.include({_initOverlay:function(s,u,m,y){var N=m;return N instanceof s?(A(N,y),N._source=this):(N=u&&!y?u:new s(y,this),N.setContent(m)),N}});var mr=An.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,An.prototype.openOn.call(this,s)},onAdd:function(s){An.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ra||this._source.on("preclick",va))},onRemove:function(s){An.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ra||this._source.off("preclick",va))},getEvents:function(){var s=An.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",u=this._container=gt("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=gt("div",s+"-content-wrapper",u);if(this._contentNode=gt("div",s+"-content",m),Ri(u),za(this._contentNode),nt(u,"contextmenu",va),this._tipContainer=gt("div",s+"-tip-container",u),this._tip=gt("div",s+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=gt("a",s+"-close-button",u);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',nt(y,"click",function(N){on(N),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,u=s.style;u.width="",u.whiteSpace="nowrap";var m=s.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),u.width=m+1+"px",u.whiteSpace="",u.height="";var y=s.offsetHeight,N=this.options.maxHeight,E="leaflet-popup-scrolled";N&&y>N?(u.height=N+"px",ot(s,E)):Xt(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),m=this._getAnchor();Kt(this._container,u.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,u=parseInt($s(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+u,y=this._containerWidth,N=new de(this._containerLeft,-m-this._containerBottom);N._add(mi(this._container));var E=s.layerPointToContainerPoint(N),F=J(this.options.autoPanPadding),oe=J(this.options.autoPanPaddingTopLeft||F),pe=J(this.options.autoPanPaddingBottomRight||F),Ce=s.getSize(),De=0,Ge=0;E.x+y+pe.x>Ce.x&&(De=E.x+y-Ce.x+pe.x),E.x-De-oe.x<0&&(De=E.x-oe.x),E.y+m+pe.y>Ce.y&&(Ge=E.y+m-Ce.y+pe.y),E.y-Ge-oe.y<0&&(Ge=E.y-oe.y),(De||Ge)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([De,Ge]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Mu=function(s,u){return new mr(s,u)};_t.mergeOptions({closePopupOnClick:!0}),_t.include({openPopup:function(s,u,m){return this._initOverlay(mr,s,u,m).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),ba.include({bindPopup:function(s,u){return this._popup=this._initOverlay(mr,this._popup,s,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Oa||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){hi(s);var u=s.layer||s.target;if(this._popup._source===u&&!(u instanceof Ra)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=u,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var hr=An.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){An.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){An.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=An.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",u=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=gt("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var u,m,y=this._map,N=this._container,E=y.latLngToContainerPoint(y.getCenter()),F=y.layerPointToContainerPoint(s),oe=this.options.direction,pe=N.offsetWidth,Ce=N.offsetHeight,De=J(this.options.offset),Ge=this._getAnchor();oe==="top"?(u=pe/2,m=Ce):oe==="bottom"?(u=pe/2,m=0):oe==="center"?(u=pe/2,m=Ce/2):oe==="right"?(u=0,m=Ce/2):oe==="left"?(u=pe,m=Ce/2):F.x<E.x?(oe="right",u=0,m=Ce/2):(oe="left",u=pe+(De.x+Ge.x)*2,m=Ce/2),s=s.subtract(J(u,m,!0)).add(De).add(Ge),Xt(N,"leaflet-tooltip-right"),Xt(N,"leaflet-tooltip-left"),Xt(N,"leaflet-tooltip-top"),Xt(N,"leaflet-tooltip-bottom"),ot(N,"leaflet-tooltip-"+oe),Kt(N,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Yt(this._container,s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(u)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Id=function(s,u){return new hr(s,u)};_t.include({openTooltip:function(s,u,m){return this._initOverlay(hr,s,u,m).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),ba.include({bindTooltip:function(s,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(hr,this._tooltip,s,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var u=s?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[u](m),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Oa||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&(nt(u,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),nt(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var u=s.latlng,m,y;this._tooltip.options.sticky&&s.originalEvent&&(m=this._map.mouseEventToContainerPoint(s.originalEvent),y=this._map.containerPointToLayerPoint(m),u=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(u)}});var Ou=Da.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var u=s&&s.tagName==="DIV"?s:document.createElement("div"),m=this.options;if(m.html instanceof Element?(ta(u),u.appendChild(m.html)):u.innerHTML=m.html!==!1?m.html:"",m.bgPos){var y=J(m.bgPos);u.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function Bd(s){return new Ou(s)}Da.Default=rr;var ys=ba.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){A(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ft(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(jn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Oi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=b(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof de?s:new de(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var u=this.getPane().children,m=-s(-1/0,1/0),y=0,N=u.length,E;y<N;y++)E=u[y].style.zIndex,u[y]!==this._container&&E&&(m=s(m,+E));isFinite(m)&&(this.options.zIndex=m+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ue.ielt9){Yt(this._container,this.options.opacity);var s=+new Date,u=!1,m=!1;for(var y in this._tiles){var N=this._tiles[y];if(!(!N.current||!N.loaded)){var E=Math.min(1,(s-N.loaded)/200);Yt(N.el,E),E<1?u=!0:(N.active?m=!0:this._onOpaqueTile(N),N.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),u&&(ue(this._fadeFrame),this._fadeFrame=ee(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=gt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,u=this.options.maxZoom;if(s!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===s?(this._levels[m].el.style.zIndex=u-Math.abs(s-m),this._onUpdateLevel(m)):(Ft(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var y=this._levels[s],N=this._map;return y||(y=this._levels[s]={},y.el=gt("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=u,y.origin=N.project(N.unproject(N.getPixelOrigin()),s).round(),y.zoom=s,this._setZoomTransform(y,N.getCenter(),N.getZoom()),w(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var s,u,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)u=this._tiles[s],u.retain=u.current;for(s in this._tiles)if(u=this._tiles[s],u.current&&!u.active){var y=u.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var u in this._tiles)this._tiles[u].coords.z===s&&this._removeTile(u)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ft(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,u,m,y){var N=Math.floor(s/2),E=Math.floor(u/2),F=m-1,oe=new de(+N,+E);oe.z=+F;var pe=this._tileCoordsToKey(oe),Ce=this._tiles[pe];return Ce&&Ce.active?(Ce.retain=!0,!0):(Ce&&Ce.loaded&&(Ce.retain=!0),F>y?this._retainParent(N,E,F,y):!1)},_retainChildren:function(s,u,m,y){for(var N=2*s;N<2*s+2;N++)for(var E=2*u;E<2*u+2;E++){var F=new de(N,E);F.z=m+1;var oe=this._tileCoordsToKey(F),pe=this._tiles[oe];if(pe&&pe.active){pe.retain=!0;continue}else pe&&pe.loaded&&(pe.retain=!0);m+1<y&&this._retainChildren(N,E,m+1,y)}},_resetView:function(s){var u=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var u=this.options;return u.minNativeZoom!==void 0&&s<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<s?u.maxNativeZoom:s},_setView:function(s,u,m,y){var N=Math.round(u);this.options.maxZoom!==void 0&&N>this.options.maxZoom||this.options.minZoom!==void 0&&N<this.options.minZoom?N=void 0:N=this._clampZoom(N);var E=this.options.updateWhenZooming&&N!==this._tileZoom;(!y||E)&&(this._tileZoom=N,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),N!==void 0&&this._update(s),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(s,u)},_setZoomTransforms:function(s,u){for(var m in this._levels)this._setZoomTransform(this._levels[m],s,u)},_setZoomTransform:function(s,u,m){var y=this._map.getZoomScale(m,s.zoom),N=s.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(u,m)).round();Ue.any3d?Ja(s.el,N,y):Kt(s.el,N)},_resetGrid:function(){var s=this._map,u=s.options.crs,m=this._tileSize=this.getTileSize(),y=this._tileZoom,N=this._map.getPixelWorldBounds(this._tileZoom);N&&(this._globalTileRange=this._pxBoundsToTileRange(N)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,u.wrapLng[0]],y).x/m.x),Math.ceil(s.project([0,u.wrapLng[1]],y).x/m.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([u.wrapLat[0],0],y).y/m.x),Math.ceil(s.project([u.wrapLat[1],0],y).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var u=this._map,m=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),y=u.getZoomScale(m,this._tileZoom),N=u.project(s,this._tileZoom).floor(),E=u.getSize().divideBy(y*2);return new O(N.subtract(E),N.add(E))},_update:function(s){var u=this._map;if(u){var m=this._clampZoom(u.getZoom());if(s===void 0&&(s=u.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(s),N=this._pxBoundsToTileRange(y),E=N.getCenter(),F=[],oe=this.options.keepBuffer,pe=new O(N.getBottomLeft().subtract([oe,-oe]),N.getTopRight().add([oe,-oe]));if(!(isFinite(N.min.x)&&isFinite(N.min.y)&&isFinite(N.max.x)&&isFinite(N.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ce in this._tiles){var De=this._tiles[Ce].coords;(De.z!==this._tileZoom||!pe.contains(new de(De.x,De.y)))&&(this._tiles[Ce].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(s,m);return}for(var Ge=N.min.y;Ge<=N.max.y;Ge++)for(var ht=N.min.x;ht<=N.max.x;ht++){var Sn=new de(ht,Ge);if(Sn.z=this._tileZoom,!!this._isValidTile(Sn)){var un=this._tiles[this._tileCoordsToKey(Sn)];un?un.current=!0:F.push(Sn)}}if(F.sort(function(kt,Ct){return kt.distanceTo(E)-Ct.distanceTo(E)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Xn=document.createDocumentFragment();for(ht=0;ht<F.length;ht++)this._addTile(F[ht],Xn);this._level.el.appendChild(Xn)}}}},_isValidTile:function(s){var u=this._map.options.crs;if(!u.infinite){var m=this._globalTileRange;if(!u.wrapLng&&(s.x<m.min.x||s.x>m.max.x)||!u.wrapLat&&(s.y<m.min.y||s.y>m.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(s);return Z(this.options.bounds).overlaps(y)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var u=this._map,m=this.getTileSize(),y=s.scaleBy(m),N=y.add(m),E=u.unproject(y,s.z),F=u.unproject(N,s.z);return[E,F]},_tileCoordsToBounds:function(s){var u=this._tileCoordsToNwSe(s),m=new P(u[0],u[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var u=s.split(":"),m=new de(+u[0],+u[1]);return m.z=+u[2],m},_removeTile:function(s){var u=this._tiles[s];u&&(Ft(u.el),delete this._tiles[s],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ot(s,"leaflet-tile");var u=this.getTileSize();s.style.width=u.x+"px",s.style.height=u.y+"px",s.onselectstart=w,s.onmousemove=w,Ue.ielt9&&this.options.opacity<1&&Yt(s,this.options.opacity)},_addTile:function(s,u){var m=this._getTilePos(s),y=this._tileCoordsToKey(s),N=this.createTile(this._wrapCoords(s),f(this._tileReady,this,s));this._initTile(N),this.createTile.length<2&&ee(f(this._tileReady,this,s,null,N)),Kt(N,m),this._tiles[y]={el:N,coords:s,current:!0},u.appendChild(N),this.fire("tileloadstart",{tile:N,coords:s})},_tileReady:function(s,u,m){u&&this.fire("tileerror",{error:u,tile:m,coords:s});var y=this._tileCoordsToKey(s);m=this._tiles[y],m&&(m.loaded=+new Date,this._map._fadeAnimated?(Yt(m.el,0),ue(this._fadeFrame),this._fadeFrame=ee(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),u||(ot(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ue.ielt9||!this._map._fadeAnimated?ee(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var u=new de(this._wrapX?S(s.x,this._wrapX):s.x,this._wrapY?S(s.y,this._wrapY):s.y);return u.z=s.z,u},_pxBoundsToTileRange:function(s){var u=this.getTileSize();return new O(s.min.unscaleBy(u).floor(),s.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function Du(s){return new ys(s)}var yi=ys.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,u){this._url=s,u=A(this,u),u.detectRetina&&Ue.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,u){return this._url===s&&u===void 0&&(u=!0),this._url=s,u||this.redraw(),this},createTile:function(s,u){var m=document.createElement("img");return nt(m,"load",f(this._tileOnLoad,this,u,m)),nt(m,"error",f(this._tileOnError,this,u,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(s),m},getTileUrl:function(s){var u={r:Ue.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-s.y;this.options.tms&&(u.y=m),u["-y"]=m}return R(this._url,d(u,this.options))},_tileOnLoad:function(s,u){Ue.ielt9?setTimeout(f(s,this,null,u),0):s(null,u)},_tileOnError:function(s,u,m){var y=this.options.errorTileUrl;y&&u.getAttribute("src")!==y&&(u.src=y),s(m,u)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,u=this.options.maxZoom,m=this.options.zoomReverse,y=this.options.zoomOffset;return m&&(s=u-s),s+y},_getSubdomain:function(s){var u=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var s,u;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(u=this._tiles[s].el,u.onload=w,u.onerror=w,!u.complete)){u.src=G;var m=this._tiles[s].coords;Ft(u),delete this._tiles[s],this.fire("tileabort",{tile:u,coords:m})}},_removeTile:function(s){var u=this._tiles[s];if(u)return u.el.setAttribute("src",G),ys.prototype._removeTile.call(this,s)},_tileReady:function(s,u,m){if(!(!this._map||m&&m.getAttribute("src")===G))return ys.prototype._tileReady.call(this,s,u,m)}});function ia(s,u){return new yi(s,u)}var fr=yi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,u){this._url=s;var m=d({},this.defaultWmsParams);for(var y in u)y in this.options||(m[y]=u[y]);u=A(this,u);var N=u.detectRetina&&Ue.retina?2:1,E=this.getTileSize();m.width=E.x*N,m.height=E.y*N,this.wmsParams=m},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,yi.prototype.onAdd.call(this,s)},getTileUrl:function(s){var u=this._tileCoordsToNwSe(s),m=this._crs,y=te(m.project(u[0]),m.project(u[1])),N=y.min,E=y.max,F=(this._wmsVersion>=1.3&&this._crs===io?[N.y,N.x,E.y,E.x]:[N.x,N.y,E.x,E.y]).join(","),oe=yi.prototype.getTileUrl.call(this,s);return oe+M(this.wmsParams,oe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(s,u){return d(this.wmsParams,s),u||this.redraw(),this}});function sa(s,u){return new fr(s,u)}yi.WMS=fr,ia.wms=sa;var Hn=ba.extend({options:{padding:.1},initialize:function(s){A(this,s),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ot(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,u){var m=this._map.getZoomScale(u,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),N=this._map.project(this._center,u),E=y.multiplyBy(-m).add(N).subtract(this._map._getNewPixelOrigin(s,u));Ue.any3d?Ja(this._container,E,m):Kt(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,u=this._map.getSize(),m=this._map.containerPointToLayerPoint(u.multiplyBy(-s)).round();this._bounds=new O(m,m.add(u.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),al=Hn.extend({options:{tolerance:0},getEvents:function(){var s=Hn.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Hn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");nt(s,"mousemove",this._onMouseMove,this),nt(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),nt(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){ue(this._redrawRequest),delete this._ctx,Ft(this._container),Rt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var u in this._layers)s=this._layers[u],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Hn.prototype._update.call(this);var s=this._bounds,u=this._container,m=s.getSize(),y=Ue.retina?2:1;Kt(u,s.min),u.width=y*m.x,u.height=y*m.y,u.style.width=m.x+"px",u.style.height=m.y+"px",Ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Hn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[v(s)]=s;var u=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var u=s._order,m=u.next,y=u.prev;m?m.prev=y:this._drawLast=y,y?y.next=m:this._drawFirst=m,delete s._order,delete this._layers[v(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var u=s.options.dashArray.split(/[, ]+/),m=[],y,N;for(N=0;N<u.length;N++){if(y=Number(u[N]),isNaN(y))return;m.push(y)}s.options._dashArray=m}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||ee(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var u=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new O,this._redrawBounds.extend(s._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(s._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var u=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,u=this._redrawBounds;if(this._ctx.save(),u){var m=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)s=y.layer,(!u||s._pxBounds&&s._pxBounds.intersects(u))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,u){if(this._drawing){var m,y,N,E,F=s._parts,oe=F.length,pe=this._ctx;if(oe){for(pe.beginPath(),m=0;m<oe;m++){for(y=0,N=F[m].length;y<N;y++)E=F[m][y],pe[y?"lineTo":"moveTo"](E.x,E.y);u&&pe.closePath()}this._fillStroke(pe,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var u=s._point,m=this._ctx,y=Math.max(Math.round(s._radius),1),N=(Math.max(Math.round(s._radiusY),1)||y)/y;N!==1&&(m.save(),m.scale(1,N)),m.beginPath(),m.arc(u.x,u.y/N,y,0,Math.PI*2,!1),N!==1&&m.restore(),this._fillStroke(m,s)}},_fillStroke:function(s,u){var m=u.options;m.fill&&(s.globalAlpha=m.fillOpacity,s.fillStyle=m.fillColor||m.color,s.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(s.setLineDash&&s.setLineDash(u.options&&u.options._dashArray||[]),s.globalAlpha=m.opacity,s.lineWidth=m.weight,s.strokeStyle=m.color,s.lineCap=m.lineCap,s.lineJoin=m.lineJoin,s.stroke())},_onClick:function(s){for(var u=this._map.mouseEventToLayerPoint(s),m,y,N=this._drawFirst;N;N=N.next)m=N.layer,m.options.interactive&&m._containsPoint(u)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(m))&&(y=m);this._fireEvent(y?[y]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,u)}},_handleMouseOut:function(s){var u=this._hoveredLayer;u&&(Xt(this._container,"leaflet-interactive"),this._fireEvent([u],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,u){if(!this._mouseHoverThrottled){for(var m,y,N=this._drawFirst;N;N=N.next)m=N.layer,m.options.interactive&&m._containsPoint(u)&&(y=m);y!==this._hoveredLayer&&(this._handleMouseOut(s),y&&(ot(this._container,"leaflet-interactive"),this._fireEvent([y],s,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,u,m){this._map._fireDOMEvent(u,m||u.type,s)},_bringToFront:function(s){var u=s._order;if(u){var m=u.next,y=u.prev;if(m)m.prev=y;else return;y?y.next=m:m&&(this._drawFirst=m),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(s)}},_bringToBack:function(s){var u=s._order;if(u){var m=u.next,y=u.prev;if(y)y.next=m;else return;m?m.prev=y:y&&(this._drawLast=y),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(s)}}});function pr(s){return Ue.canvas?new al(s):null}var vi=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),so={_initContainer:function(){this._container=gt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Hn.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var u=s._container=vi("shape");ot(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",s._path=vi("path"),u.appendChild(s._path),this._updateStyle(s),this._layers[v(s)]=s},_addPath:function(s){var u=s._container;this._container.appendChild(u),s.options.interactive&&s.addInteractiveTarget(u)},_removePath:function(s){var u=s._container;Ft(u),s.removeInteractiveTarget(u),delete this._layers[v(s)]},_updateStyle:function(s){var u=s._stroke,m=s._fill,y=s.options,N=s._container;N.stroked=!!y.stroke,N.filled=!!y.fill,y.stroke?(u||(u=s._stroke=vi("stroke")),N.appendChild(u),u.weight=y.weight+"px",u.color=y.color,u.opacity=y.opacity,y.dashArray?u.dashStyle=D(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=y.lineCap.replace("butt","flat"),u.joinstyle=y.lineJoin):u&&(N.removeChild(u),s._stroke=null),y.fill?(m||(m=s._fill=vi("fill")),N.appendChild(m),m.color=y.fillColor||y.color,m.opacity=y.fillOpacity):m&&(N.removeChild(m),s._fill=null)},_updateCircle:function(s){var u=s._point.round(),m=Math.round(s._radius),y=Math.round(s._radiusY||m);this._setPath(s,s._empty()?"M0 0":"AL "+u.x+","+u.y+" "+m+","+y+" 0,"+65535*360)},_setPath:function(s,u){s._path.v=u},_bringToFront:function(s){jn(s._container)},_bringToBack:function(s){Oi(s._container)}},La=Ue.vml?vi:pt,vs=Hn.extend({_initContainer:function(){this._container=La("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=La("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ft(this._container),Rt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Hn.prototype._update.call(this);var s=this._bounds,u=s.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,m.setAttribute("width",u.x),m.setAttribute("height",u.y)),Kt(m,s.min),m.setAttribute("viewBox",[s.min.x,s.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(s){var u=s._path=La("path");s.options.className&&ot(u,s.options.className),s.options.interactive&&ot(u,"leaflet-interactive"),this._updateStyle(s),this._layers[v(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ft(s._path),s.removeInteractiveTarget(s._path),delete this._layers[v(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var u=s._path,m=s.options;u&&(m.stroke?(u.setAttribute("stroke",m.color),u.setAttribute("stroke-opacity",m.opacity),u.setAttribute("stroke-width",m.weight),u.setAttribute("stroke-linecap",m.lineCap),u.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?u.setAttribute("stroke-dasharray",m.dashArray):u.removeAttribute("stroke-dasharray"),m.dashOffset?u.setAttribute("stroke-dashoffset",m.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),m.fill?(u.setAttribute("fill",m.fillColor||m.color),u.setAttribute("fill-opacity",m.fillOpacity),u.setAttribute("fill-rule",m.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(s,u){this._setPath(s,Ut(s._parts,u))},_updateCircle:function(s){var u=s._point,m=Math.max(Math.round(s._radius),1),y=Math.max(Math.round(s._radiusY),1)||m,N="a"+m+","+y+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(u.x-m)+","+u.y+N+m*2+",0 "+N+-m*2+",0 ";this._setPath(s,E)},_setPath:function(s,u){s._path.setAttribute("d",u)},_bringToFront:function(s){jn(s._path)},_bringToBack:function(s){Oi(s._path)}});Ue.vml&&vs.include(so);function gr(s){return Ue.svg||Ue.vml?new vs(s):null}_t.include({getRenderer:function(s){var u=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var u=this._paneRenderers[s];return u===void 0&&(u=this._createRenderer({pane:s}),this._paneRenderers[s]=u),u},_createRenderer:function(s){return this.options.preferCanvas&&pr(s)||gr(s)}});var Pi=fs.extend({initialize:function(s,u){fs.prototype.initialize.call(this,this._boundsToLatLngs(s),u)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Z(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Ud(s,u){return new Pi(s,u)}vs.create=La,vs.pointsToPath=Ut,ni.geometryToLayer=Tn,ni.coordsToLatLng=Jr,ni.coordsToLatLngs=ur,ni.latLngToCoords=Wr,ni.latLngsToCoords=cr,ni.getFeature=pi,ni.asFeature=el,_t.mergeOptions({boxZoom:!0});var Kn=Ma.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){nt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Rt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ft(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ss(),qr(),this._startPoint=this._map.mouseEventToContainerPoint(s),nt(document,{contextmenu:hi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=gt("div","leaflet-zoom-box",this._container),ot(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var u=new O(this._point,this._startPoint),m=u.getSize();Kt(this._box,u.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(Ft(this._box),Xt(this._container,"leaflet-crosshair")),Aa(),Js(),Rt(document,{contextmenu:hi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var u=new P(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});_t.addInitHook("addHandler","boxZoom",Kn),_t.mergeOptions({doubleClickZoom:!0});var il=Ma.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var u=this._map,m=u.getZoom(),y=u.options.zoomDelta,N=s.originalEvent.shiftKey?m-y:m+y;u.options.doubleClickZoom==="center"?u.setZoom(N):u.setZoomAround(s.containerPoint,N)}});_t.addInitHook("addHandler","doubleClickZoom",il),_t.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Pa=Ma.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new fi(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ot(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xt(this._map._container,"leaflet-grab"),Xt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=Z(this._map.options.maxBounds);this._offsetLimit=te(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var u=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(u),this._prunePositions(u)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,u){return s-(s-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;s.x<u.min.x&&(s.x=this._viscousLimit(s.x,u.min.x)),s.y<u.min.y&&(s.y=this._viscousLimit(s.y,u.min.y)),s.x>u.max.x&&(s.x=this._viscousLimit(s.x,u.max.x)),s.y>u.max.y&&(s.y=this._viscousLimit(s.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,u=Math.round(s/2),m=this._initialWorldOffset,y=this._draggable._newPos.x,N=(y-u+m)%s+u-m,E=(y+u+m)%s-u-m,F=Math.abs(N+m)<Math.abs(E+m)?N:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(s){var u=this._map,m=u.options,y=!m.inertia||s.noInertia||this._times.length<2;if(u.fire("dragend",s),y)u.fire("moveend");else{this._prunePositions(+new Date);var N=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,F=m.easeLinearity,oe=N.multiplyBy(F/E),pe=oe.distanceTo([0,0]),Ce=Math.min(m.inertiaMaxSpeed,pe),De=oe.multiplyBy(Ce/pe),Ge=Ce/(m.inertiaDeceleration*F),ht=De.multiplyBy(-Ge/2).round();!ht.x&&!ht.y?u.fire("moveend"):(ht=u._limitOffset(ht,u.options.maxBounds),ee(function(){u.panBy(ht,{duration:Ge,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});_t.addInitHook("addHandler","dragging",Pa),_t.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ro=Ma.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),nt(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Rt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,u=document.documentElement,m=s.scrollTop||u.scrollTop,y=s.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(y,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var u=this._panKeys={},m=this.keyCodes,y,N;for(y=0,N=m.left.length;y<N;y++)u[m.left[y]]=[-1*s,0];for(y=0,N=m.right.length;y<N;y++)u[m.right[y]]=[s,0];for(y=0,N=m.down.length;y<N;y++)u[m.down[y]]=[0,s];for(y=0,N=m.up.length;y<N;y++)u[m.up[y]]=[0,-1*s]},_setZoomDelta:function(s){var u=this._zoomKeys={},m=this.keyCodes,y,N;for(y=0,N=m.zoomIn.length;y<N;y++)u[m.zoomIn[y]]=s;for(y=0,N=m.zoomOut.length;y<N;y++)u[m.zoomOut[y]]=-s},_addHooks:function(){nt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Rt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var u=s.keyCode,m=this._map,y;if(u in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(y=this._panKeys[u],s.shiftKey&&(y=J(y).multiplyBy(3)),m.options.maxBounds&&(y=m._limitOffset(J(y),m.options.maxBounds)),m.options.worldCopyJump){var N=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(y)));m.panTo(N)}else m.panBy(y)}else if(u in this._zoomKeys)m.setZoom(m.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;hi(s)}}});_t.addInitHook("addHandler","keyboard",ro),_t.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xr=Ma.extend({addHooks:function(){nt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Rt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var u=Dn(s),m=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var y=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),y),hi(s)},_performZoom:function(){var s=this._map,u=s.getZoom(),m=this._map.options.zoomSnap||0;s._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),N=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,E=m?Math.ceil(N/m)*m:N,F=s._limitZoom(u+(this._delta>0?E:-E))-u;this._delta=0,this._startTime=null,F&&(s.options.scrollWheelZoom==="center"?s.setZoom(u+F):s.setZoomAround(this._lastMousePos,u+F))}});_t.addInitHook("addHandler","scrollWheelZoom",xr);var Ii=600;_t.mergeOptions({tapHold:Ue.touchNative&&Ue.safari&&Ue.mobile,tapTolerance:15});var sl=Ma.extend({addHooks:function(){nt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Rt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var u=s.touches[0];this._startPos=this._newPos=new de(u.clientX,u.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(nt(document,"touchend",on),nt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),Ii),nt(document,"touchend touchcancel contextmenu",this._cancel,this),nt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Rt(document,"touchend",on),Rt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Rt(document,"touchend touchcancel contextmenu",this._cancel,this),Rt(document,"touchmove",this._onMove,this)},_onMove:function(s){var u=s.touches[0];this._newPos=new de(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,u){var m=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});m._simulated=!0,u.target.dispatchEvent(m)}});_t.addInitHook("addHandler","tapHold",sl),_t.mergeOptions({touchZoom:Ue.touch,bounceAtZoomLimits:!0});var lo=Ma.extend({addHooks:function(){ot(this._map._container,"leaflet-touch-zoom"),nt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xt(this._map._container,"leaflet-touch-zoom"),Rt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var u=this._map;if(!(!s.touches||s.touches.length!==2||u._animatingZoom||this._zooming)){var m=u.mouseEventToContainerPoint(s.touches[0]),y=u.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(m.add(y)._divideBy(2))),this._startDist=m.distanceTo(y),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),nt(document,"touchmove",this._onTouchMove,this),nt(document,"touchend touchcancel",this._onTouchEnd,this),on(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var u=this._map,m=u.mouseEventToContainerPoint(s.touches[0]),y=u.mouseEventToContainerPoint(s.touches[1]),N=m.distanceTo(y)/this._startDist;if(this._zoom=u.getScaleZoom(N,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&N<1||this._zoom>u.getMaxZoom()&&N>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,N===1)return}else{var E=m._add(y)._divideBy(2)._subtract(this._centerPoint);if(N===1&&E.x===0&&E.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),ue(this._animRequest);var F=f(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ee(F,this,!0),on(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ue(this._animRequest),Rt(document,"touchmove",this._onTouchMove,this),Rt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});_t.addInitHook("addHandler","touchZoom",lo),_t.BoxZoom=Kn,_t.DoubleClickZoom=il,_t.Drag=Pa,_t.Keyboard=ro,_t.ScrollWheelZoom=xr,_t.TapHold=sl,_t.TouchZoom=lo,l.Bounds=O,l.Browser=Ue,l.CRS=Me,l.Canvas=al,l.Circle=Xr,l.CircleMarker=hs,l.Class=ne,l.Control=$n,l.DivIcon=Ou,l.DivOverlay=An,l.DomEvent=Qr,l.DomUtil=os,l.Draggable=fi,l.Evented=X,l.FeatureGroup=Oa,l.GeoJSON=ni,l.GridLayer=ys,l.Handler=Ma,l.Icon=Da,l.ImageOverlay=gs,l.LatLng=me,l.LatLngBounds=P,l.Layer=ba,l.LayerGroup=ms,l.LineUtil=Dd,l.Map=_t,l.Marker=or,l.Mixin=Ad,l.Path=Ra,l.Point=de,l.PolyUtil=no,l.Polygon=fs,l.Polyline=ti,l.Popup=mr,l.PosAnimation=us,l.Projection=Su,l.Rectangle=Pi,l.Renderer=Hn,l.SVG=vs,l.SVGOverlay=nl,l.TileLayer=yi,l.Tooltip=hr,l.Transformation=Ne,l.Util=_e,l.VideoOverlay=xi,l.bind=f,l.bounds=te,l.canvas=pr,l.circle=Tu,l.circleMarker=Cu,l.control=ei,l.divIcon=Bd,l.extend=d,l.featureGroup=Eu,l.geoJSON=tl,l.geoJson=dr,l.gridLayer=Du,l.icon=sr,l.imageOverlay=Au,l.latLng=Se,l.latLngBounds=Z,l.layerGroup=Rd,l.map=$l,l.marker=ku,l.point=J,l.polygon=Pd,l.polyline=Ld,l.popup=Mu,l.rectangle=Ud,l.setOptions=A,l.stamp=v,l.svg=gr,l.svgOverlay=zu,l.tileLayer=ia,l.tooltip=Id,l.transformation=tt,l.version=o,l.videoOverlay=xs;var oo=window.L;l.noConflict=function(){return window.L=oo,this},window.L=l}))})(Xo,Xo.exports)),Xo.exports}var Jz=Xz();const Wi=dd(Jz);function Wz(e){return e==="checkin"?{radius:8,color:"#15803d",fillColor:"#15803d",fillOpacity:.85,weight:2}:e==="checkout"?{radius:11,color:"#be123c",fillColor:"#ffffff",fillOpacity:0,weight:3}:{radius:9,color:"#0f6a8c",fillColor:"#0f6a8c",fillOpacity:.9,weight:2}}function eM({markers:e}){const i=_.useRef(null),l=_.useRef(null),o=_.useRef(null);return _.useEffect(()=>{if(!i.current||l.current)return;const d=e[0]?.lat??41.015137,h=e[0]?.lon??28.97953,f=Wi.map(i.current,{center:[d,h],zoom:14,zoomControl:!0});return l.current=f,Wi.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap katki saglayanlar"}).addTo(f),o.current=Wi.layerGroup().addTo(f),()=>{l.current&&(l.current.remove(),l.current=null),o.current=null}},[e]),_.useEffect(()=>{if(!l.current||!o.current)return;const d=l.current,h=o.current;if(h.clearLayers(),!e.length)return;const f=[],x=new Map;for(const b of e){const S=`${b.lat.toFixed(6)}:${b.lon.toFixed(6)}`;x.set(S,(x.get(S)??0)+1)}const v=new Map;for(const b of e){const S=`${b.lat.toFixed(6)}:${b.lon.toFixed(6)}`,w=x.get(S)??1,T=v.get(S)??0;v.set(S,T+1);let z=b.lat,k=b.lon;if(w>1){const M=2*Math.PI*T/w,I=12e-5;z=b.lat+Math.sin(M)*I,k=b.lon+Math.cos(M)*I}const A=Wz(b.kind);Wi.circleMarker([z,k],A).bindPopup(`${b.label}<br/>${b.lat.toFixed(6)}, ${b.lon.toFixed(6)}`).addTo(h),f.push([z,k])}if(f.length===1){d.setView(f[0],16,{animate:!0});return}d.fitBounds(Wi.latLngBounds(f),{padding:[24,24],maxZoom:17,animate:!0})},[e]),a.jsx("div",{ref:i,className:"h-72 w-full rounded-lg border border-slate-300 bg-slate-100","aria-label":"Calisan konum haritasi"})}const tM=ka({home_lat:_n().min(-90),home_lon:_n().min(-180),radius_m:_n().int().positive().max(2e3)}),nM=ka({expires_in_minutes:_n().int().positive().max(1440)});function Ji(e){if(!e)return"-";const i=new Date(e);return Number.isNaN(i.getTime())?e:i.toLocaleString("tr-TR",{timeZone:"Europe/Istanbul"})}function aM(e){return e==="OK"?"Tamam":e==="INCOMPLETE"?"Eksik":e==="LEAVE"?"Izinli":"Tatilde"}function iv(e,i){return e===null||i===null?"-":`${e.toFixed(6)}, ${i.toFixed(6)}`}function iM(e){return e.length?e.map(i=>`${Za(i).label} (${i})`).join(", "):"-"}function sM(){const e=oS(),i=Il(),l=Un(),{pushToast:o}=Fn(),d=new Date,h=Number(e.id),f=Number.isFinite(h)&&sessionStorage.getItem("employee-detail-origin")==="employees"&&sessionStorage.getItem("employee-detail-id")===String(h),[x,v]=_.useState("41.0"),[b,S]=_.useState("29.0"),[w,T]=_.useState("120"),[z,k]=_.useState(null),[A,M]=_.useState(""),[I,R]=_.useState(""),[D,K]=_.useState(""),[G,V]=_.useState(String(d.getFullYear())),[q,Q]=_.useState(String(d.getMonth()+1)),[ae,ve]=_.useState(null),[ee,ue]=_.useState({checkin:!0,checkout:!0,latest:!0}),[_e,ne]=_.useState(!1),[W,B]=_.useState("60"),[X,de]=_.useState(null),[ke,J]=_.useState(null),[O,te]=_.useState(null),P=Be({queryKey:["employee-detail",h],queryFn:()=>tE(h),enabled:Number.isFinite(h)}),Z=P.data?.employee,me=Be({queryKey:["departments","employee-detail-edit"],queryFn:()=>Hs(),enabled:Number.isFinite(h)}),Se=Be({queryKey:["department-shifts",Z?.department_id],queryFn:()=>mu(Z?.department_id?{department_id:Z.department_id,active_only:!1}:void 0),enabled:!!Z?.department_id}),Me=Number(G),Ze=Number(q),Ve=Number.isFinite(Me)&&Number.isFinite(Ze)&&Ze>=1&&Ze<=12,qe=Be({queryKey:["employee-monthly",h,Me,Ze],queryFn:()=>tu({employee_id:h,year:Me,month:Ze}),enabled:Number.isFinite(h)&&Ve}),Ne=Be({queryKey:["employee-monthly-current",h,d.getFullYear(),d.getMonth()+1],queryFn:()=>tu({employee_id:h,year:d.getFullYear(),month:d.getMonth()+1}),enabled:Number.isFinite(h)}),tt=Xe({mutationFn:Y=>sE(h,Y),onSuccess:()=>{k(null),o({variant:"success",title:"Ev konumu guncellendi",description:`Calisan #${h} icin konum kaydedildi.`}),l.invalidateQueries({queryKey:["employee-detail",h]})},onError:Y=>{const Ye=Le(Y,"Konum kaydedilemedi.").message;k(Ye),o({variant:"error",title:"Konum kaydedilemedi",description:Ye})}}),bt=Xe({mutationFn:Y=>gb(h,{is_active:Y}),onSuccess:Y=>{o({variant:"success",title:Y.is_active?"Calisan aktife alindi":"Calisan arsive alindi",description:`${Y.full_name} icin durum guncellendi.`}),l.invalidateQueries({queryKey:["employees"]}),l.invalidateQueries({queryKey:["employee-detail",h]})},onError:Y=>{o({variant:"error",title:"Durum guncellenemedi",description:Le(Y,"Islem basarisiz.").message})}}),rt=Xe({mutationFn:Y=>nE(h,Y),onSuccess:Y=>{o({variant:"success",title:"Calisan bilgileri guncellendi",description:`${Y.full_name} icin profil bilgileri kaydedildi.`}),l.invalidateQueries({queryKey:["employees"]}),l.invalidateQueries({queryKey:["employee-detail",h]}),l.invalidateQueries({queryKey:["employee-monthly"]}),l.invalidateQueries({queryKey:["department-shifts",Y.department_id]})},onError:Y=>{o({variant:"error",title:"Calisan bilgileri guncellenemedi",description:Le(Y,"Islem basarisiz.").message})}}),pt=Xe({mutationFn:Y=>aE(h,{shift_id:Y}),onSuccess:Y=>{o({variant:"success",title:"Vardiya atamasi guncellendi",description:`${Y.full_name} icin vardiya kaydedildi.`}),l.invalidateQueries({queryKey:["employees"]}),l.invalidateQueries({queryKey:["employee-detail",h]}),l.invalidateQueries({queryKey:["employee-monthly"]})},onError:Y=>{o({variant:"error",title:"Vardiya atamasi basarisiz",description:Le(Y,"Islem basarisiz.").message})}}),Ut=Xe({mutationFn:wb,onSuccess:Y=>{de(null),J(Y.token),te(Y.invite_url),o({variant:"success",title:"Cihaz daveti olusturuldu",description:`Calisan #${h} icin davet hazir.`}),l.invalidateQueries({queryKey:["employee-detail",h]})},onError:Y=>{const Ye=Le(Y,"Cihaz daveti olusturulamadi.").message;de(Ye),o({variant:"error",title:"Davet olusturulamadi",description:Ye})}});_.useEffect(()=>{P.data?.home_location&&(v(String(P.data.home_location.home_lat)),S(String(P.data.home_location.home_lon)),T(String(P.data.home_location.radius_m)))},[P.data?.home_location]),_.useEffect(()=>{Z&&M(Z.shift_id?String(Z.shift_id):"")},[Z]),_.useEffect(()=>{Z&&(R(Z.full_name),K(Z.department_id?String(Z.department_id):""))},[Z]),_.useEffect(()=>{Number.isFinite(h)&&(f||i("/employees",{replace:!0}))},[h,f,i]);const Dt=async Y=>{try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(Y);else{const Ye=document.createElement("textarea");Ye.value=Y,document.body.appendChild(Ye),Ye.select(),document.execCommand("copy"),document.body.removeChild(Ye)}o({variant:"success",title:"Kopyalandi",description:"Deger panoya kopyalandi."})}catch{o({variant:"error",title:"Kopyalanamadi",description:"Tarayici kopyalama islemini engelledi."})}},mt=()=>{de(null),J(null),te(null),B("60"),ne(!0)},rn=Y=>{Y.preventDefault(),de(null);const Ye=nM.safeParse({expires_in_minutes:W});if(!Ye.success){const st=Ye.error.issues[0]?.message??"Sure alanini kontrol edin.";de(st),o({variant:"error",title:"Form hatasi",description:st});return}Ut.mutate({employee_id:h,expires_in_minutes:Ye.data.expires_in_minutes})},se=Y=>{Y.preventDefault(),k(null);const Ye=tM.safeParse({home_lat:x,home_lon:b,radius_m:w});if(!Ye.success){const st=Ye.error.issues[0]?.message??"Konum alanlarini kontrol edin.";k(st),o({variant:"error",title:"Form hatasi",description:st});return}tt.mutate(Ye.data)},Ae=Y=>{Y.preventDefault();const Ye=I.trim();if(!Ye){o({variant:"error",title:"Form hatasi",description:"Ad Soyad alani bos birakilamaz."});return}const st=D?Number(D):null;if(D&&(st===null||!Number.isFinite(st)||st<=0)){o({variant:"error",title:"Form hatasi",description:"Departman secimi gecersiz."});return}rt.mutate({full_name:Ye,department_id:st})},Ke=qe.data?.days??[],ce=_.useMemo(()=>tp(Ke),[Ke]),Re=P.data?.ip_summary??[];_.useEffect(()=>{if(!ae)return;Ke.some(Ye=>Ye.date===ae)||ve(null)},[Ke,ae]);const ct=_.useMemo(()=>Ke.find(Y=>Y.date===ae)??null,[Ke,ae]),be=_.useMemo(()=>{const Y=[];return ct&&(ct.in_lat!==null&&ct.in_lon!==null&&Y.push({id:`${ct.date}-in`,lat:ct.in_lat,lon:ct.in_lon,label:`${ct.date} - Mesai Baslangici`,kind:"checkin"}),ct.out_lat!==null&&ct.out_lon!==null&&Y.push({id:`${ct.date}-out`,lat:ct.out_lat,lon:ct.out_lon,label:`${ct.date} - Mesai Bitisi`,kind:"checkout"})),P.data?.latest_location&&Y.push({id:"latest",lat:P.data.latest_location.lat,lon:P.data.latest_location.lon,label:"Son bildirilen konum",kind:"latest"}),Y},[P.data?.latest_location,ct]),He=_.useMemo(()=>be.filter(Y=>ee[Y.kind]),[be,ee]);_.useEffect(()=>{be.length&&(He.length||ue({checkin:!0,checkout:!0,latest:!0}))},[He.length,be.length]);const lt=Y=>{if(!be.some(Vt=>Vt.kind===Y)){o({variant:"info",title:"Bu tipte konum yok",description:"Secili kayitta bu lejant turune ait konum bulunamadi."});return}const st=Object.values(ee).filter(Boolean).length;if(ee[Y]&&st===1){ue({checkin:!0,checkout:!0,latest:!0});return}ue({checkin:Y==="checkin",checkout:Y==="checkout",latest:Y==="latest"})},at=()=>{ue({checkin:!0,checkout:!0,latest:!0})},tn=(Y,Ye)=>{const st=Y.in_lat!==null&&Y.in_lon!==null,Vt=Y.out_lat!==null&&Y.out_lon!==null;if(!(Ye==="in"?st:Vt)){o({variant:"info",title:"Konum bulunamadi",description:`${Y.date} icin secilen konum kaydi yok.`});return}ve(Y.date),ue({checkin:!0,checkout:!0,latest:!0})},re=_.useMemo(()=>`${P.data?.devices.length??0} cihaz`,[P.data?.devices.length]);return Number.isFinite(h)?f?P.isLoading?a.jsx(Ot,{}):P.isError||!Z?a.jsx(St,{message:"Calisan kaydi bulunamadi."}):a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:`Calisan Detayi #${Z.id}`,description:`${Z.full_name} icin puantaj, cihaz, aktivite ve konum bilgileri`,action:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{const Y=!Z.is_active;window.confirm(Y?`${Z.full_name} arsivden cikarilsin mi?`:`${Z.full_name} arsivlensin mi?`)&&bt.mutate(Y)},disabled:bt.isPending,className:`rounded-lg px-4 py-2 text-sm font-semibold text-white ${Z.is_active?"bg-rose-600 hover:bg-rose-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:Z.is_active?"Arsivle":"Arsivden Cikar"}),a.jsx("button",{type:"button",onClick:mt,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Cihaz Baglama Linki Olustur"})]})}),a.jsx(Oe,{children:a.jsxs("div",{className:"grid gap-3 md:grid-cols-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Calisan"}),a.jsx("p",{className:"text-base font-semibold text-slate-900",children:Z.full_name}),a.jsxs("p",{className:"text-xs text-slate-500",children:["ID: ",Z.id]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Durum"}),a.jsx(qs,{value:Z.is_active?"Aktif":"Pasif"}),a.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Bolge: ",Z.region_name??"-"]}),a.jsxs("p",{className:"text-xs text-slate-500",children:["Departman ID: ",Z.department_id??"-"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Son employee portal aktivitesi"}),a.jsx("p",{className:"text-sm font-medium text-slate-800",children:Ji(P.data?.last_portal_seen_utc)}),a.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Cihaz sayisi: ",re]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Bu ay yasal fazla mesai"}),a.jsx("p",{className:"text-lg font-semibold text-slate-900",children:a.jsx(Pe,{minutes:Ne.data?.totals.legal_overtime_minutes??0})}),a.jsxs("p",{className:"text-xs text-slate-500",children:["Plan ustu: ",a.jsx(Pe,{minutes:Ne.data?.totals.plan_overtime_minutes??0})]}),a.jsxs("p",{className:"text-xs text-slate-500",children:[d.getFullYear(),"-",String(d.getMonth()+1).padStart(2,"0")]})]})]})}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Calisan Bilgileri"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ad Soyad ve departman bilgisini bu alandan guncelleyebilirsiniz."}),a.jsxs("form",{onSubmit:Ae,className:"mt-3 grid gap-3 md:grid-cols-3 md:items-end",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Ad Soyad",a.jsx("input",{value:I,onChange:Y=>R(Y.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Calisan adi soyadi"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",a.jsxs("select",{value:D,onChange:Y=>K(Y.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",disabled:me.isLoading,children:[a.jsx("option",{value:"",children:"Atanmamis"}),(me.data??[]).map(Y=>a.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),a.jsx("button",{type:"submit",disabled:rt.isPending||me.isLoading,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-700 disabled:opacity-60",children:rt.isPending?"Kaydediliyor...":"Bilgileri Kaydet"})]}),me.isError?a.jsx("p",{className:"mt-2 text-xs text-amber-700",children:"Departman listesi alinamadi. Lutfen tekrar deneyin."}):null]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Vardiya Atamasi"}),a.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-[1fr_auto] md:items-end",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya",a.jsxs("select",{value:A,onChange:Y=>M(Y.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",disabled:!Z.department_id||Se.isLoading,children:[a.jsx("option",{value:"",children:"Atanmamis"}),(Se.data??[]).map(Y=>a.jsxs("option",{value:Y.id,children:[Y.name," (",Y.start_time_local,"-",Y.end_time_local,")"]},Y.id))]})]}),a.jsx("button",{type:"button",disabled:pt.isPending||!Z.department_id,onClick:()=>{const Y=A?Number(A):null;pt.mutate(Y)},className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-700 disabled:opacity-60",children:pt.isPending?"Kaydediliyor...":"Vardiya Ata"})]})]}),a.jsxs(Oe,{children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Aylik Puantaj"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Aydan aya puantaj ve secili ay fazla mesai durumunu inceleyin."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("label",{className:"text-xs text-slate-600",children:["Yil",a.jsx("input",{type:"number",value:G,onChange:Y=>V(Y.target.value),className:"mt-1 w-28 rounded-lg border border-slate-300 px-2 py-1 text-sm"})]}),a.jsxs("label",{className:"text-xs text-slate-600",children:["Ay",a.jsx("input",{type:"number",min:1,max:12,value:q,onChange:Y=>Q(Y.target.value),className:"mt-1 w-20 rounded-lg border border-slate-300 px-2 py-1 text-sm"})]})]})]}),Ve?qe.isLoading?a.jsx(Ot,{}):qe.isError?a.jsx(St,{message:Le(qe.error,"Aylik puantaj alinamadi.").message}):a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-3 xl:grid-cols-7",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay net calisma"}),a.jsx("p",{className:"text-lg font-semibold text-slate-900",children:a.jsx(Pe,{minutes:qe.data?.totals.worked_minutes??0})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay plan ustu sure"}),a.jsx("p",{className:"text-lg font-semibold text-slate-900",children:a.jsx(Pe,{minutes:qe.data?.totals.plan_overtime_minutes??0})}),a.jsxs("p",{className:"text-xs text-slate-500",children:[ce.planOvertimeDayCount," gun"]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay yasal fazla sure"}),a.jsx("p",{className:"text-lg font-semibold text-slate-900",children:a.jsx(Pe,{minutes:qe.data?.totals.legal_extra_work_minutes??0})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay yasal fazla mesai"}),a.jsx("p",{className:"text-lg font-semibold text-slate-900",children:a.jsx(Pe,{minutes:qe.data?.totals.legal_overtime_minutes??0})}),a.jsxs("p",{className:"text-xs text-slate-500",children:[ce.overtimeDayCount," gun fazla mesai"]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Eksik gun"}),a.jsx("p",{className:"text-lg font-semibold text-slate-900",children:qe.data?.totals.incomplete_days??0})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Calisilan gun"}),a.jsx("p",{className:"text-lg font-semibold text-slate-900",children:ce.workedDayCount}),a.jsxs("p",{className:"text-xs text-slate-500",children:["Hafta ici: ",ce.weekdayWorkedDayCount," gun"]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Pazar mesaisi"}),a.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[ce.sundayWorkedDayCount," gun"]}),a.jsx("p",{className:"text-xs text-slate-500",children:a.jsx(Pe,{minutes:ce.sundayWorkedMinutes})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Ozel gun mesaisi"}),a.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[ce.specialWorkedDayCount," gun"]}),a.jsx("p",{className:"text-xs text-slate-500",children:a.jsx(Pe,{minutes:ce.specialWorkedMinutes})})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Tarih"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2",children:"Gun Tipi"}),a.jsx("th",{className:"py-2",children:"Giris"}),a.jsx("th",{className:"py-2",children:"Cikis"}),a.jsx("th",{className:"py-2",children:"Giris Konum (lat/lon)"}),a.jsx("th",{className:"py-2",children:"Cikis Konum (lat/lon)"}),a.jsx("th",{className:"py-2",children:"Net Sure"}),a.jsx("th",{className:"py-2",children:"Plan Ustu"}),a.jsx("th",{className:"py-2",children:"Yasal Fazla Sure"}),a.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"}),a.jsx("th",{className:"py-2",children:"Bayraklar"})]})}),a.jsx("tbody",{children:Ke.map(Y=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:Y.date}),a.jsx("td",{className:"py-2",children:aM(Y.status)}),a.jsx("td",{className:"py-2",children:_d(Y).label}),a.jsx("td",{className:"py-2",children:Ji(Y.in)}),a.jsx("td",{className:"py-2",children:Ji(Y.out)}),a.jsx("td",{className:"py-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-mono text-xs",children:iv(Y.in_lat,Y.in_lon)}),Y.in_lat!==null&&Y.in_lon!==null?a.jsx("button",{type:"button",className:"rounded-md border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",onClick:()=>tn(Y,"in"),title:"Mesai baslangic konumunu haritada goster",children:"Check"}):null]})}),a.jsx("td",{className:"py-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-mono text-xs",children:iv(Y.out_lat,Y.out_lon)}),Y.out_lat!==null&&Y.out_lon!==null?a.jsx("button",{type:"button",className:"rounded-md border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",onClick:()=>tn(Y,"out"),title:"Mesai bitis konumunu haritada goster",children:"Check"}):null]})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:Y.worked_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:Y.plan_overtime_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:Y.legal_extra_work_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:Y.legal_overtime_minutes})}),a.jsx("td",{className:"py-2 text-xs text-slate-600",children:iM(Y.flags)})]},Y.date))})]})})]}):a.jsx("p",{className:"mt-3 text-sm text-amber-700",children:"Yil/ay degeri gecersiz."})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Kayitli Cihazlar ve IP Bilgisi"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Cihazlar, son attendance zamani ve son gorulen IP bilgisi."}),a.jsx("div",{className:"mt-3 overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Cihaz ID"}),a.jsx("th",{className:"py-2",children:"Parmak Izi"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2",children:"Olusma"}),a.jsx("th",{className:"py-2",children:"Son Attendance"}),a.jsx("th",{className:"py-2",children:"Son Gorulen IP"}),a.jsx("th",{className:"py-2",children:"Son Islem Zamani"})]})}),a.jsx("tbody",{children:(P.data?.devices??[]).map(Y=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:Y.id}),a.jsx("td",{className:"py-2 font-mono text-xs",children:Y.device_fingerprint}),a.jsx("td",{className:"py-2",children:a.jsx(qs,{value:Y.is_active?"Aktif":"Pasif"})}),a.jsx("td",{className:"py-2",children:Ji(Y.created_at)}),a.jsx("td",{className:"py-2",children:Ji(Y.last_attendance_ts_utc)}),a.jsx("td",{className:"py-2",children:Y.last_seen_ip??"-"}),a.jsx("td",{className:"py-2",children:Ji(Y.last_seen_at_utc)})]},Y.id))})]})})]}),a.jsxs("div",{className:"grid gap-4 lg:grid-cols-2 lg:items-start",children:[a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Employee Portal Aktivite Akisi"}),a.jsx("div",{className:"mt-3 max-h-[420px] overflow-auto rounded-lg border border-slate-200",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Zaman"}),a.jsx("th",{className:"py-2",children:"Islem"}),a.jsx("th",{className:"py-2",children:"IP"}),a.jsx("th",{className:"py-2",children:"User Agent"})]})}),a.jsx("tbody",{children:(P.data?.recent_activity??[]).map((Y,Ye)=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:Ji(Y.ts_utc)}),a.jsx("td",{className:"py-2",children:Y.action}),a.jsx("td",{className:"py-2",children:Y.ip??"-"}),a.jsx("td",{className:"py-2 max-w-[280px] truncate",title:Y.user_agent??"-",children:Y.user_agent??"-"})]},`${Y.ts_utc}-${Ye}`))})]})})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Cihaz IP Ozeti"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"IP, son gorulme zamani ve son bilinen konum bilgisi."}),a.jsx("div",{className:"mt-3 max-h-[420px] overflow-auto rounded-lg border border-slate-200",children:Re.length?a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"IP"}),a.jsx("th",{className:"py-2",children:"Son gorulme"}),a.jsx("th",{className:"py-2",children:"Aksiyon"}),a.jsx("th",{className:"py-2",children:"Son konum (lat/lon)"}),a.jsx("th",{className:"py-2",children:"Konum zamani"})]})}),a.jsx("tbody",{children:Re.map(Y=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2 font-mono text-xs",children:Y.ip}),a.jsx("td",{className:"py-2",children:Ji(Y.last_seen_at_utc)}),a.jsx("td",{className:"py-2",children:Y.last_action}),a.jsx("td",{className:"py-2",children:Y.last_lat!==null&&Y.last_lon!==null?`${Y.last_lat.toFixed(6)}, ${Y.last_lon.toFixed(6)}`:"-"}),a.jsx("td",{className:"py-2",children:Y.last_location_ts_utc?Ji(Y.last_location_ts_utc):"-"})]},Y.ip))})]}):a.jsx("div",{className:"p-3 text-sm text-slate-500",children:"IP kaydi bulunamadi."})})]})]}),a.jsxs(Oe,{children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Konum Haritasi"}),ae?a.jsx("button",{type:"button",onClick:()=>{ve(null),ue({checkin:!0,checkout:!0,latest:!0})},className:"rounded-md border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Son bildirilen konuma don"}):null]}),ct?a.jsxs("p",{className:"mt-2 text-sm text-slate-700",children:["Harita secimi: ",a.jsx("span",{className:"font-semibold",children:ct.date})," gununun giris/cikis konumlari"]}):P.data?.latest_location?a.jsx("p",{className:"mt-2 text-sm text-slate-700",children:"Harita secimi: son bildirilen konum"}):a.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Calisan icin konum verisi henuz yok."}),He.length?a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsx(eM,{markers:He}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-700",children:[a.jsxs("button",{type:"button",onClick:()=>lt("checkin"),className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${ee.checkin?"border-emerald-300 bg-emerald-50 text-emerald-800":"border-slate-300 bg-white text-slate-500"}`,title:"Yalnizca mesai baslangici noktalarini goster",children:[a.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-600"}),"Mesai baslangici"]}),a.jsxs("button",{type:"button",onClick:()=>lt("checkout"),className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${ee.checkout?"border-rose-300 bg-rose-50 text-rose-800":"border-slate-300 bg-white text-slate-500"}`,title:"Yalnizca mesai bitisi noktalarini goster",children:[a.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-600"}),"Mesai bitisi"]}),a.jsxs("button",{type:"button",onClick:()=>lt("latest"),className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${ee.latest?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-white text-slate-500"}`,title:"Yalnizca son bildirilen konumu goster",children:[a.jsx("span",{className:"h-2 w-2 rounded-full bg-sky-700"}),"Son bildirilen konum"]}),a.jsx("button",{type:"button",onClick:at,className:"ml-1 rounded-md border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",children:"Tumunu goster"})]})]}):a.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Secili filtrede gosterilecek konum noktasi yok."})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Ev Konumu"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Check-in konum dogrulamasi icin enlem, boylam ve yaricap metre bilgisini girin."}),P.data?.home_location?null:a.jsx("p",{className:"mt-2 text-sm text-amber-700",children:"Kayitli konum bulunamadi. Ilk kaydi olusturabilirsiniz."}),a.jsxs("form",{onSubmit:se,className:"mt-4 grid gap-3 md:grid-cols-3",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Ev Enlem (Lat)",a.jsx("input",{value:x,onChange:Y=>v(Y.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Ev Boylam (Lon)",a.jsx("input",{value:b,onChange:Y=>S(Y.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Yaricap (metre)",a.jsx("input",{value:w,onChange:Y=>T(Y.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsx("div",{className:"md:col-span-3",children:a.jsx("button",{type:"submit",disabled:tt.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:tt.isPending?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Kaydediliyor..."]}):P.data?.home_location?"Konumu Guncelle":"Konumu Kaydet"})})]}),z?a.jsx("p",{className:"form-validation",children:z}):null]}),a.jsxs(Zs,{open:_e,title:"Cihaz Baglama Linki Olustur",onClose:()=>ne(!1),children:[a.jsxs("form",{onSubmit:rn,className:"space-y-4",children:[a.jsxs("label",{className:"block text-sm text-slate-700",children:["Gecerlilik Suresi (dakika)",a.jsx("input",{value:W,onChange:Y=>B(Y.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsx("button",{type:"submit",disabled:Ut.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Ut.isPending?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Olusturuluyor..."]}):"Daveti Uret"})]}),a.jsx("p",{className:"mt-3 text-xs text-slate-500",children:"Bu linki calisana iletin. Calisan linki acinca cihazini otomatik olarak hesabina baglayabilir."}),X?a.jsx("p",{className:"form-validation",children:X}):null,ke&&O?a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsx(nv,{label:"Token",value:ke,onCopy:Dt}),a.jsx(nv,{label:"Baglanti Linki (invite_url)",value:O,onCopy:Dt})]}):null]})]}):a.jsx(Ot,{}):a.jsx(St,{message:"Gecersiz calisan id degeri."})}const rM={NORMAL:"Normal",IZINLI:"Izinli",RESMI_TATIL:"Resmi Tatil",CALISMADI:"Calismadi"},lM={SHIFT:"Vardiya",WEEKLY:"Haftalik Kural",WORK_RULE:"Temel Kural"},Hc={AUTO:"Otomatik (Oncelik: Vardiya > Haftalik > Temel)",SHIFT:"Vardiya",WEEKLY:"Haftalik Kural",WORK_RULE:"Temel Kural"},m_="Europe/Istanbul";function of(e){const i=[];e.status==="INCOMPLETE"&&i.push("EKSIK_GUN");for(const l of e.flags)i.push(l);return i}function oM(e){return e.length===0?void 0:`Supheli nedenleri:
${e.map((l,o)=>{const d=Za(l);return`${o+1}. ${d.label}: ${d.description}`}).join(`
`)}`}function sv(e){if(!e)return"";const i=new Date(e);return Number.isNaN(i.getTime())?"":new Intl.DateTimeFormat("tr-TR",{timeZone:m_,hour:"2-digit",minute:"2-digit",hour12:!1}).format(i)}function rv(e){if(!e)return"-";const i=new Date(e);return Number.isNaN(i.getTime())?e:new Intl.DateTimeFormat("tr-TR",{timeZone:m_,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(i)}function lv(e){if(!e)return{status:"NORMAL",reason:""};const i=(e.note??"").trim(),l=i.match(/^\[MANUAL_STATUS:(NORMAL|IZINLI|RESMI_TATIL|CALISMADI)\]\s*/i);return l?{status:l[1].toUpperCase(),reason:i.replace(l[0],"").trim()}:e.is_absent?{status:"CALISMADI",reason:i}:{status:"NORMAL",reason:i}}function uM(e,i){const l=i.trim();if(e==="NORMAL")return l||null;const o=`[MANUAL_STATUS:${e}]`;return l?`${o} ${l}`:o}function cM(){const e=Un(),{pushToast:i}=Fn(),l=new Date,o={employeeId:"",year:String(l.getFullYear()),month:String(l.getMonth()+1)},[d,h]=_.useState(o),[f,x]=_.useState(o),[v,b]=_.useState(!1),[S,w]=_.useState(null),[T,z]=_.useState(!1),[k,A]=_.useState(!1),[M,I]=_.useState(""),[R,D]=_.useState(""),[K,G]=_.useState(""),[V,q]=_.useState(""),[Q,ae]=_.useState("NORMAL"),[ve,ee]=_.useState("AUTO"),[ue,_e]=_.useState(""),[ne,W]=_.useState(null),[B,X]=_.useState(null),de=Be({queryKey:["employees","all"],queryFn:()=>ui({status:"all"})}),ke=Number(f.employeeId),J=Number(f.year),O=Number(f.month),te=Number.isFinite(ke)&&ke>0&&Number.isFinite(J)&&J>0&&Number.isFinite(O)&&O>=1&&O<=12,P=Be({queryKey:["employee-monthly",ke,J,O],queryFn:()=>tu({employee_id:ke,year:J,month:O}),enabled:te}),Z=Be({queryKey:["manual-overrides",ke,J,O],queryFn:()=>KE(ke,J,O),enabled:te}),me=Xe({mutationFn:({employeeId:be,dayDate:He,inTime:lt,outTime:at,status:tn,ruleSource:re,ruleShiftId:Y,reason:Ye})=>{const st=tn!=="NORMAL";return HE(be,{day_date:He,in_time:st?null:lt||null,out_time:st?null:at||null,is_absent:st,rule_source_override:re,rule_shift_id_override:re==="SHIFT"&&Y?Number(Y):null,note:uM(tn,Ye)})},onSuccess:()=>{i({variant:"success",title:"Manuel duzeltme kaydedildi",description:"Gunluk puantaj kaydi guncellendi."}),A(!1),X(null),_e(""),e.invalidateQueries({queryKey:["employee-monthly"]}),e.invalidateQueries({queryKey:["manual-overrides"]})},onError:be=>{i({variant:"error",title:"Duzeltme kaydedilemedi",description:Le(be,"Islem basarisiz.").message})}}),Se=Xe({mutationFn:QE,onSuccess:()=>{i({variant:"success",title:"Manuel duzeltme kaldirildi",description:"Secili gun icin manuel override silindi."}),A(!1),X(null),e.invalidateQueries({queryKey:["employee-monthly"]}),e.invalidateQueries({queryKey:["manual-overrides"]})},onError:be=>{i({variant:"error",title:"Silme islemi basarisiz",description:Le(be,"Islem basarisiz.").message})}}),Me=_.useMemo(()=>de.data?.find(be=>be.id===ke),[de.data,ke]),Ze=Me?.full_name,Ve=Be({queryKey:["monthly-manual-shifts",Me?.department_id],queryFn:()=>mu(Me?.department_id?{department_id:Me.department_id,active_only:!1}:void 0),enabled:!!Me?.department_id}),qe=_.useMemo(()=>{const be=new Map;for(const He of Z.data??[])be.set(He.day_date,He);return be},[Z.data]),Ne=P.data?.days??[],tt=_.useMemo(()=>Ne.reduce((be,He)=>be+(He.missing_minutes??0),0),[Ne]),bt=_.useMemo(()=>Ne.filter(be=>!(v&&of(be).length===0||S&&!be.flags.includes(S))),[Ne,S,v]),rt=_.useMemo(()=>Ne.filter(be=>of(be).length>0).length,[Ne]),pt=_.useMemo(()=>Ne.filter(be=>be.legal_overtime_minutes>0).length,[Ne]),Ut=_.useMemo(()=>{const be=["SHIFT_WEEKLY_RULE_OVERRIDE","NEEDS_SHIFT_REVIEW","MISSING_IN","MISSING_OUT","UNDERWORKED"],He=new Map;for(const lt of be)He.set(lt,0);for(const lt of Ne)for(const at of be)lt.flags.includes(at)&&He.set(at,(He.get(at)??0)+1);return be.map(lt=>({code:lt,count:He.get(lt)??0}))},[Ne]),Dt=_.useMemo(()=>{const be=[];return f.employeeId&&be.push(`Calisan: ${f.employeeId}`),be.push(`Yil: ${f.year}`),be.push(`Ay: ${f.month}`),v&&be.push("Sadece supheli gunler"),S&&be.push(`Cakisma: ${Za(S).label}`),be},[f,S,v]),mt=()=>x({...d}),rn=()=>{h(o),x(o),b(!1),w(null)},se=async()=>{if(!te){i({variant:"error",title:"Filtre hatasi",description:"Excel indirmek icin calisan, yil ve ay secin."});return}try{z(!0);const be=await $E({employee_id:ke,year:J,month:O}),He=window.URL.createObjectURL(be),lt=document.createElement("a");lt.href=He,lt.download=`puantaj-employee-${ke}-${J}-${String(O).padStart(2,"0")}.xlsx`,document.body.appendChild(lt),lt.click(),lt.remove(),window.URL.revokeObjectURL(He)}catch(be){i({variant:"error",title:"Excel indirilemedi",description:Le(be,"Dosya olusturulamadi.").message})}finally{z(!1)}},Ae=be=>{const He=qe.get(be.date),lt=lv(He);I(be.date),W(He?.id??null),ae(lt.status),q(lt.reason),D(He?sv(He.in_ts):""),G(He?sv(He.out_ts):""),ee(He?.rule_source_override??"AUTO"),_e(He?.rule_shift_id_override?String(He.rule_shift_id_override):be.shift_id?String(be.shift_id):""),X(null),A(!0)},Ke=()=>{if(!te||Ne.length===0){i({variant:"error",title:"Rapor verisi yok",description:"Once calisan, yil ve ay secip raporu yukleyin."});return}Ae(Ne[0])},ce=()=>{if(X(null),!M)return X("Duzeltme icin tarih secmelisiniz."),!1;if(Q==="NORMAL"){if(!R&&!K)return X("Normal gun icin en az bir saat bilgisi girin."),!1;if(R&&K&&K<R)return X("Cikis saati giris saatinden kucuk olamaz."),!1}return ve==="SHIFT"&&!ue?(X("Vardiya kurali icin bir vardiya secmelisiniz."),!1):!0},Re=be=>{be.preventDefault(),te&&ce()&&me.mutate({employeeId:ke,dayDate:M,inTime:R,outTime:K,status:Q,ruleSource:ve,ruleShiftId:ue,reason:V})};if(de.isLoading)return a.jsx(Ot,{});if(de.isError)return a.jsx(St,{message:"Calisan listesi alinamadi."});const ct=de.data??[];return a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"Aylik Calisan Puantaj Raporu",description:"Gunluk giris/cikis ve fazla mesai bilgilerini inceleyin, HR icin manuel duzeltme yapin.",action:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:Ke,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Manuel Duzeltme"}),a.jsx("button",{type:"button",onClick:()=>{se()},disabled:T,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:T?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"inline-spinner inline-spinner-dark","aria-hidden":"true"}),"Hazirlaniyor..."]}):"Excel Indir"}),a.jsx(li,{to:"/reports/excel-export",className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Gelismis Export"})]})}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),a.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-4",children:[a.jsx(Ka,{label:"Calisan",employees:ct,value:d.employeeId,onChange:be=>h(He=>({...He,employeeId:be})),emptyLabel:"Seciniz",helperText:"Calisan adini veya ID bilgisini yazabilirsiniz.",className:"md:col-span-2"}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Yil",a.jsx("input",{type:"number",value:d.year,onChange:be=>h(He=>({...He,year:be.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",a.jsx("input",{type:"number",value:d.month,onChange:be=>h(He=>({...He,month:be.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),a.jsx("div",{className:"mt-3",children:a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:v,onChange:be=>b(be.target.checked)}),"Sadece supheli gunleri goster"]})}),a.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[a.jsx("button",{type:"button",onClick:mt,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),a.jsx("button",{type:"button",onClick:rn,className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]}),a.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Dt.map(be=>a.jsx("span",{className:"inline-flex rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:be},be))})]}),te?null:a.jsx(St,{message:"Rapor icin calisan, yil ve ay secmelisiniz."}),P.isLoading?a.jsx(Ot,{}):null,P.isError?a.jsx(St,{message:Le(P.error,"Aylik rapor alinamadi.").message}):null,P.data?a.jsxs(a.Fragment,{children:[a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Toplamlar"}),a.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Calisan: ",Ze??P.data.employee_id," | Donem:"," ",P.data.year,"-",P.data.month]}),a.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-7",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Calisma"}),a.jsx("p",{className:"text-lg font-semibold",children:a.jsx(Pe,{minutes:P.data.totals.worked_minutes})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Plan Ustu Sure"}),a.jsx("p",{className:"text-lg font-semibold",children:a.jsx(Pe,{minutes:P.data.totals.plan_overtime_minutes})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Yasal Fazla Sure"}),a.jsx("p",{className:"text-lg font-semibold",children:a.jsx(Pe,{minutes:P.data.totals.legal_extra_work_minutes})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Yasal Fazla Mesai"}),a.jsx("p",{className:"text-lg font-semibold",children:a.jsx(Pe,{minutes:P.data.totals.legal_overtime_minutes})}),a.jsxs("p",{className:"text-xs text-slate-500",children:[pt," gun"]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Eksik Gun"}),a.jsx("p",{className:"text-lg font-semibold",children:P.data.totals.incomplete_days})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Supheli Gun"}),a.jsx("p",{className:"text-lg font-semibold",children:rt})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Eksik Sure"}),a.jsx("p",{className:"text-lg font-semibold",children:a.jsx(Pe,{minutes:tt})})]})]})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Compliance (TR Is Kanunu)"}),a.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-4",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Net Calisma"}),a.jsx("p",{className:"text-lg font-semibold",children:a.jsx(Pe,{minutes:P.data.worked_minutes_net})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Yillik Fazla Mesai Kullanim"}),a.jsx("p",{className:"text-lg font-semibold",children:a.jsx(Pe,{minutes:P.data.annual_overtime_used_minutes})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Yillik Kalan Fazla Mesai"}),a.jsx("p",{className:"text-lg font-semibold",children:a.jsx(Pe,{minutes:P.data.annual_overtime_remaining_minutes})})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Yillik Limit Durumu"}),a.jsx("p",{className:`text-sm font-semibold ${P.data.annual_overtime_cap_exceeded?"text-rose-700":"text-emerald-700"}`,children:P.data.annual_overtime_cap_exceeded?"Limit Asildi":"Limit Icinde"})]})]}),a.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Flag aciklamalari"}),a.jsx("ul",{className:"mt-2 space-y-1 text-xs text-slate-600",children:m1().map(be=>a.jsxs("li",{children:[a.jsx("span",{className:"font-semibold",title:Za(be).description,children:Za(be).label})," ","(",be,"): ",Za(be).description]},be))})]})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Cakisma Analizi"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Vardiya, haftalik kural ve event siralamasi arasinda tutarsiz gorunen gunlerin ozeti."}),S?a.jsx("button",{type:"button",onClick:()=>w(null),className:"mt-2 rounded-lg border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 hover:bg-slate-100",children:"Cakisma filtresini temizle"}):null,a.jsx("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:Ut.map(be=>a.jsxs("button",{type:"button",onClick:()=>{w(He=>He===be.code?null:be.code),b(!0)},className:`rounded-lg border px-3 py-2 text-left transition ${S===be.code?"border-brand-500 bg-brand-50":"border-slate-200 bg-slate-50 hover:border-slate-300"}`,children:[a.jsx("p",{className:"text-xs text-slate-500",title:Za(be.code).description,children:Za(be.code).label}),a.jsx("p",{className:"text-lg font-semibold text-slate-900",children:be.count})]},be.code))})]}),bt.length===0?a.jsx(Oe,{children:a.jsx("p",{className:"text-sm text-slate-600",children:"Secilen filtreye uygun gunluk kayit bulunamadi."})}):a.jsx(Oe,{children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Tarih"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2",children:"Giris"}),a.jsx("th",{className:"py-2",children:"Cikis"}),a.jsx("th",{className:"py-2",children:"Calisma"}),a.jsx("th",{className:"py-2",children:"Plan Ustu"}),a.jsx("th",{className:"py-2",children:"Yasal Fazla Sure"}),a.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"}),a.jsx("th",{className:"py-2",children:"Eksik Sure"}),a.jsx("th",{className:"py-2",children:"Kural Kaynagi"}),a.jsx("th",{className:"py-2",children:"Vardiya"}),a.jsx("th",{className:"py-2",children:"Izin"}),a.jsx("th",{className:"py-2",children:"Supheli Neden"}),a.jsx("th",{className:"py-2",children:"Aksiyon"})]})}),a.jsx("tbody",{children:bt.map(be=>{const He=of(be),lt=He.length>0,at=oM(He),tn=qe.get(be.date),re=lv(tn),Y=be.flags.includes("MANUAL_OVERRIDE")||be.flags.includes("MANUAL_EVENT")||!!tn,Ye=re.status!=="NORMAL";return a.jsxs("tr",{className:`border-t border-slate-100 ${lt?"bg-amber-50/40":""}`,children:[a.jsx("td",{className:"py-2",children:be.date}),a.jsxs("td",{className:"py-2",children:[a.jsx(qs,{value:be.status}),Y?a.jsx("span",{className:"ml-2 inline-flex rounded-full bg-indigo-100 px-2 py-1 text-[11px] font-semibold text-indigo-700",children:"MANUEL"}):null,Ye?a.jsx("span",{className:"ml-2 inline-flex rounded-full bg-cyan-100 px-2 py-1 text-[11px] font-semibold text-cyan-700",children:rM[re.status]}):null,a.jsx("span",{className:"ml-2",children:a.jsx(Tb,{suspicious:lt,tooltip:at})})]}),a.jsx("td",{className:"py-2",title:be.in??void 0,children:rv(be.in)}),a.jsx("td",{className:"py-2",title:be.out??void 0,children:rv(be.out)}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:be.worked_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:be.plan_overtime_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:be.legal_extra_work_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:be.legal_overtime_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:be.missing_minutes??0})}),a.jsx("td",{className:"py-2",children:a.jsx("span",{className:"inline-flex rounded-full bg-slate-100 px-2 py-1 text-[11px] font-semibold text-slate-700",title:`Oncelik: Vardiya > Haftalik > Temel | Plan: ${be.applied_planned_minutes} dk | Mola: ${be.applied_break_minutes} dk`,children:lM[be.rule_source]})}),a.jsx("td",{className:"py-2",children:be.shift_name??"-"}),a.jsx("td",{className:"py-2",children:be.leave_type??"-"}),a.jsx("td",{className:"py-2",children:a.jsx(Ab,{reasons:He})}),a.jsx("td",{className:"py-2",children:a.jsx("button",{type:"button",onClick:()=>Ae(be),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Manuel Duzelt"})})]},be.date)})})]})})})]}):null,a.jsx(Zs,{open:k,title:M?`${M} - Manuel Duzeltme`:"Manuel Duzeltme",onClose:()=>A(!1),children:a.jsxs("form",{onSubmit:Re,className:"space-y-3",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Tarih",a.jsx("input",{type:"date",value:M,onChange:be=>I(be.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Gun Durumu",a.jsxs("select",{value:Q,onChange:be=>ae(be.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"NORMAL",children:"Normal"}),a.jsx("option",{value:"IZINLI",children:"Izinli"}),a.jsx("option",{value:"RESMI_TATIL",children:"Resmi Tatil"}),a.jsx("option",{value:"CALISMADI",children:"Calismadi"})]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Kural Kaynagi",a.jsxs("select",{value:ve,onChange:be=>{const He=be.target.value;ee(He),He!=="SHIFT"&&_e("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"AUTO",children:Hc.AUTO}),a.jsx("option",{value:"SHIFT",children:Hc.SHIFT}),a.jsx("option",{value:"WEEKLY",children:Hc.WEEKLY}),a.jsx("option",{value:"WORK_RULE",children:Hc.WORK_RULE})]})]}),ve==="SHIFT"?a.jsxs("label",{className:"text-sm text-slate-700",children:["Kural Vardiyasi",a.jsxs("select",{value:ue,onChange:be=>_e(be.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Vardiya seciniz"}),(Ve.data??[]).map(be=>a.jsxs("option",{value:be.id,children:[be.name," (",be.start_time_local," - ",be.end_time_local,")"]},be.id))]})]}):null,a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Giris Saati",a.jsx("input",{type:"time",value:R,onChange:be=>D(be.target.value),disabled:Q!=="NORMAL",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Cikis Saati",a.jsx("input",{type:"time",value:K,onChange:be=>G(be.target.value),disabled:Q!=="NORMAL",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),Q==="NORMAL"?a.jsx("p",{className:"text-xs text-slate-500",children:"Uyari: Cikis saati giris saatinden kucuk olamaz."}):a.jsx("p",{className:"text-xs text-slate-500",children:"Bu secim gunu calisilmadi olarak isaretler; giris/cikis saatleri devre disi kalir."}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Gerekce / Not (opsiyonel)",a.jsx("input",{type:"text",value:V,onChange:be=>q(be.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Saglik raporu / Sistem arizasi"})]}),B?a.jsx("p",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-xs font-medium text-amber-800",children:B}):null,a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{type:"submit",disabled:me.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:me.isPending?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Kaydediliyor..."]}):"Kaydet"}),ne?a.jsx("button",{type:"button",onClick:()=>Se.mutate(ne),disabled:Se.isPending,className:"btn-danger rounded-lg bg-rose-600 px-4 py-2 text-sm font-semibold text-white hover:bg-rose-700 disabled:opacity-60",children:Se.isPending?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Siliniyor..."]}):"Manuel Kaydi Sil"}):null]})]})})]})}const dM=ka({full_name:In().min(2,"Ad soyad en az 2 karakter olmali."),region_id:cd([_n().int().positive(),Tf()]),department_id:cd([_n().int().positive(),Tf()]),is_active:Ed()});function mM(){const e=Un(),{pushToast:i}=Fn(),[l,o]=_.useState(""),[d,h]=_.useState(""),[f,x]=_.useState(""),[v,b]=_.useState(!0),[S,w]=_.useState(""),[T,z]=_.useState(!1),[k,A]=_.useState(!1),[M,I]=_.useState(""),[R,D]=_.useState(""),[K,G]=_.useState(null),V=Be({queryKey:["employees",k,M,R],queryFn:()=>ui({...k?{include_inactive:!0}:{},...M?{region_id:Number(M)}:{},...R?{department_id:Number(R)}:{}})}),q=Be({queryKey:["departments"],queryFn:Hs}),Q=Be({queryKey:["regions","employees-page"],queryFn:()=>bd({include_inactive:!0})}),ae=Xe({mutationFn:eE,onSuccess:J=>{o(""),h(""),x(""),b(!0),G(null),z(!1),i({variant:"success",title:"Calisan olusturuldu",description:`${J.full_name} basariyla eklendi.`}),e.invalidateQueries({queryKey:["employees"]})},onError:J=>{const O=Le(J,"Calisan olusturulamadi.").message;G(O),i({variant:"error",title:"Calisan olusturulamadi",description:O})}}),ve=Xe({mutationFn:({employeeId:J,nextStatus:O})=>gb(J,{is_active:O}),onSuccess:J=>{i({variant:"success",title:J.is_active?"Calisan arsivden cikarildi":"Calisan arsivlendi",description:`${J.full_name} icin durum guncellendi.`}),e.invalidateQueries({queryKey:["employees"]})},onError:J=>{const O=Le(J,"Calisan durumu guncellenemedi.").message;i({variant:"error",title:"Islem basarisiz",description:O})}}),ee=J=>{J.preventDefault(),G(null);const O=d.trim()===""?null:Number(d),te=f.trim()===""?null:Number(f),P=dM.safeParse({full_name:l,region_id:O,department_id:te,is_active:v});if(!P.success){const Z=P.error.issues[0]?.message??"Calisan formunu kontrol edin.";G(Z),i({variant:"error",title:"Form hatasi",description:Z});return}ae.mutate(P.data)},ue=V.data??[],_e=q.data??[],ne=Q.data??[],W=new Map(_e.map(J=>[J.id,J.name])),B=new Map(ne.map(J=>[J.id,J.name])),X=_.useMemo(()=>{const J=d?Number(d):null;return J?_e.filter(O=>O.region_id===J):_e},[_e,d]),de=_.useMemo(()=>{const J=M?Number(M):null;return J?_e.filter(O=>O.region_id===J):_e},[_e,M]),ke=_.useMemo(()=>{const J=S.trim().toLowerCase();return J?ue.filter(O=>O.full_name.toLowerCase().includes(J)):ue},[ue,S]);return V.isLoading||q.isLoading||Q.isLoading?a.jsx(Ot,{}):V.isError||q.isError||Q.isError?a.jsx(St,{message:"Calisan verileri alinamadi."}):a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"Calisanlar",description:"Calisan kayitlarini bolge ve departman bazli yonetin.",action:a.jsx("button",{type:"button",onClick:()=>z(J=>!J),className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Yeni Calisan"})}),T?a.jsxs(Oe,{children:[a.jsxs("form",{onSubmit:ee,className:"grid gap-3 md:grid-cols-5",children:[a.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Ad Soyad",a.jsx("input",{value:l,onChange:J=>o(J.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Ada Lovelace"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge",a.jsxs("select",{value:d,onChange:J=>{h(J.target.value),x("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Atanmamis"}),ne.map(J=>a.jsx("option",{value:J.id,children:J.name},J.id))]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",a.jsxs("select",{value:f,onChange:J=>x(J.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Atanmamis"}),X.map(J=>a.jsx("option",{value:J.id,children:J.name},J.id))]})]}),a.jsxs("label",{className:"flex items-center gap-2 pt-7 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:v,onChange:J=>b(J.target.checked)}),"Aktif"]}),a.jsxs("div",{className:"flex gap-2 md:col-span-5",children:[a.jsx("button",{type:"submit",disabled:ae.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:ae.isPending?"Kaydediliyor...":"Kaydet"}),a.jsx("button",{type:"button",onClick:()=>{z(!1),G(null)},className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),K?a.jsx("div",{className:"form-validation",children:K}):null]}):null,a.jsxs(Oe,{children:[a.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-5",children:[a.jsx(ts,{value:S,onChange:w,placeholder:"Calisan adina gore ara..."}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge filtresi",a.jsxs("select",{value:M,onChange:J=>{I(J.target.value),D("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Tum bolgeler"}),ne.map(J=>a.jsx("option",{value:J.id,children:J.name},J.id))]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Departman filtresi",a.jsxs("select",{value:R,onChange:J=>D(J.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Tum departmanlar"}),de.map(J=>a.jsx("option",{value:J.id,children:J.name},J.id))]})]}),a.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:k,onChange:J=>A(J.target.checked)}),"Arsivdekileri goster"]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Calisan ID"}),a.jsx("th",{className:"py-2",children:"Ad Soyad"}),a.jsx("th",{className:"py-2",children:"Bolge"}),a.jsx("th",{className:"py-2",children:"Departman"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2",children:"Islem"})]})}),a.jsx("tbody",{children:ke.map(J=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:J.id}),a.jsx("td",{className:"py-2",children:J.full_name}),a.jsx("td",{className:"py-2",children:J.region_name??(J.region_id?B.get(J.region_id):"-")??"-"}),a.jsx("td",{className:"py-2",children:J.department_id?W.get(J.department_id):"-"}),a.jsx("td",{className:"py-2",children:a.jsx(qs,{value:J.is_active?"Aktif":"Pasif"})}),a.jsx("td",{className:"py-2",children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(li,{to:`/employees/${J.id}`,onClick:()=>{sessionStorage.setItem("employee-detail-origin","employees"),sessionStorage.setItem("employee-detail-id",String(J.id))},className:"btn-secondary inline-flex rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"}),a.jsx("button",{type:"button",disabled:ve.isPending,onClick:()=>{const O=!J.is_active;window.confirm(O?`${J.full_name} arsivden cikarilsin mi?`:`${J.full_name} arsivlensin mi?`)&&ve.mutate({employeeId:J.id,nextStatus:O})},className:`inline-flex rounded-lg px-3 py-1 text-xs font-medium text-white ${J.is_active?"btn-danger bg-rose-600 hover:bg-rose-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:J.is_active?"Arsivle":"Arsivden Cikar"})]})})]},J.id))})]})}),ke.length===0?a.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Arama kriterine uygun calisan bulunamadi."}):null]})]})}const hM=ka({employee_id:_n().int().positive(),start_date:In().min(1),end_date:In().min(1),type:zf(["ANNUAL","SICK","UNPAID","EXCUSE","PUBLIC_HOLIDAY"]),status:zf(["APPROVED","PENDING","REJECTED"]).default("APPROVED"),note:In().trim().optional()}).refine(e=>e.end_date>=e.start_date,{message:"Biti tarihi balang tarihinden kk olamaz.",path:["end_date"]});function fM(){const e=Un(),{pushToast:i}=Fn(),[l,o]=_.useState(""),[d,h]=_.useState(""),[f,x]=_.useState(""),[v,b]=_.useState("ANNUAL"),[S,w]=_.useState("APPROVED"),[T,z]=_.useState(""),[k,A]=_.useState(null),[M,I]=_.useState(""),[R,D]=_.useState(String(new Date().getFullYear())),[K,G]=_.useState(String(new Date().getMonth()+1)),V=Be({queryKey:["employees"],queryFn:()=>ui({include_inactive:!0,status:"all"})}),q=_.useMemo(()=>{const W=Number(M),B=Number(R),X=Number(K);return{employee_id:Number.isFinite(W)&&W>0?W:void 0,year:Number.isFinite(B)&&B>0?B:void 0,month:Number.isFinite(X)&&X>0?X:void 0}},[M,R,K]),Q=Be({queryKey:["leaves",q.employee_id??"all",q.year??"all",q.month??"all"],queryFn:()=>Sb(q)}),ae=Xe({mutationFn:FE,onSuccess:W=>{h(""),x(""),b("ANNUAL"),w("APPROVED"),z(""),A(null),i({variant:"success",title:"zin kayd oluturuldu",description:`zin #${W.id} kaydedildi.`}),e.invalidateQueries({queryKey:["leaves"]})},onError:W=>{const B=Le(W,"zin kayd oluturulamad.");A(B.message),i({variant:"error",title:"zin oluturulamad",description:B.message})}}),ve=Xe({mutationFn:ZE,onSuccess:(W,B)=>{i({variant:"success",title:"zin kayd silindi",description:`zin #${B} silindi.`}),e.invalidateQueries({queryKey:["leaves"]})},onError:W=>{const B=Le(W,"zin silinemedi.");i({variant:"error",title:"zin silinemedi",description:B.message})}}),ee=W=>{W.preventDefault(),A(null);const B=hM.safeParse({employee_id:l,start_date:d,end_date:f,type:v,status:S,note:T});if(!B.success){const X=B.error.issues[0]?.message??"zin formunu kontrol edin.";A(X),i({variant:"error",title:"Form hatas",description:X});return}ae.mutate({...B.data,note:B.data.note||null})};if(V.isLoading)return a.jsx(Ot,{});if(V.isError)return a.jsx(St,{message:"alan listesi alnamad."});const ue=V.data??[],_e=Q.data??[],ne=new Map(ue.map(W=>[W.id,W.full_name]));return a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"zin Kaytlar",description:"Yllk izin, rapor ve mazeret kaytlarn ynetin."}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Yeni zin Kayd"}),a.jsxs("form",{onSubmit:ee,className:"mt-4 grid gap-3 md:grid-cols-3",children:[a.jsx(Ka,{label:"alan",employees:ue,value:l,onChange:o,emptyLabel:"Seiniz",helperText:"Ad-soyad veya ID ile arayn."}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Balang Tarihi",a.jsx("input",{type:"date",value:d,onChange:W=>h(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Biti Tarihi",a.jsx("input",{type:"date",value:f,onChange:W=>x(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["zin Tipi",a.jsxs("select",{value:v,onChange:W=>b(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"ANNUAL",children:"YILLIK ZN"}),a.jsx("option",{value:"SICK",children:"RAPOR / HASTALIK"}),a.jsx("option",{value:"UNPAID",children:"CRETSZ ZN"}),a.jsx("option",{value:"EXCUSE",children:"MAZERET ZN"}),a.jsx("option",{value:"PUBLIC_HOLIDAY",children:"RESM TATL"})]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Onay Durumu",a.jsxs("select",{value:S,onChange:W=>w(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"APPROVED",children:"ONAYLI"}),a.jsx("option",{value:"PENDING",children:"BEKLEMEDE"}),a.jsx("option",{value:"REJECTED",children:"REDDEDLD"})]})]}),a.jsxs("label",{className:"text-sm text-slate-700 md:col-span-3",children:["Aklama Notu",a.jsx("textarea",{value:T,onChange:W=>z(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",rows:3})]}),a.jsx("div",{className:"md:col-span-3",children:a.jsx("button",{type:"submit",disabled:ae.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:ae.isPending?"Kaydediliyor...":"zin Kaydn Olutur"})})]}),k?a.jsx("div",{className:"form-validation",children:k}):null]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"zin Listesi Filtreleri"}),a.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-3",children:[a.jsx(Ka,{label:"alan",employees:ue,value:M,onChange:I,emptyLabel:"Tm",helperText:"alana gre filtreleyin."}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Yl",a.jsx("input",{value:R,onChange:W=>D(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",a.jsx("input",{value:K,onChange:W=>G(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]})]}),Q.isLoading?a.jsx(Ot,{}):null,Q.isError?a.jsx(St,{message:"zin listesi alnamad."}):null,!Q.isLoading&&!Q.isError?a.jsxs(Oe,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"zin ID"}),a.jsx("th",{className:"py-2",children:"alan"}),a.jsx("th",{className:"py-2",children:"zin Tipi"}),a.jsx("th",{className:"py-2",children:"Tarih Aral"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2",children:"lem"})]})}),a.jsx("tbody",{children:_e.map(W=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:W.id}),a.jsx("td",{className:"py-2",children:ne.get(W.employee_id)??W.employee_id}),a.jsx("td",{className:"py-2",children:W.type}),a.jsxs("td",{className:"py-2",children:[W.start_date," - ",W.end_date]}),a.jsx("td",{className:"py-2",children:a.jsx(qs,{value:W.status})}),a.jsx("td",{className:"py-2",children:a.jsx("button",{type:"button",onClick:()=>ve.mutate(W.id),className:"btn-danger rounded-lg border border-rose-300 px-3 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50",children:"Sil"})})]},W.id))})]})}),_e.length===0?a.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"zin kayd bulunamad."}):null]}):null]})}const pM=ka({username:In().min(1,"Kullanici adi gerekli."),password:In().min(1,"Sifre gerekli."),mfaCode:In().optional(),mfaRecoveryCode:In().optional()});function gM(e){return e.code==="INVALID_CREDENTIALS"?"Giris bilgileri hatali":e.code==="MFA_REQUIRED"?"MFA kodu gerekli":e.code==="INVALID_MFA_CODE"?"MFA kodu gecersiz":e.code==="MFA_SETUP_REQUIRED"?"MFA kurulumu gerekli":e.code==="TOO_MANY_ATTEMPTS"?"Cok fazla deneme":e.code==="INTERNAL_ERROR"?"Sunucu hatasi":"Giris basarisiz"}function xM(){const e=Il(),i=Ga(),{login:l}=Ul(),[o,d]=_.useState("admin"),[h,f]=_.useState(""),[x,v]=_.useState(""),[b,S]=_.useState(""),[w,T]=_.useState(null),[z,k]=_.useState(!1),A=_.useMemo(()=>{const I=i.state?.from,R=new URLSearchParams(i.search).get("redirect");return I??R??"/dashboard"},[i.search,i.state]),M=async I=>{I.preventDefault(),T(null);const R=pM.safeParse({username:o,password:h,mfaCode:x,mfaRecoveryCode:b});if(!R.success){T({message:R.error.issues[0]?.message??"Form alanlarini kontrol et."});return}k(!0);try{await l(R.data.username,R.data.password,R.data.mfaCode,R.data.mfaRecoveryCode),e(A,{replace:!0})}catch(D){T(Le(D,"Giris basarisiz."))}finally{k(!1)}};return a.jsx("div",{className:"admin-auth-screen flex min-h-screen items-center justify-center px-4",children:a.jsxs("div",{className:"admin-auth-card w-full max-w-md rounded-2xl border border-slate-200 bg-white p-8 shadow-panel",children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Admin Giris"}),a.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Puantaj yonetim paneline giris yap."}),a.jsxs("form",{onSubmit:M,className:"mt-6 space-y-4",children:[a.jsxs("label",{className:"block",children:[a.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Kullanici Adi"}),a.jsx("input",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:o,onChange:I=>d(I.target.value)})]}),a.jsxs("label",{className:"block",children:[a.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Sifre"}),a.jsx("input",{type:"password",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:h,onChange:I=>f(I.target.value)})]}),a.jsxs("label",{className:"block",children:[a.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"MFA Kodu (gerekliyse)"}),a.jsx("input",{inputMode:"numeric",pattern:"[0-9]*",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:x,onChange:I=>v(I.target.value),placeholder:"6 haneli kod"})]}),a.jsxs("label",{className:"block",children:[a.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Recovery Kodu (MFA yoksa)"}),a.jsx("input",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:b,onChange:I=>S(I.target.value),placeholder:"Ornek: ABCDE-FGHIJ"})]}),w?a.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[a.jsx("p",{className:"font-semibold",children:gM(w)}),a.jsx("p",{className:"mt-1",children:w.message}),w.requestId?a.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",w.requestId]}):null]}):null,a.jsx("button",{type:"submit",disabled:z,className:"btn-animated w-full rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:z?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Giris yapiliyor..."]}):"Giris Yap"})]}),a.jsxs("p",{className:"admin-auth-signature mt-5 text-center text-xs tracking-wide text-slate-500",children:[qa.signatureText," | BUILD: ",qa.buildVersion]})]})})}const yM=[{to:"/employees",label:"alan Ynetimi",description:"Personel kart, ariv ve profil ynetimi.",code:"CMD-EMP"},{to:"/attendance-events",label:"Puantaj Kaytlar",description:"Giri-k olaylar ve manuel dzeltme.",code:"CMD-ATT"},{to:"/devices",label:"Cihaz Kontrol",description:"Cihaz aktivasyonu ve eriim denetimi.",code:"CMD-DEV"},{to:"/notifications",label:"Bildirim Merkezi",description:"Toplu/tekli push ve teslimat loglar.",code:"CMD-NOT"},{to:"/reports/employee-monthly",label:"Aylk alan Raporu",description:"alma ve fazla mesai analizi.",code:"CMD-RPT"},{to:"/audit-logs",label:"Sistem Loglar",description:"z kayd ve gvenlik denetimi.",code:"CMD-AUD"}];function Kc(e){return e?new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"short"}).format(new Date(e)):"-"}function vM(e){const i=new Date(e);return Number.isNaN(i.getTime())?"":i.toLocaleDateString("sv-SE",{timeZone:"Europe/Istanbul"})}function bM(e){const i=new Date(`${e}T00:00:00Z`);return Number.isNaN(i.getTime())?"Hafta i":i.getUTCDay()===0?"Pazar":"Hafta i"}function _M(e){return e==="NOT_STARTED"?"Balamad":e==="IN_PROGRESS"?"Mesai Devam Ediyor":"Mesai Tamamland"}function NM(){const{pushToast:e}=Fn(),i=new Date,[l,o]=_.useState("Ynetim Konsolu Bildirimi"),[d,h]=_.useState(""),[f,x]=_.useState(""),[v,b]=_.useState("bulk"),[S,w]=_.useState(""),[T,z]=_.useState([]),[k,A]=_.useState(""),[M,I]=_.useState(String(i.getFullYear())),[R,D]=_.useState(String(i.getMonth()+1)),K=Be({queryKey:["employees","management-console"],queryFn:()=>ui({status:"all",include_inactive:!0}),refetchInterval:3e4}),G=Be({queryKey:["devices","management-console"],queryFn:Nb,refetchInterval:3e4}),V=Be({queryKey:["attendance-events","management-console"],queryFn:()=>ep({limit:20}),refetchInterval:2e4}),q=Be({queryKey:["employee-device-overview","management-console"],queryFn:()=>Ef({limit:12,device_limit:2,include_inactive:!1}),refetchInterval:2e4}),Q=Be({queryKey:["dashboard-employee-snapshot","management-console",k],queryFn:()=>jb({employee_id:Number(k)}),enabled:!!k,staleTime:15e3}),ae=Number(M),ve=Number(R),ee=Number.isInteger(ae)&&Number.isInteger(ve)&&ve>=1&&ve<=12,ue=Be({queryKey:["management-console-control-monthly",k,ae,ve],queryFn:()=>tu({employee_id:Number(k),year:ae,month:ve}),enabled:!!k&&ee,staleTime:15e3}),_e=Xe({mutationFn:_b,onSuccess:Ne=>{e({variant:"success",title:"Bildirim gnderildi",description:`Hedef: ${Ne.total_targets} / Gnderilen: ${Ne.sent}`}),h(""),v==="single"&&(z([]),w(""))},onError:Ne=>{const tt=Le(Ne,"Bildirim gnderimi baarsz.");e({variant:"error",title:"Gnderim baarsz",description:tt.message})}}),ne=K.data??[],W=G.data??[],B=V.data??[],X=q.data??[],de=ue.data?.days??[],ke=_.useMemo(()=>tp(de),[de]),J=_.useMemo(()=>new Map(ne.map(Ne=>[Ne.id,Ne])),[ne]),O=_.useMemo(()=>ne.filter(Ne=>Ne.is_active).length,[ne]),te=_.useMemo(()=>W.filter(Ne=>Ne.is_active).length,[W]),P=_.useMemo(()=>B.filter(Ne=>Ne.location_status==="VERIFIED_HOME").length,[B]),Z=_.useMemo(()=>ne.find(Ne=>String(Ne.id)===S)??null,[ne,S]),me=_.useMemo(()=>new Map(de.map(Ne=>[Ne.date,Ne])),[de]),Se=Number(k),Me=_.useMemo(()=>B.slice(0,14).map(Ne=>{const tt=vM(Ne.ts_utc),bt=Ne.employee_id===Se&&tt?me.get(tt):void 0;return{event:Ne,dayTypeLabel:bt?_d(bt).label:bM(tt),workedMinutes:bt?.worked_minutes??null,planOvertimeMinutes:bt?.plan_overtime_minutes??null,legalOvertimeMinutes:bt?.legal_overtime_minutes??null}}),[B,Se,me]),Ze=()=>{const Ne=Number(S);if(!Number.isInteger(Ne)||Ne<=0){e({variant:"error",title:"Hedef eklenemedi",description:"nce alan sein."});return}if(T.includes(Ne)){e({variant:"info",title:"Hedef zaten eklendi",description:`#${Ne} listede var.`});return}z(tt=>[...tt,Ne]),w("")},Ve=Ne=>{z(tt=>tt.filter(bt=>bt!==Ne))},qe=Ne=>{if(Ne.preventDefault(),!l.trim()||!d.trim()||!f.trim()){e({variant:"error",title:"Eksik alan",description:"Balk, mesaj ve ynetici ifresi zorunludur."});return}if(v==="single"&&T.length===0){e({variant:"error",title:"Hedef seilmedi",description:"Tekli bildirim iin en az bir alan sein."});return}_e.mutate({title:l.trim(),message:d.trim(),password:f.trim(),target:"employees",employee_ids:v==="single"?T:void 0})};return K.isLoading||G.isLoading||V.isLoading||q.isLoading?a.jsx(Ot,{label:"Ynetim konsolu ykleniyor..."}):K.isError||G.isError||V.isError||q.isError?a.jsx(St,{message:"Ynetim konsolu verileri alnamad."}):a.jsxs("div",{className:"management-console-screen space-y-4",children:[a.jsx(kn,{title:"Ynetim Konsolu",description:"Tek merkezden bildirim, puantaj, konum ve cihaz operasyonlarn disiplinli akla ynetin."}),a.jsxs("div",{className:"management-console-kpi-grid",children:[a.jsxs(Oe,{className:"management-console-kpi-card",children:[a.jsx("p",{className:"management-console-kpi-label",children:"Toplam alan"}),a.jsx("p",{className:"management-console-kpi-value",children:ne.length}),a.jsxs("p",{className:"management-console-kpi-meta",children:["Aktif: ",O]})]}),a.jsxs(Oe,{className:"management-console-kpi-card",children:[a.jsx("p",{className:"management-console-kpi-label",children:"Toplam Cihaz"}),a.jsx("p",{className:"management-console-kpi-value",children:W.length}),a.jsxs("p",{className:"management-console-kpi-meta",children:["Aktif: ",te]})]}),a.jsxs(Oe,{className:"management-console-kpi-card",children:[a.jsx("p",{className:"management-console-kpi-label",children:"Canl Olay Ak"}),a.jsx("p",{className:"management-console-kpi-value",children:B.length}),a.jsxs("p",{className:"management-console-kpi-meta",children:["Dorulanm konum: ",P]})]}),a.jsxs(Oe,{className:"management-console-kpi-card",children:[a.jsx("p",{className:"management-console-kpi-label",children:"Cihaz Grnm Satr"}),a.jsx("p",{className:"management-console-kpi-value",children:X.length}),a.jsxs("p",{className:"management-console-kpi-meta",children:["Son yenileme: ",Kc(new Date().toISOString())]})]})]}),a.jsxs(Oe,{className:"management-console-panel",children:[a.jsx("h4",{className:"management-console-title",children:"Komut Merkezi"}),a.jsx("p",{className:"management-console-subtitle",children:"Dank ekranlar arasnda dolamak yerine kritik ynetim modllerine tek panelden eriin."}),a.jsx("div",{className:"management-console-command-grid",children:yM.map(Ne=>a.jsxs(li,{to:Ne.to,className:"management-console-command-card",children:[a.jsx("span",{className:"management-console-command-code",children:Ne.code}),a.jsx("p",{className:"management-console-command-label",children:Ne.label}),a.jsx("p",{className:"management-console-command-desc",children:Ne.description})]},Ne.to))})]}),a.jsxs("div",{className:"grid gap-4 xl:grid-cols-[1.06fr_1.35fr]",children:[a.jsxs(Oe,{className:"management-console-panel",children:[a.jsx("h4",{className:"management-console-title",children:"Bildirim Terminali"}),a.jsx("p",{className:"management-console-subtitle",children:"Toplu veya tekli bildirim gnderimini ayn terminalden yrtn."}),a.jsxs("form",{className:"management-console-terminal mt-3 space-y-3",onSubmit:qe,children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("label",{className:"text-sm",children:[a.jsx("span",{className:"management-console-field-label",children:"Gnderim Modu"}),a.jsxs("select",{value:v,onChange:Ne=>b(Ne.target.value),className:"management-console-input mt-1",children:[a.jsx("option",{value:"bulk",children:"Toplu (Tm alanlar)"}),a.jsx("option",{value:"single",children:"Tekli (Seili alanlar)"})]})]}),a.jsxs("label",{className:"text-sm",children:[a.jsx("span",{className:"management-console-field-label",children:"Ynetici ifresi"}),a.jsx("input",{type:"password",value:f,onChange:Ne=>x(Ne.target.value),className:"management-console-input mt-1",placeholder:"ifre"})]})]}),a.jsxs("label",{className:"text-sm",children:[a.jsx("span",{className:"management-console-field-label",children:"Balk"}),a.jsx("input",{value:l,onChange:Ne=>o(Ne.target.value),className:"management-console-input mt-1",placeholder:"Bildirim bal"})]}),a.jsxs("label",{className:"text-sm",children:[a.jsx("span",{className:"management-console-field-label",children:"Mesaj"}),a.jsx("textarea",{rows:4,value:d,onChange:Ne=>h(Ne.target.value),className:"management-console-input mt-1",placeholder:"Mesaj ierii"})]}),v==="single"?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ka,{label:"Hedef alan",employees:ne,value:S,onChange:w,helperText:"alan seip listeye ekleyin."}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("button",{type:"button",onClick:Ze,className:"management-console-action-button",children:"Hedefe Ekle"}),Z?a.jsxs("span",{className:"management-console-inline-note",children:["Seili: #",Z.id," - ",Z.full_name]}):null]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:T.length===0?a.jsx("span",{className:"management-console-inline-note",children:"Henz hedef alan eklenmedi."}):T.map(Ne=>a.jsxs("button",{type:"button",onClick:()=>Ve(Ne),className:"management-console-chip",children:["#",Ne," - ",J.get(Ne)?.full_name??"alan"," "]},Ne))})]}):a.jsx("p",{className:"management-console-inline-note",children:"Toplu mod: Aktif/Pasif ayrm olmadan tm alanlara gnderilir."}),a.jsx("button",{type:"submit",disabled:_e.isPending,className:"management-console-send-button",children:_e.isPending?"Gnderiliyor...":"Bildirimi Gnder"})]})]}),a.jsxs(Oe,{className:"management-console-panel",children:[a.jsx("h4",{className:"management-console-title",children:"alan Kontrol Odas"}),a.jsx("p",{className:"management-console-subtitle",children:"Tek alan iin puantaj, konum ve cihaz metriklerini anlk izleyin."}),a.jsxs("div",{className:"management-console-terminal mt-3 space-y-3",children:[a.jsx(Ka,{label:"Kontrol edilecek alan",employees:ne,value:k,onChange:A,helperText:"Seildiinde puantaj ve konum panelleri otomatik gncellenir."}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("label",{className:"text-sm",children:[a.jsx("span",{className:"management-console-field-label",children:"Yl"}),a.jsx("input",{type:"number",value:M,onChange:Ne=>I(Ne.target.value),className:"management-console-input mt-1"})]}),a.jsxs("label",{className:"text-sm",children:[a.jsx("span",{className:"management-console-field-label",children:"Ay"}),a.jsx("input",{type:"number",min:1,max:12,value:R,onChange:Ne=>D(Ne.target.value),className:"management-console-input mt-1"})]})]}),k?null:a.jsx("p",{className:"management-console-inline-note",children:"alan seildiinde canl zet burada grnr."}),k&&!ee?a.jsx("p",{className:"management-console-inline-note",children:"Yl/ay deeri geersiz."}):null,k&&Q.isLoading?a.jsx(Ot,{label:"Canl zet ykleniyor..."}):null,k&&Q.isError?a.jsx(St,{message:"alan zeti alnamad."}):null,Q.data?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"management-console-strip",children:[a.jsx("span",{className:"management-console-strip-tag",children:"Durum"}),a.jsx("span",{children:_M(Q.data.today_status)})]}),a.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[a.jsxs("div",{className:"management-console-block",children:[a.jsx("p",{className:"management-console-block-title",children:"Bu Ay"}),a.jsxs("p",{children:["Net alma: ",a.jsx(Pe,{minutes:Q.data.current_month.worked_minutes})]}),a.jsxs("p",{children:["Plan Ustu Sure: ",a.jsx(Pe,{minutes:Q.data.current_month.plan_overtime_minutes})]}),a.jsxs("p",{children:["Yasal Fazla Sure: ",a.jsx(Pe,{minutes:Q.data.current_month.extra_work_minutes})]}),a.jsxs("p",{children:["Yasal Fazla Mesai: ",a.jsx(Pe,{minutes:Q.data.current_month.overtime_minutes})]})]}),a.jsxs("div",{className:"management-console-block",children:[a.jsx("p",{className:"management-console-block-title",children:"nceki Ay"}),a.jsxs("p",{children:["Net alma: ",a.jsx(Pe,{minutes:Q.data.previous_month.worked_minutes})]}),a.jsxs("p",{children:["Plan Ustu Sure: ",a.jsx(Pe,{minutes:Q.data.previous_month.plan_overtime_minutes})]}),a.jsxs("p",{children:["Yasal Fazla Sure: ",a.jsx(Pe,{minutes:Q.data.previous_month.extra_work_minutes})]}),a.jsxs("p",{children:["Yasal Fazla Mesai: ",a.jsx(Pe,{minutes:Q.data.previous_month.overtime_minutes})]})]})]}),ue.isLoading?a.jsx(Ot,{label:"Aylk puantaj ykleniyor..."}):null,ue.isError?a.jsx(St,{message:"Aylk puantaj alnamad."}):null,ue.data?a.jsxs("div",{className:"grid gap-2 sm:grid-cols-3",children:[a.jsxs("div",{className:"management-console-block",children:[a.jsx("p",{className:"management-console-block-title",children:"allan Gn"}),a.jsxs("p",{children:[ke.workedDayCount," gn"]}),a.jsxs("p",{children:["Hafta i: ",ke.weekdayWorkedDayCount]})]}),a.jsxs("div",{className:"management-console-block",children:[a.jsx("p",{className:"management-console-block-title",children:"Pazar Mesaisi"}),a.jsxs("p",{children:[ke.sundayWorkedDayCount," gn"]}),a.jsx("p",{children:a.jsx(Pe,{minutes:ke.sundayWorkedMinutes})})]}),a.jsxs("div",{className:"management-console-block",children:[a.jsx("p",{className:"management-console-block-title",children:"zel Gn Mesaisi"}),a.jsxs("p",{children:[ke.specialWorkedDayCount," gn"]}),a.jsx("p",{children:a.jsx(Pe,{minutes:ke.specialWorkedMinutes})})]})]}):null,a.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[a.jsxs("div",{className:"management-console-block",children:[a.jsx("p",{className:"management-console-block-title",children:"Son Puantaj"}),Q.data.last_event?a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:["Tip: ",Q.data.last_event.event_type]}),a.jsxs("p",{children:["Zaman: ",Kc(Q.data.last_event.ts_utc)]}),a.jsxs("p",{children:["Konum Durumu: ",Q.data.last_event.location_status]})]}):a.jsx("p",{children:"Kayt bulunmuyor."})]}),a.jsxs("div",{className:"management-console-block",children:[a.jsx("p",{className:"management-console-block-title",children:"Son Konum"}),Q.data.latest_location?a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:["Koordinat: ",Q.data.latest_location.lat.toFixed(6),", ",Q.data.latest_location.lon.toFixed(6)]}),a.jsxs("p",{children:["Doruluk: ",Q.data.latest_location.accuracy_m??"-"," m"]}),a.jsxs("p",{children:["Zaman: ",Kc(Q.data.latest_location.ts_utc)]})]}):a.jsx("p",{children:"Konum verisi yok."})]})]}),a.jsxs("div",{className:"management-console-strip",children:[a.jsx("span",{className:"management-console-strip-tag",children:"Cihaz"}),a.jsxs("span",{children:["Aktif ",Q.data.active_devices," / Toplam ",Q.data.total_devices]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(li,{to:`/employees/${Q.data.employee.id}`,className:"management-console-action-button",children:"alan Detayn A"}),a.jsx(li,{to:"/attendance-events",className:"management-console-action-button",children:"Puantaj Olaylarna Git"}),a.jsx(li,{to:"/devices",className:"management-console-action-button",children:"Cihaz Paneline Git"})]})]}):null]})]})]}),a.jsxs("div",{className:"grid gap-4 xl:grid-cols-2",children:[a.jsxs(Oe,{className:"management-console-panel",children:[a.jsx("h4",{className:"management-console-title",children:"Cihaz Eriim Ak"}),a.jsx("p",{className:"management-console-subtitle",children:"alan baznda cihaz younluu ve aktif cihaz oran."}),a.jsx("div",{className:"management-console-table-wrap mt-3",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"alan"}),a.jsx("th",{children:"Departman"}),a.jsx("th",{children:"Aktif/Toplam"}),a.jsx("th",{children:"lem"})]})}),a.jsx("tbody",{children:X.slice(0,10).map(Ne=>a.jsxs("tr",{children:[a.jsxs("td",{className:"py-2",children:["#",Ne.employee_id," - ",Ne.employee_name]}),a.jsx("td",{children:Ne.department_name??"-"}),a.jsxs("td",{children:[Ne.active_devices,"/",Ne.total_devices]}),a.jsx("td",{children:a.jsx(li,{className:"management-console-link",to:`/employees/${Ne.employee_id}`,children:"Detay"})})]},Ne.employee_id))})]})})]}),a.jsxs(Oe,{className:"management-console-panel",children:[a.jsx("h4",{className:"management-console-title",children:"Canl Puantaj Kayd"}),a.jsx("p",{className:"management-console-subtitle",children:"Son giri-k olaylar ile gn tipi, gnlk alma, plan st sre ve yasal fazla mesai grnm."}),a.jsx("div",{className:"management-console-table-wrap mt-3",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Zaman"}),a.jsx("th",{children:"alan"}),a.jsx("th",{children:"Gn Tipi"}),a.jsx("th",{children:"Tip"}),a.jsx("th",{children:"Konum"}),a.jsx("th",{children:"Gnlk alma"}),a.jsx("th",{children:"Plan st"}),a.jsx("th",{children:"Yasal FM"})]})}),a.jsx("tbody",{children:Me.map(Ne=>a.jsxs("tr",{children:[a.jsx("td",{className:"py-2",children:Kc(Ne.event.ts_utc)}),a.jsxs("td",{children:["#",Ne.event.employee_id," - ",J.get(Ne.event.employee_id)?.full_name??"alan"]}),a.jsx("td",{children:Ne.dayTypeLabel}),a.jsx("td",{children:Ne.event.type}),a.jsx("td",{children:Ne.event.location_status}),a.jsx("td",{children:Ne.workedMinutes===null?"-":a.jsx(Pe,{minutes:Ne.workedMinutes})}),a.jsx("td",{children:Ne.planOvertimeMinutes===null?"-":a.jsx(Pe,{minutes:Ne.planOvertimeMinutes})}),a.jsx("td",{children:Ne.legalOvertimeMinutes===null?"-":a.jsx(Pe,{minutes:Ne.legalOvertimeMinutes})})]},Ne.event.id))})]})})]})]})]})}function jM(){return a.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",children:a.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm",children:[a.jsx("p",{className:"text-4xl font-bold text-slate-900",children:"404"}),a.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Sayfa bulunamadi."}),a.jsx(li,{to:"/dashboard",className:"mt-5 inline-block rounded-lg bg-brand-600 px-4 py-2 text-sm text-white hover:bg-brand-700",children:"Dashboard'a dn"}),a.jsx("p",{className:"mt-5 text-center text-xs tracking-wide text-slate-500",children:qa.signatureText})]})})}function ov(e,i){const l=URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=i,document.body.appendChild(o),o.click(),o.remove(),URL.revokeObjectURL(l)}function SM(){const{pushToast:e}=Fn(),i=new Date,[l,o]=_.useState("employee"),[d,h]=_.useState(""),[f,x]=_.useState(""),[v,b]=_.useState(String(i.getFullYear())),[S,w]=_.useState(String(i.getMonth()+1)),[T,z]=_.useState(""),[k,A]=_.useState(""),[M,I]=_.useState(!0),[R,D]=_.useState(!1),[K,G]=_.useState(""),[V,q]=_.useState(""),[Q,ae]=_.useState("consolidated"),[ve,ee]=_.useState(""),[ue,_e]=_.useState(""),ne=Be({queryKey:["employees","all"],queryFn:()=>ui({status:"all",include_inactive:!0})}),W=Be({queryKey:["departments"],queryFn:Hs}),B=Xe({mutationFn:YE,onSuccess:Z=>{ov(Z,`puantaj-${l}-${Date.now()}.xlsx`),e({variant:"success",title:"Excel indirildi",description:"Puantaj Excel dosyas baaryla indirildi."})},onError:Z=>{e({variant:"error",title:"Da aktarma baarsz",description:Le(Z,"Excel dosyas retilemedi.").message})}}),X=Xe({mutationFn:WE,onSuccess:Z=>{ov(Z,`puantaj-range-${Q}-${Date.now()}.xlsx`),e({variant:"success",title:"Aralkl Excel indirildi",description:"Tarih aral da aktarma dosyas indirildi."})},onError:Z=>{e({variant:"error",title:"Tarih aral da aktarma baarsz",description:Le(Z,"Excel dosyas retilemedi.").message})}}),de=_.useMemo(()=>{const Z=Number(v),me=Number(S),Se=Number(d),Me=Number(f);return l==="employee"?!Se||!Z||!me?null:{mode:l,employee_id:Se,year:Z,month:me}:l==="department"?!Me||!Z||!me?null:{mode:l,department_id:Me,year:Z,month:me,include_daily_sheet:M,include_inactive:R}:l==="all"?!Z||!me?null:{mode:l,year:Z,month:me,include_daily_sheet:M,include_inactive:R}:!T||!k?null:{mode:l,start_date:T,end_date:k,employee_id:Se||void 0,department_id:Me||void 0,include_inactive:R}},[l,d,f,v,S,T,k,M,R]),ke=_.useMemo(()=>{const Z=Number(ue),me=Number(ve);return!K||!V?null:{start_date:K,end_date:V,mode:Q,employee_id:Z>0?Z:void 0,department_id:me>0?me:void 0}},[K,V,Q,ue,ve]),J=()=>{if(!de){e({variant:"error",title:"Eksik filtre",description:"Setiiniz da aktarma tipine gre gerekli alanlar doldurun."});return}B.mutate(de)},O=()=>{if(!ke){e({variant:"error",title:"Eksik tarih aral filtresi",description:"Balang, biti ve gerekli filtreleri doldurun."});return}X.mutate(ke)};if(ne.isLoading||W.isLoading)return a.jsx(Ot,{});if(ne.isError||W.isError)return a.jsx(St,{message:"alan/departman bilgileri alnamad."});const te=ne.data??[],P=W.data??[];return a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"Puantaj Excel Da Aktar",description:"Mevcut endpoint veya tarih aral endpointi ile Excel da aktarm yapn."}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Mevcut Export Endpointi"}),a.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Da aktarma tipi",a.jsxs("select",{value:l,onChange:Z=>o(Z.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"employee",children:"alan Bazl"}),a.jsx("option",{value:"department",children:"Departman Bazl"}),a.jsx("option",{value:"all",children:"Tm alanlar (Aylk)"}),a.jsx("option",{value:"date_range",children:"Tarih Aral (Mevcut)"})]})]}),(l==="employee"||l==="date_range")&&a.jsx(Ka,{label:"alan",employees:te,value:d,onChange:h,emptyLabel:"Seiniz",helperText:"Ad-soyad veya ID ile arayn."}),(l==="department"||l==="date_range")&&a.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",a.jsxs("select",{value:f,onChange:Z=>x(Z.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Seiniz"}),P.map(Z=>a.jsxs("option",{value:Z.id,children:["#",Z.id," - ",Z.name]},Z.id))]})]}),(l==="employee"||l==="department"||l==="all")&&a.jsxs(a.Fragment,{children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Yl",a.jsx("input",{type:"number",value:v,onChange:Z=>b(Z.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",a.jsx("input",{type:"number",value:S,onChange:Z=>w(Z.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),l==="date_range"&&a.jsxs(a.Fragment,{children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Balang Tarihi",a.jsx("input",{type:"date",value:T,onChange:Z=>z(Z.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Biti Tarihi",a.jsx("input",{type:"date",value:k,onChange:Z=>A(Z.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]})]}),(l==="department"||l==="all")&&a.jsxs("label",{className:"mt-3 inline-flex items-center gap-2 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:M,onChange:Z=>I(Z.target.checked)}),"Gnlk sheetleri de ekle"]}),a.jsxs("label",{className:"mt-3 inline-flex items-center gap-2 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:R,onChange:Z=>D(Z.target.checked)}),"Arivdeki alanlar dahil et"]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{type:"button",onClick:J,disabled:B.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:B.isPending?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Hazrlanyor..."]}):"Excel ndir"})})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Tarih Aral (Yeni Endpoint)"}),a.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Endpoint: ",a.jsx("code",{children:"/api/admin/export/puantaj-range.xlsx"})]}),a.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Balang Tarihi",a.jsx("input",{type:"date",value:K,onChange:Z=>G(Z.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Biti Tarihi",a.jsx("input",{type:"date",value:V,onChange:Z=>q(Z.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Sheet modu",a.jsxs("select",{value:Q,onChange:Z=>ae(Z.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"consolidated",children:"Tek Konsolide Sheet"}),a.jsx("option",{value:"employee_sheets",children:"alan Bazl Sheet"}),a.jsx("option",{value:"department_sheets",children:"Departman Bazl Sheet"})]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Departman (opsiyonel)",a.jsxs("select",{value:ve,onChange:Z=>ee(Z.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Tm"}),P.map(Z=>a.jsxs("option",{value:Z.id,children:["#",Z.id," - ",Z.name]},Z.id))]})]}),a.jsx(Ka,{label:"alan (opsiyonel)",employees:te,value:ue,onChange:_e,emptyLabel:"Tm",helperText:"stee bal alan filtresi.",className:"md:col-span-2"})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{type:"button",onClick:O,disabled:X.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:X.isPending?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Hazrlanyor..."]}):"Tarih Aral Excel ndir"})})]})]})}const wM=[41.0082,28.9784];function Us(e){return e.toFixed(6)}function EM({lat:e,lon:i,radiusM:l,onSelect:o}){const d=_.useRef(null),h=_.useRef(null),f=_.useRef(null),x=_.useRef(null),[v,b]=_.useState(!1),[S,w]=_.useState(""),[T,z]=_.useState(!1),[k,A]=_.useState(null),[M,I]=_.useState(null),R=_.useMemo(()=>e!==null&&i!==null?[e,i]:wM,[e,i]);_.useEffect(()=>{if(!(!d.current||h.current)){try{const G=Wi.map(d.current,{center:R,zoom:e!==null&&i!==null?17:12,zoomControl:!0});h.current=G,Wi.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap katkida bulunanlar"}).addTo(G);const V=Wi.circleMarker(R,{radius:8,color:"#0f6a8c",fillColor:"#0f6a8c",fillOpacity:.85,weight:2}).addTo(G);f.current=V;const q=Wi.circle(R,{radius:Number.isFinite(l)&&l>0?l:75,color:"#0f6a8c",fillColor:"#0f6a8c",fillOpacity:.14,weight:2}).addTo(G);x.current=q,G.on("click",Q=>{const ae=Q.latlng.lat,ve=Q.latlng.lng;o(ae,ve),I(`Haritadan secildi: ${Us(ae)}, ${Us(ve)}`)}),b(!0),A(null)}catch{A("Harita yuklenemedi. Lutfen tekrar deneyin."),b(!1)}return()=>{h.current&&(h.current.remove(),h.current=null),f.current=null,x.current=null,b(!1)}}},[R,e,i,o,l]),_.useEffect(()=>{if(!h.current||!f.current||!x.current)return;const G=h.current,V=f.current,q=x.current;if(e!==null&&i!==null){const ae=[e,i];V.setLatLng(ae),q.setLatLng(ae),G.panTo(ae,{animate:!0})}const Q=Number.isFinite(l)&&l>0?l:75;q.setRadius(Q)},[e,i,l]);const D=_.useCallback(async()=>{if(!v||!h.current)return;const G=S.trim();if(!G){I("Lutfen adres veya lokasyon adi girin.");return}z(!0);try{const V=new URL("https://nominatim.openstreetmap.org/search");V.searchParams.set("q",G),V.searchParams.set("format","json"),V.searchParams.set("limit","1"),V.searchParams.set("addressdetails","1"),V.searchParams.set("accept-language","tr");const q=await fetch(V.toString(),{headers:{Accept:"application/json"}});if(!q.ok)throw new Error("search_failed");const Q=await q.json();if(!Array.isArray(Q)||Q.length===0){I("Adres bulunamadi. Daha net bir sorgu deneyin.");return}const ae=Q[0],ve=Number(ae.lat),ee=Number(ae.lon);if(!Number.isFinite(ve)||!Number.isFinite(ee)){I("Adres koordinata cevrilemedi.");return}o(ve,ee),h.current.setView([ve,ee],17,{animate:!0}),I(`Adres bulundu: ${Us(ve)}, ${Us(ee)}${ae.display_name?` (${ae.display_name})`:""}`)}catch{I("Adres aramasi gecici olarak kullanilamiyor. Lutfen tekrar deneyin.")}finally{z(!1)}},[v,o,S]),K=_.useCallback(()=>{if(!navigator.geolocation){I("Tarayiciniz konum API destegi vermiyor.");return}navigator.geolocation.getCurrentPosition(G=>{const V=G.coords.latitude,q=G.coords.longitude;o(V,q),I(`Mevcut konum alindi: ${Us(V)}, ${Us(q)}`)},()=>{I("Konum alinamadi. Konum iznini kontrol edin.")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[o]);return a.jsxs("div",{className:"rounded-lg border border-brand-200 bg-brand-50/40 p-3",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-700",children:"Harita Nokta Secici (Ucretsiz)"}),a.jsx("p",{className:"mt-1 text-xs text-slate-600",children:"OpenStreetMap uzerinden haritaya tiklayarak veya adres arayarak lat/lon alanlarini otomatik doldurabilirsiniz."}),k?a.jsx("div",{className:"mt-3 rounded-md border border-rose-300 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:k}):a.jsx("div",{className:"mt-3 rounded-md border border-emerald-300 bg-emerald-50 px-3 py-2 text-xs text-emerald-800",children:"API key gerektirmez. OpenStreetMap/Nominatim kullanilir."}),a.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-[1fr_auto_auto]",children:[a.jsx("input",{value:S,onChange:G=>w(G.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Adres / isyeri / bolge adi ara",disabled:!v}),a.jsx("button",{type:"button",onClick:()=>{D()},disabled:!v||T,className:"rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-white disabled:opacity-60",children:T?"Araniyor...":"Ara"}),a.jsx("button",{type:"button",onClick:K,disabled:!v,className:"rounded-lg border border-brand-300 px-3 py-2 text-sm font-semibold text-brand-700 hover:bg-brand-50 disabled:opacity-60",children:"Konumum"})]}),a.jsx("div",{ref:d,className:"mt-3 h-64 w-full rounded-lg border border-slate-300 bg-slate-100","aria-label":"OpenStreetMap qr point picker"}),a.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-xs text-slate-600",children:[a.jsxs("span",{className:"rounded-md bg-white px-2 py-1",children:["Lat: ",e!==null?Us(e):"-"]}),a.jsxs("span",{className:"rounded-md bg-white px-2 py-1",children:["Lon: ",i!==null?Us(i):"-"]}),a.jsxs("span",{className:"rounded-md bg-white px-2 py-1",children:["Radius: ",l,"m"]})]}),M?a.jsx("p",{className:"mt-2 rounded-md border border-slate-200 bg-white px-2 py-1 text-xs text-slate-600",children:M}):null]})}const Qc={name:"",codeValue:"",codeType:"BOTH",isActive:!0},Gc={name:"",lat:"",lon:"",radiusM:"75",isActive:!0},kM={regionCode:"IST",locationCode:"MERKEZ",serialNo:"1"};function uv(e){return e==="CHECKIN"?"CHECKIN (Giris)":e==="CHECKOUT"?"CHECKOUT (Cikis)":"BOTH (Duruma gore)"}function cv(e,i){return e.trim().toUpperCase().replace(/[^A-Z0-9]+/g,"-").replace(/^-+|-+$/g,"")||i}function CM(e){return e==="CHECKIN"?"IN":e==="CHECKOUT"?"OUT":"BOTH"}function TM(){const e=Un(),{pushToast:i}=Fn(),[l,o]=_.useState(null),[d,h]=_.useState(null),[f,x]=_.useState(null),[v,b]=_.useState(""),[S,w]=_.useState(""),[T,z]=_.useState(""),[k,A]=_.useState(Qc),[M,I]=_.useState(kM),[R,D]=_.useState(Gc),[K,G]=_.useState([]),[V,q]=_.useState(null),Q=Be({queryKey:["qr-codes"],queryFn:()=>oE()}),ae=Be({queryKey:["qr-points"],queryFn:()=>hE()}),ve=Xe({mutationFn:uE,onSuccess:se=>{i({variant:"success",title:"QR kod olusturuldu",description:`Kod ID: ${se.id}`}),A(Qc),o(se.id),e.invalidateQueries({queryKey:["qr-codes"]})},onError:se=>{i({variant:"error",title:"QR kod olusturulamadi",description:Le(se,"Islem basarisiz.").message})}}),ee=Xe({mutationFn:({codeId:se,payload:Ae})=>cE(se,Ae),onSuccess:se=>{i({variant:"success",title:"QR kod guncellendi",description:`Kod ID: ${se.id}`}),h(null),A(Qc),e.invalidateQueries({queryKey:["qr-codes"]})},onError:se=>{i({variant:"error",title:"QR kod guncellenemedi",description:Le(se,"Islem basarisiz.").message})}}),ue=Xe({mutationFn:({codeId:se,pointIds:Ae})=>dE(se,{point_ids:Ae}),onSuccess:()=>{i({variant:"success",title:"Nokta atamasi guncellendi",description:"Secili noktalari QR koda baglandi."}),G([]),e.invalidateQueries({queryKey:["qr-codes"]}),e.invalidateQueries({queryKey:["qr-points"]})},onError:se=>{i({variant:"error",title:"Atama basarisiz",description:Le(se,"Nokta atamasi yapilamadi.").message})}}),_e=Xe({mutationFn:({codeId:se,pointId:Ae})=>mE(se,Ae),onSuccess:()=>{i({variant:"success",title:"Nokta baglantisi kaldirildi",description:"Secili nokta bu QR koddan ayrildi."}),e.invalidateQueries({queryKey:["qr-codes"]}),e.invalidateQueries({queryKey:["qr-points"]})},onError:se=>{i({variant:"error",title:"Islem basarisiz",description:Le(se,"Nokta kaldirilamadi.").message})}}),ne=Xe({mutationFn:fE,onSuccess:se=>{i({variant:"success",title:"QR nokta olusturuldu",description:`Nokta ID: ${se.id}`}),D(Gc),e.invalidateQueries({queryKey:["qr-points"]})},onError:se=>{i({variant:"error",title:"QR nokta olusturulamadi",description:Le(se,"Islem basarisiz.").message})}}),W=Xe({mutationFn:({pointId:se,payload:Ae})=>pE(se,Ae),onSuccess:()=>{i({variant:"success",title:"QR nokta guncellendi",description:"Nokta bilgileri kaydedildi."}),x(null),D(Gc),e.invalidateQueries({queryKey:["qr-points"]})},onError:se=>{i({variant:"error",title:"QR nokta guncellenemedi",description:Le(se,"Islem basarisiz.").message})}}),B=Xe({mutationFn:gE,onSuccess:()=>{i({variant:"success",title:"QR nokta pasife alindi",description:"Nokta aktif listeden cikarildi."}),e.invalidateQueries({queryKey:["qr-points"]}),e.invalidateQueries({queryKey:["qr-codes"]})},onError:se=>{i({variant:"error",title:"Islem basarisiz",description:Le(se,"Nokta pasife alinamadi.").message})}}),X=Q.data??[],de=ae.data??[];_.useEffect(()=>{l===null&&X.length>0&&o(X[0].id),l!==null&&!X.some(se=>se.id===l)&&o(X.length>0?X[0].id:null)},[X,l]);const ke=_.useMemo(()=>X.find(se=>se.id===l)??null,[X,l]);_.useEffect(()=>{if(!ke){q(null);return}let se=!1;return Mf.toDataURL(ke.code_value,{errorCorrectionLevel:"M",margin:2,width:360}).then(Ae=>{se||q(Ae)}).catch(()=>{se||q(null)}),()=>{se=!0}},[ke?.id,ke?.code_value]);const J=_.useMemo(()=>{const se=new Map;for(const Ae of de)se.set(Ae.id,Ae);return se},[de]),O=_.useMemo(()=>ke?ke.point_ids.map(se=>J.get(se)??null).filter(se=>se!==null):[],[ke,J]),te=_.useMemo(()=>{const se=v.trim().toLowerCase();return se?X.filter(Ae=>String(Ae.id).includes(se)||(Ae.name??"").toLowerCase().includes(se)||Ae.code_value.toLowerCase().includes(se)):X},[X,v]),P=_.useMemo(()=>{const se=S.trim().toLowerCase();return se?de.filter(Ae=>String(Ae.id).includes(se)||Ae.name.toLowerCase().includes(se)||String(Ae.department_id??"").includes(se)||String(Ae.region_id??"").includes(se)):de},[de,S]),Z=_.useMemo(()=>{const se=de.filter(Ke=>Ke.is_active),Ae=T.trim().toLowerCase();return Ae?se.filter(Ke=>String(Ke.id).includes(Ae)||Ke.name.toLowerCase().includes(Ae)||String(Ke.department_id??"").includes(Ae)||String(Ke.region_id??"").includes(Ae)):se},[de,T]),me=_.useMemo(()=>{const se=X.filter(ce=>ce.is_active).length,Ae=de.filter(ce=>ce.is_active).length,Ke=X.filter(ce=>ce.point_ids.length===0).length;return{codeCount:X.length,activeCodes:se,pointCount:de.length,activePoints:Ae,codesWithoutPoint:Ke}},[X,de]),Se=_.useMemo(()=>{const se=Number(R.lat);return Number.isFinite(se)?se:null},[R.lat]),Me=_.useMemo(()=>{const se=Number(R.lon);return Number.isFinite(se)?se:null},[R.lon]),Ze=_.useMemo(()=>{const se=Number(R.radiusM);return Number.isFinite(se)&&se>0?se:75},[R.radiusM]),Ve=se=>{G(Ae=>Ae.includes(se)?Ae.filter(Ke=>Ke!==se):[...Ae,se])},qe=se=>{h(se.id),A({name:se.name??"",codeValue:se.code_value,codeType:se.code_type,isActive:se.is_active})},Ne=()=>{h(null),A(Qc)},tt=()=>{const se=cv(M.regionCode,"GEN"),Ae=cv(M.locationCode,"LOKASYON"),Ke=Number(M.serialNo),ce=Number.isFinite(Ke)&&Ke>0?Math.floor(Ke):1,Re=CM(k.codeType),ct=`PF-${se}-${Ae}-${Re}-${String(ce).padStart(6,"0")}`;A(be=>({...be,codeValue:ct}))},bt=se=>{x(se.id),D({name:se.name,lat:String(se.lat),lon:String(se.lon),radiusM:String(se.radius_m),isActive:se.is_active})},rt=()=>{x(null),D(Gc)},pt=se=>{se.preventDefault();const Ae=k.codeValue.trim();if(!Ae){i({variant:"error",title:"Kod degeri zorunlu",description:"QR kod degerini bos birakamazsiniz."});return}const Ke={name:k.name.trim()||null,code_value:Ae,code_type:k.codeType,is_active:k.isActive};if(d===null){ve.mutate(Ke);return}ee.mutate({codeId:d,payload:Ke})},Ut=se=>{se.preventDefault();const Ae=R.name.trim(),Ke=Number(R.lat),ce=Number(R.lon),Re=Number(R.radiusM);if(!Ae){i({variant:"error",title:"Nokta adi zorunlu",description:"Lutfen bir nokta adi girin."});return}if(!Number.isFinite(Ke)||!Number.isFinite(ce)||!Number.isFinite(Re)||Re<=0){i({variant:"error",title:"Gecersiz konum",description:"Lat/Lon/radius alanlarini kontrol edin."});return}const ct={name:Ae,lat:Ke,lon:ce,radius_m:Re,is_active:R.isActive};if(f===null){ne.mutate(ct);return}W.mutate({pointId:f,payload:ct})},Dt=()=>{if(!ke){i({variant:"error",title:"QR kod seciniz",description:"Nokta atamak icin once bir QR kod secin."});return}if(K.length===0){i({variant:"error",title:"Nokta seciniz",description:"Atama icin en az bir nokta secin."});return}ue.mutate({codeId:ke.id,pointIds:K})},mt=async se=>{try{await navigator.clipboard.writeText(se),i({variant:"success",title:"Kopyalandi",description:"QR kod degeri panoya kopyalandi."})}catch{i({variant:"error",title:"Kopyalama basarisiz",description:"Lutfen manuel olarak kopyalayin."})}},rn=async se=>{try{const Ae=await Mf.toDataURL(se.code_value,{errorCorrectionLevel:"M",margin:2,width:900}),Ke=document.createElement("a");Ke.href=Ae,Ke.download=`qr-kod-${se.id}.png`,document.body.appendChild(Ke),Ke.click(),document.body.removeChild(Ke),i({variant:"success",title:"PNG indirildi",description:`QR kod #${se.id} dosyasi indirildi.`})}catch{i({variant:"error",title:"Indirme basarisiz",description:"QR kod PNG olusturulamadi."})}};return Q.isLoading||ae.isLoading?a.jsx(Ot,{}):Q.isError||ae.isError?a.jsx(Oe,{children:a.jsx("p",{className:"text-sm text-rose-700",children:"QR kod veya nokta listesi yuklenemedi."})}):a.jsxs("div",{className:"mx-auto w-full max-w-[1320px] space-y-4",children:[a.jsx(kn,{title:"QR Kod Yonetimi",description:"Konuma bagli giris/cikis icin QR kod ve QR nokta yonetimi. Sirayla nokta olustur, kod olustur, nokta ata, sonra indir."}),a.jsx(Oe,{className:"min-w-0",children:a.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1.45fr)_minmax(260px,0.95fr)]",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Nasil Calisir?"}),a.jsxs("ol",{className:"mt-2 space-y-1 text-sm text-slate-700",children:[a.jsx("li",{children:"1) Once QR nokta olustur (ad + lat/lon + radius)."}),a.jsx("li",{children:"2) Sonra QR kod olustur (benzersiz code_value + tip)."}),a.jsx("li",{children:"3) QR koda bir veya birden fazla aktif nokta ata."}),a.jsx("li",{children:"4) Calisan sadece atanmis nokta icindeyse okutma basarili olur."})]}),a.jsx("div",{className:"mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:"Onemli: Noktasi olmayan QR kod okutulamaz. Pasif nokta ya da pasif QR kod da kullanilamaz."})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm sm:grid-cols-2",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Kod"}),a.jsx("p",{className:"text-lg font-semibold text-slate-900",children:me.codeCount}),a.jsxs("p",{className:"text-xs text-emerald-700",children:["Aktif: ",me.activeCodes]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Nokta"}),a.jsx("p",{className:"text-lg font-semibold text-slate-900",children:me.pointCount}),a.jsxs("p",{className:"text-xs text-emerald-700",children:["Aktif: ",me.activePoints]})]}),a.jsxs("div",{className:"col-span-2 rounded-lg border border-rose-200 bg-rose-50 p-3",children:[a.jsx("p",{className:"text-xs text-rose-700",children:"Noktasi Atanmamis Kod"}),a.jsx("p",{className:"text-lg font-semibold text-rose-800",children:me.codesWithoutPoint}),a.jsx("p",{className:"text-xs text-rose-700",children:"Bu kodlar okutuldugunda sistem izin vermez."})]})]})]})}),a.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]",children:[a.jsxs(Oe,{className:"min-w-0",children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:d===null?"2) QR Kod Olustur":`2) QR Kod Duzenle (#${d})`}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Code value benzersiz olmalidir. Asagidaki anlamli format yardimcisini kullanabilirsiniz."}),a.jsxs("form",{className:"mt-3 space-y-3",onSubmit:pt,children:[a.jsxs("label",{className:"block text-sm text-slate-700",children:["Kod adi (opsiyonel)",a.jsx("input",{value:k.name,onChange:se=>A(Ae=>({...Ae,name:se.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Merkez Giris"})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Anlamli Format Yardimcisi"}),a.jsxs("div",{className:"mt-2 grid gap-2 sm:grid-cols-2 xl:grid-cols-4",children:[a.jsx("input",{value:M.regionCode,onChange:se=>I(Ae=>({...Ae,regionCode:se.target.value})),className:"rounded-lg border border-slate-300 px-2 py-2 text-sm",placeholder:"Bolge (IST)"}),a.jsx("input",{value:M.locationCode,onChange:se=>I(Ae=>({...Ae,locationCode:se.target.value})),className:"rounded-lg border border-slate-300 px-2 py-2 text-sm",placeholder:"Lokasyon (MERKEZ)"}),a.jsx("input",{type:"number",min:1,value:M.serialNo,onChange:se=>I(Ae=>({...Ae,serialNo:se.target.value})),className:"rounded-lg border border-slate-300 px-2 py-2 text-sm",placeholder:"Seri No"}),a.jsx("button",{type:"button",onClick:tt,className:"rounded-lg border border-brand-300 bg-white px-3 py-2 text-sm font-semibold text-brand-700 hover:bg-brand-50",children:"Deger Uret"})]}),a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Ornek: PF-IST-MERKEZ-IN-000001 / PF-ANK-SUBE1-BOTH-000014"})]}),a.jsxs("label",{className:"block text-sm text-slate-700",children:["code_value",a.jsx("input",{value:k.codeValue,onChange:se=>A(Ae=>({...Ae,codeValue:se.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: IN|HQ-1"})]}),a.jsxs("label",{className:"block text-sm text-slate-700",children:["Kod tipi",a.jsxs("select",{value:k.codeType,onChange:se=>A(Ae=>({...Ae,codeType:se.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"CHECKIN",children:"CHECKIN"}),a.jsx("option",{value:"CHECKOUT",children:"CHECKOUT"}),a.jsx("option",{value:"BOTH",children:"BOTH"})]}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"CHECKIN: sadece giris, CHECKOUT: sadece cikis, BOTH: sistem bugunku duruma gore secer."})]}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:k.isActive,onChange:se=>A(Ae=>({...Ae,isActive:se.target.checked}))}),"Aktif"]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{type:"submit",disabled:ve.isPending||ee.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:d===null?"Olustur":"Guncelle"}),d!==null?a.jsx("button",{type:"button",onClick:Ne,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Iptal"}):null]})]})]}),a.jsxs(Oe,{className:"min-w-0",children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"QR Kod Listesi"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Detay ve nokta atama islemleri icin bir QR kod secin."}),a.jsx("div",{className:"mt-3",children:a.jsx(ts,{value:v,onChange:b,placeholder:"Kod adi / degeri / ID ara"})}),a.jsx("div",{className:"mt-3 max-h-80 overflow-auto overscroll-contain rounded-lg border border-slate-200",children:a.jsxs("table",{className:"min-w-[980px] text-left text-sm",children:[a.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2",children:"ID"}),a.jsx("th",{className:"px-3 py-2",children:"Kod"}),a.jsx("th",{className:"px-3 py-2",children:"Tip"}),a.jsx("th",{className:"px-3 py-2",children:"Durum"}),a.jsx("th",{className:"px-3 py-2",children:"Nokta"}),a.jsx("th",{className:"px-3 py-2",children:"Aksiyon"})]})}),a.jsxs("tbody",{children:[te.map(se=>a.jsxs("tr",{className:`border-t border-slate-100 ${l===se.id?"bg-brand-50/60":""}`,children:[a.jsx("td",{className:"px-3 py-2",children:se.id}),a.jsxs("td",{className:"px-3 py-2",children:[a.jsx("button",{type:"button",onClick:()=>o(se.id),className:"font-medium text-brand-700 hover:underline",children:se.name||"-"}),a.jsx("div",{className:"max-w-[340px] break-all text-xs text-slate-500",children:se.code_value})]}),a.jsx("td",{className:"px-3 py-2",children:uv(se.code_type)}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-semibold ${se.is_active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:se.is_active?"Aktif":"Pasif"})}),a.jsx("td",{className:"px-3 py-2",children:se.point_ids.length}),a.jsx("td",{className:"px-3 py-2",children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.jsx("button",{type:"button",onClick:()=>qe(se),className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"}),a.jsx("button",{type:"button",onClick:()=>{rn(se)},className:"rounded-md border border-brand-300 px-2 py-1 text-xs font-medium text-brand-700 hover:bg-brand-50",children:"PNG"})]})})]},se.id)),te.length===0?a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-4 text-sm text-slate-500",colSpan:6,children:"Arama kriterine uygun QR kod bulunamadi."})}):null]})]})})]})]}),a.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]",children:[a.jsxs(Oe,{className:"min-w-0",children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:ke?`3) QR Kod Detay (#${ke.id})`:"3) QR Kod Detay"}),ke?a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 text-sm text-slate-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Ad:"})," ",ke.name||"-"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Kod degeri:"})," ",ke.code_value]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Tip:"})," ",uv(ke.code_type)]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Durum:"})," ",ke.is_active?"Aktif":"Pasif"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Atanan nokta sayisi:"})," ",ke.point_ids.length]})]}),ke.point_ids.length===0?a.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 p-3 text-xs text-rose-800",children:"Bu QR kodda nokta atamasi yok. Okutma yapildiginda sistem izin vermez."}):null,a.jsxs("div",{className:"rounded-lg border border-brand-200 bg-brand-50/60 p-3",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-700",children:"QR Onizleme"}),a.jsx("p",{className:"mt-1 break-all text-xs text-slate-700",children:ke.code_value}),V?a.jsxs("div",{className:"mt-3 flex flex-col items-start gap-3",children:[a.jsx("img",{src:V,alt:`QR Kod ${ke.id}`,className:"h-52 w-52 rounded-lg border border-brand-200 bg-white p-2"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{rn(ke)},className:"rounded-md bg-brand-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-brand-700",children:"PNG Indir"}),a.jsx("button",{type:"button",onClick:()=>{mt(ke.code_value)},className:"rounded-md border border-slate-300 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-white",children:"Kodu Kopyala"})]})]}):a.jsx("p",{className:"mt-2 text-xs text-rose-700",children:"QR onizleme olusturulamadi."})]}),a.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:"Bu QR kod, sadece bu koda atanmis aktif konum noktalarinin radius alaninda okutuldugunda gecerli olur. Diger konumlarda sistem isleme izin vermez."}),a.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Atanmis Noktalar"}),O.length===0?a.jsx("p",{className:"text-sm text-slate-600",children:"Bu QR kod icin henuz nokta atanmis degil."}):a.jsx("div",{className:"space-y-2",children:O.map(se=>a.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-slate-200 px-3 py-2 text-sm",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-slate-800",children:["#",se.id," - ",se.name]}),a.jsxs("p",{className:"text-xs text-slate-500",children:["lat/lon: ",se.lat,", ",se.lon," | radius: ",se.radius_m,"m"]})]}),a.jsx("button",{type:"button",onClick:()=>_e.mutate({codeId:ke.id,pointId:se.id}),className:"rounded-md border border-rose-300 px-2 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50",children:"Kaldir"})]},se.id))})]}):a.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Detay gormek icin listeden bir QR kod secin."})]}),a.jsxs(Oe,{className:"min-w-0",children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"4) Nokta Ata (Coklu Secim)"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Arama ile nokta secip tek islemde birden fazla noktayi QR koda baglayabilirsiniz."}),a.jsx("div",{className:"mt-3",children:a.jsx(ts,{value:T,onChange:z,placeholder:"Nokta adi / ID ara"})}),a.jsx("div",{className:"mt-3 max-h-56 overflow-auto overscroll-contain rounded-lg border border-slate-200 p-2",children:Z.length===0?a.jsx("p",{className:"px-2 py-1 text-sm text-slate-600",children:"Aktif nokta bulunamadi."}):a.jsx("div",{className:"space-y-1",children:Z.map(se=>a.jsxs("label",{className:"flex items-center gap-2 rounded-md px-2 py-1 text-sm text-slate-700 hover:bg-slate-50",children:[a.jsx("input",{type:"checkbox",checked:K.includes(se.id),onChange:()=>Ve(se.id)}),a.jsxs("span",{children:["#",se.id," - ",se.name," (",se.radius_m,"m)"]})]},se.id))})}),a.jsxs("div",{className:"mt-3 flex items-center justify-between gap-3",children:[a.jsxs("p",{className:"text-sm text-slate-600",children:["Secilen nokta: ",K.length]}),a.jsx("button",{type:"button",onClick:Dt,disabled:ue.isPending||ke===null,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:"Secilenleri Ata"})]})]})]}),a.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]",children:[a.jsxs(Oe,{className:"min-w-0",children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:f===null?"1) QR Nokta Olustur":`1) QR Nokta Duzenle (#${f})`}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"QR noktasi okutmanin izinli oldugu fiziksel konumu temsil eder."}),a.jsxs("form",{className:"mt-3 space-y-3",onSubmit:Ut,children:[a.jsxs("label",{className:"block text-sm text-slate-700",children:["Nokta adi",a.jsx("input",{value:R.name,onChange:se=>D(Ae=>({...Ae,name:se.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Merkez Ofis Kapi"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ornek: Istanbul Merkez Kapi, Ankara Sube Giris."})]}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("label",{className:"block text-sm text-slate-700",children:["Lat",a.jsx("input",{type:"number",step:"any",value:R.lat,onChange:se=>D(Ae=>({...Ae,lat:se.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"block text-sm text-slate-700",children:["Lon",a.jsx("input",{type:"number",step:"any",value:R.lon,onChange:se=>D(Ae=>({...Ae,lon:se.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),a.jsx(EM,{lat:Se,lon:Me,radiusM:Ze,onSelect:(se,Ae)=>D(Ke=>({...Ke,lat:String(se),lon:String(Ae)}))}),a.jsxs("label",{className:"block text-sm text-slate-700",children:["Radius (m)",a.jsx("input",{type:"number",min:1,value:R.radiusM,onChange:se=>D(Ae=>({...Ae,radiusM:se.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Oneri: bina ici 50-80m, acik alan 80-150m."})]}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:R.isActive,onChange:se=>D(Ae=>({...Ae,isActive:se.target.checked}))}),"Aktif"]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{type:"submit",disabled:ne.isPending||W.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:f===null?"Olustur":"Guncelle"}),f!==null?a.jsx("button",{type:"button",onClick:rt,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Iptal"}):null]})]})]}),a.jsxs(Oe,{className:"min-w-0",children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"5) QR Nokta Listesi"}),a.jsx("div",{className:"mt-3",children:a.jsx(ts,{value:S,onChange:w,placeholder:"Nokta adi / ID ara"})}),a.jsx("div",{className:"mt-3 max-h-96 overflow-auto overscroll-contain rounded-lg border border-slate-200",children:a.jsxs("table",{className:"min-w-[920px] text-left text-sm",children:[a.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2",children:"ID"}),a.jsx("th",{className:"px-3 py-2",children:"Nokta"}),a.jsx("th",{className:"px-3 py-2",children:"Konum"}),a.jsx("th",{className:"px-3 py-2",children:"Durum"}),a.jsx("th",{className:"px-3 py-2",children:"Aksiyon"})]})}),a.jsxs("tbody",{children:[P.map(se=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"px-3 py-2",children:se.id}),a.jsxs("td",{className:"px-3 py-2",children:[a.jsx("p",{className:"font-medium text-slate-800",children:se.name}),a.jsxs("p",{className:"text-xs text-slate-500",children:["radius: ",se.radius_m,"m"]})]}),a.jsxs("td",{className:"px-3 py-2 text-xs text-slate-600",children:[se.lat,", ",se.lon]}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-semibold ${se.is_active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:se.is_active?"Aktif":"Pasif"})}),a.jsx("td",{className:"px-3 py-2",children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.jsx("button",{type:"button",onClick:()=>bt(se),className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"}),se.is_active?a.jsx("button",{type:"button",onClick:()=>B.mutate(se.id),className:"rounded-md border border-rose-300 px-2 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50",children:"Pasife Al"}):null]})})]},se.id)),P.length===0?a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-4 text-sm text-slate-500",colSpan:5,children:"Arama kriterine uygun nokta bulunamadi."})}):null]})]})})]})]})]})}const dv=[{value:0,label:"Pazartesi"},{value:1,label:"Sal"},{value:2,label:"aramba"},{value:3,label:"Perembe"},{value:4,label:"Cuma"},{value:5,label:"Cumartesi"},{value:6,label:"Pazar"}];function AM(){const e=Un(),{pushToast:i}=Fn(),[l,o]=_.useState(""),[d,h]=_.useState(""),[f,x]=_.useState(""),[v,b]=_.useState({}),[S,w]=_.useState(""),[T,z]=_.useState("09:00"),[k,A]=_.useState("17:30"),[M,I]=_.useState("60"),[R,D]=_.useState(!0),[K,G]=_.useState(null),V=Be({queryKey:["departments"],queryFn:Hs}),q=Be({queryKey:["employees","all-for-quick-setup"],queryFn:()=>ui({include_inactive:!0,status:"all"})}),Q=Be({queryKey:["department-weekly-rules"],queryFn:()=>xb()}),ae=Be({queryKey:["department-shifts"],queryFn:()=>mu({active_only:!1})}),ve=l?Number(l):null,ee=Xe({mutationFn:({employeeId:P,departmentId:Z})=>iE(P,{department_id:Z}),onSuccess:P=>{i({variant:"success",title:"Departman atamas gncellendi",description:`${P.full_name} iin departman kayd gncellendi.`}),e.invalidateQueries({queryKey:["employees"]}),e.invalidateQueries({queryKey:["employee-device-overview"]})},onError:P=>{i({variant:"error",title:"Departman gncellenemedi",description:Le(P,"lem baarsz.").message})}}),ue=Xe({mutationFn:yb,onSuccess:()=>{i({variant:"success",title:"Haftalk kural kaydedildi",description:"Seilen gn iin plan gncellendi."}),e.invalidateQueries({queryKey:["department-weekly-rules"]})},onError:P=>{i({variant:"error",title:"Haftalk kural kaydedilemedi",description:Le(P,"lem baarsz.").message})}}),_e=Xe({mutationFn:sd,onSuccess:()=>{i({variant:"success",title:"Vardiya kaydedildi",description:"Departman vardiyas eklendi/gncellendi."}),w(""),z("09:00"),A("17:30"),I("60"),D(!0),G(null),e.invalidateQueries({queryKey:["department-shifts"]})},onError:P=>{i({variant:"error",title:"Vardiya kaydedilemedi",description:Le(P,"lem baarsz.").message})}}),ne=Xe({mutationFn:vb,onSuccess:()=>{i({variant:"success",title:"Vardiya pasife alnd",description:"Vardiya kayd pasif duruma getirildi."}),K!==null&&(G(null),w(""),z("09:00"),A("17:30"),I("60"),D(!0)),e.invalidateQueries({queryKey:["department-shifts"]})},onError:P=>{i({variant:"error",title:"Vardiya pasife alnamad",description:Le(P,"lem baarsz.").message})}}),W=Xe({mutationFn:({shift:P,nextActive:Z})=>sd({id:P.id,department_id:P.department_id,name:P.name,start_time_local:P.start_time_local,end_time_local:P.end_time_local,break_minutes:P.break_minutes,is_active:Z}),onSuccess:(P,Z)=>{i({variant:"success",title:Z.nextActive?"Vardiya aktif edildi":"Vardiya pasife alnd",description:Z.nextActive?"Vardiya tekrar kullanma ald.":"Vardiya pasif duruma getirildi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:P=>{i({variant:"error",title:"Vardiya durumu gncellenemedi",description:Le(P,"lem baarsz.").message})}}),B=V.data??[],X=q.data??[],de=Q.data??[],ke=ae.data??[],J=_.useMemo(()=>new Map(B.map(P=>[P.id,P.name])),[B]),O=_.useMemo(()=>ve?ke.filter(P=>P.department_id===ve):[],[ve,ke]),te=_.useMemo(()=>X.find(P=>String(P.id)===d),[X,d]);return _.useEffect(()=>{if(!ve){b({});return}const P=new Map(de.filter(me=>me.department_id===ve).map(me=>[me.weekday,me])),Z={};for(const me of dv){const Se=P.get(me.value);Z[me.value]={is_workday:Se?.is_workday??!0,planned_minutes:String(Se?.planned_minutes??540),break_minutes:String(Se?.break_minutes??60)}}b(Z)},[ve,de]),V.isLoading||q.isLoading||Q.isLoading||ae.isLoading?a.jsx(Ot,{}):V.isError||q.isError||Q.isError||ae.isError?a.jsx(St,{message:"Hzl ayarlar verileri alnamad."}):a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"Hzl Ayarlar",description:"Sadece gerekli kurulum admlar: alan-departman atamas, haftalk gn kurallar ve vardiyalar."}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"1) alan - Departman Atamas"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"alan adn veya ID bilgisini yazarak personeli bulun, departmann hzlca gncelleyin."}),a.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3",children:[a.jsx(Ka,{label:"alan",employees:X,value:d,onChange:P=>{h(P);const Z=X.find(me=>String(me.id)===P);x(Z?.department_id?String(Z.department_id):"")},helperText:"Ad-soyad veya personel ID ile arayn.",className:"md:col-span-2"}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Yeni departman",a.jsxs("select",{value:f,onChange:P=>x(P.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Atanmam"}),B.map(P=>a.jsx("option",{value:P.id,children:P.name},P.id))]})]})]}),a.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-3 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[a.jsxs("div",{children:[a.jsxs("p",{children:["Seili alan:"," ",te?`#${te.id} - ${te.full_name}`:"-"]}),a.jsxs("p",{className:"text-xs text-slate-500",children:["Mevcut departman:"," ",te?.department_id?J.get(te.department_id)??"-":"Atanmam"]})]}),a.jsx("button",{type:"button",disabled:!te||ee.isPending,onClick:()=>{te&&ee.mutate({employeeId:te.id,departmentId:f?Number(f):null})},className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Departman Kaydet"})]})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"2) Departman Haftalk Gn Kurallar"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Her gn iin alma gn, planlanan dakika ve mola dakikasn belirleyin."}),a.jsx("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:a.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",a.jsxs("select",{value:l,onChange:P=>o(P.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Seiniz"}),B.map(P=>a.jsx("option",{value:P.id,children:P.name},P.id))]})]})}),ve?a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Gn"}),a.jsx("th",{className:"py-2",children:"alma Gn"}),a.jsx("th",{className:"py-2",children:"Planlanan Dakika"}),a.jsx("th",{className:"py-2",children:"Mola Dakika"}),a.jsx("th",{className:"py-2 text-right",children:"lem"})]})}),a.jsx("tbody",{children:dv.map(P=>{const Z=v[P.value]??{is_workday:!0,planned_minutes:"540",break_minutes:"60"};return a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:P.label}),a.jsx("td",{className:"py-2",children:a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:Z.is_workday,onChange:me=>b(Se=>({...Se,[P.value]:{...Z,is_workday:me.target.checked}}))}),"alma gn"]})}),a.jsx("td",{className:"py-2",children:a.jsx("input",{value:Z.planned_minutes,onChange:me=>b(Se=>({...Se,[P.value]:{...Z,planned_minutes:me.target.value}})),className:"w-full rounded-lg border border-slate-300 px-3 py-2"})}),a.jsx("td",{className:"py-2",children:a.jsx("input",{value:Z.break_minutes,onChange:me=>b(Se=>({...Se,[P.value]:{...Z,break_minutes:me.target.value}})),className:"w-full rounded-lg border border-slate-300 px-3 py-2"})}),a.jsx("td",{className:"py-2 text-right",children:a.jsx("button",{type:"button",disabled:ue.isPending,onClick:()=>{const me=Number(Z.planned_minutes),Se=Number(Z.break_minutes);if(!Number.isFinite(me)||me<0){i({variant:"error",title:"Geersiz planlanan dakika",description:`${P.label} iin say giriniz.`});return}if(!Number.isFinite(Se)||Se<0){i({variant:"error",title:"Geersiz mola dakikas",description:`${P.label} iin say giriniz.`});return}ue.mutate({department_id:ve,weekday:P.value,is_workday:Z.is_workday,planned_minutes:Math.trunc(me),break_minutes:Math.trunc(Se)})},className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Kaydet"})})]},P.value)})})]})}):a.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Haftalk kural dzenlemek iin departman sein."})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"3) Departman Vardiyalar"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Bir departman iin birden fazla vardiya tanmlayabilirsiniz (r. 10:00-18:00 ve 14:00-22:00)."}),ve?a.jsxs(a.Fragment,{children:[a.jsxs("form",{className:"mt-3 grid gap-3 md:grid-cols-5",onSubmit:P=>{if(P.preventDefault(),!S.trim()){i({variant:"error",title:"Vardiya ad zorunlu",description:"Ltfen vardiya ad girin."});return}const Z=Number(M);if(!Number.isFinite(Z)||Z<0){i({variant:"error",title:"Geersiz mola dakikas",description:"Mola dakikasn say olarak girin."});return}_e.mutate({id:K??void 0,department_id:ve,name:S.trim(),start_time_local:T,end_time_local:k,break_minutes:Math.trunc(Z),is_active:R})},children:[K?a.jsxs("div",{className:"md:col-span-5 rounded-lg border border-brand-200 bg-brand-50 px-3 py-2 text-xs font-medium text-brand-700",children:["Dzenleme modu: #",K]}):null,a.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya ad",a.jsx("input",{value:S,onChange:P=>w(P.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"rn: Sabah 10-18"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Balang",a.jsx("input",{type:"time",value:T,onChange:P=>z(P.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Biti",a.jsx("input",{type:"time",value:k,onChange:P=>A(P.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Mola dakika",a.jsx("input",{value:M,onChange:P=>I(P.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("div",{className:"flex items-end gap-3 pb-1",children:[a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:R,onChange:P=>D(P.target.checked)}),"Aktif"]}),a.jsx("button",{type:"submit",disabled:_e.isPending,className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:_e.isPending?"Kaydediliyor...":K?"Vardiya Gncelle":"Vardiya Kaydet"}),K?a.jsx("button",{type:"button",onClick:()=>{G(null),w(""),z("09:00"),A("17:30"),I("60"),D(!0)},className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Vazge"}):null]})]}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Vardiya"}),a.jsx("th",{className:"py-2",children:"Saat Aral"}),a.jsx("th",{className:"py-2",children:"Mola"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2 text-right",children:"Aksiyon"})]})}),a.jsx("tbody",{children:O.map(P=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:P.name}),a.jsxs("td",{className:"py-2",children:[P.start_time_local," - ",P.end_time_local]}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:P.break_minutes})}),a.jsx("td",{className:"py-2",children:P.is_active?"Aktif":"Pasif"}),a.jsx("td",{className:"py-2 text-right",children:a.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{G(P.id),w(P.name),z(P.start_time_local),A(P.end_time_local),I(String(P.break_minutes)),D(P.is_active)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Dzenle"}),P.is_active?a.jsx("button",{type:"button",disabled:ne.isPending||W.isPending,onClick:()=>{window.confirm("Bu vardiya pasife alnsn m?")&&ne.mutate(P.id)},className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:"Pasife Al"}):a.jsx("button",{type:"button",disabled:W.isPending||ne.isPending,onClick:()=>W.mutate({shift:P,nextActive:!0}),className:"rounded-lg border border-emerald-300 px-3 py-1 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:"Aktif Et"})]})})]},P.id))})]})}),O.length===0?a.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Seilen departman iin vardiya bulunmuyor."}):null]}):a.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Vardiya dzenlemek iin departman sein."})]})]})}const mv=ka({name:In().min(2,"Bolge adi en az 2 karakter olmali.").max(255),is_active:Ed()});function hv(e){return Gt.isAxiosError(e)&&e.response?.status===409?"Bu bolge adi zaten mevcut. Farkli bir ad girin.":Le(e,"Bolge islemi basarisiz.").message}function zM(){const e=Un(),{pushToast:i}=Fn(),[l,o]=_.useState(""),[d,h]=_.useState(!0),[f,x]=_.useState(""),[v,b]=_.useState(!0),[S,w]=_.useState(null),[T,z]=_.useState(""),[k,A]=_.useState(!0),[M,I]=_.useState(null),R=Be({queryKey:["regions",v],queryFn:()=>bd({include_inactive:v})}),D=Xe({mutationFn:F2,onSuccess:Q=>{o(""),h(!0),I(null),i({variant:"success",title:"Bolge olusturuldu",description:`${Q.name} basariyla eklendi.`}),e.invalidateQueries({queryKey:["regions"]})},onError:Q=>{const ae=hv(Q);I(ae),i({variant:"error",title:"Bolge olusturulamadi",description:ae})}}),K=Xe({mutationFn:({regionId:Q,payload:ae})=>Z2(Q,ae),onSuccess:Q=>{I(null),w(null),z(""),A(!0),i({variant:"success",title:"Bolge guncellendi",description:`${Q.name} guncellendi.`}),e.invalidateQueries({queryKey:["regions"]})},onError:Q=>{const ae=hv(Q);I(ae),i({variant:"error",title:"Bolge guncellenemedi",description:ae})}}),G=Q=>{Q.preventDefault(),I(null);const ae=mv.safeParse({name:l,is_active:d});if(!ae.success){const ve=ae.error.issues[0]?.message??"Bolge formunu kontrol edin.";I(ve);return}D.mutate(ae.data)},V=Q=>{if(Q.preventDefault(),I(null),!S)return;const ae=mv.safeParse({name:T,is_active:k});if(!ae.success){const ve=ae.error.issues[0]?.message??"Bolge formunu kontrol edin.";I(ve);return}K.mutate({regionId:S,payload:ae.data})},q=_.useMemo(()=>{const Q=R.data??[],ae=f.trim().toLowerCase();return ae?Q.filter(ve=>ve.name.toLowerCase().includes(ae)):Q},[R.data,f]);return a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"Bolgeler",description:"Sube/sehir bazli yonetim icin bolge kayitlarini yonetin."}),a.jsxs(Oe,{children:[a.jsxs("form",{onSubmit:G,className:"grid gap-3 md:grid-cols-4",children:[a.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Bolge adi",a.jsx("input",{value:l,onChange:Q=>o(Q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Istanbul Avrupa"})]}),a.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:Q=>h(Q.target.checked)}),"Aktif"]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{type:"submit",disabled:D.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:D.isPending?"Kaydediliyor...":"Bolge Ekle"})})]}),M?a.jsx("p",{className:"form-validation mt-2",children:M}):null]}),S?a.jsxs(Oe,{children:[a.jsxs("form",{onSubmit:V,className:"grid gap-3 md:grid-cols-4",children:[a.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Bolge adi",a.jsx("input",{value:T,onChange:Q=>z(Q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:k,onChange:Q=>A(Q.target.checked)}),"Aktif"]}),a.jsxs("div",{className:"flex items-end gap-2",children:[a.jsx("button",{type:"submit",disabled:K.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:K.isPending?"Guncelleniyor...":"Kaydet"}),a.jsx("button",{type:"button",onClick:()=>{w(null),z(""),A(!0),I(null)},className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),M?a.jsx("p",{className:"form-validation mt-2",children:M}):null]}):null,R.isLoading?a.jsx(Ot,{}):null,R.isError?a.jsx(St,{message:"Bolge listesi alinamadi."}):null,!R.isLoading&&!R.isError?a.jsxs(Oe,{children:[a.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-3 md:items-end",children:[a.jsx(ts,{value:f,onChange:x,placeholder:"Bolge adina gore ara..."}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:v,onChange:Q=>b(Q.target.checked)}),"Pasif bolgeleri goster"]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Bolge ID"}),a.jsx("th",{className:"py-2",children:"Bolge Adi"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2",children:"Islem"})]})}),a.jsx("tbody",{children:q.map(Q=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:Q.id}),a.jsx("td",{className:"py-2",children:Q.name}),a.jsx("td",{className:"py-2",children:a.jsx(qs,{value:Q.is_active?"Aktif":"Pasif"})}),a.jsx("td",{className:"py-2",children:a.jsx("button",{type:"button",onClick:()=>{w(Q.id),z(Q.name),A(Q.is_active),I(null)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"})})]},Q.id))})]})}),q.length===0?a.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Arama kriterine uygun bolge bulunamadi."}):null]}):null]})}function Tl(e){return new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"medium"}).format(new Date(e))}function MM(e){return e==="SENT"?"bg-emerald-100 text-emerald-700":e==="FAILED"?"bg-rose-100 text-rose-700":e==="CANCELED"?"bg-slate-200 text-slate-700":e==="SENDING"?"bg-amber-100 text-amber-700":"bg-sky-100 text-sky-700"}function OM(e){return e==="SENT"?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}function fv(e){return e==="admins"?"ADMIN":e==="employees"?"CALISAN":e==="both"?"HER IKISI":e.toUpperCase()}function DM(e,i){const l=window.URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=i,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l)}const Go=25,Vo=50,h_="pf_admin_push_vapid_public_key";async function RM(e){if(!("serviceWorker"in navigator)||!("PushManager"in window))throw new Error("Bu tarayici push bildirimlerini desteklemiyor.");if((Notification.permission==="granted"?"granted":await Notification.requestPermission())!=="granted")throw new Error("Bildirim izni verilmedi.");const o=await navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"});let d=await o.pushManager.getSubscription();const h=window.localStorage.getItem(h_);if(d&&h&&h!==e){try{await d.unsubscribe()}catch{}d=null}return d||(d=await o.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:kb(e)})),d}function LM(){const e=Un(),{pushToast:i}=Fn(),{user:l}=Ul(),[o,d]=fd(),[h,f]=_.useState("Puantaj Bildirimi"),[x,v]=_.useState(""),[b,S]=_.useState(""),[w,T]=_.useState("employees"),[z,k]=_.useState(60),[A,M]=_.useState(""),[I,R]=_.useState(1),[D,K]=_.useState(""),[G,V]=_.useState(""),[q,Q]=_.useState([]),[ae,ve]=_.useState([]),[ee,ue]=_.useState(null),[_e,ne]=_.useState(!1),[W,B]=_.useState(""),[X,de]=_.useState(""),[ke,J]=_.useState(""),[O,te]=_.useState(1),[P,Z]=_.useState(""),[me,Se]=_.useState(null),Me=Be({queryKey:["employees","notify"],queryFn:()=>ui({status:"active"})}),Ze=Be({queryKey:["admin-users","notify"],queryFn:pb}),Ve=Be({queryKey:["admin-push-config"],queryFn:$y}),qe=Be({queryKey:["admin-push-self-check"],queryFn:CE,refetchInterval:15e3}),Ne=Be({queryKey:["notification-jobs",A],queryFn:()=>NE({status:A||void 0,limit:100}),refetchInterval:1e4}),tt=Be({queryKey:["notification-delivery-logs"],queryFn:()=>jE({limit:400}),refetchInterval:15e3}),bt=Be({queryKey:["notify-subs-emp"],queryFn:()=>wE({}),refetchInterval:15e3}),rt=Be({queryKey:["notify-subs-admin"],queryFn:()=>EE({}),refetchInterval:15e3}),pt=Be({queryKey:["daily-archives",W,X,ke],queryFn:()=>OE({limit:180,start_date:W||void 0,end_date:X||void 0,employee_query:ke.trim()||void 0})}),Ut=_.useMemo(()=>{const ie=D.trim().toLowerCase();return ie?(Me.data??[]).filter($e=>`${$e.id} ${$e.full_name}`.toLowerCase().includes(ie)):Me.data??[]},[Me.data,D]),Dt=_.useMemo(()=>{const ie=G.trim().toLowerCase();return ie?(Ze.data??[]).filter($e=>`${$e.id} ${$e.username}`.toLowerCase().includes(ie)):Ze.data??[]},[Ze.data,G]),mt=_.useMemo(()=>{const ie=P.trim().toLowerCase(),$e=tt.data??[];return ie?$e.filter(zt=>[zt.recipient_name??"",String(zt.recipient_id??""),String(zt.device_id??""),zt.ip??"",zt.status,zt.target,zt.title??"",zt.sender_admin].join(" ").toLowerCase().includes(ie)):$e},[tt.data,P]),rn=_.useMemo(()=>mt.filter(ie=>ie.status==="SENT").length,[mt]),se=_.useMemo(()=>mt.filter(ie=>ie.status==="FAILED").length,[mt]),Ae=_.useMemo(()=>mt.find(ie=>ie.audit_id===me)??null,[mt,me]),Ke=Ne.data??[],ce=_.useMemo(()=>Math.max(1,Math.ceil(Ke.length/Go)),[Ke.length]),Re=_.useMemo(()=>{const ie=(I-1)*Go;return Ke.slice(ie,ie+Go)},[I,Ke]),ct=Ke.length===0?0:(I-1)*Go+1,be=Math.min(I*Go,Ke.length),He=pt.data??[],lt=_.useMemo(()=>Math.max(1,Math.ceil(He.length/Vo)),[He.length]),at=_.useMemo(()=>{const ie=(O-1)*Vo;return He.slice(ie,ie+Vo)},[O,He]),tn=He.length===0?0:(O-1)*Vo+1,re=Math.min(O*Vo,He.length),Y=(rt.data??[]).length,Ye=Y>0,st=(l?.username??"").trim().toLowerCase(),Vt=typeof l?.admin_user_id=="number"&&l.admin_user_id>0?l.admin_user_id:null,wt=_.useMemo(()=>{const ie=rt.data??[];let $e=0,zt=0,Cn=0;for(const Ya of ie){const Ai=Vt!==null&&Ya.admin_user_id===Vt,Nn=st.length>0&&(Ya.admin_username||"").trim().toLowerCase()===st;Ai&&($e+=1),Nn&&(zt+=1),(Ai||Nn)&&(Cn+=1)}return{total:Cn,byId:$e,byUsername:zt}},[rt.data,Vt,st]),Mn=qe.data?.active_claims_for_actor??wt.total,ki=qe.data?.active_claims_for_actor_by_id??wt.byId,Ci=qe.data?.active_claims_for_actor_by_username??wt.byUsername,Zn=Mn>0,pa=Xe({mutationFn:AE,onSuccess:ie=>{ue(ie),i({variant:"success",title:"Davet hazir",description:"Link admin cihaza gonderildi."}),navigator.clipboard.writeText(ie.invite_url)},onError:ie=>i({variant:"error",title:"Davet hatasi",description:Le(ie,"Davet olusturulamadi").message})}),Vn=Xe({mutationFn:TE,onSuccess:ie=>{ie.total_targets<=0||ie.sent<=0?i({variant:"error",title:"Self-test basarisiz",description:`Hedef: ${ie.total_targets} | Gonderilen: ${ie.sent} | Hata: ${ie.failed}`}):i({variant:"success",title:"Self-test bildirimi gonderildi",description:`Hedef: ${ie.total_targets} | Gonderilen: ${ie.sent}`}),e.invalidateQueries({queryKey:["admin-push-self-check"]}),e.invalidateQueries({queryKey:["notification-delivery-logs"]})},onError:ie=>{const $e=Le(ie,"Self-test bildirimi gonderilemedi.");i({variant:"error",title:"Self-test hatasi",description:$e.message})}}),On=Xe({mutationFn:async()=>{const ie=await $y();if(!ie.enabled||!ie.vapid_public_key)throw new Error("Push bildirim servisi yapilandirilmamis.");const $e=await RM(ie.vapid_public_key),zt=await ME({subscription:$e.toJSON(),send_test:!0});return window.localStorage.setItem(h_,ie.vapid_public_key),zt},onSuccess:ie=>{i({variant:ie.test_push_ok?"success":"error",title:ie.test_push_ok?"Heal tamamlandi":"Heal tamamlandi ama test hatali",description:ie.test_push_ok?`Abonelik yenilendi (#${ie.subscription_id}) ve test bildirimi gonderildi.`:`Abonelik yenilendi (#${ie.subscription_id}) ancak test bildirimi hatali.`}),e.invalidateQueries({queryKey:["admin-push-self-check"]}),e.invalidateQueries({queryKey:["notify-subs-admin"]}),e.invalidateQueries({queryKey:["notification-delivery-logs"]})},onError:ie=>{if(ie instanceof Error&&!("response"in ie)){i({variant:"error",title:"Heal hatasi",description:ie.message});return}const $e=Le(ie,"Cihaz heal islemi basarisiz oldu.");i({variant:"error",title:"Heal hatasi",description:$e.message})}}),Ca=Xe({mutationFn:_b,onSuccess:(ie,$e)=>{const zt=$e.target==="admins"||$e.target==="both";ie.total_targets<=0?i({variant:"error",title:"Bildirim gonderilemedi",description:"Hedef 0. Aktif abonelik yok; once cihaz claim edin."}):ie.sent<=0?i({variant:"error",title:"Bildirim gonderilemedi",description:`Hedef: ${ie.total_targets} / Gonderilen: ${ie.sent} / Hata: ${ie.failed}`}):(i({variant:"success",title:"Bildirim gonderildi",description:`Hedef: ${ie.total_targets} / Gonderilen: ${ie.sent}`}),zt&&!Zn&&i({variant:"error",title:"Bu hesapta claim eksik",description:"Admin hedefli gonderim yapildi ancak bu hesapta aktif claim olmadigi icin sana dusmeyebilir."})),zt&&ie.admin_target_missing&&i({variant:"error",title:"Admin hedefi 0",description:"Calisan bildirimi gitmis olabilir ama admin hedefinde aktif abonelik yok. Admin claim zorunlu."}),e.invalidateQueries({queryKey:["notification-jobs"]}),e.invalidateQueries({queryKey:["notification-delivery-logs"]}),e.invalidateQueries({queryKey:["admin-push-self-check"]})},onError:ie=>i({variant:"error",title:"Gonderim hatasi",description:Le(ie,"Bildirim gonderilemedi").message})}),Yn=Xe({mutationFn:SE,onSuccess:()=>{e.invalidateQueries({queryKey:["notification-jobs"]})}}),ci=Xe({mutationFn:RE,onSuccess:(ie,$e)=>{const zt=(pt.data??[]).find(Cn=>Cn.id===$e);DM(ie,zt?.file_name??`arsiv-${$e}.xlsx`)}}),Ti=Xe({mutationFn:ie=>BE(ie),onSuccess:ie=>{ie.total_targets<=0||ie.sent<=0?i({variant:"error",title:"Arsiv bildirimi gonderilemedi",description:`Hedef: ${ie.total_targets} | Gonderilen: ${ie.sent} | Hata: ${ie.failed}. Aktif admin cihazi claim edilmeli.`}):(i({variant:"success",title:"Arsiv bildirimi gonderildi",description:`Hedef: ${ie.total_targets} | Gonderilen: ${ie.sent} | Hata: ${ie.failed}`}),Zn||i({variant:"error",title:"Bu hesapta claim eksik",description:"Bildirim gitti ama bu admin hesabinda aktif cihaz claim olmadigi icin sana dusmeyebilir."})),e.invalidateQueries({queryKey:["notification-jobs"]})},onError:ie=>{const $e=Le(ie,"Arsiv bildirimi gonderilemedi.");i({variant:"error",title:"Arsiv bildirimi basarisiz",description:$e.message})}});return _.useEffect(()=>{if(_e)return;const ie=o.get("archive_id");if(!ie)return;const $e=Number(ie);if(!Number.isInteger($e)||$e<=0){ne(!0);return}if(!(pt.data??[]).find(Ya=>Ya.id===$e))return;ne(!0),ci.mutate($e);const Cn=new URLSearchParams(o);Cn.delete("archive_id"),d(Cn,{replace:!0})},[_e,pt.data,ci,o,d]),_.useEffect(()=>{R(1)},[A]),_.useEffect(()=>{R(ie=>ie<1?1:ie>ce?ce:ie)},[ce]),_.useEffect(()=>{te(1)},[W,X,ke]),_.useEffect(()=>{if(mt.length===0){Se(null);return}(me===null||!mt.some(ie=>ie.audit_id===me))&&Se(mt[0].audit_id)},[mt,me]),_.useEffect(()=>{te(ie=>ie<1?1:ie>lt?lt:ie)},[lt]),a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"Bildirim Merkezi",description:"Push, claim daveti, job yonetimi ve gunluk Excel arsivi."}),a.jsxs(Oe,{children:[a.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Admin davet suresi (dk)",a.jsx("input",{type:"number",min:1,max:1440,value:z,onChange:ie=>k(Number(ie.target.value||60)),className:"mt-1 w-40 rounded border border-slate-300 px-3 py-2"})]}),a.jsx("button",{type:"button",onClick:()=>pa.mutate({expires_in_minutes:z}),className:"rounded bg-brand-600 px-4 py-2 text-sm font-semibold text-white",children:"Admin cihaz claim linki uret"}),a.jsxs("span",{className:"text-xs text-slate-500",children:["Push: ",Ve.data?.enabled?"Aktif":"Pasif"]})]}),a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Link otomatik kopyalanir. Ekran: /admin-panel/device-claim?token=..."}),ee?a.jsxs("div",{className:"mt-2 rounded border border-emerald-200 bg-emerald-50 p-2 text-xs text-emerald-800",children:[a.jsxs("p",{children:["Token: ",ee.token]}),a.jsxs("p",{className:"break-all",children:["Link: ",ee.invite_url]}),a.jsxs("p",{children:["Bitis: ",Tl(ee.expires_at)]})]}):null]}),a.jsx(Oe,{children:a.jsxs("form",{className:"space-y-3",onSubmit:ie=>{ie.preventDefault(),Ca.mutate({title:h.trim(),message:x.trim(),password:b.trim(),target:w,employee_ids:w!=="admins"&&q.length>0?q:void 0,admin_user_ids:w!=="employees"&&ae.length>0?ae:void 0})},children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Manuel Push Gonder"}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsx("input",{value:h,onChange:ie=>f(ie.target.value),className:"rounded border border-slate-300 px-3 py-2",placeholder:"Baslik"}),a.jsx("input",{type:"password",value:b,onChange:ie=>S(ie.target.value),className:"rounded border border-slate-300 px-3 py-2",placeholder:"Admin sifresi"}),a.jsxs("select",{value:w,onChange:ie=>T(ie.target.value),className:"rounded border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"employees",children:"Calisanlara"}),a.jsx("option",{value:"admins",children:"Adminlere"}),a.jsx("option",{value:"both",children:"Her ikisine"})]})]}),a.jsx("textarea",{value:x,onChange:ie=>v(ie.target.value),rows:3,className:"w-full rounded border border-slate-300 px-3 py-2",placeholder:"Mesaj"}),w!=="admins"?a.jsxs("div",{children:[a.jsx(ts,{value:D,onChange:K,placeholder:"Calisan filtrele..."}),a.jsx("div",{className:"mt-2 max-h-36 overflow-y-auto rounded border border-slate-200 p-2 text-sm",children:Ut.map(ie=>a.jsxs("label",{className:"flex items-center justify-between py-1",children:[a.jsxs("span",{children:["#",ie.id," - ",ie.full_name]}),a.jsx("input",{type:"checkbox",checked:q.includes(ie.id),onChange:()=>Q($e=>$e.includes(ie.id)?$e.filter(zt=>zt!==ie.id):[...$e,ie.id])})]},ie.id))})]}):null,w!=="employees"?a.jsxs("div",{children:[a.jsx(ts,{value:G,onChange:V,placeholder:"Admin filtrele..."}),a.jsx("div",{className:"mt-2 max-h-36 overflow-y-auto rounded border border-slate-200 p-2 text-sm",children:Dt.map(ie=>a.jsxs("label",{className:"flex items-center justify-between py-1",children:[a.jsxs("span",{children:["#",ie.id," - ",ie.username]}),a.jsx("input",{type:"checkbox",checked:ae.includes(ie.id),onChange:()=>ve($e=>$e.includes(ie.id)?$e.filter(zt=>zt!==ie.id):[...$e,ie.id])})]},ie.id))})]}):null,a.jsx("button",{type:"submit",className:"rounded bg-brand-600 px-4 py-2 text-sm font-semibold text-white",children:"Bildirimi gonder"})]})}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Bildirim Isleri"}),a.jsxs("div",{className:"mb-2 mt-2 flex gap-2",children:[a.jsxs("select",{value:A,onChange:ie=>M(ie.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"Tumu"}),a.jsx("option",{value:"PENDING",children:"PENDING"}),a.jsx("option",{value:"SENDING",children:"SENDING"}),a.jsx("option",{value:"SENT",children:"SENT"}),a.jsx("option",{value:"FAILED",children:"FAILED"}),a.jsx("option",{value:"CANCELED",children:"CANCELED"})]}),a.jsx("button",{type:"button",onClick:()=>{Ne.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Yenile"})]}),Ne.isLoading?a.jsx(Ot,{label:"Yukleniyor..."}):null,Ne.isError?a.jsx(St,{message:"Job listesi alinamadi."}):null,!Ne.isLoading&&!Ne.isError?a.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:[a.jsxs("span",{children:["Gosterilen satir: ",ct,"-",be," / ",Ke.length]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>R(ie=>Math.max(1,ie-1)),disabled:I<=1,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Onceki"}),a.jsxs("span",{children:["Sayfa ",I," / ",ce]}),a.jsx("button",{type:"button",onClick:()=>R(ie=>Math.min(ce,ie+1)),disabled:I>=ce,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}):null,a.jsx("div",{className:"mt-2 max-h-[420px] overflow-auto rounded-lg border border-slate-200",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"sticky top-0 bg-white",children:a.jsxs("tr",{className:"text-xs uppercase text-slate-500",children:[a.jsx("th",{className:"px-2 py-2",children:"Sira"}),a.jsx("th",{className:"px-2 py-2",children:"ID"}),a.jsx("th",{className:"px-2 py-2",children:"Tur"}),a.jsx("th",{className:"px-2 py-2",children:"Durum"}),a.jsx("th",{className:"px-2 py-2",children:"Planlanan"}),a.jsx("th",{className:"px-2 py-2",children:"Islem"})]})}),a.jsx("tbody",{children:Re.map((ie,$e)=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"px-2 py-2 text-slate-500",children:ct+$e}),a.jsx("td",{className:"px-2 py-2",children:ie.id}),a.jsx("td",{className:"px-2 py-2",children:ie.job_type}),a.jsx("td",{className:"px-2 py-2",children:a.jsx("span",{className:`rounded px-2 py-1 text-xs ${MM(ie.status)}`,children:ie.status})}),a.jsx("td",{className:"px-2 py-2",children:Tl(ie.scheduled_at_utc)}),a.jsx("td",{className:"px-2 py-2",children:ie.status==="PENDING"||ie.status==="SENDING"?a.jsx("button",{type:"button",className:"rounded border border-rose-300 px-2 py-1 text-xs text-rose-700",onClick:()=>Yn.mutate(ie.id),children:"Iptal"}):"-"})]},ie.id))})]})}),!Ne.isLoading&&!Ne.isError&&Ke.length===0?a.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Filtreye uygun bildirim isi bulunamadi."}):null]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Abonelik Ozeti"}),a.jsxs("div",{className:"grid gap-2 md:grid-cols-4",children:[a.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Calisan abonelik: ",(bt.data??[]).length]}),a.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Admin abonelik: ",(rt.data??[]).length]}),a.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Arsiv dosyasi: ",(pt.data??[]).length]}),a.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Teslimat log satiri: ",(tt.data??[]).length]})]}),Ye?null:a.jsx("p",{className:"mt-2 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:'Aktif admin push aboneligi yok. "Admin cihaz claim linki uret" adimini tamamlamadan bildirim gonderilemez.'})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Admin Push Self-Check"}),a.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-4",children:[a.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Login admin: ",a.jsx("strong",{children:l?.username??"-"})]}),a.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Login admin ID: ",a.jsx("strong",{children:l?.admin_user_id??"-"})]}),a.jsxs("div",{className:`rounded border p-3 text-sm ${Zn?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-rose-200 bg-rose-50 text-rose-800"}`,children:["Bu hesap claim: ",a.jsx("strong",{children:Mn})," (id:",ki," / user:",Ci,")"]}),a.jsxs("div",{className:`rounded border p-3 text-sm ${qe.data?.push_enabled??Ve.data?.enabled?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-rose-200 bg-rose-50 text-rose-800"}`,children:["Push config:"," ",a.jsx("strong",{children:qe.data?.push_enabled??Ve.data?.enabled?"Aktif":"Pasif"})]})]}),a.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-4",children:[a.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Toplam aktif admin claim: ",a.jsx("strong",{children:qe.data?.active_total_subscriptions??Y})]}),a.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Son claim gorulme:"," ",a.jsx("strong",{children:qe.data?.latest_claim_seen_at?Tl(qe.data.latest_claim_seen_at):"-"})]}),a.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Claim saglik:"," ",a.jsxs("strong",{children:["saglikli ",qe.data?.active_claims_healthy??0," / ","hatali ",qe.data?.active_claims_with_error??0," / ","stale ",qe.data?.active_claims_stale??0]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{type:"button",onClick:()=>Vn.mutate(),disabled:Vn.isPending||On.isPending,className:"rounded border border-brand-300 px-3 py-2 text-sm text-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:Vn.isPending?"Self-test gonderiliyor...":"Kendime test bildirimi gonder"}),a.jsx("button",{type:"button",onClick:()=>On.mutate(),disabled:On.isPending||Vn.isPending,className:"rounded border border-emerald-300 px-3 py-2 text-sm text-emerald-700 disabled:cursor-not-allowed disabled:opacity-60",children:On.isPending?"Heal calisiyor...":"Bu cihazi heal et"})]})})]}),a.jsxs("div",{className:"mt-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:["Son self-test:"," ",a.jsx("strong",{children:qe.data?.last_self_test_at?Tl(qe.data.last_self_test_at):"-"})," | ","Durum:"," ",a.jsx("strong",{children:qe.data?.last_self_test_success===null?"-":qe.data?.last_self_test_success?"BASARILI":"HATALI"})," | ","Hedef:"," ",a.jsx("strong",{children:qe.data?.last_self_test_total_targets??"-"})," | ","Gonderilen:"," ",a.jsx("strong",{children:qe.data?.last_self_test_sent??"-"})," | ","Hata:"," ",a.jsx("strong",{children:qe.data?.last_self_test_failed??"-"})]}),qe.isError?a.jsx("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:"Self-check verisi alinamadi. Fallback olarak abonelik listesi kullaniliyor."}):null,Zn?null:a.jsx("p",{className:"mt-2 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:"Bu admin hesabinda aktif cihaz claim gorunmuyor. Bildirim almak icin telefonda claim linkini acip izin adimini tamamla."}),qe.data?.latest_claim_error?a.jsxs("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:["Son claim hatasi: ",qe.data.latest_claim_error]}):null]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Bildirim Teslimat Logu"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Kime gitti / gitmedi, isim-ID, cihaz, IP ve hata bilgisini izleyin."}),a.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-4",children:[a.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Toplam satir: ",mt.length]}),a.jsxs("div",{className:"rounded border border-emerald-200 bg-emerald-50 p-3 text-sm text-emerald-800",children:["Gonderildi: ",rn]}),a.jsxs("div",{className:"rounded border border-rose-200 bg-rose-50 p-3 text-sm text-rose-800",children:["Gonderilemedi: ",se]}),a.jsx("button",{type:"button",onClick:()=>{tt.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Logu yenile"})]}),a.jsx("div",{className:"mt-3",children:a.jsx(ts,{value:P,onChange:Z,placeholder:"Isim, ID, cihaz, IP, baslik, durum ara..."})}),tt.isLoading?a.jsx(Ot,{label:"Teslimat logu yukleniyor..."}):null,tt.isError?a.jsx(St,{message:"Teslimat logu alinamadi."}):null,!tt.isLoading&&!tt.isError?a.jsxs("div",{className:"mt-3 grid gap-4 xl:grid-cols-[minmax(0,1fr)_360px]",children:[a.jsxs("section",{className:"overflow-hidden rounded-xl border border-slate-900 bg-[#09131d] text-slate-200 shadow-inner",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-slate-700 bg-slate-900/70 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-rose-400"}),a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-amber-300"}),a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-emerald-400"}),a.jsx("span",{className:"ml-2 text-xs font-semibold text-slate-300",children:"delivery-terminal"})]}),a.jsxs("span",{className:"text-[11px] text-slate-400",children:[mt.length," kayit"]})]}),a.jsxs("div",{className:"max-h-[520px] overflow-auto",children:[a.jsxs("table",{className:"min-w-full table-fixed text-left text-xs",children:[a.jsx("thead",{className:"sticky top-0 bg-slate-900/95 text-[11px] uppercase text-slate-400",children:a.jsxs("tr",{children:[a.jsx("th",{className:"w-36 px-2 py-2",children:"Zaman"}),a.jsx("th",{className:"w-24 px-2 py-2",children:"Durum"}),a.jsx("th",{className:"w-24 px-2 py-2",children:"Hedef"}),a.jsx("th",{className:"w-56 px-2 py-2",children:"Kisi"}),a.jsx("th",{className:"w-20 px-2 py-2",children:"Cihaz"}),a.jsx("th",{className:"w-36 px-2 py-2",children:"IP"}),a.jsx("th",{className:"w-48 px-2 py-2",children:"Baslik"}),a.jsx("th",{className:"w-64 px-2 py-2",children:"Hata"})]})}),a.jsx("tbody",{children:mt.map((ie,$e)=>{const zt=ie.audit_id===me;return a.jsxs("tr",{onClick:()=>Se(ie.audit_id),className:`cursor-pointer border-t border-slate-800 ${zt?"bg-cyan-900/35":"hover:bg-slate-800/55"}`,children:[a.jsx("td",{className:"px-2 py-2 text-slate-300",children:Tl(ie.sent_at_utc)}),a.jsx("td",{className:"px-2 py-2",children:a.jsx("span",{className:`rounded px-2 py-0.5 text-[11px] font-semibold ${OM(ie.status)}`,children:ie.status})}),a.jsx("td",{className:"px-2 py-2 text-slate-300",children:fv(ie.target)}),a.jsxs("td",{className:"px-2 py-2 text-slate-300 truncate",title:`#${ie.recipient_id??"-"} - ${ie.recipient_name??"-"}`,children:["#",ie.recipient_id??"-"," - ",ie.recipient_name??"-"]}),a.jsx("td",{className:"px-2 py-2 text-slate-300",children:ie.device_id??"-"}),a.jsx("td",{className:"px-2 py-2 text-slate-300 truncate",title:ie.ip??"-",children:ie.ip??"-"}),a.jsx("td",{className:"px-2 py-2 text-slate-300 truncate",title:ie.title??"-",children:ie.title??"-"}),a.jsx("td",{className:"px-2 py-2 text-slate-300 truncate",title:ie.error??"-",children:ie.error??"-"})]},`${ie.audit_id}-${ie.recipient_type}-${ie.recipient_id??0}-${ie.device_id??0}-${$e}`)})})]}),mt.length===0?a.jsx("p",{className:"px-3 py-3 text-sm text-amber-300",children:"Filtreye uygun teslimat kaydi bulunamadi."}):null]})]}),a.jsxs("aside",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[a.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Secili teslimat detayi"}),Ae===null?a.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Listeden bir kayit secin."}):a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-2 text-sm text-slate-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Zaman:"})," ",Tl(Ae.sent_at_utc)]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Durum:"})," ",Ae.status]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Hedef tipi:"})," ",Ae.recipient_type==="employee"?"CALISAN":"ADMIN"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Hedef:"})," ",fv(Ae.target)]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Kisi:"})," #",Ae.recipient_id??"-"," -"," ",Ae.recipient_name??"-"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Cihaz:"})," ",Ae.device_id??"-"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"IP:"})," ",Ae.ip??"-"]}),a.jsxs("p",{className:"break-words",children:[a.jsx("span",{className:"font-semibold",children:"Baslik:"})," ",Ae.title??"-"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Gonderen:"})," ",Ae.sender_admin]}),a.jsxs("p",{className:"break-all",children:[a.jsx("span",{className:"font-semibold",children:"Endpoint:"})," ",Ae.endpoint??"-"]}),a.jsxs("p",{className:"break-all",children:[a.jsx("span",{className:"font-semibold",children:"Hata:"})," ",Ae.error??"-"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-xs font-semibold text-slate-600",children:"JSON detay"}),a.jsx("pre",{className:"max-h-64 overflow-auto rounded-lg bg-slate-900 p-2 text-[11px] text-slate-100",children:JSON.stringify(Ae,null,2)})]})]})]})]}):null]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Gunluk Excel Arsivi"}),a.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-4",children:[a.jsxs("label",{className:"text-xs text-slate-600",children:["Baslangic",a.jsx("input",{type:"date",value:W,onChange:ie=>B(ie.target.value),className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),a.jsxs("label",{className:"text-xs text-slate-600",children:["Bitis",a.jsx("input",{type:"date",value:X,onChange:ie=>de(ie.target.value),className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),a.jsxs("label",{className:"text-xs text-slate-600",children:["Calisan icerigi",a.jsx("input",{value:ke,onChange:ie=>J(ie.target.value),placeholder:"ad veya ID",className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{type:"button",onClick:()=>{pt.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Arsivi yenile"})})]}),pt.isLoading?a.jsx(Ot,{label:"Arsiv yukleniyor..."}):null,pt.isError?a.jsx(St,{message:"Arsiv listesi alinamadi."}):null,!pt.isLoading&&!pt.isError?a.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:[a.jsxs("span",{children:["Gosterilen satir: ",tn,"-",re," / ",He.length]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>te(ie=>Math.max(1,ie-1)),disabled:O<=1,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Onceki"}),a.jsxs("span",{children:["Sayfa ",O," / ",lt]}),a.jsx("button",{type:"button",onClick:()=>te(ie=>Math.min(lt,ie+1)),disabled:O>=lt,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}):null,a.jsx("div",{className:"mt-2 max-h-[520px] overflow-auto rounded-lg border border-slate-200",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"sticky top-0 bg-white",children:a.jsxs("tr",{className:"text-xs uppercase text-slate-500",children:[a.jsx("th",{className:"px-2 py-2",children:"Sira"}),a.jsx("th",{className:"px-2 py-2",children:"ID"}),a.jsx("th",{className:"px-2 py-2",children:"Tarih"}),a.jsx("th",{className:"px-2 py-2",children:"Dosya"}),a.jsx("th",{className:"px-2 py-2",children:"Calisan"}),a.jsx("th",{className:"px-2 py-2",children:"Boyut"}),a.jsx("th",{className:"px-2 py-2",children:"Islem"})]})}),a.jsx("tbody",{children:at.map((ie,$e)=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"px-2 py-2 text-slate-500",children:tn+$e}),a.jsx("td",{className:"px-2 py-2",children:ie.id}),a.jsx("td",{className:"px-2 py-2",children:ie.report_date}),a.jsx("td",{className:"px-2 py-2",children:ie.file_name}),a.jsx("td",{className:"px-2 py-2",children:ie.employee_count}),a.jsxs("td",{className:"px-2 py-2",children:[(ie.file_size_bytes/1024).toFixed(1)," KB"]}),a.jsx("td",{className:"px-2 py-2",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{type:"button",className:"rounded border border-brand-300 px-2 py-1 text-xs text-brand-700",onClick:()=>ci.mutate(ie.id),children:"Excel indir"}),a.jsx("button",{type:"button",className:"rounded border border-slate-300 px-2 py-1 text-xs text-slate-700",title:Ye?void 0:"Aktif admin push aboneligi yok",onClick:()=>Ti.mutate(ie.id),disabled:Ti.isPending||!Ye,children:"Adminlere bildir"})]})})]},ie.id))})]})}),!pt.isLoading&&!pt.isError&&He.length===0?a.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Filtreye uygun arsiv kaydi bulunamadi."}):null]})]})}const Al={action:"",entityType:"",entityId:"",success:"all",limit:"300"},PM=[{value:"",label:"Tm aksiyonlar"},{value:"ADMIN_LOGIN_SUCCESS",label:"Admin giri baarl"},{value:"ADMIN_LOGIN_FAIL",label:"Admin giri baarsz"},{value:"ADMIN_REFRESH",label:"Admin token yeniledi"},{value:"ADMIN_LOGOUT",label:"Admin k yapt"},{value:"ATTENDANCE_EVENT_CREATED",label:"Yoklama kayd oluturuldu"},{value:"DEVICE_INVITE_CREATED",label:"Cihaz daveti oluturuldu"},{value:"DEVICE_CLAIMED",label:"Cihaz eletirildi"},{value:"LEAVE_CREATED",label:"zin oluturuldu"},{value:"LEAVE_DELETED",label:"zin silindi"}],IM={ADMIN_LOGIN_SUCCESS:"Admin giri baarl",ADMIN_LOGIN_FAIL:"Admin giri baarsz",ADMIN_REFRESH:"Admin token yeniledi",ADMIN_LOGOUT:"Admin k yapt",ATTENDANCE_EVENT_CREATED:"Yoklama kayd oluturuldu",DEVICE_INVITE_CREATED:"Cihaz daveti oluturuldu",DEVICE_CLAIMED:"Cihaz eletirildi",LEAVE_CREATED:"zin oluturuldu",LEAVE_DELETED:"zin silindi"};function BM(e){return new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"medium"}).format(new Date(e))}function UM(e){return new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(e))}function FM(e){return e?"Baarl":"Hata"}function ZM(e){const i=Object.entries(e);return i.length===0?"-":i.slice(0,3).map(([l,o])=>`${l}: ${String(o)}`).join(" | ")}function qM(e){return IM[e]??e}function HM(e){const i=Number(e.limit),l=Number.isInteger(i)&&i>0?Math.min(i,500):300;return{action:e.action||void 0,entity_type:e.entityType||void 0,entity_id:e.entityId||void 0,success:e.success==="all"?void 0:e.success==="success",limit:l}}function KM(e){const i=`${e.actor_type}:${e.actor_id}`,l=e.entity_type?`${e.entity_type}${e.entity_id?`#${e.entity_id}`:""}`:"-",o=e.ip??"-";return`[${UM(e.ts_utc)}] ${e.action} actor=${i} entity=${l} ip=${o}`}function QM(e){return e==="success"?"text-emerald-300":e==="warning"?"text-amber-300":e==="error"?"text-rose-300":"text-cyan-300"}function GM(){const[e,i]=_.useState(Al),[l,o]=_.useState(Al),[d,h]=_.useState(""),[f,x]=_.useState(!0),[v,b]=_.useState(""),[S,w]=_.useState(null),[T,z]=_.useState([{id:1,level:"info",text:'Log terminali hazr. Yardm iin "help" yazn.'}]),k=_.useRef(2),A=_.useRef(null),M=_.useMemo(()=>HM(l),[l]),I=Be({queryKey:["audit-logs",M],queryFn:()=>bb(M),refetchInterval:f?8e3:!1,refetchIntervalInBackground:!0}),R=I.data??[],D=_.useMemo(()=>{if(!d.trim())return R;const ee=d.trim().toLowerCase();return R.filter(ue=>[ue.action,ue.actor_type,ue.actor_id,ue.entity_type??"",ue.entity_id??"",ue.ip??"",ue.user_agent??"",JSON.stringify(ue.details)].join(" ").toLowerCase().includes(ee))},[R,d]),K=_.useMemo(()=>{if(S!==null){const ee=D.find(ue=>ue.id===S);if(ee)return ee}return D[0]??null},[S,D]),G=_.useMemo(()=>{const ee=R.filter(ne=>!ne.success).length,ue=R.filter(ne=>ne.action.startsWith("ADMIN_LOGIN")).length,_e=R.filter(ne=>ne.action==="ATTENDANCE_EVENT_CREATED").length;return{total:R.length,failed:ee,loginEvents:ue,attendanceEvents:_e}},[R]);_.useEffect(()=>{!K&&S!==null&&w(null)},[K,S]),_.useEffect(()=>{!f||A.current===null||(A.current.scrollTop=A.current.scrollHeight)},[f,D,T]);const V=(ee,ue)=>{z(_e=>{const ne=[..._e,{id:k.current,level:ee,text:ue}];return k.current+=1,ne.slice(-120)})},q=ee=>{ee.preventDefault(),o({...e}),V("success","Filtreler uyguland.")},Q=()=>{i(Al),o(Al),h(""),V("info","Filtreler temizlendi.")},ae=ee=>{const ue=ee.trim();if(!ue)return;V("info",`$ ${ue}`);const[_e,...ne]=ue.split(/\s+/),W=_e.toLowerCase(),B=ue.slice(_e.length).trim();if(W==="help"||W==="yardim"||W==="yardm"){V("info","Komutlar: help, clear, apply, reset, refresh, follow on|off, status all|success|failed, action <AKSIYON>, search <METIN>, limit <N>");return}if(W==="clear"||W==="temizle"){z([]),k.current=1,V("success","Terminal kt gemii temizlendi.");return}if(W==="apply"||W==="uygula"){o({...e}),V("success","Taslak filtreler uyguland.");return}if(W==="reset"||W==="sifirla"||W==="sfrla"){i(Al),o(Al),h(""),V("warning","Filtreler sfrland.");return}if(W==="refresh"||W==="yenile"){I.refetch(),V("success","Log verisi yeniden ekiliyor.");return}if(W==="follow"||W==="takip"){const X=ne[0]?.toLowerCase();if(X==="on"||X==="ac"||X==="a"){x(!0),V("success","Canl takip ald.");return}if(X==="off"||X==="kapat"){x(!1),V("warning","Canl takip kapatld.");return}V("error","Kullanm: follow on|off");return}if(W==="status"||W==="durum"){const X=ne[0]?.toLowerCase();let de=null;if((X==="all"||X==="tum"||X==="tm")&&(de="all"),(X==="success"||X==="ok"||X==="basarili"||X==="baarl")&&(de="success"),(X==="failed"||X==="error"||X==="hata")&&(de="failed"),de===null){V("error","Kullanm: status all|success|failed");return}i(ke=>({...ke,success:de})),o(ke=>({...ke,success:de})),V("success",`Durum filtresi gncellendi: ${de}`);return}if(W==="action"||W==="aksiyon"){if(!B){V("error","Kullanm: action <AKSIYON_KODU>");return}i(X=>({...X,action:B})),o(X=>({...X,action:B})),V("success",`Aksiyon filtresi gncellendi: ${B}`);return}if(W==="search"||W==="ara"){h(B),V("success",B?`Metin aramas uyguland: "${B}"`:"Metin aramas temizlendi.");return}if(W==="limit"){const X=Number(ne[0]);if(!Number.isFinite(X)||X<=0){V("error","Kullanm: limit <1-500>");return}const de=Math.min(Math.max(Math.trunc(X),1),500);i(ke=>({...ke,limit:String(de)})),o(ke=>({...ke,limit:String(de)})),V("success",`Limit gncellendi: ${de}`);return}V("error",`Bilinmeyen komut: ${W}. Yardm iin "help" yazn.`)},ve=ee=>{ee.preventDefault(),ae(v),b("")};return a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"Sistem Loglar",description:"Program hareketleri, hata kaytlar, giri/k ve yoklama ilemlerini terminal grnmnde izleyin."}),a.jsxs(Oe,{children:[a.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Toplam log"}),a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:G.total})]}),a.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2",children:[a.jsx("p",{className:"text-xs text-rose-700",children:"Hata logu"}),a.jsx("p",{className:"text-sm font-semibold text-rose-800",children:G.failed})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Login olaylar"}),a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:G.loginEvents})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Yoklama eventleri"}),a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:G.attendanceEvents})]})]}),a.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{x(ee=>!ee),V("info",f?"Canl takip kapatld.":"Canl takip ald.")},className:`rounded-lg px-3 py-1.5 text-xs font-semibold ${f?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-700"}`,children:f?"Canl takip: Ak":"Canl takip: Kapal"}),a.jsx("button",{type:"button",onClick:()=>{I.refetch(),V("success","Log listesi manuel yenilendi.")},className:"rounded-lg border border-slate-300 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Yenile"}),a.jsx("button",{type:"button",onClick:Q,className:"rounded-lg border border-slate-300 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Filtreleri temizle"})]})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),a.jsxs("form",{className:"mt-3 space-y-3",onSubmit:q,children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-5",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Aksiyon",a.jsx("select",{value:e.action,onChange:ee=>i(ue=>({...ue,action:ee.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:PM.map(ee=>a.jsx("option",{value:ee.value,children:ee.label},ee.label))})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Varlk tr",a.jsx("input",{type:"text",value:e.entityType,onChange:ee=>i(ue=>({...ue,entityType:ee.target.value})),placeholder:"attendance_event / leave",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Varlk ID",a.jsx("input",{type:"text",value:e.entityId,onChange:ee=>i(ue=>({...ue,entityId:ee.target.value})),placeholder:"rn: 42",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Durum",a.jsxs("select",{value:e.success,onChange:ee=>i(ue=>({...ue,success:ee.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"all",children:"Tm"}),a.jsx("option",{value:"success",children:"Baarl"}),a.jsx("option",{value:"failed",children:"Hata"})]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Limit",a.jsx("input",{type:"number",min:1,max:500,value:e.limit,onChange:ee=>i(ue=>({...ue,limit:ee.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-[1fr_auto_auto]",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Metin ara",a.jsx("input",{type:"text",value:d,onChange:ee=>h(ee.target.value),placeholder:"Aksiyon, kullanc, IP, detay...",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsx("button",{type:"submit",className:"btn-primary self-end rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),a.jsx("button",{type:"button",onClick:Q,className:"btn-secondary self-end rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]})]})]}),a.jsxs(Oe,{children:[I.isLoading?a.jsx(Ot,{label:"Log kaytlar ykleniyor..."}):null,I.isError?a.jsx(St,{message:Le(I.error,"Log kaytlar alnamad.").message}):null,!I.isLoading&&!I.isError?a.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_360px]",children:[a.jsxs("section",{className:"overflow-hidden rounded-xl border border-slate-900 bg-[#09131d] text-slate-200 shadow-inner",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-slate-700 bg-slate-900/70 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-rose-400"}),a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-amber-300"}),a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-emerald-400"}),a.jsx("span",{className:"ml-2 text-xs font-semibold text-slate-300",children:"audit-terminal"})]}),a.jsxs("span",{className:"text-[11px] text-slate-400",children:[f?"FOLLOW MODE":"MANUAL MODE","  ",D.length," kayt"]})]}),a.jsx("form",{onSubmit:ve,className:"border-b border-slate-700 bg-slate-900/50 p-2",children:a.jsxs("label",{className:"flex items-center gap-2 text-xs font-mono text-emerald-300",children:[a.jsx("span",{children:"admin@audit:~$"}),a.jsx("input",{value:v,onChange:ee=>b(ee.target.value),placeholder:"help, follow on, status failed, action ATTENDANCE_EVENT_CREATED, search duplicate, limit 200...",className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1.5 font-mono text-xs text-slate-100 placeholder:text-slate-500 focus:border-cyan-400"})]})}),a.jsxs("div",{ref:A,className:"h-[520px] overflow-y-auto px-3 py-2 font-mono text-xs",children:[T.map(ee=>a.jsx("p",{className:`leading-6 ${QM(ee.level)}`,children:ee.text},ee.id)),D.map(ee=>{const ue=K?.id===ee.id;return a.jsxs("button",{type:"button",onClick:()=>w(ee.id),className:`mt-1 block w-full rounded px-2 py-1 text-left leading-6 ${ue?"bg-cyan-900/40 ring-1 ring-cyan-500/40":"hover:bg-slate-800/60"}`,children:[a.jsx("span",{className:ee.success?"text-emerald-300":"text-rose-300",children:ee.success?"[OK]":"[ERR]"})," ",a.jsx("span",{className:"text-slate-200",children:KM(ee)})]},ee.id)}),D.length===0?a.jsx("p",{className:"mt-2 text-amber-300",children:"Filtreye uygun log kayd bulunamad."}):null]})]}),a.jsxs("aside",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[a.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Seili log detay"}),K===null?a.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Listeden bir kayt sein."}):a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Aksiyon"}),a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:qM(K.action)}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:K.action})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-2 text-sm text-slate-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Zaman:"})," ",BM(K.ts_utc)]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Aktr:"})," ",K.actor_type,":",K.actor_id]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Durum:"})," ",FM(K.success)]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Varlk:"})," ",K.entity_type??"-",K.entity_id?` #${K.entity_id}`:""]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"IP:"})," ",K.ip??"-"]}),a.jsxs("p",{className:"break-all",children:[a.jsx("span",{className:"font-semibold",children:"User Agent:"})," ",K.user_agent??"-"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Detay zeti:"})," ",ZM(K.details)]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-xs font-semibold text-slate-600",children:"JSON detay"}),a.jsx("pre",{className:"max-h-64 overflow-auto rounded-lg bg-slate-900 p-2 text-[11px] text-slate-100",children:JSON.stringify(K.details,null,2)})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-2 text-xs text-slate-500",children:[a.jsx("p",{children:"pucu: Satra tklayp detay sa panelden inceleyin."}),a.jsx("p",{className:"mt-1",children:"Komut satr iin: help, follow on/off, status, action, search, limit."})]})]})]})]}):null]})]})}const VM=ka({department_id:_n().int().positive(),daily_minutes_planned:_n().int().nonnegative(),break_minutes:_n().int().nonnegative(),grace_minutes:_n().int().nonnegative()}),YM=ka({department_id:_n().int().positive(),weekday:_n().int().min(0).max(6),is_workday:Ed(),planned_minutes:_n().int().nonnegative(),break_minutes:_n().int().nonnegative()}),$M=ka({department_id:_n().int().positive(),name:In().min(1).max(100),start_time_local:In().regex(/^\d{2}:\d{2}$/),end_time_local:In().regex(/^\d{2}:\d{2}$/),break_minutes:_n().int().nonnegative(),is_active:Ed()}),pv=[{value:0,label:"Pazartesi"},{value:1,label:"Sali"},{value:2,label:"Carsamba"},{value:3,label:"Persembe"},{value:4,label:"Cuma"},{value:5,label:"Cumartesi"},{value:6,label:"Pazar"}],XM=[{value:"DEPARTMENT",label:"Tum departman"},{value:"DEPARTMENT_EXCEPT_EMPLOYEE",label:"Departman (calisan haric)"},{value:"ONLY_EMPLOYEE",label:"Sadece secili calisan"}],JM={DEPARTMENT:"Departman geneli",DEPARTMENT_EXCEPT_EMPLOYEE:"Departman (haric)",ONLY_EMPLOYEE:"Sadece calisan"};function uf(e){const i=e.trim();if(!i)return null;const l=Number(i);return!Number.isFinite(l)||l<0?null:Math.trunc(l)}function WM(e,i){const l=e.target_employee_ids&&e.target_employee_ids.length>0?e.target_employee_ids:e.target_employee_id?[e.target_employee_id]:[];return{id:e.id,department_id:e.department_id,target_type:e.target_type,target_employee_id:l.length>0?l[0]:null,target_employee_ids:l,shift_id:e.shift_id,daily_minutes_planned:e.daily_minutes_planned,break_minutes:e.break_minutes,grace_minutes:e.grace_minutes,start_date:e.start_date,end_date:e.end_date,is_locked:e.is_locked,is_active:i,note:e.note}}function e3(){const e=Un(),{pushToast:i}=Fn(),[l,o]=_.useState(""),[d,h]=_.useState("540"),[f,x]=_.useState("60"),[v,b]=_.useState("5"),[S,w]=_.useState(""),[T,z]=_.useState("0"),[k,A]=_.useState(!0),[M,I]=_.useState("540"),[R,D]=_.useState("60"),[K,G]=_.useState(""),[V,q]=_.useState(""),[Q,ae]=_.useState("10:00"),[ve,ee]=_.useState("18:00"),[ue,_e]=_.useState("60"),[ne,W]=_.useState(!0),[B,X]=_.useState(null),[de,ke]=_.useState(null),[J,O]=_.useState(""),[te,P]=_.useState("DEPARTMENT"),[Z,me]=_.useState([]),[Se,Me]=_.useState(""),[Ze,Ve]=_.useState(""),[qe,Ne]=_.useState(""),[tt,bt]=_.useState(""),[rt,pt]=_.useState(""),[Ut,Dt]=_.useState(new Date().toISOString().slice(0,10)),[mt,rn]=_.useState(new Date().toISOString().slice(0,10)),[se,Ae]=_.useState(!1),[Ke,ce]=_.useState(!0),[Re,ct]=_.useState(""),[be,He]=_.useState(!0),[lt,at]=_.useState(null),tn=Be({queryKey:["departments"],queryFn:Hs}),re=Be({queryKey:["employees","all"],queryFn:()=>ui({status:"all"})}),Y=Be({queryKey:["work-rules"],queryFn:rE}),Ye=Be({queryKey:["department-weekly-rules"],queryFn:()=>xb()}),st=Be({queryKey:["department-shifts"],queryFn:()=>mu()}),Vt=Be({queryKey:["schedule-plans","all"],queryFn:()=>xE({active_only:!1})}),wt=Xe({mutationFn:lE,onSuccess:()=>{at(null),i({variant:"success",title:"Mesai kurali kaydedildi",description:"Departman mesai kurali kaydedildi."}),e.invalidateQueries({queryKey:["work-rules"]})},onError:U=>{const Ie=Le(U,"Mesai kurali kaydedilemedi.");at(Ie.message),i({variant:"error",title:"Mesai kurali kaydedilemedi",description:Ie.message})}}),Mn=Xe({mutationFn:yb,onSuccess:()=>{at(null),i({variant:"success",title:"Haftalik plan kaydedildi",description:"Secilen gun icin departman plani guncellendi."}),e.invalidateQueries({queryKey:["department-weekly-rules"]})},onError:U=>{const Ie=Le(U,"Haftalik plan kaydedilemedi.");at(Ie.message),i({variant:"error",title:"Haftalik plan kaydedilemedi",description:Ie.message})}}),ki=Xe({mutationFn:sd,onSuccess:()=>{at(null),X(null),q(""),ae("10:00"),ee("18:00"),_e("60"),W(!0),i({variant:"success",title:"Vardiya kaydedildi",description:"Departman vardiyasi guncellendi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:U=>{const Ie=Le(U,"Vardiya kaydedilemedi.");at(Ie.message),i({variant:"error",title:"Vardiya kaydedilemedi",description:Ie.message})}}),Ci=Xe({mutationFn:vb,onSuccess:()=>{at(null),B!==null&&(X(null),q(""),ae("10:00"),ee("18:00"),_e("60"),W(!0)),i({variant:"success",title:"Vardiya pasife alindi",description:"Vardiya kaydi pasif duruma getirildi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:U=>{const Ie=Le(U,"Vardiya pasife alinamadi.");at(Ie.message),i({variant:"error",title:"Vardiya pasife alinamadi",description:Ie.message})}}),Zn=Xe({mutationFn:({shift:U,nextActive:Ie})=>sd({id:U.id,department_id:U.department_id,name:U.name,start_time_local:U.start_time_local,end_time_local:U.end_time_local,break_minutes:U.break_minutes,is_active:Ie}),onSuccess:(U,Ie)=>{at(null),i({variant:"success",title:Ie.nextActive?"Vardiya aktif edildi":"Vardiya pasife alindi",description:Ie.nextActive?"Vardiya tekrar kullanilabilir duruma getirildi.":"Vardiya kaydi pasif duruma getirildi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:U=>{const Ie=Le(U,"Vardiya durumu guncellenemedi.");at(Ie.message),i({variant:"error",title:"Vardiya durumu guncellenemedi",description:Ie.message})}}),pa=Xe({mutationFn:Yy,onSuccess:()=>{at(null),i({variant:"success",title:"Planlama kaydedildi",description:"Departman/calisan plani kaydedildi."}),e.invalidateQueries({queryKey:["schedule-plans"]}),ke(null),me([]),Ve(""),Ne(""),bt(""),pt(""),Ae(!1),ce(!0),ct("")},onError:U=>{const Ie=Le(U,"Planlama kaydedilemedi.");at(Ie.message),i({variant:"error",title:"Planlama kaydedilemedi",description:Ie.message})}}),Vn=Xe({mutationFn:yE,onSuccess:()=>{at(null),i({variant:"success",title:"Planlama iptal edildi",description:"Plan pasife alindi."}),e.invalidateQueries({queryKey:["schedule-plans"]})},onError:U=>{const Ie=Le(U,"Planlama iptal edilemedi.");at(Ie.message),i({variant:"error",title:"Planlama iptal edilemedi",description:Ie.message})}}),On=Xe({mutationFn:U=>Yy(WM(U,!0)),onSuccess:()=>{at(null),i({variant:"success",title:"Planlama aktif edildi",description:"Plan tekrar aktif olarak kaydedildi."}),e.invalidateQueries({queryKey:["schedule-plans"]})},onError:U=>{const Ie=Le(U,"Plan aktif edilemedi.");at(Ie.message),i({variant:"error",title:"Plan aktif edilemedi",description:Ie.message})}}),Ca=_.useMemo(()=>{const U=Number(d),Ie=Number(f),Et=Number(v);return{daily:Wc(U),breakValue:Wc(Ie),grace:Wc(Et)}},[d,f,v]);if(tn.isLoading||re.isLoading||Y.isLoading||Ye.isLoading||st.isLoading||Vt.isLoading)return a.jsx(Ot,{});if(tn.isError||re.isError||Y.isError||Ye.isError||st.isError||Vt.isError)return a.jsx(St,{message:"Mesai kurali verileri alinamadi."});const Yn=tn.data??[],ci=re.data??[],Ti=Y.data??[],ie=Ye.data??[],$e=st.data??[],zt=Vt.data??[],Cn=new Map(Yn.map(U=>[U.id,U.name])),Ya=new Map(ci.map(U=>[U.id,U.full_name])),Ai=new Map($e.map(U=>[U.id,U.name])),Nn=zt.filter(U=>be||U.is_active),Ue=Number(J),Gs=Number.isFinite(Ue)?$e.filter(U=>U.department_id===Ue):[],as=Number.isFinite(Ue)?ci.filter(U=>U.department_id===Ue):[],ga=Se.trim()?as.filter(U=>{const Ie=Se.trim().toLowerCase();return U.full_name.toLowerCase().includes(Ie)||String(U.id).includes(Ie.replace("#",""))}):as,ln=()=>{ke(null),P("DEPARTMENT"),me([]),Me(""),Ve(""),Ne(""),bt(""),pt(""),Dt(new Date().toISOString().slice(0,10)),rn(new Date().toISOString().slice(0,10)),Ae(!1),ce(!0),ct("")},gn=U=>{const Ie=U.target_employee_ids&&U.target_employee_ids.length>0?U.target_employee_ids:U.target_employee_id?[U.target_employee_id]:[];ke(U.id),O(String(U.department_id)),P(U.target_type),me(Ie),Me(""),Ve(U.shift_id?String(U.shift_id):""),Ne(U.daily_minutes_planned!==null?String(U.daily_minutes_planned):""),bt(U.break_minutes!==null?String(U.break_minutes):""),pt(U.grace_minutes!==null?String(U.grace_minutes):""),Dt(U.start_date),rn(U.end_date),Ae(U.is_locked),ce(U.is_active),ct(U.note??"")},$a=U=>{U.preventDefault(),at(null);const Ie=VM.safeParse({department_id:l,daily_minutes_planned:d,break_minutes:f,grace_minutes:v});if(!Ie.success){const Et=Ie.error.issues[0]?.message??"Mesai kurali formunu kontrol edin.";at(Et),i({variant:"error",title:"Form hatasi",description:Et});return}wt.mutate(Ie.data)},Ta=U=>{U.preventDefault(),at(null);const Ie=YM.safeParse({department_id:S,weekday:T,is_workday:k,planned_minutes:M,break_minutes:R});if(!Ie.success){const Et=Ie.error.issues[0]?.message??"Haftalik plan formunu kontrol edin.";at(Et),i({variant:"error",title:"Form hatasi",description:Et});return}Mn.mutate(Ie.data)},Ur=U=>{U.preventDefault(),at(null);const Ie=$M.safeParse({department_id:K,name:V.trim(),start_time_local:Q,end_time_local:ve,break_minutes:ue,is_active:ne});if(!Ie.success){const Et=Ie.error.issues[0]?.message??"Vardiya formunu kontrol edin.";at(Et),i({variant:"error",title:"Form hatasi",description:Et});return}ki.mutate({id:B??void 0,...Ie.data})},Zl=U=>{X(U.id),G(String(U.department_id)),q(U.name),ae(U.start_time_local),ee(U.end_time_local),_e(String(U.break_minutes)),W(U.is_active),at(null)},Fr=()=>{X(null),q(""),ae("10:00"),ee("18:00"),_e("60"),W(!0),at(null)},zi=U=>{U.preventDefault(),at(null);const Ie=Number(J);if(!Number.isFinite(Ie)||Ie<=0){at("Planlama icin departman secmelisiniz.");return}if(!Ut||!mt){at("Baslangic ve bitis tarihi zorunludur.");return}if(Ut>mt){at("Baslangic tarihi bitis tarihinden buyuk olamaz.");return}const Et=te==="DEPARTMENT"?[]:[...Z];if(te!=="DEPARTMENT"&&Et.length===0){at("Secilen hedef tipi icin en az bir calisan secmelisiniz.");return}const qn=Ze?Number(Ze):null,Xa=uf(qe),nn=uf(tt),Vs=uf(rt);if(!qn&&Xa===null&&nn===null&&Vs===null){at("En az bir plan degeri girmelisiniz (vardiya veya dakika alanlari).");return}pa.mutate({id:de??void 0,department_id:Ie,target_type:te,target_employee_id:Et.length>0?Et[0]:null,target_employee_ids:Et,shift_id:qn,daily_minutes_planned:Xa,break_minutes:nn,grace_minutes:Vs,start_date:Ut,end_date:mt,is_locked:se,is_active:Ke,note:Re.trim()||null})};return a.jsxs("div",{className:"space-y-4",children:[a.jsx(kn,{title:"Mesai Kurallari",description:"Departman bazinda gunluk plan, haftalik gun davranisi ve coklu vardiya tanimlarini yonetin."}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Temel Departman Kurali"}),a.jsxs("form",{onSubmit:$a,className:"mt-3 grid gap-3 md:grid-cols-4",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",a.jsxs("select",{value:l,onChange:U=>o(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Seciniz"}),Yn.map(U=>a.jsx("option",{value:U.id,children:U.name},U.id))]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Planlanan Gunluk Dakika",a.jsx("input",{value:d,onChange:U=>h(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakikasi",a.jsx("input",{value:f,onChange:U=>x(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Gecikme Toleransi (Dakika)",a.jsx("input",{value:v,onChange:U=>b(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("div",{className:"md:col-span-4 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:["Onizleme: Planlanan ",Ca.daily," | Mola ",Ca.breakValue," | Tolerans ",Ca.grace]}),a.jsx("div",{className:"md:col-span-4",children:a.jsx("button",{type:"submit",disabled:wt.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:wt.isPending?"Kaydediliyor...":"Kurali Kaydet"})})]})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Haftalik Gun Plani"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ornek: Cumartesi 5 saat, Pazar calisma yok gibi farkli gun davranislarini buradan tanimlayin."}),a.jsxs("form",{onSubmit:Ta,className:"mt-3 grid gap-3 md:grid-cols-5",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",a.jsxs("select",{value:S,onChange:U=>w(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Seciniz"}),Yn.map(U=>a.jsx("option",{value:U.id,children:U.name},U.id))]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Gun",a.jsx("select",{value:T,onChange:U=>z(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:pv.map(U=>a.jsx("option",{value:U.value,children:U.label},U.value))})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Planlanan Dakika",a.jsx("input",{value:M,onChange:U=>I(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakikasi",a.jsx("input",{value:R,onChange:U=>D(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:k,onChange:U=>A(U.target.checked)}),"Calisma Gunu"]}),a.jsx("div",{className:"md:col-span-5",children:a.jsx("button",{type:"submit",disabled:Mn.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Mn.isPending?"Kaydediliyor...":"Gunu Kaydet"})})]}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Departman"}),a.jsx("th",{className:"py-2",children:"Gun"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2",children:"Planlanan Sure"}),a.jsx("th",{className:"py-2",children:"Mola"})]})}),a.jsx("tbody",{children:ie.map(U=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:Cn.get(U.department_id)??U.department_id}),a.jsx("td",{className:"py-2",children:pv.find(Ie=>Ie.value===U.weekday)?.label??U.weekday}),a.jsx("td",{className:"py-2",children:U.is_workday?"Calisma":"Off"}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:U.planned_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:U.break_minutes})})]},U.id))})]})})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Departman Vardiyalari"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ornek: Stant icin 10:00-18:00 ve 14:00-22:00 vardiyalarini ayri ayri tanimlayabilirsiniz."}),B?a.jsxs("p",{className:"mt-2 text-xs font-medium text-brand-700",children:["Duzenleme modu: #",B]}):null,a.jsxs("form",{onSubmit:Ur,className:"mt-3 grid gap-3 md:grid-cols-6",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",a.jsxs("select",{value:K,onChange:U=>G(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Seciniz"}),Yn.map(U=>a.jsx("option",{value:U.id,children:U.name},U.id))]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya Adi",a.jsx("input",{value:V,onChange:U=>q(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Sabah 10-18"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Baslangic",a.jsx("input",{type:"time",value:Q,onChange:U=>ae(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Bitis",a.jsx("input",{type:"time",value:ve,onChange:U=>ee(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakikasi",a.jsx("input",{value:ue,onChange:U=>_e(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:ne,onChange:U=>W(U.target.checked)}),"Aktif"]}),a.jsx("div",{className:"md:col-span-6",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("button",{type:"submit",disabled:ki.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:ki.isPending?"Kaydediliyor...":B?"Vardiya Guncelle":"Vardiya Kaydet"}),B?a.jsx("button",{type:"button",onClick:Fr,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100",children:"Vazgec"}):null]})})]}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Departman"}),a.jsx("th",{className:"py-2",children:"Vardiya"}),a.jsx("th",{className:"py-2",children:"Saat"}),a.jsx("th",{className:"py-2",children:"Mola"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2 text-right",children:"Aksiyon"})]})}),a.jsx("tbody",{children:$e.map(U=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:Cn.get(U.department_id)??U.department_id}),a.jsx("td",{className:"py-2",children:U.name}),a.jsxs("td",{className:"py-2",children:[U.start_time_local," - ",U.end_time_local]}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:U.break_minutes})}),a.jsx("td",{className:"py-2",children:U.is_active?"Aktif":"Pasif"}),a.jsx("td",{className:"py-2 text-right",children:a.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>Zl(U),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Duzenle"}),U.is_active?a.jsx("button",{type:"button",disabled:Ci.isPending||Zn.isPending,onClick:()=>{window.confirm("Bu vardiya pasife alinsin mi?")&&Ci.mutate(U.id)},className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:"Pasife Al"}):a.jsx("button",{type:"button",disabled:Zn.isPending||Ci.isPending,onClick:()=>Zn.mutate({shift:U,nextActive:!0}),className:"rounded-lg border border-emerald-300 px-3 py-1 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:"Aktif Et"})]})})]},U.id))})]})})]}),a.jsxs(Oe,{children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Ileri Planlama (Departman/Calisan)"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Gelecek tarihli vardiya ve sure kurali tanimlayin. Planlar duzenlenebilir, iptal edilebilir, tekrar aktif edilebilir."})]}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:be,onChange:U=>He(U.target.checked)}),"Pasif planlari goster"]})]}),a.jsxs("form",{onSubmit:zi,className:"mt-4 grid gap-3 md:grid-cols-4",children:[a.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",a.jsxs("select",{value:J,onChange:U=>{O(U.target.value),me([]),Ve("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Seciniz"}),Yn.map(U=>a.jsx("option",{value:U.id,children:U.name},U.id))]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Hedef Tipi",a.jsx("select",{value:te,onChange:U=>{const Ie=U.target.value;P(Ie),Ie==="DEPARTMENT"&&me([])},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:XM.map(U=>a.jsx("option",{value:U.value,children:U.label},U.value))})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Calisanlar (gerekliyse)",a.jsx("input",{type:"text",value:Se,onChange:U=>Me(U.target.value),disabled:te==="DEPARTMENT",placeholder:"Calisan adi veya ID ile ara...",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 disabled:bg-slate-100"}),a.jsx("select",{multiple:!0,value:Z.map(String),onChange:U=>{const Ie=Array.from(U.target.selectedOptions).map(Et=>Number(Et.value));me(Ie.filter(Et=>Number.isFinite(Et)&&Et>0))},disabled:te==="DEPARTMENT",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 disabled:bg-slate-100",children:ga.map(U=>a.jsxs("option",{value:U.id,children:["#",U.id," - ",U.full_name]},U.id))}),a.jsx("span",{className:"mt-1 block text-xs text-slate-500",children:"Ctrl/Cmd ile birden fazla calisan secilebilir. Binlerce kayitta once arama yapin."})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya (opsiyonel)",a.jsxs("select",{value:Ze,onChange:U=>Ve(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[a.jsx("option",{value:"",children:"Seciniz"}),Gs.map(U=>a.jsxs("option",{value:U.id,children:[U.name," (",U.start_time_local," - ",U.end_time_local,")"]},U.id))]})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Gunluk Dakika (ops.)",a.jsx("input",{value:qe,onChange:U=>Ne(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakika (ops.)",a.jsx("input",{value:tt,onChange:U=>bt(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Tolerans Dakika (ops.)",a.jsx("input",{value:rt,onChange:U=>pt(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Baslangic Tarihi",a.jsx("input",{type:"date",value:Ut,onChange:U=>Dt(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"text-sm text-slate-700",children:["Bitis Tarihi",a.jsx("input",{type:"date",value:mt,onChange:U=>rn(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:se,onChange:U=>Ae(U.target.checked)}),"Vardiya kilitli"]}),a.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:Ke,onChange:U=>ce(U.target.checked)}),"Aktif"]}),a.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Not",a.jsx("input",{value:Re,onChange:U=>ct(U.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),a.jsxs("div",{className:"md:col-span-4 flex flex-wrap gap-2",children:[a.jsx("button",{type:"submit",disabled:pa.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:pa.isPending?"Kaydediliyor...":de?"Plani Guncelle":"Plan Olustur"}),a.jsx("button",{type:"button",onClick:ln,className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Formu Temizle"})]})]}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Departman"}),a.jsx("th",{className:"py-2",children:"Hedef"}),a.jsx("th",{className:"py-2",children:"Vardiya"}),a.jsx("th",{className:"py-2",children:"Plan/Mola"}),a.jsx("th",{className:"py-2",children:"Tarih Araligi"}),a.jsx("th",{className:"py-2",children:"Kilit"}),a.jsx("th",{className:"py-2",children:"Durum"}),a.jsx("th",{className:"py-2",children:"Aksiyon"})]})}),a.jsx("tbody",{children:Nn.map(U=>{const Et=(U.target_employee_ids&&U.target_employee_ids.length>0?U.target_employee_ids:U.target_employee_id?[U.target_employee_id]:[]).map(qn=>Ya.get(qn)??`#${qn}`);return a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:Cn.get(U.department_id)??U.department_id}),a.jsx("td",{className:"py-2",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:JM[U.target_type]}),Et.length>0?a.jsx("span",{className:"text-xs text-slate-500",children:Et.join(", ")}):null]})}),a.jsx("td",{className:"py-2",children:U.shift_id?Ai.get(U.shift_id)??`#${U.shift_id}`:"-"}),a.jsxs("td",{className:"py-2 text-xs text-slate-700",children:[a.jsxs("div",{children:["Plan: ",U.daily_minutes_planned!==null?`${U.daily_minutes_planned} dk`:"-"]}),a.jsxs("div",{children:["Mola: ",U.break_minutes!==null?`${U.break_minutes} dk`:"-"]}),a.jsxs("div",{children:["Tolerans: ",U.grace_minutes!==null?`${U.grace_minutes} dk`:"-"]})]}),a.jsxs("td",{className:"py-2",children:[U.start_date," - ",U.end_date]}),a.jsx("td",{className:"py-2",children:U.is_locked?"Kilitli":"Serbest"}),a.jsx("td",{className:"py-2",children:U.is_active?"Aktif":"Pasif"}),a.jsx("td",{className:"py-2",children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{type:"button",onClick:()=>gn(U),className:"rounded-lg border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:"Duzenle"}),U.is_active?a.jsx("button",{type:"button",onClick:()=>Vn.mutate(U.id),disabled:Vn.isPending,className:"rounded-lg border border-rose-300 px-2 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:"Iptal Et"}):a.jsx("button",{type:"button",onClick:()=>On.mutate(U),disabled:On.isPending,className:"rounded-lg border border-emerald-300 px-2 py-1 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:"Aktif Et"})]})})]},U.id)})})]})})]}),a.jsxs(Oe,{children:[a.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Mevcut Temel Kurallar"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-left text-sm",children:[a.jsx("thead",{className:"text-xs uppercase text-slate-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2",children:"Departman"}),a.jsx("th",{className:"py-2",children:"Planlanan Gunluk Sure"}),a.jsx("th",{className:"py-2",children:"Mola Suresi"}),a.jsx("th",{className:"py-2",children:"Tolerans"})]})}),a.jsx("tbody",{children:Ti.map(U=>a.jsxs("tr",{className:"border-t border-slate-100",children:[a.jsx("td",{className:"py-2",children:Cn.get(U.department_id)??U.department_id}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:U.daily_minutes_planned})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:U.break_minutes})}),a.jsx("td",{className:"py-2",children:a.jsx(Pe,{minutes:U.grace_minutes})})]},U.id))})]})})]}),lt?a.jsx("p",{className:"form-validation",children:lt}):null]})}function t3(){return a.jsxs(jS,{children:[a.jsx(It,{element:a.jsx(s1,{}),children:a.jsx(It,{path:"/login",element:a.jsx(xM,{})})}),a.jsx(It,{path:"/device-claim",element:a.jsx(l1,{})}),a.jsx(It,{path:"/archive-download",element:a.jsx(vz,{})}),a.jsx(It,{path:"/attendance-extra-checkin-approval",element:a.jsx(jz,{})}),a.jsx(It,{element:a.jsx(i1,{}),children:a.jsxs(It,{element:a.jsx(a1,{}),children:[a.jsx(It,{path:"/",element:a.jsx(Hf,{to:"/dashboard",replace:!0})}),a.jsx(It,{path:"/management-console",element:a.jsx(NM,{})}),a.jsx(It,{path:"/dashboard",element:a.jsx(uz,{})}),a.jsx(It,{path:"/regions",element:a.jsx(zM,{})}),a.jsx(It,{path:"/departments",element:a.jsx(mz,{})}),a.jsx(It,{path:"/employees",element:a.jsx(mM,{})}),a.jsx(It,{path:"/employees/:id",element:a.jsx(sM,{})}),a.jsx(It,{path:"/quick-setup",element:a.jsx(AM,{})}),a.jsx(It,{path:"/work-rules",element:a.jsx(e3,{})}),a.jsx(It,{path:"/attendance-events",element:a.jsx(S1,{})}),a.jsx(It,{path:"/devices",element:a.jsx(fz,{})}),a.jsx(It,{path:"/compliance-settings",element:a.jsx(pz,{})}),a.jsx(It,{path:"/leaves",element:a.jsx(fM,{})}),a.jsx(It,{path:"/qr-kodlar",element:a.jsx(TM,{})}),a.jsx(It,{path:"/reports/employee-monthly",element:a.jsx(cM,{})}),a.jsx(It,{path:"/reports/department-summary",element:a.jsx(dz,{})}),a.jsx(It,{path:"/reports/excel-export",element:a.jsx(SM,{})}),a.jsx(It,{path:"/notifications",element:a.jsx(LM,{})}),a.jsx(It,{path:"/audit-logs",element:a.jsx(GM,{})}),a.jsx(It,{path:"/admin-users",element:a.jsx(Yz,{})})]})}),a.jsx(It,{path:"*",element:a.jsx(jM,{})})]})}const n3=new dj({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});FN.createRoot(document.getElementById("root")).render(a.jsx(ON.StrictMode,{children:a.jsx(mj,{client:n3,children:a.jsx(VS,{basename:"/admin-panel/",children:a.jsx(p1,{children:a.jsx(e1,{children:a.jsx(t3,{})})})})})}));typeof window<"u"&&"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"}).catch(()=>{})});
