(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const f of m.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function l(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(d){if(d.ep)return;d.ep=!0;const m=l(d);fetch(d.href,m)}})();function Nd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wh={exports:{}},Vo={};var vy;function VN(){if(vy)return Vo;vy=1;var e=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function l(o,d,m){var f=null;if(m!==void 0&&(f=""+m),d.key!==void 0&&(f=""+d.key),"key"in d){m={};for(var g in d)g!=="key"&&(m[g]=d[g])}else m=d;return d=m.ref,{$$typeof:e,type:o,key:f,ref:d!==void 0?d:null,props:m}}return Vo.Fragment=s,Vo.jsx=l,Vo.jsxs=l,Vo}var by;function $N(){return by||(by=1,wh.exports=VN()),wh.exports}var n=$N(),kh={exports:{}},ft={};var _y;function YN(){if(_y)return ft;_y=1;var e=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),E=Symbol.iterator;function R(z){return z===null||typeof z!="object"?null:(z=E&&z[E]||z["@@iterator"],typeof z=="function"?z:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,O={};function q(z,ne,I){this.props=z,this.context=ne,this.refs=O,this.updater=I||T}q.prototype.isReactComponent={},q.prototype.setState=function(z,ne){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ne,"setState")},q.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function U(){}U.prototype=q.prototype;function D(z,ne,I){this.props=z,this.context=ne,this.refs=O,this.updater=I||T}var G=D.prototype=new U;G.constructor=D,A(G,q.prototype),G.isPureReactComponent=!0;var Y=Array.isArray;function ee(){}var H={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function J(z,ne,I){var ce=I.ref;return{$$typeof:e,type:z,key:ne,ref:ce!==void 0?ce:null,props:I}}function fe(z,ne){return J(z.type,ne,z.props)}function ye(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function de(z){var ne={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(I){return ne[I]})}var Se=/\/+/g;function oe(z,ne){return typeof z=="object"&&z!==null&&z.key!=null?de(""+z.key):ne.toString(36)}function le(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(ee,ee):(z.status="pending",z.then(function(ne){z.status==="pending"&&(z.status="fulfilled",z.value=ne)},function(ne){z.status==="pending"&&(z.status="rejected",z.reason=ne)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Q(z,ne,I,ce,ue){var Ne=typeof z;(Ne==="undefined"||Ne==="boolean")&&(z=null);var Re=!1;if(z===null)Re=!0;else switch(Ne){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(z.$$typeof){case e:case s:Re=!0;break;case S:return Re=z._init,Q(Re(z._payload),ne,I,ce,ue)}}if(Re)return ue=ue(z),Re=ce===""?"."+oe(z,0):ce,Y(ue)?(I="",Re!=null&&(I=Re.replace(Se,"$&/")+"/"),Q(ue,ne,I,"",function(Ge){return Ge})):ue!=null&&(ye(ue)&&(ue=fe(ue,I+(ue.key==null||z&&z.key===ue.key?"":(""+ue.key).replace(Se,"$&/")+"/")+Re)),ne.push(ue)),1;Re=0;var Le=ce===""?".":ce+":";if(Y(z))for(var me=0;me<z.length;me++)ce=z[me],Ne=Le+oe(ce,me),Re+=Q(ce,ne,I,Ne,ue);else if(me=R(z),typeof me=="function")for(z=me.call(z),me=0;!(ce=z.next()).done;)ce=ce.value,Ne=Le+oe(ce,me++),Re+=Q(ce,ne,I,Ne,ue);else if(Ne==="object"){if(typeof z.then=="function")return Q(le(z),ne,I,ce,ue);throw ne=String(z),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Re}function K(z,ne,I){if(z==null)return z;var ce=[],ue=0;return Q(z,ce,"","",function(Ne){return ne.call(I,Ne,ue++)}),ce}function X(z){if(z._status===-1){var ne=z._result;ne=ne(),ne.then(function(I){(z._status===0||z._status===-1)&&(z._status=1,z._result=I)},function(I){(z._status===0||z._status===-1)&&(z._status=2,z._result=I)}),z._status===-1&&(z._status=0,z._result=ne)}if(z._status===1)return z._result.default;throw z._result}var ke=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},je={map:K,forEach:function(z,ne,I){K(z,function(){ne.apply(this,arguments)},I)},count:function(z){var ne=0;return K(z,function(){ne++}),ne},toArray:function(z){return K(z,function(ne){return ne})||[]},only:function(z){if(!ye(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return ft.Activity=w,ft.Children=je,ft.Component=q,ft.Fragment=l,ft.Profiler=d,ft.PureComponent=D,ft.StrictMode=o,ft.Suspense=v,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,ft.__COMPILER_RUNTIME={__proto__:null,c:function(z){return H.H.useMemoCache(z)}},ft.cache=function(z){return function(){return z.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function(z,ne,I){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ce=A({},z.props),ue=z.key;if(ne!=null)for(Ne in ne.key!==void 0&&(ue=""+ne.key),ne)!te.call(ne,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&ne.ref===void 0||(ce[Ne]=ne[Ne]);var Ne=arguments.length-2;if(Ne===1)ce.children=I;else if(1<Ne){for(var Re=Array(Ne),Le=0;Le<Ne;Le++)Re[Le]=arguments[Le+2];ce.children=Re}return J(z.type,ue,ce)},ft.createContext=function(z){return z={$$typeof:f,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:m,_context:z},z},ft.createElement=function(z,ne,I){var ce,ue={},Ne=null;if(ne!=null)for(ce in ne.key!==void 0&&(Ne=""+ne.key),ne)te.call(ne,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ue[ce]=ne[ce]);var Re=arguments.length-2;if(Re===1)ue.children=I;else if(1<Re){for(var Le=Array(Re),me=0;me<Re;me++)Le[me]=arguments[me+2];ue.children=Le}if(z&&z.defaultProps)for(ce in Re=z.defaultProps,Re)ue[ce]===void 0&&(ue[ce]=Re[ce]);return J(z,Ne,ue)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(z){return{$$typeof:g,render:z}},ft.isValidElement=ye,ft.lazy=function(z){return{$$typeof:S,_payload:{_status:-1,_result:z},_init:X}},ft.memo=function(z,ne){return{$$typeof:_,type:z,compare:ne===void 0?null:ne}},ft.startTransition=function(z){var ne=H.T,I={};H.T=I;try{var ce=z(),ue=H.S;ue!==null&&ue(I,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ee,ke)}catch(Ne){ke(Ne)}finally{ne!==null&&I.types!==null&&(ne.types=I.types),H.T=ne}},ft.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},ft.use=function(z){return H.H.use(z)},ft.useActionState=function(z,ne,I){return H.H.useActionState(z,ne,I)},ft.useCallback=function(z,ne){return H.H.useCallback(z,ne)},ft.useContext=function(z){return H.H.useContext(z)},ft.useDebugValue=function(){},ft.useDeferredValue=function(z,ne){return H.H.useDeferredValue(z,ne)},ft.useEffect=function(z,ne){return H.H.useEffect(z,ne)},ft.useEffectEvent=function(z){return H.H.useEffectEvent(z)},ft.useId=function(){return H.H.useId()},ft.useImperativeHandle=function(z,ne,I){return H.H.useImperativeHandle(z,ne,I)},ft.useInsertionEffect=function(z,ne){return H.H.useInsertionEffect(z,ne)},ft.useLayoutEffect=function(z,ne){return H.H.useLayoutEffect(z,ne)},ft.useMemo=function(z,ne){return H.H.useMemo(z,ne)},ft.useOptimistic=function(z,ne){return H.H.useOptimistic(z,ne)},ft.useReducer=function(z,ne,I){return H.H.useReducer(z,ne,I)},ft.useRef=function(z){return H.H.useRef(z)},ft.useState=function(z){return H.H.useState(z)},ft.useSyncExternalStore=function(z,ne,I){return H.H.useSyncExternalStore(z,ne,I)},ft.useTransition=function(){return H.H.useTransition()},ft.version="19.2.4",ft}var Ny;function Gf(){return Ny||(Ny=1,kh.exports=YN()),kh.exports}var b=Gf();const JN=Nd(b);var Eh={exports:{}},$o={},Th={exports:{}},Ch={};var jy;function XN(){return jy||(jy=1,(function(e){function s(Q,K){var X=Q.length;Q.push(K);e:for(;0<X;){var ke=X-1>>>1,je=Q[ke];if(0<d(je,K))Q[ke]=K,Q[X]=je,X=ke;else break e}}function l(Q){return Q.length===0?null:Q[0]}function o(Q){if(Q.length===0)return null;var K=Q[0],X=Q.pop();if(X!==K){Q[0]=X;e:for(var ke=0,je=Q.length,z=je>>>1;ke<z;){var ne=2*(ke+1)-1,I=Q[ne],ce=ne+1,ue=Q[ce];if(0>d(I,X))ce<je&&0>d(ue,I)?(Q[ke]=ue,Q[ce]=X,ke=ce):(Q[ke]=I,Q[ne]=X,ke=ne);else if(ce<je&&0>d(ue,X))Q[ke]=ue,Q[ce]=X,ke=ce;else break e}}return K}function d(Q,K){var X=Q.sortIndex-K.sortIndex;return X!==0?X:Q.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;e.unstable_now=function(){return m.now()}}else{var f=Date,g=f.now();e.unstable_now=function(){return f.now()-g}}var v=[],_=[],S=1,w=null,E=3,R=!1,T=!1,A=!1,O=!1,q=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function G(Q){for(var K=l(_);K!==null;){if(K.callback===null)o(_);else if(K.startTime<=Q)o(_),K.sortIndex=K.expirationTime,s(v,K);else break;K=l(_)}}function Y(Q){if(A=!1,G(Q),!T)if(l(v)!==null)T=!0,ee||(ee=!0,de());else{var K=l(_);K!==null&&le(Y,K.startTime-Q)}}var ee=!1,H=-1,te=5,J=-1;function fe(){return O?!0:!(e.unstable_now()-J<te)}function ye(){if(O=!1,ee){var Q=e.unstable_now();J=Q;var K=!0;try{e:{T=!1,A&&(A=!1,U(H),H=-1),R=!0;var X=E;try{t:{for(G(Q),w=l(v);w!==null&&!(w.expirationTime>Q&&fe());){var ke=w.callback;if(typeof ke=="function"){w.callback=null,E=w.priorityLevel;var je=ke(w.expirationTime<=Q);if(Q=e.unstable_now(),typeof je=="function"){w.callback=je,G(Q),K=!0;break t}w===l(v)&&o(v),G(Q)}else o(v);w=l(v)}if(w!==null)K=!0;else{var z=l(_);z!==null&&le(Y,z.startTime-Q),K=!1}}break e}finally{w=null,E=X,R=!1}K=void 0}}finally{K?de():ee=!1}}}var de;if(typeof D=="function")de=function(){D(ye)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,oe=Se.port2;Se.port1.onmessage=ye,de=function(){oe.postMessage(null)}}else de=function(){q(ye,0)};function le(Q,K){H=q(function(){Q(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_next=function(Q){switch(E){case 1:case 2:case 3:var K=3;break;default:K=E}var X=E;E=K;try{return Q()}finally{E=X}},e.unstable_requestPaint=function(){O=!0},e.unstable_runWithPriority=function(Q,K){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var X=E;E=Q;try{return K()}finally{E=X}},e.unstable_scheduleCallback=function(Q,K,X){var ke=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ke+X:ke):X=ke,Q){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=X+je,Q={id:S++,callback:K,priorityLevel:Q,startTime:X,expirationTime:je,sortIndex:-1},X>ke?(Q.sortIndex=X,s(_,Q),l(v)===null&&Q===l(_)&&(A?(U(H),H=-1):A=!0,le(Y,X-ke))):(Q.sortIndex=je,s(v,Q),T||R||(T=!0,ee||(ee=!0,de()))),Q},e.unstable_shouldYield=fe,e.unstable_wrapCallback=function(Q){var K=E;return function(){var X=E;E=K;try{return Q.apply(this,arguments)}finally{E=X}}}})(Ch)),Ch}var Sy;function WN(){return Sy||(Sy=1,Th.exports=XN()),Th.exports}var Ah={exports:{}},xa={};var wy;function ej(){if(wy)return xa;wy=1;var e=Gf();function s(v){var _="https://react.dev/errors/"+v;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var o={d:{f:l,r:function(){throw Error(s(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},d=Symbol.for("react.portal");function m(v,_,S){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:w==null?null:""+w,children:v,containerInfo:_,implementation:S}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,_){if(v==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return xa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,xa.createPortal=function(v,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(s(299));return m(v,_,null,S)},xa.flushSync=function(v){var _=f.T,S=o.p;try{if(f.T=null,o.p=2,v)return v()}finally{f.T=_,o.p=S,o.d.f()}},xa.preconnect=function(v,_){typeof v=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,o.d.C(v,_))},xa.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},xa.preinit=function(v,_){if(typeof v=="string"&&_&&typeof _.as=="string"){var S=_.as,w=g(S,_.crossOrigin),E=typeof _.integrity=="string"?_.integrity:void 0,R=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?o.d.S(v,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:w,integrity:E,fetchPriority:R}):S==="script"&&o.d.X(v,{crossOrigin:w,integrity:E,fetchPriority:R,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},xa.preinitModule=function(v,_){if(typeof v=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=g(_.as,_.crossOrigin);o.d.M(v,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&o.d.M(v)},xa.preload=function(v,_){if(typeof v=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,w=g(S,_.crossOrigin);o.d.L(v,S,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},xa.preloadModule=function(v,_){if(typeof v=="string")if(_){var S=g(_.as,_.crossOrigin);o.d.m(v,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else o.d.m(v)},xa.requestFormReset=function(v){o.d.r(v)},xa.unstable_batchedUpdates=function(v,_){return v(_)},xa.useFormState=function(v,_,S){return f.H.useFormState(v,_,S)},xa.useFormStatus=function(){return f.H.useHostTransitionStatus()},xa.version="19.2.4",xa}var ky;function tj(){if(ky)return Ah.exports;ky=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(s){console.error(s)}}return e(),Ah.exports=ej(),Ah.exports}var Ey;function nj(){if(Ey)return $o;Ey=1;var e=WN(),s=Gf(),l=tj();function o(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var a=t,r=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(r=a.return),t=a.return;while(t)}return a.tag===3?r:null}function f(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function v(t){if(m(t)!==t)throw Error(o(188))}function _(t){var a=t.alternate;if(!a){if(a=m(t),a===null)throw Error(o(188));return a!==t?null:t}for(var r=t,c=a;;){var p=r.return;if(p===null)break;var x=p.alternate;if(x===null){if(c=p.return,c!==null){r=c;continue}break}if(p.child===x.child){for(x=p.child;x;){if(x===r)return v(p),t;if(x===c)return v(p),a;x=x.sibling}throw Error(o(188))}if(r.return!==c.return)r=p,c=x;else{for(var j=!1,C=p.child;C;){if(C===r){j=!0,r=p,c=x;break}if(C===c){j=!0,c=p,r=x;break}C=C.sibling}if(!j){for(C=x.child;C;){if(C===r){j=!0,r=x,c=p;break}if(C===c){j=!0,c=x,r=p;break}C=C.sibling}if(!j)throw Error(o(189))}}if(r.alternate!==c)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?t:a}function S(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=S(t),a!==null)return a;t=t.sibling}return null}var w=Object.assign,E=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),D=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),fe=Symbol.for("react.memo_cache_sentinel"),ye=Symbol.iterator;function de(t){return t===null||typeof t!="object"?null:(t=ye&&t[ye]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Symbol.for("react.client.reference");function oe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Se?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case A:return"Fragment";case q:return"Profiler";case O:return"StrictMode";case Y:return"Suspense";case ee:return"SuspenseList";case J:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case T:return"Portal";case D:return t.displayName||"Context";case U:return(t._context.displayName||"Context")+".Consumer";case G:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case H:return a=t.displayName||null,a!==null?a:oe(t.type)||"Memo";case te:a=t._payload,t=t._init;try{return oe(t(a))}catch{}}return null}var le=Array.isArray,Q=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ke=[],je=-1;function z(t){return{current:t}}function ne(t){0>je||(t.current=ke[je],ke[je]=null,je--)}function I(t,a){je++,ke[je]=t.current,t.current=a}var ce=z(null),ue=z(null),Ne=z(null),Re=z(null);function Le(t,a){switch(I(Ne,a),I(ue,t),I(ce,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?qg(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=qg(a),t=Zg(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ne(ce),I(ce,t)}function me(){ne(ce),ne(ue),ne(Ne)}function Ge(t){t.memoizedState!==null&&I(Re,t);var a=ce.current,r=Zg(a,t.type);a!==r&&(I(ue,t),I(ce,r))}function Ye(t){ue.current===t&&(ne(ce),ne(ue)),Re.current===t&&(ne(Re),Ho._currentValue=X)}var Tt,ht;function M(t){if(Tt===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);Tt=a&&a[1]||"",ht=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tt+t+ht}var Oe=!1;function mt(t,a){if(!t||Oe)return"";Oe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var Me=function(){throw Error()};if(Object.defineProperty(Me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Me,[])}catch(ve){var ge=ve}Reflect.construct(t,[],Me)}else{try{Me.call()}catch(ve){ge=ve}t.call(Me.prototype)}}else{try{throw Error()}catch(ve){ge=ve}(Me=t())&&typeof Me.catch=="function"&&Me.catch(function(){})}}catch(ve){if(ve&&ge&&typeof ve.stack=="string")return[ve.stack,ge.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=c.DetermineComponentFrameRoot(),j=x[0],C=x[1];if(j&&C){var V=j.split(`
`),pe=C.split(`
`);for(p=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;p<pe.length&&!pe[p].includes("DetermineComponentFrameRoot");)p++;if(c===V.length||p===pe.length)for(c=V.length-1,p=pe.length-1;1<=c&&0<=p&&V[c]!==pe[p];)p--;for(;1<=c&&0<=p;c--,p--)if(V[c]!==pe[p]){if(c!==1||p!==1)do if(c--,p--,0>p||V[c]!==pe[p]){var we=`
`+V[c].replace(" at new "," at ");return t.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",t.displayName)),we}while(1<=c&&0<=p);break}}}finally{Oe=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?M(r):""}function Rt(t,a){switch(t.tag){case 26:case 27:case 5:return M(t.type);case 16:return M("Lazy");case 13:return t.child!==a&&a!==null?M("Suspense Fallback"):M("Suspense");case 19:return M("SuspenseList");case 0:case 15:return mt(t.type,!1);case 11:return mt(t.type.render,!1);case 1:return mt(t.type,!0);case 31:return M("Activity");default:return""}}function It(t){try{var a="",r=null;do a+=Rt(t,r),r=t,t=t.return;while(t);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Vt=Object.prototype.hasOwnProperty,ae=e.unstable_scheduleCallback,Ee=e.unstable_cancelCallback,Be=e.unstable_shouldYield,Ct=e.unstable_requestPaint,se=e.unstable_now,Ke=e.unstable_getCurrentPriorityLevel,_t=e.unstable_ImmediatePriority,pn=e.unstable_UserBlockingPriority,Lt=e.unstable_NormalPriority,rt=e.unstable_LowPriority,Qn=e.unstable_IdlePriority,_e=e.log,tt=e.unstable_setDisableYieldValue,ut=null,Nt=null;function $t(t){if(typeof _e=="function"&&tt(t),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(ut,t)}catch{}}var Dt=Math.clz32?Math.clz32:Pt,Xt=Math.log,Bn=Math.LN2;function Pt(t){return t>>>=0,t===0?32:31-(Xt(t)/Bn|0)|0}var ct=256,dn=262144,jn=4194304;function et(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function kn(t,a,r){var c=t.pendingLanes;if(c===0)return 0;var p=0,x=t.suspendedLanes,j=t.pingedLanes;t=t.warmLanes;var C=c&134217727;return C!==0?(c=C&~x,c!==0?p=et(c):(j&=C,j!==0?p=et(j):r||(r=C&~t,r!==0&&(p=et(r))))):(C=c&~x,C!==0?p=et(C):j!==0?p=et(j):r||(r=c&~t,r!==0&&(p=et(r)))),p===0?0:a!==0&&a!==p&&(a&x)===0&&(x=p&-p,r=a&-a,x>=r||x===32&&(r&4194048)!==0)?a:p}function gt(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Wa(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dn(){var t=jn;return jn<<=1,(jn&62914560)===0&&(jn=4194304),t}function Kt(t){for(var a=[],r=0;31>r;r++)a.push(t);return a}function Gn(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function es(t,a,r,c,p,x){var j=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var C=t.entanglements,V=t.expirationTimes,pe=t.hiddenUpdates;for(r=j&~r;0<r;){var we=31-Dt(r),Me=1<<we;C[we]=0,V[we]=-1;var ge=pe[we];if(ge!==null)for(pe[we]=null,we=0;we<ge.length;we++){var ve=ge[we];ve!==null&&(ve.lane&=-536870913)}r&=~Me}c!==0&&$(t,c,0),x!==0&&p===0&&t.tag!==0&&(t.suspendedLanes|=x&~(j&~a))}function $(t,a,r){t.pendingLanes|=a,t.suspendedLanes&=~a;var c=31-Dt(a);t.entangledLanes|=a,t.entanglements[c]=t.entanglements[c]|1073741824|r&261930}function qe(t,a){var r=t.entangledLanes|=a;for(t=t.entanglements;r;){var c=31-Dt(r),p=1<<c;p&a|t[c]&a&&(t[c]|=a),r&=~p}}function xn(t,a){var r=a&-a;return r=(r&42)!==0?1:pt(r),(r&(t.suspendedLanes|a))!==0?0:r}function pt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Fe(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function sn(){var t=K.p;return t!==0?t:(t=window.event,t===void 0?32:my(t.type))}function yn(t,a){var r=K.p;try{return K.p=t,a()}finally{K.p=r}}var En=Math.random().toString(36).slice(2),Wt="__reactFiber$"+En,hn="__reactProps$"+En,aa="__reactContainer$"+En,F="__reactEvents$"+En,Pe="__reactListeners$"+En,dt="__reactHandles$"+En,Vn="__reactResources$"+En,Tn="__reactMarker$"+En;function B(t){delete t[Wt],delete t[hn],delete t[F],delete t[Pe],delete t[dt]}function Ze(t){var a=t[Wt];if(a)return a;for(var r=t.parentNode;r;){if(a=r[aa]||r[Wt]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(t=Yg(t);t!==null;){if(r=t[Wt])return r;t=Yg(t)}return a}t=r,r=t.parentNode}return null}function St(t){if(t=t[Wt]||t[aa]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Un(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(o(33))}function ja(t){var a=t[Vn];return a||(a=t[Vn]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function vn(t){t[Tn]=!0}var rn=new Set,hr={};function bs(t,a){ts(t,a),ts(t+"Capture",a)}function ts(t,a){for(hr[t]=a,t=0;t<a.length;t++)rn.add(a[t])}var ns=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bt={},Ws={};function ei(t){return Vt.call(Ws,t)?!0:Vt.call(Bt,t)?!1:ns.test(t)?Ws[t]=!0:(Bt[t]=!0,!1)}function jt(t,a,r){if(ei(a))if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+r)}}function Ut(t,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+r)}}function sa(t,a,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(a,r,""+c)}}function Ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sa(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function zs(t,a,r){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,x=c.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return p.call(this)},set:function(j){r=""+j,x.call(this,j)}}),Object.defineProperty(t,a,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(j){r=""+j},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function lt(t){if(!t._valueTracker){var a=Sa(t)?"checked":"value";t._valueTracker=zs(t,a,""+t[a])}}function ln(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var r=a.getValue(),c="";return t&&(c=Sa(t)?t.checked?"true":"false":t.value),t=c,t!==r?(a.setValue(t),!0):!1}function Os(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Si=/[\n"\\]/g;function en(t){return t.replace(Si,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ti(t,a,r,c,p,x,j,C){t.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?t.type=j:t.removeAttribute("type"),a!=null?j==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Ln(a)):t.value!==""+Ln(a)&&(t.value=""+Ln(a)):j!=="submit"&&j!=="reset"||t.removeAttribute("value"),a!=null?P(t,j,Ln(a)):r!=null?P(t,j,Ln(r)):c!=null&&t.removeAttribute("value"),p==null&&x!=null&&(t.defaultChecked=!!x),p!=null&&(t.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.name=""+Ln(C):t.removeAttribute("name")}function Rs(t,a,r,c,p,x,j,C){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.type=x),a!=null||r!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){lt(t);return}r=r!=null?""+Ln(r):"",a=a!=null?""+Ln(a):r,C||a===t.value||(t.value=a),t.defaultValue=a}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=C?t.checked:!!c,t.defaultChecked=!!c,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(t.name=j),lt(t)}function P(t,a,r){a==="number"&&Os(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function De(t,a,r,c){if(t=t.options,a){a={};for(var p=0;p<r.length;p++)a["$"+r[p]]=!0;for(r=0;r<t.length;r++)p=a.hasOwnProperty("$"+t[r].value),t[r].selected!==p&&(t[r].selected=p),p&&c&&(t[r].defaultSelected=!0)}else{for(r=""+Ln(r),a=null,p=0;p<t.length;p++){if(t[p].value===r){t[p].selected=!0,c&&(t[p].defaultSelected=!0);return}a!==null||t[p].disabled||(a=t[p])}a!==null&&(a.selected=!0)}}function yt(t,a,r){if(a!=null&&(a=""+Ln(a),a!==t.value&&(t.value=a),r==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=r!=null?""+Ln(r):""}function ia(t,a,r,c){if(a==null){if(c!=null){if(r!=null)throw Error(o(92));if(le(c)){if(1<c.length)throw Error(o(93));c=c[0]}r=c}r==null&&(r=""),a=r}r=Ln(a),t.defaultValue=r,c=t.textContent,c===r&&c!==""&&c!==null&&(t.value=c),lt(t)}function ra(t,a){if(a){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=a;return}}t.textContent=a}var wi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _s(t,a,r){var c=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":c?t.setProperty(a,r):typeof r!="number"||r===0||wi.has(a)?a==="float"?t.cssFloat=r:t[a]=(""+r).trim():t[a]=r+"px"}function tl(t,a,r){if(a!=null&&typeof a!="object")throw Error(o(62));if(t=t.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var p in a)c=a[p],a.hasOwnProperty(p)&&r[p]!==c&&_s(t,p,c)}else for(var x in a)a.hasOwnProperty(x)&&_s(t,x,a[x])}function fr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ki(t){return eo.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function wa(){}var al=null;function pr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ei=null,it=null;function Ua(t){var a=St(t);if(a&&(t=a.stateNode)){var r=t[hn]||null;e:switch(t=a.stateNode,a.type){case"input":if(ti(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+en(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var c=r[a];if(c!==t&&c.form===t.form){var p=c[hn]||null;if(!p)throw Error(o(90));ti(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<r.length;a++)c=r[a],c.form===t.form&&ln(c)}break e;case"textarea":yt(t,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&De(t,!!r.multiple,a,!1)}}}var Yt=!1;function to(t,a,r){if(Yt)return t(a,r);Yt=!0;try{var c=t(a);return c}finally{if(Yt=!1,(Ei!==null||it!==null)&&(xc(),Ei&&(a=Ei,t=it,it=Ei=null,Ua(a),t)))for(a=0;a<t.length;a++)Ua(t[a])}}function ni(t,a){var r=t.stateNode;if(r===null)return null;var c=r[hn]||null;if(c===null)return null;r=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(o(231,a,typeof r));return r}var Fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xr=!1;if(Fa)try{var qa={};Object.defineProperty(qa,"passive",{get:function(){xr=!0}}),window.addEventListener("test",qa,qa),window.removeEventListener("test",qa,qa)}catch{xr=!1}var as=null,ai=null,Cn=null;function Ds(){if(Cn)return Cn;var t,a=ai,r=a.length,c,p="value"in as?as.value:as.textContent,x=p.length;for(t=0;t<r&&a[t]===p[t];t++);var j=r-t;for(c=1;c<=j&&a[r-c]===p[x-c];c++);return Cn=p.slice(t,1<c?1-c:void 0)}function gr(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function yr(){return!0}function _u(){return!1}function la(t){function a(r,c,p,x,j){this._reactName=r,this._targetInst=p,this.type=c,this.nativeEvent=x,this.target=j,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(r=t[C],this[C]=r?r(x):x[C]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?yr:_u,this.isPropagationStopped=_u,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yr)},persist:function(){},isPersistent:yr}),a}var Ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sl=la(Ns),Ti=w({},Ns,{view:0,detail:0}),At=la(Ti),no,ya,js,vr=w({},Ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==js&&(js&&t.type==="mousemove"?(no=t.screenX-js.screenX,ya=t.screenY-js.screenY):ya=no=0,js=t),no)},movementY:function(t){return"movementY"in t?t.movementY:ya}}),Nu=la(vr),ao=w({},vr,{dataTransfer:0}),Dd=la(ao),ju=w({},Ti,{relatedTarget:0}),so=la(ju),Ld=w({},Ns,{animationName:0,elapsedTime:0,pseudoElement:0}),io=la(Ld),Pd=w({},Ns,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ss=la(Pd),Id=w({},Ns,{data:0}),ro=la(Id),Ls={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Su={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lo(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=wu[t])?!!a[t]:!1}function oo(){return lo}var ku=w({},Ti,{key:function(t){if(t.key){var a=Ls[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=gr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Su[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oo,charCode:function(t){return t.type==="keypress"?gr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Eu=la(ku),Bd=w({},vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tu=la(Bd),uo=w({},Ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oo}),Ud=la(uo),Cu=w({},Ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),Au=la(Cu),il=w({},vr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),si=la(il),Fd=w({},Ns,{newState:0,oldState:0}),br=la(Fd),ka=[9,13,27,32],rl=Fa&&"CompositionEvent"in window,Ci=null;Fa&&"documentMode"in document&&(Ci=document.documentMode);var qd=Fa&&"TextEvent"in window&&!Ci,ll=Fa&&(!rl||Ci&&8<Ci&&11>=Ci),ol=" ",Mu=!1;function zu(t,a){switch(t){case"keyup":return ka.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function co(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ai=!1;function Za(t,a){switch(t){case"compositionend":return co(a);case"keypress":return a.which!==32?null:(Mu=!0,ol);case"textInput":return t=a.data,t===ol&&Mu?null:t;default:return null}}function Mi(t,a){if(Ai)return t==="compositionend"||!rl&&zu(t,a)?(t=Ds(),Cn=ai=as=null,Ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ll&&a.locale!=="ko"?null:a.data;default:return null}}var Zd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function is(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!Zd[t.type]:a==="textarea"}function Ou(t,a,r,c){Ei?it?it.push(c):it=[c]:Ei=c,a=jc(a,"onChange"),0<a.length&&(r=new sl("onChange","change",null,r,c),t.push({event:r,listeners:a}))}var rs=null,_r=null;function Nr(t){Lg(t,0)}function jr(t){var a=Un(t);if(ln(a))return t}function Sr(t,a){if(t==="change")return a}var Ru=!1;if(Fa){var ls;if(Fa){var zi="oninput"in document;if(!zi){var Du=document.createElement("div");Du.setAttribute("oninput","return;"),zi=typeof Du.oninput=="function"}ls=zi}else ls=!1;Ru=ls&&(!document.documentMode||9<document.documentMode)}function ul(){rs&&(rs.detachEvent("onpropertychange",Lu),_r=rs=null)}function Lu(t){if(t.propertyName==="value"&&jr(_r)){var a=[];Ou(a,_r,t,pr(t)),to(Nr,a)}}function Ss(t,a,r){t==="focusin"?(ul(),rs=a,_r=r,rs.attachEvent("onpropertychange",Lu)):t==="focusout"&&ul()}function Hd(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jr(_r)}function Oi(t,a){if(t==="click")return jr(a)}function Kd(t,a){if(t==="input"||t==="change")return jr(a)}function ws(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Wn=typeof Object.is=="function"?Object.is:ws;function Ri(t,a){if(Wn(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var r=Object.keys(t),c=Object.keys(a);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var p=r[c];if(!Vt.call(a,p)||!Wn(t[p],a[p]))return!1}return!0}function cl(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wr(t,a){var r=cl(t);t=0;for(var c;r;){if(r.nodeType===3){if(c=t+r.textContent.length,t<=a&&c>=a)return{node:r,offset:a-t};t=c}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cl(r)}}function dl(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?dl(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function kr(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=Os(t.document);a instanceof t.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)t=a.contentWindow;else break;a=Os(t.document)}return a}function Ps(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var ml=Fa&&"documentMode"in document&&11>=document.documentMode,Is=null,hl=null,Er=null,Di=!1;function Pu(t,a,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Di||Is==null||Is!==Os(c)||(c=Is,"selectionStart"in c&&Ps(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Er&&Ri(Er,c)||(Er=c,c=jc(hl,"onSelect"),0<c.length&&(a=new sl("onSelect","select",null,a,r),t.push({event:a,listeners:c}),a.target=Is)))}function Bs(t,a){var r={};return r[t.toLowerCase()]=a.toLowerCase(),r["Webkit"+t]="webkit"+a,r["Moz"+t]="moz"+a,r}var Li={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},fl={},Iu={};Fa&&(Iu=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function ea(t){if(fl[t])return fl[t];if(!Li[t])return t;var a=Li[t],r;for(r in a)if(a.hasOwnProperty(r)&&r in Iu)return fl[t]=a[r];return t}var Tr=ea("animationend"),Bu=ea("animationiteration"),Cr=ea("animationstart"),Qd=ea("transitionrun"),Uu=ea("transitionstart"),Gd=ea("transitioncancel"),Pi=ea("transitionend"),Fu=new Map,Us="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Us.push("scrollEnd");function Ea(t,a){Fu.set(t,a),bs(a,[t])}var Ar=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ta=[],fa=0,pl=0;function Mr(){for(var t=fa,a=pl=fa=0;a<t;){var r=Ta[a];Ta[a++]=null;var c=Ta[a];Ta[a++]=null;var p=Ta[a];Ta[a++]=null;var x=Ta[a];if(Ta[a++]=null,c!==null&&p!==null){var j=c.pending;j===null?p.next=p:(p.next=j.next,j.next=p),c.pending=p}x!==0&&Ii(r,p,x)}}function Fs(t,a,r,c){Ta[fa++]=t,Ta[fa++]=a,Ta[fa++]=r,Ta[fa++]=c,pl|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function mo(t,a,r,c){return Fs(t,a,r,c),zr(t)}function os(t,a){return Fs(t,null,null,a),zr(t)}function Ii(t,a,r){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r);for(var p=!1,x=t.return;x!==null;)x.childLanes|=r,c=x.alternate,c!==null&&(c.childLanes|=r),x.tag===22&&(t=x.stateNode,t===null||t._visibility&1||(p=!0)),t=x,x=x.return;return t.tag===3?(x=t.stateNode,p&&a!==null&&(p=31-Dt(r),t=x.hiddenUpdates,c=t[p],c===null?t[p]=[a]:c.push(a),a.lane=r|536870912),x):null}function zr(t){if(50<Po)throw Po=0,$m=null,Error(o(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var ii={};function Vd(t,a,r,c){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pa(t,a,r,c){return new Vd(t,a,r,c)}function xl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function us(t,a){var r=t.alternate;return r===null?(r=pa(t.tag,a,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=a,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,a=t.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function ho(t,a){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,a=r.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Or(t,a,r,c,p,x){var j=0;if(c=t,typeof t=="function")xl(t)&&(j=1);else if(typeof t=="string")j=LN(t,r,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case J:return t=pa(31,r,a,p),t.elementType=J,t.lanes=x,t;case A:return ri(r.children,p,x,a);case O:j=8,p|=24;break;case q:return t=pa(12,r,a,p|2),t.elementType=q,t.lanes=x,t;case Y:return t=pa(13,r,a,p),t.elementType=Y,t.lanes=x,t;case ee:return t=pa(19,r,a,p),t.elementType=ee,t.lanes=x,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D:j=10;break e;case U:j=9;break e;case G:j=11;break e;case H:j=14;break e;case te:j=16,c=null;break e}j=29,r=Error(o(130,t===null?"null":typeof t,"")),c=null}return a=pa(j,r,a,p),a.elementType=t,a.type=c,a.lanes=x,a}function ri(t,a,r,c){return t=pa(7,t,c,a),t.lanes=r,t}function gl(t,a,r){return t=pa(6,t,null,a),t.lanes=r,t}function fo(t){var a=pa(18,null,null,0);return a.stateNode=t,a}function po(t,a,r){return a=pa(4,t.children!==null?t.children:[],t.key,a),a.lanes=r,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var i=new WeakMap;function u(t,a){if(typeof t=="object"&&t!==null){var r=i.get(t);return r!==void 0?r:(a={value:t,source:a,stack:It(a)},i.set(t,a),a)}return{value:t,source:a,stack:It(a)}}var h=[],y=0,N=null,k=0,Z=[],re=0,xe=null,Ae=1,Ie="";function We(t,a){h[y++]=k,h[y++]=N,N=t,k=a}function vt(t,a,r){Z[re++]=Ae,Z[re++]=Ie,Z[re++]=xe,xe=t;var c=Ae;t=Ie;var p=32-Dt(c)-1;c&=~(1<<p),r+=1;var x=32-Dt(a)+p;if(30<x){var j=p-p%5;x=(c&(1<<j)-1).toString(32),c>>=j,p-=j,Ae=1<<32-Dt(a)+p|r<<p|c,Ie=x+t}else Ae=1<<x|r<<p|c,Ie=t}function $n(t){t.return!==null&&(We(t,1),vt(t,1,0))}function An(t){for(;t===N;)N=h[--y],h[y]=null,k=h[--y],h[y]=null;for(;t===xe;)xe=Z[--re],Z[re]=null,Ie=Z[--re],Z[re]=null,Ae=Z[--re],Z[re]=null}function va(t,a){Z[re++]=Ae,Z[re++]=Ie,Z[re++]=xe,Ae=a.id,Ie=a.overflow,xe=t}var Ft=null,qt=null,wt=!1,qs=null,Ca=!1,yl=Error(o(519));function Zs(t){var a=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Rr(u(a,t)),yl}function xo(t){var a=t.stateNode,r=t.type,c=t.memoizedProps;switch(a[Wt]=t,a[hn]=c,r){case"dialog":Et("cancel",a),Et("close",a);break;case"iframe":case"object":case"embed":Et("load",a);break;case"video":case"audio":for(r=0;r<Bo.length;r++)Et(Bo[r],a);break;case"source":Et("error",a);break;case"img":case"image":case"link":Et("error",a),Et("load",a);break;case"details":Et("toggle",a);break;case"input":Et("invalid",a),Rs(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Et("invalid",a);break;case"textarea":Et("invalid",a),ia(a,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||c.suppressHydrationWarning===!0||Ug(a.textContent,r)?(c.popover!=null&&(Et("beforetoggle",a),Et("toggle",a)),c.onScroll!=null&&Et("scroll",a),c.onScrollEnd!=null&&Et("scrollend",a),c.onClick!=null&&(a.onclick=wa),a=!0):a=!1,a||Zs(t,!0)}function Sn(t){for(Ft=t.return;Ft;)switch(Ft.tag){case 5:case 31:case 13:Ca=!1;return;case 27:case 3:Ca=!0;return;default:Ft=Ft.return}}function ks(t){if(t!==Ft)return!1;if(!wt)return Sn(t),wt=!0,!1;var a=t.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||ch(t.type,t.memoizedProps)),r=!r),r&&qt&&Zs(t),Sn(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));qt=$g(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));qt=$g(t)}else a===27?(a=qt,Xi(t.type)?(t=ph,ph=null,qt=t):qt=a):qt=Ft?ds(t.stateNode.nextSibling):null;return!0}function li(){qt=Ft=null,wt=!1}function go(){var t=qs;return t!==null&&(Oa===null?Oa=t:Oa.push.apply(Oa,t),qs=null),t}function Rr(t){qs===null?qs=[t]:qs.push(t)}var Dr=z(null),Hs=null,Es=null;function Bi(t,a,r){I(Dr,a._currentValue),a._currentValue=r}function oi(t){t._currentValue=Dr.current,ne(Dr)}function $d(t,a,r){for(;t!==null;){var c=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),t===r)break;t=t.return}}function Yd(t,a,r,c){var p=t.child;for(p!==null&&(p.return=t);p!==null;){var x=p.dependencies;if(x!==null){var j=p.child;x=x.firstContext;e:for(;x!==null;){var C=x;x=p;for(var V=0;V<a.length;V++)if(C.context===a[V]){x.lanes|=r,C=x.alternate,C!==null&&(C.lanes|=r),$d(x.return,r,t),c||(j=null);break e}x=C.next}}else if(p.tag===18){if(j=p.return,j===null)throw Error(o(341));j.lanes|=r,x=j.alternate,x!==null&&(x.lanes|=r),$d(j,r,t),j=null}else j=p.child;if(j!==null)j.return=p;else for(j=p;j!==null;){if(j===t){j=null;break}if(p=j.sibling,p!==null){p.return=j.return,j=p;break}j=j.return}p=j}}function vl(t,a,r,c){t=null;for(var p=a,x=!1;p!==null;){if(!x){if((p.flags&524288)!==0)x=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var j=p.alternate;if(j===null)throw Error(o(387));if(j=j.memoizedProps,j!==null){var C=p.type;Wn(p.pendingProps.value,j.value)||(t!==null?t.push(C):t=[C])}}else if(p===Re.current){if(j=p.alternate,j===null)throw Error(o(387));j.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(t!==null?t.push(Ho):t=[Ho])}p=p.return}t!==null&&Yd(a,t,r,c),a.flags|=262144}function qu(t){for(t=t.firstContext;t!==null;){if(!Wn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Lr(t){Hs=t,Es=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function oa(t){return wp(Hs,t)}function Zu(t,a){return Hs===null&&Lr(t),wp(t,a)}function wp(t,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},Es===null){if(t===null)throw Error(o(308));Es=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Es=Es.next=a;return r}var z_=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(r,c){t.push(c)}};this.abort=function(){a.aborted=!0,t.forEach(function(r){return r()})}},O_=e.unstable_scheduleCallback,R_=e.unstable_NormalPriority,Fn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jd(){return{controller:new z_,data:new Map,refCount:0}}function yo(t){t.refCount--,t.refCount===0&&O_(R_,function(){t.controller.abort()})}var vo=null,Xd=0,bl=0,_l=null;function D_(t,a){if(vo===null){var r=vo=[];Xd=0,bl=th(),_l={status:"pending",value:void 0,then:function(c){r.push(c)}}}return Xd++,a.then(kp,kp),a}function kp(){if(--Xd===0&&vo!==null){_l!==null&&(_l.status="fulfilled");var t=vo;vo=null,bl=0,_l=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function L_(t,a){var r=[],c={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return t.then(function(){c.status="fulfilled",c.value=a;for(var p=0;p<r.length;p++)(0,r[p])(a)},function(p){for(c.status="rejected",c.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),c}var Ep=Q.S;Q.S=function(t,a){cg=se(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&D_(t,a),Ep!==null&&Ep(t,a)};var Pr=z(null);function Wd(){var t=Pr.current;return t!==null?t:mn.pooledCache}function Hu(t,a){a===null?I(Pr,Pr.current):I(Pr,a.pool)}function Tp(){var t=Wd();return t===null?null:{parent:Fn._currentValue,pool:t}}var Nl=Error(o(460)),em=Error(o(474)),Ku=Error(o(542)),Qu={then:function(){}};function Cp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ap(t,a,r){switch(r=t[r],r===void 0?t.push(a):r!==a&&(a.then(wa,wa),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,zp(t),t;default:if(typeof a.status=="string")a.then(wa,wa);else{if(t=mn,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=a,t.status="pending",t.then(function(c){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=c}},function(c){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,zp(t),t}throw Br=a,Nl}}function Ir(t){try{var a=t._init;return a(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Br=r,Nl):r}}var Br=null;function Mp(){if(Br===null)throw Error(o(459));var t=Br;return Br=null,t}function zp(t){if(t===Nl||t===Ku)throw Error(o(483))}var jl=null,bo=0;function Gu(t){var a=bo;return bo+=1,jl===null&&(jl=[]),Ap(jl,t,a)}function _o(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Vu(t,a){throw a.$$typeof===E?Error(o(525)):(t=Object.prototype.toString.call(a),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Op(t){function a(ie,W){if(t){var he=ie.deletions;he===null?(ie.deletions=[W],ie.flags|=16):he.push(W)}}function r(ie,W){if(!t)return null;for(;W!==null;)a(ie,W),W=W.sibling;return null}function c(ie){for(var W=new Map;ie!==null;)ie.key!==null?W.set(ie.key,ie):W.set(ie.index,ie),ie=ie.sibling;return W}function p(ie,W){return ie=us(ie,W),ie.index=0,ie.sibling=null,ie}function x(ie,W,he){return ie.index=he,t?(he=ie.alternate,he!==null?(he=he.index,he<W?(ie.flags|=67108866,W):he):(ie.flags|=67108866,W)):(ie.flags|=1048576,W)}function j(ie){return t&&ie.alternate===null&&(ie.flags|=67108866),ie}function C(ie,W,he,Te){return W===null||W.tag!==6?(W=gl(he,ie.mode,Te),W.return=ie,W):(W=p(W,he),W.return=ie,W)}function V(ie,W,he,Te){var nt=he.type;return nt===A?we(ie,W,he.props.children,Te,he.key):W!==null&&(W.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===te&&Ir(nt)===W.type)?(W=p(W,he.props),_o(W,he),W.return=ie,W):(W=Or(he.type,he.key,he.props,null,ie.mode,Te),_o(W,he),W.return=ie,W)}function pe(ie,W,he,Te){return W===null||W.tag!==4||W.stateNode.containerInfo!==he.containerInfo||W.stateNode.implementation!==he.implementation?(W=po(he,ie.mode,Te),W.return=ie,W):(W=p(W,he.children||[]),W.return=ie,W)}function we(ie,W,he,Te,nt){return W===null||W.tag!==7?(W=ri(he,ie.mode,Te,nt),W.return=ie,W):(W=p(W,he),W.return=ie,W)}function Me(ie,W,he){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=gl(""+W,ie.mode,he),W.return=ie,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case R:return he=Or(W.type,W.key,W.props,null,ie.mode,he),_o(he,W),he.return=ie,he;case T:return W=po(W,ie.mode,he),W.return=ie,W;case te:return W=Ir(W),Me(ie,W,he)}if(le(W)||de(W))return W=ri(W,ie.mode,he,null),W.return=ie,W;if(typeof W.then=="function")return Me(ie,Gu(W),he);if(W.$$typeof===D)return Me(ie,Zu(ie,W),he);Vu(ie,W)}return null}function ge(ie,W,he,Te){var nt=W!==null?W.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return nt!==null?null:C(ie,W,""+he,Te);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case R:return he.key===nt?V(ie,W,he,Te):null;case T:return he.key===nt?pe(ie,W,he,Te):null;case te:return he=Ir(he),ge(ie,W,he,Te)}if(le(he)||de(he))return nt!==null?null:we(ie,W,he,Te,null);if(typeof he.then=="function")return ge(ie,W,Gu(he),Te);if(he.$$typeof===D)return ge(ie,W,Zu(ie,he),Te);Vu(ie,he)}return null}function ve(ie,W,he,Te,nt){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return ie=ie.get(he)||null,C(W,ie,""+Te,nt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case R:return ie=ie.get(Te.key===null?he:Te.key)||null,V(W,ie,Te,nt);case T:return ie=ie.get(Te.key===null?he:Te.key)||null,pe(W,ie,Te,nt);case te:return Te=Ir(Te),ve(ie,W,he,Te,nt)}if(le(Te)||de(Te))return ie=ie.get(he)||null,we(W,ie,Te,nt,null);if(typeof Te.then=="function")return ve(ie,W,he,Gu(Te),nt);if(Te.$$typeof===D)return ve(ie,W,he,Zu(W,Te),nt);Vu(W,Te)}return null}function Ve(ie,W,he,Te){for(var nt=null,Zt=null,Xe=W,bt=W=0,zt=null;Xe!==null&&bt<he.length;bt++){Xe.index>bt?(zt=Xe,Xe=null):zt=Xe.sibling;var Ht=ge(ie,Xe,he[bt],Te);if(Ht===null){Xe===null&&(Xe=zt);break}t&&Xe&&Ht.alternate===null&&a(ie,Xe),W=x(Ht,W,bt),Zt===null?nt=Ht:Zt.sibling=Ht,Zt=Ht,Xe=zt}if(bt===he.length)return r(ie,Xe),wt&&We(ie,bt),nt;if(Xe===null){for(;bt<he.length;bt++)Xe=Me(ie,he[bt],Te),Xe!==null&&(W=x(Xe,W,bt),Zt===null?nt=Xe:Zt.sibling=Xe,Zt=Xe);return wt&&We(ie,bt),nt}for(Xe=c(Xe);bt<he.length;bt++)zt=ve(Xe,ie,bt,he[bt],Te),zt!==null&&(t&&zt.alternate!==null&&Xe.delete(zt.key===null?bt:zt.key),W=x(zt,W,bt),Zt===null?nt=zt:Zt.sibling=zt,Zt=zt);return t&&Xe.forEach(function(ar){return a(ie,ar)}),wt&&We(ie,bt),nt}function st(ie,W,he,Te){if(he==null)throw Error(o(151));for(var nt=null,Zt=null,Xe=W,bt=W=0,zt=null,Ht=he.next();Xe!==null&&!Ht.done;bt++,Ht=he.next()){Xe.index>bt?(zt=Xe,Xe=null):zt=Xe.sibling;var ar=ge(ie,Xe,Ht.value,Te);if(ar===null){Xe===null&&(Xe=zt);break}t&&Xe&&ar.alternate===null&&a(ie,Xe),W=x(ar,W,bt),Zt===null?nt=ar:Zt.sibling=ar,Zt=ar,Xe=zt}if(Ht.done)return r(ie,Xe),wt&&We(ie,bt),nt;if(Xe===null){for(;!Ht.done;bt++,Ht=he.next())Ht=Me(ie,Ht.value,Te),Ht!==null&&(W=x(Ht,W,bt),Zt===null?nt=Ht:Zt.sibling=Ht,Zt=Ht);return wt&&We(ie,bt),nt}for(Xe=c(Xe);!Ht.done;bt++,Ht=he.next())Ht=ve(Xe,ie,bt,Ht.value,Te),Ht!==null&&(t&&Ht.alternate!==null&&Xe.delete(Ht.key===null?bt:Ht.key),W=x(Ht,W,bt),Zt===null?nt=Ht:Zt.sibling=Ht,Zt=Ht);return t&&Xe.forEach(function(GN){return a(ie,GN)}),wt&&We(ie,bt),nt}function cn(ie,W,he,Te){if(typeof he=="object"&&he!==null&&he.type===A&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case R:e:{for(var nt=he.key;W!==null;){if(W.key===nt){if(nt=he.type,nt===A){if(W.tag===7){r(ie,W.sibling),Te=p(W,he.props.children),Te.return=ie,ie=Te;break e}}else if(W.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===te&&Ir(nt)===W.type){r(ie,W.sibling),Te=p(W,he.props),_o(Te,he),Te.return=ie,ie=Te;break e}r(ie,W);break}else a(ie,W);W=W.sibling}he.type===A?(Te=ri(he.props.children,ie.mode,Te,he.key),Te.return=ie,ie=Te):(Te=Or(he.type,he.key,he.props,null,ie.mode,Te),_o(Te,he),Te.return=ie,ie=Te)}return j(ie);case T:e:{for(nt=he.key;W!==null;){if(W.key===nt)if(W.tag===4&&W.stateNode.containerInfo===he.containerInfo&&W.stateNode.implementation===he.implementation){r(ie,W.sibling),Te=p(W,he.children||[]),Te.return=ie,ie=Te;break e}else{r(ie,W);break}else a(ie,W);W=W.sibling}Te=po(he,ie.mode,Te),Te.return=ie,ie=Te}return j(ie);case te:return he=Ir(he),cn(ie,W,he,Te)}if(le(he))return Ve(ie,W,he,Te);if(de(he)){if(nt=de(he),typeof nt!="function")throw Error(o(150));return he=nt.call(he),st(ie,W,he,Te)}if(typeof he.then=="function")return cn(ie,W,Gu(he),Te);if(he.$$typeof===D)return cn(ie,W,Zu(ie,he),Te);Vu(ie,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,W!==null&&W.tag===6?(r(ie,W.sibling),Te=p(W,he),Te.return=ie,ie=Te):(r(ie,W),Te=gl(he,ie.mode,Te),Te.return=ie,ie=Te),j(ie)):r(ie,W)}return function(ie,W,he,Te){try{bo=0;var nt=cn(ie,W,he,Te);return jl=null,nt}catch(Xe){if(Xe===Nl||Xe===Ku)throw Xe;var Zt=pa(29,Xe,null,ie.mode);return Zt.lanes=Te,Zt.return=ie,Zt}}}var Ur=Op(!0),Rp=Op(!1),Ui=!1;function tm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nm(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Fi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function qi(t,a,r){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Qt&2)!==0){var p=c.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),c.pending=a,a=zr(t),Ii(t,null,r),a}return Fs(t,c,a,r),zr(t)}function No(t,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var c=a.lanes;c&=t.pendingLanes,r|=c,a.lanes=r,qe(t,r)}}function am(t,a){var r=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var p=null,x=null;if(r=r.firstBaseUpdate,r!==null){do{var j={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};x===null?p=x=j:x=x.next=j,r=r.next}while(r!==null);x===null?p=x=a:x=x.next=a}else p=x=a;r={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:x,shared:c.shared,callbacks:c.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=a:t.next=a,r.lastBaseUpdate=a}var sm=!1;function jo(){if(sm){var t=_l;if(t!==null)throw t}}function So(t,a,r,c){sm=!1;var p=t.updateQueue;Ui=!1;var x=p.firstBaseUpdate,j=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var V=C,pe=V.next;V.next=null,j===null?x=pe:j.next=pe,j=V;var we=t.alternate;we!==null&&(we=we.updateQueue,C=we.lastBaseUpdate,C!==j&&(C===null?we.firstBaseUpdate=pe:C.next=pe,we.lastBaseUpdate=V))}if(x!==null){var Me=p.baseState;j=0,we=pe=V=null,C=x;do{var ge=C.lane&-536870913,ve=ge!==C.lane;if(ve?(Mt&ge)===ge:(c&ge)===ge){ge!==0&&ge===bl&&(sm=!0),we!==null&&(we=we.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Ve=t,st=C;ge=a;var cn=r;switch(st.tag){case 1:if(Ve=st.payload,typeof Ve=="function"){Me=Ve.call(cn,Me,ge);break e}Me=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=st.payload,ge=typeof Ve=="function"?Ve.call(cn,Me,ge):Ve,ge==null)break e;Me=w({},Me,ge);break e;case 2:Ui=!0}}ge=C.callback,ge!==null&&(t.flags|=64,ve&&(t.flags|=8192),ve=p.callbacks,ve===null?p.callbacks=[ge]:ve.push(ge))}else ve={lane:ge,tag:C.tag,payload:C.payload,callback:C.callback,next:null},we===null?(pe=we=ve,V=Me):we=we.next=ve,j|=ge;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;ve=C,C=ve.next,ve.next=null,p.lastBaseUpdate=ve,p.shared.pending=null}}while(!0);we===null&&(V=Me),p.baseState=V,p.firstBaseUpdate=pe,p.lastBaseUpdate=we,x===null&&(p.shared.lanes=0),Gi|=j,t.lanes=j,t.memoizedState=Me}}function Dp(t,a){if(typeof t!="function")throw Error(o(191,t));t.call(a)}function Lp(t,a){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Dp(r[t],a)}var Sl=z(null),$u=z(0);function Pp(t,a){t=gi,I($u,t),I(Sl,a),gi=t|a.baseLanes}function im(){I($u,gi),I(Sl,Sl.current)}function rm(){gi=$u.current,ne(Sl),ne($u)}var Ha=z(null),cs=null;function Zi(t){var a=t.alternate;I(Pn,Pn.current&1),I(Ha,t),cs===null&&(a===null||Sl.current!==null||a.memoizedState!==null)&&(cs=t)}function lm(t){I(Pn,Pn.current),I(Ha,t),cs===null&&(cs=t)}function Ip(t){t.tag===22?(I(Pn,Pn.current),I(Ha,t),cs===null&&(cs=t)):Hi()}function Hi(){I(Pn,Pn.current),I(Ha,Ha.current)}function Ka(t){ne(Ha),cs===t&&(cs=null),ne(Pn)}var Pn=z(0);function Yu(t){for(var a=t;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||hh(r)||fh(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ui=0,xt=null,on=null,qn=null,Ju=!1,wl=!1,Fr=!1,Xu=0,wo=0,kl=null,P_=0;function Mn(){throw Error(o(321))}function om(t,a){if(a===null)return!1;for(var r=0;r<a.length&&r<t.length;r++)if(!Wn(t[r],a[r]))return!1;return!0}function um(t,a,r,c,p,x){return ui=x,xt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Q.H=t===null||t.memoizedState===null?_x:Sm,Fr=!1,x=r(c,p),Fr=!1,wl&&(x=Up(a,r,c,p)),Bp(t),x}function Bp(t){Q.H=To;var a=on!==null&&on.next!==null;if(ui=0,qn=on=xt=null,Ju=!1,wo=0,kl=null,a)throw Error(o(300));t===null||Zn||(t=t.dependencies,t!==null&&qu(t)&&(Zn=!0))}function Up(t,a,r,c){xt=t;var p=0;do{if(wl&&(kl=null),wo=0,wl=!1,25<=p)throw Error(o(301));if(p+=1,qn=on=null,t.updateQueue!=null){var x=t.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}Q.H=Nx,x=a(r,c)}while(wl);return x}function I_(){var t=Q.H,a=t.useState()[0];return a=typeof a.then=="function"?ko(a):a,t=t.useState()[0],(on!==null?on.memoizedState:null)!==t&&(xt.flags|=1024),a}function cm(){var t=Xu!==0;return Xu=0,t}function dm(t,a,r){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~r}function mm(t){if(Ju){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Ju=!1}ui=0,qn=on=xt=null,wl=!1,wo=Xu=0,kl=null}function ba(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?xt.memoizedState=qn=t:qn=qn.next=t,qn}function In(){if(on===null){var t=xt.alternate;t=t!==null?t.memoizedState:null}else t=on.next;var a=qn===null?xt.memoizedState:qn.next;if(a!==null)qn=a,on=t;else{if(t===null)throw xt.alternate===null?Error(o(467)):Error(o(310));on=t,t={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},qn===null?xt.memoizedState=qn=t:qn=qn.next=t}return qn}function Wu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ko(t){var a=wo;return wo+=1,kl===null&&(kl=[]),t=Ap(kl,t,a),a=xt,(qn===null?a.memoizedState:qn.next)===null&&(a=a.alternate,Q.H=a===null||a.memoizedState===null?_x:Sm),t}function ec(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ko(t);if(t.$$typeof===D)return oa(t)}throw Error(o(438,String(t)))}function hm(t){var a=null,r=xt.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var c=xt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=Wu(),xt.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(t),c=0;c<t;c++)r[c]=fe;return a.index++,r}function ci(t,a){return typeof a=="function"?a(t):a}function tc(t){var a=In();return fm(a,on,t)}function fm(t,a,r){var c=t.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=r;var p=t.baseQueue,x=c.pending;if(x!==null){if(p!==null){var j=p.next;p.next=x.next,x.next=j}a.baseQueue=p=x,c.pending=null}if(x=t.baseState,p===null)t.memoizedState=x;else{a=p.next;var C=j=null,V=null,pe=a,we=!1;do{var Me=pe.lane&-536870913;if(Me!==pe.lane?(Mt&Me)===Me:(ui&Me)===Me){var ge=pe.revertLane;if(ge===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),Me===bl&&(we=!0);else if((ui&ge)===ge){pe=pe.next,ge===bl&&(we=!0);continue}else Me={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},V===null?(C=V=Me,j=x):V=V.next=Me,xt.lanes|=ge,Gi|=ge;Me=pe.action,Fr&&r(x,Me),x=pe.hasEagerState?pe.eagerState:r(x,Me)}else ge={lane:Me,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},V===null?(C=V=ge,j=x):V=V.next=ge,xt.lanes|=Me,Gi|=Me;pe=pe.next}while(pe!==null&&pe!==a);if(V===null?j=x:V.next=C,!Wn(x,t.memoizedState)&&(Zn=!0,we&&(r=_l,r!==null)))throw r;t.memoizedState=x,t.baseState=j,t.baseQueue=V,c.lastRenderedState=x}return p===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function pm(t){var a=In(),r=a.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=t;var c=r.dispatch,p=r.pending,x=a.memoizedState;if(p!==null){r.pending=null;var j=p=p.next;do x=t(x,j.action),j=j.next;while(j!==p);Wn(x,a.memoizedState)||(Zn=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),r.lastRenderedState=x}return[x,c]}function Fp(t,a,r){var c=xt,p=In(),x=wt;if(x){if(r===void 0)throw Error(o(407));r=r()}else r=a();var j=!Wn((on||p).memoizedState,r);if(j&&(p.memoizedState=r,Zn=!0),p=p.queue,ym(Hp.bind(null,c,p,t),[t]),p.getSnapshot!==a||j||qn!==null&&qn.memoizedState.tag&1){if(c.flags|=2048,El(9,{destroy:void 0},Zp.bind(null,c,p,r,a),null),mn===null)throw Error(o(349));x||(ui&127)!==0||qp(c,a,r)}return r}function qp(t,a,r){t.flags|=16384,t={getSnapshot:a,value:r},a=xt.updateQueue,a===null?(a=Wu(),xt.updateQueue=a,a.stores=[t]):(r=a.stores,r===null?a.stores=[t]:r.push(t))}function Zp(t,a,r,c){a.value=r,a.getSnapshot=c,Kp(a)&&Qp(t)}function Hp(t,a,r){return r(function(){Kp(a)&&Qp(t)})}function Kp(t){var a=t.getSnapshot;t=t.value;try{var r=a();return!Wn(t,r)}catch{return!0}}function Qp(t){var a=os(t,2);a!==null&&Ra(a,t,2)}function xm(t){var a=ba();if(typeof t=="function"){var r=t;if(t=r(),Fr){$t(!0);try{r()}finally{$t(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:t},a}function Gp(t,a,r,c){return t.baseState=r,fm(t,on,typeof c=="function"?c:ci)}function B_(t,a,r,c,p){if(sc(t))throw Error(o(485));if(t=a.action,t!==null){var x={payload:p,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){x.listeners.push(j)}};Q.T!==null?r(!0):x.isTransition=!1,c(x),r=a.pending,r===null?(x.next=a.pending=x,Vp(a,x)):(x.next=r.next,a.pending=r.next=x)}}function Vp(t,a){var r=a.action,c=a.payload,p=t.state;if(a.isTransition){var x=Q.T,j={};Q.T=j;try{var C=r(p,c),V=Q.S;V!==null&&V(j,C),$p(t,a,C)}catch(pe){gm(t,a,pe)}finally{x!==null&&j.types!==null&&(x.types=j.types),Q.T=x}}else try{x=r(p,c),$p(t,a,x)}catch(pe){gm(t,a,pe)}}function $p(t,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Yp(t,a,c)},function(c){return gm(t,a,c)}):Yp(t,a,r)}function Yp(t,a,r){a.status="fulfilled",a.value=r,Jp(a),t.state=r,a=t.pending,a!==null&&(r=a.next,r===a?t.pending=null:(r=r.next,a.next=r,Vp(t,r)))}function gm(t,a,r){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=r,Jp(a),a=a.next;while(a!==c)}t.action=null}function Jp(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Xp(t,a){return a}function Wp(t,a){if(wt){var r=mn.formState;if(r!==null){e:{var c=xt;if(wt){if(qt){t:{for(var p=qt,x=Ca;p.nodeType!==8;){if(!x){p=null;break t}if(p=ds(p.nextSibling),p===null){p=null;break t}}x=p.data,p=x==="F!"||x==="F"?p:null}if(p){qt=ds(p.nextSibling),c=p.data==="F!";break e}}Zs(c)}c=!1}c&&(a=r[0])}}return r=ba(),r.memoizedState=r.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xp,lastRenderedState:a},r.queue=c,r=yx.bind(null,xt,c),c.dispatch=r,c=xm(!1),x=jm.bind(null,xt,!1,c.queue),c=ba(),p={state:a,dispatch:null,action:t,pending:null},c.queue=p,r=B_.bind(null,xt,p,x,r),p.dispatch=r,c.memoizedState=t,[a,r,!1]}function ex(t){var a=In();return tx(a,on,t)}function tx(t,a,r){if(a=fm(t,a,Xp)[0],t=tc(ci)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=ko(a)}catch(j){throw j===Nl?Ku:j}else c=a;a=In();var p=a.queue,x=p.dispatch;return r!==a.memoizedState&&(xt.flags|=2048,El(9,{destroy:void 0},U_.bind(null,p,r),null)),[c,x,t]}function U_(t,a){t.action=a}function nx(t){var a=In(),r=on;if(r!==null)return tx(a,r,t);In(),a=a.memoizedState,r=In();var c=r.queue.dispatch;return r.memoizedState=t,[a,c,!1]}function El(t,a,r,c){return t={tag:t,create:r,deps:c,inst:a,next:null},a=xt.updateQueue,a===null&&(a=Wu(),xt.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=t.next=t:(c=r.next,r.next=t,t.next=c,a.lastEffect=t),t}function ax(){return In().memoizedState}function nc(t,a,r,c){var p=ba();xt.flags|=t,p.memoizedState=El(1|a,{destroy:void 0},r,c===void 0?null:c)}function ac(t,a,r,c){var p=In();c=c===void 0?null:c;var x=p.memoizedState.inst;on!==null&&c!==null&&om(c,on.memoizedState.deps)?p.memoizedState=El(a,x,r,c):(xt.flags|=t,p.memoizedState=El(1|a,x,r,c))}function sx(t,a){nc(8390656,8,t,a)}function ym(t,a){ac(2048,8,t,a)}function F_(t){xt.flags|=4;var a=xt.updateQueue;if(a===null)a=Wu(),xt.updateQueue=a,a.events=[t];else{var r=a.events;r===null?a.events=[t]:r.push(t)}}function ix(t){var a=In().memoizedState;return F_({ref:a,nextImpl:t}),function(){if((Qt&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}function rx(t,a){return ac(4,2,t,a)}function lx(t,a){return ac(4,4,t,a)}function ox(t,a){if(typeof a=="function"){t=t();var r=a(t);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function ux(t,a,r){r=r!=null?r.concat([t]):null,ac(4,4,ox.bind(null,a,t),r)}function vm(){}function cx(t,a){var r=In();a=a===void 0?null:a;var c=r.memoizedState;return a!==null&&om(a,c[1])?c[0]:(r.memoizedState=[t,a],t)}function dx(t,a){var r=In();a=a===void 0?null:a;var c=r.memoizedState;if(a!==null&&om(a,c[1]))return c[0];if(c=t(),Fr){$t(!0);try{t()}finally{$t(!1)}}return r.memoizedState=[c,a],c}function bm(t,a,r){return r===void 0||(ui&1073741824)!==0&&(Mt&261930)===0?t.memoizedState=a:(t.memoizedState=r,t=mg(),xt.lanes|=t,Gi|=t,r)}function mx(t,a,r,c){return Wn(r,a)?r:Sl.current!==null?(t=bm(t,r,c),Wn(t,a)||(Zn=!0),t):(ui&42)===0||(ui&1073741824)!==0&&(Mt&261930)===0?(Zn=!0,t.memoizedState=r):(t=mg(),xt.lanes|=t,Gi|=t,a)}function hx(t,a,r,c,p){var x=K.p;K.p=x!==0&&8>x?x:8;var j=Q.T,C={};Q.T=C,jm(t,!1,a,r);try{var V=p(),pe=Q.S;if(pe!==null&&pe(C,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var we=L_(V,c);Eo(t,a,we,Va(t))}else Eo(t,a,c,Va(t))}catch(Me){Eo(t,a,{then:function(){},status:"rejected",reason:Me},Va())}finally{K.p=x,j!==null&&C.types!==null&&(j.types=C.types),Q.T=j}}function q_(){}function _m(t,a,r,c){if(t.tag!==5)throw Error(o(476));var p=fx(t).queue;hx(t,p,a,X,r===null?q_:function(){return px(t),r(c)})}function fx(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:X},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:r},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function px(t){var a=fx(t);a.next===null&&(a=t.alternate.memoizedState),Eo(t,a.next.queue,{},Va())}function Nm(){return oa(Ho)}function xx(){return In().memoizedState}function gx(){return In().memoizedState}function Z_(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var r=Va();t=Fi(r);var c=qi(a,t,r);c!==null&&(Ra(c,a,r),No(c,a,r)),a={cache:Jd()},t.payload=a;return}a=a.return}}function H_(t,a,r){var c=Va();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},sc(t)?vx(a,r):(r=mo(t,a,r,c),r!==null&&(Ra(r,t,c),bx(r,a,c)))}function yx(t,a,r){var c=Va();Eo(t,a,r,c)}function Eo(t,a,r,c){var p={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(sc(t))vx(a,p);else{var x=t.alternate;if(t.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var j=a.lastRenderedState,C=x(j,r);if(p.hasEagerState=!0,p.eagerState=C,Wn(C,j))return Fs(t,a,p,0),mn===null&&Mr(),!1}catch{}if(r=mo(t,a,p,c),r!==null)return Ra(r,t,c),bx(r,a,c),!0}return!1}function jm(t,a,r,c){if(c={lane:2,revertLane:th(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},sc(t)){if(a)throw Error(o(479))}else a=mo(t,r,c,2),a!==null&&Ra(a,t,2)}function sc(t){var a=t.alternate;return t===xt||a!==null&&a===xt}function vx(t,a){wl=Ju=!0;var r=t.pending;r===null?a.next=a:(a.next=r.next,r.next=a),t.pending=a}function bx(t,a,r){if((r&4194048)!==0){var c=a.lanes;c&=t.pendingLanes,r|=c,a.lanes=r,qe(t,r)}}var To={readContext:oa,use:ec,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useLayoutEffect:Mn,useInsertionEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useSyncExternalStore:Mn,useId:Mn,useHostTransitionStatus:Mn,useFormState:Mn,useActionState:Mn,useOptimistic:Mn,useMemoCache:Mn,useCacheRefresh:Mn};To.useEffectEvent=Mn;var _x={readContext:oa,use:ec,useCallback:function(t,a){return ba().memoizedState=[t,a===void 0?null:a],t},useContext:oa,useEffect:sx,useImperativeHandle:function(t,a,r){r=r!=null?r.concat([t]):null,nc(4194308,4,ox.bind(null,a,t),r)},useLayoutEffect:function(t,a){return nc(4194308,4,t,a)},useInsertionEffect:function(t,a){nc(4,2,t,a)},useMemo:function(t,a){var r=ba();a=a===void 0?null:a;var c=t();if(Fr){$t(!0);try{t()}finally{$t(!1)}}return r.memoizedState=[c,a],c},useReducer:function(t,a,r){var c=ba();if(r!==void 0){var p=r(a);if(Fr){$t(!0);try{r(a)}finally{$t(!1)}}}else p=a;return c.memoizedState=c.baseState=p,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:p},c.queue=t,t=t.dispatch=H_.bind(null,xt,t),[c.memoizedState,t]},useRef:function(t){var a=ba();return t={current:t},a.memoizedState=t},useState:function(t){t=xm(t);var a=t.queue,r=yx.bind(null,xt,a);return a.dispatch=r,[t.memoizedState,r]},useDebugValue:vm,useDeferredValue:function(t,a){var r=ba();return bm(r,t,a)},useTransition:function(){var t=xm(!1);return t=hx.bind(null,xt,t.queue,!0,!1),ba().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,r){var c=xt,p=ba();if(wt){if(r===void 0)throw Error(o(407));r=r()}else{if(r=a(),mn===null)throw Error(o(349));(Mt&127)!==0||qp(c,a,r)}p.memoizedState=r;var x={value:r,getSnapshot:a};return p.queue=x,sx(Hp.bind(null,c,x,t),[t]),c.flags|=2048,El(9,{destroy:void 0},Zp.bind(null,c,x,r,a),null),r},useId:function(){var t=ba(),a=mn.identifierPrefix;if(wt){var r=Ie,c=Ae;r=(c&~(1<<32-Dt(c)-1)).toString(32)+r,a="_"+a+"R_"+r,r=Xu++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=P_++,a="_"+a+"r_"+r.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Nm,useFormState:Wp,useActionState:Wp,useOptimistic:function(t){var a=ba();a.memoizedState=a.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=jm.bind(null,xt,!0,r),r.dispatch=a,[t,a]},useMemoCache:hm,useCacheRefresh:function(){return ba().memoizedState=Z_.bind(null,xt)},useEffectEvent:function(t){var a=ba(),r={impl:t};return a.memoizedState=r,function(){if((Qt&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}},Sm={readContext:oa,use:ec,useCallback:cx,useContext:oa,useEffect:ym,useImperativeHandle:ux,useInsertionEffect:rx,useLayoutEffect:lx,useMemo:dx,useReducer:tc,useRef:ax,useState:function(){return tc(ci)},useDebugValue:vm,useDeferredValue:function(t,a){var r=In();return mx(r,on.memoizedState,t,a)},useTransition:function(){var t=tc(ci)[0],a=In().memoizedState;return[typeof t=="boolean"?t:ko(t),a]},useSyncExternalStore:Fp,useId:xx,useHostTransitionStatus:Nm,useFormState:ex,useActionState:ex,useOptimistic:function(t,a){var r=In();return Gp(r,on,t,a)},useMemoCache:hm,useCacheRefresh:gx};Sm.useEffectEvent=ix;var Nx={readContext:oa,use:ec,useCallback:cx,useContext:oa,useEffect:ym,useImperativeHandle:ux,useInsertionEffect:rx,useLayoutEffect:lx,useMemo:dx,useReducer:pm,useRef:ax,useState:function(){return pm(ci)},useDebugValue:vm,useDeferredValue:function(t,a){var r=In();return on===null?bm(r,t,a):mx(r,on.memoizedState,t,a)},useTransition:function(){var t=pm(ci)[0],a=In().memoizedState;return[typeof t=="boolean"?t:ko(t),a]},useSyncExternalStore:Fp,useId:xx,useHostTransitionStatus:Nm,useFormState:nx,useActionState:nx,useOptimistic:function(t,a){var r=In();return on!==null?Gp(r,on,t,a):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:hm,useCacheRefresh:gx};Nx.useEffectEvent=ix;function wm(t,a,r,c){a=t.memoizedState,r=r(c,a),r=r==null?a:w({},a,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var km={enqueueSetState:function(t,a,r){t=t._reactInternals;var c=Va(),p=Fi(c);p.payload=a,r!=null&&(p.callback=r),a=qi(t,p,c),a!==null&&(Ra(a,t,c),No(a,t,c))},enqueueReplaceState:function(t,a,r){t=t._reactInternals;var c=Va(),p=Fi(c);p.tag=1,p.payload=a,r!=null&&(p.callback=r),a=qi(t,p,c),a!==null&&(Ra(a,t,c),No(a,t,c))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var r=Va(),c=Fi(r);c.tag=2,a!=null&&(c.callback=a),a=qi(t,c,r),a!==null&&(Ra(a,t,r),No(a,t,r))}};function jx(t,a,r,c,p,x,j){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,x,j):a.prototype&&a.prototype.isPureReactComponent?!Ri(r,c)||!Ri(p,x):!0}function Sx(t,a,r,c){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,c),a.state!==t&&km.enqueueReplaceState(a,a.state,null)}function qr(t,a){var r=a;if("ref"in a){r={};for(var c in a)c!=="ref"&&(r[c]=a[c])}if(t=t.defaultProps){r===a&&(r=w({},r));for(var p in t)r[p]===void 0&&(r[p]=t[p])}return r}function wx(t){Ar(t)}function kx(t){console.error(t)}function Ex(t){Ar(t)}function ic(t,a){try{var r=t.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function Tx(t,a,r){try{var c=t.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Em(t,a,r){return r=Fi(r),r.tag=3,r.payload={element:null},r.callback=function(){ic(t,a)},r}function Cx(t){return t=Fi(t),t.tag=3,t}function Ax(t,a,r,c){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var x=c.value;t.payload=function(){return p(x)},t.callback=function(){Tx(a,r,c)}}var j=r.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(t.callback=function(){Tx(a,r,c),typeof p!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function K_(t,a,r,c,p){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=r.alternate,a!==null&&vl(a,r,p,!0),r=Ha.current,r!==null){switch(r.tag){case 31:case 13:return cs===null?gc():r.alternate===null&&zn===0&&(zn=3),r.flags&=-257,r.flags|=65536,r.lanes=p,c===Qu?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([c]):a.add(c),Xm(t,c,p)),!1;case 22:return r.flags|=65536,c===Qu?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([c]):r.add(c)),Xm(t,c,p)),!1}throw Error(o(435,r.tag))}return Xm(t,c,p),gc(),!1}if(wt)return a=Ha.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,c!==yl&&(t=Error(o(422),{cause:c}),Rr(u(t,r)))):(c!==yl&&(a=Error(o(423),{cause:c}),Rr(u(a,r))),t=t.current.alternate,t.flags|=65536,p&=-p,t.lanes|=p,c=u(c,r),p=Em(t.stateNode,c,p),am(t,p),zn!==4&&(zn=2)),!1;var x=Error(o(520),{cause:c});if(x=u(x,r),Lo===null?Lo=[x]:Lo.push(x),zn!==4&&(zn=2),a===null)return!0;c=u(c,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,t=p&-p,r.lanes|=t,t=Em(r.stateNode,c,t),am(r,t),!1;case 1:if(a=r.type,x=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Vi===null||!Vi.has(x))))return r.flags|=65536,p&=-p,r.lanes|=p,p=Cx(p),Ax(p,t,r,c),am(r,p),!1}r=r.return}while(r!==null);return!1}var Tm=Error(o(461)),Zn=!1;function ua(t,a,r,c){a.child=t===null?Rp(a,null,r,c):Ur(a,t.child,r,c)}function Mx(t,a,r,c,p){r=r.render;var x=a.ref;if("ref"in c){var j={};for(var C in c)C!=="ref"&&(j[C]=c[C])}else j=c;return Lr(a),c=um(t,a,r,j,x,p),C=cm(),t!==null&&!Zn?(dm(t,a,p),di(t,a,p)):(wt&&C&&$n(a),a.flags|=1,ua(t,a,c,p),a.child)}function zx(t,a,r,c,p){if(t===null){var x=r.type;return typeof x=="function"&&!xl(x)&&x.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=x,Ox(t,a,x,c,p)):(t=Or(r.type,null,c,a,a.mode,p),t.ref=a.ref,t.return=a,a.child=t)}if(x=t.child,!Lm(t,p)){var j=x.memoizedProps;if(r=r.compare,r=r!==null?r:Ri,r(j,c)&&t.ref===a.ref)return di(t,a,p)}return a.flags|=1,t=us(x,c),t.ref=a.ref,t.return=a,a.child=t}function Ox(t,a,r,c,p){if(t!==null){var x=t.memoizedProps;if(Ri(x,c)&&t.ref===a.ref)if(Zn=!1,a.pendingProps=c=x,Lm(t,p))(t.flags&131072)!==0&&(Zn=!0);else return a.lanes=t.lanes,di(t,a,p)}return Cm(t,a,r,c,p)}function Rx(t,a,r,c){var p=c.children,x=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|r:r,t!==null){for(c=a.child=t.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~x}else c=0,a.child=null;return Dx(t,a,x,r,c)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Hu(a,x!==null?x.cachePool:null),x!==null?Pp(a,x):im(),Ip(a);else return c=a.lanes=536870912,Dx(t,a,x!==null?x.baseLanes|r:r,r,c)}else x!==null?(Hu(a,x.cachePool),Pp(a,x),Hi(),a.memoizedState=null):(t!==null&&Hu(a,null),im(),Hi());return ua(t,a,p,r),a.child}function Co(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Dx(t,a,r,c,p){var x=Wd();return x=x===null?null:{parent:Fn._currentValue,pool:x},a.memoizedState={baseLanes:r,cachePool:x},t!==null&&Hu(a,null),im(),Ip(a),t!==null&&vl(t,a,c,!0),a.childLanes=p,null}function rc(t,a){return a=oc({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Lx(t,a,r){return Ur(a,t.child,null,r),t=rc(a,a.pendingProps),t.flags|=2,Ka(a),a.memoizedState=null,t}function Q_(t,a,r){var c=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(wt){if(c.mode==="hidden")return t=rc(a,c),a.lanes=536870912,Co(null,t);if(lm(a),(t=qt)?(t=Vg(t,Ca),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:xe!==null?{id:Ae,overflow:Ie}:null,retryLane:536870912,hydrationErrors:null},r=fo(t),r.return=a,a.child=r,Ft=a,qt=null)):t=null,t===null)throw Zs(a);return a.lanes=536870912,null}return rc(a,c)}var x=t.memoizedState;if(x!==null){var j=x.dehydrated;if(lm(a),p)if(a.flags&256)a.flags&=-257,a=Lx(t,a,r);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(o(558));else if(Zn||vl(t,a,r,!1),p=(r&t.childLanes)!==0,Zn||p){if(c=mn,c!==null&&(j=xn(c,r),j!==0&&j!==x.retryLane))throw x.retryLane=j,os(t,j),Ra(c,t,j),Tm;gc(),a=Lx(t,a,r)}else t=x.treeContext,qt=ds(j.nextSibling),Ft=a,wt=!0,qs=null,Ca=!1,t!==null&&va(a,t),a=rc(a,c),a.flags|=4096;return a}return t=us(t.child,{mode:c.mode,children:c.children}),t.ref=a.ref,a.child=t,t.return=a,t}function lc(t,a){var r=a.ref;if(r===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(t===null||t.ref!==r)&&(a.flags|=4194816)}}function Cm(t,a,r,c,p){return Lr(a),r=um(t,a,r,c,void 0,p),c=cm(),t!==null&&!Zn?(dm(t,a,p),di(t,a,p)):(wt&&c&&$n(a),a.flags|=1,ua(t,a,r,p),a.child)}function Px(t,a,r,c,p,x){return Lr(a),a.updateQueue=null,r=Up(a,c,r,p),Bp(t),c=cm(),t!==null&&!Zn?(dm(t,a,x),di(t,a,x)):(wt&&c&&$n(a),a.flags|=1,ua(t,a,r,x),a.child)}function Ix(t,a,r,c,p){if(Lr(a),a.stateNode===null){var x=ii,j=r.contextType;typeof j=="object"&&j!==null&&(x=oa(j)),x=new r(c,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=km,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=c,x.state=a.memoizedState,x.refs={},tm(a),j=r.contextType,x.context=typeof j=="object"&&j!==null?oa(j):ii,x.state=a.memoizedState,j=r.getDerivedStateFromProps,typeof j=="function"&&(wm(a,r,j,c),x.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(j=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),j!==x.state&&km.enqueueReplaceState(x,x.state,null),So(a,c,x,p),jo(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(t===null){x=a.stateNode;var C=a.memoizedProps,V=qr(r,C);x.props=V;var pe=x.context,we=r.contextType;j=ii,typeof we=="object"&&we!==null&&(j=oa(we));var Me=r.getDerivedStateFromProps;we=typeof Me=="function"||typeof x.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,we||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C||pe!==j)&&Sx(a,x,c,j),Ui=!1;var ge=a.memoizedState;x.state=ge,So(a,c,x,p),jo(),pe=a.memoizedState,C||ge!==pe||Ui?(typeof Me=="function"&&(wm(a,r,Me,c),pe=a.memoizedState),(V=Ui||jx(a,r,V,c,ge,pe,j))?(we||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=pe),x.props=c,x.state=pe,x.context=j,c=V):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{x=a.stateNode,nm(t,a),j=a.memoizedProps,we=qr(r,j),x.props=we,Me=a.pendingProps,ge=x.context,pe=r.contextType,V=ii,typeof pe=="object"&&pe!==null&&(V=oa(pe)),C=r.getDerivedStateFromProps,(pe=typeof C=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(j!==Me||ge!==V)&&Sx(a,x,c,V),Ui=!1,ge=a.memoizedState,x.state=ge,So(a,c,x,p),jo();var ve=a.memoizedState;j!==Me||ge!==ve||Ui||t!==null&&t.dependencies!==null&&qu(t.dependencies)?(typeof C=="function"&&(wm(a,r,C,c),ve=a.memoizedState),(we=Ui||jx(a,r,we,c,ge,ve,V)||t!==null&&t.dependencies!==null&&qu(t.dependencies))?(pe||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,ve,V),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,ve,V)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=ve),x.props=c,x.state=ve,x.context=V,c=we):(typeof x.componentDidUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=1024),c=!1)}return x=c,lc(t,a),c=(a.flags&128)!==0,x||c?(x=a.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,t!==null&&c?(a.child=Ur(a,t.child,null,p),a.child=Ur(a,null,r,p)):ua(t,a,r,p),a.memoizedState=x.state,t=a.child):t=di(t,a,p),t}function Bx(t,a,r,c){return li(),a.flags|=256,ua(t,a,r,c),a.child}var Am={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mm(t){return{baseLanes:t,cachePool:Tp()}}function zm(t,a,r){return t=t!==null?t.childLanes&~r:0,a&&(t|=Ga),t}function Ux(t,a,r){var c=a.pendingProps,p=!1,x=(a.flags&128)!==0,j;if((j=x)||(j=t!==null&&t.memoizedState===null?!1:(Pn.current&2)!==0),j&&(p=!0,a.flags&=-129),j=(a.flags&32)!==0,a.flags&=-33,t===null){if(wt){if(p?Zi(a):Hi(),(t=qt)?(t=Vg(t,Ca),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:xe!==null?{id:Ae,overflow:Ie}:null,retryLane:536870912,hydrationErrors:null},r=fo(t),r.return=a,a.child=r,Ft=a,qt=null)):t=null,t===null)throw Zs(a);return fh(t)?a.lanes=32:a.lanes=536870912,null}var C=c.children;return c=c.fallback,p?(Hi(),p=a.mode,C=oc({mode:"hidden",children:C},p),c=ri(c,p,r,null),C.return=a,c.return=a,C.sibling=c,a.child=C,c=a.child,c.memoizedState=Mm(r),c.childLanes=zm(t,j,r),a.memoizedState=Am,Co(null,c)):(Zi(a),Om(a,C))}var V=t.memoizedState;if(V!==null&&(C=V.dehydrated,C!==null)){if(x)a.flags&256?(Zi(a),a.flags&=-257,a=Rm(t,a,r)):a.memoizedState!==null?(Hi(),a.child=t.child,a.flags|=128,a=null):(Hi(),C=c.fallback,p=a.mode,c=oc({mode:"visible",children:c.children},p),C=ri(C,p,r,null),C.flags|=2,c.return=a,C.return=a,c.sibling=C,a.child=c,Ur(a,t.child,null,r),c=a.child,c.memoizedState=Mm(r),c.childLanes=zm(t,j,r),a.memoizedState=Am,a=Co(null,c));else if(Zi(a),fh(C)){if(j=C.nextSibling&&C.nextSibling.dataset,j)var pe=j.dgst;j=pe,c=Error(o(419)),c.stack="",c.digest=j,Rr({value:c,source:null,stack:null}),a=Rm(t,a,r)}else if(Zn||vl(t,a,r,!1),j=(r&t.childLanes)!==0,Zn||j){if(j=mn,j!==null&&(c=xn(j,r),c!==0&&c!==V.retryLane))throw V.retryLane=c,os(t,c),Ra(j,t,c),Tm;hh(C)||gc(),a=Rm(t,a,r)}else hh(C)?(a.flags|=192,a.child=t.child,a=null):(t=V.treeContext,qt=ds(C.nextSibling),Ft=a,wt=!0,qs=null,Ca=!1,t!==null&&va(a,t),a=Om(a,c.children),a.flags|=4096);return a}return p?(Hi(),C=c.fallback,p=a.mode,V=t.child,pe=V.sibling,c=us(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,pe!==null?C=us(pe,C):(C=ri(C,p,r,null),C.flags|=2),C.return=a,c.return=a,c.sibling=C,a.child=c,Co(null,c),c=a.child,C=t.child.memoizedState,C===null?C=Mm(r):(p=C.cachePool,p!==null?(V=Fn._currentValue,p=p.parent!==V?{parent:V,pool:V}:p):p=Tp(),C={baseLanes:C.baseLanes|r,cachePool:p}),c.memoizedState=C,c.childLanes=zm(t,j,r),a.memoizedState=Am,Co(t.child,c)):(Zi(a),r=t.child,t=r.sibling,r=us(r,{mode:"visible",children:c.children}),r.return=a,r.sibling=null,t!==null&&(j=a.deletions,j===null?(a.deletions=[t],a.flags|=16):j.push(t)),a.child=r,a.memoizedState=null,r)}function Om(t,a){return a=oc({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function oc(t,a){return t=pa(22,t,null,a),t.lanes=0,t}function Rm(t,a,r){return Ur(a,t.child,null,r),t=Om(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Fx(t,a,r){t.lanes|=a;var c=t.alternate;c!==null&&(c.lanes|=a),$d(t.return,a,r)}function Dm(t,a,r,c,p,x){var j=t.memoizedState;j===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:p,treeForkCount:x}:(j.isBackwards=a,j.rendering=null,j.renderingStartTime=0,j.last=c,j.tail=r,j.tailMode=p,j.treeForkCount=x)}function qx(t,a,r){var c=a.pendingProps,p=c.revealOrder,x=c.tail;c=c.children;var j=Pn.current,C=(j&2)!==0;if(C?(j=j&1|2,a.flags|=128):j&=1,I(Pn,j),ua(t,a,c,r),c=wt?k:0,!C&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fx(t,r,a);else if(t.tag===19)Fx(t,r,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(p){case"forwards":for(r=a.child,p=null;r!==null;)t=r.alternate,t!==null&&Yu(t)===null&&(p=r),r=r.sibling;r=p,r===null?(p=a.child,a.child=null):(p=r.sibling,r.sibling=null),Dm(a,!1,p,r,x,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=a.child,a.child=null;p!==null;){if(t=p.alternate,t!==null&&Yu(t)===null){a.child=p;break}t=p.sibling,p.sibling=r,r=p,p=t}Dm(a,!0,r,null,x,c);break;case"together":Dm(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function di(t,a,r){if(t!==null&&(a.dependencies=t.dependencies),Gi|=a.lanes,(r&a.childLanes)===0)if(t!==null){if(vl(t,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(o(153));if(a.child!==null){for(t=a.child,r=us(t,t.pendingProps),a.child=r,r.return=a;t.sibling!==null;)t=t.sibling,r=r.sibling=us(t,t.pendingProps),r.return=a;r.sibling=null}return a.child}function Lm(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&qu(t)))}function G_(t,a,r){switch(a.tag){case 3:Le(a,a.stateNode.containerInfo),Bi(a,Fn,t.memoizedState.cache),li();break;case 27:case 5:Ge(a);break;case 4:Le(a,a.stateNode.containerInfo);break;case 10:Bi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,lm(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(Zi(a),a.flags|=128,null):(r&a.child.childLanes)!==0?Ux(t,a,r):(Zi(a),t=di(t,a,r),t!==null?t.sibling:null);Zi(a);break;case 19:var p=(t.flags&128)!==0;if(c=(r&a.childLanes)!==0,c||(vl(t,a,r,!1),c=(r&a.childLanes)!==0),p){if(c)return qx(t,a,r);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),I(Pn,Pn.current),c)break;return null;case 22:return a.lanes=0,Rx(t,a,r,a.pendingProps);case 24:Bi(a,Fn,t.memoizedState.cache)}return di(t,a,r)}function Zx(t,a,r){if(t!==null)if(t.memoizedProps!==a.pendingProps)Zn=!0;else{if(!Lm(t,r)&&(a.flags&128)===0)return Zn=!1,G_(t,a,r);Zn=(t.flags&131072)!==0}else Zn=!1,wt&&(a.flags&1048576)!==0&&vt(a,k,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(t=Ir(a.elementType),a.type=t,typeof t=="function")xl(t)?(c=qr(t,c),a.tag=1,a=Ix(null,a,t,c,r)):(a.tag=0,a=Cm(null,a,t,c,r));else{if(t!=null){var p=t.$$typeof;if(p===G){a.tag=11,a=Mx(null,a,t,c,r);break e}else if(p===H){a.tag=14,a=zx(null,a,t,c,r);break e}}throw a=oe(t)||t,Error(o(306,a,""))}}return a;case 0:return Cm(t,a,a.type,a.pendingProps,r);case 1:return c=a.type,p=qr(c,a.pendingProps),Ix(t,a,c,p,r);case 3:e:{if(Le(a,a.stateNode.containerInfo),t===null)throw Error(o(387));c=a.pendingProps;var x=a.memoizedState;p=x.element,nm(t,a),So(a,c,null,r);var j=a.memoizedState;if(c=j.cache,Bi(a,Fn,c),c!==x.cache&&Yd(a,[Fn],r,!0),jo(),c=j.element,x.isDehydrated)if(x={element:c,isDehydrated:!1,cache:j.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=Bx(t,a,c,r);break e}else if(c!==p){p=u(Error(o(424)),a),Rr(p),a=Bx(t,a,c,r);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,qt=ds(t.firstChild),Ft=a,wt=!0,qs=null,Ca=!0,r=Rp(a,null,c,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(li(),c===p){a=di(t,a,r);break e}ua(t,a,c,r)}a=a.child}return a;case 26:return lc(t,a),t===null?(r=ey(a.type,null,a.pendingProps,null))?a.memoizedState=r:wt||(r=a.type,t=a.pendingProps,c=Sc(Ne.current).createElement(r),c[Wt]=a,c[hn]=t,ca(c,r,t),vn(c),a.stateNode=c):a.memoizedState=ey(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Ge(a),t===null&&wt&&(c=a.stateNode=Jg(a.type,a.pendingProps,Ne.current),Ft=a,Ca=!0,p=qt,Xi(a.type)?(ph=p,qt=ds(c.firstChild)):qt=p),ua(t,a,a.pendingProps.children,r),lc(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&wt&&((p=c=qt)&&(c=jN(c,a.type,a.pendingProps,Ca),c!==null?(a.stateNode=c,Ft=a,qt=ds(c.firstChild),Ca=!1,p=!0):p=!1),p||Zs(a)),Ge(a),p=a.type,x=a.pendingProps,j=t!==null?t.memoizedProps:null,c=x.children,ch(p,x)?c=null:j!==null&&ch(p,j)&&(a.flags|=32),a.memoizedState!==null&&(p=um(t,a,I_,null,null,r),Ho._currentValue=p),lc(t,a),ua(t,a,c,r),a.child;case 6:return t===null&&wt&&((t=r=qt)&&(r=SN(r,a.pendingProps,Ca),r!==null?(a.stateNode=r,Ft=a,qt=null,t=!0):t=!1),t||Zs(a)),null;case 13:return Ux(t,a,r);case 4:return Le(a,a.stateNode.containerInfo),c=a.pendingProps,t===null?a.child=Ur(a,null,c,r):ua(t,a,c,r),a.child;case 11:return Mx(t,a,a.type,a.pendingProps,r);case 7:return ua(t,a,a.pendingProps,r),a.child;case 8:return ua(t,a,a.pendingProps.children,r),a.child;case 12:return ua(t,a,a.pendingProps.children,r),a.child;case 10:return c=a.pendingProps,Bi(a,a.type,c.value),ua(t,a,c.children,r),a.child;case 9:return p=a.type._context,c=a.pendingProps.children,Lr(a),p=oa(p),c=c(p),a.flags|=1,ua(t,a,c,r),a.child;case 14:return zx(t,a,a.type,a.pendingProps,r);case 15:return Ox(t,a,a.type,a.pendingProps,r);case 19:return qx(t,a,r);case 31:return Q_(t,a,r);case 22:return Rx(t,a,r,a.pendingProps);case 24:return Lr(a),c=oa(Fn),t===null?(p=Wd(),p===null&&(p=mn,x=Jd(),p.pooledCache=x,x.refCount++,x!==null&&(p.pooledCacheLanes|=r),p=x),a.memoizedState={parent:c,cache:p},tm(a),Bi(a,Fn,p)):((t.lanes&r)!==0&&(nm(t,a),So(a,null,null,r),jo()),p=t.memoizedState,x=a.memoizedState,p.parent!==c?(p={parent:c,cache:c},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Bi(a,Fn,c)):(c=x.cache,Bi(a,Fn,c),c!==p.cache&&Yd(a,[Fn],r,!0))),ua(t,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(o(156,a.tag))}function mi(t){t.flags|=4}function Pm(t,a,r,c,p){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(p&335544128)===p)if(t.stateNode.complete)t.flags|=8192;else if(xg())t.flags|=8192;else throw Br=Qu,em}else t.flags&=-16777217}function Hx(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!iy(a))if(xg())t.flags|=8192;else throw Br=Qu,em}function uc(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Dn():536870912,t.lanes|=a,Ml|=a)}function Ao(t,a){if(!wt)switch(t.tailMode){case"hidden":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function gn(t){var a=t.alternate!==null&&t.alternate.child===t.child,r=0,c=0;if(a)for(var p=t.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=c,t.childLanes=r,a}function V_(t,a,r){var c=a.pendingProps;switch(An(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(a),null;case 1:return gn(a),null;case 3:return r=a.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),oi(Fn),me(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ks(a)?mi(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,go())),gn(a),null;case 26:var p=a.type,x=a.memoizedState;return t===null?(mi(a),x!==null?(gn(a),Hx(a,x)):(gn(a),Pm(a,p,null,c,r))):x?x!==t.memoizedState?(mi(a),gn(a),Hx(a,x)):(gn(a),a.flags&=-16777217):(t=t.memoizedProps,t!==c&&mi(a),gn(a),Pm(a,p,t,c,r)),null;case 27:if(Ye(a),r=Ne.current,p=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==c&&mi(a);else{if(!c){if(a.stateNode===null)throw Error(o(166));return gn(a),null}t=ce.current,ks(a)?xo(a):(t=Jg(p,c,r),a.stateNode=t,mi(a))}return gn(a),null;case 5:if(Ye(a),p=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==c&&mi(a);else{if(!c){if(a.stateNode===null)throw Error(o(166));return gn(a),null}if(x=ce.current,ks(a))xo(a);else{var j=Sc(Ne.current);switch(x){case 1:x=j.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:x=j.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":x=j.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":x=j.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":x=j.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof c.is=="string"?j.createElement("select",{is:c.is}):j.createElement("select"),c.multiple?x.multiple=!0:c.size&&(x.size=c.size);break;default:x=typeof c.is=="string"?j.createElement(p,{is:c.is}):j.createElement(p)}}x[Wt]=a,x[hn]=c;e:for(j=a.child;j!==null;){if(j.tag===5||j.tag===6)x.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===a)break e;for(;j.sibling===null;){if(j.return===null||j.return===a)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}a.stateNode=x;e:switch(ca(x,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&mi(a)}}return gn(a),Pm(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,r),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==c&&mi(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(o(166));if(t=Ne.current,ks(a)){if(t=a.stateNode,r=a.memoizedProps,c=null,p=Ft,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}t[Wt]=a,t=!!(t.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||Ug(t.nodeValue,r)),t||Zs(a,!0)}else t=Sc(t).createTextNode(c),t[Wt]=a,a.stateNode=t}return gn(a),null;case 31:if(r=a.memoizedState,t===null||t.memoizedState!==null){if(c=ks(a),r!==null){if(t===null){if(!c)throw Error(o(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[Wt]=a}else li(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;gn(a),t=!1}else r=go(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return a.flags&256?(Ka(a),a):(Ka(a),null);if((a.flags&128)!==0)throw Error(o(558))}return gn(a),null;case 13:if(c=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(p=ks(a),c!==null&&c.dehydrated!==null){if(t===null){if(!p)throw Error(o(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));p[Wt]=a}else li(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;gn(a),p=!1}else p=go(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Ka(a),a):(Ka(a),null)}return Ka(a),(a.flags&128)!==0?(a.lanes=r,a):(r=c!==null,t=t!==null&&t.memoizedState!==null,r&&(c=a.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==p&&(c.flags|=2048)),r!==t&&r&&(a.child.flags|=8192),uc(a,a.updateQueue),gn(a),null);case 4:return me(),t===null&&ih(a.stateNode.containerInfo),gn(a),null;case 10:return oi(a.type),gn(a),null;case 19:if(ne(Pn),c=a.memoizedState,c===null)return gn(a),null;if(p=(a.flags&128)!==0,x=c.rendering,x===null)if(p)Ao(c,!1);else{if(zn!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(x=Yu(t),x!==null){for(a.flags|=128,Ao(c,!1),t=x.updateQueue,a.updateQueue=t,uc(a,t),a.subtreeFlags=0,t=r,r=a.child;r!==null;)ho(r,t),r=r.sibling;return I(Pn,Pn.current&1|2),wt&&We(a,c.treeForkCount),a.child}t=t.sibling}c.tail!==null&&se()>fc&&(a.flags|=128,p=!0,Ao(c,!1),a.lanes=4194304)}else{if(!p)if(t=Yu(x),t!==null){if(a.flags|=128,p=!0,t=t.updateQueue,a.updateQueue=t,uc(a,t),Ao(c,!0),c.tail===null&&c.tailMode==="hidden"&&!x.alternate&&!wt)return gn(a),null}else 2*se()-c.renderingStartTime>fc&&r!==536870912&&(a.flags|=128,p=!0,Ao(c,!1),a.lanes=4194304);c.isBackwards?(x.sibling=a.child,a.child=x):(t=c.last,t!==null?t.sibling=x:a.child=x,c.last=x)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=se(),t.sibling=null,r=Pn.current,I(Pn,p?r&1|2:r&1),wt&&We(a,c.treeForkCount),t):(gn(a),null);case 22:case 23:return Ka(a),rm(),c=a.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(r&536870912)!==0&&(a.flags&128)===0&&(gn(a),a.subtreeFlags&6&&(a.flags|=8192)):gn(a),r=a.updateQueue,r!==null&&uc(a,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==r&&(a.flags|=2048),t!==null&&ne(Pr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),oi(Fn),gn(a),null;case 25:return null;case 30:return null}throw Error(o(156,a.tag))}function $_(t,a){switch(An(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return oi(Fn),me(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Ye(a),null;case 31:if(a.memoizedState!==null){if(Ka(a),a.alternate===null)throw Error(o(340));li()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Ka(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(o(340));li()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return ne(Pn),null;case 4:return me(),null;case 10:return oi(a.type),null;case 22:case 23:return Ka(a),rm(),t!==null&&ne(Pr),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return oi(Fn),null;case 25:return null;default:return null}}function Kx(t,a){switch(An(a),a.tag){case 3:oi(Fn),me();break;case 26:case 27:case 5:Ye(a);break;case 4:me();break;case 31:a.memoizedState!==null&&Ka(a);break;case 13:Ka(a);break;case 19:ne(Pn);break;case 10:oi(a.type);break;case 22:case 23:Ka(a),rm(),t!==null&&ne(Pr);break;case 24:oi(Fn)}}function Mo(t,a){try{var r=a.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var p=c.next;r=p;do{if((r.tag&t)===t){c=void 0;var x=r.create,j=r.inst;c=x(),j.destroy=c}r=r.next}while(r!==p)}}catch(C){nn(a,a.return,C)}}function Ki(t,a,r){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var x=p.next;c=x;do{if((c.tag&t)===t){var j=c.inst,C=j.destroy;if(C!==void 0){j.destroy=void 0,p=a;var V=r,pe=C;try{pe()}catch(we){nn(p,V,we)}}}c=c.next}while(c!==x)}}catch(we){nn(a,a.return,we)}}function Qx(t){var a=t.updateQueue;if(a!==null){var r=t.stateNode;try{Lp(a,r)}catch(c){nn(t,t.return,c)}}}function Gx(t,a,r){r.props=qr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(c){nn(t,a,c)}}function zo(t,a){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof r=="function"?t.refCleanup=r(c):r.current=c}}catch(p){nn(t,a,p)}}function Ks(t,a){var r=t.ref,c=t.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(p){nn(t,a,p)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){nn(t,a,p)}else r.current=null}function Vx(t){var a=t.type,r=t.memoizedProps,c=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break e;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(p){nn(t,t.return,p)}}function Im(t,a,r){try{var c=t.stateNode;gN(c,t.type,r,a),c[hn]=a}catch(p){nn(t,t.return,p)}}function $x(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Xi(t.type)||t.tag===4}function Bm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$x(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Xi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Um(t,a,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(t),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=wa));else if(c!==4&&(c===27&&Xi(t.type)&&(r=t.stateNode,a=null),t=t.child,t!==null))for(Um(t,a,r),t=t.sibling;t!==null;)Um(t,a,r),t=t.sibling}function cc(t,a,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,a?r.insertBefore(t,a):r.appendChild(t);else if(c!==4&&(c===27&&Xi(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(cc(t,a,r),t=t.sibling;t!==null;)cc(t,a,r),t=t.sibling}function Yx(t){var a=t.stateNode,r=t.memoizedProps;try{for(var c=t.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);ca(a,c,r),a[Wt]=t,a[hn]=r}catch(x){nn(t,t.return,x)}}var hi=!1,Hn=!1,Fm=!1,Jx=typeof WeakSet=="function"?WeakSet:Set,ta=null;function Y_(t,a){if(t=t.containerInfo,oh=Mc,t=kr(t),Ps(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var p=c.anchorOffset,x=c.focusNode;c=c.focusOffset;try{r.nodeType,x.nodeType}catch{r=null;break e}var j=0,C=-1,V=-1,pe=0,we=0,Me=t,ge=null;t:for(;;){for(var ve;Me!==r||p!==0&&Me.nodeType!==3||(C=j+p),Me!==x||c!==0&&Me.nodeType!==3||(V=j+c),Me.nodeType===3&&(j+=Me.nodeValue.length),(ve=Me.firstChild)!==null;)ge=Me,Me=ve;for(;;){if(Me===t)break t;if(ge===r&&++pe===p&&(C=j),ge===x&&++we===c&&(V=j),(ve=Me.nextSibling)!==null)break;Me=ge,ge=Me.parentNode}Me=ve}r=C===-1||V===-1?null:{start:C,end:V}}else r=null}r=r||{start:0,end:0}}else r=null;for(uh={focusedElem:t,selectionRange:r},Mc=!1,ta=a;ta!==null;)if(a=ta,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,ta=t;else for(;ta!==null;){switch(a=ta,x=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)p=t[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&x!==null){t=void 0,r=a,p=x.memoizedProps,x=x.memoizedState,c=r.stateNode;try{var Ve=qr(r.type,p);t=c.getSnapshotBeforeUpdate(Ve,x),c.__reactInternalSnapshotBeforeUpdate=t}catch(st){nn(r,r.return,st)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,r=t.nodeType,r===9)mh(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":mh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=a.sibling,t!==null){t.return=a.return,ta=t;break}ta=a.return}}function Xx(t,a,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:pi(t,r),c&4&&Mo(5,r);break;case 1:if(pi(t,r),c&4)if(t=r.stateNode,a===null)try{t.componentDidMount()}catch(j){nn(r,r.return,j)}else{var p=qr(r.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(p,a,t.__reactInternalSnapshotBeforeUpdate)}catch(j){nn(r,r.return,j)}}c&64&&Qx(r),c&512&&zo(r,r.return);break;case 3:if(pi(t,r),c&64&&(t=r.updateQueue,t!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{Lp(t,a)}catch(j){nn(r,r.return,j)}}break;case 27:a===null&&c&4&&Yx(r);case 26:case 5:pi(t,r),a===null&&c&4&&Vx(r),c&512&&zo(r,r.return);break;case 12:pi(t,r);break;case 31:pi(t,r),c&4&&tg(t,r);break;case 13:pi(t,r),c&4&&ng(t,r),c&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=iN.bind(null,r),wN(t,r))));break;case 22:if(c=r.memoizedState!==null||hi,!c){a=a!==null&&a.memoizedState!==null||Hn,p=hi;var x=Hn;hi=c,(Hn=a)&&!x?xi(t,r,(r.subtreeFlags&8772)!==0):pi(t,r),hi=p,Hn=x}break;case 30:break;default:pi(t,r)}}function Wx(t){var a=t.alternate;a!==null&&(t.alternate=null,Wx(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&B(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var bn=null,Aa=!1;function fi(t,a,r){for(r=r.child;r!==null;)eg(t,a,r),r=r.sibling}function eg(t,a,r){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(ut,r)}catch{}switch(r.tag){case 26:Hn||Ks(r,a),fi(t,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Hn||Ks(r,a);var c=bn,p=Aa;Xi(r.type)&&(bn=r.stateNode,Aa=!1),fi(t,a,r),Fo(r.stateNode),bn=c,Aa=p;break;case 5:Hn||Ks(r,a);case 6:if(c=bn,p=Aa,bn=null,fi(t,a,r),bn=c,Aa=p,bn!==null)if(Aa)try{(bn.nodeType===9?bn.body:bn.nodeName==="HTML"?bn.ownerDocument.body:bn).removeChild(r.stateNode)}catch(x){nn(r,a,x)}else try{bn.removeChild(r.stateNode)}catch(x){nn(r,a,x)}break;case 18:bn!==null&&(Aa?(t=bn,Qg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Bl(t)):Qg(bn,r.stateNode));break;case 4:c=bn,p=Aa,bn=r.stateNode.containerInfo,Aa=!0,fi(t,a,r),bn=c,Aa=p;break;case 0:case 11:case 14:case 15:Ki(2,r,a),Hn||Ki(4,r,a),fi(t,a,r);break;case 1:Hn||(Ks(r,a),c=r.stateNode,typeof c.componentWillUnmount=="function"&&Gx(r,a,c)),fi(t,a,r);break;case 21:fi(t,a,r);break;case 22:Hn=(c=Hn)||r.memoizedState!==null,fi(t,a,r),Hn=c;break;default:fi(t,a,r)}}function tg(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Bl(t)}catch(r){nn(a,a.return,r)}}}function ng(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Bl(t)}catch(r){nn(a,a.return,r)}}function J_(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Jx),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Jx),a;default:throw Error(o(435,t.tag))}}function dc(t,a){var r=J_(t);a.forEach(function(c){if(!r.has(c)){r.add(c);var p=rN.bind(null,t,c);c.then(p,p)}})}function Ma(t,a){var r=a.deletions;if(r!==null)for(var c=0;c<r.length;c++){var p=r[c],x=t,j=a,C=j;e:for(;C!==null;){switch(C.tag){case 27:if(Xi(C.type)){bn=C.stateNode,Aa=!1;break e}break;case 5:bn=C.stateNode,Aa=!1;break e;case 3:case 4:bn=C.stateNode.containerInfo,Aa=!0;break e}C=C.return}if(bn===null)throw Error(o(160));eg(x,j,p),bn=null,Aa=!1,x=p.alternate,x!==null&&(x.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)ag(a,t),a=a.sibling}var Ts=null;function ag(t,a){var r=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ma(a,t),za(t),c&4&&(Ki(3,t,t.return),Mo(3,t),Ki(5,t,t.return));break;case 1:Ma(a,t),za(t),c&512&&(Hn||r===null||Ks(r,r.return)),c&64&&hi&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var p=Ts;if(Ma(a,t),za(t),c&512&&(Hn||r===null||Ks(r,r.return)),c&4){var x=r!==null?r.memoizedState:null;if(c=t.memoizedState,r===null)if(c===null)if(t.stateNode===null){e:{c=t.type,r=t.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":x=p.getElementsByTagName("title")[0],(!x||x[Tn]||x[Wt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=p.createElement(c),p.head.insertBefore(x,p.querySelector("head > title"))),ca(x,c,r),x[Wt]=t,vn(x),c=x;break e;case"link":var j=ay("link","href",p).get(c+(r.href||""));if(j){for(var C=0;C<j.length;C++)if(x=j[C],x.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&x.getAttribute("rel")===(r.rel==null?null:r.rel)&&x.getAttribute("title")===(r.title==null?null:r.title)&&x.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){j.splice(C,1);break t}}x=p.createElement(c),ca(x,c,r),p.head.appendChild(x);break;case"meta":if(j=ay("meta","content",p).get(c+(r.content||""))){for(C=0;C<j.length;C++)if(x=j[C],x.getAttribute("content")===(r.content==null?null:""+r.content)&&x.getAttribute("name")===(r.name==null?null:r.name)&&x.getAttribute("property")===(r.property==null?null:r.property)&&x.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&x.getAttribute("charset")===(r.charSet==null?null:r.charSet)){j.splice(C,1);break t}}x=p.createElement(c),ca(x,c,r),p.head.appendChild(x);break;default:throw Error(o(468,c))}x[Wt]=t,vn(x),c=x}t.stateNode=c}else sy(p,t.type,t.stateNode);else t.stateNode=ny(p,c,t.memoizedProps);else x!==c?(x===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):x.count--,c===null?sy(p,t.type,t.stateNode):ny(p,c,t.memoizedProps)):c===null&&t.stateNode!==null&&Im(t,t.memoizedProps,r.memoizedProps)}break;case 27:Ma(a,t),za(t),c&512&&(Hn||r===null||Ks(r,r.return)),r!==null&&c&4&&Im(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Ma(a,t),za(t),c&512&&(Hn||r===null||Ks(r,r.return)),t.flags&32){p=t.stateNode;try{ra(p,"")}catch(Ve){nn(t,t.return,Ve)}}c&4&&t.stateNode!=null&&(p=t.memoizedProps,Im(t,p,r!==null?r.memoizedProps:p)),c&1024&&(Fm=!0);break;case 6:if(Ma(a,t),za(t),c&4){if(t.stateNode===null)throw Error(o(162));c=t.memoizedProps,r=t.stateNode;try{r.nodeValue=c}catch(Ve){nn(t,t.return,Ve)}}break;case 3:if(Ec=null,p=Ts,Ts=wc(a.containerInfo),Ma(a,t),Ts=p,za(t),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Bl(a.containerInfo)}catch(Ve){nn(t,t.return,Ve)}Fm&&(Fm=!1,sg(t));break;case 4:c=Ts,Ts=wc(t.stateNode.containerInfo),Ma(a,t),za(t),Ts=c;break;case 12:Ma(a,t),za(t);break;case 31:Ma(a,t),za(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,dc(t,c)));break;case 13:Ma(a,t),za(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(hc=se()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,dc(t,c)));break;case 22:p=t.memoizedState!==null;var V=r!==null&&r.memoizedState!==null,pe=hi,we=Hn;if(hi=pe||p,Hn=we||V,Ma(a,t),Hn=we,hi=pe,za(t),c&8192)e:for(a=t.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(r===null||V||hi||Hn||Zr(t)),r=null,a=t;;){if(a.tag===5||a.tag===26){if(r===null){V=r=a;try{if(x=V.stateNode,p)j=x.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{C=V.stateNode;var Me=V.memoizedProps.style,ge=Me!=null&&Me.hasOwnProperty("display")?Me.display:null;C.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(Ve){nn(V,V.return,Ve)}}}else if(a.tag===6){if(r===null){V=a;try{V.stateNode.nodeValue=p?"":V.memoizedProps}catch(Ve){nn(V,V.return,Ve)}}}else if(a.tag===18){if(r===null){V=a;try{var ve=V.stateNode;p?Gg(ve,!0):Gg(V.stateNode,!1)}catch(Ve){nn(V,V.return,Ve)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=t.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,dc(t,r))));break;case 19:Ma(a,t),za(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,dc(t,c)));break;case 30:break;case 21:break;default:Ma(a,t),za(t)}}function za(t){var a=t.flags;if(a&2){try{for(var r,c=t.return;c!==null;){if($x(c)){r=c;break}c=c.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var p=r.stateNode,x=Bm(t);cc(t,x,p);break;case 5:var j=r.stateNode;r.flags&32&&(ra(j,""),r.flags&=-33);var C=Bm(t);cc(t,C,j);break;case 3:case 4:var V=r.stateNode.containerInfo,pe=Bm(t);Um(t,pe,V);break;default:throw Error(o(161))}}catch(we){nn(t,t.return,we)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function sg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;sg(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function pi(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Xx(t,a.alternate,a),a=a.sibling}function Zr(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Ki(4,a,a.return),Zr(a);break;case 1:Ks(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&Gx(a,a.return,r),Zr(a);break;case 27:Fo(a.stateNode);case 26:case 5:Ks(a,a.return),Zr(a);break;case 22:a.memoizedState===null&&Zr(a);break;case 30:Zr(a);break;default:Zr(a)}t=t.sibling}}function xi(t,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,p=t,x=a,j=x.flags;switch(x.tag){case 0:case 11:case 15:xi(p,x,r),Mo(4,x);break;case 1:if(xi(p,x,r),c=x,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(pe){nn(c,c.return,pe)}if(c=x,p=c.updateQueue,p!==null){var C=c.stateNode;try{var V=p.shared.hiddenCallbacks;if(V!==null)for(p.shared.hiddenCallbacks=null,p=0;p<V.length;p++)Dp(V[p],C)}catch(pe){nn(c,c.return,pe)}}r&&j&64&&Qx(x),zo(x,x.return);break;case 27:Yx(x);case 26:case 5:xi(p,x,r),r&&c===null&&j&4&&Vx(x),zo(x,x.return);break;case 12:xi(p,x,r);break;case 31:xi(p,x,r),r&&j&4&&tg(p,x);break;case 13:xi(p,x,r),r&&j&4&&ng(p,x);break;case 22:x.memoizedState===null&&xi(p,x,r),zo(x,x.return);break;case 30:break;default:xi(p,x,r)}a=a.sibling}}function qm(t,a){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&yo(r))}function Zm(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&yo(t))}function Cs(t,a,r,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ig(t,a,r,c),a=a.sibling}function ig(t,a,r,c){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Cs(t,a,r,c),p&2048&&Mo(9,a);break;case 1:Cs(t,a,r,c);break;case 3:Cs(t,a,r,c),p&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&yo(t)));break;case 12:if(p&2048){Cs(t,a,r,c),t=a.stateNode;try{var x=a.memoizedProps,j=x.id,C=x.onPostCommit;typeof C=="function"&&C(j,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){nn(a,a.return,V)}}else Cs(t,a,r,c);break;case 31:Cs(t,a,r,c);break;case 13:Cs(t,a,r,c);break;case 23:break;case 22:x=a.stateNode,j=a.alternate,a.memoizedState!==null?x._visibility&2?Cs(t,a,r,c):Oo(t,a):x._visibility&2?Cs(t,a,r,c):(x._visibility|=2,Tl(t,a,r,c,(a.subtreeFlags&10256)!==0||!1)),p&2048&&qm(j,a);break;case 24:Cs(t,a,r,c),p&2048&&Zm(a.alternate,a);break;default:Cs(t,a,r,c)}}function Tl(t,a,r,c,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=t,j=a,C=r,V=c,pe=j.flags;switch(j.tag){case 0:case 11:case 15:Tl(x,j,C,V,p),Mo(8,j);break;case 23:break;case 22:var we=j.stateNode;j.memoizedState!==null?we._visibility&2?Tl(x,j,C,V,p):Oo(x,j):(we._visibility|=2,Tl(x,j,C,V,p)),p&&pe&2048&&qm(j.alternate,j);break;case 24:Tl(x,j,C,V,p),p&&pe&2048&&Zm(j.alternate,j);break;default:Tl(x,j,C,V,p)}a=a.sibling}}function Oo(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=t,c=a,p=c.flags;switch(c.tag){case 22:Oo(r,c),p&2048&&qm(c.alternate,c);break;case 24:Oo(r,c),p&2048&&Zm(c.alternate,c);break;default:Oo(r,c)}a=a.sibling}}var Ro=8192;function Cl(t,a,r){if(t.subtreeFlags&Ro)for(t=t.child;t!==null;)rg(t,a,r),t=t.sibling}function rg(t,a,r){switch(t.tag){case 26:Cl(t,a,r),t.flags&Ro&&t.memoizedState!==null&&PN(r,Ts,t.memoizedState,t.memoizedProps);break;case 5:Cl(t,a,r);break;case 3:case 4:var c=Ts;Ts=wc(t.stateNode.containerInfo),Cl(t,a,r),Ts=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=Ro,Ro=16777216,Cl(t,a,r),Ro=c):Cl(t,a,r));break;default:Cl(t,a,r)}}function lg(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Do(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var c=a[r];ta=c,ug(c,t)}lg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)og(t),t=t.sibling}function og(t){switch(t.tag){case 0:case 11:case 15:Do(t),t.flags&2048&&Ki(9,t,t.return);break;case 3:Do(t);break;case 12:Do(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,mc(t)):Do(t);break;default:Do(t)}}function mc(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var c=a[r];ta=c,ug(c,t)}lg(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Ki(8,a,a.return),mc(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,mc(a));break;default:mc(a)}t=t.sibling}}function ug(t,a){for(;ta!==null;){var r=ta;switch(r.tag){case 0:case 11:case 15:Ki(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:yo(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,ta=c;else e:for(r=t;ta!==null;){c=ta;var p=c.sibling,x=c.return;if(Wx(c),c===r){ta=null;break e}if(p!==null){p.return=x,ta=p;break e}ta=x}}}var X_={getCacheForType:function(t){var a=oa(Fn),r=a.data.get(t);return r===void 0&&(r=t(),a.data.set(t,r)),r},cacheSignal:function(){return oa(Fn).controller.signal}},W_=typeof WeakMap=="function"?WeakMap:Map,Qt=0,mn=null,kt=null,Mt=0,tn=0,Qa=null,Qi=!1,Al=!1,Hm=!1,gi=0,zn=0,Gi=0,Hr=0,Km=0,Ga=0,Ml=0,Lo=null,Oa=null,Qm=!1,hc=0,cg=0,fc=1/0,pc=null,Vi=null,Yn=0,$i=null,zl=null,yi=0,Gm=0,Vm=null,dg=null,Po=0,$m=null;function Va(){return(Qt&2)!==0&&Mt!==0?Mt&-Mt:Q.T!==null?th():sn()}function mg(){if(Ga===0)if((Mt&536870912)===0||wt){var t=dn;dn<<=1,(dn&3932160)===0&&(dn=262144),Ga=t}else Ga=536870912;return t=Ha.current,t!==null&&(t.flags|=32),Ga}function Ra(t,a,r){(t===mn&&(tn===2||tn===9)||t.cancelPendingCommit!==null)&&(Ol(t,0),Yi(t,Mt,Ga,!1)),Gn(t,r),((Qt&2)===0||t!==mn)&&(t===mn&&((Qt&2)===0&&(Hr|=r),zn===4&&Yi(t,Mt,Ga,!1)),Qs(t))}function hg(t,a,r){if((Qt&6)!==0)throw Error(o(327));var c=!r&&(a&127)===0&&(a&t.expiredLanes)===0||gt(t,a),p=c?nN(t,a):Jm(t,a,!0),x=c;do{if(p===0){Al&&!c&&Yi(t,a,0,!1);break}else{if(r=t.current.alternate,x&&!eN(r)){p=Jm(t,a,!1),x=!1;continue}if(p===2){if(x=a,t.errorRecoveryDisabledLanes&x)var j=0;else j=t.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){a=j;e:{var C=t;p=Lo;var V=C.current.memoizedState.isDehydrated;if(V&&(Ol(C,j).flags|=256),j=Jm(C,j,!1),j!==2){if(Hm&&!V){C.errorRecoveryDisabledLanes|=x,Hr|=x,p=4;break e}x=Oa,Oa=p,x!==null&&(Oa===null?Oa=x:Oa.push.apply(Oa,x))}p=j}if(x=!1,p!==2)continue}}if(p===1){Ol(t,0),Yi(t,a,0,!0);break}e:{switch(c=t,x=p,x){case 0:case 1:throw Error(o(345));case 4:if((a&4194048)!==a)break;case 6:Yi(c,a,Ga,!Qi);break e;case 2:Oa=null;break;case 3:case 5:break;default:throw Error(o(329))}if((a&62914560)===a&&(p=hc+300-se(),10<p)){if(Yi(c,a,Ga,!Qi),kn(c,0,!0)!==0)break e;yi=a,c.timeoutHandle=Hg(fg.bind(null,c,r,Oa,pc,Qm,a,Ga,Hr,Ml,Qi,x,"Throttled",-0,0),p);break e}fg(c,r,Oa,pc,Qm,a,Ga,Hr,Ml,Qi,x,null,-0,0)}}break}while(!0);Qs(t)}function fg(t,a,r,c,p,x,j,C,V,pe,we,Me,ge,ve){if(t.timeoutHandle=-1,Me=a.subtreeFlags,Me&8192||(Me&16785408)===16785408){Me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wa},rg(a,x,Me);var Ve=(x&62914560)===x?hc-se():(x&4194048)===x?cg-se():0;if(Ve=IN(Me,Ve),Ve!==null){yi=x,t.cancelPendingCommit=Ve(Ng.bind(null,t,a,x,r,c,p,j,C,V,we,Me,null,ge,ve)),Yi(t,x,j,!pe);return}}Ng(t,a,x,r,c,p,j,C,V)}function eN(t){for(var a=t;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var p=r[c],x=p.getSnapshot;p=p.value;try{if(!Wn(x(),p))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Yi(t,a,r,c){a&=~Km,a&=~Hr,t.suspendedLanes|=a,t.pingedLanes&=~a,c&&(t.warmLanes|=a),c=t.expirationTimes;for(var p=a;0<p;){var x=31-Dt(p),j=1<<x;c[x]=-1,p&=~j}r!==0&&$(t,r,a)}function xc(){return(Qt&6)===0?(Io(0),!1):!0}function Ym(){if(kt!==null){if(tn===0)var t=kt.return;else t=kt,Es=Hs=null,mm(t),jl=null,bo=0,t=kt;for(;t!==null;)Kx(t.alternate,t),t=t.return;kt=null}}function Ol(t,a){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,bN(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),yi=0,Ym(),mn=t,kt=r=us(t.current,null),Mt=a,tn=0,Qa=null,Qi=!1,Al=gt(t,a),Hm=!1,Ml=Ga=Km=Hr=Gi=zn=0,Oa=Lo=null,Qm=!1,(a&8)!==0&&(a|=a&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=a;0<c;){var p=31-Dt(c),x=1<<p;a|=t[p],c&=~x}return gi=a,Mr(),r}function pg(t,a){xt=null,Q.H=To,a===Nl||a===Ku?(a=Mp(),tn=3):a===em?(a=Mp(),tn=4):tn=a===Tm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Qa=a,kt===null&&(zn=1,ic(t,u(a,t.current)))}function xg(){var t=Ha.current;return t===null?!0:(Mt&4194048)===Mt?cs===null:(Mt&62914560)===Mt||(Mt&536870912)!==0?t===cs:!1}function gg(){var t=Q.H;return Q.H=To,t===null?To:t}function yg(){var t=Q.A;return Q.A=X_,t}function gc(){zn=4,Qi||(Mt&4194048)!==Mt&&Ha.current!==null||(Al=!0),(Gi&134217727)===0&&(Hr&134217727)===0||mn===null||Yi(mn,Mt,Ga,!1)}function Jm(t,a,r){var c=Qt;Qt|=2;var p=gg(),x=yg();(mn!==t||Mt!==a)&&(pc=null,Ol(t,a)),a=!1;var j=zn;e:do try{if(tn!==0&&kt!==null){var C=kt,V=Qa;switch(tn){case 8:Ym(),j=6;break e;case 3:case 2:case 9:case 6:Ha.current===null&&(a=!0);var pe=tn;if(tn=0,Qa=null,Rl(t,C,V,pe),r&&Al){j=0;break e}break;default:pe=tn,tn=0,Qa=null,Rl(t,C,V,pe)}}tN(),j=zn;break}catch(we){pg(t,we)}while(!0);return a&&t.shellSuspendCounter++,Es=Hs=null,Qt=c,Q.H=p,Q.A=x,kt===null&&(mn=null,Mt=0,Mr()),j}function tN(){for(;kt!==null;)vg(kt)}function nN(t,a){var r=Qt;Qt|=2;var c=gg(),p=yg();mn!==t||Mt!==a?(pc=null,fc=se()+500,Ol(t,a)):Al=gt(t,a);e:do try{if(tn!==0&&kt!==null){a=kt;var x=Qa;t:switch(tn){case 1:tn=0,Qa=null,Rl(t,a,x,1);break;case 2:case 9:if(Cp(x)){tn=0,Qa=null,bg(a);break}a=function(){tn!==2&&tn!==9||mn!==t||(tn=7),Qs(t)},x.then(a,a);break e;case 3:tn=7;break e;case 4:tn=5;break e;case 7:Cp(x)?(tn=0,Qa=null,bg(a)):(tn=0,Qa=null,Rl(t,a,x,7));break;case 5:var j=null;switch(kt.tag){case 26:j=kt.memoizedState;case 5:case 27:var C=kt;if(j?iy(j):C.stateNode.complete){tn=0,Qa=null;var V=C.sibling;if(V!==null)kt=V;else{var pe=C.return;pe!==null?(kt=pe,yc(pe)):kt=null}break t}}tn=0,Qa=null,Rl(t,a,x,5);break;case 6:tn=0,Qa=null,Rl(t,a,x,6);break;case 8:Ym(),zn=6;break e;default:throw Error(o(462))}}aN();break}catch(we){pg(t,we)}while(!0);return Es=Hs=null,Q.H=c,Q.A=p,Qt=r,kt!==null?0:(mn=null,Mt=0,Mr(),zn)}function aN(){for(;kt!==null&&!Be();)vg(kt)}function vg(t){var a=Zx(t.alternate,t,gi);t.memoizedProps=t.pendingProps,a===null?yc(t):kt=a}function bg(t){var a=t,r=a.alternate;switch(a.tag){case 15:case 0:a=Px(r,a,a.pendingProps,a.type,void 0,Mt);break;case 11:a=Px(r,a,a.pendingProps,a.type.render,a.ref,Mt);break;case 5:mm(a);default:Kx(r,a),a=kt=ho(a,gi),a=Zx(r,a,gi)}t.memoizedProps=t.pendingProps,a===null?yc(t):kt=a}function Rl(t,a,r,c){Es=Hs=null,mm(a),jl=null,bo=0;var p=a.return;try{if(K_(t,p,a,r,Mt)){zn=1,ic(t,u(r,t.current)),kt=null;return}}catch(x){if(p!==null)throw kt=p,x;zn=1,ic(t,u(r,t.current)),kt=null;return}a.flags&32768?(wt||c===1?t=!0:Al||(Mt&536870912)!==0?t=!1:(Qi=t=!0,(c===2||c===9||c===3||c===6)&&(c=Ha.current,c!==null&&c.tag===13&&(c.flags|=16384))),_g(a,t)):yc(a)}function yc(t){var a=t;do{if((a.flags&32768)!==0){_g(a,Qi);return}t=a.return;var r=V_(a.alternate,a,gi);if(r!==null){kt=r;return}if(a=a.sibling,a!==null){kt=a;return}kt=a=t}while(a!==null);zn===0&&(zn=5)}function _g(t,a){do{var r=$_(t.alternate,t);if(r!==null){r.flags&=32767,kt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(t=t.sibling,t!==null)){kt=t;return}kt=t=r}while(t!==null);zn=6,kt=null}function Ng(t,a,r,c,p,x,j,C,V){t.cancelPendingCommit=null;do vc();while(Yn!==0);if((Qt&6)!==0)throw Error(o(327));if(a!==null){if(a===t.current)throw Error(o(177));if(x=a.lanes|a.childLanes,x|=pl,es(t,r,x,j,C,V),t===mn&&(kt=mn=null,Mt=0),zl=a,$i=t,yi=r,Gm=x,Vm=p,dg=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,lN(Lt,function(){return Eg(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=Q.T,Q.T=null,p=K.p,K.p=2,j=Qt,Qt|=4;try{Y_(t,a,r)}finally{Qt=j,K.p=p,Q.T=c}}Yn=1,jg(),Sg(),wg()}}function jg(){if(Yn===1){Yn=0;var t=$i,a=zl,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=Q.T,Q.T=null;var c=K.p;K.p=2;var p=Qt;Qt|=4;try{ag(a,t);var x=uh,j=kr(t.containerInfo),C=x.focusedElem,V=x.selectionRange;if(j!==C&&C&&C.ownerDocument&&dl(C.ownerDocument.documentElement,C)){if(V!==null&&Ps(C)){var pe=V.start,we=V.end;if(we===void 0&&(we=pe),"selectionStart"in C)C.selectionStart=pe,C.selectionEnd=Math.min(we,C.value.length);else{var Me=C.ownerDocument||document,ge=Me&&Me.defaultView||window;if(ge.getSelection){var ve=ge.getSelection(),Ve=C.textContent.length,st=Math.min(V.start,Ve),cn=V.end===void 0?st:Math.min(V.end,Ve);!ve.extend&&st>cn&&(j=cn,cn=st,st=j);var ie=wr(C,st),W=wr(C,cn);if(ie&&W&&(ve.rangeCount!==1||ve.anchorNode!==ie.node||ve.anchorOffset!==ie.offset||ve.focusNode!==W.node||ve.focusOffset!==W.offset)){var he=Me.createRange();he.setStart(ie.node,ie.offset),ve.removeAllRanges(),st>cn?(ve.addRange(he),ve.extend(W.node,W.offset)):(he.setEnd(W.node,W.offset),ve.addRange(he))}}}}for(Me=[],ve=C;ve=ve.parentNode;)ve.nodeType===1&&Me.push({element:ve,left:ve.scrollLeft,top:ve.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<Me.length;C++){var Te=Me[C];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Mc=!!oh,uh=oh=null}finally{Qt=p,K.p=c,Q.T=r}}t.current=a,Yn=2}}function Sg(){if(Yn===2){Yn=0;var t=$i,a=zl,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=Q.T,Q.T=null;var c=K.p;K.p=2;var p=Qt;Qt|=4;try{Xx(t,a.alternate,a)}finally{Qt=p,K.p=c,Q.T=r}}Yn=3}}function wg(){if(Yn===4||Yn===3){Yn=0,Ct();var t=$i,a=zl,r=yi,c=dg;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Yn=5:(Yn=0,zl=$i=null,kg(t,t.pendingLanes));var p=t.pendingLanes;if(p===0&&(Vi=null),Fe(r),a=a.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(ut,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=Q.T,p=K.p,K.p=2,Q.T=null;try{for(var x=t.onRecoverableError,j=0;j<c.length;j++){var C=c[j];x(C.value,{componentStack:C.stack})}}finally{Q.T=a,K.p=p}}(yi&3)!==0&&vc(),Qs(t),p=t.pendingLanes,(r&261930)!==0&&(p&42)!==0?t===$m?Po++:(Po=0,$m=t):Po=0,Io(0)}}function kg(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,yo(a)))}function vc(){return jg(),Sg(),wg(),Eg()}function Eg(){if(Yn!==5)return!1;var t=$i,a=Gm;Gm=0;var r=Fe(yi),c=Q.T,p=K.p;try{K.p=32>r?32:r,Q.T=null,r=Vm,Vm=null;var x=$i,j=yi;if(Yn=0,zl=$i=null,yi=0,(Qt&6)!==0)throw Error(o(331));var C=Qt;if(Qt|=4,og(x.current),ig(x,x.current,j,r),Qt=C,Io(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(ut,x)}catch{}return!0}finally{K.p=p,Q.T=c,kg(t,a)}}function Tg(t,a,r){a=u(r,a),a=Em(t.stateNode,a,2),t=qi(t,a,2),t!==null&&(Gn(t,2),Qs(t))}function nn(t,a,r){if(t.tag===3)Tg(t,t,r);else for(;a!==null;){if(a.tag===3){Tg(a,t,r);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Vi===null||!Vi.has(c))){t=u(r,t),r=Cx(2),c=qi(a,r,2),c!==null&&(Ax(r,c,a,t),Gn(c,2),Qs(c));break}}a=a.return}}function Xm(t,a,r){var c=t.pingCache;if(c===null){c=t.pingCache=new W_;var p=new Set;c.set(a,p)}else p=c.get(a),p===void 0&&(p=new Set,c.set(a,p));p.has(r)||(Hm=!0,p.add(r),t=sN.bind(null,t,a,r),a.then(t,t))}function sN(t,a,r){var c=t.pingCache;c!==null&&c.delete(a),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,mn===t&&(Mt&r)===r&&(zn===4||zn===3&&(Mt&62914560)===Mt&&300>se()-hc?(Qt&2)===0&&Ol(t,0):Km|=r,Ml===Mt&&(Ml=0)),Qs(t)}function Cg(t,a){a===0&&(a=Dn()),t=os(t,a),t!==null&&(Gn(t,a),Qs(t))}function iN(t){var a=t.memoizedState,r=0;a!==null&&(r=a.retryLane),Cg(t,r)}function rN(t,a){var r=0;switch(t.tag){case 31:case 13:var c=t.stateNode,p=t.memoizedState;p!==null&&(r=p.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(a),Cg(t,r)}function lN(t,a){return ae(t,a)}var bc=null,Dl=null,Wm=!1,_c=!1,eh=!1,Ji=0;function Qs(t){t!==Dl&&t.next===null&&(Dl===null?bc=Dl=t:Dl=Dl.next=t),_c=!0,Wm||(Wm=!0,uN())}function Io(t,a){if(!eh&&_c){eh=!0;do for(var r=!1,c=bc;c!==null;){if(t!==0){var p=c.pendingLanes;if(p===0)var x=0;else{var j=c.suspendedLanes,C=c.pingedLanes;x=(1<<31-Dt(42|t)+1)-1,x&=p&~(j&~C),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(r=!0,Og(c,x))}else x=Mt,x=kn(c,c===mn?x:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(x&3)===0||gt(c,x)||(r=!0,Og(c,x));c=c.next}while(r);eh=!1}}function oN(){Ag()}function Ag(){_c=Wm=!1;var t=0;Ji!==0&&vN()&&(t=Ji);for(var a=se(),r=null,c=bc;c!==null;){var p=c.next,x=Mg(c,a);x===0?(c.next=null,r===null?bc=p:r.next=p,p===null&&(Dl=r)):(r=c,(t!==0||(x&3)!==0)&&(_c=!0)),c=p}Yn!==0&&Yn!==5||Io(t),Ji!==0&&(Ji=0)}function Mg(t,a){for(var r=t.suspendedLanes,c=t.pingedLanes,p=t.expirationTimes,x=t.pendingLanes&-62914561;0<x;){var j=31-Dt(x),C=1<<j,V=p[j];V===-1?((C&r)===0||(C&c)!==0)&&(p[j]=Wa(C,a)):V<=a&&(t.expiredLanes|=C),x&=~C}if(a=mn,r=Mt,r=kn(t,t===a?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,r===0||t===a&&(tn===2||tn===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Ee(c),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||gt(t,r)){if(a=r&-r,a===t.callbackPriority)return a;switch(c!==null&&Ee(c),Fe(r)){case 2:case 8:r=pn;break;case 32:r=Lt;break;case 268435456:r=Qn;break;default:r=Lt}return c=zg.bind(null,t),r=ae(r,c),t.callbackPriority=a,t.callbackNode=r,a}return c!==null&&c!==null&&Ee(c),t.callbackPriority=2,t.callbackNode=null,2}function zg(t,a){if(Yn!==0&&Yn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(vc()&&t.callbackNode!==r)return null;var c=Mt;return c=kn(t,t===mn?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(hg(t,c,a),Mg(t,se()),t.callbackNode!=null&&t.callbackNode===r?zg.bind(null,t):null)}function Og(t,a){if(vc())return null;hg(t,a,!0)}function uN(){_N(function(){(Qt&6)!==0?ae(_t,oN):Ag()})}function th(){if(Ji===0){var t=bl;t===0&&(t=ct,ct<<=1,(ct&261888)===0&&(ct=256)),Ji=t}return Ji}function Rg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ki(""+t)}function Dg(t,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,t.id&&r.setAttribute("form",t.id),a.parentNode.insertBefore(r,a),t=new FormData(t),r.parentNode.removeChild(r),t}function cN(t,a,r,c,p){if(a==="submit"&&r&&r.stateNode===p){var x=Rg((p[hn]||null).action),j=c.submitter;j&&(a=(a=j[hn]||null)?Rg(a.formAction):j.getAttribute("formAction"),a!==null&&(x=a,j=null));var C=new sl("action","action",null,c,p);t.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ji!==0){var V=j?Dg(p,j):new FormData(p);_m(r,{pending:!0,data:V,method:p.method,action:x},null,V)}}else typeof x=="function"&&(C.preventDefault(),V=j?Dg(p,j):new FormData(p),_m(r,{pending:!0,data:V,method:p.method,action:x},x,V))},currentTarget:p}]})}}for(var nh=0;nh<Us.length;nh++){var ah=Us[nh],dN=ah.toLowerCase(),mN=ah[0].toUpperCase()+ah.slice(1);Ea(dN,"on"+mN)}Ea(Tr,"onAnimationEnd"),Ea(Bu,"onAnimationIteration"),Ea(Cr,"onAnimationStart"),Ea("dblclick","onDoubleClick"),Ea("focusin","onFocus"),Ea("focusout","onBlur"),Ea(Qd,"onTransitionRun"),Ea(Uu,"onTransitionStart"),Ea(Gd,"onTransitionCancel"),Ea(Pi,"onTransitionEnd"),ts("onMouseEnter",["mouseout","mouseover"]),ts("onMouseLeave",["mouseout","mouseover"]),ts("onPointerEnter",["pointerout","pointerover"]),ts("onPointerLeave",["pointerout","pointerover"]),bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bo));function Lg(t,a){a=(a&4)!==0;for(var r=0;r<t.length;r++){var c=t[r],p=c.event;c=c.listeners;e:{var x=void 0;if(a)for(var j=c.length-1;0<=j;j--){var C=c[j],V=C.instance,pe=C.currentTarget;if(C=C.listener,V!==x&&p.isPropagationStopped())break e;x=C,p.currentTarget=pe;try{x(p)}catch(we){Ar(we)}p.currentTarget=null,x=V}else for(j=0;j<c.length;j++){if(C=c[j],V=C.instance,pe=C.currentTarget,C=C.listener,V!==x&&p.isPropagationStopped())break e;x=C,p.currentTarget=pe;try{x(p)}catch(we){Ar(we)}p.currentTarget=null,x=V}}}}function Et(t,a){var r=a[F];r===void 0&&(r=a[F]=new Set);var c=t+"__bubble";r.has(c)||(Pg(a,t,2,!1),r.add(c))}function sh(t,a,r){var c=0;a&&(c|=4),Pg(r,t,c,a)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function ih(t){if(!t[Nc]){t[Nc]=!0,rn.forEach(function(r){r!=="selectionchange"&&(hN.has(r)||sh(r,!1,t),sh(r,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Nc]||(a[Nc]=!0,sh("selectionchange",!1,a))}}function Pg(t,a,r,c){switch(my(a)){case 2:var p=FN;break;case 8:p=qN;break;default:p=bh}r=p.bind(null,a,r,t),p=void 0,!xr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),c?p!==void 0?t.addEventListener(a,r,{capture:!0,passive:p}):t.addEventListener(a,r,!0):p!==void 0?t.addEventListener(a,r,{passive:p}):t.addEventListener(a,r,!1)}function rh(t,a,r,c,p){var x=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var j=c.tag;if(j===3||j===4){var C=c.stateNode.containerInfo;if(C===p)break;if(j===4)for(j=c.return;j!==null;){var V=j.tag;if((V===3||V===4)&&j.stateNode.containerInfo===p)return;j=j.return}for(;C!==null;){if(j=Ze(C),j===null)return;if(V=j.tag,V===5||V===6||V===26||V===27){c=x=j;continue e}C=C.parentNode}}c=c.return}to(function(){var pe=x,we=pr(r),Me=[];e:{var ge=Fu.get(t);if(ge!==void 0){var ve=sl,Ve=t;switch(t){case"keypress":if(gr(r)===0)break e;case"keydown":case"keyup":ve=Eu;break;case"focusin":Ve="focus",ve=so;break;case"focusout":Ve="blur",ve=so;break;case"beforeblur":case"afterblur":ve=so;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=Nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=Ud;break;case Tr:case Bu:case Cr:ve=io;break;case Pi:ve=Au;break;case"scroll":case"scrollend":ve=At;break;case"wheel":ve=si;break;case"copy":case"cut":case"paste":ve=ss;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=Tu;break;case"toggle":case"beforetoggle":ve=br}var st=(a&4)!==0,cn=!st&&(t==="scroll"||t==="scrollend"),ie=st?ge!==null?ge+"Capture":null:ge;st=[];for(var W=pe,he;W!==null;){var Te=W;if(he=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||he===null||ie===null||(Te=ni(W,ie),Te!=null&&st.push(Uo(W,Te,he))),cn)break;W=W.return}0<st.length&&(ge=new ve(ge,Ve,null,r,we),Me.push({event:ge,listeners:st}))}}if((a&7)===0){e:{if(ge=t==="mouseover"||t==="pointerover",ve=t==="mouseout"||t==="pointerout",ge&&r!==al&&(Ve=r.relatedTarget||r.fromElement)&&(Ze(Ve)||Ve[aa]))break e;if((ve||ge)&&(ge=we.window===we?we:(ge=we.ownerDocument)?ge.defaultView||ge.parentWindow:window,ve?(Ve=r.relatedTarget||r.toElement,ve=pe,Ve=Ve?Ze(Ve):null,Ve!==null&&(cn=m(Ve),st=Ve.tag,Ve!==cn||st!==5&&st!==27&&st!==6)&&(Ve=null)):(ve=null,Ve=pe),ve!==Ve)){if(st=Nu,Te="onMouseLeave",ie="onMouseEnter",W="mouse",(t==="pointerout"||t==="pointerover")&&(st=Tu,Te="onPointerLeave",ie="onPointerEnter",W="pointer"),cn=ve==null?ge:Un(ve),he=Ve==null?ge:Un(Ve),ge=new st(Te,W+"leave",ve,r,we),ge.target=cn,ge.relatedTarget=he,Te=null,Ze(we)===pe&&(st=new st(ie,W+"enter",Ve,r,we),st.target=he,st.relatedTarget=cn,Te=st),cn=Te,ve&&Ve)t:{for(st=fN,ie=ve,W=Ve,he=0,Te=ie;Te;Te=st(Te))he++;Te=0;for(var nt=W;nt;nt=st(nt))Te++;for(;0<he-Te;)ie=st(ie),he--;for(;0<Te-he;)W=st(W),Te--;for(;he--;){if(ie===W||W!==null&&ie===W.alternate){st=ie;break t}ie=st(ie),W=st(W)}st=null}else st=null;ve!==null&&Ig(Me,ge,ve,st,!1),Ve!==null&&cn!==null&&Ig(Me,cn,Ve,st,!0)}}e:{if(ge=pe?Un(pe):window,ve=ge.nodeName&&ge.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ge.type==="file")var Zt=Sr;else if(is(ge))if(Ru)Zt=Kd;else{Zt=Hd;var Xe=Ss}else ve=ge.nodeName,!ve||ve.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?pe&&fr(pe.elementType)&&(Zt=Sr):Zt=Oi;if(Zt&&(Zt=Zt(t,pe))){Ou(Me,Zt,r,we);break e}Xe&&Xe(t,ge,pe),t==="focusout"&&pe&&ge.type==="number"&&pe.memoizedProps.value!=null&&P(ge,"number",ge.value)}switch(Xe=pe?Un(pe):window,t){case"focusin":(is(Xe)||Xe.contentEditable==="true")&&(Is=Xe,hl=pe,Er=null);break;case"focusout":Er=hl=Is=null;break;case"mousedown":Di=!0;break;case"contextmenu":case"mouseup":case"dragend":Di=!1,Pu(Me,r,we);break;case"selectionchange":if(ml)break;case"keydown":case"keyup":Pu(Me,r,we)}var bt;if(rl)e:{switch(t){case"compositionstart":var zt="onCompositionStart";break e;case"compositionend":zt="onCompositionEnd";break e;case"compositionupdate":zt="onCompositionUpdate";break e}zt=void 0}else Ai?zu(t,r)&&(zt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(zt="onCompositionStart");zt&&(ll&&r.locale!=="ko"&&(Ai||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&Ai&&(bt=Ds()):(as=we,ai="value"in as?as.value:as.textContent,Ai=!0)),Xe=jc(pe,zt),0<Xe.length&&(zt=new ro(zt,t,null,r,we),Me.push({event:zt,listeners:Xe}),bt?zt.data=bt:(bt=co(r),bt!==null&&(zt.data=bt)))),(bt=qd?Za(t,r):Mi(t,r))&&(zt=jc(pe,"onBeforeInput"),0<zt.length&&(Xe=new ro("onBeforeInput","beforeinput",null,r,we),Me.push({event:Xe,listeners:zt}),Xe.data=bt)),cN(Me,t,pe,r,we)}Lg(Me,a)})}function Uo(t,a,r){return{instance:t,listener:a,currentTarget:r}}function jc(t,a){for(var r=a+"Capture",c=[];t!==null;){var p=t,x=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||x===null||(p=ni(t,r),p!=null&&c.unshift(Uo(t,p,x)),p=ni(t,a),p!=null&&c.push(Uo(t,p,x))),t.tag===3)return c;t=t.return}return[]}function fN(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ig(t,a,r,c,p){for(var x=a._reactName,j=[];r!==null&&r!==c;){var C=r,V=C.alternate,pe=C.stateNode;if(C=C.tag,V!==null&&V===c)break;C!==5&&C!==26&&C!==27||pe===null||(V=pe,p?(pe=ni(r,x),pe!=null&&j.unshift(Uo(r,pe,V))):p||(pe=ni(r,x),pe!=null&&j.push(Uo(r,pe,V)))),r=r.return}j.length!==0&&t.push({event:a,listeners:j})}var pN=/\r\n?/g,xN=/\u0000|\uFFFD/g;function Bg(t){return(typeof t=="string"?t:""+t).replace(pN,`
`).replace(xN,"")}function Ug(t,a){return a=Bg(a),Bg(t)===a}function un(t,a,r,c,p,x){switch(r){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||ra(t,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&ra(t,""+c);break;case"className":Ut(t,"class",c);break;case"tabIndex":Ut(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ut(t,r,c);break;case"style":tl(t,c,x);break;case"data":if(a!=="object"){Ut(t,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||r!=="href")){t.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=ki(""+c),t.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(r==="formAction"?(a!=="input"&&un(t,a,"name",p.name,p,null),un(t,a,"formEncType",p.formEncType,p,null),un(t,a,"formMethod",p.formMethod,p,null),un(t,a,"formTarget",p.formTarget,p,null)):(un(t,a,"encType",p.encType,p,null),un(t,a,"method",p.method,p,null),un(t,a,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=ki(""+c),t.setAttribute(r,c);break;case"onClick":c!=null&&(t.onclick=wa);break;case"onScroll":c!=null&&Et("scroll",t);break;case"onScrollEnd":c!=null&&Et("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}r=ki(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""+c):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":c===!0?t.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,c):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(r,c):t.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(r):t.setAttribute(r,c);break;case"popover":Et("beforetoggle",t),Et("toggle",t),jt(t,"popover",c);break;case"xlinkActuate":sa(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":sa(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":sa(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":sa(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":sa(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":sa(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":sa(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":sa(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":sa(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":jt(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=nl.get(r)||r,jt(t,r,c))}}function lh(t,a,r,c,p,x){switch(r){case"style":tl(t,c,x);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"children":typeof c=="string"?ra(t,c):(typeof c=="number"||typeof c=="bigint")&&ra(t,""+c);break;case"onScroll":c!=null&&Et("scroll",t);break;case"onScrollEnd":c!=null&&Et("scrollend",t);break;case"onClick":c!=null&&(t.onclick=wa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hr.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),a=r.slice(2,p?r.length-7:void 0),x=t[hn]||null,x=x!=null?x[r]:null,typeof x=="function"&&t.removeEventListener(a,x,p),typeof c=="function")){typeof x!="function"&&x!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(a,c,p);break e}r in t?t[r]=c:c===!0?t.setAttribute(r,""):jt(t,r,c)}}}function ca(t,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",t),Et("load",t);var c=!1,p=!1,x;for(x in r)if(r.hasOwnProperty(x)){var j=r[x];if(j!=null)switch(x){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:un(t,a,x,j,r,null)}}p&&un(t,a,"srcSet",r.srcSet,r,null),c&&un(t,a,"src",r.src,r,null);return;case"input":Et("invalid",t);var C=x=j=p=null,V=null,pe=null;for(c in r)if(r.hasOwnProperty(c)){var we=r[c];if(we!=null)switch(c){case"name":p=we;break;case"type":j=we;break;case"checked":V=we;break;case"defaultChecked":pe=we;break;case"value":x=we;break;case"defaultValue":C=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(o(137,a));break;default:un(t,a,c,we,r,null)}}Rs(t,x,C,V,pe,j,p,!1);return;case"select":Et("invalid",t),c=j=x=null;for(p in r)if(r.hasOwnProperty(p)&&(C=r[p],C!=null))switch(p){case"value":x=C;break;case"defaultValue":j=C;break;case"multiple":c=C;default:un(t,a,p,C,r,null)}a=x,r=j,t.multiple=!!c,a!=null?De(t,!!c,a,!1):r!=null&&De(t,!!c,r,!0);return;case"textarea":Et("invalid",t),x=p=c=null;for(j in r)if(r.hasOwnProperty(j)&&(C=r[j],C!=null))switch(j){case"value":c=C;break;case"defaultValue":p=C;break;case"children":x=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:un(t,a,j,C,r,null)}ia(t,c,p,x);return;case"option":for(V in r)r.hasOwnProperty(V)&&(c=r[V],c!=null)&&(V==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":un(t,a,V,c,r,null));return;case"dialog":Et("beforetoggle",t),Et("toggle",t),Et("cancel",t),Et("close",t);break;case"iframe":case"object":Et("load",t);break;case"video":case"audio":for(c=0;c<Bo.length;c++)Et(Bo[c],t);break;case"image":Et("error",t),Et("load",t);break;case"details":Et("toggle",t);break;case"embed":case"source":case"link":Et("error",t),Et("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in r)if(r.hasOwnProperty(pe)&&(c=r[pe],c!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:un(t,a,pe,c,r,null)}return;default:if(fr(a)){for(we in r)r.hasOwnProperty(we)&&(c=r[we],c!==void 0&&lh(t,a,we,c,r,void 0));return}}for(C in r)r.hasOwnProperty(C)&&(c=r[C],c!=null&&un(t,a,C,c,r,null))}function gN(t,a,r,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,x=null,j=null,C=null,V=null,pe=null,we=null;for(ve in r){var Me=r[ve];if(r.hasOwnProperty(ve)&&Me!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":V=Me;default:c.hasOwnProperty(ve)||un(t,a,ve,null,c,Me)}}for(var ge in c){var ve=c[ge];if(Me=r[ge],c.hasOwnProperty(ge)&&(ve!=null||Me!=null))switch(ge){case"type":x=ve;break;case"name":p=ve;break;case"checked":pe=ve;break;case"defaultChecked":we=ve;break;case"value":j=ve;break;case"defaultValue":C=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(o(137,a));break;default:ve!==Me&&un(t,a,ge,ve,c,Me)}}ti(t,j,C,V,pe,we,x,p);return;case"select":ve=j=C=ge=null;for(x in r)if(V=r[x],r.hasOwnProperty(x)&&V!=null)switch(x){case"value":break;case"multiple":ve=V;default:c.hasOwnProperty(x)||un(t,a,x,null,c,V)}for(p in c)if(x=c[p],V=r[p],c.hasOwnProperty(p)&&(x!=null||V!=null))switch(p){case"value":ge=x;break;case"defaultValue":C=x;break;case"multiple":j=x;default:x!==V&&un(t,a,p,x,c,V)}a=C,r=j,c=ve,ge!=null?De(t,!!r,ge,!1):!!c!=!!r&&(a!=null?De(t,!!r,a,!0):De(t,!!r,r?[]:"",!1));return;case"textarea":ve=ge=null;for(C in r)if(p=r[C],r.hasOwnProperty(C)&&p!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:un(t,a,C,null,c,p)}for(j in c)if(p=c[j],x=r[j],c.hasOwnProperty(j)&&(p!=null||x!=null))switch(j){case"value":ge=p;break;case"defaultValue":ve=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(o(91));break;default:p!==x&&un(t,a,j,p,c,x)}yt(t,ge,ve);return;case"option":for(var Ve in r)ge=r[Ve],r.hasOwnProperty(Ve)&&ge!=null&&!c.hasOwnProperty(Ve)&&(Ve==="selected"?t.selected=!1:un(t,a,Ve,null,c,ge));for(V in c)ge=c[V],ve=r[V],c.hasOwnProperty(V)&&ge!==ve&&(ge!=null||ve!=null)&&(V==="selected"?t.selected=ge&&typeof ge!="function"&&typeof ge!="symbol":un(t,a,V,ge,c,ve));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in r)ge=r[st],r.hasOwnProperty(st)&&ge!=null&&!c.hasOwnProperty(st)&&un(t,a,st,null,c,ge);for(pe in c)if(ge=c[pe],ve=r[pe],c.hasOwnProperty(pe)&&ge!==ve&&(ge!=null||ve!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(o(137,a));break;default:un(t,a,pe,ge,c,ve)}return;default:if(fr(a)){for(var cn in r)ge=r[cn],r.hasOwnProperty(cn)&&ge!==void 0&&!c.hasOwnProperty(cn)&&lh(t,a,cn,void 0,c,ge);for(we in c)ge=c[we],ve=r[we],!c.hasOwnProperty(we)||ge===ve||ge===void 0&&ve===void 0||lh(t,a,we,ge,c,ve);return}}for(var ie in r)ge=r[ie],r.hasOwnProperty(ie)&&ge!=null&&!c.hasOwnProperty(ie)&&un(t,a,ie,null,c,ge);for(Me in c)ge=c[Me],ve=r[Me],!c.hasOwnProperty(Me)||ge===ve||ge==null&&ve==null||un(t,a,Me,ge,c,ve)}function Fg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yN(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var p=r[c],x=p.transferSize,j=p.initiatorType,C=p.duration;if(x&&C&&Fg(j)){for(j=0,C=p.responseEnd,c+=1;c<r.length;c++){var V=r[c],pe=V.startTime;if(pe>C)break;var we=V.transferSize,Me=V.initiatorType;we&&Fg(Me)&&(V=V.responseEnd,j+=we*(V<C?1:(C-pe)/(V-pe)))}if(--c,a+=8*(x+j)/(p.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var oh=null,uh=null;function Sc(t){return t.nodeType===9?t:t.ownerDocument}function qg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zg(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function ch(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var dh=null;function vN(){var t=window.event;return t&&t.type==="popstate"?t===dh?!1:(dh=t,!0):(dh=null,!1)}var Hg=typeof setTimeout=="function"?setTimeout:void 0,bN=typeof clearTimeout=="function"?clearTimeout:void 0,Kg=typeof Promise=="function"?Promise:void 0,_N=typeof queueMicrotask=="function"?queueMicrotask:typeof Kg<"u"?function(t){return Kg.resolve(null).then(t).catch(NN)}:Hg;function NN(t){setTimeout(function(){throw t})}function Xi(t){return t==="head"}function Qg(t,a){var r=a,c=0;do{var p=r.nextSibling;if(t.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(c===0){t.removeChild(p),Bl(a);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")Fo(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Fo(r);for(var x=r.firstChild;x;){var j=x.nextSibling,C=x.nodeName;x[Tn]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&x.rel.toLowerCase()==="stylesheet"||r.removeChild(x),x=j}}else r==="body"&&Fo(t.ownerDocument.body);r=p}while(r);Bl(a)}function Gg(t,a){var r=t;t=0;do{var c=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=c}while(r)}function mh(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":mh(r),B(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function jN(t,a,r,c){for(;t.nodeType===1;){var p=r;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[Tn])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(x=t.getAttribute("rel"),x==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(x!==p.rel||t.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||t.getAttribute("title")!==(p.title==null?null:p.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(x=t.getAttribute("src"),(x!==(p.src==null?null:p.src)||t.getAttribute("type")!==(p.type==null?null:p.type)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&x&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var x=p.name==null?null:""+p.name;if(p.type==="hidden"&&t.getAttribute("name")===x)return t}else return t;if(t=ds(t.nextSibling),t===null)break}return null}function SN(t,a,r){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=ds(t.nextSibling),t===null))return null;return t}function Vg(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ds(t.nextSibling),t===null))return null;return t}function hh(t){return t.data==="$?"||t.data==="$~"}function fh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function wN(t,a){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||r.readyState!=="loading")a();else{var c=function(){a(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function ds(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var ph=null;function $g(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(a===0)return ds(t.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}t=t.nextSibling}return null}function Yg(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return t;a--}else r!=="/$"&&r!=="/&"||a++}t=t.previousSibling}return null}function Jg(t,a,r){switch(a=Sc(r),t){case"html":if(t=a.documentElement,!t)throw Error(o(452));return t;case"head":if(t=a.head,!t)throw Error(o(453));return t;case"body":if(t=a.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Fo(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);B(t)}var ms=new Map,Xg=new Set;function wc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var vi=K.d;K.d={f:kN,r:EN,D:TN,C:CN,L:AN,m:MN,X:ON,S:zN,M:RN};function kN(){var t=vi.f(),a=xc();return t||a}function EN(t){var a=St(t);a!==null&&a.tag===5&&a.type==="form"?px(a):vi.r(t)}var Ll=typeof document>"u"?null:document;function Wg(t,a,r){var c=Ll;if(c&&typeof a=="string"&&a){var p=en(a);p='link[rel="'+t+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),Xg.has(p)||(Xg.add(p),t={rel:t,crossOrigin:r,href:a},c.querySelector(p)===null&&(a=c.createElement("link"),ca(a,"link",t),vn(a),c.head.appendChild(a)))}}function TN(t){vi.D(t),Wg("dns-prefetch",t,null)}function CN(t,a){vi.C(t,a),Wg("preconnect",t,a)}function AN(t,a,r){vi.L(t,a,r);var c=Ll;if(c&&t&&a){var p='link[rel="preload"][as="'+en(a)+'"]';a==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+en(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+en(r.imageSizes)+'"]')):p+='[href="'+en(t)+'"]';var x=p;switch(a){case"style":x=Pl(t);break;case"script":x=Il(t)}ms.has(x)||(t=w({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:t,as:a},r),ms.set(x,t),c.querySelector(p)!==null||a==="style"&&c.querySelector(qo(x))||a==="script"&&c.querySelector(Zo(x))||(a=c.createElement("link"),ca(a,"link",t),vn(a),c.head.appendChild(a)))}}function MN(t,a){vi.m(t,a);var r=Ll;if(r&&t){var c=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+en(c)+'"][href="'+en(t)+'"]',x=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Il(t)}if(!ms.has(x)&&(t=w({rel:"modulepreload",href:t},a),ms.set(x,t),r.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Zo(x)))return}c=r.createElement("link"),ca(c,"link",t),vn(c),r.head.appendChild(c)}}}function zN(t,a,r){vi.S(t,a,r);var c=Ll;if(c&&t){var p=ja(c).hoistableStyles,x=Pl(t);a=a||"default";var j=p.get(x);if(!j){var C={loading:0,preload:null};if(j=c.querySelector(qo(x)))C.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":a},r),(r=ms.get(x))&&xh(t,r);var V=j=c.createElement("link");vn(V),ca(V,"link",t),V._p=new Promise(function(pe,we){V.onload=pe,V.onerror=we}),V.addEventListener("load",function(){C.loading|=1}),V.addEventListener("error",function(){C.loading|=2}),C.loading|=4,kc(j,a,c)}j={type:"stylesheet",instance:j,count:1,state:C},p.set(x,j)}}}function ON(t,a){vi.X(t,a);var r=Ll;if(r&&t){var c=ja(r).hoistableScripts,p=Il(t),x=c.get(p);x||(x=r.querySelector(Zo(p)),x||(t=w({src:t,async:!0},a),(a=ms.get(p))&&gh(t,a),x=r.createElement("script"),vn(x),ca(x,"link",t),r.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},c.set(p,x))}}function RN(t,a){vi.M(t,a);var r=Ll;if(r&&t){var c=ja(r).hoistableScripts,p=Il(t),x=c.get(p);x||(x=r.querySelector(Zo(p)),x||(t=w({src:t,async:!0,type:"module"},a),(a=ms.get(p))&&gh(t,a),x=r.createElement("script"),vn(x),ca(x,"link",t),r.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},c.set(p,x))}}function ey(t,a,r,c){var p=(p=Ne.current)?wc(p):null;if(!p)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=Pl(r.href),r=ja(p).hoistableStyles,c=r.get(a),c||(c={type:"style",instance:null,count:0,state:null},r.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Pl(r.href);var x=ja(p).hoistableStyles,j=x.get(t);if(j||(p=p.ownerDocument||p,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(t,j),(x=p.querySelector(qo(t)))&&!x._p&&(j.instance=x,j.state.loading=5),ms.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ms.set(t,r),x||DN(p,t,r,j.state))),a&&c===null)throw Error(o(528,""));return j}if(a&&c!==null)throw Error(o(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Il(r),r=ja(p).hoistableScripts,c=r.get(a),c||(c={type:"script",instance:null,count:0,state:null},r.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Pl(t){return'href="'+en(t)+'"'}function qo(t){return'link[rel="stylesheet"]['+t+"]"}function ty(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function DN(t,a,r,c){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=t.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),ca(a,"link",r),vn(a),t.head.appendChild(a))}function Il(t){return'[src="'+en(t)+'"]'}function Zo(t){return"script[async]"+t}function ny(t,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var c=t.querySelector('style[data-href~="'+en(r.href)+'"]');if(c)return a.instance=c,vn(c),c;var p=w({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),vn(c),ca(c,"style",p),kc(c,r.precedence,t),a.instance=c;case"stylesheet":p=Pl(r.href);var x=t.querySelector(qo(p));if(x)return a.state.loading|=4,a.instance=x,vn(x),x;c=ty(r),(p=ms.get(p))&&xh(c,p),x=(t.ownerDocument||t).createElement("link"),vn(x);var j=x;return j._p=new Promise(function(C,V){j.onload=C,j.onerror=V}),ca(x,"link",c),a.state.loading|=4,kc(x,r.precedence,t),a.instance=x;case"script":return x=Il(r.src),(p=t.querySelector(Zo(x)))?(a.instance=p,vn(p),p):(c=r,(p=ms.get(x))&&(c=w({},r),gh(c,p)),t=t.ownerDocument||t,p=t.createElement("script"),vn(p),ca(p,"link",c),t.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(o(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,kc(c,r.precedence,t));return a.instance}function kc(t,a,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,x=p,j=0;j<c.length;j++){var C=c[j];if(C.dataset.precedence===a)x=C;else if(x!==p)break}x?x.parentNode.insertBefore(t,x.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(t,a.firstChild))}function xh(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function gh(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Ec=null;function ay(t,a,r){if(Ec===null){var c=new Map,p=Ec=new Map;p.set(r,c)}else p=Ec,c=p.get(r),c||(c=new Map,p.set(r,c));if(c.has(t))return c;for(c.set(t,null),r=r.getElementsByTagName(t),p=0;p<r.length;p++){var x=r[p];if(!(x[Tn]||x[Wt]||t==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var j=x.getAttribute(a)||"";j=t+j;var C=c.get(j);C?C.push(x):c.set(j,[x])}}return c}function sy(t,a,r){t=t.ownerDocument||t,t.head.insertBefore(r,a==="title"?t.querySelector("head > title"):null)}function LN(t,a,r){if(r===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function iy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function PN(t,a,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=Pl(c.href),x=a.querySelector(qo(p));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Tc.bind(t),a.then(t,t)),r.state.loading|=4,r.instance=x,vn(x);return}x=a.ownerDocument||a,c=ty(c),(p=ms.get(p))&&xh(c,p),x=x.createElement("link"),vn(x);var j=x;j._p=new Promise(function(C,V){j.onload=C,j.onerror=V}),ca(x,"link",c),r.instance=x}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Tc.bind(t),a.addEventListener("load",r),a.addEventListener("error",r))}}var yh=0;function IN(t,a){return t.stylesheets&&t.count===0&&Ac(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var c=setTimeout(function(){if(t.stylesheets&&Ac(t,t.stylesheets),t.unsuspend){var x=t.unsuspend;t.unsuspend=null,x()}},6e4+a);0<t.imgBytes&&yh===0&&(yh=62500*yN());var p=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ac(t,t.stylesheets),t.unsuspend)){var x=t.unsuspend;t.unsuspend=null,x()}},(t.imgBytes>yh?50:800)+a);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function Tc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ac(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Cc=null;function Ac(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Cc=new Map,a.forEach(BN,t),Cc=null,Tc.call(t))}function BN(t,a){if(!(a.state.loading&4)){var r=Cc.get(t);if(r)var c=r.get(null);else{r=new Map,Cc.set(t,r);for(var p=t.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<p.length;x++){var j=p[x];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(r.set(j.dataset.precedence,j),c=j)}c&&r.set(null,c)}p=a.instance,j=p.getAttribute("data-precedence"),x=r.get(j)||c,x===c&&r.set(null,p),r.set(j,p),this.count++,c=Tc.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),x?x.parentNode.insertBefore(p,x.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(p,t.firstChild)),a.state.loading|=4}}var Ho={$$typeof:D,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function UN(t,a,r,c,p,x,j,C,V){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kt(0),this.hiddenUpdates=Kt(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=x,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function ry(t,a,r,c,p,x,j,C,V,pe,we,Me){return t=new UN(t,a,r,j,V,pe,we,Me,C),a=1,x===!0&&(a|=24),x=pa(3,null,null,a),t.current=x,x.stateNode=t,a=Jd(),a.refCount++,t.pooledCache=a,a.refCount++,x.memoizedState={element:c,isDehydrated:r,cache:a},tm(x),t}function ly(t){return t?(t=ii,t):ii}function oy(t,a,r,c,p,x){p=ly(p),c.context===null?c.context=p:c.pendingContext=p,c=Fi(a),c.payload={element:r},x=x===void 0?null:x,x!==null&&(c.callback=x),r=qi(t,c,a),r!==null&&(Ra(r,t,a),No(r,t,a))}function uy(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<a?r:a}}function vh(t,a){uy(t,a),(t=t.alternate)&&uy(t,a)}function cy(t){if(t.tag===13||t.tag===31){var a=os(t,67108864);a!==null&&Ra(a,t,67108864),vh(t,67108864)}}function dy(t){if(t.tag===13||t.tag===31){var a=Va();a=pt(a);var r=os(t,a);r!==null&&Ra(r,t,a),vh(t,a)}}var Mc=!0;function FN(t,a,r,c){var p=Q.T;Q.T=null;var x=K.p;try{K.p=2,bh(t,a,r,c)}finally{K.p=x,Q.T=p}}function qN(t,a,r,c){var p=Q.T;Q.T=null;var x=K.p;try{K.p=8,bh(t,a,r,c)}finally{K.p=x,Q.T=p}}function bh(t,a,r,c){if(Mc){var p=_h(c);if(p===null)rh(t,a,c,zc,r),hy(t,c);else if(HN(p,t,a,r,c))c.stopPropagation();else if(hy(t,c),a&4&&-1<ZN.indexOf(t)){for(;p!==null;){var x=St(p);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var j=et(x.pendingLanes);if(j!==0){var C=x;for(C.pendingLanes|=2,C.entangledLanes|=2;j;){var V=1<<31-Dt(j);C.entanglements[1]|=V,j&=~V}Qs(x),(Qt&6)===0&&(fc=se()+500,Io(0))}}break;case 31:case 13:C=os(x,2),C!==null&&Ra(C,x,2),xc(),vh(x,2)}if(x=_h(c),x===null&&rh(t,a,c,zc,r),x===p)break;p=x}p!==null&&c.stopPropagation()}else rh(t,a,c,null,r)}}function _h(t){return t=pr(t),Nh(t)}var zc=null;function Nh(t){if(zc=null,t=Ze(t),t!==null){var a=m(t);if(a===null)t=null;else{var r=a.tag;if(r===13){if(t=f(a),t!==null)return t;t=null}else if(r===31){if(t=g(a),t!==null)return t;t=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return zc=t,null}function my(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ke()){case _t:return 2;case pn:return 8;case Lt:case rt:return 32;case Qn:return 268435456;default:return 32}default:return 32}}var jh=!1,Wi=null,er=null,tr=null,Ko=new Map,Qo=new Map,nr=[],ZN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hy(t,a){switch(t){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":Ko.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(a.pointerId)}}function Go(t,a,r,c,p,x){return t===null||t.nativeEvent!==x?(t={blockedOn:a,domEventName:r,eventSystemFlags:c,nativeEvent:x,targetContainers:[p]},a!==null&&(a=St(a),a!==null&&cy(a)),t):(t.eventSystemFlags|=c,a=t.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),t)}function HN(t,a,r,c,p){switch(a){case"focusin":return Wi=Go(Wi,t,a,r,c,p),!0;case"dragenter":return er=Go(er,t,a,r,c,p),!0;case"mouseover":return tr=Go(tr,t,a,r,c,p),!0;case"pointerover":var x=p.pointerId;return Ko.set(x,Go(Ko.get(x)||null,t,a,r,c,p)),!0;case"gotpointercapture":return x=p.pointerId,Qo.set(x,Go(Qo.get(x)||null,t,a,r,c,p)),!0}return!1}function fy(t){var a=Ze(t.target);if(a!==null){var r=m(a);if(r!==null){if(a=r.tag,a===13){if(a=f(r),a!==null){t.blockedOn=a,yn(t.priority,function(){dy(r)});return}}else if(a===31){if(a=g(r),a!==null){t.blockedOn=a,yn(t.priority,function(){dy(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oc(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var r=_h(t.nativeEvent);if(r===null){r=t.nativeEvent;var c=new r.constructor(r.type,r);al=c,r.target.dispatchEvent(c),al=null}else return a=St(r),a!==null&&cy(a),t.blockedOn=r,!1;a.shift()}return!0}function py(t,a,r){Oc(t)&&r.delete(a)}function KN(){jh=!1,Wi!==null&&Oc(Wi)&&(Wi=null),er!==null&&Oc(er)&&(er=null),tr!==null&&Oc(tr)&&(tr=null),Ko.forEach(py),Qo.forEach(py)}function Rc(t,a){t.blockedOn===a&&(t.blockedOn=null,jh||(jh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,KN)))}var Dc=null;function xy(t){Dc!==t&&(Dc=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Dc===t&&(Dc=null);for(var a=0;a<t.length;a+=3){var r=t[a],c=t[a+1],p=t[a+2];if(typeof c!="function"){if(Nh(c||r)===null)continue;break}var x=St(r);x!==null&&(t.splice(a,3),a-=3,_m(x,{pending:!0,data:p,method:r.method,action:c},c,p))}}))}function Bl(t){function a(V){return Rc(V,t)}Wi!==null&&Rc(Wi,t),er!==null&&Rc(er,t),tr!==null&&Rc(tr,t),Ko.forEach(a),Qo.forEach(a);for(var r=0;r<nr.length;r++){var c=nr[r];c.blockedOn===t&&(c.blockedOn=null)}for(;0<nr.length&&(r=nr[0],r.blockedOn===null);)fy(r),r.blockedOn===null&&nr.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var p=r[c],x=r[c+1],j=p[hn]||null;if(typeof x=="function")j||xy(r);else if(j){var C=null;if(x&&x.hasAttribute("formAction")){if(p=x,j=x[hn]||null)C=j.formAction;else if(Nh(p)!==null)continue}else C=j.action;typeof C=="function"?r[c+1]=C:(r.splice(c,3),c-=3),xy(r)}}}function gy(){function t(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(j){return p=j})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function Sh(t){this._internalRoot=t}Lc.prototype.render=Sh.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(o(409));var r=a.current,c=Va();oy(r,c,t,a,null,null)},Lc.prototype.unmount=Sh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;oy(t.current,2,null,t,null,null),xc(),a[aa]=null}};function Lc(t){this._internalRoot=t}Lc.prototype.unstable_scheduleHydration=function(t){if(t){var a=sn();t={blockedOn:null,target:t,priority:a};for(var r=0;r<nr.length&&a!==0&&a<nr[r].priority;r++);nr.splice(r,0,t),r===0&&fy(t)}};var yy=s.version;if(yy!=="19.2.4")throw Error(o(527,yy,"19.2.4"));K.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=_(a),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var QN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pc.isDisabled&&Pc.supportsFiber)try{ut=Pc.inject(QN),Nt=Pc}catch{}}return $o.createRoot=function(t,a){if(!d(t))throw Error(o(299));var r=!1,c="",p=wx,x=kx,j=Ex;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(j=a.onRecoverableError)),a=ry(t,1,!1,null,null,r,c,null,p,x,j,gy),t[aa]=a.current,ih(t),new Sh(a)},$o.hydrateRoot=function(t,a,r){if(!d(t))throw Error(o(299));var c=!1,p="",x=wx,j=kx,C=Ex,V=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(x=r.onUncaughtError),r.onCaughtError!==void 0&&(j=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError),r.formState!==void 0&&(V=r.formState)),a=ry(t,1,!0,a,r??null,c,p,V,x,j,C,gy),a.context=ly(null),r=a.current,c=Va(),c=pt(c),p=Fi(c),p.callback=null,qi(r,p,c),r=c,a.current.lanes=r,Gn(a,r),Qs(a),t[aa]=a.current,ih(t),new Lc(a)},$o.version="19.2.4",$o}var Ty;function aj(){if(Ty)return Eh.exports;Ty=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(s){console.error(s)}}return e(),Eh.exports=nj(),Eh.exports}var sj=aj();const ij=Nd(sj);var Kl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rj={setTimeout:(e,s)=>setTimeout(e,s),clearTimeout:e=>clearTimeout(e),setInterval:(e,s)=>setInterval(e,s),clearInterval:e=>clearInterval(e)},lj=class{#e=rj;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,s){return this.#e.setTimeout(e,s)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,s){return this.#e.setInterval(e,s)}clearInterval(e){this.#e.clearInterval(e)}},Kr=new lj;function oj(e){setTimeout(e,0)}var Vr=typeof window>"u"||"Deno"in globalThis;function Na(){}function uj(e,s){return typeof e=="function"?e(s):e}function jf(e){return typeof e=="number"&&e>=0&&e!==1/0}function Lv(e,s){return Math.max(e+(s||0)-Date.now(),0)}function or(e,s){return typeof e=="function"?e(s):e}function fs(e,s){return typeof e=="function"?e(s):e}function Cy(e,s){const{type:l="all",exact:o,fetchStatus:d,predicate:m,queryKey:f,stale:g}=e;if(f){if(o){if(s.queryHash!==Vf(f,s.options))return!1}else if(!ru(s.queryKey,f))return!1}if(l!=="all"){const v=s.isActive();if(l==="active"&&!v||l==="inactive"&&v)return!1}return!(typeof g=="boolean"&&s.isStale()!==g||d&&d!==s.state.fetchStatus||m&&!m(s))}function Ay(e,s){const{exact:l,status:o,predicate:d,mutationKey:m}=e;if(m){if(!s.options.mutationKey)return!1;if(l){if($r(s.options.mutationKey)!==$r(m))return!1}else if(!ru(s.options.mutationKey,m))return!1}return!(o&&s.state.status!==o||d&&!d(s))}function Vf(e,s){return(s?.queryKeyHashFn||$r)(e)}function $r(e){return JSON.stringify(e,(s,l)=>Sf(l)?Object.keys(l).sort().reduce((o,d)=>(o[d]=l[d],o),{}):l)}function ru(e,s){return e===s?!0:typeof e!=typeof s?!1:e&&s&&typeof e=="object"&&typeof s=="object"?Object.keys(s).every(l=>ru(e[l],s[l])):!1}var cj=Object.prototype.hasOwnProperty;function Pv(e,s,l=0){if(e===s)return e;if(l>500)return s;const o=My(e)&&My(s);if(!o&&!(Sf(e)&&Sf(s)))return s;const m=(o?e:Object.keys(e)).length,f=o?s:Object.keys(s),g=f.length,v=o?new Array(g):{};let _=0;for(let S=0;S<g;S++){const w=o?S:f[S],E=e[w],R=s[w];if(E===R){v[w]=E,(o?S<m:cj.call(e,w))&&_++;continue}if(E===null||R===null||typeof E!="object"||typeof R!="object"){v[w]=R;continue}const T=Pv(E,R,l+1);v[w]=T,T===E&&_++}return m===g&&_===m?e:v}function od(e,s){if(!s||Object.keys(e).length!==Object.keys(s).length)return!1;for(const l in e)if(e[l]!==s[l])return!1;return!0}function My(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Sf(e){if(!zy(e))return!1;const s=e.constructor;if(s===void 0)return!0;const l=s.prototype;return!(!zy(l)||!l.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function zy(e){return Object.prototype.toString.call(e)==="[object Object]"}function dj(e){return new Promise(s=>{Kr.setTimeout(s,e)})}function wf(e,s,l){return typeof l.structuralSharing=="function"?l.structuralSharing(e,s):l.structuralSharing!==!1?Pv(e,s):s}function mj(e,s,l=0){const o=[...e,s];return l&&o.length>l?o.slice(1):o}function hj(e,s,l=0){const o=[s,...e];return l&&o.length>l?o.slice(0,-1):o}var $f=Symbol();function Iv(e,s){return!e.queryFn&&s?.initialPromise?()=>s.initialPromise:!e.queryFn||e.queryFn===$f?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Yf(e,s){return typeof e=="function"?e(...s):!!e}function fj(e,s,l){let o=!1,d;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(d??=s(),o||(o=!0,d.aborted?l():d.addEventListener("abort",l,{once:!0})),d)}),e}var pj=class extends Kl{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Vr&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Jf=new pj;function kf(){let e,s;const l=new Promise((d,m)=>{e=d,s=m});l.status="pending",l.catch(()=>{});function o(d){Object.assign(l,d),delete l.resolve,delete l.reject}return l.resolve=d=>{o({status:"fulfilled",value:d}),e(d)},l.reject=d=>{o({status:"rejected",reason:d}),s(d)},l}var xj=oj;function gj(){let e=[],s=0,l=g=>{g()},o=g=>{g()},d=xj;const m=g=>{s?e.push(g):d(()=>{l(g)})},f=()=>{const g=e;e=[],g.length&&d(()=>{o(()=>{g.forEach(v=>{l(v)})})})};return{batch:g=>{let v;s++;try{v=g()}finally{s--,s||f()}return v},batchCalls:g=>(...v)=>{m(()=>{g(...v)})},schedule:m,setNotifyFunction:g=>{l=g},setBatchNotifyFunction:g=>{o=g},setScheduler:g=>{d=g}}}var Jn=gj(),yj=class extends Kl{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Vr&&window.addEventListener){const s=()=>e(!0),l=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",l,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",l)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(l=>{l(e)}))}isOnline(){return this.#e}},ud=new yj;function vj(e){return Math.min(1e3*2**e,3e4)}function Bv(e){return(e??"online")==="online"?ud.isOnline():!0}var Ef=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Uv(e){let s=!1,l=0,o;const d=kf(),m=()=>d.status!=="pending",f=A=>{if(!m()){const O=new Ef(A);E(O),e.onCancel?.(O)}},g=()=>{s=!0},v=()=>{s=!1},_=()=>Jf.isFocused()&&(e.networkMode==="always"||ud.isOnline())&&e.canRun(),S=()=>Bv(e.networkMode)&&e.canRun(),w=A=>{m()||(o?.(),d.resolve(A))},E=A=>{m()||(o?.(),d.reject(A))},R=()=>new Promise(A=>{o=O=>{(m()||_())&&A(O)},e.onPause?.()}).then(()=>{o=void 0,m()||e.onContinue?.()}),T=()=>{if(m())return;let A;const O=l===0?e.initialPromise:void 0;try{A=O??e.fn()}catch(q){A=Promise.reject(q)}Promise.resolve(A).then(w).catch(q=>{if(m())return;const U=e.retry??(Vr?0:3),D=e.retryDelay??vj,G=typeof D=="function"?D(l,q):D,Y=U===!0||typeof U=="number"&&l<U||typeof U=="function"&&U(l,q);if(s||!Y){E(q);return}l++,e.onFail?.(l,q),dj(G).then(()=>_()?void 0:R()).then(()=>{s?E(q):T()})})};return{promise:d,status:()=>d.status,cancel:f,continue:()=>(o?.(),d),cancelRetry:g,continueRetry:v,canStart:S,start:()=>(S()?T():R().then(T),d)}}var Fv=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jf(this.gcTime)&&(this.#e=Kr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Vr?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Kr.clearTimeout(this.#e),this.#e=void 0)}},bj=class extends Fv{#e;#t;#n;#s;#a;#r;#l;constructor(e){super(),this.#l=!1,this.#r=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Ry(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(e){if(this.options={...this.#r,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=Ry(this.options);s.data!==void 0&&(this.setState(Oy(s.data,s.dataUpdatedAt)),this.#e=s)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,s){const l=wf(this.state.data,e,this.options);return this.#i({data:l,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),l}setState(e,s){this.#i({type:"setState",state:e,setStateOptions:s})}cancel(e){const s=this.#a?.promise;return this.#a?.cancel(e),s?s.then(Na).catch(Na):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>fs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$f||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>or(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Lv(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(this.#a&&(this.#l?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,s){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(v=>v.options.queryFn);g&&this.setOptions(g.options)}const l=new AbortController,o=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(this.#l=!0,l.signal)})},d=()=>{const g=Iv(this.options,s),_=(()=>{const S={client:this.#s,queryKey:this.queryKey,meta:this.meta};return o(S),S})();return this.#l=!1,this.options.persister?this.options.persister(g,_,this):g(_)},f=(()=>{const g={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:d};return o(g),g})();this.options.behavior?.onFetch(f,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==f.fetchOptions?.meta)&&this.#i({type:"fetch",meta:f.fetchOptions?.meta}),this.#a=Uv({initialPromise:s?.initialPromise,fn:f.fetchFn,onCancel:g=>{g instanceof Ef&&g.revert&&this.setState({...this.#t,fetchStatus:"idle"}),l.abort()},onFail:(g,v)=>{this.#i({type:"failed",failureCount:g,error:v})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0});try{const g=await this.#a.start();if(g===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(g),this.#n.config.onSuccess?.(g,this),this.#n.config.onSettled?.(g,this.state.error,this),g}catch(g){if(g instanceof Ef){if(g.silent)return this.#a.promise;if(g.revert){if(this.state.data===void 0)throw g;return this.state.data}}throw this.#i({type:"error",error:g}),this.#n.config.onError?.(g,this),this.#n.config.onSettled?.(this.state.data,g,this),g}finally{this.scheduleGc()}}#i(e){const s=l=>{switch(e.type){case"failed":return{...l,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...l,fetchStatus:"paused"};case"continue":return{...l,fetchStatus:"fetching"};case"fetch":return{...l,...qv(l.data,this.options),fetchMeta:e.meta??null};case"success":const o={...l,...Oy(e.data,e.dataUpdatedAt),dataUpdateCount:l.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?o:void 0,o;case"error":const d=e.error;return{...l,error:d,errorUpdateCount:l.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:l.fetchFailureCount+1,fetchFailureReason:d,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...l,isInvalidated:!0};case"setState":return{...l,...e.state}}};this.state=s(this.state),Jn.batch(()=>{this.observers.forEach(l=>{l.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function qv(e,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Bv(s.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Oy(e,s){return{data:e,dataUpdatedAt:s??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Ry(e){const s=typeof e.initialData=="function"?e.initialData():e.initialData,l=s!==void 0,o=l?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:l?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:l?"success":"pending",fetchStatus:"idle"}}var _j=class extends Kl{constructor(e,s){super(),this.options=s,this.#e=e,this.#i=null,this.#l=kf(),this.bindMethods(),this.setOptions(s)}#e;#t=void 0;#n=void 0;#s=void 0;#a;#r;#l;#i;#p;#m;#h;#u;#c;#o;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Dy(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Tf(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Tf(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#_(),this.#t.removeObserver(this)}setOptions(e){const s=this.options,l=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof fs(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),s._defaulted&&!od(this.options,s)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const o=this.hasListeners();o&&Ly(this.#t,l,this.options,s)&&this.#d(),this.updateResult(),o&&(this.#t!==l||fs(this.options.enabled,this.#t)!==fs(s.enabled,this.#t)||or(this.options.staleTime,this.#t)!==or(s.staleTime,this.#t))&&this.#x();const d=this.#g();o&&(this.#t!==l||fs(this.options.enabled,this.#t)!==fs(s.enabled,this.#t)||d!==this.#o)&&this.#y(d)}getOptimisticResult(e){const s=this.#e.getQueryCache().build(this.#e,e),l=this.createResult(s,e);return jj(this,l)&&(this.#s=l,this.#r=this.options,this.#a=this.#t.state),l}getCurrentResult(){return this.#s}trackResult(e,s){return new Proxy(e,{get:(l,o)=>(this.trackProp(o),s?.(o),o==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#l.status==="pending"&&this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(l,o))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=this.#e.defaultQueryOptions(e),l=this.#e.getQueryCache().build(this.#e,s);return l.fetch().then(()=>this.createResult(l,s))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(e){this.#N();let s=this.#t.fetch(this.options,e);return e?.throwOnError||(s=s.catch(Na)),s}#x(){this.#b();const e=or(this.options.staleTime,this.#t);if(Vr||this.#s.isStale||!jf(e))return;const l=Lv(this.#s.dataUpdatedAt,e)+1;this.#u=Kr.setTimeout(()=>{this.#s.isStale||this.updateResult()},l)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#_(),this.#o=e,!(Vr||fs(this.options.enabled,this.#t)===!1||!jf(this.#o)||this.#o===0)&&(this.#c=Kr.setInterval(()=>{(this.options.refetchIntervalInBackground||Jf.isFocused())&&this.#d()},this.#o))}#v(){this.#x(),this.#y(this.#g())}#b(){this.#u&&(Kr.clearTimeout(this.#u),this.#u=void 0)}#_(){this.#c&&(Kr.clearInterval(this.#c),this.#c=void 0)}createResult(e,s){const l=this.#t,o=this.options,d=this.#s,m=this.#a,f=this.#r,v=e!==l?e.state:this.#n,{state:_}=e;let S={..._},w=!1,E;if(s._optimisticResults){const te=this.hasListeners(),J=!te&&Dy(e,s),fe=te&&Ly(e,l,s,o);(J||fe)&&(S={...S,...qv(_.data,e.options)}),s._optimisticResults==="isRestoring"&&(S.fetchStatus="idle")}let{error:R,errorUpdatedAt:T,status:A}=S;E=S.data;let O=!1;if(s.placeholderData!==void 0&&E===void 0&&A==="pending"){let te;d?.isPlaceholderData&&s.placeholderData===f?.placeholderData?(te=d.data,O=!0):te=typeof s.placeholderData=="function"?s.placeholderData(this.#h?.state.data,this.#h):s.placeholderData,te!==void 0&&(A="success",E=wf(d?.data,te,s),w=!0)}if(s.select&&E!==void 0&&!O)if(d&&E===m?.data&&s.select===this.#p)E=this.#m;else try{this.#p=s.select,E=s.select(E),E=wf(d?.data,E,s),this.#m=E,this.#i=null}catch(te){this.#i=te}this.#i&&(R=this.#i,E=this.#m,T=Date.now(),A="error");const q=S.fetchStatus==="fetching",U=A==="pending",D=A==="error",G=U&&q,Y=E!==void 0,H={status:A,fetchStatus:S.fetchStatus,isPending:U,isSuccess:A==="success",isError:D,isInitialLoading:G,isLoading:G,data:E,dataUpdatedAt:S.dataUpdatedAt,error:R,errorUpdatedAt:T,failureCount:S.fetchFailureCount,failureReason:S.fetchFailureReason,errorUpdateCount:S.errorUpdateCount,isFetched:S.dataUpdateCount>0||S.errorUpdateCount>0,isFetchedAfterMount:S.dataUpdateCount>v.dataUpdateCount||S.errorUpdateCount>v.errorUpdateCount,isFetching:q,isRefetching:q&&!U,isLoadingError:D&&!Y,isPaused:S.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:D&&Y,isStale:Xf(e,s),refetch:this.refetch,promise:this.#l,isEnabled:fs(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const te=H.data!==void 0,J=H.status==="error"&&!te,fe=Se=>{J?Se.reject(H.error):te&&Se.resolve(H.data)},ye=()=>{const Se=this.#l=H.promise=kf();fe(Se)},de=this.#l;switch(de.status){case"pending":e.queryHash===l.queryHash&&fe(de);break;case"fulfilled":(J||H.data!==de.value)&&ye();break;case"rejected":(!J||H.error!==de.reason)&&ye();break}}return H}updateResult(){const e=this.#s,s=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#r=this.options,this.#a.data!==void 0&&(this.#h=this.#t),od(s,e))return;this.#s=s;const l=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,d=typeof o=="function"?o():o;if(d==="all"||!d&&!this.#f.size)return!0;const m=new Set(d??this.#f);return this.options.throwOnError&&m.add("error"),Object.keys(this.#s).some(f=>{const g=f;return this.#s[g]!==e[g]&&m.has(g)})};this.#j({listeners:l()})}#N(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const s=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(s?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#j(e){Jn.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Nj(e,s){return fs(s.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&s.retryOnMount===!1)}function Dy(e,s){return Nj(e,s)||e.state.data!==void 0&&Tf(e,s,s.refetchOnMount)}function Tf(e,s,l){if(fs(s.enabled,e)!==!1&&or(s.staleTime,e)!=="static"){const o=typeof l=="function"?l(e):l;return o==="always"||o!==!1&&Xf(e,s)}return!1}function Ly(e,s,l,o){return(e!==s||fs(o.enabled,e)===!1)&&(!l.suspense||e.state.status!=="error")&&Xf(e,l)}function Xf(e,s){return fs(s.enabled,e)!==!1&&e.isStaleByTime(or(s.staleTime,e))}function jj(e,s){return!od(e.getCurrentResult(),s)}function Py(e){return{onFetch:(s,l)=>{const o=s.options,d=s.fetchOptions?.meta?.fetchMore?.direction,m=s.state.data?.pages||[],f=s.state.data?.pageParams||[];let g={pages:[],pageParams:[]},v=0;const _=async()=>{let S=!1;const w=T=>{fj(T,()=>s.signal,()=>S=!0)},E=Iv(s.options,s.fetchOptions),R=async(T,A,O)=>{if(S)return Promise.reject();if(A==null&&T.pages.length)return Promise.resolve(T);const U=(()=>{const ee={client:s.client,queryKey:s.queryKey,pageParam:A,direction:O?"backward":"forward",meta:s.options.meta};return w(ee),ee})(),D=await E(U),{maxPages:G}=s.options,Y=O?hj:mj;return{pages:Y(T.pages,D,G),pageParams:Y(T.pageParams,A,G)}};if(d&&m.length){const T=d==="backward",A=T?Sj:Iy,O={pages:m,pageParams:f},q=A(o,O);g=await R(O,q,T)}else{const T=e??m.length;do{const A=v===0?f[0]??o.initialPageParam:Iy(o,g);if(v>0&&A==null)break;g=await R(g,A),v++}while(v<T)}return g};s.options.persister?s.fetchFn=()=>s.options.persister?.(_,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},l):s.fetchFn=_}}}function Iy(e,{pages:s,pageParams:l}){const o=s.length-1;return s.length>0?e.getNextPageParam(s[o],s,l[o],l):void 0}function Sj(e,{pages:s,pageParams:l}){return s.length>0?e.getPreviousPageParam?.(s[0],s,l[0],l):void 0}var wj=class extends Fv{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||Zv(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(s=>s!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const s=()=>{this.#a({type:"continue"})},l={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=Uv({fn:()=>this.options.mutationFn?this.options.mutationFn(e,l):Promise.reject(new Error("No mutationFn found")),onFail:(m,f)=>{this.#a({type:"failed",failureCount:m,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const o=this.state.status==="pending",d=!this.#s.canStart();try{if(o)s();else{this.#a({type:"pending",variables:e,isPaused:d}),this.#n.config.onMutate&&await this.#n.config.onMutate(e,this,l);const f=await this.options.onMutate?.(e,l);f!==this.state.context&&this.#a({type:"pending",context:f,variables:e,isPaused:d})}const m=await this.#s.start();return await this.#n.config.onSuccess?.(m,e,this.state.context,this,l),await this.options.onSuccess?.(m,e,this.state.context,l),await this.#n.config.onSettled?.(m,null,this.state.variables,this.state.context,this,l),await this.options.onSettled?.(m,null,e,this.state.context,l),this.#a({type:"success",data:m}),m}catch(m){try{await this.#n.config.onError?.(m,e,this.state.context,this,l)}catch(f){Promise.reject(f)}try{await this.options.onError?.(m,e,this.state.context,l)}catch(f){Promise.reject(f)}try{await this.#n.config.onSettled?.(void 0,m,this.state.variables,this.state.context,this,l)}catch(f){Promise.reject(f)}try{await this.options.onSettled?.(void 0,m,e,this.state.context,l)}catch(f){Promise.reject(f)}throw this.#a({type:"error",error:m}),m}finally{this.#n.runNext(this)}}#a(e){const s=l=>{switch(e.type){case"failed":return{...l,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...l,isPaused:!0};case"continue":return{...l,isPaused:!1};case"pending":return{...l,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...l,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...l,data:void 0,error:e.error,failureCount:l.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Jn.batch(()=>{this.#t.forEach(l=>{l.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function Zv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var kj=class extends Kl{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,s,l){const o=new wj({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(s),state:l});return this.add(o),o}add(e){this.#e.add(e);const s=Ic(e);if(typeof s=="string"){const l=this.#t.get(s);l?l.push(e):this.#t.set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const s=Ic(e);if(typeof s=="string"){const l=this.#t.get(s);if(l)if(l.length>1){const o=l.indexOf(e);o!==-1&&l.splice(o,1)}else l[0]===e&&this.#t.delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=Ic(e);if(typeof s=="string"){const o=this.#t.get(s)?.find(d=>d.state.status==="pending");return!o||o===e}else return!0}runNext(e){const s=Ic(e);return typeof s=="string"?this.#t.get(s)?.find(o=>o!==e&&o.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Jn.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const s={exact:!0,...e};return this.getAll().find(l=>Ay(s,l))}findAll(e={}){return this.getAll().filter(s=>Ay(e,s))}notify(e){Jn.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return Jn.batch(()=>Promise.all(e.map(s=>s.continue().catch(Na))))}};function Ic(e){return e.options.scope?.id}var Ej=class extends Kl{#e;#t=void 0;#n;#s;constructor(s,l){super(),this.#e=s,this.setOptions(l),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const l=this.options;this.options=this.#e.defaultMutationOptions(s),od(this.options,l)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),l?.mutationKey&&this.options.mutationKey&&$r(l.mutationKey)!==$r(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(s){this.#a(),this.#r(s)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#a(),this.#r()}mutate(s,l){return this.#s=l,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(s)}#a(){const s=this.#n?.state??Zv();this.#t={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#r(s){Jn.batch(()=>{if(this.#s&&this.hasListeners()){const l=this.#t.variables,o=this.#t.context,d={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(s?.type==="success"){try{this.#s.onSuccess?.(s.data,l,o,d)}catch(m){Promise.reject(m)}try{this.#s.onSettled?.(s.data,null,l,o,d)}catch(m){Promise.reject(m)}}else if(s?.type==="error"){try{this.#s.onError?.(s.error,l,o,d)}catch(m){Promise.reject(m)}try{this.#s.onSettled?.(void 0,s.error,l,o,d)}catch(m){Promise.reject(m)}}}this.listeners.forEach(l=>{l(this.#t)})})}},Tj=class extends Kl{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,s,l){const o=s.queryKey,d=s.queryHash??Vf(o,s);let m=this.get(d);return m||(m=new bj({client:e,queryKey:o,queryHash:d,options:e.defaultQueryOptions(s),state:l,defaultOptions:e.getQueryDefaults(o)}),this.add(m)),m}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=this.#e.get(e.queryHash);s&&(e.destroy(),s===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Jn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const s={exact:!0,...e};return this.getAll().find(l=>Cy(s,l))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(l=>Cy(e,l)):s}notify(e){Jn.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){Jn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Jn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Cj=class{#e;#t;#n;#s;#a;#r;#l;#i;constructor(e={}){this.#e=e.queryCache||new Tj,this.#t=e.mutationCache||new kj,this.#n=e.defaultOptions||{},this.#s=new Map,this.#a=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#l=Jf.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=ud.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#l?.(),this.#l=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const s=this.defaultQueryOptions({queryKey:e});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(e){const s=this.defaultQueryOptions(e),l=this.#e.build(this,s),o=l.state.data;return o===void 0?this.fetchQuery(e):(e.revalidateIfStale&&l.isStaleByTime(or(s.staleTime,l))&&this.prefetchQuery(s),Promise.resolve(o))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:s,state:l})=>{const o=l.data;return[s,o]})}setQueryData(e,s,l){const o=this.defaultQueryOptions({queryKey:e}),m=this.#e.get(o.queryHash)?.state.data,f=uj(s,m);if(f!==void 0)return this.#e.build(this,o).setData(f,{...l,manual:!0})}setQueriesData(e,s,l){return Jn.batch(()=>this.#e.findAll(e).map(({queryKey:o})=>[o,this.setQueryData(o,s,l)]))}getQueryState(e){const s=this.defaultQueryOptions({queryKey:e});return this.#e.get(s.queryHash)?.state}removeQueries(e){const s=this.#e;Jn.batch(()=>{s.findAll(e).forEach(l=>{s.remove(l)})})}resetQueries(e,s){const l=this.#e;return Jn.batch(()=>(l.findAll(e).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...e},s)))}cancelQueries(e,s={}){const l={revert:!0,...s},o=Jn.batch(()=>this.#e.findAll(e).map(d=>d.cancel(l)));return Promise.all(o).then(Na).catch(Na)}invalidateQueries(e,s={}){return Jn.batch(()=>(this.#e.findAll(e).forEach(l=>{l.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},s)))}refetchQueries(e,s={}){const l={...s,cancelRefetch:s.cancelRefetch??!0},o=Jn.batch(()=>this.#e.findAll(e).filter(d=>!d.isDisabled()&&!d.isStatic()).map(d=>{let m=d.fetch(void 0,l);return l.throwOnError||(m=m.catch(Na)),d.state.fetchStatus==="paused"?Promise.resolve():m}));return Promise.all(o).then(Na)}fetchQuery(e){const s=this.defaultQueryOptions(e);s.retry===void 0&&(s.retry=!1);const l=this.#e.build(this,s);return l.isStaleByTime(or(s.staleTime,l))?l.fetch(s):Promise.resolve(l.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Na).catch(Na)}fetchInfiniteQuery(e){return e.behavior=Py(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Na).catch(Na)}ensureInfiniteQueryData(e){return e.behavior=Py(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ud.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,s){this.#s.set($r(e),{queryKey:e,defaultOptions:s})}getQueryDefaults(e){const s=[...this.#s.values()],l={};return s.forEach(o=>{ru(e,o.queryKey)&&Object.assign(l,o.defaultOptions)}),l}setMutationDefaults(e,s){this.#a.set($r(e),{mutationKey:e,defaultOptions:s})}getMutationDefaults(e){const s=[...this.#a.values()],l={};return s.forEach(o=>{ru(e,o.mutationKey)&&Object.assign(l,o.defaultOptions)}),l}defaultQueryOptions(e){if(e._defaulted)return e;const s={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return s.queryHash||(s.queryHash=Vf(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===$f&&(s.enabled=!1),s}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Hv=b.createContext(void 0),na=e=>{const s=b.useContext(Hv);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},Aj=({client:e,children:s})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(Hv.Provider,{value:e,children:s})),Kv=b.createContext(!1),Mj=()=>b.useContext(Kv);Kv.Provider;function zj(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Oj=b.createContext(zj()),Rj=()=>b.useContext(Oj),Dj=(e,s,l)=>{const o=l?.state.error&&typeof e.throwOnError=="function"?Yf(e.throwOnError,[l.state.error,l]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||o)&&(s.isReset()||(e.retryOnMount=!1))},Lj=e=>{b.useEffect(()=>{e.clearReset()},[e])},Pj=({result:e,errorResetBoundary:s,throwOnError:l,query:o,suspense:d})=>e.isError&&!s.isReset()&&!e.isFetching&&o&&(d&&e.data===void 0||Yf(l,[e.error,o])),Ij=e=>{if(e.suspense){const l=d=>d==="static"?d:Math.max(d??1e3,1e3),o=e.staleTime;e.staleTime=typeof o=="function"?(...d)=>l(o(...d)):l(o),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Bj=(e,s)=>e.isLoading&&e.isFetching&&!s,Uj=(e,s)=>e?.suspense&&s.isPending,By=(e,s,l)=>s.fetchOptimistic(e).catch(()=>{l.clearReset()});function Fj(e,s,l){const o=Mj(),d=Rj(),m=na(),f=m.defaultQueryOptions(e);m.getDefaultOptions().queries?._experimental_beforeQuery?.(f);const g=m.getQueryCache().get(f.queryHash);f._optimisticResults=o?"isRestoring":"optimistic",Ij(f),Dj(f,d,g),Lj(d);const v=!m.getQueryCache().get(f.queryHash),[_]=b.useState(()=>new s(m,f)),S=_.getOptimisticResult(f),w=!o&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(E=>{const R=w?_.subscribe(Jn.batchCalls(E)):Na;return _.updateResult(),R},[_,w]),()=>_.getCurrentResult(),()=>_.getCurrentResult()),b.useEffect(()=>{_.setOptions(f)},[f,_]),Uj(f,S))throw By(f,_,d);if(Pj({result:S,errorResetBoundary:d,throwOnError:f.throwOnError,query:g,suspense:f.suspense}))throw S.error;return m.getDefaultOptions().queries?._experimental_afterQuery?.(f,S),f.experimental_prefetchInRender&&!Vr&&Bj(S,o)&&(v?By(f,_,d):g?.promise)?.catch(Na).finally(()=>{_.updateResult()}),f.notifyOnChangeProps?S:_.trackResult(S)}function Qe(e,s){return Fj(e,_j)}function Je(e,s){const l=na(),[o]=b.useState(()=>new Ej(l,e));b.useEffect(()=>{o.setOptions(e)},[o,e]);const d=b.useSyncExternalStore(b.useCallback(f=>o.subscribe(Jn.batchCalls(f)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),m=b.useCallback((f,g)=>{o.mutate(f,g).catch(Na)},[o]);if(d.error&&Yf(o.options.throwOnError,[d.error]))throw d.error;return{...d,mutate:m,mutateAsync:d.mutate}}var Uy="popstate";function qj(e={}){function s(o,d){let{pathname:m,search:f,hash:g}=o.location;return Cf("",{pathname:m,search:f,hash:g},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function l(o,d){return typeof d=="string"?d:lu(d)}return Hj(s,l,null,e)}function _n(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function xs(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Zj(){return Math.random().toString(36).substring(2,10)}function Fy(e,s){return{usr:e.state,key:e.key,idx:s}}function Cf(e,s,l=null,o){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof s=="string"?Ql(s):s,state:l,key:s&&s.key||o||Zj()}}function lu({pathname:e="/",search:s="",hash:l=""}){return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),l&&l!=="#"&&(e+=l.charAt(0)==="#"?l:"#"+l),e}function Ql(e){let s={};if(e){let l=e.indexOf("#");l>=0&&(s.hash=e.substring(l),e=e.substring(0,l));let o=e.indexOf("?");o>=0&&(s.search=e.substring(o),e=e.substring(0,o)),e&&(s.pathname=e)}return s}function Hj(e,s,l,o={}){let{window:d=document.defaultView,v5Compat:m=!1}=o,f=d.history,g="POP",v=null,_=S();_==null&&(_=0,f.replaceState({...f.state,idx:_},""));function S(){return(f.state||{idx:null}).idx}function w(){g="POP";let O=S(),q=O==null?null:O-_;_=O,v&&v({action:g,location:A.location,delta:q})}function E(O,q){g="PUSH";let U=Cf(A.location,O,q);_=S()+1;let D=Fy(U,_),G=A.createHref(U);try{f.pushState(D,"",G)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;d.location.assign(G)}m&&v&&v({action:g,location:A.location,delta:1})}function R(O,q){g="REPLACE";let U=Cf(A.location,O,q);_=S();let D=Fy(U,_),G=A.createHref(U);f.replaceState(D,"",G),m&&v&&v({action:g,location:A.location,delta:0})}function T(O){return Kj(O)}let A={get action(){return g},get location(){return e(d,f)},listen(O){if(v)throw new Error("A history only accepts one active listener");return d.addEventListener(Uy,w),v=O,()=>{d.removeEventListener(Uy,w),v=null}},createHref(O){return s(d,O)},createURL:T,encodeLocation(O){let q=T(O);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:E,replace:R,go(O){return f.go(O)}};return A}function Kj(e,s=!1){let l="http://localhost";typeof window<"u"&&(l=window.location.origin!=="null"?window.location.origin:window.location.href),_n(l,"No window.location.(origin|href) available to create URL");let o=typeof e=="string"?e:lu(e);return o=o.replace(/ $/,"%20"),!s&&o.startsWith("//")&&(o=l+o),new URL(o,l)}function Qv(e,s,l="/"){return Qj(e,s,l,!1)}function Qj(e,s,l,o){let d=typeof s=="string"?Ql(s):s,m=Ni(d.pathname||"/",l);if(m==null)return null;let f=Gv(e);Gj(f);let g=null;for(let v=0;g==null&&v<f.length;++v){let _=sS(m);g=nS(f[v],_,o)}return g}function Gv(e,s=[],l=[],o="",d=!1){let m=(f,g,v=d,_)=>{let S={relativePath:_===void 0?f.path||"":_,caseSensitive:f.caseSensitive===!0,childrenIndex:g,route:f};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(o)&&v)return;_n(S.relativePath.startsWith(o),`Absolute route path "${S.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(o.length)}let w=bi([o,S.relativePath]),E=l.concat(S);f.children&&f.children.length>0&&(_n(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),Gv(f.children,s,E,w,v)),!(f.path==null&&!f.index)&&s.push({path:w,score:eS(w,f.index),routesMeta:E})};return e.forEach((f,g)=>{if(f.path===""||!f.path?.includes("?"))m(f,g);else for(let v of Vv(f.path))m(f,g,!0,v)}),s}function Vv(e){let s=e.split("/");if(s.length===0)return[];let[l,...o]=s,d=l.endsWith("?"),m=l.replace(/\?$/,"");if(o.length===0)return d?[m,""]:[m];let f=Vv(o.join("/")),g=[];return g.push(...f.map(v=>v===""?m:[m,v].join("/"))),d&&g.push(...f),g.map(v=>e.startsWith("/")&&v===""?"/":v)}function Gj(e){e.sort((s,l)=>s.score!==l.score?l.score-s.score:tS(s.routesMeta.map(o=>o.childrenIndex),l.routesMeta.map(o=>o.childrenIndex)))}var Vj=/^:[\w-]+$/,$j=3,Yj=2,Jj=1,Xj=10,Wj=-2,qy=e=>e==="*";function eS(e,s){let l=e.split("/"),o=l.length;return l.some(qy)&&(o+=Wj),s&&(o+=Yj),l.filter(d=>!qy(d)).reduce((d,m)=>d+(Vj.test(m)?$j:m===""?Jj:Xj),o)}function tS(e,s){return e.length===s.length&&e.slice(0,-1).every((o,d)=>o===s[d])?e[e.length-1]-s[s.length-1]:0}function nS(e,s,l=!1){let{routesMeta:o}=e,d={},m="/",f=[];for(let g=0;g<o.length;++g){let v=o[g],_=g===o.length-1,S=m==="/"?s:s.slice(m.length)||"/",w=cd({path:v.relativePath,caseSensitive:v.caseSensitive,end:_},S),E=v.route;if(!w&&_&&l&&!o[o.length-1].route.index&&(w=cd({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},S)),!w)return null;Object.assign(d,w.params),f.push({params:d,pathname:bi([m,w.pathname]),pathnameBase:oS(bi([m,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(m=bi([m,w.pathnameBase]))}return f}function cd(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[l,o]=aS(e.path,e.caseSensitive,e.end),d=s.match(l);if(!d)return null;let m=d[0],f=m.replace(/(.)\/+$/,"$1"),g=d.slice(1);return{params:o.reduce((_,{paramName:S,isOptional:w},E)=>{if(S==="*"){let T=g[E]||"";f=m.slice(0,m.length-T.length).replace(/(.)\/+$/,"$1")}const R=g[E];return w&&!R?_[S]=void 0:_[S]=(R||"").replace(/%2F/g,"/"),_},{}),pathname:m,pathnameBase:f,pattern:e}}function aS(e,s=!1,l=!0){xs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let o=[],d="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,g,v)=>(o.push({paramName:g,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(o.push({paramName:"*"}),d+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?d+="\\/*$":e!==""&&e!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,s?void 0:"i"),o]}function sS(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return xs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),e}}function Ni(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let l=s.endsWith("/")?s.length-1:s.length,o=e.charAt(l);return o&&o!=="/"?null:e.slice(l)||"/"}var iS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function rS(e,s="/"){let{pathname:l,search:o="",hash:d=""}=typeof e=="string"?Ql(e):e,m;return l?(l=l.replace(/\/\/+/g,"/"),l.startsWith("/")?m=Zy(l.substring(1),"/"):m=Zy(l,s)):m=s,{pathname:m,search:uS(o),hash:cS(d)}}function Zy(e,s){let l=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(d=>{d===".."?l.length>1&&l.pop():d!=="."&&l.push(d)}),l.length>1?l.join("/"):"/"}function Mh(e,s,l,o){return`Cannot include a '${e}' character in a manually specified \`to.${s}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${l}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lS(e){return e.filter((s,l)=>l===0||s.route.path&&s.route.path.length>0)}function Wf(e){let s=lS(e);return s.map((l,o)=>o===s.length-1?l.pathname:l.pathnameBase)}function ep(e,s,l,o=!1){let d;typeof e=="string"?d=Ql(e):(d={...e},_n(!d.pathname||!d.pathname.includes("?"),Mh("?","pathname","search",d)),_n(!d.pathname||!d.pathname.includes("#"),Mh("#","pathname","hash",d)),_n(!d.search||!d.search.includes("#"),Mh("#","search","hash",d)));let m=e===""||d.pathname==="",f=m?"/":d.pathname,g;if(f==null)g=l;else{let w=s.length-1;if(!o&&f.startsWith("..")){let E=f.split("/");for(;E[0]==="..";)E.shift(),w-=1;d.pathname=E.join("/")}g=w>=0?s[w]:"/"}let v=rS(d,g),_=f&&f!=="/"&&f.endsWith("/"),S=(m||f===".")&&l.endsWith("/");return!v.pathname.endsWith("/")&&(_||S)&&(v.pathname+="/"),v}var bi=e=>e.join("/").replace(/\/\/+/g,"/"),oS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),uS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,dS=class{constructor(e,s,l,o=!1){this.status=e,this.statusText=s||"",this.internal=o,l instanceof Error?(this.data=l.toString(),this.error=l):this.data=l}};function mS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function hS(e){return e.map(s=>s.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var $v=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Yv(e,s){let l=e;if(typeof l!="string"||!iS.test(l))return{absoluteURL:void 0,isExternal:!1,to:l};let o=l,d=!1;if($v)try{let m=new URL(window.location.href),f=l.startsWith("//")?new URL(m.protocol+l):new URL(l),g=Ni(f.pathname,s);f.origin===m.origin&&g!=null?l=g+f.search+f.hash:d=!0}catch{xs(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:d,to:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Jv=["POST","PUT","PATCH","DELETE"];new Set(Jv);var fS=["GET",...Jv];new Set(fS);var Gl=b.createContext(null);Gl.displayName="DataRouter";var jd=b.createContext(null);jd.displayName="DataRouterState";var pS=b.createContext(!1),Xv=b.createContext({isTransitioning:!1});Xv.displayName="ViewTransition";var xS=b.createContext(new Map);xS.displayName="Fetchers";var gS=b.createContext(null);gS.displayName="Await";var Ja=b.createContext(null);Ja.displayName="Navigation";var cu=b.createContext(null);cu.displayName="Location";var gs=b.createContext({outlet:null,matches:[],isDataRoute:!1});gs.displayName="Route";var tp=b.createContext(null);tp.displayName="RouteError";var Wv="REACT_ROUTER_ERROR",yS="REDIRECT",vS="ROUTE_ERROR_RESPONSE";function bS(e){if(e.startsWith(`${Wv}:${yS}:{`))try{let s=JSON.parse(e.slice(28));if(typeof s=="object"&&s&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.location=="string"&&typeof s.reloadDocument=="boolean"&&typeof s.replace=="boolean")return s}catch{}}function _S(e){if(e.startsWith(`${Wv}:${vS}:{`))try{let s=JSON.parse(e.slice(40));if(typeof s=="object"&&s&&typeof s.status=="number"&&typeof s.statusText=="string")return new dS(s.status,s.statusText,s.data)}catch{}}function NS(e,{relative:s}={}){_n(Vl(),"useHref() may be used only in the context of a <Router> component.");let{basename:l,navigator:o}=b.useContext(Ja),{hash:d,pathname:m,search:f}=du(e,{relative:s}),g=m;return l!=="/"&&(g=m==="/"?l:bi([l,m])),o.createHref({pathname:g,search:f,hash:d})}function Vl(){return b.useContext(cu)!=null}function ys(){return _n(Vl(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(cu).location}var eb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tb(e){b.useContext(Ja).static||b.useLayoutEffect(e)}function $l(){let{isDataRoute:e}=b.useContext(gs);return e?IS():jS()}function jS(){_n(Vl(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(Gl),{basename:s,navigator:l}=b.useContext(Ja),{matches:o}=b.useContext(gs),{pathname:d}=ys(),m=JSON.stringify(Wf(o)),f=b.useRef(!1);return tb(()=>{f.current=!0}),b.useCallback((v,_={})=>{if(xs(f.current,eb),!f.current)return;if(typeof v=="number"){l.go(v);return}let S=ep(v,JSON.parse(m),d,_.relative==="path");e==null&&s!=="/"&&(S.pathname=S.pathname==="/"?s:bi([s,S.pathname])),(_.replace?l.replace:l.push)(S,_.state,_)},[s,l,m,d,e])}var SS=b.createContext(null);function wS(e){let s=b.useContext(gs).outlet;return b.useMemo(()=>s&&b.createElement(SS.Provider,{value:e},s),[s,e])}function kS(){let{matches:e}=b.useContext(gs),s=e[e.length-1];return s?s.params:{}}function du(e,{relative:s}={}){let{matches:l}=b.useContext(gs),{pathname:o}=ys(),d=JSON.stringify(Wf(l));return b.useMemo(()=>ep(e,JSON.parse(d),o,s==="path"),[e,d,o,s])}function ES(e,s){return nb(e,s)}function nb(e,s,l,o,d){_n(Vl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=b.useContext(Ja),{matches:f}=b.useContext(gs),g=f[f.length-1],v=g?g.params:{},_=g?g.pathname:"/",S=g?g.pathnameBase:"/",w=g&&g.route;{let U=w&&w.path||"";sb(_,!w||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let E=ys(),R;if(s){let U=typeof s=="string"?Ql(s):s;_n(S==="/"||U.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${U.pathname}" was given in the \`location\` prop.`),R=U}else R=E;let T=R.pathname||"/",A=T;if(S!=="/"){let U=S.replace(/^\//,"").split("/");A="/"+T.replace(/^\//,"").split("/").slice(U.length).join("/")}let O=Qv(e,{pathname:A});xs(w||O!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),xs(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=zS(O&&O.map(U=>Object.assign({},U,{params:Object.assign({},v,U.params),pathname:bi([S,m.encodeLocation?m.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?S:bi([S,m.encodeLocation?m.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),f,l,o,d);return s&&q?b.createElement(cu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},q):q}function TS(){let e=PS(),s=mS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),l=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:o},m={padding:"2px 4px",backgroundColor:o},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:m},"ErrorBoundary")," or"," ",b.createElement("code",{style:m},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},s),l?b.createElement("pre",{style:d},l):null,f)}var CS=b.createElement(TS,null),ab=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){this.props.onError?this.props.onError(e,s):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const l=_S(e.digest);l&&(e=l)}let s=e!==void 0?b.createElement(gs.Provider,{value:this.props.routeContext},b.createElement(tp.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?b.createElement(AS,{error:e},s):s}};ab.contextType=pS;var zh=new WeakMap;function AS({children:e,error:s}){let{basename:l}=b.useContext(Ja);if(typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){let o=bS(s.digest);if(o){let d=zh.get(s);if(d)throw d;let m=Yv(o.location,l);if($v&&!zh.get(s))if(m.isExternal||o.reloadDocument)window.location.href=m.absoluteURL||m.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(m.to,{replace:o.replace}));throw zh.set(s,f),f}return b.createElement("meta",{httpEquiv:"refresh",content:`0;url=${m.absoluteURL||m.to}`})}}return e}function MS({routeContext:e,match:s,children:l}){let o=b.useContext(Gl);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),b.createElement(gs.Provider,{value:e},l)}function zS(e,s=[],l=null,o=null,d=null){if(e==null){if(!l)return null;if(l.errors)e=l.matches;else if(s.length===0&&!l.initialized&&l.matches.length>0)e=l.matches;else return null}let m=e,f=l?.errors;if(f!=null){let S=m.findIndex(w=>w.route.id&&f?.[w.route.id]!==void 0);_n(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),m=m.slice(0,Math.min(m.length,S+1))}let g=!1,v=-1;if(l)for(let S=0;S<m.length;S++){let w=m[S];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(v=S),w.route.id){let{loaderData:E,errors:R}=l,T=w.route.loader&&!E.hasOwnProperty(w.route.id)&&(!R||R[w.route.id]===void 0);if(w.route.lazy||T){g=!0,v>=0?m=m.slice(0,v+1):m=[m[0]];break}}}let _=l&&o?(S,w)=>{o(S,{location:l.location,params:l.matches?.[0]?.params??{},unstable_pattern:hS(l.matches),errorInfo:w})}:void 0;return m.reduceRight((S,w,E)=>{let R,T=!1,A=null,O=null;l&&(R=f&&w.route.id?f[w.route.id]:void 0,A=w.route.errorElement||CS,g&&(v<0&&E===0?(sb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,O=null):v===E&&(T=!0,O=w.route.hydrateFallbackElement||null)));let q=s.concat(m.slice(0,E+1)),U=()=>{let D;return R?D=A:T?D=O:w.route.Component?D=b.createElement(w.route.Component,null):w.route.element?D=w.route.element:D=S,b.createElement(MS,{match:w,routeContext:{outlet:S,matches:q,isDataRoute:l!=null},children:D})};return l&&(w.route.ErrorBoundary||w.route.errorElement||E===0)?b.createElement(ab,{location:l.location,revalidation:l.revalidation,component:A,error:R,children:U(),routeContext:{outlet:null,matches:q,isDataRoute:!0},onError:_}):U()},null)}function np(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OS(e){let s=b.useContext(Gl);return _n(s,np(e)),s}function RS(e){let s=b.useContext(jd);return _n(s,np(e)),s}function DS(e){let s=b.useContext(gs);return _n(s,np(e)),s}function ap(e){let s=DS(e),l=s.matches[s.matches.length-1];return _n(l.route.id,`${e} can only be used on routes that contain a unique "id"`),l.route.id}function LS(){return ap("useRouteId")}function PS(){let e=b.useContext(tp),s=RS("useRouteError"),l=ap("useRouteError");return e!==void 0?e:s.errors?.[l]}function IS(){let{router:e}=OS("useNavigate"),s=ap("useNavigate"),l=b.useRef(!1);return tb(()=>{l.current=!0}),b.useCallback(async(d,m={})=>{xs(l.current,eb),l.current&&(typeof d=="number"?await e.navigate(d):await e.navigate(d,{fromRouteId:s,...m}))},[e,s])}var Hy={};function sb(e,s,l){!s&&!Hy[e]&&(Hy[e]=!0,xs(!1,l))}b.memo(BS);function BS({routes:e,future:s,state:l,onError:o}){return nb(e,void 0,l,o,s)}function dd({to:e,replace:s,state:l,relative:o}){_n(Vl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:d}=b.useContext(Ja);xs(!d,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:m}=b.useContext(gs),{pathname:f}=ys(),g=$l(),v=ep(e,Wf(m),f,o==="path"),_=JSON.stringify(v);return b.useEffect(()=>{g(JSON.parse(_),{replace:s,state:l,relative:o})},[g,_,o,s,l]),null}function sp(e){return wS(e.context)}function Jt(e){_n(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function US({basename:e="/",children:s=null,location:l,navigationType:o="POP",navigator:d,static:m=!1,unstable_useTransitions:f}){_n(!Vl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=e.replace(/^\/*/,"/"),v=b.useMemo(()=>({basename:g,navigator:d,static:m,unstable_useTransitions:f,future:{}}),[g,d,m,f]);typeof l=="string"&&(l=Ql(l));let{pathname:_="/",search:S="",hash:w="",state:E=null,key:R="default"}=l,T=b.useMemo(()=>{let A=Ni(_,g);return A==null?null:{location:{pathname:A,search:S,hash:w,state:E,key:R},navigationType:o}},[g,_,S,w,E,R,o]);return xs(T!=null,`<Router basename="${g}"> is not able to match the URL "${_}${S}${w}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:b.createElement(Ja.Provider,{value:v},b.createElement(cu.Provider,{children:s,value:T}))}function FS({children:e,location:s}){return ES(Af(e),s)}function Af(e,s=[]){let l=[];return b.Children.forEach(e,(o,d)=>{if(!b.isValidElement(o))return;let m=[...s,d];if(o.type===b.Fragment){l.push.apply(l,Af(o.props.children,m));return}_n(o.type===Jt,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_n(!o.props.index||!o.props.children,"An index route cannot have child routes.");let f={id:o.props.id||m.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(f.children=Af(o.props.children,m)),l.push(f)}),l}var nd="get",ad="application/x-www-form-urlencoded";function Sd(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function qS(e){return Sd(e)&&e.tagName.toLowerCase()==="button"}function ZS(e){return Sd(e)&&e.tagName.toLowerCase()==="form"}function HS(e){return Sd(e)&&e.tagName.toLowerCase()==="input"}function KS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function QS(e,s){return e.button===0&&(!s||s==="_self")&&!KS(e)}function Mf(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((s,l)=>{let o=e[l];return s.concat(Array.isArray(o)?o.map(d=>[l,d]):[[l,o]])},[]))}function GS(e,s){let l=Mf(e);return s&&s.forEach((o,d)=>{l.has(d)||s.getAll(d).forEach(m=>{l.append(d,m)})}),l}var Bc=null;function VS(){if(Bc===null)try{new FormData(document.createElement("form"),0),Bc=!1}catch{Bc=!0}return Bc}var $S=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Oh(e){return e!=null&&!$S.has(e)?(xs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ad}"`),null):e}function YS(e,s){let l,o,d,m,f;if(ZS(e)){let g=e.getAttribute("action");o=g?Ni(g,s):null,l=e.getAttribute("method")||nd,d=Oh(e.getAttribute("enctype"))||ad,m=new FormData(e)}else if(qS(e)||HS(e)&&(e.type==="submit"||e.type==="image")){let g=e.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=e.getAttribute("formaction")||g.getAttribute("action");if(o=v?Ni(v,s):null,l=e.getAttribute("formmethod")||g.getAttribute("method")||nd,d=Oh(e.getAttribute("formenctype"))||Oh(g.getAttribute("enctype"))||ad,m=new FormData(g,e),!VS()){let{name:_,type:S,value:w}=e;if(S==="image"){let E=_?`${_}.`:"";m.append(`${E}x`,"0"),m.append(`${E}y`,"0")}else _&&m.append(_,w)}}else{if(Sd(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');l=nd,o=null,d=ad,f=e}return m&&d==="text/plain"&&(f=m,m=void 0),{action:o,method:l.toLowerCase(),encType:d,formData:m,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ip(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function JS(e,s,l,o){let d=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return l?d.pathname.endsWith("/")?d.pathname=`${d.pathname}_.${o}`:d.pathname=`${d.pathname}.${o}`:d.pathname==="/"?d.pathname=`_root.${o}`:s&&Ni(d.pathname,s)==="/"?d.pathname=`${s.replace(/\/$/,"")}/_root.${o}`:d.pathname=`${d.pathname.replace(/\/$/,"")}.${o}`,d}async function XS(e,s){if(e.id in s)return s[e.id];try{let l=await import(e.module);return s[e.id]=l,l}catch(l){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(l),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WS(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function ew(e,s,l){let o=await Promise.all(e.map(async d=>{let m=s.routes[d.route.id];if(m){let f=await XS(m,l);return f.links?f.links():[]}return[]}));return sw(o.flat(1).filter(WS).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function Ky(e,s,l,o,d,m){let f=(v,_)=>l[_]?v.route.id!==l[_].route.id:!0,g=(v,_)=>l[_].pathname!==v.pathname||l[_].route.path?.endsWith("*")&&l[_].params["*"]!==v.params["*"];return m==="assets"?s.filter((v,_)=>f(v,_)||g(v,_)):m==="data"?s.filter((v,_)=>{let S=o.routes[v.route.id];if(!S||!S.hasLoader)return!1;if(f(v,_)||g(v,_))return!0;if(v.route.shouldRevalidate){let w=v.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:l[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function tw(e,s,{includeHydrateFallback:l}={}){return nw(e.map(o=>{let d=s.routes[o.route.id];if(!d)return[];let m=[d.module];return d.clientActionModule&&(m=m.concat(d.clientActionModule)),d.clientLoaderModule&&(m=m.concat(d.clientLoaderModule)),l&&d.hydrateFallbackModule&&(m=m.concat(d.hydrateFallbackModule)),d.imports&&(m=m.concat(d.imports)),m}).flat(1))}function nw(e){return[...new Set(e)]}function aw(e){let s={},l=Object.keys(e).sort();for(let o of l)s[o]=e[o];return s}function sw(e,s){let l=new Set;return new Set(s),e.reduce((o,d)=>{let m=JSON.stringify(aw(d));return l.has(m)||(l.add(m),o.push({key:m,link:d})),o},[])}function ib(){let e=b.useContext(Gl);return ip(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function iw(){let e=b.useContext(jd);return ip(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var rp=b.createContext(void 0);rp.displayName="FrameworkContext";function rb(){let e=b.useContext(rp);return ip(e,"You must render this element inside a <HydratedRouter> element"),e}function rw(e,s){let l=b.useContext(rp),[o,d]=b.useState(!1),[m,f]=b.useState(!1),{onFocus:g,onBlur:v,onMouseEnter:_,onMouseLeave:S,onTouchStart:w}=s,E=b.useRef(null);b.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let A=q=>{q.forEach(U=>{f(U.isIntersecting)})},O=new IntersectionObserver(A,{threshold:.5});return E.current&&O.observe(E.current),()=>{O.disconnect()}}},[e]),b.useEffect(()=>{if(o){let A=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(A)}}},[o]);let R=()=>{d(!0)},T=()=>{d(!1),f(!1)};return l?e!=="intent"?[m,E,{}]:[m,E,{onFocus:Yo(g,R),onBlur:Yo(v,T),onMouseEnter:Yo(_,R),onMouseLeave:Yo(S,T),onTouchStart:Yo(w,R)}]:[!1,E,{}]}function Yo(e,s){return l=>{e&&e(l),l.defaultPrevented||s(l)}}function lw({page:e,...s}){let{router:l}=ib(),o=b.useMemo(()=>Qv(l.routes,e,l.basename),[l.routes,e,l.basename]);return o?b.createElement(uw,{page:e,matches:o,...s}):null}function ow(e){let{manifest:s,routeModules:l}=rb(),[o,d]=b.useState([]);return b.useEffect(()=>{let m=!1;return ew(e,s,l).then(f=>{m||d(f)}),()=>{m=!0}},[e,s,l]),o}function uw({page:e,matches:s,...l}){let o=ys(),{future:d,manifest:m,routeModules:f}=rb(),{basename:g}=ib(),{loaderData:v,matches:_}=iw(),S=b.useMemo(()=>Ky(e,s,_,m,o,"data"),[e,s,_,m,o]),w=b.useMemo(()=>Ky(e,s,_,m,o,"assets"),[e,s,_,m,o]),E=b.useMemo(()=>{if(e===o.pathname+o.search+o.hash)return[];let A=new Set,O=!1;if(s.forEach(U=>{let D=m.routes[U.route.id];!D||!D.hasLoader||(!S.some(G=>G.route.id===U.route.id)&&U.route.id in v&&f[U.route.id]?.shouldRevalidate||D.hasClientLoader?O=!0:A.add(U.route.id))}),A.size===0)return[];let q=JS(e,g,d.unstable_trailingSlashAwareDataRequests,"data");return O&&A.size>0&&q.searchParams.set("_routes",s.filter(U=>A.has(U.route.id)).map(U=>U.route.id).join(",")),[q.pathname+q.search]},[g,d.unstable_trailingSlashAwareDataRequests,v,o,m,S,s,e,f]),R=b.useMemo(()=>tw(w,m),[w,m]),T=ow(w);return b.createElement(b.Fragment,null,E.map(A=>b.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...l})),R.map(A=>b.createElement("link",{key:A,rel:"modulepreload",href:A,...l})),T.map(({key:A,link:O})=>b.createElement("link",{key:A,nonce:l.nonce,...O,crossOrigin:O.crossOrigin??l.crossOrigin})))}function cw(...e){return s=>{e.forEach(l=>{typeof l=="function"?l(s):l!=null&&(l.current=s)})}}var dw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dw&&(window.__reactRouterVersion="7.13.0")}catch{}function mw({basename:e,children:s,unstable_useTransitions:l,window:o}){let d=b.useRef();d.current==null&&(d.current=qj({window:o,v5Compat:!0}));let m=d.current,[f,g]=b.useState({action:m.action,location:m.location}),v=b.useCallback(_=>{l===!1?g(_):b.startTransition(()=>g(_))},[l]);return b.useLayoutEffect(()=>m.listen(v),[m,v]),b.createElement(US,{basename:e,children:s,location:f.location,navigationType:f.action,navigator:m,unstable_useTransitions:l})}var lb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ys=b.forwardRef(function({onClick:s,discover:l="render",prefetch:o="none",relative:d,reloadDocument:m,replace:f,state:g,target:v,to:_,preventScrollReset:S,viewTransition:w,unstable_defaultShouldRevalidate:E,...R},T){let{basename:A,unstable_useTransitions:O}=b.useContext(Ja),q=typeof _=="string"&&lb.test(_),U=Yv(_,A);_=U.to;let D=NS(_,{relative:d}),[G,Y,ee]=rw(o,R),H=pw(_,{replace:f,state:g,target:v,preventScrollReset:S,relative:d,viewTransition:w,unstable_defaultShouldRevalidate:E,unstable_useTransitions:O});function te(fe){s&&s(fe),fe.defaultPrevented||H(fe)}let J=b.createElement("a",{...R,...ee,href:U.absoluteURL||D,onClick:U.isExternal||m?s:te,ref:cw(T,Y),target:v,"data-discover":!q&&l==="render"?"true":void 0});return G&&!q?b.createElement(b.Fragment,null,J,b.createElement(lw,{page:D})):J});Ys.displayName="Link";var ob=b.forwardRef(function({"aria-current":s="page",caseSensitive:l=!1,className:o="",end:d=!1,style:m,to:f,viewTransition:g,children:v,..._},S){let w=du(f,{relative:_.relative}),E=ys(),R=b.useContext(jd),{navigator:T,basename:A}=b.useContext(Ja),O=R!=null&&bw(w)&&g===!0,q=T.encodeLocation?T.encodeLocation(w).pathname:w.pathname,U=E.pathname,D=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;l||(U=U.toLowerCase(),D=D?D.toLowerCase():null,q=q.toLowerCase()),D&&A&&(D=Ni(D,A)||D);const G=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let Y=U===q||!d&&U.startsWith(q)&&U.charAt(G)==="/",ee=D!=null&&(D===q||!d&&D.startsWith(q)&&D.charAt(q.length)==="/"),H={isActive:Y,isPending:ee,isTransitioning:O},te=Y?s:void 0,J;typeof o=="function"?J=o(H):J=[o,Y?"active":null,ee?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let fe=typeof m=="function"?m(H):m;return b.createElement(Ys,{..._,"aria-current":te,className:J,ref:S,style:fe,to:f,viewTransition:g},typeof v=="function"?v(H):v)});ob.displayName="NavLink";var hw=b.forwardRef(({discover:e="render",fetcherKey:s,navigate:l,reloadDocument:o,replace:d,state:m,method:f=nd,action:g,onSubmit:v,relative:_,preventScrollReset:S,viewTransition:w,unstable_defaultShouldRevalidate:E,...R},T)=>{let{unstable_useTransitions:A}=b.useContext(Ja),O=yw(),q=vw(g,{relative:_}),U=f.toLowerCase()==="get"?"get":"post",D=typeof g=="string"&&lb.test(g),G=Y=>{if(v&&v(Y),Y.defaultPrevented)return;Y.preventDefault();let ee=Y.nativeEvent.submitter,H=ee?.getAttribute("formmethod")||f,te=()=>O(ee||Y.currentTarget,{fetcherKey:s,method:H,navigate:l,replace:d,state:m,relative:_,preventScrollReset:S,viewTransition:w,unstable_defaultShouldRevalidate:E});A&&l!==!1?b.startTransition(()=>te()):te()};return b.createElement("form",{ref:T,method:U,action:q,onSubmit:o?v:G,...R,"data-discover":!D&&e==="render"?"true":void 0})});hw.displayName="Form";function fw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ub(e){let s=b.useContext(Gl);return _n(s,fw(e)),s}function pw(e,{target:s,replace:l,state:o,preventScrollReset:d,relative:m,viewTransition:f,unstable_defaultShouldRevalidate:g,unstable_useTransitions:v}={}){let _=$l(),S=ys(),w=du(e,{relative:m});return b.useCallback(E=>{if(QS(E,s)){E.preventDefault();let R=l!==void 0?l:lu(S)===lu(w),T=()=>_(e,{replace:R,state:o,preventScrollReset:d,relative:m,viewTransition:f,unstable_defaultShouldRevalidate:g});v?b.startTransition(()=>T()):T()}},[S,_,w,l,o,s,e,d,m,f,g,v])}function mu(e){xs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let s=b.useRef(Mf(e)),l=b.useRef(!1),o=ys(),d=b.useMemo(()=>GS(o.search,l.current?null:s.current),[o.search]),m=$l(),f=b.useCallback((g,v)=>{const _=Mf(typeof g=="function"?g(new URLSearchParams(d)):g);l.current=!0,m("?"+_,v)},[m,d]);return[d,f]}var xw=0,gw=()=>`__${String(++xw)}__`;function yw(){let{router:e}=ub("useSubmit"),{basename:s}=b.useContext(Ja),l=LS(),o=e.fetch,d=e.navigate;return b.useCallback(async(m,f={})=>{let{action:g,method:v,encType:_,formData:S,body:w}=YS(m,s);if(f.navigate===!1){let E=f.fetcherKey||gw();await o(E,l,f.action||g,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:S,body:w,formMethod:f.method||v,formEncType:f.encType||_,flushSync:f.flushSync})}else await d(f.action||g,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:S,body:w,formMethod:f.method||v,formEncType:f.encType||_,replace:f.replace,state:f.state,fromRouteId:l,flushSync:f.flushSync,viewTransition:f.viewTransition})},[o,d,s,l])}function vw(e,{relative:s}={}){let{basename:l}=b.useContext(Ja),o=b.useContext(gs);_n(o,"useFormAction must be used inside a RouteContext");let[d]=o.matches.slice(-1),m={...du(e||".",{relative:s})},f=ys();if(e==null){m.search=f.search;let g=new URLSearchParams(m.search),v=g.getAll("index");if(v.some(S=>S==="")){g.delete("index"),v.filter(w=>w).forEach(w=>g.append("index",w));let S=g.toString();m.search=S?`?${S}`:""}}return(!e||e===".")&&d.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),l!=="/"&&(m.pathname=m.pathname==="/"?l:bi([l,m.pathname])),lu(m)}function bw(e,{relative:s}={}){let l=b.useContext(Xv);_n(l!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=ub("useViewTransitionState"),d=du(e,{relative:s});if(!l.isTransitioning)return!1;let m=Ni(l.currentLocation.pathname,o)||l.currentLocation.pathname,f=Ni(l.nextLocation.pathname,o)||l.nextLocation.pathname;return cd(d.pathname,f)!=null||cd(d.pathname,m)!=null}function Ce(e,s,l){function o(g,v){if(g._zod||Object.defineProperty(g,"_zod",{value:{def:v,constr:f,traits:new Set},enumerable:!1}),g._zod.traits.has(e))return;g._zod.traits.add(e),s(g,v);const _=f.prototype,S=Object.keys(_);for(let w=0;w<S.length;w++){const E=S[w];E in g||(g[E]=_[E].bind(g))}}const d=l?.Parent??Object;class m extends d{}Object.defineProperty(m,"name",{value:e});function f(g){var v;const _=l?.Parent?new m:this;o(_,g),(v=_._zod).deferred??(v.deferred=[]);for(const S of _._zod.deferred)S();return _}return Object.defineProperty(f,"init",{value:o}),Object.defineProperty(f,Symbol.hasInstance,{value:g=>l?.Parent&&g instanceof l.Parent?!0:g?._zod?.traits?.has(e)}),Object.defineProperty(f,"name",{value:e}),f}class Zl extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class cb extends Error{constructor(s){super(`Encountered unidirectional transform during encode: ${s}`),this.name="ZodEncodeError"}}const zf={};function ur(e){return e&&Object.assign(zf,e),zf}function db(e){const s=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,d])=>s.indexOf(+o)===-1).map(([o,d])=>d)}function Of(e,s){return typeof s=="bigint"?s.toString():s}function lp(e){return{get value(){{const s=e();return Object.defineProperty(this,"value",{value:s}),s}}}}function op(e){return e==null}function up(e){const s=e.startsWith("^")?1:0,l=e.endsWith("$")?e.length-1:e.length;return e.slice(s,l)}function _w(e,s){const l=(e.toString().split(".")[1]||"").length,o=s.toString();let d=(o.split(".")[1]||"").length;if(d===0&&/\d?e-\d?/.test(o)){const v=o.match(/\d?e-(\d?)/);v?.[1]&&(d=Number.parseInt(v[1]))}const m=l>d?l:d,f=Number.parseInt(e.toFixed(m).replace(".","")),g=Number.parseInt(s.toFixed(m).replace(".",""));return f%g/10**m}const Qy=Symbol("evaluating");function an(e,s,l){let o;Object.defineProperty(e,s,{get(){if(o!==Qy)return o===void 0&&(o=Qy,o=l()),o},set(d){Object.defineProperty(e,s,{value:d})},configurable:!0})}function Xr(e,s,l){Object.defineProperty(e,s,{value:l,writable:!0,enumerable:!0,configurable:!0})}function dr(...e){const s={};for(const l of e){const o=Object.getOwnPropertyDescriptors(l);Object.assign(s,o)}return Object.defineProperties({},s)}function Gy(e){return JSON.stringify(e)}function Nw(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const mb="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function md(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const jw=lp(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function ou(e){if(md(e)===!1)return!1;const s=e.constructor;if(s===void 0||typeof s!="function")return!0;const l=s.prototype;return!(md(l)===!1||Object.prototype.hasOwnProperty.call(l,"isPrototypeOf")===!1)}function hb(e){return ou(e)?{...e}:Array.isArray(e)?[...e]:e}const Sw=new Set(["string","number","symbol"]);function wd(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function mr(e,s,l){const o=new e._zod.constr(s??e._zod.def);return(!s||l?.parent)&&(o._zod.parent=e),o}function at(e){const s=e;if(!s)return{};if(typeof s=="string")return{error:()=>s};if(s?.message!==void 0){if(s?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");s.error=s.message}return delete s.message,typeof s.error=="string"?{...s,error:()=>s.error}:s}function ww(e){return Object.keys(e).filter(s=>e[s]._zod.optin==="optional"&&e[s]._zod.optout==="optional")}const kw={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Ew(e,s){const l=e._zod.def,o=l.checks;if(o&&o.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const m=dr(e._zod.def,{get shape(){const f={};for(const g in s){if(!(g in l.shape))throw new Error(`Unrecognized key: "${g}"`);s[g]&&(f[g]=l.shape[g])}return Xr(this,"shape",f),f},checks:[]});return mr(e,m)}function Tw(e,s){const l=e._zod.def,o=l.checks;if(o&&o.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const m=dr(e._zod.def,{get shape(){const f={...e._zod.def.shape};for(const g in s){if(!(g in l.shape))throw new Error(`Unrecognized key: "${g}"`);s[g]&&delete f[g]}return Xr(this,"shape",f),f},checks:[]});return mr(e,m)}function Cw(e,s){if(!ou(s))throw new Error("Invalid input to extend: expected a plain object");const l=e._zod.def.checks;if(l&&l.length>0){const m=e._zod.def.shape;for(const f in s)if(Object.getOwnPropertyDescriptor(m,f)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const d=dr(e._zod.def,{get shape(){const m={...e._zod.def.shape,...s};return Xr(this,"shape",m),m}});return mr(e,d)}function Aw(e,s){if(!ou(s))throw new Error("Invalid input to safeExtend: expected a plain object");const l=dr(e._zod.def,{get shape(){const o={...e._zod.def.shape,...s};return Xr(this,"shape",o),o}});return mr(e,l)}function Mw(e,s){const l=dr(e._zod.def,{get shape(){const o={...e._zod.def.shape,...s._zod.def.shape};return Xr(this,"shape",o),o},get catchall(){return s._zod.def.catchall},checks:[]});return mr(e,l)}function zw(e,s,l){const d=s._zod.def.checks;if(d&&d.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const f=dr(s._zod.def,{get shape(){const g=s._zod.def.shape,v={...g};if(l)for(const _ in l){if(!(_ in g))throw new Error(`Unrecognized key: "${_}"`);l[_]&&(v[_]=e?new e({type:"optional",innerType:g[_]}):g[_])}else for(const _ in g)v[_]=e?new e({type:"optional",innerType:g[_]}):g[_];return Xr(this,"shape",v),v},checks:[]});return mr(s,f)}function Ow(e,s,l){const o=dr(s._zod.def,{get shape(){const d=s._zod.def.shape,m={...d};if(l)for(const f in l){if(!(f in m))throw new Error(`Unrecognized key: "${f}"`);l[f]&&(m[f]=new e({type:"nonoptional",innerType:d[f]}))}else for(const f in d)m[f]=new e({type:"nonoptional",innerType:d[f]});return Xr(this,"shape",m),m}});return mr(s,o)}function ql(e,s=0){if(e.aborted===!0)return!0;for(let l=s;l<e.issues.length;l++)if(e.issues[l]?.continue!==!0)return!0;return!1}function fb(e,s){return s.map(l=>{var o;return(o=l).path??(o.path=[]),l.path.unshift(e),l})}function Uc(e){return typeof e=="string"?e:e?.message}function Yr(e,s,l){const o={...e,path:e.path??[]};if(!e.message){const d=Uc(e.inst?._zod.def?.error?.(e))??Uc(s?.error?.(e))??Uc(l.customError?.(e))??Uc(l.localeError?.(e))??"Invalid input";o.message=d}return delete o.inst,delete o.continue,s?.reportInput||delete o.input,o}function cp(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function uu(...e){const[s,l,o]=e;return typeof s=="string"?{message:s,code:"custom",input:l,inst:o}:{...s}}const pb=(e,s)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:s,enumerable:!1}),e.message=JSON.stringify(s,Of,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},xb=Ce("$ZodError",pb),gb=Ce("$ZodError",pb,{Parent:Error});function Rw(e,s=l=>l.message){const l={},o=[];for(const d of e.issues)d.path.length>0?(l[d.path[0]]=l[d.path[0]]||[],l[d.path[0]].push(s(d))):o.push(s(d));return{formErrors:o,fieldErrors:l}}function Dw(e,s=l=>l.message){const l={_errors:[]},o=d=>{for(const m of d.issues)if(m.code==="invalid_union"&&m.errors.length)m.errors.map(f=>o({issues:f}));else if(m.code==="invalid_key")o({issues:m.issues});else if(m.code==="invalid_element")o({issues:m.issues});else if(m.path.length===0)l._errors.push(s(m));else{let f=l,g=0;for(;g<m.path.length;){const v=m.path[g];g===m.path.length-1?(f[v]=f[v]||{_errors:[]},f[v]._errors.push(s(m))):f[v]=f[v]||{_errors:[]},f=f[v],g++}}};return o(e),l}const dp=e=>(s,l,o,d)=>{const m=o?Object.assign(o,{async:!1}):{async:!1},f=s._zod.run({value:l,issues:[]},m);if(f instanceof Promise)throw new Zl;if(f.issues.length){const g=new(d?.Err??e)(f.issues.map(v=>Yr(v,m,ur())));throw mb(g,d?.callee),g}return f.value},mp=e=>async(s,l,o,d)=>{const m=o?Object.assign(o,{async:!0}):{async:!0};let f=s._zod.run({value:l,issues:[]},m);if(f instanceof Promise&&(f=await f),f.issues.length){const g=new(d?.Err??e)(f.issues.map(v=>Yr(v,m,ur())));throw mb(g,d?.callee),g}return f.value},kd=e=>(s,l,o)=>{const d=o?{...o,async:!1}:{async:!1},m=s._zod.run({value:l,issues:[]},d);if(m instanceof Promise)throw new Zl;return m.issues.length?{success:!1,error:new(e??xb)(m.issues.map(f=>Yr(f,d,ur())))}:{success:!0,data:m.value}},Lw=kd(gb),Ed=e=>async(s,l,o)=>{const d=o?Object.assign(o,{async:!0}):{async:!0};let m=s._zod.run({value:l,issues:[]},d);return m instanceof Promise&&(m=await m),m.issues.length?{success:!1,error:new e(m.issues.map(f=>Yr(f,d,ur())))}:{success:!0,data:m.value}},Pw=Ed(gb),Iw=e=>(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return dp(e)(s,l,d)},Bw=e=>(s,l,o)=>dp(e)(s,l,o),Uw=e=>async(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return mp(e)(s,l,d)},Fw=e=>async(s,l,o)=>mp(e)(s,l,o),qw=e=>(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return kd(e)(s,l,d)},Zw=e=>(s,l,o)=>kd(e)(s,l,o),Hw=e=>async(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Ed(e)(s,l,d)},Kw=e=>async(s,l,o)=>Ed(e)(s,l,o),Qw=/^[cC][^\s-]{8,}$/,Gw=/^[0-9a-z]+$/,Vw=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,$w=/^[0-9a-vA-V]{20}$/,Yw=/^[A-Za-z0-9]{27}$/,Jw=/^[a-zA-Z0-9_-]{21}$/,Xw=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Ww=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Vy=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,e2=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,t2="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function n2(){return new RegExp(t2,"u")}const a2=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,s2=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,i2=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,r2=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,l2=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,yb=/^[A-Za-z0-9_-]*$/,o2=/^\+[1-9]\d{6,14}$/,vb="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",u2=new RegExp(`^${vb}$`);function bb(e){const s="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${s}`:e.precision===0?`${s}:[0-5]\\d`:`${s}:[0-5]\\d\\.\\d{${e.precision}}`:`${s}(?::[0-5]\\d(?:\\.\\d+)?)?`}function c2(e){return new RegExp(`^${bb(e)}$`)}function d2(e){const s=bb({precision:e.precision}),l=["Z"];e.local&&l.push(""),e.offset&&l.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const o=`${s}(?:${l.join("|")})`;return new RegExp(`^${vb}T(?:${o})$`)}const m2=e=>{const s=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${s}$`)},h2=/^-?\d+$/,f2=/^-?\d+(?:\.\d+)?$/,p2=/^(?:true|false)$/i,x2=/^null$/i,g2=/^[^A-Z]*$/,y2=/^[^a-z]*$/,Ba=Ce("$ZodCheck",(e,s)=>{var l;e._zod??(e._zod={}),e._zod.def=s,(l=e._zod).onattach??(l.onattach=[])}),_b={number:"number",bigint:"bigint",object:"date"},Nb=Ce("$ZodCheckLessThan",(e,s)=>{Ba.init(e,s);const l=_b[typeof s.value];e._zod.onattach.push(o=>{const d=o._zod.bag,m=(s.inclusive?d.maximum:d.exclusiveMaximum)??Number.POSITIVE_INFINITY;s.value<m&&(s.inclusive?d.maximum=s.value:d.exclusiveMaximum=s.value)}),e._zod.check=o=>{(s.inclusive?o.value<=s.value:o.value<s.value)||o.issues.push({origin:l,code:"too_big",maximum:typeof s.value=="object"?s.value.getTime():s.value,input:o.value,inclusive:s.inclusive,inst:e,continue:!s.abort})}}),jb=Ce("$ZodCheckGreaterThan",(e,s)=>{Ba.init(e,s);const l=_b[typeof s.value];e._zod.onattach.push(o=>{const d=o._zod.bag,m=(s.inclusive?d.minimum:d.exclusiveMinimum)??Number.NEGATIVE_INFINITY;s.value>m&&(s.inclusive?d.minimum=s.value:d.exclusiveMinimum=s.value)}),e._zod.check=o=>{(s.inclusive?o.value>=s.value:o.value>s.value)||o.issues.push({origin:l,code:"too_small",minimum:typeof s.value=="object"?s.value.getTime():s.value,input:o.value,inclusive:s.inclusive,inst:e,continue:!s.abort})}}),v2=Ce("$ZodCheckMultipleOf",(e,s)=>{Ba.init(e,s),e._zod.onattach.push(l=>{var o;(o=l._zod.bag).multipleOf??(o.multipleOf=s.value)}),e._zod.check=l=>{if(typeof l.value!=typeof s.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof l.value=="bigint"?l.value%s.value===BigInt(0):_w(l.value,s.value)===0)||l.issues.push({origin:typeof l.value,code:"not_multiple_of",divisor:s.value,input:l.value,inst:e,continue:!s.abort})}}),b2=Ce("$ZodCheckNumberFormat",(e,s)=>{Ba.init(e,s),s.format=s.format||"float64";const l=s.format?.includes("int"),o=l?"int":"number",[d,m]=kw[s.format];e._zod.onattach.push(f=>{const g=f._zod.bag;g.format=s.format,g.minimum=d,g.maximum=m,l&&(g.pattern=h2)}),e._zod.check=f=>{const g=f.value;if(l){if(!Number.isInteger(g)){f.issues.push({expected:o,format:s.format,code:"invalid_type",continue:!1,input:g,inst:e});return}if(!Number.isSafeInteger(g)){g>0?f.issues.push({input:g,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,inclusive:!0,continue:!s.abort}):f.issues.push({input:g,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,inclusive:!0,continue:!s.abort});return}}g<d&&f.issues.push({origin:"number",input:g,code:"too_small",minimum:d,inclusive:!0,inst:e,continue:!s.abort}),g>m&&f.issues.push({origin:"number",input:g,code:"too_big",maximum:m,inclusive:!0,inst:e,continue:!s.abort})}}),_2=Ce("$ZodCheckMaxLength",(e,s)=>{var l;Ba.init(e,s),(l=e._zod.def).when??(l.when=o=>{const d=o.value;return!op(d)&&d.length!==void 0}),e._zod.onattach.push(o=>{const d=o._zod.bag.maximum??Number.POSITIVE_INFINITY;s.maximum<d&&(o._zod.bag.maximum=s.maximum)}),e._zod.check=o=>{const d=o.value;if(d.length<=s.maximum)return;const f=cp(d);o.issues.push({origin:f,code:"too_big",maximum:s.maximum,inclusive:!0,input:d,inst:e,continue:!s.abort})}}),N2=Ce("$ZodCheckMinLength",(e,s)=>{var l;Ba.init(e,s),(l=e._zod.def).when??(l.when=o=>{const d=o.value;return!op(d)&&d.length!==void 0}),e._zod.onattach.push(o=>{const d=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;s.minimum>d&&(o._zod.bag.minimum=s.minimum)}),e._zod.check=o=>{const d=o.value;if(d.length>=s.minimum)return;const f=cp(d);o.issues.push({origin:f,code:"too_small",minimum:s.minimum,inclusive:!0,input:d,inst:e,continue:!s.abort})}}),j2=Ce("$ZodCheckLengthEquals",(e,s)=>{var l;Ba.init(e,s),(l=e._zod.def).when??(l.when=o=>{const d=o.value;return!op(d)&&d.length!==void 0}),e._zod.onattach.push(o=>{const d=o._zod.bag;d.minimum=s.length,d.maximum=s.length,d.length=s.length}),e._zod.check=o=>{const d=o.value,m=d.length;if(m===s.length)return;const f=cp(d),g=m>s.length;o.issues.push({origin:f,...g?{code:"too_big",maximum:s.length}:{code:"too_small",minimum:s.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!s.abort})}}),Td=Ce("$ZodCheckStringFormat",(e,s)=>{var l,o;Ba.init(e,s),e._zod.onattach.push(d=>{const m=d._zod.bag;m.format=s.format,s.pattern&&(m.patterns??(m.patterns=new Set),m.patterns.add(s.pattern))}),s.pattern?(l=e._zod).check??(l.check=d=>{s.pattern.lastIndex=0,!s.pattern.test(d.value)&&d.issues.push({origin:"string",code:"invalid_format",format:s.format,input:d.value,...s.pattern?{pattern:s.pattern.toString()}:{},inst:e,continue:!s.abort})}):(o=e._zod).check??(o.check=()=>{})}),S2=Ce("$ZodCheckRegex",(e,s)=>{Td.init(e,s),e._zod.check=l=>{s.pattern.lastIndex=0,!s.pattern.test(l.value)&&l.issues.push({origin:"string",code:"invalid_format",format:"regex",input:l.value,pattern:s.pattern.toString(),inst:e,continue:!s.abort})}}),w2=Ce("$ZodCheckLowerCase",(e,s)=>{s.pattern??(s.pattern=g2),Td.init(e,s)}),k2=Ce("$ZodCheckUpperCase",(e,s)=>{s.pattern??(s.pattern=y2),Td.init(e,s)}),E2=Ce("$ZodCheckIncludes",(e,s)=>{Ba.init(e,s);const l=wd(s.includes),o=new RegExp(typeof s.position=="number"?`^.{${s.position}}${l}`:l);s.pattern=o,e._zod.onattach.push(d=>{const m=d._zod.bag;m.patterns??(m.patterns=new Set),m.patterns.add(o)}),e._zod.check=d=>{d.value.includes(s.includes,s.position)||d.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:s.includes,input:d.value,inst:e,continue:!s.abort})}}),T2=Ce("$ZodCheckStartsWith",(e,s)=>{Ba.init(e,s);const l=new RegExp(`^${wd(s.prefix)}.*`);s.pattern??(s.pattern=l),e._zod.onattach.push(o=>{const d=o._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(l)}),e._zod.check=o=>{o.value.startsWith(s.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:s.prefix,input:o.value,inst:e,continue:!s.abort})}}),C2=Ce("$ZodCheckEndsWith",(e,s)=>{Ba.init(e,s);const l=new RegExp(`.*${wd(s.suffix)}$`);s.pattern??(s.pattern=l),e._zod.onattach.push(o=>{const d=o._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(l)}),e._zod.check=o=>{o.value.endsWith(s.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:s.suffix,input:o.value,inst:e,continue:!s.abort})}}),A2=Ce("$ZodCheckOverwrite",(e,s)=>{Ba.init(e,s),e._zod.check=l=>{l.value=s.tx(l.value)}});class M2{constructor(s=[]){this.content=[],this.indent=0,this&&(this.args=s)}indented(s){this.indent+=1,s(this),this.indent-=1}write(s){if(typeof s=="function"){s(this,{execution:"sync"}),s(this,{execution:"async"});return}const o=s.split(`
`).filter(f=>f),d=Math.min(...o.map(f=>f.length-f.trimStart().length)),m=o.map(f=>f.slice(d)).map(f=>" ".repeat(this.indent*2)+f);for(const f of m)this.content.push(f)}compile(){const s=Function,l=this?.args,d=[...(this?.content??[""]).map(m=>`  ${m}`)];return new s(...l,d.join(`
`))}}const z2={major:4,minor:3,patch:6},On=Ce("$ZodType",(e,s)=>{var l;e??(e={}),e._zod.def=s,e._zod.bag=e._zod.bag||{},e._zod.version=z2;const o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(const d of o)for(const m of d._zod.onattach)m(e);if(o.length===0)(l=e._zod).deferred??(l.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const d=(f,g,v)=>{let _=ql(f),S;for(const w of g){if(w._zod.def.when){if(!w._zod.def.when(f))continue}else if(_)continue;const E=f.issues.length,R=w._zod.check(f);if(R instanceof Promise&&v?.async===!1)throw new Zl;if(S||R instanceof Promise)S=(S??Promise.resolve()).then(async()=>{await R,f.issues.length!==E&&(_||(_=ql(f,E)))});else{if(f.issues.length===E)continue;_||(_=ql(f,E))}}return S?S.then(()=>f):f},m=(f,g,v)=>{if(ql(f))return f.aborted=!0,f;const _=d(g,o,v);if(_ instanceof Promise){if(v.async===!1)throw new Zl;return _.then(S=>e._zod.parse(S,v))}return e._zod.parse(_,v)};e._zod.run=(f,g)=>{if(g.skipChecks)return e._zod.parse(f,g);if(g.direction==="backward"){const _=e._zod.parse({value:f.value,issues:[]},{...g,skipChecks:!0});return _ instanceof Promise?_.then(S=>m(S,f,g)):m(_,f,g)}const v=e._zod.parse(f,g);if(v instanceof Promise){if(g.async===!1)throw new Zl;return v.then(_=>d(_,o,g))}return d(v,o,g)}}an(e,"~standard",()=>({validate:d=>{try{const m=Lw(e,d);return m.success?{value:m.data}:{issues:m.error?.issues}}catch{return Pw(e,d).then(f=>f.success?{value:f.data}:{issues:f.error?.issues})}},vendor:"zod",version:1}))}),hp=Ce("$ZodString",(e,s)=>{On.init(e,s),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??m2(e._zod.bag),e._zod.parse=(l,o)=>{if(s.coerce)try{l.value=String(l.value)}catch{}return typeof l.value=="string"||l.issues.push({expected:"string",code:"invalid_type",input:l.value,inst:e}),l}}),Nn=Ce("$ZodStringFormat",(e,s)=>{Td.init(e,s),hp.init(e,s)}),O2=Ce("$ZodGUID",(e,s)=>{s.pattern??(s.pattern=Ww),Nn.init(e,s)}),R2=Ce("$ZodUUID",(e,s)=>{if(s.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[s.version];if(o===void 0)throw new Error(`Invalid UUID version: "${s.version}"`);s.pattern??(s.pattern=Vy(o))}else s.pattern??(s.pattern=Vy());Nn.init(e,s)}),D2=Ce("$ZodEmail",(e,s)=>{s.pattern??(s.pattern=e2),Nn.init(e,s)}),L2=Ce("$ZodURL",(e,s)=>{Nn.init(e,s),e._zod.check=l=>{try{const o=l.value.trim(),d=new URL(o);s.hostname&&(s.hostname.lastIndex=0,s.hostname.test(d.hostname)||l.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:s.hostname.source,input:l.value,inst:e,continue:!s.abort})),s.protocol&&(s.protocol.lastIndex=0,s.protocol.test(d.protocol.endsWith(":")?d.protocol.slice(0,-1):d.protocol)||l.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:s.protocol.source,input:l.value,inst:e,continue:!s.abort})),s.normalize?l.value=d.href:l.value=o;return}catch{l.issues.push({code:"invalid_format",format:"url",input:l.value,inst:e,continue:!s.abort})}}}),P2=Ce("$ZodEmoji",(e,s)=>{s.pattern??(s.pattern=n2()),Nn.init(e,s)}),I2=Ce("$ZodNanoID",(e,s)=>{s.pattern??(s.pattern=Jw),Nn.init(e,s)}),B2=Ce("$ZodCUID",(e,s)=>{s.pattern??(s.pattern=Qw),Nn.init(e,s)}),U2=Ce("$ZodCUID2",(e,s)=>{s.pattern??(s.pattern=Gw),Nn.init(e,s)}),F2=Ce("$ZodULID",(e,s)=>{s.pattern??(s.pattern=Vw),Nn.init(e,s)}),q2=Ce("$ZodXID",(e,s)=>{s.pattern??(s.pattern=$w),Nn.init(e,s)}),Z2=Ce("$ZodKSUID",(e,s)=>{s.pattern??(s.pattern=Yw),Nn.init(e,s)}),H2=Ce("$ZodISODateTime",(e,s)=>{s.pattern??(s.pattern=d2(s)),Nn.init(e,s)}),K2=Ce("$ZodISODate",(e,s)=>{s.pattern??(s.pattern=u2),Nn.init(e,s)}),Q2=Ce("$ZodISOTime",(e,s)=>{s.pattern??(s.pattern=c2(s)),Nn.init(e,s)}),G2=Ce("$ZodISODuration",(e,s)=>{s.pattern??(s.pattern=Xw),Nn.init(e,s)}),V2=Ce("$ZodIPv4",(e,s)=>{s.pattern??(s.pattern=a2),Nn.init(e,s),e._zod.bag.format="ipv4"}),$2=Ce("$ZodIPv6",(e,s)=>{s.pattern??(s.pattern=s2),Nn.init(e,s),e._zod.bag.format="ipv6",e._zod.check=l=>{try{new URL(`http://[${l.value}]`)}catch{l.issues.push({code:"invalid_format",format:"ipv6",input:l.value,inst:e,continue:!s.abort})}}}),Y2=Ce("$ZodCIDRv4",(e,s)=>{s.pattern??(s.pattern=i2),Nn.init(e,s)}),J2=Ce("$ZodCIDRv6",(e,s)=>{s.pattern??(s.pattern=r2),Nn.init(e,s),e._zod.check=l=>{const o=l.value.split("/");try{if(o.length!==2)throw new Error;const[d,m]=o;if(!m)throw new Error;const f=Number(m);if(`${f}`!==m)throw new Error;if(f<0||f>128)throw new Error;new URL(`http://[${d}]`)}catch{l.issues.push({code:"invalid_format",format:"cidrv6",input:l.value,inst:e,continue:!s.abort})}}});function Sb(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const X2=Ce("$ZodBase64",(e,s)=>{s.pattern??(s.pattern=l2),Nn.init(e,s),e._zod.bag.contentEncoding="base64",e._zod.check=l=>{Sb(l.value)||l.issues.push({code:"invalid_format",format:"base64",input:l.value,inst:e,continue:!s.abort})}});function W2(e){if(!yb.test(e))return!1;const s=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),l=s.padEnd(Math.ceil(s.length/4)*4,"=");return Sb(l)}const ek=Ce("$ZodBase64URL",(e,s)=>{s.pattern??(s.pattern=yb),Nn.init(e,s),e._zod.bag.contentEncoding="base64url",e._zod.check=l=>{W2(l.value)||l.issues.push({code:"invalid_format",format:"base64url",input:l.value,inst:e,continue:!s.abort})}}),tk=Ce("$ZodE164",(e,s)=>{s.pattern??(s.pattern=o2),Nn.init(e,s)});function nk(e,s=null){try{const l=e.split(".");if(l.length!==3)return!1;const[o]=l;if(!o)return!1;const d=JSON.parse(atob(o));return!("typ"in d&&d?.typ!=="JWT"||!d.alg||s&&(!("alg"in d)||d.alg!==s))}catch{return!1}}const ak=Ce("$ZodJWT",(e,s)=>{Nn.init(e,s),e._zod.check=l=>{nk(l.value,s.alg)||l.issues.push({code:"invalid_format",format:"jwt",input:l.value,inst:e,continue:!s.abort})}}),wb=Ce("$ZodNumber",(e,s)=>{On.init(e,s),e._zod.pattern=e._zod.bag.pattern??f2,e._zod.parse=(l,o)=>{if(s.coerce)try{l.value=Number(l.value)}catch{}const d=l.value;if(typeof d=="number"&&!Number.isNaN(d)&&Number.isFinite(d))return l;const m=typeof d=="number"?Number.isNaN(d)?"NaN":Number.isFinite(d)?void 0:"Infinity":void 0;return l.issues.push({expected:"number",code:"invalid_type",input:d,inst:e,...m?{received:m}:{}}),l}}),sk=Ce("$ZodNumberFormat",(e,s)=>{b2.init(e,s),wb.init(e,s)}),ik=Ce("$ZodBoolean",(e,s)=>{On.init(e,s),e._zod.pattern=p2,e._zod.parse=(l,o)=>{if(s.coerce)try{l.value=!!l.value}catch{}const d=l.value;return typeof d=="boolean"||l.issues.push({expected:"boolean",code:"invalid_type",input:d,inst:e}),l}}),rk=Ce("$ZodNull",(e,s)=>{On.init(e,s),e._zod.pattern=x2,e._zod.values=new Set([null]),e._zod.parse=(l,o)=>{const d=l.value;return d===null||l.issues.push({expected:"null",code:"invalid_type",input:d,inst:e}),l}}),lk=Ce("$ZodUnknown",(e,s)=>{On.init(e,s),e._zod.parse=l=>l}),ok=Ce("$ZodNever",(e,s)=>{On.init(e,s),e._zod.parse=(l,o)=>(l.issues.push({expected:"never",code:"invalid_type",input:l.value,inst:e}),l)});function $y(e,s,l){e.issues.length&&s.issues.push(...fb(l,e.issues)),s.value[l]=e.value}const uk=Ce("$ZodArray",(e,s)=>{On.init(e,s),e._zod.parse=(l,o)=>{const d=l.value;if(!Array.isArray(d))return l.issues.push({expected:"array",code:"invalid_type",input:d,inst:e}),l;l.value=Array(d.length);const m=[];for(let f=0;f<d.length;f++){const g=d[f],v=s.element._zod.run({value:g,issues:[]},o);v instanceof Promise?m.push(v.then(_=>$y(_,l,f))):$y(v,l,f)}return m.length?Promise.all(m).then(()=>l):l}});function hd(e,s,l,o,d){if(e.issues.length){if(d&&!(l in o))return;s.issues.push(...fb(l,e.issues))}e.value===void 0?l in o&&(s.value[l]=void 0):s.value[l]=e.value}function kb(e){const s=Object.keys(e.shape);for(const o of s)if(!e.shape?.[o]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${o}": expected a Zod schema`);const l=ww(e.shape);return{...e,keys:s,keySet:new Set(s),numKeys:s.length,optionalKeys:new Set(l)}}function Eb(e,s,l,o,d,m){const f=[],g=d.keySet,v=d.catchall._zod,_=v.def.type,S=v.optout==="optional";for(const w in s){if(g.has(w))continue;if(_==="never"){f.push(w);continue}const E=v.run({value:s[w],issues:[]},o);E instanceof Promise?e.push(E.then(R=>hd(R,l,w,s,S))):hd(E,l,w,s,S)}return f.length&&l.issues.push({code:"unrecognized_keys",keys:f,input:s,inst:m}),e.length?Promise.all(e).then(()=>l):l}const ck=Ce("$ZodObject",(e,s)=>{if(On.init(e,s),!Object.getOwnPropertyDescriptor(s,"shape")?.get){const g=s.shape;Object.defineProperty(s,"shape",{get:()=>{const v={...g};return Object.defineProperty(s,"shape",{value:v}),v}})}const o=lp(()=>kb(s));an(e._zod,"propValues",()=>{const g=s.shape,v={};for(const _ in g){const S=g[_]._zod;if(S.values){v[_]??(v[_]=new Set);for(const w of S.values)v[_].add(w)}}return v});const d=md,m=s.catchall;let f;e._zod.parse=(g,v)=>{f??(f=o.value);const _=g.value;if(!d(_))return g.issues.push({expected:"object",code:"invalid_type",input:_,inst:e}),g;g.value={};const S=[],w=f.shape;for(const E of f.keys){const R=w[E],T=R._zod.optout==="optional",A=R._zod.run({value:_[E],issues:[]},v);A instanceof Promise?S.push(A.then(O=>hd(O,g,E,_,T))):hd(A,g,E,_,T)}return m?Eb(S,_,g,v,o.value,e):S.length?Promise.all(S).then(()=>g):g}}),dk=Ce("$ZodObjectJIT",(e,s)=>{ck.init(e,s);const l=e._zod.parse,o=lp(()=>kb(s)),d=E=>{const R=new M2(["shape","payload","ctx"]),T=o.value,A=D=>{const G=Gy(D);return`shape[${G}]._zod.run({ value: input[${G}], issues: [] }, ctx)`};R.write("const input = payload.value;");const O=Object.create(null);let q=0;for(const D of T.keys)O[D]=`key_${q++}`;R.write("const newResult = {};");for(const D of T.keys){const G=O[D],Y=Gy(D),H=E[D]?._zod?.optout==="optional";R.write(`const ${G} = ${A(D)};`),H?R.write(`
        if (${G}.issues.length) {
          if (${Y} in input) {
            payload.issues = payload.issues.concat(${G}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${Y}, ...iss.path] : [${Y}]
            })));
          }
        }
        
        if (${G}.value === undefined) {
          if (${Y} in input) {
            newResult[${Y}] = undefined;
          }
        } else {
          newResult[${Y}] = ${G}.value;
        }
        
      `):R.write(`
        if (${G}.issues.length) {
          payload.issues = payload.issues.concat(${G}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Y}, ...iss.path] : [${Y}]
          })));
        }
        
        if (${G}.value === undefined) {
          if (${Y} in input) {
            newResult[${Y}] = undefined;
          }
        } else {
          newResult[${Y}] = ${G}.value;
        }
        
      `)}R.write("payload.value = newResult;"),R.write("return payload;");const U=R.compile();return(D,G)=>U(E,D,G)};let m;const f=md,g=!zf.jitless,_=g&&jw.value,S=s.catchall;let w;e._zod.parse=(E,R)=>{w??(w=o.value);const T=E.value;return f(T)?g&&_&&R?.async===!1&&R.jitless!==!0?(m||(m=d(s.shape)),E=m(E,R),S?Eb([],T,E,R,w,e):E):l(E,R):(E.issues.push({expected:"object",code:"invalid_type",input:T,inst:e}),E)}});function Yy(e,s,l,o){for(const m of e)if(m.issues.length===0)return s.value=m.value,s;const d=e.filter(m=>!ql(m));return d.length===1?(s.value=d[0].value,d[0]):(s.issues.push({code:"invalid_union",input:s.value,inst:l,errors:e.map(m=>m.issues.map(f=>Yr(f,o,ur())))}),s)}const mk=Ce("$ZodUnion",(e,s)=>{On.init(e,s),an(e._zod,"optin",()=>s.options.some(d=>d._zod.optin==="optional")?"optional":void 0),an(e._zod,"optout",()=>s.options.some(d=>d._zod.optout==="optional")?"optional":void 0),an(e._zod,"values",()=>{if(s.options.every(d=>d._zod.values))return new Set(s.options.flatMap(d=>Array.from(d._zod.values)))}),an(e._zod,"pattern",()=>{if(s.options.every(d=>d._zod.pattern)){const d=s.options.map(m=>m._zod.pattern);return new RegExp(`^(${d.map(m=>up(m.source)).join("|")})$`)}});const l=s.options.length===1,o=s.options[0]._zod.run;e._zod.parse=(d,m)=>{if(l)return o(d,m);let f=!1;const g=[];for(const v of s.options){const _=v._zod.run({value:d.value,issues:[]},m);if(_ instanceof Promise)g.push(_),f=!0;else{if(_.issues.length===0)return _;g.push(_)}}return f?Promise.all(g).then(v=>Yy(v,d,e,m)):Yy(g,d,e,m)}}),hk=Ce("$ZodIntersection",(e,s)=>{On.init(e,s),e._zod.parse=(l,o)=>{const d=l.value,m=s.left._zod.run({value:d,issues:[]},o),f=s.right._zod.run({value:d,issues:[]},o);return m instanceof Promise||f instanceof Promise?Promise.all([m,f]).then(([v,_])=>Jy(l,v,_)):Jy(l,m,f)}});function Rf(e,s){if(e===s)return{valid:!0,data:e};if(e instanceof Date&&s instanceof Date&&+e==+s)return{valid:!0,data:e};if(ou(e)&&ou(s)){const l=Object.keys(s),o=Object.keys(e).filter(m=>l.indexOf(m)!==-1),d={...e,...s};for(const m of o){const f=Rf(e[m],s[m]);if(!f.valid)return{valid:!1,mergeErrorPath:[m,...f.mergeErrorPath]};d[m]=f.data}return{valid:!0,data:d}}if(Array.isArray(e)&&Array.isArray(s)){if(e.length!==s.length)return{valid:!1,mergeErrorPath:[]};const l=[];for(let o=0;o<e.length;o++){const d=e[o],m=s[o],f=Rf(d,m);if(!f.valid)return{valid:!1,mergeErrorPath:[o,...f.mergeErrorPath]};l.push(f.data)}return{valid:!0,data:l}}return{valid:!1,mergeErrorPath:[]}}function Jy(e,s,l){const o=new Map;let d;for(const g of s.issues)if(g.code==="unrecognized_keys"){d??(d=g);for(const v of g.keys)o.has(v)||o.set(v,{}),o.get(v).l=!0}else e.issues.push(g);for(const g of l.issues)if(g.code==="unrecognized_keys")for(const v of g.keys)o.has(v)||o.set(v,{}),o.get(v).r=!0;else e.issues.push(g);const m=[...o].filter(([,g])=>g.l&&g.r).map(([g])=>g);if(m.length&&d&&e.issues.push({...d,keys:m}),ql(e))return e;const f=Rf(s.value,l.value);if(!f.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(f.mergeErrorPath)}`);return e.value=f.data,e}const fk=Ce("$ZodEnum",(e,s)=>{On.init(e,s);const l=db(s.entries),o=new Set(l);e._zod.values=o,e._zod.pattern=new RegExp(`^(${l.filter(d=>Sw.has(typeof d)).map(d=>typeof d=="string"?wd(d):d.toString()).join("|")})$`),e._zod.parse=(d,m)=>{const f=d.value;return o.has(f)||d.issues.push({code:"invalid_value",values:l,input:f,inst:e}),d}}),pk=Ce("$ZodTransform",(e,s)=>{On.init(e,s),e._zod.parse=(l,o)=>{if(o.direction==="backward")throw new cb(e.constructor.name);const d=s.transform(l.value,l);if(o.async)return(d instanceof Promise?d:Promise.resolve(d)).then(f=>(l.value=f,l));if(d instanceof Promise)throw new Zl;return l.value=d,l}});function Xy(e,s){return e.issues.length&&s===void 0?{issues:[],value:void 0}:e}const Tb=Ce("$ZodOptional",(e,s)=>{On.init(e,s),e._zod.optin="optional",e._zod.optout="optional",an(e._zod,"values",()=>s.innerType._zod.values?new Set([...s.innerType._zod.values,void 0]):void 0),an(e._zod,"pattern",()=>{const l=s.innerType._zod.pattern;return l?new RegExp(`^(${up(l.source)})?$`):void 0}),e._zod.parse=(l,o)=>{if(s.innerType._zod.optin==="optional"){const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(m=>Xy(m,l.value)):Xy(d,l.value)}return l.value===void 0?l:s.innerType._zod.run(l,o)}}),xk=Ce("$ZodExactOptional",(e,s)=>{Tb.init(e,s),an(e._zod,"values",()=>s.innerType._zod.values),an(e._zod,"pattern",()=>s.innerType._zod.pattern),e._zod.parse=(l,o)=>s.innerType._zod.run(l,o)}),gk=Ce("$ZodNullable",(e,s)=>{On.init(e,s),an(e._zod,"optin",()=>s.innerType._zod.optin),an(e._zod,"optout",()=>s.innerType._zod.optout),an(e._zod,"pattern",()=>{const l=s.innerType._zod.pattern;return l?new RegExp(`^(${up(l.source)}|null)$`):void 0}),an(e._zod,"values",()=>s.innerType._zod.values?new Set([...s.innerType._zod.values,null]):void 0),e._zod.parse=(l,o)=>l.value===null?l:s.innerType._zod.run(l,o)}),yk=Ce("$ZodDefault",(e,s)=>{On.init(e,s),e._zod.optin="optional",an(e._zod,"values",()=>s.innerType._zod.values),e._zod.parse=(l,o)=>{if(o.direction==="backward")return s.innerType._zod.run(l,o);if(l.value===void 0)return l.value=s.defaultValue,l;const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(m=>Wy(m,s)):Wy(d,s)}});function Wy(e,s){return e.value===void 0&&(e.value=s.defaultValue),e}const vk=Ce("$ZodPrefault",(e,s)=>{On.init(e,s),e._zod.optin="optional",an(e._zod,"values",()=>s.innerType._zod.values),e._zod.parse=(l,o)=>(o.direction==="backward"||l.value===void 0&&(l.value=s.defaultValue),s.innerType._zod.run(l,o))}),bk=Ce("$ZodNonOptional",(e,s)=>{On.init(e,s),an(e._zod,"values",()=>{const l=s.innerType._zod.values;return l?new Set([...l].filter(o=>o!==void 0)):void 0}),e._zod.parse=(l,o)=>{const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(m=>e0(m,e)):e0(d,e)}});function e0(e,s){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:s}),e}const _k=Ce("$ZodCatch",(e,s)=>{On.init(e,s),an(e._zod,"optin",()=>s.innerType._zod.optin),an(e._zod,"optout",()=>s.innerType._zod.optout),an(e._zod,"values",()=>s.innerType._zod.values),e._zod.parse=(l,o)=>{if(o.direction==="backward")return s.innerType._zod.run(l,o);const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(m=>(l.value=m.value,m.issues.length&&(l.value=s.catchValue({...l,error:{issues:m.issues.map(f=>Yr(f,o,ur()))},input:l.value}),l.issues=[]),l)):(l.value=d.value,d.issues.length&&(l.value=s.catchValue({...l,error:{issues:d.issues.map(m=>Yr(m,o,ur()))},input:l.value}),l.issues=[]),l)}}),Nk=Ce("$ZodPipe",(e,s)=>{On.init(e,s),an(e._zod,"values",()=>s.in._zod.values),an(e._zod,"optin",()=>s.in._zod.optin),an(e._zod,"optout",()=>s.out._zod.optout),an(e._zod,"propValues",()=>s.in._zod.propValues),e._zod.parse=(l,o)=>{if(o.direction==="backward"){const m=s.out._zod.run(l,o);return m instanceof Promise?m.then(f=>Fc(f,s.in,o)):Fc(m,s.in,o)}const d=s.in._zod.run(l,o);return d instanceof Promise?d.then(m=>Fc(m,s.out,o)):Fc(d,s.out,o)}});function Fc(e,s,l){return e.issues.length?(e.aborted=!0,e):s._zod.run({value:e.value,issues:e.issues},l)}const jk=Ce("$ZodReadonly",(e,s)=>{On.init(e,s),an(e._zod,"propValues",()=>s.innerType._zod.propValues),an(e._zod,"values",()=>s.innerType._zod.values),an(e._zod,"optin",()=>s.innerType?._zod?.optin),an(e._zod,"optout",()=>s.innerType?._zod?.optout),e._zod.parse=(l,o)=>{if(o.direction==="backward")return s.innerType._zod.run(l,o);const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(t0):t0(d)}});function t0(e){return e.value=Object.freeze(e.value),e}const Sk=Ce("$ZodCustom",(e,s)=>{Ba.init(e,s),On.init(e,s),e._zod.parse=(l,o)=>l,e._zod.check=l=>{const o=l.value,d=s.fn(o);if(d instanceof Promise)return d.then(m=>n0(m,l,o,e));n0(d,l,o,e)}});function n0(e,s,l,o){if(!e){const d={code:"custom",input:l,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(d.params=o._zod.def.params),s.issues.push(uu(d))}}var a0;class wk{constructor(){this._map=new WeakMap,this._idmap=new Map}add(s,...l){const o=l[0];return this._map.set(s,o),o&&typeof o=="object"&&"id"in o&&this._idmap.set(o.id,s),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(s){const l=this._map.get(s);return l&&typeof l=="object"&&"id"in l&&this._idmap.delete(l.id),this._map.delete(s),this}get(s){const l=s._zod.parent;if(l){const o={...this.get(l)??{}};delete o.id;const d={...o,...this._map.get(s)};return Object.keys(d).length?d:void 0}return this._map.get(s)}has(s){return this._map.has(s)}}function kk(){return new wk}(a0=globalThis).__zod_globalRegistry??(a0.__zod_globalRegistry=kk());const nu=globalThis.__zod_globalRegistry;function Ek(e,s){return new e({type:"string",...at(s)})}function Tk(e,s){return new e({type:"string",format:"email",check:"string_format",abort:!1,...at(s)})}function s0(e,s){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...at(s)})}function Ck(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...at(s)})}function Ak(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...at(s)})}function Mk(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...at(s)})}function zk(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...at(s)})}function Ok(e,s){return new e({type:"string",format:"url",check:"string_format",abort:!1,...at(s)})}function Rk(e,s){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...at(s)})}function Dk(e,s){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...at(s)})}function Lk(e,s){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...at(s)})}function Pk(e,s){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...at(s)})}function Ik(e,s){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...at(s)})}function Bk(e,s){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...at(s)})}function Uk(e,s){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...at(s)})}function Fk(e,s){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...at(s)})}function qk(e,s){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...at(s)})}function Zk(e,s){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...at(s)})}function Hk(e,s){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...at(s)})}function Kk(e,s){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...at(s)})}function Qk(e,s){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...at(s)})}function Gk(e,s){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...at(s)})}function Vk(e,s){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...at(s)})}function $k(e,s){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...at(s)})}function Yk(e,s){return new e({type:"string",format:"date",check:"string_format",...at(s)})}function Jk(e,s){return new e({type:"string",format:"time",check:"string_format",precision:null,...at(s)})}function Xk(e,s){return new e({type:"string",format:"duration",check:"string_format",...at(s)})}function Wk(e,s){return new e({type:"number",coerce:!0,checks:[],...at(s)})}function eE(e,s){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...at(s)})}function tE(e,s){return new e({type:"boolean",...at(s)})}function nE(e,s){return new e({type:"null",...at(s)})}function aE(e){return new e({type:"unknown"})}function sE(e,s){return new e({type:"never",...at(s)})}function i0(e,s){return new Nb({check:"less_than",...at(s),value:e,inclusive:!1})}function Rh(e,s){return new Nb({check:"less_than",...at(s),value:e,inclusive:!0})}function r0(e,s){return new jb({check:"greater_than",...at(s),value:e,inclusive:!1})}function Dh(e,s){return new jb({check:"greater_than",...at(s),value:e,inclusive:!0})}function l0(e,s){return new v2({check:"multiple_of",...at(s),value:e})}function Cb(e,s){return new _2({check:"max_length",...at(s),maximum:e})}function fd(e,s){return new N2({check:"min_length",...at(s),minimum:e})}function Ab(e,s){return new j2({check:"length_equals",...at(s),length:e})}function iE(e,s){return new S2({check:"string_format",format:"regex",...at(s),pattern:e})}function rE(e){return new w2({check:"string_format",format:"lowercase",...at(e)})}function lE(e){return new k2({check:"string_format",format:"uppercase",...at(e)})}function oE(e,s){return new E2({check:"string_format",format:"includes",...at(s),includes:e})}function uE(e,s){return new T2({check:"string_format",format:"starts_with",...at(s),prefix:e})}function cE(e,s){return new C2({check:"string_format",format:"ends_with",...at(s),suffix:e})}function Yl(e){return new A2({check:"overwrite",tx:e})}function dE(e){return Yl(s=>s.normalize(e))}function mE(){return Yl(e=>e.trim())}function hE(){return Yl(e=>e.toLowerCase())}function fE(){return Yl(e=>e.toUpperCase())}function pE(){return Yl(e=>Nw(e))}function xE(e,s,l){return new e({type:"array",element:s,...at(l)})}function gE(e,s,l){return new e({type:"custom",check:"custom",fn:s,...at(l)})}function yE(e){const s=vE(l=>(l.addIssue=o=>{if(typeof o=="string")l.issues.push(uu(o,l.value,s._zod.def));else{const d=o;d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=l.value),d.inst??(d.inst=s),d.continue??(d.continue=!s._zod.def.abort),l.issues.push(uu(d))}},e(l.value,l)));return s}function vE(e,s){const l=new Ba({check:"custom",...at(s)});return l._zod.check=e,l}function Mb(e){let s=e?.target??"draft-2020-12";return s==="draft-4"&&(s="draft-04"),s==="draft-7"&&(s="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??nu,target:s,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function ma(e,s,l={path:[],schemaPath:[]}){var o;const d=e._zod.def,m=s.seen.get(e);if(m)return m.count++,l.schemaPath.includes(e)&&(m.cycle=l.path),m.schema;const f={schema:{},count:1,cycle:void 0,path:l.path};s.seen.set(e,f);const g=e._zod.toJSONSchema?.();if(g)f.schema=g;else{const S={...l,schemaPath:[...l.schemaPath,e],path:l.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(s,f.schema,S);else{const E=f.schema,R=s.processors[d.type];if(!R)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${d.type}`);R(e,s,E,S)}const w=e._zod.parent;w&&(f.ref||(f.ref=w),ma(w,s,S),s.seen.get(w).isParent=!0)}const v=s.metadataRegistry.get(e);return v&&Object.assign(f.schema,v),s.io==="input"&&_a(e)&&(delete f.schema.examples,delete f.schema.default),s.io==="input"&&f.schema._prefault&&((o=f.schema).default??(o.default=f.schema._prefault)),delete f.schema._prefault,s.seen.get(e).schema}function zb(e,s){const l=e.seen.get(s);if(!l)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=new Map;for(const f of e.seen.entries()){const g=e.metadataRegistry.get(f[0])?.id;if(g){const v=o.get(g);if(v&&v!==f[0])throw new Error(`Duplicate schema id "${g}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);o.set(g,f[0])}}const d=f=>{const g=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const w=e.external.registry.get(f[0])?.id,E=e.external.uri??(T=>T);if(w)return{ref:E(w)};const R=f[1].defId??f[1].schema.id??`schema${e.counter++}`;return f[1].defId=R,{defId:R,ref:`${E("__shared")}#/${g}/${R}`}}if(f[1]===l)return{ref:"#"};const _=`#/${g}/`,S=f[1].schema.id??`__schema${e.counter++}`;return{defId:S,ref:_+S}},m=f=>{if(f[1].schema.$ref)return;const g=f[1],{ref:v,defId:_}=d(f);g.def={...g.schema},_&&(g.defId=_);const S=g.schema;for(const w in S)delete S[w];S.$ref=v};if(e.cycles==="throw")for(const f of e.seen.entries()){const g=f[1];if(g.cycle)throw new Error(`Cycle detected: #/${g.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const f of e.seen.entries()){const g=f[1];if(s===f[0]){m(f);continue}if(e.external){const _=e.external.registry.get(f[0])?.id;if(s!==f[0]&&_){m(f);continue}}if(e.metadataRegistry.get(f[0])?.id){m(f);continue}if(g.cycle){m(f);continue}if(g.count>1&&e.reused==="ref"){m(f);continue}}}function Ob(e,s){const l=e.seen.get(s);if(!l)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=f=>{const g=e.seen.get(f);if(g.ref===null)return;const v=g.def??g.schema,_={...v},S=g.ref;if(g.ref=null,S){o(S);const E=e.seen.get(S),R=E.schema;if(R.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(v.allOf=v.allOf??[],v.allOf.push(R)):Object.assign(v,R),Object.assign(v,_),f._zod.parent===S)for(const A in v)A==="$ref"||A==="allOf"||A in _||delete v[A];if(R.$ref&&E.def)for(const A in v)A==="$ref"||A==="allOf"||A in E.def&&JSON.stringify(v[A])===JSON.stringify(E.def[A])&&delete v[A]}const w=f._zod.parent;if(w&&w!==S){o(w);const E=e.seen.get(w);if(E?.schema.$ref&&(v.$ref=E.schema.$ref,E.def))for(const R in v)R==="$ref"||R==="allOf"||R in E.def&&JSON.stringify(v[R])===JSON.stringify(E.def[R])&&delete v[R]}e.override({zodSchema:f,jsonSchema:v,path:g.path??[]})};for(const f of[...e.seen.entries()].reverse())o(f[0]);const d={};if(e.target==="draft-2020-12"?d.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?d.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?d.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const f=e.external.registry.get(s)?.id;if(!f)throw new Error("Schema is missing an `id` property");d.$id=e.external.uri(f)}Object.assign(d,l.def??l.schema);const m=e.external?.defs??{};for(const f of e.seen.entries()){const g=f[1];g.def&&g.defId&&(m[g.defId]=g.def)}e.external||Object.keys(m).length>0&&(e.target==="draft-2020-12"?d.$defs=m:d.definitions=m);try{const f=JSON.parse(JSON.stringify(d));return Object.defineProperty(f,"~standard",{value:{...s["~standard"],jsonSchema:{input:pd(s,"input",e.processors),output:pd(s,"output",e.processors)}},enumerable:!1,writable:!1}),f}catch{throw new Error("Error converting schema to JSON.")}}function _a(e,s){const l=s??{seen:new Set};if(l.seen.has(e))return!1;l.seen.add(e);const o=e._zod.def;if(o.type==="transform")return!0;if(o.type==="array")return _a(o.element,l);if(o.type==="set")return _a(o.valueType,l);if(o.type==="lazy")return _a(o.getter(),l);if(o.type==="promise"||o.type==="optional"||o.type==="nonoptional"||o.type==="nullable"||o.type==="readonly"||o.type==="default"||o.type==="prefault")return _a(o.innerType,l);if(o.type==="intersection")return _a(o.left,l)||_a(o.right,l);if(o.type==="record"||o.type==="map")return _a(o.keyType,l)||_a(o.valueType,l);if(o.type==="pipe")return _a(o.in,l)||_a(o.out,l);if(o.type==="object"){for(const d in o.shape)if(_a(o.shape[d],l))return!0;return!1}if(o.type==="union"){for(const d of o.options)if(_a(d,l))return!0;return!1}if(o.type==="tuple"){for(const d of o.items)if(_a(d,l))return!0;return!!(o.rest&&_a(o.rest,l))}return!1}const bE=(e,s={})=>l=>{const o=Mb({...l,processors:s});return ma(e,o),zb(o,e),Ob(o,e)},pd=(e,s,l={})=>o=>{const{libraryOptions:d,target:m}=o??{},f=Mb({...d??{},target:m,io:s,processors:l});return ma(e,f),zb(f,e),Ob(f,e)},_E={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},NE=(e,s,l,o)=>{const d=l;d.type="string";const{minimum:m,maximum:f,format:g,patterns:v,contentEncoding:_}=e._zod.bag;if(typeof m=="number"&&(d.minLength=m),typeof f=="number"&&(d.maxLength=f),g&&(d.format=_E[g]??g,d.format===""&&delete d.format,g==="time"&&delete d.format),_&&(d.contentEncoding=_),v&&v.size>0){const S=[...v];S.length===1?d.pattern=S[0].source:S.length>1&&(d.allOf=[...S.map(w=>({...s.target==="draft-07"||s.target==="draft-04"||s.target==="openapi-3.0"?{type:"string"}:{},pattern:w.source}))])}},jE=(e,s,l,o)=>{const d=l,{minimum:m,maximum:f,format:g,multipleOf:v,exclusiveMaximum:_,exclusiveMinimum:S}=e._zod.bag;typeof g=="string"&&g.includes("int")?d.type="integer":d.type="number",typeof S=="number"&&(s.target==="draft-04"||s.target==="openapi-3.0"?(d.minimum=S,d.exclusiveMinimum=!0):d.exclusiveMinimum=S),typeof m=="number"&&(d.minimum=m,typeof S=="number"&&s.target!=="draft-04"&&(S>=m?delete d.minimum:delete d.exclusiveMinimum)),typeof _=="number"&&(s.target==="draft-04"||s.target==="openapi-3.0"?(d.maximum=_,d.exclusiveMaximum=!0):d.exclusiveMaximum=_),typeof f=="number"&&(d.maximum=f,typeof _=="number"&&s.target!=="draft-04"&&(_<=f?delete d.maximum:delete d.exclusiveMaximum)),typeof v=="number"&&(d.multipleOf=v)},SE=(e,s,l,o)=>{l.type="boolean"},wE=(e,s,l,o)=>{s.target==="openapi-3.0"?(l.type="string",l.nullable=!0,l.enum=[null]):l.type="null"},kE=(e,s,l,o)=>{l.not={}},EE=(e,s,l,o)=>{},TE=(e,s,l,o)=>{const d=e._zod.def,m=db(d.entries);m.every(f=>typeof f=="number")&&(l.type="number"),m.every(f=>typeof f=="string")&&(l.type="string"),l.enum=m},CE=(e,s,l,o)=>{if(s.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},AE=(e,s,l,o)=>{if(s.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},ME=(e,s,l,o)=>{const d=l,m=e._zod.def,{minimum:f,maximum:g}=e._zod.bag;typeof f=="number"&&(d.minItems=f),typeof g=="number"&&(d.maxItems=g),d.type="array",d.items=ma(m.element,s,{...o,path:[...o.path,"items"]})},zE=(e,s,l,o)=>{const d=l,m=e._zod.def;d.type="object",d.properties={};const f=m.shape;for(const _ in f)d.properties[_]=ma(f[_],s,{...o,path:[...o.path,"properties",_]});const g=new Set(Object.keys(f)),v=new Set([...g].filter(_=>{const S=m.shape[_]._zod;return s.io==="input"?S.optin===void 0:S.optout===void 0}));v.size>0&&(d.required=Array.from(v)),m.catchall?._zod.def.type==="never"?d.additionalProperties=!1:m.catchall?m.catchall&&(d.additionalProperties=ma(m.catchall,s,{...o,path:[...o.path,"additionalProperties"]})):s.io==="output"&&(d.additionalProperties=!1)},OE=(e,s,l,o)=>{const d=e._zod.def,m=d.inclusive===!1,f=d.options.map((g,v)=>ma(g,s,{...o,path:[...o.path,m?"oneOf":"anyOf",v]}));m?l.oneOf=f:l.anyOf=f},RE=(e,s,l,o)=>{const d=e._zod.def,m=ma(d.left,s,{...o,path:[...o.path,"allOf",0]}),f=ma(d.right,s,{...o,path:[...o.path,"allOf",1]}),g=_=>"allOf"in _&&Object.keys(_).length===1,v=[...g(m)?m.allOf:[m],...g(f)?f.allOf:[f]];l.allOf=v},DE=(e,s,l,o)=>{const d=e._zod.def,m=ma(d.innerType,s,o),f=s.seen.get(e);s.target==="openapi-3.0"?(f.ref=d.innerType,l.nullable=!0):l.anyOf=[m,{type:"null"}]},LE=(e,s,l,o)=>{const d=e._zod.def;ma(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType},PE=(e,s,l,o)=>{const d=e._zod.def;ma(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType,l.default=JSON.parse(JSON.stringify(d.defaultValue))},IE=(e,s,l,o)=>{const d=e._zod.def;ma(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType,s.io==="input"&&(l._prefault=JSON.parse(JSON.stringify(d.defaultValue)))},BE=(e,s,l,o)=>{const d=e._zod.def;ma(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType;let f;try{f=d.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}l.default=f},UE=(e,s,l,o)=>{const d=e._zod.def,m=s.io==="input"?d.in._zod.def.type==="transform"?d.out:d.in:d.out;ma(m,s,o);const f=s.seen.get(e);f.ref=m},FE=(e,s,l,o)=>{const d=e._zod.def;ma(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType,l.readOnly=!0},Rb=(e,s,l,o)=>{const d=e._zod.def;ma(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType},qE=Ce("ZodISODateTime",(e,s)=>{H2.init(e,s),wn.init(e,s)});function ZE(e){return $k(qE,e)}const HE=Ce("ZodISODate",(e,s)=>{K2.init(e,s),wn.init(e,s)});function KE(e){return Yk(HE,e)}const QE=Ce("ZodISOTime",(e,s)=>{Q2.init(e,s),wn.init(e,s)});function GE(e){return Jk(QE,e)}const VE=Ce("ZodISODuration",(e,s)=>{G2.init(e,s),wn.init(e,s)});function $E(e){return Xk(VE,e)}const YE=(e,s)=>{xb.init(e,s),e.name="ZodError",Object.defineProperties(e,{format:{value:l=>Dw(e,l)},flatten:{value:l=>Rw(e,l)},addIssue:{value:l=>{e.issues.push(l),e.message=JSON.stringify(e.issues,Of,2)}},addIssues:{value:l=>{e.issues.push(...l),e.message=JSON.stringify(e.issues,Of,2)}},isEmpty:{get(){return e.issues.length===0}}})},vs=Ce("ZodError",YE,{Parent:Error}),JE=dp(vs),XE=mp(vs),WE=kd(vs),e1=Ed(vs),t1=Iw(vs),n1=Bw(vs),a1=Uw(vs),s1=Fw(vs),i1=qw(vs),r1=Zw(vs),l1=Hw(vs),o1=Kw(vs),Rn=Ce("ZodType",(e,s)=>(On.init(e,s),Object.assign(e["~standard"],{jsonSchema:{input:pd(e,"input"),output:pd(e,"output")}}),e.toJSONSchema=bE(e,{}),e.def=s,e.type=s.type,Object.defineProperty(e,"_def",{value:s}),e.check=(...l)=>e.clone(dr(s,{checks:[...s.checks??[],...l.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]}),{parent:!0}),e.with=e.check,e.clone=(l,o)=>mr(e,l,o),e.brand=()=>e,e.register=((l,o)=>(l.add(e,o),e)),e.parse=(l,o)=>JE(e,l,o,{callee:e.parse}),e.safeParse=(l,o)=>WE(e,l,o),e.parseAsync=async(l,o)=>XE(e,l,o,{callee:e.parseAsync}),e.safeParseAsync=async(l,o)=>e1(e,l,o),e.spa=e.safeParseAsync,e.encode=(l,o)=>t1(e,l,o),e.decode=(l,o)=>n1(e,l,o),e.encodeAsync=async(l,o)=>a1(e,l,o),e.decodeAsync=async(l,o)=>s1(e,l,o),e.safeEncode=(l,o)=>i1(e,l,o),e.safeDecode=(l,o)=>r1(e,l,o),e.safeEncodeAsync=async(l,o)=>l1(e,l,o),e.safeDecodeAsync=async(l,o)=>o1(e,l,o),e.refine=(l,o)=>e.check(tT(l,o)),e.superRefine=l=>e.check(nT(l)),e.overwrite=l=>e.check(Yl(l)),e.optional=()=>d0(e),e.exactOptional=()=>q1(e),e.nullable=()=>m0(e),e.nullish=()=>d0(m0(e)),e.nonoptional=l=>V1(e,l),e.array=()=>R1(e),e.or=l=>xd([e,l]),e.and=l=>I1(e,l),e.transform=l=>h0(e,U1(l)),e.default=l=>K1(e,l),e.prefault=l=>G1(e,l),e.catch=l=>Y1(e,l),e.pipe=l=>h0(e,l),e.readonly=()=>W1(e),e.describe=l=>{const o=e.clone();return nu.add(o,{description:l}),o},Object.defineProperty(e,"description",{get(){return nu.get(e)?.description},configurable:!0}),e.meta=(...l)=>{if(l.length===0)return nu.get(e);const o=e.clone();return nu.add(o,l[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=l=>l(e),e)),Db=Ce("_ZodString",(e,s)=>{hp.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(o,d,m)=>NE(e,o,d);const l=e._zod.bag;e.format=l.format??null,e.minLength=l.minimum??null,e.maxLength=l.maximum??null,e.regex=(...o)=>e.check(iE(...o)),e.includes=(...o)=>e.check(oE(...o)),e.startsWith=(...o)=>e.check(uE(...o)),e.endsWith=(...o)=>e.check(cE(...o)),e.min=(...o)=>e.check(fd(...o)),e.max=(...o)=>e.check(Cb(...o)),e.length=(...o)=>e.check(Ab(...o)),e.nonempty=(...o)=>e.check(fd(1,...o)),e.lowercase=o=>e.check(rE(o)),e.uppercase=o=>e.check(lE(o)),e.trim=()=>e.check(mE()),e.normalize=(...o)=>e.check(dE(...o)),e.toLowerCase=()=>e.check(hE()),e.toUpperCase=()=>e.check(fE()),e.slugify=()=>e.check(pE())}),u1=Ce("ZodString",(e,s)=>{hp.init(e,s),Db.init(e,s),e.email=l=>e.check(Tk(c1,l)),e.url=l=>e.check(Ok(d1,l)),e.jwt=l=>e.check(Vk(k1,l)),e.emoji=l=>e.check(Rk(m1,l)),e.guid=l=>e.check(s0(o0,l)),e.uuid=l=>e.check(Ck(qc,l)),e.uuidv4=l=>e.check(Ak(qc,l)),e.uuidv6=l=>e.check(Mk(qc,l)),e.uuidv7=l=>e.check(zk(qc,l)),e.nanoid=l=>e.check(Dk(h1,l)),e.guid=l=>e.check(s0(o0,l)),e.cuid=l=>e.check(Lk(f1,l)),e.cuid2=l=>e.check(Pk(p1,l)),e.ulid=l=>e.check(Ik(x1,l)),e.base64=l=>e.check(Kk(j1,l)),e.base64url=l=>e.check(Qk(S1,l)),e.xid=l=>e.check(Bk(g1,l)),e.ksuid=l=>e.check(Uk(y1,l)),e.ipv4=l=>e.check(Fk(v1,l)),e.ipv6=l=>e.check(qk(b1,l)),e.cidrv4=l=>e.check(Zk(_1,l)),e.cidrv6=l=>e.check(Hk(N1,l)),e.e164=l=>e.check(Gk(w1,l)),e.datetime=l=>e.check(ZE(l)),e.date=l=>e.check(KE(l)),e.time=l=>e.check(GE(l)),e.duration=l=>e.check($E(l))});function da(e){return Ek(u1,e)}const wn=Ce("ZodStringFormat",(e,s)=>{Nn.init(e,s),Db.init(e,s)}),c1=Ce("ZodEmail",(e,s)=>{D2.init(e,s),wn.init(e,s)}),o0=Ce("ZodGUID",(e,s)=>{O2.init(e,s),wn.init(e,s)}),qc=Ce("ZodUUID",(e,s)=>{R2.init(e,s),wn.init(e,s)}),d1=Ce("ZodURL",(e,s)=>{L2.init(e,s),wn.init(e,s)}),m1=Ce("ZodEmoji",(e,s)=>{P2.init(e,s),wn.init(e,s)}),h1=Ce("ZodNanoID",(e,s)=>{I2.init(e,s),wn.init(e,s)}),f1=Ce("ZodCUID",(e,s)=>{B2.init(e,s),wn.init(e,s)}),p1=Ce("ZodCUID2",(e,s)=>{U2.init(e,s),wn.init(e,s)}),x1=Ce("ZodULID",(e,s)=>{F2.init(e,s),wn.init(e,s)}),g1=Ce("ZodXID",(e,s)=>{q2.init(e,s),wn.init(e,s)}),y1=Ce("ZodKSUID",(e,s)=>{Z2.init(e,s),wn.init(e,s)}),v1=Ce("ZodIPv4",(e,s)=>{V2.init(e,s),wn.init(e,s)}),b1=Ce("ZodIPv6",(e,s)=>{$2.init(e,s),wn.init(e,s)}),_1=Ce("ZodCIDRv4",(e,s)=>{Y2.init(e,s),wn.init(e,s)}),N1=Ce("ZodCIDRv6",(e,s)=>{J2.init(e,s),wn.init(e,s)}),j1=Ce("ZodBase64",(e,s)=>{X2.init(e,s),wn.init(e,s)}),S1=Ce("ZodBase64URL",(e,s)=>{ek.init(e,s),wn.init(e,s)}),w1=Ce("ZodE164",(e,s)=>{tk.init(e,s),wn.init(e,s)}),k1=Ce("ZodJWT",(e,s)=>{ak.init(e,s),wn.init(e,s)}),Lb=Ce("ZodNumber",(e,s)=>{wb.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(o,d,m)=>jE(e,o,d),e.gt=(o,d)=>e.check(r0(o,d)),e.gte=(o,d)=>e.check(Dh(o,d)),e.min=(o,d)=>e.check(Dh(o,d)),e.lt=(o,d)=>e.check(i0(o,d)),e.lte=(o,d)=>e.check(Rh(o,d)),e.max=(o,d)=>e.check(Rh(o,d)),e.int=o=>e.check(u0(o)),e.safe=o=>e.check(u0(o)),e.positive=o=>e.check(r0(0,o)),e.nonnegative=o=>e.check(Dh(0,o)),e.negative=o=>e.check(i0(0,o)),e.nonpositive=o=>e.check(Rh(0,o)),e.multipleOf=(o,d)=>e.check(l0(o,d)),e.step=(o,d)=>e.check(l0(o,d)),e.finite=()=>e;const l=e._zod.bag;e.minValue=Math.max(l.minimum??Number.NEGATIVE_INFINITY,l.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(l.maximum??Number.POSITIVE_INFINITY,l.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(l.format??"").includes("int")||Number.isSafeInteger(l.multipleOf??.5),e.isFinite=!0,e.format=l.format??null}),E1=Ce("ZodNumberFormat",(e,s)=>{sk.init(e,s),Lb.init(e,s)});function u0(e){return eE(E1,e)}const T1=Ce("ZodBoolean",(e,s)=>{ik.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>SE(e,l,o)});function Cd(e){return tE(T1,e)}const C1=Ce("ZodNull",(e,s)=>{rk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>wE(e,l,o)});function Df(e){return nE(C1,e)}const A1=Ce("ZodUnknown",(e,s)=>{lk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>EE()});function c0(){return aE(A1)}const M1=Ce("ZodNever",(e,s)=>{ok.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>kE(e,l,o)});function z1(e){return sE(M1,e)}const O1=Ce("ZodArray",(e,s)=>{uk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>ME(e,l,o,d),e.element=s.element,e.min=(l,o)=>e.check(fd(l,o)),e.nonempty=l=>e.check(fd(1,l)),e.max=(l,o)=>e.check(Cb(l,o)),e.length=(l,o)=>e.check(Ab(l,o)),e.unwrap=()=>e.element});function R1(e,s){return xE(O1,e,s)}const D1=Ce("ZodObject",(e,s)=>{dk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>zE(e,l,o,d),an(e,"shape",()=>s.shape),e.keyof=()=>Pf(Object.keys(e._zod.def.shape)),e.catchall=l=>e.clone({...e._zod.def,catchall:l}),e.passthrough=()=>e.clone({...e._zod.def,catchall:c0()}),e.loose=()=>e.clone({...e._zod.def,catchall:c0()}),e.strict=()=>e.clone({...e._zod.def,catchall:z1()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=l=>Cw(e,l),e.safeExtend=l=>Aw(e,l),e.merge=l=>Mw(e,l),e.pick=l=>Ew(e,l),e.omit=l=>Tw(e,l),e.partial=(...l)=>zw(Pb,e,l[0]),e.required=(...l)=>Ow(Ib,e,l[0])});function Xa(e,s){const l={type:"object",shape:e??{},...at(s)};return new D1(l)}const L1=Ce("ZodUnion",(e,s)=>{mk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>OE(e,l,o,d),e.options=s.options});function xd(e,s){return new L1({type:"union",options:e,...at(s)})}const P1=Ce("ZodIntersection",(e,s)=>{hk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>RE(e,l,o,d)});function I1(e,s){return new P1({type:"intersection",left:e,right:s})}const Lf=Ce("ZodEnum",(e,s)=>{fk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(o,d,m)=>TE(e,o,d),e.enum=s.entries,e.options=Object.values(s.entries);const l=new Set(Object.keys(s.entries));e.extract=(o,d)=>{const m={};for(const f of o)if(l.has(f))m[f]=s.entries[f];else throw new Error(`Key ${f} not found in enum`);return new Lf({...s,checks:[],...at(d),entries:m})},e.exclude=(o,d)=>{const m={...s.entries};for(const f of o)if(l.has(f))delete m[f];else throw new Error(`Key ${f} not found in enum`);return new Lf({...s,checks:[],...at(d),entries:m})}});function Pf(e,s){const l=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new Lf({type:"enum",entries:l,...at(s)})}const B1=Ce("ZodTransform",(e,s)=>{pk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>AE(e,l),e._zod.parse=(l,o)=>{if(o.direction==="backward")throw new cb(e.constructor.name);l.addIssue=m=>{if(typeof m=="string")l.issues.push(uu(m,l.value,s));else{const f=m;f.fatal&&(f.continue=!1),f.code??(f.code="custom"),f.input??(f.input=l.value),f.inst??(f.inst=e),l.issues.push(uu(f))}};const d=s.transform(l.value,l);return d instanceof Promise?d.then(m=>(l.value=m,l)):(l.value=d,l)}});function U1(e){return new B1({type:"transform",transform:e})}const Pb=Ce("ZodOptional",(e,s)=>{Tb.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Rb(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function d0(e){return new Pb({type:"optional",innerType:e})}const F1=Ce("ZodExactOptional",(e,s)=>{xk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Rb(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function q1(e){return new F1({type:"optional",innerType:e})}const Z1=Ce("ZodNullable",(e,s)=>{gk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>DE(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function m0(e){return new Z1({type:"nullable",innerType:e})}const H1=Ce("ZodDefault",(e,s)=>{yk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>PE(e,l,o,d),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function K1(e,s){return new H1({type:"default",innerType:e,get defaultValue(){return typeof s=="function"?s():hb(s)}})}const Q1=Ce("ZodPrefault",(e,s)=>{vk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>IE(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function G1(e,s){return new Q1({type:"prefault",innerType:e,get defaultValue(){return typeof s=="function"?s():hb(s)}})}const Ib=Ce("ZodNonOptional",(e,s)=>{bk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>LE(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function V1(e,s){return new Ib({type:"nonoptional",innerType:e,...at(s)})}const $1=Ce("ZodCatch",(e,s)=>{_k.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>BE(e,l,o,d),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Y1(e,s){return new $1({type:"catch",innerType:e,catchValue:typeof s=="function"?s:()=>s})}const J1=Ce("ZodPipe",(e,s)=>{Nk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>UE(e,l,o,d),e.in=s.in,e.out=s.out});function h0(e,s){return new J1({type:"pipe",in:e,out:s})}const X1=Ce("ZodReadonly",(e,s)=>{jk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>FE(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function W1(e){return new X1({type:"readonly",innerType:e})}const eT=Ce("ZodCustom",(e,s)=>{Sk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>CE(e,l)});function tT(e,s={}){return gE(eT,e,s)}function nT(e){return yE(e)}function Kn(e){return Wk(Lb,e)}ur({jitless:!0});function Bb(e,s){return function(){return e.apply(s,arguments)}}const{toString:aT}=Object.prototype,{getPrototypeOf:fp}=Object,{iterator:Ad,toStringTag:Ub}=Symbol,Md=(e=>s=>{const l=aT.call(s);return e[l]||(e[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),As=e=>(e=e.toLowerCase(),s=>Md(s)===e),zd=e=>s=>typeof s===e,{isArray:Jl}=Array,Hl=zd("undefined");function hu(e){return e!==null&&!Hl(e)&&e.constructor!==null&&!Hl(e.constructor)&&Pa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Fb=As("ArrayBuffer");function sT(e){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(e):s=e&&e.buffer&&Fb(e.buffer),s}const iT=zd("string"),Pa=zd("function"),qb=zd("number"),fu=e=>e!==null&&typeof e=="object",rT=e=>e===!0||e===!1,sd=e=>{if(Md(e)!=="object")return!1;const s=fp(e);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Ub in e)&&!(Ad in e)},lT=e=>{if(!fu(e)||hu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},oT=As("Date"),uT=As("File"),cT=As("Blob"),dT=As("FileList"),mT=e=>fu(e)&&Pa(e.pipe),hT=e=>{let s;return e&&(typeof FormData=="function"&&e instanceof FormData||Pa(e.append)&&((s=Md(e))==="formdata"||s==="object"&&Pa(e.toString)&&e.toString()==="[object FormData]"))},fT=As("URLSearchParams"),[pT,xT,gT,yT]=["ReadableStream","Request","Response","Headers"].map(As),vT=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function pu(e,s,{allOwnKeys:l=!1}={}){if(e===null||typeof e>"u")return;let o,d;if(typeof e!="object"&&(e=[e]),Jl(e))for(o=0,d=e.length;o<d;o++)s.call(null,e[o],o,e);else{if(hu(e))return;const m=l?Object.getOwnPropertyNames(e):Object.keys(e),f=m.length;let g;for(o=0;o<f;o++)g=m[o],s.call(null,e[g],g,e)}}function Zb(e,s){if(hu(e))return null;s=s.toLowerCase();const l=Object.keys(e);let o=l.length,d;for(;o-- >0;)if(d=l[o],s===d.toLowerCase())return d;return null}const Qr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Hb=e=>!Hl(e)&&e!==Qr;function If(){const{caseless:e,skipUndefined:s}=Hb(this)&&this||{},l={},o=(d,m)=>{const f=e&&Zb(l,m)||m;sd(l[f])&&sd(d)?l[f]=If(l[f],d):sd(d)?l[f]=If({},d):Jl(d)?l[f]=d.slice():(!s||!Hl(d))&&(l[f]=d)};for(let d=0,m=arguments.length;d<m;d++)arguments[d]&&pu(arguments[d],o);return l}const bT=(e,s,l,{allOwnKeys:o}={})=>(pu(s,(d,m)=>{l&&Pa(d)?Object.defineProperty(e,m,{value:Bb(d,l),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,m,{value:d,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:o}),e),_T=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),NT=(e,s,l,o)=>{e.prototype=Object.create(s.prototype,o),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:s.prototype}),l&&Object.assign(e.prototype,l)},jT=(e,s,l,o)=>{let d,m,f;const g={};if(s=s||{},e==null)return s;do{for(d=Object.getOwnPropertyNames(e),m=d.length;m-- >0;)f=d[m],(!o||o(f,e,s))&&!g[f]&&(s[f]=e[f],g[f]=!0);e=l!==!1&&fp(e)}while(e&&(!l||l(e,s))&&e!==Object.prototype);return s},ST=(e,s,l)=>{e=String(e),(l===void 0||l>e.length)&&(l=e.length),l-=s.length;const o=e.indexOf(s,l);return o!==-1&&o===l},wT=e=>{if(!e)return null;if(Jl(e))return e;let s=e.length;if(!qb(s))return null;const l=new Array(s);for(;s-- >0;)l[s]=e[s];return l},kT=(e=>s=>e&&s instanceof e)(typeof Uint8Array<"u"&&fp(Uint8Array)),ET=(e,s)=>{const o=(e&&e[Ad]).call(e);let d;for(;(d=o.next())&&!d.done;){const m=d.value;s.call(e,m[0],m[1])}},TT=(e,s)=>{let l;const o=[];for(;(l=e.exec(s))!==null;)o.push(l);return o},CT=As("HTMLFormElement"),AT=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(l,o,d){return o.toUpperCase()+d}),f0=(({hasOwnProperty:e})=>(s,l)=>e.call(s,l))(Object.prototype),MT=As("RegExp"),Kb=(e,s)=>{const l=Object.getOwnPropertyDescriptors(e),o={};pu(l,(d,m)=>{let f;(f=s(d,m,e))!==!1&&(o[m]=f||d)}),Object.defineProperties(e,o)},zT=e=>{Kb(e,(s,l)=>{if(Pa(e)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const o=e[l];if(Pa(o)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},OT=(e,s)=>{const l={},o=d=>{d.forEach(m=>{l[m]=!0})};return Jl(e)?o(e):o(String(e).split(s)),l},RT=()=>{},DT=(e,s)=>e!=null&&Number.isFinite(e=+e)?e:s;function LT(e){return!!(e&&Pa(e.append)&&e[Ub]==="FormData"&&e[Ad])}const PT=e=>{const s=new Array(10),l=(o,d)=>{if(fu(o)){if(s.indexOf(o)>=0)return;if(hu(o))return o;if(!("toJSON"in o)){s[d]=o;const m=Jl(o)?[]:{};return pu(o,(f,g)=>{const v=l(f,d+1);!Hl(v)&&(m[g]=v)}),s[d]=void 0,m}}return o};return l(e,0)},IT=As("AsyncFunction"),BT=e=>e&&(fu(e)||Pa(e))&&Pa(e.then)&&Pa(e.catch),Qb=((e,s)=>e?setImmediate:s?((l,o)=>(Qr.addEventListener("message",({source:d,data:m})=>{d===Qr&&m===l&&o.length&&o.shift()()},!1),d=>{o.push(d),Qr.postMessage(l,"*")}))(`axios@${Math.random()}`,[]):l=>setTimeout(l))(typeof setImmediate=="function",Pa(Qr.postMessage)),UT=typeof queueMicrotask<"u"?queueMicrotask.bind(Qr):typeof process<"u"&&process.nextTick||Qb,FT=e=>e!=null&&Pa(e[Ad]),be={isArray:Jl,isArrayBuffer:Fb,isBuffer:hu,isFormData:hT,isArrayBufferView:sT,isString:iT,isNumber:qb,isBoolean:rT,isObject:fu,isPlainObject:sd,isEmptyObject:lT,isReadableStream:pT,isRequest:xT,isResponse:gT,isHeaders:yT,isUndefined:Hl,isDate:oT,isFile:uT,isBlob:cT,isRegExp:MT,isFunction:Pa,isStream:mT,isURLSearchParams:fT,isTypedArray:kT,isFileList:dT,forEach:pu,merge:If,extend:bT,trim:vT,stripBOM:_T,inherits:NT,toFlatObject:jT,kindOf:Md,kindOfTest:As,endsWith:ST,toArray:wT,forEachEntry:ET,matchAll:TT,isHTMLForm:CT,hasOwnProperty:f0,hasOwnProp:f0,reduceDescriptors:Kb,freezeMethods:zT,toObjectSet:OT,toCamelCase:AT,noop:RT,toFiniteNumber:DT,findKey:Zb,global:Qr,isContextDefined:Hb,isSpecCompliantForm:LT,toJSONObject:PT,isAsyncFn:IT,isThenable:BT,setImmediate:Qb,asap:UT,isIterable:FT};let ot=class Gb extends Error{static from(s,l,o,d,m,f){const g=new Gb(s.message,l||s.code,o,d,m);return g.cause=s,g.name=s.name,f&&Object.assign(g,f),g}constructor(s,l,o,d,m){super(s),this.name="AxiosError",this.isAxiosError=!0,l&&(this.code=l),o&&(this.config=o),d&&(this.request=d),m&&(this.response=m,this.status=m.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:be.toJSONObject(this.config),code:this.code,status:this.status}}};ot.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";ot.ERR_BAD_OPTION="ERR_BAD_OPTION";ot.ECONNABORTED="ECONNABORTED";ot.ETIMEDOUT="ETIMEDOUT";ot.ERR_NETWORK="ERR_NETWORK";ot.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";ot.ERR_DEPRECATED="ERR_DEPRECATED";ot.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";ot.ERR_BAD_REQUEST="ERR_BAD_REQUEST";ot.ERR_CANCELED="ERR_CANCELED";ot.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";ot.ERR_INVALID_URL="ERR_INVALID_URL";const qT=null;function Bf(e){return be.isPlainObject(e)||be.isArray(e)}function Vb(e){return be.endsWith(e,"[]")?e.slice(0,-2):e}function p0(e,s,l){return e?e.concat(s).map(function(d,m){return d=Vb(d),!l&&m?"["+d+"]":d}).join(l?".":""):s}function ZT(e){return be.isArray(e)&&!e.some(Bf)}const HT=be.toFlatObject(be,{},null,function(s){return/^is[A-Z]/.test(s)});function Od(e,s,l){if(!be.isObject(e))throw new TypeError("target must be an object");s=s||new FormData,l=be.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,O){return!be.isUndefined(O[A])});const o=l.metaTokens,d=l.visitor||S,m=l.dots,f=l.indexes,v=(l.Blob||typeof Blob<"u"&&Blob)&&be.isSpecCompliantForm(s);if(!be.isFunction(d))throw new TypeError("visitor must be a function");function _(T){if(T===null)return"";if(be.isDate(T))return T.toISOString();if(be.isBoolean(T))return T.toString();if(!v&&be.isBlob(T))throw new ot("Blob is not supported. Use a Buffer instead.");return be.isArrayBuffer(T)||be.isTypedArray(T)?v&&typeof Blob=="function"?new Blob([T]):Buffer.from(T):T}function S(T,A,O){let q=T;if(T&&!O&&typeof T=="object"){if(be.endsWith(A,"{}"))A=o?A:A.slice(0,-2),T=JSON.stringify(T);else if(be.isArray(T)&&ZT(T)||(be.isFileList(T)||be.endsWith(A,"[]"))&&(q=be.toArray(T)))return A=Vb(A),q.forEach(function(D,G){!(be.isUndefined(D)||D===null)&&s.append(f===!0?p0([A],G,m):f===null?A:A+"[]",_(D))}),!1}return Bf(T)?!0:(s.append(p0(O,A,m),_(T)),!1)}const w=[],E=Object.assign(HT,{defaultVisitor:S,convertValue:_,isVisitable:Bf});function R(T,A){if(!be.isUndefined(T)){if(w.indexOf(T)!==-1)throw Error("Circular reference detected in "+A.join("."));w.push(T),be.forEach(T,function(q,U){(!(be.isUndefined(q)||q===null)&&d.call(s,q,be.isString(U)?U.trim():U,A,E))===!0&&R(q,A?A.concat(U):[U])}),w.pop()}}if(!be.isObject(e))throw new TypeError("data must be an object");return R(e),s}function x0(e){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return s[o]})}function pp(e,s){this._pairs=[],e&&Od(e,this,s)}const $b=pp.prototype;$b.append=function(s,l){this._pairs.push([s,l])};$b.toString=function(s){const l=s?function(o){return s.call(this,o,x0)}:x0;return this._pairs.map(function(d){return l(d[0])+"="+l(d[1])},"").join("&")};function KT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Yb(e,s,l){if(!s)return e;const o=l&&l.encode||KT,d=be.isFunction(l)?{serialize:l}:l,m=d&&d.serialize;let f;if(m?f=m(s,d):f=be.isURLSearchParams(s)?s.toString():new pp(s,d).toString(o),f){const g=e.indexOf("#");g!==-1&&(e=e.slice(0,g)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class g0{constructor(){this.handlers=[]}use(s,l,o){return this.handlers.push({fulfilled:s,rejected:l,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){be.forEach(this.handlers,function(o){o!==null&&s(o)})}}const Jb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},QT=typeof URLSearchParams<"u"?URLSearchParams:pp,GT=typeof FormData<"u"?FormData:null,VT=typeof Blob<"u"?Blob:null,$T={isBrowser:!0,classes:{URLSearchParams:QT,FormData:GT,Blob:VT},protocols:["http","https","file","blob","url","data"]},xp=typeof window<"u"&&typeof document<"u",Uf=typeof navigator=="object"&&navigator||void 0,YT=xp&&(!Uf||["ReactNative","NativeScript","NS"].indexOf(Uf.product)<0),JT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",XT=xp&&window.location.href||"http://localhost",WT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xp,hasStandardBrowserEnv:YT,hasStandardBrowserWebWorkerEnv:JT,navigator:Uf,origin:XT},Symbol.toStringTag,{value:"Module"})),ga={...WT,...$T};function eC(e,s){return Od(e,new ga.classes.URLSearchParams,{visitor:function(l,o,d,m){return ga.isNode&&be.isBuffer(l)?(this.append(o,l.toString("base64")),!1):m.defaultVisitor.apply(this,arguments)},...s})}function tC(e){return be.matchAll(/\w+|\[(\w*)]/g,e).map(s=>s[0]==="[]"?"":s[1]||s[0])}function nC(e){const s={},l=Object.keys(e);let o;const d=l.length;let m;for(o=0;o<d;o++)m=l[o],s[m]=e[m];return s}function Xb(e){function s(l,o,d,m){let f=l[m++];if(f==="__proto__")return!0;const g=Number.isFinite(+f),v=m>=l.length;return f=!f&&be.isArray(d)?d.length:f,v?(be.hasOwnProp(d,f)?d[f]=[d[f],o]:d[f]=o,!g):((!d[f]||!be.isObject(d[f]))&&(d[f]=[]),s(l,o,d[f],m)&&be.isArray(d[f])&&(d[f]=nC(d[f])),!g)}if(be.isFormData(e)&&be.isFunction(e.entries)){const l={};return be.forEachEntry(e,(o,d)=>{s(tC(o),d,l,0)}),l}return null}function aC(e,s,l){if(be.isString(e))try{return(s||JSON.parse)(e),be.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(l||JSON.stringify)(e)}const xu={transitional:Jb,adapter:["xhr","http","fetch"],transformRequest:[function(s,l){const o=l.getContentType()||"",d=o.indexOf("application/json")>-1,m=be.isObject(s);if(m&&be.isHTMLForm(s)&&(s=new FormData(s)),be.isFormData(s))return d?JSON.stringify(Xb(s)):s;if(be.isArrayBuffer(s)||be.isBuffer(s)||be.isStream(s)||be.isFile(s)||be.isBlob(s)||be.isReadableStream(s))return s;if(be.isArrayBufferView(s))return s.buffer;if(be.isURLSearchParams(s))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let g;if(m){if(o.indexOf("application/x-www-form-urlencoded")>-1)return eC(s,this.formSerializer).toString();if((g=be.isFileList(s))||o.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Od(g?{"files[]":s}:s,v&&new v,this.formSerializer)}}return m||d?(l.setContentType("application/json",!1),aC(s)):s}],transformResponse:[function(s){const l=this.transitional||xu.transitional,o=l&&l.forcedJSONParsing,d=this.responseType==="json";if(be.isResponse(s)||be.isReadableStream(s))return s;if(s&&be.isString(s)&&(o&&!this.responseType||d)){const f=!(l&&l.silentJSONParsing)&&d;try{return JSON.parse(s,this.parseReviver)}catch(g){if(f)throw g.name==="SyntaxError"?ot.from(g,ot.ERR_BAD_RESPONSE,this,null,this.response):g}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ga.classes.FormData,Blob:ga.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};be.forEach(["delete","get","head","post","put","patch"],e=>{xu.headers[e]={}});const sC=be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),iC=e=>{const s={};let l,o,d;return e&&e.split(`
`).forEach(function(f){d=f.indexOf(":"),l=f.substring(0,d).trim().toLowerCase(),o=f.substring(d+1).trim(),!(!l||s[l]&&sC[l])&&(l==="set-cookie"?s[l]?s[l].push(o):s[l]=[o]:s[l]=s[l]?s[l]+", "+o:o)}),s},y0=Symbol("internals");function Jo(e){return e&&String(e).trim().toLowerCase()}function id(e){return e===!1||e==null?e:be.isArray(e)?e.map(id):String(e)}function rC(e){const s=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=l.exec(e);)s[o[1]]=o[2];return s}const lC=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Lh(e,s,l,o,d){if(be.isFunction(o))return o.call(this,s,l);if(d&&(s=l),!!be.isString(s)){if(be.isString(o))return s.indexOf(o)!==-1;if(be.isRegExp(o))return o.test(s)}}function oC(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,l,o)=>l.toUpperCase()+o)}function uC(e,s){const l=be.toCamelCase(" "+s);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+l,{value:function(d,m,f){return this[o].call(this,s,d,m,f)},configurable:!0})})}let Ia=class{constructor(s){s&&this.set(s)}set(s,l,o){const d=this;function m(g,v,_){const S=Jo(v);if(!S)throw new Error("header name must be a non-empty string");const w=be.findKey(d,S);(!w||d[w]===void 0||_===!0||_===void 0&&d[w]!==!1)&&(d[w||v]=id(g))}const f=(g,v)=>be.forEach(g,(_,S)=>m(_,S,v));if(be.isPlainObject(s)||s instanceof this.constructor)f(s,l);else if(be.isString(s)&&(s=s.trim())&&!lC(s))f(iC(s),l);else if(be.isObject(s)&&be.isIterable(s)){let g={},v,_;for(const S of s){if(!be.isArray(S))throw TypeError("Object iterator must return a key-value pair");g[_=S[0]]=(v=g[_])?be.isArray(v)?[...v,S[1]]:[v,S[1]]:S[1]}f(g,l)}else s!=null&&m(l,s,o);return this}get(s,l){if(s=Jo(s),s){const o=be.findKey(this,s);if(o){const d=this[o];if(!l)return d;if(l===!0)return rC(d);if(be.isFunction(l))return l.call(this,d,o);if(be.isRegExp(l))return l.exec(d);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,l){if(s=Jo(s),s){const o=be.findKey(this,s);return!!(o&&this[o]!==void 0&&(!l||Lh(this,this[o],o,l)))}return!1}delete(s,l){const o=this;let d=!1;function m(f){if(f=Jo(f),f){const g=be.findKey(o,f);g&&(!l||Lh(o,o[g],g,l))&&(delete o[g],d=!0)}}return be.isArray(s)?s.forEach(m):m(s),d}clear(s){const l=Object.keys(this);let o=l.length,d=!1;for(;o--;){const m=l[o];(!s||Lh(this,this[m],m,s,!0))&&(delete this[m],d=!0)}return d}normalize(s){const l=this,o={};return be.forEach(this,(d,m)=>{const f=be.findKey(o,m);if(f){l[f]=id(d),delete l[m];return}const g=s?oC(m):String(m).trim();g!==m&&delete l[m],l[g]=id(d),o[g]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const l=Object.create(null);return be.forEach(this,(o,d)=>{o!=null&&o!==!1&&(l[d]=s&&be.isArray(o)?o.join(", "):o)}),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,l])=>s+": "+l).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...l){const o=new this(s);return l.forEach(d=>o.set(d)),o}static accessor(s){const o=(this[y0]=this[y0]={accessors:{}}).accessors,d=this.prototype;function m(f){const g=Jo(f);o[g]||(uC(d,f),o[g]=!0)}return be.isArray(s)?s.forEach(m):m(s),this}};Ia.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);be.reduceDescriptors(Ia.prototype,({value:e},s)=>{let l=s[0].toUpperCase()+s.slice(1);return{get:()=>e,set(o){this[l]=o}}});be.freezeMethods(Ia);function Ph(e,s){const l=this||xu,o=s||l,d=Ia.from(o.headers);let m=o.data;return be.forEach(e,function(g){m=g.call(l,m,d.normalize(),s?s.status:void 0)}),d.normalize(),m}function Wb(e){return!!(e&&e.__CANCEL__)}let gu=class extends ot{constructor(s,l,o){super(s??"canceled",ot.ERR_CANCELED,l,o),this.name="CanceledError",this.__CANCEL__=!0}};function e_(e,s,l){const o=l.config.validateStatus;!l.status||!o||o(l.status)?e(l):s(new ot("Request failed with status code "+l.status,[ot.ERR_BAD_REQUEST,ot.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}function cC(e){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return s&&s[1]||""}function dC(e,s){e=e||10;const l=new Array(e),o=new Array(e);let d=0,m=0,f;return s=s!==void 0?s:1e3,function(v){const _=Date.now(),S=o[m];f||(f=_),l[d]=v,o[d]=_;let w=m,E=0;for(;w!==d;)E+=l[w++],w=w%e;if(d=(d+1)%e,d===m&&(m=(m+1)%e),_-f<s)return;const R=S&&_-S;return R?Math.round(E*1e3/R):void 0}}function mC(e,s){let l=0,o=1e3/s,d,m;const f=(_,S=Date.now())=>{l=S,d=null,m&&(clearTimeout(m),m=null),e(..._)};return[(..._)=>{const S=Date.now(),w=S-l;w>=o?f(_,S):(d=_,m||(m=setTimeout(()=>{m=null,f(d)},o-w)))},()=>d&&f(d)]}const gd=(e,s,l=3)=>{let o=0;const d=dC(50,250);return mC(m=>{const f=m.loaded,g=m.lengthComputable?m.total:void 0,v=f-o,_=d(v),S=f<=g;o=f;const w={loaded:f,total:g,progress:g?f/g:void 0,bytes:v,rate:_||void 0,estimated:_&&g&&S?(g-f)/_:void 0,event:m,lengthComputable:g!=null,[s?"download":"upload"]:!0};e(w)},l)},v0=(e,s)=>{const l=e!=null;return[o=>s[0]({lengthComputable:l,total:e,loaded:o}),s[1]]},b0=e=>(...s)=>be.asap(()=>e(...s)),hC=ga.hasStandardBrowserEnv?((e,s)=>l=>(l=new URL(l,ga.origin),e.protocol===l.protocol&&e.host===l.host&&(s||e.port===l.port)))(new URL(ga.origin),ga.navigator&&/(msie|trident)/i.test(ga.navigator.userAgent)):()=>!0,fC=ga.hasStandardBrowserEnv?{write(e,s,l,o,d,m,f){if(typeof document>"u")return;const g=[`${e}=${encodeURIComponent(s)}`];be.isNumber(l)&&g.push(`expires=${new Date(l).toUTCString()}`),be.isString(o)&&g.push(`path=${o}`),be.isString(d)&&g.push(`domain=${d}`),m===!0&&g.push("secure"),be.isString(f)&&g.push(`SameSite=${f}`),document.cookie=g.join("; ")},read(e){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function pC(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function xC(e,s){return s?e.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):e}function t_(e,s,l){let o=!pC(s);return e&&(o||l==!1)?xC(e,s):s}const _0=e=>e instanceof Ia?{...e}:e;function Jr(e,s){s=s||{};const l={};function o(_,S,w,E){return be.isPlainObject(_)&&be.isPlainObject(S)?be.merge.call({caseless:E},_,S):be.isPlainObject(S)?be.merge({},S):be.isArray(S)?S.slice():S}function d(_,S,w,E){if(be.isUndefined(S)){if(!be.isUndefined(_))return o(void 0,_,w,E)}else return o(_,S,w,E)}function m(_,S){if(!be.isUndefined(S))return o(void 0,S)}function f(_,S){if(be.isUndefined(S)){if(!be.isUndefined(_))return o(void 0,_)}else return o(void 0,S)}function g(_,S,w){if(w in s)return o(_,S);if(w in e)return o(void 0,_)}const v={url:m,method:m,data:m,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:g,headers:(_,S,w)=>d(_0(_),_0(S),w,!0)};return be.forEach(Object.keys({...e,...s}),function(S){const w=v[S]||d,E=w(e[S],s[S],S);be.isUndefined(E)&&w!==g||(l[S]=E)}),l}const n_=e=>{const s=Jr({},e);let{data:l,withXSRFToken:o,xsrfHeaderName:d,xsrfCookieName:m,headers:f,auth:g}=s;if(s.headers=f=Ia.from(f),s.url=Yb(t_(s.baseURL,s.url,s.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&f.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),be.isFormData(l)){if(ga.hasStandardBrowserEnv||ga.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(be.isFunction(l.getHeaders)){const v=l.getHeaders(),_=["content-type","content-length"];Object.entries(v).forEach(([S,w])=>{_.includes(S.toLowerCase())&&f.set(S,w)})}}if(ga.hasStandardBrowserEnv&&(o&&be.isFunction(o)&&(o=o(s)),o||o!==!1&&hC(s.url))){const v=d&&m&&fC.read(m);v&&f.set(d,v)}return s},gC=typeof XMLHttpRequest<"u",yC=gC&&function(e){return new Promise(function(l,o){const d=n_(e);let m=d.data;const f=Ia.from(d.headers).normalize();let{responseType:g,onUploadProgress:v,onDownloadProgress:_}=d,S,w,E,R,T;function A(){R&&R(),T&&T(),d.cancelToken&&d.cancelToken.unsubscribe(S),d.signal&&d.signal.removeEventListener("abort",S)}let O=new XMLHttpRequest;O.open(d.method.toUpperCase(),d.url,!0),O.timeout=d.timeout;function q(){if(!O)return;const D=Ia.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),Y={data:!g||g==="text"||g==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:D,config:e,request:O};e_(function(H){l(H),A()},function(H){o(H),A()},Y),O=null}"onloadend"in O?O.onloadend=q:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(q)},O.onabort=function(){O&&(o(new ot("Request aborted",ot.ECONNABORTED,e,O)),O=null)},O.onerror=function(G){const Y=G&&G.message?G.message:"Network Error",ee=new ot(Y,ot.ERR_NETWORK,e,O);ee.event=G||null,o(ee),O=null},O.ontimeout=function(){let G=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded";const Y=d.transitional||Jb;d.timeoutErrorMessage&&(G=d.timeoutErrorMessage),o(new ot(G,Y.clarifyTimeoutError?ot.ETIMEDOUT:ot.ECONNABORTED,e,O)),O=null},m===void 0&&f.setContentType(null),"setRequestHeader"in O&&be.forEach(f.toJSON(),function(G,Y){O.setRequestHeader(Y,G)}),be.isUndefined(d.withCredentials)||(O.withCredentials=!!d.withCredentials),g&&g!=="json"&&(O.responseType=d.responseType),_&&([E,T]=gd(_,!0),O.addEventListener("progress",E)),v&&O.upload&&([w,R]=gd(v),O.upload.addEventListener("progress",w),O.upload.addEventListener("loadend",R)),(d.cancelToken||d.signal)&&(S=D=>{O&&(o(!D||D.type?new gu(null,e,O):D),O.abort(),O=null)},d.cancelToken&&d.cancelToken.subscribe(S),d.signal&&(d.signal.aborted?S():d.signal.addEventListener("abort",S)));const U=cC(d.url);if(U&&ga.protocols.indexOf(U)===-1){o(new ot("Unsupported protocol "+U+":",ot.ERR_BAD_REQUEST,e));return}O.send(m||null)})},vC=(e,s)=>{const{length:l}=e=e?e.filter(Boolean):[];if(s||l){let o=new AbortController,d;const m=function(_){if(!d){d=!0,g();const S=_ instanceof Error?_:this.reason;o.abort(S instanceof ot?S:new gu(S instanceof Error?S.message:S))}};let f=s&&setTimeout(()=>{f=null,m(new ot(`timeout of ${s}ms exceeded`,ot.ETIMEDOUT))},s);const g=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(_=>{_.unsubscribe?_.unsubscribe(m):_.removeEventListener("abort",m)}),e=null)};e.forEach(_=>_.addEventListener("abort",m));const{signal:v}=o;return v.unsubscribe=()=>be.asap(g),v}},bC=function*(e,s){let l=e.byteLength;if(l<s){yield e;return}let o=0,d;for(;o<l;)d=o+s,yield e.slice(o,d),o=d},_C=async function*(e,s){for await(const l of NC(e))yield*bC(l,s)},NC=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const s=e.getReader();try{for(;;){const{done:l,value:o}=await s.read();if(l)break;yield o}}finally{await s.cancel()}},N0=(e,s,l,o)=>{const d=_C(e,s);let m=0,f,g=v=>{f||(f=!0,o&&o(v))};return new ReadableStream({async pull(v){try{const{done:_,value:S}=await d.next();if(_){g(),v.close();return}let w=S.byteLength;if(l){let E=m+=w;l(E)}v.enqueue(new Uint8Array(S))}catch(_){throw g(_),_}},cancel(v){return g(v),d.return()}},{highWaterMark:2})},j0=64*1024,{isFunction:Zc}=be,jC=(({Request:e,Response:s})=>({Request:e,Response:s}))(be.global),{ReadableStream:S0,TextEncoder:w0}=be.global,k0=(e,...s)=>{try{return!!e(...s)}catch{return!1}},SC=e=>{e=be.merge.call({skipUndefined:!0},jC,e);const{fetch:s,Request:l,Response:o}=e,d=s?Zc(s):typeof fetch=="function",m=Zc(l),f=Zc(o);if(!d)return!1;const g=d&&Zc(S0),v=d&&(typeof w0=="function"?(T=>A=>T.encode(A))(new w0):async T=>new Uint8Array(await new l(T).arrayBuffer())),_=m&&g&&k0(()=>{let T=!1;const A=new l(ga.origin,{body:new S0,method:"POST",get duplex(){return T=!0,"half"}}).headers.has("Content-Type");return T&&!A}),S=f&&g&&k0(()=>be.isReadableStream(new o("").body)),w={stream:S&&(T=>T.body)};d&&["text","arrayBuffer","blob","formData","stream"].forEach(T=>{!w[T]&&(w[T]=(A,O)=>{let q=A&&A[T];if(q)return q.call(A);throw new ot(`Response type '${T}' is not supported`,ot.ERR_NOT_SUPPORT,O)})});const E=async T=>{if(T==null)return 0;if(be.isBlob(T))return T.size;if(be.isSpecCompliantForm(T))return(await new l(ga.origin,{method:"POST",body:T}).arrayBuffer()).byteLength;if(be.isArrayBufferView(T)||be.isArrayBuffer(T))return T.byteLength;if(be.isURLSearchParams(T)&&(T=T+""),be.isString(T))return(await v(T)).byteLength},R=async(T,A)=>{const O=be.toFiniteNumber(T.getContentLength());return O??E(A)};return async T=>{let{url:A,method:O,data:q,signal:U,cancelToken:D,timeout:G,onDownloadProgress:Y,onUploadProgress:ee,responseType:H,headers:te,withCredentials:J="same-origin",fetchOptions:fe}=n_(T),ye=s||fetch;H=H?(H+"").toLowerCase():"text";let de=vC([U,D&&D.toAbortSignal()],G),Se=null;const oe=de&&de.unsubscribe&&(()=>{de.unsubscribe()});let le;try{if(ee&&_&&O!=="get"&&O!=="head"&&(le=await R(te,q))!==0){let z=new l(A,{method:"POST",body:q,duplex:"half"}),ne;if(be.isFormData(q)&&(ne=z.headers.get("content-type"))&&te.setContentType(ne),z.body){const[I,ce]=v0(le,gd(b0(ee)));q=N0(z.body,j0,I,ce)}}be.isString(J)||(J=J?"include":"omit");const Q=m&&"credentials"in l.prototype,K={...fe,signal:de,method:O.toUpperCase(),headers:te.normalize().toJSON(),body:q,duplex:"half",credentials:Q?J:void 0};Se=m&&new l(A,K);let X=await(m?ye(Se,fe):ye(A,K));const ke=S&&(H==="stream"||H==="response");if(S&&(Y||ke&&oe)){const z={};["status","statusText","headers"].forEach(ue=>{z[ue]=X[ue]});const ne=be.toFiniteNumber(X.headers.get("content-length")),[I,ce]=Y&&v0(ne,gd(b0(Y),!0))||[];X=new o(N0(X.body,j0,I,()=>{ce&&ce(),oe&&oe()}),z)}H=H||"text";let je=await w[be.findKey(w,H)||"text"](X,T);return!ke&&oe&&oe(),await new Promise((z,ne)=>{e_(z,ne,{data:je,headers:Ia.from(X.headers),status:X.status,statusText:X.statusText,config:T,request:Se})})}catch(Q){throw oe&&oe(),Q&&Q.name==="TypeError"&&/Load failed|fetch/i.test(Q.message)?Object.assign(new ot("Network Error",ot.ERR_NETWORK,T,Se),{cause:Q.cause||Q}):ot.from(Q,Q&&Q.code,T,Se)}}},wC=new Map,a_=e=>{let s=e&&e.env||{};const{fetch:l,Request:o,Response:d}=s,m=[o,d,l];let f=m.length,g=f,v,_,S=wC;for(;g--;)v=m[g],_=S.get(v),_===void 0&&S.set(v,_=g?new Map:SC(s)),S=_;return _};a_();const gp={http:qT,xhr:yC,fetch:{get:a_}};be.forEach(gp,(e,s)=>{if(e){try{Object.defineProperty(e,"name",{value:s})}catch{}Object.defineProperty(e,"adapterName",{value:s})}});const E0=e=>`- ${e}`,kC=e=>be.isFunction(e)||e===null||e===!1;function EC(e,s){e=be.isArray(e)?e:[e];const{length:l}=e;let o,d;const m={};for(let f=0;f<l;f++){o=e[f];let g;if(d=o,!kC(o)&&(d=gp[(g=String(o)).toLowerCase()],d===void 0))throw new ot(`Unknown adapter '${g}'`);if(d&&(be.isFunction(d)||(d=d.get(s))))break;m[g||"#"+f]=d}if(!d){const f=Object.entries(m).map(([v,_])=>`adapter ${v} `+(_===!1?"is not supported by the environment":"is not available in the build"));let g=l?f.length>1?`since :
`+f.map(E0).join(`
`):" "+E0(f[0]):"as no adapter specified";throw new ot("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return d}const s_={getAdapter:EC,adapters:gp};function Ih(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new gu(null,e)}function T0(e){return Ih(e),e.headers=Ia.from(e.headers),e.data=Ph.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),s_.getAdapter(e.adapter||xu.adapter,e)(e).then(function(o){return Ih(e),o.data=Ph.call(e,e.transformResponse,o),o.headers=Ia.from(o.headers),o},function(o){return Wb(o)||(Ih(e),o&&o.response&&(o.response.data=Ph.call(e,e.transformResponse,o.response),o.response.headers=Ia.from(o.response.headers))),Promise.reject(o)})}const i_="1.13.4",Rd={};["object","boolean","number","function","string","symbol"].forEach((e,s)=>{Rd[e]=function(o){return typeof o===e||"a"+(s<1?"n ":" ")+e}});const C0={};Rd.transitional=function(s,l,o){function d(m,f){return"[Axios v"+i_+"] Transitional option '"+m+"'"+f+(o?". "+o:"")}return(m,f,g)=>{if(s===!1)throw new ot(d(f," has been removed"+(l?" in "+l:"")),ot.ERR_DEPRECATED);return l&&!C0[f]&&(C0[f]=!0,console.warn(d(f," has been deprecated since v"+l+" and will be removed in the near future"))),s?s(m,f,g):!0}};Rd.spelling=function(s){return(l,o)=>(console.warn(`${o} is likely a misspelling of ${s}`),!0)};function TC(e,s,l){if(typeof e!="object")throw new ot("options must be an object",ot.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let d=o.length;for(;d-- >0;){const m=o[d],f=s[m];if(f){const g=e[m],v=g===void 0||f(g,m,e);if(v!==!0)throw new ot("option "+m+" must be "+v,ot.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new ot("Unknown option "+m,ot.ERR_BAD_OPTION)}}const rd={assertOptions:TC,validators:Rd},Gs=rd.validators;let Gr=class{constructor(s){this.defaults=s||{},this.interceptors={request:new g0,response:new g0}}async request(s,l){try{return await this._request(s,l)}catch(o){if(o instanceof Error){let d={};Error.captureStackTrace?Error.captureStackTrace(d):d=new Error;const m=d.stack?d.stack.replace(/^.+\n/,""):"";try{o.stack?m&&!String(o.stack).endsWith(m.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+m):o.stack=m}catch{}}throw o}}_request(s,l){typeof s=="string"?(l=l||{},l.url=s):l=s||{},l=Jr(this.defaults,l);const{transitional:o,paramsSerializer:d,headers:m}=l;o!==void 0&&rd.assertOptions(o,{silentJSONParsing:Gs.transitional(Gs.boolean),forcedJSONParsing:Gs.transitional(Gs.boolean),clarifyTimeoutError:Gs.transitional(Gs.boolean)},!1),d!=null&&(be.isFunction(d)?l.paramsSerializer={serialize:d}:rd.assertOptions(d,{encode:Gs.function,serialize:Gs.function},!0)),l.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?l.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:l.allowAbsoluteUrls=!0),rd.assertOptions(l,{baseUrl:Gs.spelling("baseURL"),withXsrfToken:Gs.spelling("withXSRFToken")},!0),l.method=(l.method||this.defaults.method||"get").toLowerCase();let f=m&&be.merge(m.common,m[l.method]);m&&be.forEach(["delete","get","head","post","put","patch","common"],T=>{delete m[T]}),l.headers=Ia.concat(f,m);const g=[];let v=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(l)===!1||(v=v&&A.synchronous,g.unshift(A.fulfilled,A.rejected))});const _=[];this.interceptors.response.forEach(function(A){_.push(A.fulfilled,A.rejected)});let S,w=0,E;if(!v){const T=[T0.bind(this),void 0];for(T.unshift(...g),T.push(..._),E=T.length,S=Promise.resolve(l);w<E;)S=S.then(T[w++],T[w++]);return S}E=g.length;let R=l;for(;w<E;){const T=g[w++],A=g[w++];try{R=T(R)}catch(O){A.call(this,O);break}}try{S=T0.call(this,R)}catch(T){return Promise.reject(T)}for(w=0,E=_.length;w<E;)S=S.then(_[w++],_[w++]);return S}getUri(s){s=Jr(this.defaults,s);const l=t_(s.baseURL,s.url,s.allowAbsoluteUrls);return Yb(l,s.params,s.paramsSerializer)}};be.forEach(["delete","get","head","options"],function(s){Gr.prototype[s]=function(l,o){return this.request(Jr(o||{},{method:s,url:l,data:(o||{}).data}))}});be.forEach(["post","put","patch"],function(s){function l(o){return function(m,f,g){return this.request(Jr(g||{},{method:s,headers:o?{"Content-Type":"multipart/form-data"}:{},url:m,data:f}))}}Gr.prototype[s]=l(),Gr.prototype[s+"Form"]=l(!0)});let CC=class r_{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(m){l=m});const o=this;this.promise.then(d=>{if(!o._listeners)return;let m=o._listeners.length;for(;m-- >0;)o._listeners[m](d);o._listeners=null}),this.promise.then=d=>{let m;const f=new Promise(g=>{o.subscribe(g),m=g}).then(d);return f.cancel=function(){o.unsubscribe(m)},f},s(function(m,f,g){o.reason||(o.reason=new gu(m,f,g),l(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const l=this._listeners.indexOf(s);l!==-1&&this._listeners.splice(l,1)}toAbortSignal(){const s=new AbortController,l=o=>{s.abort(o)};return this.subscribe(l),s.signal.unsubscribe=()=>this.unsubscribe(l),s.signal}static source(){let s;return{token:new r_(function(d){s=d}),cancel:s}}};function AC(e){return function(l){return e.apply(null,l)}}function MC(e){return be.isObject(e)&&e.isAxiosError===!0}const Ff={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ff).forEach(([e,s])=>{Ff[s]=e});function l_(e){const s=new Gr(e),l=Bb(Gr.prototype.request,s);return be.extend(l,Gr.prototype,s,{allOwnKeys:!0}),be.extend(l,s,null,{allOwnKeys:!0}),l.create=function(d){return l_(Jr(e,d))},l}const fn=l_(xu);fn.Axios=Gr;fn.CanceledError=gu;fn.CancelToken=CC;fn.isCancel=Wb;fn.VERSION=i_;fn.toFormData=Od;fn.AxiosError=ot;fn.Cancel=fn.CanceledError;fn.all=function(s){return Promise.all(s)};fn.spread=AC;fn.isAxiosError=MC;fn.mergeConfig=Jr;fn.AxiosHeaders=Ia;fn.formToJSON=e=>Xb(be.isHTMLForm(e)?new FormData(e):e);fn.getAdapter=s_.getAdapter;fn.HttpStatusCode=Ff;fn.default=fn;const{Axios:lO,AxiosError:oO,CanceledError:uO,isCancel:cO,CancelToken:dO,VERSION:mO,all:hO,Cancel:fO,isAxiosError:pO,spread:xO,toFormData:gO,AxiosHeaders:yO,HttpStatusCode:vO,formToJSON:bO,getAdapter:_O,mergeConfig:NO}=fn,yp="puantaj_access_token",yd="puantaj_refresh_token";function o_(){return localStorage.getItem(yp)}function qf(){return localStorage.getItem(yd)}function Zf(e,s){if(localStorage.setItem(yp,e),s){localStorage.setItem(yd,s);return}localStorage.removeItem(yd)}function u_(){localStorage.removeItem(yp),localStorage.removeItem(yd)}function zC(e){try{const s=e.split(".")[1];if(!s)return null;const l=s.replace(/-/g,"+").replace(/_/g,"/"),o=l.padEnd(l.length+(4-l.length%4)%4,"=");return JSON.parse(atob(o))}catch{return null}}function OC(e){if(!e)return!1;const s=zC(e);if(!s?.exp)return!1;const l=Math.floor(Date.now()/1e3);return s.exp>l+10}const Hf="http://127.0.0.1:8000",RC=Hf.includes("127.0.0.1")||Hf.includes("localhost"),DC=typeof window<"u"&&window.location.hostname!=="127.0.0.1"&&window.location.hostname!=="localhost",vp=DC&&RC?window.location.origin:Hf,Bh="/admin-panel/",Hc=Bh.endsWith("/")?Bh.slice(0,-1):Bh,ze=fn.create({baseURL:vp,headers:{"Content-Type":"application/json"}}),yu=fn.create({baseURL:vp,headers:{"Content-Type":"application/json"}});function A0(){if(u_(),typeof window>"u")return;const e=`${window.location.pathname}${window.location.search}`,s=Hc&&e.startsWith(Hc)?e.slice(Hc.length)||"/":e;if(s==="/login"||s.startsWith("/login?")){window.dispatchEvent(new Event("auth:logout"));return}const l=`${Hc}/login?redirect=${encodeURIComponent(s)}`;window.location.replace(l)}ze.interceptors.request.use(e=>{const s=o_();return s&&(e.headers.Authorization=`Bearer ${s}`),e});let Kc=null;async function LC(){const e=qf();if(!e)return A0(),null;try{const s=await fn.post(`${vp}/api/admin/auth/refresh`,{refresh_token:e});return Zf(s.data.access_token,s.data.refresh_token??e),s.data.access_token}catch{return A0(),null}}ze.interceptors.response.use(e=>e,async e=>{const s=e.config;if(!s||e.response?.status!==401||s._retry)return Promise.reject(e);const o=s.url??"";if(o.includes("/api/admin/auth/login")||o.includes("/api/admin/auth/refresh")||o.includes("/api/admin/auth/logout"))return Promise.reject(e);s._retry=!0,Kc||(Kc=LC().finally(()=>{Kc=null}));const m=await Kc;return m?(s.headers.Authorization=`Bearer ${m}`,ze(s)):Promise.reject(e)});async function PC(e){return(await ze.post("/api/admin/auth/login",e)).data}async function IC(e){return(await ze.post("/api/admin/auth/refresh",e)).data}async function BC(e){return(await ze.post("/api/admin/auth/logout",e)).data}async function Uh(){return(await ze.get("/api/admin/auth/me")).data}async function c_(){return(await ze.get("/api/admin/admin-users")).data}async function UC(e){return(await ze.get(`/api/admin/admin-users/${e}/claim-detail`)).data}async function FC(e,s,l){return(await ze.patch(`/api/admin/admin-users/${e}/claims/${s}/active`,l)).data}async function Xl(e){return(await ze.get("/api/admin/regions",{params:e})).data}async function qC(e){return(await ze.post("/api/admin/regions",e)).data}async function ZC(e,s){return(await ze.patch(`/api/admin/regions/${e}`,s)).data}async function HC(e){return(await ze.post("/api/admin/admin-users",e)).data}async function KC(e,s){return(await ze.patch(`/api/admin/admin-users/${e}`,s)).data}async function QC(e){await ze.delete(`/api/admin/admin-users/${e}`)}async function GC(e){return(await ze.get(`/api/admin/admin-users/${e}/mfa`)).data}async function VC(e){return(await ze.post(`/api/admin/admin-users/${e}/mfa/setup/start`)).data}async function $C(e,s){return(await ze.post(`/api/admin/admin-users/${e}/mfa/setup/confirm`,s)).data}async function YC(e,s){return(await ze.post(`/api/admin/admin-users/${e}/mfa/recovery-codes/regenerate`,s)).data}async function JC(e,s){return(await ze.post(`/api/admin/admin-users/${e}/mfa/reset`,s)).data}async function ji(){return(await ze.get("/admin/departments")).data}async function XC(e){return(await ze.get("/admin/departments",{params:e})).data}async function WC(e){return(await ze.post("/admin/departments",e)).data}async function eA(e,s){return(await ze.patch(`/admin/departments/${e}`,s)).data}async function Ms(e={}){return(await ze.get("/admin/employees",{params:e})).data}async function tA(e){return(await ze.post("/admin/employees",e)).data}async function nA(e){return(await ze.get(`/api/admin/employees/${e}/detail`)).data}async function aA(e,s){return(await ze.patch(`/api/admin/employees/${e}`,s)).data}async function d_(e,s){return(await ze.patch(`/api/admin/employees/${e}/active`,s)).data}async function sA(e,s){return(await ze.patch(`/api/admin/employees/${e}/shift`,s)).data}async function iA(e,s){return(await ze.patch(`/api/admin/employees/${e}/department`,s)).data}async function rA(e,s){return(await ze.put(`/admin/employee-locations/${e}`,s)).data}async function lA(){return(await ze.get("/admin/work-rules")).data}async function oA(e){return(await ze.post("/admin/work-rules",e)).data}async function m_(e){return(await ze.get("/admin/department-weekly-rules",{params:e})).data}async function h_(e){return(await ze.post("/admin/department-weekly-rules",e)).data}async function vu(e){return(await ze.get("/admin/department-shifts",{params:e})).data}async function vd(e){return(await ze.post("/admin/department-shifts",e)).data}async function f_(e){return(await ze.delete(`/admin/department-shifts/${e}`)).data}async function uA(e={}){return(await ze.get("/api/admin/qr/codes",{params:e})).data}async function cA(e){return(await ze.post("/api/admin/qr/codes",e)).data}async function dA(e,s){return(await ze.patch(`/api/admin/qr/codes/${e}`,s)).data}async function mA(e,s){return(await ze.post(`/api/admin/qr/codes/${e}/points`,s)).data}async function hA(e,s){return(await ze.delete(`/api/admin/qr/codes/${e}/points/${s}`)).data}async function fA(e={}){return(await ze.get("/api/admin/qr/points",{params:e})).data}async function pA(e){return(await ze.post("/api/admin/qr/points",e)).data}async function xA(e,s){return(await ze.patch(`/api/admin/qr/points/${e}`,s)).data}async function gA(e){return(await ze.delete(`/api/admin/qr/points/${e}`)).data}async function M0(e){return(await ze.post("/api/admin/schedule-plans",e)).data}async function yA(e={}){return(await ze.get("/api/admin/schedule-plans",{params:e})).data}async function vA(e){return(await ze.delete(`/api/admin/schedule-plans/${e}`)).data}async function bp(e={}){return(await ze.get("/admin/attendance-events",{params:e})).data}async function bA(e){return(await ze.post("/api/admin/attendance-events",e)).data}async function _A(e,s){return(await ze.patch(`/api/admin/attendance-events/${e}`,s)).data}async function NA(e,s=!1){return(await ze.delete(`/api/admin/attendance-events/${e}`,{params:{force:s}})).data}async function p_(e={}){return(await ze.get("/api/admin/audit-logs",{params:e})).data}async function jA(e={}){return(await ze.get("/api/admin/notifications/jobs",{params:e})).data}async function SA(e={}){return(await ze.get("/api/admin/notifications/delivery-logs",{params:e})).data}async function wA(e){return(await ze.post(`/api/admin/notifications/jobs/${e}/cancel`)).data}async function kA(e,s){return(await ze.post(`/api/admin/notifications/jobs/${e}/note`,{admin_note:s})).data}async function EA(e={}){return(await ze.get("/api/admin/notifications/subscriptions",{params:e})).data}async function TA(e={}){return(await ze.get("/api/admin/notifications/admin-subscriptions",{params:e})).data}async function Kf(){return(await ze.get("/api/admin/notifications/push/config")).data}async function CA(){return(await yu.get("/api/admin/notifications/push/config/public")).data}async function AA(){return(await ze.get("/api/admin/notifications/daily-report-health")).data}async function MA(){return(await ze.get("/api/admin/notifications/email-targets")).data}async function zA(e){return(await ze.put("/api/admin/notifications/email-targets",e)).data}async function OA(e={}){return(await ze.post("/api/admin/notifications/email-test",e)).data}async function RA(){return(await ze.get("/api/admin/notifications/admin-self-check")).data}async function DA(){return(await ze.post("/api/admin/notifications/admin-self-test")).data}async function LA(e){return(await ze.post("/api/admin/notifications/admin-device-invite",e)).data}async function PA(e){return(await yu.post("/api/admin/notifications/admin-device-claim/public",e)).data}async function x_(e){return(await ze.post("/api/admin/notifications/admin-device-heal",e)).data}async function IA(e){return(await ze.post("/api/admin/notifications/send",e)).data}async function BA(e={}){return(await ze.get("/api/admin/daily-report-archives",{params:e})).data}function UA(e){if(!e)return null;const s=e.match(/filename\*=UTF-8''([^;]+)/i);if(s?.[1])try{return decodeURIComponent(s[1].trim())}catch{return s[1].trim()}const l=e.match(/filename="?([^";]+)"?/i);return l?.[1]?l[1].trim():null}async function FA(e){return(await ze.get(`/api/admin/daily-report-archives/${e}/download`,{responseType:"blob"})).data}async function qA(e,s){const l=await yu.post(`/api/admin/daily-report-archives/${e}/password-download`,s,{responseType:"blob"}),o=l.headers["content-disposition"];return{blob:l.data,file_name:UA(o)}}async function ZA(e){return(await yu.get("/api/admin/attendance-extra-checkin-approval",{params:{token:e}})).data}async function HA(e){return(await yu.post("/api/admin/attendance-extra-checkin-approval/approve",e)).data}async function KA(e,s={}){return(await ze.post(`/api/admin/daily-report-archives/${e}/notify`,s)).data}async function QA(){return(await ze.get("/admin/devices")).data}async function z0(e={}){return(await ze.get("/api/admin/employee-device-overview",{params:e})).data}async function GA(e){return(await ze.get("/api/admin/dashboard/employee-snapshot",{params:e})).data}async function VA(e={}){return(await ze.get("/api/admin/control-room/overview",{params:e})).data}async function $A(e){return(await ze.get(`/api/admin/control-room/employees/${e}`)).data}async function YA(e){return(await ze.post("/api/admin/control-room/actions",e)).data}async function JA(e){return(await ze.post("/api/admin/control-room/risk-override",e)).data}async function XA(e){return(await ze.post("/api/admin/control-room/notes",e)).data}async function WA(e){return(await ze.post("/api/admin/control-room/filter-activity",e)).data}async function e3(e,s){return(await ze.patch(`/api/admin/devices/${e}/active`,s)).data}async function g_(e={}){return(await ze.get("/api/admin/leaves",{params:e})).data}async function t3(e){return(await ze.post("/api/admin/leaves",e)).data}async function n3(e){await ze.delete(`/api/admin/leaves/${e}`)}async function y_(e){return(await ze.post("/api/admin/device-invite",e)).data}async function bd(e){return(await ze.get("/api/admin/monthly/employee",{params:e})).data}async function a3(e){return(await ze.get("/api/admin/monthly/department-summary",{params:e})).data}async function s3(e,s){return(await ze.post("/api/admin/manual-overrides/day",s,{params:{employee_id:e}})).data}async function i3(e,s,l){return(await ze.get("/api/admin/manual-overrides/day",{params:{employee_id:e,year:s,month:l}})).data}async function r3(e){await ze.delete(`/api/admin/manual-overrides/day/${e}`)}async function l3(){return(await ze.get("/api/admin/compliance-settings")).data}async function o3(e){return(await ze.put("/api/admin/compliance-settings",e)).data}async function u3(e){return(await ze.get("/api/admin/exports/puantaj.xlsx",{params:e,responseType:"blob"})).data}async function c3(e){return(await ze.get("/api/admin/export/employee-monthly",{params:e,responseType:"blob"})).data}async function d3(e){return(await ze.get("/api/admin/export/department-monthly",{params:e,responseType:"blob"})).data}async function m3(e){return(await ze.get("/api/admin/export/all-monthly",{params:e,responseType:"blob"})).data}async function h3(e){return(await ze.get("/api/admin/export/puantaj-range.xlsx",{params:e,responseType:"blob"})).data}const ps={signatureText:"YABUJIN",signatureTagline:"Rainwater Systems",buildVersion:"dev"},v_=b.createContext(void 0);function f3({children:e}){const[s,l]=b.useState(null),[o,d]=b.useState(!0),m=b.useCallback(()=>{u_(),l(null)},[]),f=b.useCallback(async()=>{const w=qf();if(!w)return m(),!1;try{const E=await IC({refresh_token:w});Zf(E.access_token,E.refresh_token??w);const R=await Uh();return l(R),!0}catch{return m(),!1}},[m]),g=b.useCallback(async()=>{const w=o_();if(!w){l(null),d(!1);return}if(OC(w)){try{const E=await Uh();l(E)}catch{await f()}finally{d(!1)}return}await f(),d(!1)},[f]);b.useEffect(()=>{g()},[g]),b.useEffect(()=>{const w=()=>{l(null)};return window.addEventListener("auth:logout",w),()=>{window.removeEventListener("auth:logout",w)}},[]);const v=b.useCallback(async(w,E,R,T)=>{const A=await PC({username:w,password:E,mfa_code:R?.trim()||void 0,mfa_recovery_code:T?.trim()||void 0});Zf(A.access_token,A.refresh_token);const O=await Uh();l(O)},[]),_=b.useCallback(async()=>{const w=qf();if(w)try{await BC({refresh_token:w})}catch{}m()},[m]),S=b.useMemo(()=>({user:s,isAuthenticated:!!s,isBootstrapping:o,isSuperAdmin:!!s?.is_super_admin,login:v,logout:_,refreshSession:f,hasPermission:(w,E="read")=>{if(!s)return!1;if(s.is_super_admin)return!0;const R=s.permissions?.[w];return R?E==="write"?!!R.write:!!(R.read||R.write):!1}}),[s,o,v,_,f]);return n.jsx(v_.Provider,{value:S,children:e})}function Wl(){const e=b.useContext(v_);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function _p(e){const s="=".repeat((4-e.length%4)%4),l=`${e}${s}`.replace(/-/g,"+").replace(/_/g,"/"),o=window.atob(l),d=new Uint8Array(o.length);for(let m=0;m<o.length;m+=1)d[m]=o.charCodeAt(m);return d}const p3=[{to:"/management-console",label:"Ana Panel"},{to:"/dashboard",label:"Genel Bak"},{to:"/regions",label:"Blgeler",permission:"regions"},{to:"/departments",label:"Departmanlar",permission:"departments"},{to:"/employees",label:"alanlar",permission:"employees"},{to:"/quick-setup",label:"Hzl Ayarlar",permission:"schedule"},{to:"/work-rules",label:"Mesai Kurallar",permission:"work_rules"},{to:"/attendance-events",label:"Yoklama Kaytlar",permission:"attendance_events"},{to:"/devices",label:"Cihazlar",permission:"devices"},{to:"/compliance-settings",label:"Uyumluluk Ayarlar",permission:"compliance"},{to:"/qr-kodlar",label:"QR Kodlar"},{to:"/leaves",label:"zinler",permission:"leaves"},{to:"/reports/employee-monthly",label:"Aylk alan Raporu",permission:"reports"},{to:"/reports/department-summary",label:"Departman zeti",permission:"reports"},{to:"/reports/excel-export",label:"Excel Da Aktar",permission:"reports"},{to:"/notifications",label:"Bildirimler",permission:"audit"},{to:"/audit-logs",label:"Sistem Loglar",permission:"audit"},{to:"/admin-users",label:"Admin Kullanclar",permission:"admin_users"}],x3={"/management-console":"Ana Panel","/control-room":"Ana Panel","/dashboard":"Genel Bak","/regions":"Blgeler","/departments":"Departmanlar","/employees":"alanlar","/quick-setup":"Hzl Ayarlar","/work-rules":"Mesai Kurallar","/attendance-events":"Yoklama Kaytlar","/devices":"Cihazlar","/compliance-settings":"Uyumluluk Ayarlar","/qr-kodlar":"QR Kodlar","/leaves":"zinler","/reports/employee-monthly":"Aylk alan Raporu","/reports/department-summary":"Departman zeti","/reports/excel-export":"Excel Da Aktar","/notifications":"Bildirimler","/audit-logs":"Sistem Loglar","/admin-users":"Admin Kullanclar"},O0="pf_admin_push_vapid_public_key",b_="pf_admin_push_auto_heal_ts",g3=600*1e3;async function y3(){if(!("serviceWorker"in navigator)||!("PushManager"in window)||Notification.permission!=="granted")return;const e=await Kf();if(!e.enabled||!e.vapid_public_key)return;const l=await navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"});let o=await l.pushManager.getSubscription();const d=window.localStorage.getItem(O0);if(o&&d&&d!==e.vapid_public_key){try{await o.unsubscribe()}catch{}o=null}o||(o=await l.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_p(e.vapid_public_key)})),await x_({subscription:o.toJSON(),send_test:!1}),window.localStorage.setItem(O0,e.vapid_public_key),window.sessionStorage.setItem(b_,String(Date.now()))}function v3(){const e=ys(),{user:s,logout:l,hasPermission:o}=Wl(),d=b.useRef(null),m=b.useRef(null),f=b.useRef(!1),g=b.useRef(null),[v,_]=b.useState(!1),[S,w]=b.useState("erie geiliyor..."),E=o("audit","write"),R=p3.filter(G=>!G.permission||o(G.permission)),T=x3[e.pathname]??(e.pathname.startsWith("/employees/")?"alan Detay":"Admin Panel"),A=()=>typeof window<"u"&&window.innerWidth<1024,O=()=>{g.current!==null&&(window.clearTimeout(g.current),g.current=null)},q=(G,Y)=>{w(Y),_(!0),G==="content"?m.current?.scrollIntoView({behavior:"smooth",block:"start"}):d.current?.scrollIntoView({behavior:"smooth",block:"start"}),O(),g.current=window.setTimeout(()=>{_(!1)},1200)},U=G=>{if(A()){if(e.pathname===G){window.requestAnimationFrame(()=>{q("content","erie geiliyor...")});return}w("erie geiliyor..."),_(!0),f.current=!0}},D=()=>{A()&&window.requestAnimationFrame(()=>{q("sidebar","Sidebar'a dnlyor...")})};return b.useEffect(()=>{A()&&window.scrollTo({top:0})},[]),b.useEffect(()=>{if(!E)return;const G=window.sessionStorage.getItem(b_),Y=G?Number(G):0;Number.isFinite(Y)&&Y>0&&Date.now()-Y<g3||y3().catch(()=>{})},[E,s?.admin_user_id,s?.username]),b.useEffect(()=>{f.current&&(f.current=!1,window.requestAnimationFrame(()=>{q("content","erie geiliyor...")}))},[e.pathname]),b.useEffect(()=>()=>{O()},[]),n.jsxs("div",{className:"admin-shell min-h-screen bg-slate-100 lg:grid lg:grid-cols-[228px_minmax(0,1fr)]",children:[v?n.jsxs("div",{className:"mobile-nav-loader lg:hidden",role:"status","aria-live":"polite","aria-label":"Sayfa geii",children:[n.jsxs("div",{className:"mobile-nav-loader-logo","aria-hidden":"true",children:[n.jsx("div",{className:"mobile-nav-loader-halo"}),n.jsx("div",{className:"mobile-nav-loader-ring"}),n.jsx("div",{className:"mobile-nav-loader-spark"}),n.jsxs("div",{className:"mobile-nav-loader-core",children:[n.jsx("span",{className:"mobile-nav-loader-brand",children:"YABUJIN"}),n.jsx("span",{className:"mobile-nav-loader-sub",children:"CONTROL CORE"})]})]}),n.jsx("p",{className:"mobile-nav-loader-text",children:S})]}):null,n.jsxs("aside",{ref:d,className:"admin-sidebar flex flex-col px-3 py-6 text-slate-100 shadow-panel xl:px-4",children:[n.jsx("h1",{className:"px-2 text-xl font-bold tracking-tight",children:"Puantaj Admin"}),n.jsx("p",{className:"px-2 pt-1 text-xs text-slate-400",children:"FastAPI Ynetim Paneli"}),n.jsx("nav",{className:"mt-6 flex flex-col gap-1",children:R.map(G=>n.jsx(ob,{to:G.to,onClick:()=>U(G.to),className:({isActive:Y})=>`rounded-lg px-3 py-2 text-sm font-medium transition ${Y?"bg-brand-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800/85 hover:text-white"}`,children:G.label},G.to))}),n.jsxs("div",{className:"admin-signature",children:[n.jsx("p",{className:"admin-signature-main",children:ps.signatureText}),n.jsx("p",{className:"admin-signature-sub",children:ps.signatureTagline})]})]}),n.jsxs("div",{ref:m,className:"flex min-h-screen min-w-0 flex-col",children:[n.jsx("header",{className:"admin-topbar border-b border-slate-200 bg-white/90 px-4 py-4 backdrop-blur sm:px-6",children:n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:T}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Oturum: ",s?.username??s?.sub??"admin"," / Rol: ",s?.role??"admin"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:D,className:"btn-animated rounded-lg border border-slate-300 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-100 lg:hidden",children:"Sidebar'a Git"}),n.jsx("button",{type:"button",onClick:()=>{l()},className:"btn-animated rounded-lg bg-slate-900 px-4 py-2 text-sm font-medium text-white hover:bg-slate-700",children:"k"})]})]})}),n.jsx("main",{className:"admin-main min-w-0 flex-1 p-4 sm:p-6",children:n.jsx(sp,{})}),n.jsxs("footer",{className:"admin-footer-signature px-6 pb-4 pt-1 text-center text-xs tracking-wide text-slate-500",children:[n.jsx("span",{className:"admin-footer-brand",children:ps.signatureText}),n.jsx("span",{className:"admin-footer-sub",children:ps.signatureTagline}),n.jsxs("span",{className:"admin-footer-build",children:["BUILD: ",ps.buildVersion]})]})]})]})}function b3(){const{isAuthenticated:e,isBootstrapping:s}=Wl(),l=ys();if(s)return n.jsx("div",{className:"flex min-h-screen items-center justify-center text-slate-600",children:"Oturum kontrol ediliyor..."});if(!e){const o=`${l.pathname}${l.search}`;return n.jsx(dd,{to:"/login",replace:!0,state:{from:o}})}return n.jsx(sp,{})}function _3(){const{isAuthenticated:e,isBootstrapping:s}=Wl();return s?n.jsx("div",{className:"flex min-h-screen items-center justify-center text-slate-600",children:"Ykleniyor..."}):e?n.jsx(dd,{to:"/dashboard",replace:!0}):n.jsx(sp,{})}const R0={INVALID_CREDENTIALS:"Kullanici adi veya sifre hatali.",TOO_MANY_ATTEMPTS:"Cok fazla deneme yaptiniz. Lutfen daha sonra tekrar deneyin.",INVALID_TOKEN:"Oturum gecersiz veya suresi dolmus. Lutfen tekrar giris yapin.",FORBIDDEN:"Bu islem icin yetkiniz yok.",INTERNAL_ERROR:"Sunucu hatasi olustu. Lutfen tekrar deneyin.",MFA_REQUIRED:"MFA kodu zorunlu. Authenticator kodunu girin.",INVALID_MFA_CODE:"MFA kodu gecersiz. Tekrar deneyin.",MFA_SETUP_REQUIRED:"Bu hesap icin MFA kurulumu tamamlanmamis.",MFA_SETUP_NOT_STARTED:"Once MFA kurulumunu baslatin.",MFA_NOT_ENABLED:"Bu hesapta MFA aktif degil.",ARCHIVE_DECRYPT_FAILED:"Arsiv dosyasi acilamadi. Sunucu anahtarini kontrol edin.",EXTRA_CHECKIN_APPROVAL_NOT_FOUND:"Ek giris onay talebi bulunamadi.",EXTRA_CHECKIN_APPROVAL_EXPIRED:"Ek giris onay talebinin suresi dolmus.",INVITE_ATTEMPTS_EXCEEDED:"Davet linkinin deneme limiti doldu. Yeni bir link uretin.",INVITE_CONTEXT_MISMATCH:"Davet linki ayni cihaz/tarayici baglaminda kullanilmalidir.",INVITE_RETRY_TOO_FAST:"Cok hizli deneme yaptiniz. Birkac saniye bekleyip tekrar deneyin.",INVITE_TTL_TOO_LONG:"Davet suresi izin verilen limiti asiyor.",ADMIN_PUSH_SUBSCRIPTION_REQUIRED:"Aktif admin push aboneligi yok. Once bir admin cihazi claim edilmelidir."};function He(e,s){if(fn.isAxiosError(e)){const l=e.response?.data;if(typeof l=="string")return{message:l};const o=l?.error?.code,d=l?.error?.request_id,m=l?.error?.message;if(o&&R0[o])return{code:o,requestId:d,message:R0[o]};if(m)return{code:o,requestId:d,message:m};if(e.message)return{message:e.message}}return e instanceof Error&&e.message?{message:e.message}:{message:s}}function N3(e,s){return He(e,s).message}const D0="pf_admin_push_vapid_public_key";function j3(){const e=$l(),[s]=mu(),l=b.useMemo(()=>s.get("token")?.trim()??"",[s]),[o,d]=b.useState("admin"),[m,f]=b.useState(""),[g,v]=b.useState(!1),[_,S]=b.useState(null),[w,E]=b.useState(null),[R,T]=b.useState(null),A=async O=>{if(O.preventDefault(),E(null),T(null),S(null),!l){E("Davet token bulunamad. Ltfen yeni balant isteyin.");return}const q=o.trim(),U=m.trim();if(!q||!U){E("Admin kullanc ad ve ifre zorunludur.");return}try{v(!0);const D=await CA();if(!D.enabled||!D.vapid_public_key){E("Push bildirim servisi yaplandrlmam.");return}if(!("serviceWorker"in navigator)||!("PushManager"in window)){E("Bu tarayc push bildirimlerini desteklemiyor.");return}if((Notification.permission==="granted"?"granted":await Notification.requestPermission())!=="granted"){E("Bildirim izni verilmedi. Cihaz balama tamamlanamad.");return}const ee=await navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"});let H=await ee.pushManager.getSubscription();const te=window.localStorage.getItem(D0);if(H&&te&&te!==D.vapid_public_key){try{await H.unsubscribe()}catch{}H=null}H||(H=await ee.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_p(D.vapid_public_key)})),await PA({token:l,username:q,password:U,subscription:H.toJSON()}),window.localStorage.setItem(D0,D.vapid_public_key),S("Admin cihaz baaryla baland. Bildirimler bu cihaza gnderilecek."),window.setTimeout(()=>{e("/login",{replace:!0})},1e3)}catch(D){const G=He(D,"Cihaz balama ilemi baarsz oldu.");E(G.message),T(G.requestId??null)}finally{v(!1)}};return n.jsxs("div",{className:"mx-auto mt-10 w-full max-w-lg rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[n.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Admin Cihaz Balama"}),n.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Bu cihaz admin bildirimleri iin kaydetmek adna hesabnzla giri yapn."}),n.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:["Token: ",l||"Bulunamad"]}),n.jsxs("form",{className:"mt-4 space-y-3",onSubmit:A,children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Kullanc ad",n.jsx("input",{value:o,onChange:O=>d(O.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",autoComplete:"username"})]}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["ifre",n.jsx("input",{type:"password",value:m,onChange:O=>f(O.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",autoComplete:"current-password"})]}),w?n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:[n.jsx("p",{children:w}),R?n.jsxs("p",{className:"mt-1 text-xs",children:["request_id: ",R]}):null]}):null,_?n.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:_}):null,n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"submit",disabled:g,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:g?"Balanyor...":"Cihaz Bala"}),n.jsx(Ys,{to:"/login",className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Login ekran"})]})]})]})}function Qc(e){return`#${e.id} - ${e.full_name}`}function Xs({label:e,employees:s,value:l,onChange:o,placeholder:d="alan ad veya ID yazn...",emptyLabel:m="Seiniz",helperText:f,disabled:g=!1,className:v=""}){const _=b.useMemo(()=>s.find(O=>String(O.id)===l),[s,l]),[S,w]=b.useState(_?Qc(_):""),[E,R]=b.useState(!1);b.useEffect(()=>{if(_){w(Qc(_));return}l||w("")},[_,l]);const T=b.useMemo(()=>{const O=S.trim().toLowerCase();return(O?s.filter(U=>{const D=U.full_name.toLowerCase().includes(O),G=String(U.id).includes(O.replace("#",""));return D||G}):s).slice(0,60)},[s,S]),A=O=>{o(String(O.id)),w(Qc(O)),R(!1)};return n.jsxs("div",{className:v,children:[n.jsxs("label",{className:"text-sm text-slate-700",children:[e,n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",value:S,disabled:g,onFocus:()=>R(!0),onChange:O=>{const q=O.target.value;w(q),R(!0),q.trim()||o("")},onBlur:()=>{window.setTimeout(()=>R(!1),120)},placeholder:d,className:"w-full rounded-lg border border-slate-300 px-3 py-2"}),n.jsx("button",{type:"button",disabled:g,onClick:()=>{o(""),w(""),R(!1)},className:"absolute right-2 top-1/2 -translate-y-1/2 rounded px-1 text-xs text-slate-500 hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-50",children:"Temizle"}),E?n.jsxs("div",{className:"absolute z-20 mt-1 max-h-72 w-full overflow-y-auto rounded-lg border border-slate-200 bg-white shadow-lg",children:[n.jsx("button",{type:"button",onMouseDown:O=>O.preventDefault(),onClick:()=>{o(""),w(""),R(!1)},className:"flex w-full items-center justify-between border-b border-slate-100 px-3 py-2 text-left text-sm text-slate-600 hover:bg-slate-50",children:n.jsx("span",{children:m})}),T.map(O=>n.jsxs("button",{type:"button",onMouseDown:q=>q.preventDefault(),onClick:()=>A(O),className:"flex w-full items-center justify-between px-3 py-2 text-left text-sm hover:bg-slate-50",children:[n.jsx("span",{children:Qc(O)}),O.is_active?null:n.jsx("span",{className:"rounded-full bg-amber-100 px-2 py-0.5 text-[11px] font-semibold text-amber-700",children:"Pasif"})]},O.id)),T.length===0?n.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"Sonu bulunamad."}):null]}):null]})]}),f?n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:f}):null]})}function Ot({message:e}){return n.jsx("div",{className:"error-block admin-panel rounded-xl border border-rose-200 bg-rose-50 p-4 text-sm text-rose-700 shadow-sm",children:e})}function Gt({label:e="Ykleniyor..."}){return n.jsxs("div",{className:"loading-block admin-panel rounded-xl border border-slate-200 bg-white p-8 text-center text-sm text-slate-600 shadow-sm",children:[n.jsx("span",{className:"loading-spinner","aria-hidden":"true"}),n.jsx("span",{children:e})]})}function S3(e){return Number.isFinite(e)?Math.max(0,Math.floor(e)):0}function __(e){const s=S3(e),l=Math.floor(s/60),o=s%60;return{hours:l,minutes:o}}function w3(e){const{hours:s,minutes:l}=__(e),o=String(s).padStart(2,"0"),d=String(l).padStart(2,"0");return`${o}:${d}`}function k3(e){const{hours:s,minutes:l}=__(e);return s===0?`${l}dk`:`${s}s ${l}dk`}function ld(e){return`${w3(e)} (${k3(e)})`}function $e({minutes:e}){return n.jsx("span",{className:"whitespace-nowrap",children:ld(e)})}function Js({open:e,title:s,onClose:l,children:o,placement:d="center",maxWidthClass:m="max-w-xl"}){if(!e)return null;const f=d==="right";return n.jsx("div",{className:`fixed inset-0 z-50 flex bg-slate-900/45 ${f?"items-stretch justify-end p-0 sm:p-3":"items-center justify-center px-4"}`,children:n.jsxs("div",{className:`admin-panel page-enter w-full border border-slate-200 bg-white p-5 shadow-2xl ${f?`${m} h-full overflow-y-auto rounded-none sm:rounded-l-2xl`:`${m} rounded-xl`}`,children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:s}),n.jsx("button",{type:"button",onClick:l,className:"btn-animated rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Kapat"})]}),o]})})}function Xn({title:e,description:s,action:l}){return n.jsxs("div",{className:"mb-5 flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:e}),s?n.jsx("p",{className:"mt-1 text-sm text-slate-600",children:s}):null]}),l]})}function Ue({children:e,className:s=""}){return n.jsx("section",{className:`admin-panel min-w-0 rounded-xl border border-slate-200 bg-white p-5 shadow-sm ${s}`,children:e})}function N_({suspicious:e,label:s="Supheli",tooltip:l}){return e?n.jsx("span",{className:"status-badge status-badge-incomplete",title:l,children:s}):n.jsx("span",{className:"status-badge status-badge-neutral",children:"Normal"})}const E3={DUPLICATE_EVENT:{label:"Mkerrer kayt",description:"Ayn gn iinde ayn tipte (IN/OUT) birden fazla kayt tespit edildi.",tone:"warning"},MANUAL_CHECKOUT:{label:"Manuel k",description:"k kayd alan tarafndan manuel butonla oluturuldu.",tone:"info"},NEEDS_SHIFT_REVIEW:{label:"Vardiya kontrol gerekli",description:"Otomatik atanan vardiya ile giri saati arasnda yksek fark var. K kontrol etmelidir.",tone:"warning"},SHIFT_WEEKLY_RULE_OVERRIDE:{label:"Vardiya-kural akmas",description:"Ayn gn iin haftalk gn kural ile vardiya sresi/mola bilgisi farkl. Hesaplamada vardiya kural nceliklendirildi.",tone:"warning"},CROSS_MIDNIGHT_CHECKOUT:{label:"Gece vardiyas k",description:"Giri bir gn, k ertesi gn alnm. Sistem k nceki gnn mesaisine balayarak hesaplad.",tone:"info"},RULE_SOURCE_MANUAL_OVERRIDE:{label:"Kural manuel seildi",description:"Bu gn iin kural kayna K tarafndan manuel olarak seildi.",tone:"info"},RULE_OVERRIDE_INVALID:{label:"Geersiz manuel kural",description:"Manuel seilen kural kayna o gn iin uygulanamad; sistem otomatik kurala dnd.",tone:"warning"},UNDERWORKED:{label:"Eksik alma",description:"Net alma sresi, o gn iin planlanan srenin altnda kald.",tone:"warning"},SECOND_CHECKIN_APPROVED:{label:"2. giri admin onay",description:"Gnlk maksimum vardiya dngs tamamlandktan sonra, ek giri kayd admin onay ile ald.",tone:"info"},LOCATION_NO_LOCATION:{label:"Konum yok",description:"Kayt srasnda konum bilgisi gnderilmedi veya alnamad.",tone:"warning"},LOCATION_UNVERIFIED:{label:"Ev d konum",description:"Kayt, tanml ev konumu yarap dnda alnd.",tone:"warning"},ADMIN_MANUAL_EVENT:{label:"Admin manuel kayt",description:"Kayt admin tarafndan manuel olarak eklenmi/dzenlenmi.",tone:"info"},EKSIK_GUN:{label:"Eksik gn",description:"Gn iinde giri veya k kayd eksik olduu iin gn tamamlanmam grnyor.",tone:"danger"},MISSING_IN:{label:"Giri eksik",description:"Bu gn iin giri (IN) kayd bulunamad.",tone:"danger"},MISSING_OUT:{label:"k eksik",description:"Bu gn iin k (OUT) kayd bulunamad.",tone:"danger"},OPEN_SHIFT_ACTIVE:{label:"Ak vardiya devam ediyor",description:"Gn iinde bir ktan sonra yeniden giri yapld ve son giri iin henz k kayd olumad.",tone:"warning"},DAILY_MAX_EXCEEDED:{label:"Gnlk sre ald",description:"Gnlk azami alma sresi (11 saat) ald.",tone:"danger"},MIN_BREAK_NOT_MET:{label:"Yasal mola yetersiz",description:"Tanml mola, yasal minimum mola sresinin altnda kald.",tone:"warning"},NIGHT_WORK_EXCEEDED:{label:"Gece alma snr ald",description:"Gece alma sresi yasal snrn zerinde grnyor.",tone:"danger"},ANNUAL_OVERTIME_CAP_EXCEEDED:{label:"Yllk fazla mesai limiti ald",description:"alann yllk fazla mesai limiti ald.",tone:"danger"}};function Ya(e){return E3[e]??{label:e,description:`${e} bayra iin aklama tanml deil.`,tone:"neutral"}}function T3(){return["DAILY_MAX_EXCEEDED","MIN_BREAK_NOT_MET","NIGHT_WORK_EXCEEDED","ANNUAL_OVERTIME_CAP_EXCEEDED","SHIFT_WEEKLY_RULE_OVERRIDE","UNDERWORKED"]}function C3(e){return e==="danger"||e==="warning"?"status-badge status-badge-incomplete":e==="info"?"status-badge status-badge-leave":"status-badge status-badge-neutral"}function j_({reasons:e}){return e.length===0?n.jsx("span",{className:"status-badge status-badge-neutral",children:"Sorun yok"}):n.jsx("div",{className:"flex flex-wrap gap-1",children:e.map(s=>n.jsx("span",{title:Ya(s).description,className:C3(Ya(s).tone),children:Ya(s).label},s))})}const S_=b.createContext(void 0);function A3(e){return e==="success"?"border-emerald-200 bg-emerald-50 text-emerald-900":e==="error"?"border-rose-200 bg-rose-50 text-rose-900":"border-sky-200 bg-sky-50 text-sky-900"}function M3({children:e}){const[s,l]=b.useState([]),o=b.useCallback(f=>{l(g=>g.map(v=>v.id===f?{...v,isClosing:!0}:v)),window.setTimeout(()=>{l(g=>g.filter(v=>v.id!==f))},170)},[]),d=b.useCallback(f=>{const g=crypto.randomUUID(),v={id:g,title:f.title,description:f.description,durationMs:f.durationMs??3500,variant:f.variant??"info"};l(_=>[..._,v]),window.setTimeout(()=>{o(g)},v.durationMs)},[o]),m=b.useMemo(()=>({pushToast:d,removeToast:o}),[d,o]);return n.jsxs(S_.Provider,{value:m,children:[e,n.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 flex w-full max-w-sm flex-col gap-2",children:s.map(f=>n.jsx("div",{className:`toast-card pointer-events-auto rounded-lg border px-4 py-3 shadow-lg ${A3(f.variant)} ${f.isClosing?"is-leaving":""}`,role:"status",children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold",children:f.title}),f.description?n.jsx("p",{className:"mt-1 text-xs",children:f.description}):null]}),n.jsx("button",{type:"button",onClick:()=>o(f.id),className:"rounded px-2 py-1 text-xs font-medium opacity-80 hover:opacity-100",children:"Kapat"})]})},f.id))})]})}function ha(){const e=b.useContext(S_);return e||{pushToast:()=>{},removeToast:()=>{}}}function z3(e){const[s,l,o]=e.split("-"),d=Number(s),m=Number(l),f=Number(o);return!Number.isInteger(d)||!Number.isInteger(m)||!Number.isInteger(f)?new Date("invalid"):new Date(Date.UTC(d,m-1,f))}function O3(e){return e.leave_type==="PUBLIC_HOLIDAY"||e.flags.includes("PUBLIC_HOLIDAY")}function R3(e){return e.worked_minutes>0?!0:!!(e.in||e.out)}function Np(e){if(O3(e))return{key:"SPECIAL",label:"zel Gn"};const s=z3(e.date);return!Number.isNaN(s.getTime())&&s.getUTCDay()===0?{key:"SUNDAY",label:"Pazar"}:{key:"WEEKDAY",label:"Hafta i"}}function w_(e){const s={workedMinutes:0,overtimeMinutes:0,planOvertimeMinutes:0,legalExtraWorkMinutes:0,workedDayCount:0,overtimeDayCount:0,planOvertimeDayCount:0,sundayWorkedDayCount:0,weekdayWorkedDayCount:0,specialWorkedDayCount:0,sundayWorkedMinutes:0,weekdayWorkedMinutes:0,specialWorkedMinutes:0};for(const l of e){const o=l.plan_overtime_minutes??l.overtime_minutes,d=l.legal_extra_work_minutes??0,m=l.legal_overtime_minutes??l.overtime_minutes;if(s.workedMinutes+=l.worked_minutes,s.planOvertimeMinutes+=o,s.legalExtraWorkMinutes+=d,s.overtimeMinutes+=m,R3(l)){s.workedDayCount+=1;const g=Np(l);g.key==="SPECIAL"?(s.specialWorkedDayCount+=1,s.specialWorkedMinutes+=l.worked_minutes):g.key==="SUNDAY"?(s.sundayWorkedDayCount+=1,s.sundayWorkedMinutes+=l.worked_minutes):(s.weekdayWorkedDayCount+=1,s.weekdayWorkedMinutes+=l.worked_minutes)}o>0&&(s.planOvertimeDayCount+=1),m>0&&(s.overtimeDayCount+=1)}return s}const D3=[{value:"ALL",label:"Tm konum durumlar"},{value:"VERIFIED_HOME",label:"Evde onayl"},{value:"UNVERIFIED_LOCATION",label:"Ev d"},{value:"NO_LOCATION",label:"Konum yok"}],L3=[{value:"ALL",label:"Tm tipler"},{value:"IN",label:"IN (Giri)"},{value:"OUT",label:"OUT (k)"}],Xo={employeeId:"",departmentId:"",dateFrom:"",dateTo:"",eventType:"ALL",locationStatus:"ALL",duplicatesOnly:!1,suspiciousOnly:!1,includeDeleted:!1,limit:"200"},P3="Europe/Istanbul",L0=[20,35,50,100];function au(e,s){return e[s]===!0}function P0(e){if(typeof e=="number"&&Number.isInteger(e)&&e>0)return e;if(typeof e=="string"){const s=Number(e.trim());if(Number.isInteger(s)&&s>0)return s}return null}function Gc(e){return new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"medium",timeZone:P3}).format(new Date(e))}function I3(e){const s=new Date(e);return new Date(s.getTime()-s.getTimezoneOffset()*6e4).toISOString().slice(0,16)}function B3(e){return e==="VERIFIED_HOME"?"Evde onayl":e==="UNVERIFIED_LOCATION"?"Ev d":"Konum yok"}function Fh(e){const s=[],l=e.flags.reason==="home_location_not_set";return au(e.flags,"DUPLICATE_EVENT")&&s.push("DUPLICATE_EVENT"),au(e.flags,"MANUAL_CHECKOUT")&&s.push("MANUAL_CHECKOUT"),au(e.flags,"NEEDS_SHIFT_REVIEW")&&s.push("NEEDS_SHIFT_REVIEW"),e.location_status==="NO_LOCATION"&&s.push("LOCATION_NO_LOCATION"),e.location_status==="UNVERIFIED_LOCATION"&&!l&&s.push("LOCATION_UNVERIFIED"),(e.source==="MANUAL"||e.created_by_admin||au(e.flags,"ADMIN_MANUAL"))&&s.push("ADMIN_MANUAL_EVENT"),s}function qh(e){const s=Number(e);return Number.isInteger(s)&&s>0?s:null}function U3(e){return e.length?e.map(s=>`${Ya(s).label} (${s})`).join(", "):"-"}function F3(){const e=na(),{pushToast:s}=ha(),[l]=mu(),[o,d]=b.useState(Xo),[m,f]=b.useState(Xo),[g,v]=b.useState(""),[_,S]=b.useState("IN"),[w,E]=b.useState(""),[R,T]=b.useState(""),[A,O]=b.useState(""),[q,U]=b.useState(!1),[D,G]=b.useState(null),[Y,ee]=b.useState("IN"),[H,te]=b.useState(""),[J,fe]=b.useState(""),[ye,de]=b.useState(""),[Se,oe]=b.useState(!1),[le,Q]=b.useState(!1),[K,X]=b.useState(null),[ke,je]=b.useState(!1),[z,ne]=b.useState(35),[I,ce]=b.useState(1),[ue,Ne]=b.useState(35),[Re,Le]=b.useState(1);b.useEffect(()=>{const $=l.get("employee_id")??"",qe=l.get("start_date")??"",xn=l.get("end_date")??"";if(!$&&!qe&&!xn)return;const pt={...Xo,employeeId:$,dateFrom:qe,dateTo:xn||qe};d(pt),f(pt)},[l]);const me=Qe({queryKey:["employees","all"],queryFn:()=>Ms({status:"all",include_inactive:!0})}),Ge=Qe({queryKey:["departments"],queryFn:ji}),Ye=Qe({queryKey:["department-shifts","all"],queryFn:()=>vu({active_only:!1})}),Tt=b.useMemo(()=>{const $=Number(m.employeeId),qe=Number(m.departmentId),xn=Number(m.limit);return{employee_id:$>0?$:void 0,department_id:qe>0?qe:void 0,start_date:m.dateFrom||void 0,end_date:m.dateTo||void 0,type:m.eventType==="ALL"?void 0:m.eventType,location_status:m.locationStatus==="ALL"?void 0:m.locationStatus,duplicates_only:m.duplicatesOnly||void 0,include_deleted:m.includeDeleted||void 0,limit:xn>0?xn:200}},[m]),ht=Qe({queryKey:["attendance-events",Tt],queryFn:()=>bp(Tt)}),M=(Re-1)*ue,Oe=Qe({queryKey:["audit-logs","attendance-events",Re,ue],queryFn:()=>p_({entity_type:"attendance_event",offset:M,limit:ue})}),mt=Number(m.employeeId),Rt=b.useMemo(()=>{const $=m.dateFrom||m.dateTo;if(!$)return new Date;const qe=new Date(`${$}T00:00:00`);return Number.isNaN(qe.getTime())?new Date:qe},[m.dateFrom,m.dateTo]),It=Qe({queryKey:["attendance-events-monthly-summary",mt,Rt.getFullYear(),Rt.getMonth()+1],queryFn:()=>bd({employee_id:mt,year:Rt.getFullYear(),month:Rt.getMonth()+1}),enabled:Number.isInteger(mt)&&mt>0,staleTime:15e3}),Vt=Je({mutationFn:bA,onSuccess:()=>{s({variant:"success",title:"Manuel event kaydedildi",description:"Kayt baaryla oluturuldu."}),T(""),O(""),U(!1),e.invalidateQueries({queryKey:["attendance-events"]}),e.invalidateQueries({queryKey:["audit-logs"]})},onError:$=>{s({variant:"error",title:"Kayt oluturulamad",description:He($,"lem baarsz.").message})}}),ae=Je({mutationFn:({eventId:$,payload:qe})=>_A($,qe),onSuccess:()=>{s({variant:"success",title:"Event gncellendi",description:"Deiiklikler kaydedildi."}),G(null),e.invalidateQueries({queryKey:["attendance-events"]}),e.invalidateQueries({queryKey:["audit-logs"]})},onError:$=>{s({variant:"error",title:"Event gncellenemedi",description:He($,"lem baarsz.").message})}}),Ee=Je({mutationFn:({eventId:$,force:qe})=>NA($,qe),onSuccess:()=>{s({variant:"success",title:"Event soft silindi",description:"Kayt pasife alnd."}),X(null),je(!1),e.invalidateQueries({queryKey:["attendance-events"]}),e.invalidateQueries({queryKey:["audit-logs"]})},onError:$=>{s({variant:"error",title:"Silme baarsz",description:He($,"lem baarsz.").message})}}),Be=me.data??[],Ct=Ge.data??[],se=Ye.data??[],Ke=ht.data??[],_t=b.useMemo(()=>(It.data?.days??[]).filter(qe=>!(m.dateFrom&&qe.date<m.dateFrom||m.dateTo&&qe.date>m.dateTo)),[It.data?.days,m.dateFrom,m.dateTo]),pn=b.useMemo(()=>w_(_t),[_t]),Lt=Math.max(1,Math.ceil(_t.length/z)),rt=(I-1)*z,Qn=b.useMemo(()=>_t.slice(rt,rt+z),[_t,rt,z]),_e=_t.length===0?0:rt+1,tt=_t.length===0?0:Math.min(rt+z,_t.length),ut=b.useMemo(()=>new Map(Be.map($=>[$.id,$])),[Be]),Nt=b.useMemo(()=>new Map(Be.map($=>[$.id,$.full_name])),[Be]),$t=b.useMemo(()=>new Map(Ct.map($=>[$.id,$.name])),[Ct]),Dt=b.useMemo(()=>new Map(se.map($=>[$.id,$])),[se]),Xt=b.useMemo(()=>ut.get(Number(g)),[ut,g]),Bn=b.useMemo(()=>Xt?.department_id?se.filter($=>$.department_id===Xt.department_id):se,[Xt?.department_id,se]),Pt=b.useMemo(()=>{if(!D)return se;const $=ut.get(D.employee_id);return $?.department_id?se.filter(qe=>qe.department_id===$.department_id):se},[ut,D,se]),ct=b.useMemo(()=>m.suspiciousOnly?Ke.filter($=>Fh($).length>0):Ke,[Ke,m.suspiciousOnly]),dn=Oe.data?.items??[],jn=Oe.data?.total??dn.length,et=Math.max(1,Math.ceil(jn/ue)),kn=jn===0?0:M+1,gt=jn===0?0:Math.min(M+dn.length,jn);b.useEffect(()=>{ce(1)},[mt,m.dateFrom,m.dateTo,z]),b.useEffect(()=>{ce($=>Math.min($,Lt))},[Lt]),b.useEffect(()=>{Le(1)},[ue]),b.useEffect(()=>{Le($=>Math.min($,et))},[et]);const Wa=()=>f({...o}),Dn=()=>{d(Xo),f(Xo)},Kt=$=>{$.preventDefault();const qe=qh(g);if(!qe||!w){s({variant:"error",title:"Eksik alan",description:"alan ve tarih/saat zorunludur."});return}const xn=qh(A);Vt.mutate({employee_id:qe,type:_,ts_utc:new Date(w).toISOString(),note:R||void 0,shift_id:xn??void 0,allow_duplicate:q})},Gn=$=>{G($),ee($.type),te(I3($.ts_utc)),fe($.note??""),oe(!1),Q(!1),de(String(P0($.flags.SHIFT_ID)??""))},es=$=>{if($.preventDefault(),!D||!H)return;const qe=qh(ye);ae.mutate({eventId:D.id,payload:{type:Y,ts_utc:new Date(H).toISOString(),note:J||null,shift_id:qe??void 0,allow_duplicate:Se,force_edit:le}})};return me.isLoading||Ge.isLoading||Ye.isLoading?n.jsx(Gt,{}):me.isError||Ge.isError||Ye.isError?n.jsx(Ot,{message:"alan/departman/vardiya bilgileri alnamad."}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"Yoklama Kaytlar",description:"Manuel event ekleme, vardiya dzeltme, soft silme ve audit takibi."}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:[n.jsx(Xs,{label:"alan",employees:Be,value:o.employeeId,onChange:$=>d(qe=>({...qe,employeeId:$})),emptyLabel:"Tm",helperText:"Ad-soyad veya ID ile arayn."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:o.departmentId,onChange:$=>d(qe=>({...qe,departmentId:$.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tm"}),Ct.map($=>n.jsxs("option",{value:$.id,children:["#",$.id," - ",$.name]},$.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang",n.jsx("input",{type:"date",value:o.dateFrom,onChange:$=>d(qe=>({...qe,dateFrom:$.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti",n.jsx("input",{type:"date",value:o.dateTo,onChange:$=>d(qe=>({...qe,dateTo:$.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Event tipi",n.jsx("select",{value:o.eventType,onChange:$=>d(qe=>({...qe,eventType:$.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:L3.map($=>n.jsx("option",{value:$.value,children:$.label},$.value))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Konum",n.jsx("select",{value:o.locationStatus,onChange:$=>d(qe=>({...qe,locationStatus:$.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:D3.map($=>n.jsx("option",{value:$.value,children:$.label},$.value))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Limit",n.jsx("input",{type:"number",value:o.limit,onChange:$=>d(qe=>({...qe,limit:$.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("div",{className:"flex flex-col justify-end gap-2 text-sm text-slate-700",children:[n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:o.duplicatesOnly,onChange:$=>d(qe=>({...qe,duplicatesOnly:$.target.checked}))}),"Sadece mkerrer"]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:o.suspiciousOnly,onChange:$=>d(qe=>({...qe,suspiciousOnly:$.target.checked}))}),"Sadece pheli"]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:o.includeDeleted,onChange:$=>d(qe=>({...qe,includeDeleted:$.target.checked}))}),"Silinenleri gster"]})]})]}),n.jsxs("div",{className:"mt-4 flex gap-2",children:[n.jsx("button",{type:"button",onClick:Wa,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),n.jsx("button",{type:"button",onClick:Dn,className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Manuel Event Ekle"}),n.jsxs("form",{onSubmit:Kt,className:"mt-3 grid gap-3 md:grid-cols-3",children:[n.jsx(Xs,{label:"alan",employees:Be,value:g,onChange:v,emptyLabel:"Seiniz",helperText:"Manuel kayt iin alan sein.",className:"md:col-span-2"}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Event tipi",n.jsxs("select",{value:_,onChange:$=>S($.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"IN",children:"IN (Giri)"}),n.jsx("option",{value:"OUT",children:"OUT (k)"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Tarih/saat",n.jsx("input",{type:"datetime-local",value:w,onChange:$=>E($.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya (opsiyonel)",n.jsxs("select",{value:A,onChange:$=>O($.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Otomatik/bo"}),Bn.map($=>n.jsxs("option",{value:$.id,children:["#",$.id," - ",$.name," (",$.start_time_local,"-",$.end_time_local,")"]},$.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-3",children:["Not",n.jsx("input",{type:"text",value:R,onChange:$=>T($.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 md:col-span-3",children:[n.jsx("input",{type:"checkbox",checked:q,onChange:$=>U($.target.checked)}),"Sra akyorsa duplicate olarak kaydet"]}),n.jsx("div",{className:"md:col-span-3",children:n.jsx("button",{type:"submit",disabled:Vt.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Vt.isPending?"Kaydediliyor...":"Manuel event kaydet"})})]})]}),n.jsxs(Ue,{children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Puantaj Analiz Ozeti"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Secili calisan icin saat bazli net calisma, fazla mesai ve gun tipi kirilimlari."})]}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Ay: ",Rt.getFullYear(),"-",String(Rt.getMonth()+1).padStart(2,"0")]})]}),mt?It.isLoading?n.jsx(Gt,{}):It.isError?n.jsx(Ot,{message:He(It.error,"Puantaj analiz ozeti alinamadi.").message}):n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-5",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Net calisma"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:n.jsx($e,{minutes:pn.workedMinutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Plan ustu sure"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:n.jsx($e,{minutes:pn.planOvertimeMinutes})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[pn.planOvertimeDayCount," gun"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yasal fazla mesai"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:n.jsx($e,{minutes:pn.overtimeMinutes})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[pn.overtimeDayCount," gun"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Calisilan gun"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:pn.workedDayCount}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Hafta ici: ",pn.weekdayWorkedDayCount]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Pazar / Ozel"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[pn.sundayWorkedDayCount," / ",pn.specialWorkedDayCount," gun"]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-600",children:[n.jsxs("p",{children:["Gosterilen satir: ",_e,"-",tt," / ",_t.length]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:["Sayfa basi",n.jsx("select",{value:z,onChange:$=>ne(Number($.target.value)),className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-800",children:L0.map($=>n.jsx("option",{value:$,children:$},$))})]})]}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"min-w-[1100px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Tarih"}),n.jsx("th",{className:"py-2",children:"Gun Tipi"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Giris"}),n.jsx("th",{className:"py-2",children:"Cikis"}),n.jsx("th",{className:"py-2",children:"Calisma"}),n.jsx("th",{className:"py-2",children:"Plan Ustu"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Sure"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"}),n.jsx("th",{className:"py-2",children:"Bayraklar"})]})}),n.jsx("tbody",{children:Qn.map($=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:$.date}),n.jsx("td",{className:"py-2",children:Np($).label}),n.jsx("td",{className:"py-2",children:$.status}),n.jsx("td",{className:"py-2",children:$.in?Gc($.in):"-"}),n.jsx("td",{className:"py-2",children:$.out?Gc($.out):"-"}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:$.worked_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:$.plan_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:$.legal_extra_work_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:$.legal_overtime_minutes})}),n.jsx("td",{className:"py-2 text-xs text-slate-600",children:U3($.flags)})]},$.date))})]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Sayfa ",I," / ",Lt]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>ce($=>Math.max(1,$-1)),disabled:I<=1,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Onceki"}),n.jsx("button",{type:"button",onClick:()=>ce($=>Math.min(Lt,$+1)),disabled:I>=Lt,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Sonraki"})]})]}),_t.length===0?n.jsx("p",{className:"text-sm text-slate-500",children:"Secili aralikta puantaj gun kaydi bulunamadi."}):null]}):n.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Analiz gormek icin filtrelerden bir calisan secin."})]}),n.jsxs(Ue,{children:[n.jsxs("div",{className:"mb-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam kayt"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ct.length})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"pheli kayt"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ct.filter($=>Fh($).length>0).length})]})]}),ht.isLoading?n.jsx(Gt,{}):null,ht.isError?n.jsx(Ot,{message:He(ht.error,"Yoklama kaytlar alnamad.").message}):null,!ht.isLoading&&!ht.isError?n.jsxs("div",{className:"max-h-[66vh] overflow-auto overscroll-contain",children:[n.jsxs("table",{className:"min-w-[1320px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"ID"}),n.jsx("th",{className:"py-2",children:"alan"}),n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Tip"}),n.jsx("th",{className:"py-2",children:"Kaynak"}),n.jsx("th",{className:"py-2",children:"Zaman"}),n.jsx("th",{className:"py-2",children:"Konum"}),n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Not"}),n.jsx("th",{className:"py-2",children:"Bayraklar"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Aksiyon"})]})}),n.jsx("tbody",{children:ct.map($=>{const qe=Fh($),xn=ut.get($.employee_id),pt=xn?.department_id!=null?$t.get(xn.department_id):"-",Fe=$.source==="MANUAL"||$.created_by_admin||au($.flags,"ADMIN_MANUAL"),sn=P0($.flags.SHIFT_ID),yn=typeof $.flags.SHIFT_NAME=="string"?$.flags.SHIFT_NAME:sn&&Dt.get(sn)?Dt.get(sn)?.name:null;return n.jsxs("tr",{className:`border-t border-slate-100 ${qe.length>0?"bg-amber-50/40":""}`,children:[n.jsx("td",{className:"py-2",children:$.id}),n.jsxs("td",{className:"py-2",children:["#",$.employee_id," - ",Nt.get($.employee_id)??"-"]}),n.jsx("td",{className:"py-2",children:pt??"-"}),n.jsx("td",{className:"py-2",children:$.type}),n.jsxs("td",{className:"py-2",children:[Fe?n.jsx("span",{className:"inline-flex rounded-full bg-indigo-100 px-2 py-1 text-[11px] font-semibold text-indigo-700",children:"MANUEL"}):"CHAZ",$.deleted_at?n.jsx("span",{className:"ml-1 inline-flex rounded-full bg-rose-100 px-2 py-1 text-[11px] font-semibold text-rose-700",children:"SLND"}):null]}),n.jsx("td",{className:"py-2",children:Gc($.ts_utc)}),n.jsx("td",{className:"py-2",children:B3($.location_status)}),n.jsx("td",{className:"py-2",children:yn?n.jsxs("span",{children:[yn,sn?` (#${sn})`:""]}):sn?n.jsxs("span",{children:["#",sn]}):"-"}),n.jsx("td",{className:"py-2",children:$.note||"-"}),n.jsx("td",{className:"py-2",children:n.jsx(j_,{reasons:qe})}),n.jsx("td",{className:"py-2",children:n.jsx(N_,{suspicious:qe.length>0,label:"pheli"})}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Gn($),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Dzenle"}),n.jsx("button",{type:"button",onClick:()=>X($),className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50",children:"Soft sil"})]})})]},$.id)})})]}),ct.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Filtreye uygun kayt bulunamad."}):null]}):null]}),n.jsxs(Ue,{children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Audit Log"}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-slate-600",children:["Sayfa basi",n.jsx("select",{value:ue,onChange:$=>Ne(Number($.target.value)),className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-800",children:L0.map($=>n.jsx("option",{value:$,children:$},$))})]})]}),Oe.isLoading?n.jsx(Gt,{}):null,Oe.isError?n.jsx(Ot,{message:He(Oe.error,"Audit loglar alnamad.").message}):null,!Oe.isLoading&&!Oe.isError?n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("p",{className:"text-xs text-slate-600",children:["Gosterilen satir: ",kn,"-",gt," / ",jn]}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"min-w-[980px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Zaman"}),n.jsx("th",{className:"py-2",children:"Aksiyon"}),n.jsx("th",{className:"py-2",children:"Kullanc"}),n.jsx("th",{className:"py-2",children:"Entity"}),n.jsx("th",{className:"py-2",children:"Durum"})]})}),n.jsx("tbody",{children:dn.map($=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:Gc($.ts_utc)}),n.jsx("td",{className:"py-2",children:$.action}),n.jsxs("td",{className:"py-2",children:[$.actor_type,":",$.actor_id]}),n.jsxs("td",{className:"py-2",children:[$.entity_type??"-"," ",$.entity_id?`#${$.entity_id}`:""]}),n.jsx("td",{className:"py-2",children:$.success?"Baarl":"Hatal"})]},$.id))})]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Sayfa ",Re," / ",et]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Le($=>Math.max(1,$-1)),disabled:Re<=1,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Onceki"}),n.jsx("button",{type:"button",onClick:()=>Le($=>Math.min(et,$+1)),disabled:Re>=et,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Sonraki"})]})]}),dn.length===0?n.jsx("p",{className:"text-sm text-slate-500",children:"Audit kaydi bulunamadi."}):null]}):null]}),n.jsx(Js,{open:D!==null,title:D?`Event #${D.id} dzenle`:"Event dzenle",onClose:()=>G(null),children:n.jsxs("form",{onSubmit:es,className:"space-y-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Event tipi",n.jsxs("select",{value:Y,onChange:$=>ee($.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"IN",children:"IN (Giri)"}),n.jsx("option",{value:"OUT",children:"OUT (k)"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Tarih/saat",n.jsx("input",{type:"datetime-local",value:H,onChange:$=>te($.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya (opsiyonel)",n.jsxs("select",{value:ye,onChange:$=>de($.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Deitirme"}),Pt.map($=>n.jsxs("option",{value:$.id,children:["#",$.id," - ",$.name," (",$.start_time_local,"-",$.end_time_local,")"]},$.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Not",n.jsx("input",{type:"text",value:J,onChange:$=>fe($.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:Se,onChange:$=>oe($.target.checked)})," Sra akyorsa duplicate olarak gncelle"]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:le,onChange:$=>Q($.target.checked)})," Manuel olmayan kaytlarda zorla dzenle"]}),n.jsx("button",{type:"submit",disabled:ae.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:ae.isPending?"Kaydediliyor...":"Kaydet"})]})}),n.jsx(Js,{open:K!==null,title:K?`Event #${K.id} soft sil`:"Event soft sil",onClose:()=>X(null),children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm text-slate-700",children:"Kayt hard delete edilmez, soft delete olarak iaretlenir."}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:ke,onChange:$=>je($.target.checked)})," Manuel olmayan kaytlarda zorla sil"]}),n.jsx("button",{type:"button",onClick:()=>K&&Ee.mutate({eventId:K.id,force:ke}),disabled:Ee.isPending,className:"btn-danger rounded-lg bg-rose-600 px-4 py-2 text-sm font-semibold text-white hover:bg-rose-700 disabled:opacity-60",children:Ee.isPending?"Siliniyor...":"Soft sil"})]})})]})}const q3=Xa({employee_id:Kn().int().positive(),expires_in_minutes:Kn().int().positive().max(1440)});function Vc(e){return e?new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"short"}).format(new Date(e)):"-"}function I0(e,s){return`${new Intl.DateTimeFormat("tr-TR",{month:"long"}).format(new Date(Date.UTC(e,s-1,1)))} ${e}`}function Z3(e){return e==="FINISHED"?"status-badge status-badge-ok":e==="IN_PROGRESS"?"status-badge status-badge-pending":"status-badge status-badge-neutral"}function H3(){const e=na(),[s,l]=b.useState(""),[o,d]=b.useState("30"),[m,f]=b.useState(null),[g,v]=b.useState(null),_=Qe({queryKey:["departments"],queryFn:ji}),S=Qe({queryKey:["employees"],queryFn:()=>Ms({status:"active"})}),w=Qe({queryKey:["devices"],queryFn:QA}),E=Qe({queryKey:["leaves","dashboard"],queryFn:()=>g_({})}),R=Qe({queryKey:["attendance-events","dashboard"],queryFn:()=>bp({limit:8})}),T=Qe({queryKey:["dashboard-employee-snapshot",s],queryFn:()=>GA({employee_id:Number(s)}),enabled:!!s,staleTime:2e4}),A=Je({mutationFn:y_,onSuccess:H=>{f({token:H.token,invite_url:H.invite_url}),v(null),e.invalidateQueries({queryKey:["devices"]})},onError:H=>{v(N3(H,"Claim token olusturulamadi."))}}),O=()=>{f(null),v(null);const H=q3.safeParse({employee_id:s,expires_in_minutes:o});if(!H.success){v(H.error.issues[0]?.message??"Form alanlarini kontrol et.");return}A.mutate(H.data)},q=_.data??[],U=S.data??[],D=w.data??[],G=E.data??[],Y=R.data??[],ee=b.useMemo(()=>U.find(H=>String(H.id)===s)??null,[U,s]);return _.isLoading||S.isLoading||w.isLoading||E.isLoading||R.isLoading?n.jsx(Gt,{}):_.isError||S.isError||w.isError||E.isError||R.isError?n.jsx(Ot,{message:"Dashboard verileri alinamadi."}):n.jsxs("div",{className:"space-y-6",children:[n.jsx(Xn,{title:"Genel Bakis",description:"Calisan odakli claim token operasyonu ve anlik puantaj gorunumu."}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs(Ue,{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Departman"}),n.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:q.length})]}),n.jsxs(Ue,{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Calisan"}),n.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:U.length})]}),n.jsxs(Ue,{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Cihaz"}),n.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:D.length})]}),n.jsxs(Ue,{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Izin Kaydi"}),n.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:G.length})]})]}),n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[1.05fr_1.3fr]",children:[n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Claim Token Uretimi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Calisan adi veya ID secip employee claim URL olustur."}),n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsx(Xs,{label:"Calisan",employees:U,value:s,onChange:l,placeholder:"Calisan adi veya #ID",helperText:"Tek bir calisan secildiginde dashboard ozet kartlari otomatik dolar."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Token suresi (dakika)",n.jsx("input",{value:o,onChange:H=>d(H.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"30"})]})]}),ee?n.jsxs("div",{className:"mt-3 rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:[n.jsxs("p",{children:["Secili: #",ee.id," - ",ee.full_name]}),n.jsxs("p",{children:["Departman: ",ee.department_id??"-"]})]}):null,n.jsx("button",{type:"button",onClick:O,disabled:A.isPending||!s,className:"mt-4 rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:A.isPending?"Olusturuluyor...":"Claim Token Olustur"}),m?n.jsxs("div",{className:"mt-3 rounded-lg border border-emerald-200 bg-emerald-50 p-3 text-sm text-emerald-700",children:[n.jsxs("p",{className:"font-semibold",children:["Token: ",m.token]}),n.jsxs("p",{className:"mt-1 break-all",children:["URL: ",m.invite_url]})]}):null,g?n.jsx("div",{className:"form-validation",children:g}):null]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Calisan Canli Ozet"}),s?null:n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Bir calisan secildiginde bu ay/gecen ay mesai, cihaz ve konum bilgisi gorunur."}),s&&T.isLoading?n.jsx(Gt,{label:"Calisan ozeti yukleniyor..."}):null,s&&T.isError?n.jsx(Ot,{message:"Calisan ozeti alinamadi."}):null,T.data?n.jsxs("div",{className:"mt-3 space-y-4 text-sm",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:Z3(T.data.today_status),children:T.data.today_status}),n.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs text-slate-700",children:["Aktif cihaz: ",T.data.active_devices,"/",T.data.total_devices]}),n.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs text-slate-700",children:["Son guncelleme: ",Vc(T.data.generated_at_utc)]})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:I0(T.data.current_month.year,T.data.current_month.month)}),n.jsxs("p",{className:"mt-2 text-xs text-slate-600",children:["Toplam net sure: ",n.jsx($e,{minutes:T.data.current_month.worked_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Plan ustu sure: ",n.jsx($e,{minutes:T.data.current_month.plan_overtime_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla sure: ",n.jsx($e,{minutes:T.data.current_month.extra_work_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla mesai: ",n.jsx($e,{minutes:T.data.current_month.overtime_minutes})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:I0(T.data.previous_month.year,T.data.previous_month.month)}),n.jsxs("p",{className:"mt-2 text-xs text-slate-600",children:["Toplam net sure: ",n.jsx($e,{minutes:T.data.previous_month.worked_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Plan ustu sure: ",n.jsx($e,{minutes:T.data.previous_month.plan_overtime_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla sure: ",n.jsx($e,{minutes:T.data.previous_month.extra_work_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla mesai: ",n.jsx($e,{minutes:T.data.previous_month.overtime_minutes})]})]})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Son Puantaj Olayi"}),T.data.last_event?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"mt-2 text-xs text-slate-700",children:["Tip: ",T.data.last_event.event_type]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-700",children:["Zaman: ",Vc(T.data.last_event.ts_utc)]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-700",children:["Konum: ",T.data.last_event.location_status]})]}):n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Kayit bulunamadi."})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Son Konum"}),T.data.latest_location?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"mt-2 text-xs text-slate-700",children:["Lat/Lon: ",T.data.latest_location.lat.toFixed(6),", ",T.data.latest_location.lon.toFixed(6)]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-700",children:["Zaman: ",Vc(T.data.latest_location.ts_utc)]})]}):n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Konum verisi yok."})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Cihazlar"}),T.data.devices.length===0?n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Cihaz kaydi bulunamadi."}):n.jsx("div",{className:"mt-2 space-y-1 text-xs text-slate-700",children:T.data.devices.slice(0,8).map(H=>n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded border border-slate-100 px-2 py-1",children:[n.jsxs("span",{children:["#",H.id," - ",H.device_fingerprint]}),n.jsx("span",{className:H.is_active?"status-badge status-badge-ok":"status-badge status-badge-danger",children:H.is_active?"AKTIF":"PASIF"})]},H.id))})]})]}):null]})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Son Attendance Eventleri"}),n.jsx("div",{className:"mt-4 list-scroll-area",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"ID"}),n.jsx("th",{className:"py-2",children:"Calisan"}),n.jsx("th",{className:"py-2",children:"Tip"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Zaman"})]})}),n.jsx("tbody",{children:Y.map(H=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:H.id}),n.jsx("td",{className:"py-2",children:H.employee_id}),n.jsx("td",{className:"py-2",children:H.type}),n.jsx("td",{className:"py-2",children:H.location_status}),n.jsx("td",{className:"py-2",children:Vc(H.ts_utc)})]},H.id))})]})})]})]})}function K3(e,s){const l=window.URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=s,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l)}function Q3(){const e=new Date,{pushToast:s}=ha(),l={year:String(e.getFullYear()),month:String(e.getMonth()+1),departmentId:"",includeInactive:!1},[o,d]=b.useState(l),[m,f]=b.useState(l),[g,v]=b.useState(!1),_=Qe({queryKey:["departments"],queryFn:ji}),S=Number(m.year),w=Number(m.month),E=Number(m.departmentId),R=Number.isFinite(S)&&S>0&&Number.isFinite(w)&&w>=1&&w<=12,T=Qe({queryKey:["department-summary",S,w,m.departmentId||"all",m.includeInactive?"with-inactive":"active-only"],queryFn:()=>a3({year:S,month:w,department_id:Number.isFinite(E)&&E>0?E:void 0,include_inactive:m.includeInactive}),enabled:R}),A=T.data??[],O=b.useMemo(()=>A.reduce((Y,ee)=>(Y.worked+=ee.worked_minutes,Y.planOvertime+=ee.plan_overtime_minutes,Y.legalExtra+=ee.legal_extra_work_minutes,Y.legalOvertime+=ee.legal_overtime_minutes,Y.employeeCount+=ee.employee_count,Y),{worked:0,planOvertime:0,legalExtra:0,legalOvertime:0,employeeCount:0}),[A]),q=b.useMemo(()=>{const Y=[`Yl: ${m.year}`,`Ay: ${m.month}`];if(m.departmentId){const ee=_.data?.find(H=>H.id===Number(m.departmentId));Y.push(`Departman: ${ee?.name??m.departmentId}`)}return m.includeInactive&&Y.push("Arivdekiler dahil"),Y},[m,_.data]),U=()=>f({...o}),D=()=>{d(l),f(l)},G=async()=>{if(!R){s({variant:"error",title:"Filtre hatas",description:"Excel indirmek iin geerli yl ve ay sein."});return}try{v(!0);const Y=Number.isFinite(E)&&E>0?await d3({department_id:E,year:S,month:w,include_inactive:m.includeInactive}):await m3({year:S,month:w,include_inactive:m.includeInactive}),ee=Number.isFinite(E)&&E>0?`department-${E}`:"all";K3(Y,`puantaj-${ee}-${S}-${String(w).padStart(2,"0")}.xlsx`)}catch(Y){s({variant:"error",title:"Excel indirilemedi",description:He(Y,"Dosya oluturulamad.").message})}finally{v(!1)}};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"Departman Aylk zeti",description:"Departman baznda aylk toplam alma, plan st sre ve yasal fazla mesai deerlerini karlatrn.",action:n.jsx("button",{type:"button",onClick:()=>{G()},disabled:g,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:g?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner inline-spinner-dark","aria-hidden":"true"}),"Hazrlanyor..."]}):"Excel ndir"})}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Yl",n.jsx("input",{type:"number",value:o.year,onChange:Y=>d(ee=>({...ee,year:Y.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",n.jsx("input",{type:"number",value:o.month,onChange:Y=>d(ee=>({...ee,month:Y.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Departman",n.jsxs("select",{value:o.departmentId,onChange:Y=>d(ee=>({...ee,departmentId:Y.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",disabled:_.isLoading,children:[n.jsx("option",{value:"",children:"Tm"}),(_.data??[]).map(Y=>n.jsxs("option",{value:Y.id,children:["#",Y.id," - ",Y.name]},Y.id))]})]})]}),n.jsxs("label",{className:"mt-3 inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:o.includeInactive,onChange:Y=>d(ee=>({...ee,includeInactive:Y.target.checked}))}),"Arivdeki alanlar dahil et"]}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:U,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),n.jsx("button",{type:"button",onClick:D,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:q.map(Y=>n.jsx("span",{className:"inline-flex rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:Y},Y))})]}),R?null:n.jsx(Ot,{message:"Yl ve ay deerleri geersiz."}),T.isLoading?n.jsx(Gt,{}):null,T.isError?n.jsx(Ot,{message:He(T.error,"Departman zeti alnamad.").message}):null,!T.isLoading&&!T.isError?n.jsxs(n.Fragment,{children:[n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Toplamlar"}),n.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 xl:grid-cols-5",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam alma"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:O.worked})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Plan st Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:O.planOvertime})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Yasal Fazla Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:O.legalExtra})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Yasal Fazla Mesai"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:O.legalOvertime})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam alan Says"}),n.jsx("p",{className:"text-lg font-semibold",children:O.employeeCount})]})]})]}),A.length===0?n.jsx(Ue,{children:n.jsx("p",{className:"text-sm text-slate-600",children:"Seilen filtrede departman zeti bulunamad."})}):n.jsx(Ue,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"alan Says"}),n.jsx("th",{className:"py-2",children:"Toplam alma"}),n.jsx("th",{className:"py-2",children:"Plan st"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Sre"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"})]})}),n.jsx("tbody",{children:A.map(Y=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsxs("td",{className:"py-2",children:["#",Y.department_id," - ",Y.department_name]}),n.jsx("td",{className:"py-2",children:Y.employee_count}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:Y.worked_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:Y.plan_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:Y.legal_extra_work_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:Y.legal_overtime_minutes})})]},Y.department_id))})]})})})]}):null]})}function _i({value:e,onChange:s,placeholder:l="Isme gore ara..."}){return n.jsxs("label",{className:"block text-sm text-slate-700",children:["Ara",n.jsx("input",{value:e,onChange:o=>s(o.target.value),placeholder:l,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring"})]})}const B0=Xa({name:da().min(2,"Departman adi en az 2 karakter olmali.").max(255),region_id:xd([Kn().int().positive(),Df()])});function U0(e){if(fn.isAxiosError(e)&&e.response?.status===409)return"Bu departman adi zaten mevcut. Lutfen farkli bir ad girin.";const s=He(e,"Departman olusturulamadi.");return s.message.toLowerCase().includes("department name already exists")?"Bu departman adi zaten mevcut. Lutfen farkli bir ad girin.":s.message}function G3(){const e=na(),{pushToast:s}=ha(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState(!1),[S,w]=b.useState(""),[E,R]=b.useState(null),[T,A]=b.useState(""),[O,q]=b.useState(""),[U,D]=b.useState(null),G=Qe({queryKey:["departments",S],queryFn:()=>XC(S?{region_id:Number(S)}:void 0)}),Y=Qe({queryKey:["regions","departments-page"],queryFn:()=>Xl({include_inactive:!0})}),ee=Je({mutationFn:WC,onSuccess:oe=>{o(""),m(""),D(null),_(!1),s({variant:"success",title:"Departman olusturuldu",description:`${oe.name} basariyla eklendi.`}),e.invalidateQueries({queryKey:["departments"]})},onError:oe=>{const le=U0(oe);D(le),s({variant:"error",title:"Departman olusturulamadi",description:le})}}),H=Je({mutationFn:({departmentId:oe,name:le,regionIdValue:Q})=>eA(oe,{name:le,region_id:Q}),onSuccess:oe=>{D(null),R(null),A(""),q(""),s({variant:"success",title:"Departman guncellendi",description:`${oe.name} basariyla guncellendi.`}),e.invalidateQueries({queryKey:["departments"]})},onError:oe=>{const le=U0(oe);D(le),s({variant:"error",title:"Departman guncellenemedi",description:le})}}),te=oe=>{oe.preventDefault(),D(null);const le=d.trim()===""?null:Number(d),Q=B0.safeParse({name:l,region_id:le});if(!Q.success){const K=Q.error.issues[0]?.message??"Departman alanlarini kontrol edin.";D(K),s({variant:"error",title:"Form hatasi",description:K});return}ee.mutate({name:Q.data.name,region_id:Q.data.region_id})},J=oe=>{if(oe.preventDefault(),D(null),!E)return;const le=O.trim()===""?null:Number(O),Q=B0.safeParse({name:T,region_id:le});if(!Q.success){const K=Q.error.issues[0]?.message??"Departman alanlarini kontrol edin.";D(K),s({variant:"error",title:"Form hatasi",description:K});return}H.mutate({departmentId:E,name:Q.data.name,regionIdValue:Q.data.region_id})},fe=G.data??[],ye=Y.data??[],de=b.useMemo(()=>new Map(ye.map(oe=>[oe.id,oe.name])),[ye]),Se=b.useMemo(()=>{const oe=f.trim().toLowerCase();return oe?fe.filter(le=>le.name.toLowerCase().includes(oe)):fe},[fe,f]);return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"Departmanlar",description:"Departman kayitlarini bolge bazli olarak yonetin.",action:n.jsx("button",{type:"button",onClick:()=>_(oe=>!oe),className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Yeni Departman"})}),v?n.jsxs(Ue,{children:[n.jsxs("form",{onSubmit:te,className:"grid gap-3 md:grid-cols-3 md:items-end",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Departman adi",n.jsx("input",{value:l,onChange:oe=>o(oe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Insan Kaynaklari"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge",n.jsxs("select",{value:d,onChange:oe=>m(oe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Bolge yok"}),ye.map(oe=>n.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),n.jsxs("div",{className:"flex gap-2 md:col-span-3",children:[n.jsx("button",{type:"submit",disabled:ee.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:ee.isPending?"Kaydediliyor...":"Kaydet"}),n.jsx("button",{type:"button",onClick:()=>{_(!1),D(null)},className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),U?n.jsx("div",{className:"form-validation",children:U}):null]}):null,E?n.jsxs(Ue,{children:[n.jsxs("form",{onSubmit:J,className:"grid gap-3 md:grid-cols-3 md:items-end",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Departman adi",n.jsx("input",{value:T,onChange:oe=>A(oe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge",n.jsxs("select",{value:O,onChange:oe=>q(oe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Bolge yok"}),ye.map(oe=>n.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),n.jsxs("div",{className:"flex gap-2 md:col-span-3",children:[n.jsx("button",{type:"submit",disabled:H.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:H.isPending?"Guncelleniyor...":"Guncelle"}),n.jsx("button",{type:"button",onClick:()=>{R(null),A(""),q(""),D(null)},className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),U?n.jsx("div",{className:"form-validation",children:U}):null]}):null,G.isLoading||Y.isLoading?n.jsx(Gt,{}):null,G.isError||Y.isError?n.jsx(Ot,{message:"Departman verileri alinamadi."}):null,!G.isLoading&&!G.isError&&!Y.isLoading&&!Y.isError?n.jsxs(Ue,{children:[n.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-3",children:[n.jsx(_i,{value:f,onChange:g,placeholder:"Departman adina gore ara..."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge filtresi",n.jsxs("select",{value:S,onChange:oe=>w(oe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tum bolgeler"}),ye.map(oe=>n.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman ID"}),n.jsx("th",{className:"py-2",children:"Departman Adi"}),n.jsx("th",{className:"py-2",children:"Bolge"}),n.jsx("th",{className:"py-2",children:"Islem"})]})}),n.jsx("tbody",{children:Se.map(oe=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:oe.id}),n.jsx("td",{className:"py-2",children:oe.name}),n.jsx("td",{className:"py-2",children:oe.region_name??(oe.region_id?de.get(oe.region_id):"-")??"-"}),n.jsx("td",{className:"py-2",children:n.jsx("button",{type:"button",onClick:()=>{R(oe.id),A(oe.name),q(oe.region_id?String(oe.region_id):""),D(null)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"})})]},oe.id))})]})}),Se.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Arama kriterine uygun departman bulunamadi."}):null]}):null]})}function cr({value:e}){const s=e.toUpperCase();return s==="OK"||s==="AKTIF"||s==="APPROVED"?n.jsx("span",{className:"status-badge status-badge-ok",children:e}):s==="INCOMPLETE"?n.jsx("span",{className:"status-badge status-badge-incomplete",children:"INCOMPLETE"}):s==="LEAVE"?n.jsx("span",{className:"status-badge status-badge-leave",children:"LEAVE"}):s==="OFF"?n.jsx("span",{className:"status-badge status-badge-neutral",children:"OFF"}):s==="PENDING"?n.jsx("span",{className:"status-badge status-badge-pending",children:"PENDING"}):s==="REJECTED"||s==="PASIF"?n.jsx("span",{className:"status-badge status-badge-danger",children:e}):n.jsx("span",{className:"status-badge status-badge-neutral",children:e})}function Zh(e){return e?new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"short"}).format(new Date(e)):"-"}function V3(e){return e==="ACTIVE"?"Aktif":"Kullanildi/Suresi Doldu"}function $3(){const e=na(),{pushToast:s}=ha(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(!0),[v,_]=b.useState(""),[S,w]=b.useState(1),[E,R]=b.useState(50),[T,A]=b.useState(null),[O,q]=b.useState(null),U=l?Number(l):void 0,D=U?0:(S-1)*E,G=Qe({queryKey:["employee-device-overview-summary",U??null,d,f,v,S,E],queryFn:()=>z0({employee_id:U,region_id:d?Number(d):void 0,include_inactive:f,q:v.trim()||void 0,offset:D,limit:U?1:E,device_limit:1})}),Y=Qe({queryKey:["employee-device-overview-detail",T],enabled:T!==null,queryFn:()=>z0({employee_id:T??void 0,include_inactive:!0,include_recovery_secrets:!0,offset:0,limit:1,device_limit:100})}),ee=Qe({queryKey:["employees","all-for-devices"],queryFn:()=>Ms({include_inactive:!0,status:"all"})}),H=Qe({queryKey:["regions","devices-page"],queryFn:()=>Xl({include_inactive:!0})}),te=Je({mutationFn:({deviceId:le,isActive:Q})=>e3(le,{is_active:Q}),onSuccess:le=>{s({variant:"success",title:le.is_active?"Cihaz aktif edildi":"Cihaz pasife alnd",description:`Cihaz #${le.id} durumu gncellendi.`}),e.invalidateQueries({queryKey:["employee-device-overview-summary"]}),e.invalidateQueries({queryKey:["employee-device-overview-detail"]})},onError:le=>{s({variant:"error",title:"Cihaz durumu gncellenemedi",description:He(le,"lem baarsz.").message})}}),J=ee.data??[],fe=H.data??[],ye=G.data??[],de=Y.data?.[0],Se=!U&&ye.length===E,oe=!U&&S>1;return G.isLoading||ee.isLoading||H.isLoading?n.jsx(Gt,{}):G.isError?n.jsx(Ot,{message:He(G.error,"Cihaz verisi alnamad.").message}):ee.isError?n.jsx(Ot,{message:He(ee.error,"alan listesi alnamad.").message}):H.isError?n.jsx(Ot,{message:He(H.error,"Bolge listesi alinamadi.").message}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"Cihazlar ve Token Takibi",description:"Youn kullanm iin optimize edilmi liste grnm. Satrdan detay ap cihazlar ynetin."}),n.jsxs(Ue,{children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-5 md:items-end",children:[n.jsx(Xs,{label:"alan filtresi",employees:J,value:l,onChange:le=>{o(le),w(1),A(null)},emptyLabel:"Tm",helperText:"Ad-soyad veya ID ile filtreleyin."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["zet arama",n.jsx("input",{type:"text",value:v,onChange:le=>{_(le.target.value),w(1),A(null)},placeholder:"alan ad veya ID",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Sayfa boyutu",n.jsxs("select",{value:E,onChange:le=>{R(Number(le.target.value)),w(1),A(null)},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge filtresi",n.jsxs("select",{value:d,onChange:le=>{m(le.target.value),w(1),A(null)},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tum bolgeler"}),fe.map(le=>n.jsx("option",{value:le.id,children:le.name},le.id))]})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:f,onChange:le=>{g(le.target.checked),w(1),A(null)}}),"Pasif alanlar gster"]})]}),U?null:n.jsxs("div",{className:"mt-3 flex items-center justify-end gap-2",children:[n.jsx("button",{type:"button",disabled:!oe,onClick:()=>{w(le=>Math.max(1,le-1)),A(null)},className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"nceki"}),n.jsxs("span",{className:"text-xs text-slate-500",children:["Sayfa ",S]}),n.jsx("button",{type:"button",disabled:!Se,onClick:()=>{w(le=>le+1),A(null)},className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}),n.jsxs(Ue,{children:[n.jsx("div",{className:"max-h-[68vh] overflow-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"sticky top-0 z-10 bg-white text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2",children:"alan"}),n.jsx("th",{className:"px-2 py-2",children:"Departman"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Cihaz"}),n.jsx("th",{className:"px-2 py-2",children:"Token"}),n.jsx("th",{className:"px-2 py-2 text-right",children:"lem"})]})}),n.jsx("tbody",{children:ye.map(le=>{const Q=T===le.employee_id;return n.jsxs(b.Fragment,{children:[n.jsxs("tr",{className:"border-t border-slate-100 align-top hover:bg-slate-50/60",children:[n.jsx("td",{className:"px-2 py-2",children:n.jsxs("div",{className:"font-medium text-slate-900",children:["#",le.employee_id," - ",le.employee_name]})}),n.jsx("td",{className:"px-2 py-2 text-xs text-slate-600",children:le.department_name??le.department_id??"-"}),n.jsx("td",{className:"px-2 py-2",children:n.jsx(cr,{value:le.is_employee_active?"Aktif":"Pasif"})}),n.jsxs("td",{className:"px-2 py-2 text-xs text-slate-700",children:[n.jsx("span",{className:"font-semibold",children:le.active_devices})," aktif / ",le.total_devices," toplam"]}),n.jsxs("td",{className:"px-2 py-2 text-xs text-slate-700",children:["K:",le.token_used," B:",le.token_pending," D:",le.token_expired," T:",le.token_total]}),n.jsx("td",{className:"px-2 py-2 text-right",children:n.jsx("button",{type:"button",onClick:()=>{A(K=>K===le.employee_id?null:le.employee_id)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:Q?"Kapat":"Cihazlar Ynet"})})]}),Q?n.jsx("tr",{className:"border-t border-slate-100 bg-slate-50/70",children:n.jsx("td",{colSpan:6,className:"px-2 py-3",children:Y.isLoading?n.jsx("p",{className:"text-xs text-slate-500",children:"Cihaz listesi ykleniyor..."}):Y.isError?n.jsx("p",{className:"text-xs text-rose-700",children:"Cihaz detaylar alnamad."}):de?n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full text-left text-xs",children:[n.jsx("thead",{className:"uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Cihaz ID"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Fingerprint"}),n.jsx("th",{className:"py-2",children:"Recovery"}),n.jsx("th",{className:"py-2",children:"Oluturulma"}),n.jsx("th",{className:"py-2 text-right",children:"lem"})]})}),n.jsx("tbody",{children:de.devices.map(K=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:K.id}),n.jsx("td",{className:"py-2",children:n.jsx(cr,{value:K.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2 font-mono",children:K.device_fingerprint}),n.jsx("td",{className:"py-2 text-[11px] text-slate-700",children:K.recovery_ready?n.jsxs("span",{className:"rounded-full bg-emerald-100 px-2 py-1 font-semibold text-emerald-700",children:["Hazir (",K.recovery_code_active_count,")"]}):n.jsx("span",{className:"rounded-full bg-amber-100 px-2 py-1 font-semibold text-amber-700",children:"Kurulu Degil"})}),n.jsx("td",{className:"py-2",children:Zh(K.created_at)}),n.jsx("td",{className:"py-2 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>q(K),className:"rounded-lg border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",children:"Detay"}),n.jsx("button",{type:"button",disabled:te.isPending,onClick:()=>te.mutate({deviceId:K.id,isActive:!K.is_active}),className:`rounded-lg px-2 py-1 text-[11px] font-semibold text-white ${K.is_active?"bg-rose-600 hover:bg-rose-700":"bg-emerald-600 hover:bg-emerald-700"} disabled:cursor-not-allowed disabled:opacity-60`,children:K.is_active?"Pasife Al":"Aktif Et"})]})})]},K.id))})]}),de.has_more_devices?n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Bu alan iin daha fazla cihaz var. lk 100 cihaz gsteriliyor."}):null,de.devices.length===0?n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Bu alana bal cihaz yok."}):null]}):n.jsx("p",{className:"text-xs text-slate-500",children:"Cihaz detay bulunamad."})})}):null]},le.employee_id)})})]})}),ye.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Seilen filtreye uygun alan veya cihaz kayd yok."}):null]}),n.jsx(Js,{open:O!==null,title:O?`Cihaz #${O.id} Recovery Detayi`:"Recovery Detayi",onClose:()=>q(null),children:O?n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Fingerprint"}),n.jsx("p",{className:"mt-1 break-all font-mono text-xs text-slate-800",children:O.device_fingerprint})]}),n.jsxs("div",{className:"grid gap-2 rounded-lg border border-slate-200 p-3 sm:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recovery Durumu"}),n.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:O.recovery_ready?"Hazir":"Kurulu Degil"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Aktif Kod"}),n.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:O.recovery_code_active_count})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"PIN Son Guncelleme"}),n.jsx("p",{className:"mt-1 text-slate-800",children:Zh(O.recovery_pin_updated_at)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Kod Son Gecerlilik"}),n.jsx("p",{className:"mt-1 text-slate-800",children:Zh(O.recovery_expires_at)})]})]}),n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-rose-700",children:"Recovery PIN"}),n.jsx("p",{className:"mt-1 font-mono text-lg font-semibold text-rose-900",children:O.recovery_pin_plain??"-"})]}),O.recovery_code_entries.length>0?n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recovery Kodlari"}),n.jsx("div",{className:"mt-2 space-y-2",children:O.recovery_code_entries.map(le=>n.jsxs("div",{className:"flex items-center justify-between rounded border border-slate-200 px-3 py-2",children:[n.jsx("span",{className:"font-mono text-slate-900",children:le.code}),n.jsx("span",{className:`rounded-full px-2 py-1 text-[11px] font-semibold ${le.status==="ACTIVE"?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:V3(le.status)})]},`${O.id}-${le.code}`))})]}):n.jsx("p",{className:"text-xs text-slate-500",children:"Bu cihaz icin kayitli recovery kodu bulunamadi."})]}):null})]})}function Y3(){const e=na(),{pushToast:s}=ha(),l=Qe({queryKey:["compliance-settings"],queryFn:l3}),[o,d]=b.useState({name:"TR_DEFAULT",weekly_normal_minutes_default:2700,daily_max_minutes:660,enforce_min_break_rules:!1,night_work_max_minutes_default:450,night_work_exceptions_note_enabled:!0,overtime_annual_cap_minutes:16200,overtime_premium:1.5,extra_work_premium:1.25,overtime_rounding_mode:"OFF"});b.useEffect(()=>{l.data&&d({name:l.data.name,weekly_normal_minutes_default:l.data.weekly_normal_minutes_default,daily_max_minutes:l.data.daily_max_minutes,enforce_min_break_rules:l.data.enforce_min_break_rules,night_work_max_minutes_default:l.data.night_work_max_minutes_default,night_work_exceptions_note_enabled:l.data.night_work_exceptions_note_enabled,overtime_annual_cap_minutes:l.data.overtime_annual_cap_minutes,overtime_premium:l.data.overtime_premium,extra_work_premium:l.data.extra_work_premium,overtime_rounding_mode:l.data.overtime_rounding_mode})},[l.data]);const m=Je({mutationFn:o3,onSuccess:()=>{s({variant:"success",title:"Uyumluluk ayarlari guncellendi",description:"Yasal puantaj hesaplama parametreleri kaydedildi."}),e.invalidateQueries({queryKey:["compliance-settings"]}),e.invalidateQueries({queryKey:["employee-monthly"]})},onError:f=>{s({variant:"error",title:"Kayit hatasi",description:He(f,"Ayarlar kaydedilemedi.").message})}});return l.isLoading?n.jsx(Gt,{}):l.isError?n.jsx(Ot,{message:He(l.error,"Uyumluluk ayarlari alinamadi.").message}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"Uyumluluk Ayarlar",description:"Turk is kanunu varsayimlarini yonetmek iin bu ayarlari kullanin."}),n.jsx(Ue,{children:n.jsxs("form",{className:"grid gap-3 md:grid-cols-2",onSubmit:f=>{f.preventDefault(),m.mutate(o)},children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Profil Adi",n.jsx("input",{value:o.name,onChange:f=>d(g=>({...g,name:f.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Haftalik Normal Sure (dk)",n.jsx("input",{type:"number",min:1,value:o.weekly_normal_minutes_default,onChange:f=>d(g=>({...g,weekly_normal_minutes_default:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gnlk Azami Sure (dk)",n.jsx("input",{type:"number",min:1,value:o.daily_max_minutes,onChange:f=>d(g=>({...g,daily_max_minutes:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gece Azami Sure (dk)",n.jsx("input",{type:"number",min:1,value:o.night_work_max_minutes_default,onChange:f=>d(g=>({...g,night_work_max_minutes_default:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yillik Fazla Mesai Limiti (dk)",n.jsx("input",{type:"number",min:1,value:o.overtime_annual_cap_minutes,onChange:f=>d(g=>({...g,overtime_annual_cap_minutes:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Fazla Mesai Carpani",n.jsx("input",{type:"number",min:1,step:"0.01",value:o.overtime_premium,onChange:f=>d(g=>({...g,overtime_premium:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ek Calisma Carpani",n.jsx("input",{type:"number",min:1,step:"0.01",value:o.extra_work_premium,onChange:f=>d(g=>({...g,extra_work_premium:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Fazla Mesai Yuvarlama",n.jsxs("select",{value:o.overtime_rounding_mode,onChange:f=>d(g=>({...g,overtime_rounding_mode:f.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"OFF",children:"OFF"}),n.jsx("option",{value:"REG_HALF_HOUR",children:"REG_HALF_HOUR"})]})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 md:col-span-2",children:[n.jsx("input",{type:"checkbox",checked:o.enforce_min_break_rules,onChange:f=>d(g=>({...g,enforce_min_break_rules:f.target.checked}))}),"Asgari mola kurallarini uygula (Is Kanunu madde 68)"]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 md:col-span-2",children:[n.jsx("input",{type:"checkbox",checked:o.night_work_exceptions_note_enabled,onChange:f=>d(g=>({...g,night_work_exceptions_note_enabled:f.target.checked}))}),"Gece calisma istisna notu bayragini aktif tut"]}),n.jsx("div",{className:"md:col-span-2",children:n.jsx("button",{type:"submit",disabled:m.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:m.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Kaydediliyor..."]}):"Ayarlar Kaydet"})})]})}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Hizli zet"}),n.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Haftalik normal sure"}),n.jsx("p",{className:"font-semibold",children:n.jsx($e,{minutes:o.weekly_normal_minutes_default})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Gnlk ust sinir"}),n.jsx("p",{className:"font-semibold",children:n.jsx($e,{minutes:o.daily_max_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yillik fazla mesai limiti"}),n.jsx("p",{className:"font-semibold",children:n.jsx($e,{minutes:o.overtime_annual_cap_minutes})})]})]})]})]})}const J3=Xa({username:da().min(1,"Kullanici adi gerekli."),password:da().min(1,"Sifre gerekli.")});function X3(e,s){const l=window.URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=s,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l)}function W3(e){return e.code==="INVALID_CREDENTIALS"?"Sifre dogrulanamadi":e.code==="TOO_MANY_ATTEMPTS"?"Cok fazla deneme":e.code==="INTERNAL_ERROR"?"Sunucu hatasi":"Indirme basarisiz"}function eM(){const[e]=mu(),[s,l]=b.useState("admin"),[o,d]=b.useState(""),[m,f]=b.useState(null),[g,v]=b.useState(null),[_,S]=b.useState(!1),w=b.useMemo(()=>{const R=e.get("archive_id");if(!R)return null;const T=Number(R);return!Number.isInteger(T)||T<=0?null:T},[e]),E=async R=>{if(R.preventDefault(),f(null),v(null),!w){f({message:"Gecerli bir arsiv kimligi bulunamadi."});return}const T=J3.safeParse({username:s,password:o});if(!T.success){f({message:T.error.issues[0]?.message??"Form alanlarini kontrol edin."});return}S(!0);try{const A=await qA(w,T.data),O=A.file_name??`arsiv-${w}.xlsx`;X3(A.blob,O),v("Indirme baslatildi. Dosya cihaziniza kaydedildi."),d("")}catch(A){f(He(A,"Excel dosyasi indirilemedi."))}finally{S(!1)}};return n.jsx("div",{className:"admin-auth-screen flex min-h-screen items-center justify-center px-4",children:n.jsxs("div",{className:"admin-auth-card w-full max-w-md rounded-2xl border border-slate-200 bg-white p-8 shadow-panel",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Excel Arsiv Indirme"}),n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Admin sifreni dogrula, gunluk puantaj Excel dosyasi panel acmadan indirilsin."}),n.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Arsiv ID: ",w??"-"]}),n.jsxs("form",{onSubmit:E,className:"mt-6 space-y-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Kullanici Adi"}),n.jsx("input",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:s,onChange:R=>l(R.target.value)})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Sifre"}),n.jsx("input",{type:"password",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:o,onChange:R=>d(R.target.value)})]}),m?n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[n.jsx("p",{className:"font-semibold",children:W3(m)}),n.jsx("p",{className:"mt-1",children:m.message}),m.requestId?n.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",m.requestId]}):null]}):null,g?n.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-3 text-sm text-emerald-700",children:g}):null,n.jsx("button",{type:"submit",disabled:_||!w,className:"btn-animated w-full rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:_?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Dogrulaniyor..."]}):"Sifreyi dogrula ve indir"})]}),n.jsxs("p",{className:"admin-auth-signature mt-5 text-center text-xs tracking-wide text-slate-500",children:[ps.signatureText," | BUILD: ",ps.buildVersion]})]})})}const tM=Xa({username:da().min(1,"Kullanici adi gerekli."),password:da().min(1,"Sifre gerekli.")});function Hh(e){if(!e)return"-";const s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat("tr-TR",{timeZone:"Europe/Istanbul",dateStyle:"medium",timeStyle:"medium"}).format(s)}function nM(e){return e==="PENDING"?"Onay Bekliyor":e==="APPROVED"?"Onaylandi":e==="CONSUMED"?"Kullanildi":"Suresi Doldu"}function aM(e){return e==="PENDING"?"bg-amber-100 text-amber-800 border-amber-200":e==="APPROVED"?"bg-emerald-100 text-emerald-800 border-emerald-200":e==="CONSUMED"?"bg-cyan-100 text-cyan-800 border-cyan-200":"bg-rose-100 text-rose-800 border-rose-200"}function F0(e){return e.code==="INVALID_CREDENTIALS"?"Sifre dogrulanamadi":e.code==="TOO_MANY_ATTEMPTS"?"Cok fazla deneme":e.code==="EXTRA_CHECKIN_APPROVAL_EXPIRED"?"Talep suresi dolmus":e.code==="EXTRA_CHECKIN_APPROVAL_NOT_FOUND"?"Talep bulunamadi":"Onay islemi basarisiz"}function sM(){const[e]=mu(),s=b.useMemo(()=>e.get("token")?.trim()??"",[e]),[l,o]=b.useState(null),[d,m]=b.useState(!1),[f,g]=b.useState(null),[v,_]=b.useState(null),[S,w]=b.useState(null),[E,R]=b.useState("admin"),[T,A]=b.useState(""),[O,q]=b.useState(!1);b.useEffect(()=>{if(!s){g({message:"Onay tokeni bulunamadi."}),o(null);return}let D=!1;return(async()=>{m(!0),g(null);try{const Y=await ZA(s);D||o(Y)}catch(Y){D||(g(He(Y,"Onay talebi yuklenemedi.")),o(null))}finally{D||m(!1)}})(),()=>{D=!0}},[s]);const U=async D=>{if(D.preventDefault(),_(null),w(null),!l||l.status!=="PENDING")return;const G=tM.safeParse({username:E,password:T});if(!G.success){_({message:G.error.issues[0]?.message??"Form alanlarini kontrol edin."});return}q(!0);try{const Y=await HA({token:s,username:G.data.username,password:G.data.password});o(Y.approval),A(""),w(Y.already_processed?"Talep daha once islenmis. Calisan tekrar giris deneyebilir.":"Onay verildi. Calisan ikinci giris islemini tekrar deneyebilir.")}catch(Y){_(He(Y,"Onay islemi tamamlanamadi."))}finally{q(!1)}};return n.jsx("div",{className:"admin-auth-screen flex min-h-screen items-center justify-center px-4",children:n.jsxs("div",{className:"admin-auth-card w-full max-w-2xl rounded-2xl border border-slate-200 bg-white p-8 shadow-panel",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Ek Giris Admin Onayi"}),n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Gunluk mesai tamamlama sonrasi ikinci giris denemesi icin sifre dogrulayarak onay verin."}),s?null:n.jsx("div",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:"Gecerli bir token olmadan onay islemi baslatilamaz."}),d?n.jsx("div",{className:"mt-4 rounded-lg border border-slate-200 bg-slate-50 px-3 py-3 text-sm text-slate-700",children:"Talep yukleniyor..."}):null,f?n.jsxs("div",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[n.jsx("p",{className:"font-semibold",children:F0(f)}),n.jsx("p",{className:"mt-1",children:f.message}),f.requestId?n.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",f.requestId]}):null]}):null,l?n.jsxs("section",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:["#",l.employee_id," - ",l.employee_name]}),n.jsx("span",{className:`inline-flex rounded-full border px-2 py-1 text-xs font-semibold ${aM(l.status)}`,children:nM(l.status)})]}),n.jsxs("div",{className:"mt-3 grid gap-2 text-xs text-slate-600 sm:grid-cols-2",children:[n.jsxs("p",{children:["Mesai gunu: ",l.local_day]}),n.jsxs("p",{children:["Istenen cihaz ID: ",l.device_id??"-"]}),n.jsxs("p",{children:["Talep zamani: ",Hh(l.requested_at)]}),n.jsxs("p",{children:["Son gecerlilik: ",Hh(l.expires_at)]}),n.jsxs("p",{children:["Onaylayan: ",l.approved_by_username??"-"]}),n.jsxs("p",{children:["Kullanilma zamani: ",Hh(l.consumed_at)]})]}),n.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Push dagitimi: hedef ",l.push_total_targets," | gonderilen ",l.push_sent," | hata ",l.push_failed]})]}):null,S?n.jsx("div",{className:"mt-4 rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-3 text-sm text-emerald-700",children:S}):null,l?.status==="PENDING"?n.jsxs("form",{onSubmit:U,className:"mt-5 space-y-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Kullanici Adi"}),n.jsx("input",{value:E,onChange:D=>R(D.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",autoComplete:"username"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Sifre (MFA gerektirmez)"}),n.jsx("input",{type:"password",value:T,onChange:D=>A(D.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",autoComplete:"current-password"})]}),v?n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[n.jsx("p",{className:"font-semibold",children:F0(v)}),n.jsx("p",{className:"mt-1",children:v.message}),v.requestId?n.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",v.requestId]}):null]}):null,n.jsx("button",{type:"submit",disabled:O,className:"btn-animated w-full rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:O?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Onay veriliyor..."]}):"Evet, 2. Girisi Onayla"})]}):null,n.jsxs("p",{className:"admin-auth-signature mt-5 text-center text-xs tracking-wide text-slate-500",children:[ps.signatureText," | BUILD: ",ps.buildVersion]})]})})}var Ul={},Kh,q0;function iM(){return q0||(q0=1,Kh=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Kh}var Qh={},sr={},Z0;function Wr(){if(Z0)return sr;Z0=1;let e;const s=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return sr.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},sr.getSymbolTotalCodewords=function(o){return s[o]},sr.getBCHDigit=function(l){let o=0;for(;l!==0;)o++,l>>>=1;return o},sr.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');e=o},sr.isKanjiModeEnabled=function(){return typeof e<"u"},sr.toSJIS=function(o){return e(o)},sr}var Gh={},H0;function jp(){return H0||(H0=1,(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function s(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+l)}}e.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},e.from=function(o,d){if(e.isValid(o))return o;try{return s(o)}catch{return d}}})(Gh)),Gh}var Vh,K0;function rM(){if(K0)return Vh;K0=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(s){const l=Math.floor(s/8);return(this.buffer[l]>>>7-s%8&1)===1},put:function(s,l){for(let o=0;o<l;o++)this.putBit((s>>>l-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(s){const l=Math.floor(this.length/8);this.buffer.length<=l&&this.buffer.push(0),s&&(this.buffer[l]|=128>>>this.length%8),this.length++}},Vh=e,Vh}var $h,Q0;function lM(){if(Q0)return $h;Q0=1;function e(s){if(!s||s<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=s,this.data=new Uint8Array(s*s),this.reservedBit=new Uint8Array(s*s)}return e.prototype.set=function(s,l,o,d){const m=s*this.size+l;this.data[m]=o,d&&(this.reservedBit[m]=!0)},e.prototype.get=function(s,l){return this.data[s*this.size+l]},e.prototype.xor=function(s,l,o){this.data[s*this.size+l]^=o},e.prototype.isReserved=function(s,l){return this.reservedBit[s*this.size+l]},$h=e,$h}var Yh={},G0;function oM(){return G0||(G0=1,(function(e){const s=Wr().getSymbolSize;e.getRowColCoords=function(o){if(o===1)return[];const d=Math.floor(o/7)+2,m=s(o),f=m===145?26:Math.ceil((m-13)/(2*d-2))*2,g=[m-7];for(let v=1;v<d-1;v++)g[v]=g[v-1]-f;return g.push(6),g.reverse()},e.getPositions=function(o){const d=[],m=e.getRowColCoords(o),f=m.length;for(let g=0;g<f;g++)for(let v=0;v<f;v++)g===0&&v===0||g===0&&v===f-1||g===f-1&&v===0||d.push([m[g],m[v]]);return d}})(Yh)),Yh}var Jh={},V0;function uM(){if(V0)return Jh;V0=1;const e=Wr().getSymbolSize,s=7;return Jh.getPositions=function(o){const d=e(o);return[[0,0],[d-s,0],[0,d-s]]},Jh}var Xh={},$0;function cM(){return $0||($0=1,(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const s={N1:3,N2:3,N3:40,N4:10};e.isValid=function(d){return d!=null&&d!==""&&!isNaN(d)&&d>=0&&d<=7},e.from=function(d){return e.isValid(d)?parseInt(d,10):void 0},e.getPenaltyN1=function(d){const m=d.size;let f=0,g=0,v=0,_=null,S=null;for(let w=0;w<m;w++){g=v=0,_=S=null;for(let E=0;E<m;E++){let R=d.get(w,E);R===_?g++:(g>=5&&(f+=s.N1+(g-5)),_=R,g=1),R=d.get(E,w),R===S?v++:(v>=5&&(f+=s.N1+(v-5)),S=R,v=1)}g>=5&&(f+=s.N1+(g-5)),v>=5&&(f+=s.N1+(v-5))}return f},e.getPenaltyN2=function(d){const m=d.size;let f=0;for(let g=0;g<m-1;g++)for(let v=0;v<m-1;v++){const _=d.get(g,v)+d.get(g,v+1)+d.get(g+1,v)+d.get(g+1,v+1);(_===4||_===0)&&f++}return f*s.N2},e.getPenaltyN3=function(d){const m=d.size;let f=0,g=0,v=0;for(let _=0;_<m;_++){g=v=0;for(let S=0;S<m;S++)g=g<<1&2047|d.get(_,S),S>=10&&(g===1488||g===93)&&f++,v=v<<1&2047|d.get(S,_),S>=10&&(v===1488||v===93)&&f++}return f*s.N3},e.getPenaltyN4=function(d){let m=0;const f=d.data.length;for(let v=0;v<f;v++)m+=d.data[v];return Math.abs(Math.ceil(m*100/f/5)-10)*s.N4};function l(o,d,m){switch(o){case e.Patterns.PATTERN000:return(d+m)%2===0;case e.Patterns.PATTERN001:return d%2===0;case e.Patterns.PATTERN010:return m%3===0;case e.Patterns.PATTERN011:return(d+m)%3===0;case e.Patterns.PATTERN100:return(Math.floor(d/2)+Math.floor(m/3))%2===0;case e.Patterns.PATTERN101:return d*m%2+d*m%3===0;case e.Patterns.PATTERN110:return(d*m%2+d*m%3)%2===0;case e.Patterns.PATTERN111:return(d*m%3+(d+m)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}e.applyMask=function(d,m){const f=m.size;for(let g=0;g<f;g++)for(let v=0;v<f;v++)m.isReserved(v,g)||m.xor(v,g,l(d,v,g))},e.getBestMask=function(d,m){const f=Object.keys(e.Patterns).length;let g=0,v=1/0;for(let _=0;_<f;_++){m(_),e.applyMask(_,d);const S=e.getPenaltyN1(d)+e.getPenaltyN2(d)+e.getPenaltyN3(d)+e.getPenaltyN4(d);e.applyMask(_,d),S<v&&(v=S,g=_)}return g}})(Xh)),Xh}var $c={},Y0;function k_(){if(Y0)return $c;Y0=1;const e=jp(),s=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],l=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return $c.getBlocksCount=function(d,m){switch(m){case e.L:return s[(d-1)*4+0];case e.M:return s[(d-1)*4+1];case e.Q:return s[(d-1)*4+2];case e.H:return s[(d-1)*4+3];default:return}},$c.getTotalCodewordsCount=function(d,m){switch(m){case e.L:return l[(d-1)*4+0];case e.M:return l[(d-1)*4+1];case e.Q:return l[(d-1)*4+2];case e.H:return l[(d-1)*4+3];default:return}},$c}var Wh={},Wo={},J0;function dM(){if(J0)return Wo;J0=1;const e=new Uint8Array(512),s=new Uint8Array(256);return(function(){let o=1;for(let d=0;d<255;d++)e[d]=o,s[o]=d,o<<=1,o&256&&(o^=285);for(let d=255;d<512;d++)e[d]=e[d-255]})(),Wo.log=function(o){if(o<1)throw new Error("log("+o+")");return s[o]},Wo.exp=function(o){return e[o]},Wo.mul=function(o,d){return o===0||d===0?0:e[s[o]+s[d]]},Wo}var X0;function mM(){return X0||(X0=1,(function(e){const s=dM();e.mul=function(o,d){const m=new Uint8Array(o.length+d.length-1);for(let f=0;f<o.length;f++)for(let g=0;g<d.length;g++)m[f+g]^=s.mul(o[f],d[g]);return m},e.mod=function(o,d){let m=new Uint8Array(o);for(;m.length-d.length>=0;){const f=m[0];for(let v=0;v<d.length;v++)m[v]^=s.mul(d[v],f);let g=0;for(;g<m.length&&m[g]===0;)g++;m=m.slice(g)}return m},e.generateECPolynomial=function(o){let d=new Uint8Array([1]);for(let m=0;m<o;m++)d=e.mul(d,new Uint8Array([1,s.exp(m)]));return d}})(Wh)),Wh}var ef,W0;function hM(){if(W0)return ef;W0=1;const e=mM();function s(l){this.genPoly=void 0,this.degree=l,this.degree&&this.initialize(this.degree)}return s.prototype.initialize=function(o){this.degree=o,this.genPoly=e.generateECPolynomial(this.degree)},s.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const d=new Uint8Array(o.length+this.degree);d.set(o);const m=e.mod(d,this.genPoly),f=this.degree-m.length;if(f>0){const g=new Uint8Array(this.degree);return g.set(m,f),g}return m},ef=s,ef}var tf={},nf={},af={},ev;function E_(){return ev||(ev=1,af.isValid=function(s){return!isNaN(s)&&s>=1&&s<=40}),af}var Vs={},tv;function T_(){if(tv)return Vs;tv=1;const e="[0-9]+",s="[A-Z $%*+\\-./:]+";let l="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";l=l.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+l+`)(?:.|[\r
]))+`;Vs.KANJI=new RegExp(l,"g"),Vs.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Vs.BYTE=new RegExp(o,"g"),Vs.NUMERIC=new RegExp(e,"g"),Vs.ALPHANUMERIC=new RegExp(s,"g");const d=new RegExp("^"+l+"$"),m=new RegExp("^"+e+"$"),f=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Vs.testKanji=function(v){return d.test(v)},Vs.testNumeric=function(v){return m.test(v)},Vs.testAlphanumeric=function(v){return f.test(v)},Vs}var nv;function el(){return nv||(nv=1,(function(e){const s=E_(),l=T_();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(m,f){if(!m.ccBits)throw new Error("Invalid mode: "+m);if(!s.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?m.ccBits[0]:f<27?m.ccBits[1]:m.ccBits[2]},e.getBestModeForData=function(m){return l.testNumeric(m)?e.NUMERIC:l.testAlphanumeric(m)?e.ALPHANUMERIC:l.testKanji(m)?e.KANJI:e.BYTE},e.toString=function(m){if(m&&m.id)return m.id;throw new Error("Invalid mode")},e.isValid=function(m){return m&&m.bit&&m.ccBits};function o(d){if(typeof d!="string")throw new Error("Param is not a string");switch(d.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+d)}}e.from=function(m,f){if(e.isValid(m))return m;try{return o(m)}catch{return f}}})(nf)),nf}var av;function fM(){return av||(av=1,(function(e){const s=Wr(),l=k_(),o=jp(),d=el(),m=E_(),f=7973,g=s.getBCHDigit(f);function v(E,R,T){for(let A=1;A<=40;A++)if(R<=e.getCapacity(A,T,E))return A}function _(E,R){return d.getCharCountIndicator(E,R)+4}function S(E,R){let T=0;return E.forEach(function(A){const O=_(A.mode,R);T+=O+A.getBitsLength()}),T}function w(E,R){for(let T=1;T<=40;T++)if(S(E,T)<=e.getCapacity(T,R,d.MIXED))return T}e.from=function(R,T){return m.isValid(R)?parseInt(R,10):T},e.getCapacity=function(R,T,A){if(!m.isValid(R))throw new Error("Invalid QR Code version");typeof A>"u"&&(A=d.BYTE);const O=s.getSymbolTotalCodewords(R),q=l.getTotalCodewordsCount(R,T),U=(O-q)*8;if(A===d.MIXED)return U;const D=U-_(A,R);switch(A){case d.NUMERIC:return Math.floor(D/10*3);case d.ALPHANUMERIC:return Math.floor(D/11*2);case d.KANJI:return Math.floor(D/13);case d.BYTE:default:return Math.floor(D/8)}},e.getBestVersionForData=function(R,T){let A;const O=o.from(T,o.M);if(Array.isArray(R)){if(R.length>1)return w(R,O);if(R.length===0)return 1;A=R[0]}else A=R;return v(A.mode,A.getLength(),O)},e.getEncodedBits=function(R){if(!m.isValid(R)||R<7)throw new Error("Invalid QR Code version");let T=R<<12;for(;s.getBCHDigit(T)-g>=0;)T^=f<<s.getBCHDigit(T)-g;return R<<12|T}})(tf)),tf}var sf={},sv;function pM(){if(sv)return sf;sv=1;const e=Wr(),s=1335,l=21522,o=e.getBCHDigit(s);return sf.getEncodedBits=function(m,f){const g=m.bit<<3|f;let v=g<<10;for(;e.getBCHDigit(v)-o>=0;)v^=s<<e.getBCHDigit(v)-o;return(g<<10|v)^l},sf}var rf={},lf,iv;function xM(){if(iv)return lf;iv=1;const e=el();function s(l){this.mode=e.NUMERIC,this.data=l.toString()}return s.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(o){let d,m,f;for(d=0;d+3<=this.data.length;d+=3)m=this.data.substr(d,3),f=parseInt(m,10),o.put(f,10);const g=this.data.length-d;g>0&&(m=this.data.substr(d),f=parseInt(m,10),o.put(f,g*3+1))},lf=s,lf}var of,rv;function gM(){if(rv)return of;rv=1;const e=el(),s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function l(o){this.mode=e.ALPHANUMERIC,this.data=o}return l.getBitsLength=function(d){return 11*Math.floor(d/2)+6*(d%2)},l.prototype.getLength=function(){return this.data.length},l.prototype.getBitsLength=function(){return l.getBitsLength(this.data.length)},l.prototype.write=function(d){let m;for(m=0;m+2<=this.data.length;m+=2){let f=s.indexOf(this.data[m])*45;f+=s.indexOf(this.data[m+1]),d.put(f,11)}this.data.length%2&&d.put(s.indexOf(this.data[m]),6)},of=l,of}var uf,lv;function yM(){if(lv)return uf;lv=1;const e=el();function s(l){this.mode=e.BYTE,typeof l=="string"?this.data=new TextEncoder().encode(l):this.data=new Uint8Array(l)}return s.getBitsLength=function(o){return o*8},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(l){for(let o=0,d=this.data.length;o<d;o++)l.put(this.data[o],8)},uf=s,uf}var cf,ov;function vM(){if(ov)return cf;ov=1;const e=el(),s=Wr();function l(o){this.mode=e.KANJI,this.data=o}return l.getBitsLength=function(d){return d*13},l.prototype.getLength=function(){return this.data.length},l.prototype.getBitsLength=function(){return l.getBitsLength(this.data.length)},l.prototype.write=function(o){let d;for(d=0;d<this.data.length;d++){let m=s.toSJIS(this.data[d]);if(m>=33088&&m<=40956)m-=33088;else if(m>=57408&&m<=60351)m-=49472;else throw new Error("Invalid SJIS character: "+this.data[d]+`
Make sure your charset is UTF-8`);m=(m>>>8&255)*192+(m&255),o.put(m,13)}},cf=l,cf}var df={exports:{}},uv;function bM(){return uv||(uv=1,(function(e){var s={single_source_shortest_paths:function(l,o,d){var m={},f={};f[o]=0;var g=s.PriorityQueue.make();g.push(o,0);for(var v,_,S,w,E,R,T,A,O;!g.empty();){v=g.pop(),_=v.value,w=v.cost,E=l[_]||{};for(S in E)E.hasOwnProperty(S)&&(R=E[S],T=w+R,A=f[S],O=typeof f[S]>"u",(O||A>T)&&(f[S]=T,g.push(S,T),m[S]=_))}if(typeof d<"u"&&typeof f[d]>"u"){var q=["Could not find a path from ",o," to ",d,"."].join("");throw new Error(q)}return m},extract_shortest_path_from_predecessor_list:function(l,o){for(var d=[],m=o;m;)d.push(m),l[m],m=l[m];return d.reverse(),d},find_path:function(l,o,d){var m=s.single_source_shortest_paths(l,o,d);return s.extract_shortest_path_from_predecessor_list(m,d)},PriorityQueue:{make:function(l){var o=s.PriorityQueue,d={},m;l=l||{};for(m in o)o.hasOwnProperty(m)&&(d[m]=o[m]);return d.queue=[],d.sorter=l.sorter||o.default_sorter,d},default_sorter:function(l,o){return l.cost-o.cost},push:function(l,o){var d={value:l,cost:o};this.queue.push(d),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=s})(df)),df.exports}var cv;function _M(){return cv||(cv=1,(function(e){const s=el(),l=xM(),o=gM(),d=yM(),m=vM(),f=T_(),g=Wr(),v=bM();function _(q){return unescape(encodeURIComponent(q)).length}function S(q,U,D){const G=[];let Y;for(;(Y=q.exec(D))!==null;)G.push({data:Y[0],index:Y.index,mode:U,length:Y[0].length});return G}function w(q){const U=S(f.NUMERIC,s.NUMERIC,q),D=S(f.ALPHANUMERIC,s.ALPHANUMERIC,q);let G,Y;return g.isKanjiModeEnabled()?(G=S(f.BYTE,s.BYTE,q),Y=S(f.KANJI,s.KANJI,q)):(G=S(f.BYTE_KANJI,s.BYTE,q),Y=[]),U.concat(D,G,Y).sort(function(H,te){return H.index-te.index}).map(function(H){return{data:H.data,mode:H.mode,length:H.length}})}function E(q,U){switch(U){case s.NUMERIC:return l.getBitsLength(q);case s.ALPHANUMERIC:return o.getBitsLength(q);case s.KANJI:return m.getBitsLength(q);case s.BYTE:return d.getBitsLength(q)}}function R(q){return q.reduce(function(U,D){const G=U.length-1>=0?U[U.length-1]:null;return G&&G.mode===D.mode?(U[U.length-1].data+=D.data,U):(U.push(D),U)},[])}function T(q){const U=[];for(let D=0;D<q.length;D++){const G=q[D];switch(G.mode){case s.NUMERIC:U.push([G,{data:G.data,mode:s.ALPHANUMERIC,length:G.length},{data:G.data,mode:s.BYTE,length:G.length}]);break;case s.ALPHANUMERIC:U.push([G,{data:G.data,mode:s.BYTE,length:G.length}]);break;case s.KANJI:U.push([G,{data:G.data,mode:s.BYTE,length:_(G.data)}]);break;case s.BYTE:U.push([{data:G.data,mode:s.BYTE,length:_(G.data)}])}}return U}function A(q,U){const D={},G={start:{}};let Y=["start"];for(let ee=0;ee<q.length;ee++){const H=q[ee],te=[];for(let J=0;J<H.length;J++){const fe=H[J],ye=""+ee+J;te.push(ye),D[ye]={node:fe,lastCount:0},G[ye]={};for(let de=0;de<Y.length;de++){const Se=Y[de];D[Se]&&D[Se].node.mode===fe.mode?(G[Se][ye]=E(D[Se].lastCount+fe.length,fe.mode)-E(D[Se].lastCount,fe.mode),D[Se].lastCount+=fe.length):(D[Se]&&(D[Se].lastCount=fe.length),G[Se][ye]=E(fe.length,fe.mode)+4+s.getCharCountIndicator(fe.mode,U))}}Y=te}for(let ee=0;ee<Y.length;ee++)G[Y[ee]].end=0;return{map:G,table:D}}function O(q,U){let D;const G=s.getBestModeForData(q);if(D=s.from(U,G),D!==s.BYTE&&D.bit<G.bit)throw new Error('"'+q+'" cannot be encoded with mode '+s.toString(D)+`.
 Suggested mode is: `+s.toString(G));switch(D===s.KANJI&&!g.isKanjiModeEnabled()&&(D=s.BYTE),D){case s.NUMERIC:return new l(q);case s.ALPHANUMERIC:return new o(q);case s.KANJI:return new m(q);case s.BYTE:return new d(q)}}e.fromArray=function(U){return U.reduce(function(D,G){return typeof G=="string"?D.push(O(G,null)):G.data&&D.push(O(G.data,G.mode)),D},[])},e.fromString=function(U,D){const G=w(U,g.isKanjiModeEnabled()),Y=T(G),ee=A(Y,D),H=v.find_path(ee.map,"start","end"),te=[];for(let J=1;J<H.length-1;J++)te.push(ee.table[H[J]].node);return e.fromArray(R(te))},e.rawSplit=function(U){return e.fromArray(w(U,g.isKanjiModeEnabled()))}})(rf)),rf}var dv;function NM(){if(dv)return Qh;dv=1;const e=Wr(),s=jp(),l=rM(),o=lM(),d=oM(),m=uM(),f=cM(),g=k_(),v=hM(),_=fM(),S=pM(),w=el(),E=_M();function R(ee,H){const te=ee.size,J=m.getPositions(H);for(let fe=0;fe<J.length;fe++){const ye=J[fe][0],de=J[fe][1];for(let Se=-1;Se<=7;Se++)if(!(ye+Se<=-1||te<=ye+Se))for(let oe=-1;oe<=7;oe++)de+oe<=-1||te<=de+oe||(Se>=0&&Se<=6&&(oe===0||oe===6)||oe>=0&&oe<=6&&(Se===0||Se===6)||Se>=2&&Se<=4&&oe>=2&&oe<=4?ee.set(ye+Se,de+oe,!0,!0):ee.set(ye+Se,de+oe,!1,!0))}}function T(ee){const H=ee.size;for(let te=8;te<H-8;te++){const J=te%2===0;ee.set(te,6,J,!0),ee.set(6,te,J,!0)}}function A(ee,H){const te=d.getPositions(H);for(let J=0;J<te.length;J++){const fe=te[J][0],ye=te[J][1];for(let de=-2;de<=2;de++)for(let Se=-2;Se<=2;Se++)de===-2||de===2||Se===-2||Se===2||de===0&&Se===0?ee.set(fe+de,ye+Se,!0,!0):ee.set(fe+de,ye+Se,!1,!0)}}function O(ee,H){const te=ee.size,J=_.getEncodedBits(H);let fe,ye,de;for(let Se=0;Se<18;Se++)fe=Math.floor(Se/3),ye=Se%3+te-8-3,de=(J>>Se&1)===1,ee.set(fe,ye,de,!0),ee.set(ye,fe,de,!0)}function q(ee,H,te){const J=ee.size,fe=S.getEncodedBits(H,te);let ye,de;for(ye=0;ye<15;ye++)de=(fe>>ye&1)===1,ye<6?ee.set(ye,8,de,!0):ye<8?ee.set(ye+1,8,de,!0):ee.set(J-15+ye,8,de,!0),ye<8?ee.set(8,J-ye-1,de,!0):ye<9?ee.set(8,15-ye-1+1,de,!0):ee.set(8,15-ye-1,de,!0);ee.set(J-8,8,1,!0)}function U(ee,H){const te=ee.size;let J=-1,fe=te-1,ye=7,de=0;for(let Se=te-1;Se>0;Se-=2)for(Se===6&&Se--;;){for(let oe=0;oe<2;oe++)if(!ee.isReserved(fe,Se-oe)){let le=!1;de<H.length&&(le=(H[de]>>>ye&1)===1),ee.set(fe,Se-oe,le),ye--,ye===-1&&(de++,ye=7)}if(fe+=J,fe<0||te<=fe){fe-=J,J=-J;break}}}function D(ee,H,te){const J=new l;te.forEach(function(oe){J.put(oe.mode.bit,4),J.put(oe.getLength(),w.getCharCountIndicator(oe.mode,ee)),oe.write(J)});const fe=e.getSymbolTotalCodewords(ee),ye=g.getTotalCodewordsCount(ee,H),de=(fe-ye)*8;for(J.getLengthInBits()+4<=de&&J.put(0,4);J.getLengthInBits()%8!==0;)J.putBit(0);const Se=(de-J.getLengthInBits())/8;for(let oe=0;oe<Se;oe++)J.put(oe%2?17:236,8);return G(J,ee,H)}function G(ee,H,te){const J=e.getSymbolTotalCodewords(H),fe=g.getTotalCodewordsCount(H,te),ye=J-fe,de=g.getBlocksCount(H,te),Se=J%de,oe=de-Se,le=Math.floor(J/de),Q=Math.floor(ye/de),K=Q+1,X=le-Q,ke=new v(X);let je=0;const z=new Array(de),ne=new Array(de);let I=0;const ce=new Uint8Array(ee.buffer);for(let me=0;me<de;me++){const Ge=me<oe?Q:K;z[me]=ce.slice(je,je+Ge),ne[me]=ke.encode(z[me]),je+=Ge,I=Math.max(I,Ge)}const ue=new Uint8Array(J);let Ne=0,Re,Le;for(Re=0;Re<I;Re++)for(Le=0;Le<de;Le++)Re<z[Le].length&&(ue[Ne++]=z[Le][Re]);for(Re=0;Re<X;Re++)for(Le=0;Le<de;Le++)ue[Ne++]=ne[Le][Re];return ue}function Y(ee,H,te,J){let fe;if(Array.isArray(ee))fe=E.fromArray(ee);else if(typeof ee=="string"){let le=H;if(!le){const Q=E.rawSplit(ee);le=_.getBestVersionForData(Q,te)}fe=E.fromString(ee,le||40)}else throw new Error("Invalid data");const ye=_.getBestVersionForData(fe,te);if(!ye)throw new Error("The amount of data is too big to be stored in a QR Code");if(!H)H=ye;else if(H<ye)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ye+`.
`);const de=D(H,te,fe),Se=e.getSymbolSize(H),oe=new o(Se);return R(oe,H),T(oe),A(oe,H),q(oe,te,0),H>=7&&O(oe,H),U(oe,de),isNaN(J)&&(J=f.getBestMask(oe,q.bind(null,oe,te))),f.applyMask(J,oe),q(oe,te,J),{modules:oe,version:H,errorCorrectionLevel:te,maskPattern:J,segments:fe}}return Qh.create=function(H,te){if(typeof H>"u"||H==="")throw new Error("No input text");let J=s.M,fe,ye;return typeof te<"u"&&(J=s.from(te.errorCorrectionLevel,s.M),fe=_.from(te.version),ye=f.from(te.maskPattern),te.toSJISFunc&&e.setToSJISFunction(te.toSJISFunc)),Y(H,fe,J,ye)},Qh}var mf={},hf={},mv;function C_(){return mv||(mv=1,(function(e){function s(l){if(typeof l=="number"&&(l=l.toString()),typeof l!="string")throw new Error("Color should be defined as hex string");let o=l.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+l);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(m){return[m,m]}))),o.length===6&&o.push("F","F");const d=parseInt(o.join(""),16);return{r:d>>24&255,g:d>>16&255,b:d>>8&255,a:d&255,hex:"#"+o.slice(0,6).join("")}}e.getOptions=function(o){o||(o={}),o.color||(o.color={});const d=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,m=o.width&&o.width>=21?o.width:void 0,f=o.scale||4;return{width:m,scale:m?4:f,margin:d,color:{dark:s(o.color.dark||"#000000ff"),light:s(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},e.getScale=function(o,d){return d.width&&d.width>=o+d.margin*2?d.width/(o+d.margin*2):d.scale},e.getImageWidth=function(o,d){const m=e.getScale(o,d);return Math.floor((o+d.margin*2)*m)},e.qrToImageData=function(o,d,m){const f=d.modules.size,g=d.modules.data,v=e.getScale(f,m),_=Math.floor((f+m.margin*2)*v),S=m.margin*v,w=[m.color.light,m.color.dark];for(let E=0;E<_;E++)for(let R=0;R<_;R++){let T=(E*_+R)*4,A=m.color.light;if(E>=S&&R>=S&&E<_-S&&R<_-S){const O=Math.floor((E-S)/v),q=Math.floor((R-S)/v);A=w[g[O*f+q]?1:0]}o[T++]=A.r,o[T++]=A.g,o[T++]=A.b,o[T]=A.a}}})(hf)),hf}var hv;function jM(){return hv||(hv=1,(function(e){const s=C_();function l(d,m,f){d.clearRect(0,0,m.width,m.height),m.style||(m.style={}),m.height=f,m.width=f,m.style.height=f+"px",m.style.width=f+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(m,f,g){let v=g,_=f;typeof v>"u"&&(!f||!f.getContext)&&(v=f,f=void 0),f||(_=o()),v=s.getOptions(v);const S=s.getImageWidth(m.modules.size,v),w=_.getContext("2d"),E=w.createImageData(S,S);return s.qrToImageData(E.data,m,v),l(w,_,S),w.putImageData(E,0,0),_},e.renderToDataURL=function(m,f,g){let v=g;typeof v>"u"&&(!f||!f.getContext)&&(v=f,f=void 0),v||(v={});const _=e.render(m,f,v),S=v.type||"image/png",w=v.rendererOpts||{};return _.toDataURL(S,w.quality)}})(mf)),mf}var ff={},fv;function SM(){if(fv)return ff;fv=1;const e=C_();function s(d,m){const f=d.a/255,g=m+'="'+d.hex+'"';return f<1?g+" "+m+'-opacity="'+f.toFixed(2).slice(1)+'"':g}function l(d,m,f){let g=d+m;return typeof f<"u"&&(g+=" "+f),g}function o(d,m,f){let g="",v=0,_=!1,S=0;for(let w=0;w<d.length;w++){const E=Math.floor(w%m),R=Math.floor(w/m);!E&&!_&&(_=!0),d[w]?(S++,w>0&&E>0&&d[w-1]||(g+=_?l("M",E+f,.5+R+f):l("m",v,0),v=0,_=!1),E+1<m&&d[w+1]||(g+=l("h",S),S=0)):v++}return g}return ff.render=function(m,f,g){const v=e.getOptions(f),_=m.modules.size,S=m.modules.data,w=_+v.margin*2,E=v.color.light.a?"<path "+s(v.color.light,"fill")+' d="M0 0h'+w+"v"+w+'H0z"/>':"",R="<path "+s(v.color.dark,"stroke")+' d="'+o(S,_,v.margin)+'"/>',T='viewBox="0 0 '+w+" "+w+'"',O='<svg xmlns="http://www.w3.org/2000/svg" '+(v.width?'width="'+v.width+'" height="'+v.width+'" ':"")+T+' shape-rendering="crispEdges">'+E+R+`</svg>
`;return typeof g=="function"&&g(null,O),O},ff}var pv;function wM(){if(pv)return Ul;pv=1;const e=iM(),s=NM(),l=jM(),o=SM();function d(m,f,g,v,_){const S=[].slice.call(arguments,1),w=S.length,E=typeof S[w-1]=="function";if(!E&&!e())throw new Error("Callback required as last argument");if(E){if(w<2)throw new Error("Too few arguments provided");w===2?(_=g,g=f,f=v=void 0):w===3&&(f.getContext&&typeof _>"u"?(_=v,v=void 0):(_=v,v=g,g=f,f=void 0))}else{if(w<1)throw new Error("Too few arguments provided");return w===1?(g=f,f=v=void 0):w===2&&!f.getContext&&(v=g,g=f,f=void 0),new Promise(function(R,T){try{const A=s.create(g,v);R(m(A,f,v))}catch(A){T(A)}})}try{const R=s.create(g,v);_(null,m(R,f,v))}catch(R){_(R)}}return Ul.create=s.create,Ul.toCanvas=d.bind(null,l.render),Ul.toDataURL=d.bind(null,l.renderToDataURL),Ul.toString=d.bind(null,function(m,f,g){return o.render(m,g)}),Ul}var kM=wM();const Qf=Nd(kM),Sp=[{key:"regions",label:"Bolgeler"},{key:"departments",label:"Departmanlar"},{key:"employees",label:"Calisanlar"},{key:"devices",label:"Cihazlar"},{key:"work_rules",label:"Mesai Kurallari"},{key:"attendance_events",label:"Yoklama Kayitlari"},{key:"leaves",label:"Izinler"},{key:"reports",label:"Raporlar"},{key:"compliance",label:"Uyumluluk"},{key:"schedule",label:"Planlama"},{key:"manual_overrides",label:"Manuel Duzeltme"},{key:"audit",label:"Denetim Kayitlari"},{key:"admin_users",label:"Admin Kullanicilari"}];function iu(){return Object.fromEntries(Sp.map(e=>[e.key,{read:!1,write:!1}]))}function EM(e){const s=iu();return e&&Sp.forEach(({key:l})=>{const o=e[l];o&&(s[l]={read:!!(o.read||o.write),write:!!o.write})}),s}function xv({value:e,disabled:s=!1,onChange:l}){const o=(d,m,f)=>{const v={...e[d]??{read:!1,write:!1}};m==="read"?(v.read=f,f||(v.write=!1)):(v.write=f,f&&(v.read=!0)),l({...e,[d]:v})};return n.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2",children:"Modul"}),n.jsx("th",{className:"px-3 py-2",children:"Goruntule"}),n.jsx("th",{className:"px-3 py-2",children:"Duzenle"})]})}),n.jsx("tbody",{children:Sp.map(d=>{const m=e[d.key]??{read:!1,write:!1};return n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-3 py-2",children:d.label}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:m.read,disabled:s,onChange:f=>o(d.key,"read",f.target.checked)})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:m.write,disabled:s,onChange:f=>o(d.key,"write",f.target.checked)})})]},d.key)})})]})})}function gv(){return{username:"",full_name:"",password:"",is_active:!0,is_super_admin:!1,permissions:iu()}}function pf(e){return e?new Date(e).toLocaleString("tr-TR"):"-"}function TM(e){const s=(e??"").trim();return s?s.length<=80?s:`${s.slice(0,80)}...`:"-"}function CM(e){const s=e.trim();return s?s.length<=60?s:`${s.slice(0,30)}...${s.slice(-22)}`:"-"}function AM(){const e=na(),{pushToast:s}=ha(),{hasPermission:l,isSuperAdmin:o,user:d}=Wl(),m=l("admin_users"),f=l("admin_users","write"),[g,v]=b.useState(gv()),[_,S]=b.useState(null),[w,E]=b.useState(""),[R,T]=b.useState(""),[A,O]=b.useState(""),[q,U]=b.useState(!0),[D,G]=b.useState(!1),[Y,ee]=b.useState(iu()),[H,te]=b.useState(null),[J,fe]=b.useState(null),[ye,de]=b.useState(null),[Se,oe]=b.useState(""),[le,Q]=b.useState(""),[K,X]=b.useState(null),[ke,je]=b.useState([]),[z,ne]=b.useState(null),I=Qe({queryKey:["admin-users"],queryFn:c_,enabled:m}),ce=Qe({queryKey:["admin-user-mfa-status",J?.id],queryFn:()=>GC(J.id),enabled:!!J}),ue=Qe({queryKey:["admin-user-claim-detail",H?.id],queryFn:()=>UC(H.id),enabled:!!H}),Ne=Je({mutationFn:({adminUserId:se,claimId:Ke,nextActive:_t})=>FC(se,Ke,{is_active:_t}),onSuccess:(se,Ke)=>{s({variant:"success",title:Ke.nextActive?"Claim aktif edildi":"Claim pasife alindi",description:Ke.nextActive?"Admin cihazi yeniden aktif edildi.":"Admin cihazi manuel olarak pasife alindi."}),e.invalidateQueries({queryKey:["admin-user-claim-detail",Ke.adminUserId]}),e.invalidateQueries({queryKey:["admin-users"]})},onError:se=>{const Ke=He(se,"Claim durumu guncellenemedi.");s({variant:"error",title:"Claim guncelleme hatasi",description:Ke.message})}}),Re=Je({mutationFn:HC,onSuccess:()=>{s({variant:"success",title:"Admin kullanici olusturuldu",description:"Yeni admin hesabi kaydedildi."}),v(gv()),e.invalidateQueries({queryKey:["admin-users"]})},onError:se=>{const Ke=He(se,"Admin kullanici olusturulamadi.");s({variant:"error",title:"Kayit basarisiz",description:Ke.message})}}),Le=Je({mutationFn:({userId:se,payload:Ke})=>KC(se,Ke),onSuccess:()=>{s({variant:"success",title:"Admin kullanici guncellendi",description:"Kullanici yetkileri guncellendi."}),S(null),O(""),e.invalidateQueries({queryKey:["admin-users"]})},onError:se=>{const Ke=He(se,"Admin kullanici guncellenemedi.");s({variant:"error",title:"Guncelleme basarisiz",description:Ke.message})}}),me=Je({mutationFn:QC,onSuccess:()=>{s({variant:"success",title:"Admin kullanici silindi",description:"Kullanici kaydi sistemden kaldirildi."}),e.invalidateQueries({queryKey:["admin-users"]})},onError:se=>{const Ke=He(se,"Admin kullanici silinemedi.");s({variant:"error",title:"Silme basarisiz",description:Ke.message})}}),Ge=Je({mutationFn:se=>VC(se),onSuccess:se=>{de(se),oe(""),je([]),ne(null),ce.refetch(),s({variant:"success",title:"MFA kurulumu baslatildi",description:"QR kodu taratip 6 haneli kodu onaylayin."})},onError:se=>{const Ke=He(se,"MFA kurulumu baslatilamadi.");s({variant:"error",title:"MFA kurulum hatasi",description:Ke.message})}}),Ye=Je({mutationFn:({adminUserId:se,code:Ke})=>$C(se,{code:Ke}),onSuccess:se=>{je(se.recovery_codes),ne(se.recovery_code_expires_at),de(null),oe(""),e.invalidateQueries({queryKey:["admin-users"]}),ce.refetch(),s({variant:"success",title:"MFA aktif edildi",description:"Recovery kodlari olusturuldu."})},onError:se=>{const Ke=He(se,"MFA kodu dogrulanamadi.");s({variant:"error",title:"MFA onay hatasi",description:Ke.message})}}),Tt=Je({mutationFn:({adminUserId:se,currentPassword:Ke})=>YC(se,{current_password:Ke}),onSuccess:se=>{je(se.recovery_codes),ne(se.recovery_code_expires_at),Q(""),ce.refetch(),s({variant:"success",title:"Recovery kodlari yenilendi",description:"Eski kodlar pasif edildi."})},onError:se=>{const Ke=He(se,"Recovery kodlari yenilenemedi.");s({variant:"error",title:"Yenileme hatasi",description:Ke.message})}}),ht=Je({mutationFn:({adminUserId:se,currentPassword:Ke})=>JC(se,{current_password:Ke}),onSuccess:()=>{de(null),oe(""),X(null),je([]),ne(null),Q(""),e.invalidateQueries({queryKey:["admin-users"]}),ce.refetch(),s({variant:"success",title:"MFA sifirlandi",description:"Kullanici tekrar MFA kurabilir."})},onError:se=>{const Ke=He(se,"MFA sifirlanamadi.");s({variant:"error",title:"Sifirlama hatasi",description:Ke.message})}});b.useEffect(()=>{if(!ye?.otpauth_uri){X(null);return}let se=!1;return Qf.toDataURL(ye.otpauth_uri,{margin:1,width:220}).then(Ke=>{se||X(Ke)}).catch(()=>{se||X(null)}),()=>{se=!0}},[ye]);const M=b.useMemo(()=>[...I.data??[]].sort((Ke,_t)=>Ke.username.localeCompare(_t.username)),[I.data]),Oe=ce.data;if(!m)return n.jsx(Ot,{message:"Bu alani goruntuleme yetkiniz yok."});if(I.isLoading)return n.jsx(Gt,{label:"Admin kullanicilar yukleniyor..."});if(I.isError)return n.jsx(Ot,{message:"Admin kullanici listesi alinamadi."});const mt=se=>{if(se.preventDefault(),!!f){if(!o){s({variant:"info",title:"Yetki siniri",description:"Sadece super admin yeni admin kullanici olusturabilir."});return}if(g.password.length<8){s({variant:"error",title:"Kayit basarisiz",description:"Sifre alani en az 8 karakter olmali."});return}Re.mutate({username:g.username.trim(),full_name:g.full_name.trim()||null,password:g.password,is_active:g.is_active,is_super_admin:g.is_super_admin,permissions:g.is_super_admin?iu():g.permissions})}},Rt=se=>{S(se),E(se.username),T(se.full_name??""),O(""),U(se.is_active),G(se.is_super_admin),ee(EM(se.permissions))},It=se=>{te(se)},Vt=()=>{te(null)},ae=se=>{fe(se),de(null),oe(""),Q(""),X(null),je([]),ne(null)},Ee=()=>{fe(null),de(null),oe(""),Q(""),X(null),je([]),ne(null)},Be=se=>{if(se.preventDefault(),!(!_||!f)){if(A.trim()&&A.trim().length<8){s({variant:"error",title:"Guncelleme basarisiz",description:"Yeni sifre en az 8 karakter olmali."});return}Le.mutate({userId:_.id,payload:{username:w.trim(),full_name:R.trim()||null,password:A.trim()?A:void 0,is_active:q,is_super_admin:D,permissions:D?iu():Y}})}},Ct=se=>{se.preventDefault(),!(!J||!Se.trim())&&Ye.mutate({adminUserId:J.id,code:Se.trim()})};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"Admin Kullanici ve Yetki Yonetimi",description:"Belirli modullere erisebilen read-only veya tam yetkili admin hesaplari olusturun."}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"mb-3 text-base font-semibold text-slate-900",children:"Yeni Admin Kullanici"}),n.jsxs("p",{className:"mb-3 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:["Sistem super admin hesabi: ",n.jsx("strong",{children:"admin"})," (env). Bu hesap her zaman tam yetkilidir."]}),o?null:n.jsx("p",{className:"mb-3 rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-sm text-amber-800",children:"Sadece super admin hesaplari yeni admin olusturabilir ve yetki duzenleyebilir."}),n.jsxs("form",{onSubmit:mt,className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Kullanici Adi",n.jsx("input",{value:g.username,onChange:se=>v(Ke=>({...Ke,username:se.target.value})),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"ik_readonly"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ad Soyad",n.jsx("input",{value:g.full_name,onChange:se=>v(Ke=>({...Ke,full_name:se.target.value})),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"IK Operasyon"})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Sifre",n.jsx("input",{type:"password",value:g.password,onChange:se=>v(Ke=>({...Ke,password:se.target.value})),disabled:!f||!o,minLength:8,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"En az 8 karakter"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-700",children:[n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:g.is_active,disabled:!f||!o,onChange:se=>v(Ke=>({...Ke,is_active:se.target.checked}))}),"Aktif"]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:g.is_super_admin,disabled:!f||!o,onChange:se=>v(Ke=>({...Ke,is_super_admin:se.target.checked}))}),"Super Admin"]})]}),g.is_super_admin?n.jsx("p",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:"Super admin secili oldugu icin tum modullerde tam yetki verilecektir."}):n.jsx(xv,{value:g.permissions,disabled:!f||!o,onChange:se=>v(Ke=>({...Ke,permissions:se}))}),n.jsx("button",{type:"submit",disabled:!f||!o||Re.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Re.isPending?"Kaydediliyor...":"Kullanici Olustur"})]})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"mb-3 text-base font-semibold text-slate-900",children:"Mevcut Admin Kullanicilar"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"ID"}),n.jsx("th",{className:"py-2",children:"Kullanici"}),n.jsx("th",{className:"py-2",children:"Ad Soyad"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Rol"}),n.jsx("th",{className:"py-2",children:"Bagli Cihaz"}),n.jsx("th",{className:"py-2",children:"MFA"}),n.jsx("th",{className:"py-2",children:"Islem"})]})}),n.jsx("tbody",{children:M.map(se=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:se.id}),n.jsx("td",{className:"py-2 font-medium text-slate-900",children:se.username}),n.jsx("td",{className:"py-2",children:se.full_name??"-"}),n.jsx("td",{className:"py-2",children:n.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${se.is_active?"bg-emerald-100 text-emerald-800":"bg-rose-100 text-rose-800"}`,children:se.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2",children:se.is_super_admin?"Super Admin":"Yetkili Admin"}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"text-xs text-slate-700",children:[n.jsx("span",{className:"font-semibold text-emerald-700",children:se.claim_active_total??0})," aktif /"," ",n.jsx("span",{className:"font-semibold",children:se.claim_total??0})," toplam"]})}),n.jsx("td",{className:"py-2",children:n.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${se.mfa_enabled?"bg-emerald-100 text-emerald-800":se.mfa_secret_configured?"bg-amber-100 text-amber-800":"bg-slate-100 text-slate-700"}`,children:se.mfa_enabled?"Aktif":se.mfa_secret_configured?"Kurulum Bekliyor":"Kapali"})}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>It(se),className:"rounded-lg border border-emerald-300 px-3 py-1 text-xs font-medium text-emerald-700 hover:bg-emerald-50",children:"Detay"}),n.jsx("button",{type:"button",disabled:!(o||(d?.admin_user_id??0)===se.id),onClick:()=>ae(se),className:"rounded-lg border border-brand-200 px-3 py-1 text-xs font-medium text-brand-700 hover:bg-brand-50 disabled:opacity-50",children:"MFA"}),n.jsx("button",{type:"button",disabled:!f||!o,onClick:()=>Rt(se),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50",children:"Duzenle"}),n.jsx("button",{type:"button",disabled:!f||!o||me.isPending,onClick:()=>{window.confirm(`${se.username} kullanicisini silmek istediginize emin misiniz?`)&&me.mutate(se.id)},className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50 disabled:opacity-50",children:"Sil"})]})})]},se.id))})]})}),M.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Kayitli admin kullanici bulunamadi."}):null]}),n.jsx(Js,{open:!!H,title:H?`Admin Detay: ${H.username}`:"Admin Detay",onClose:Vt,children:H?n.jsxs("div",{className:"space-y-4",children:[ue.isLoading?n.jsx("p",{className:"text-sm text-slate-500",children:"Detay yukleniyor..."}):null,ue.isError?n.jsx(Ot,{message:"Admin claim detayi alinamadi."}):null,ue.data?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm",children:["Toplam claim: ",n.jsx("strong",{children:ue.data.claim_total})]}),n.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",children:["Aktif claim: ",n.jsx("strong",{children:ue.data.claim_active_total})]}),n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:["Pasif claim: ",n.jsx("strong",{children:ue.data.claim_inactive_total})]}),n.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 px-3 py-2 text-sm text-blue-800",children:["Benzersiz cihaz: ",n.jsx("strong",{children:new Set(ue.data.claims.map(se=>se.endpoint_fingerprint)).size})]})]}),n.jsxs("section",{children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Bagli Cihaz / Claim Listesi"}),n.jsxs("div",{className:"mt-2 max-h-60 overflow-auto rounded-lg border border-slate-200",children:[n.jsxs("table",{className:"min-w-full text-left text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-50 uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2",children:"ID"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Fingerprint"}),n.jsx("th",{className:"px-2 py-2",children:"Son Gorulme"}),n.jsx("th",{className:"px-2 py-2",children:"Hata"}),n.jsx("th",{className:"px-2 py-2",children:"Tarayici"}),n.jsx("th",{className:"px-2 py-2",children:"Endpoint"}),n.jsx("th",{className:"px-2 py-2",children:"Islem"})]})}),n.jsx("tbody",{children:ue.data.claims.map(se=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-2 py-2",children:se.id}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("span",{className:`rounded-full px-2 py-1 text-[11px] font-semibold ${se.is_active?"bg-emerald-100 text-emerald-800":"bg-rose-100 text-rose-800"}`,children:se.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"px-2 py-2 font-mono text-[11px]",children:se.endpoint_fingerprint}),n.jsx("td",{className:"px-2 py-2",children:pf(se.last_seen_at)}),n.jsx("td",{className:"px-2 py-2",children:se.last_error?.trim()?se.last_error:"-"}),n.jsx("td",{className:"px-2 py-2",title:se.user_agent??"-",children:TM(se.user_agent)}),n.jsx("td",{className:"px-2 py-2 font-mono text-[11px]",title:se.endpoint,children:CM(se.endpoint)}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("button",{type:"button",disabled:!f||!o||Ne.isPending||!H,onClick:()=>{if(!H)return;if(!se.is_active){Ne.mutate({adminUserId:H.id,claimId:se.id,nextActive:!0});return}window.confirm("Bu admin claim pasife alinsin mi?")&&Ne.mutate({adminUserId:H.id,claimId:se.id,nextActive:!1})},className:`rounded-lg border px-2 py-1 text-[11px] font-semibold disabled:opacity-50 ${se.is_active?"border-rose-300 text-rose-700 hover:bg-rose-50":"border-emerald-300 text-emerald-700 hover:bg-emerald-50"}`,children:se.is_active?"Pasife Al":"Aktif Et"})})]},se.id))})]}),ue.data.claims.length===0?n.jsx("p",{className:"px-2 py-2 text-sm text-slate-500",children:"Bu kullanici icin claim kaydi yok."}):null]})]}),n.jsxs("section",{children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Olusturulan Claim Davetleri"}),n.jsxs("div",{className:"mt-2 max-h-40 overflow-auto rounded-lg border border-slate-200",children:[n.jsxs("table",{className:"min-w-full text-left text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-50 uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2",children:"ID"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Deneme"}),n.jsx("th",{className:"px-2 py-2",children:"Bitis"}),n.jsx("th",{className:"px-2 py-2",children:"Kullanan"})]})}),n.jsx("tbody",{children:ue.data.created_invites.map(se=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-2 py-2",children:se.id}),n.jsx("td",{className:"px-2 py-2",children:se.status}),n.jsxs("td",{className:"px-2 py-2",children:[se.attempt_count,"/",se.max_attempts]}),n.jsx("td",{className:"px-2 py-2",children:pf(se.expires_at)}),n.jsx("td",{className:"px-2 py-2",children:se.used_by_username??"-"})]},se.id))})]}),ue.data.created_invites.length===0?n.jsx("p",{className:"px-2 py-2 text-sm text-slate-500",children:"Kayit yok."}):null]})]}),n.jsxs("section",{children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Kullandigi Claim Davetleri"}),n.jsxs("div",{className:"mt-2 max-h-40 overflow-auto rounded-lg border border-slate-200",children:[n.jsxs("table",{className:"min-w-full text-left text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-50 uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2",children:"ID"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Olusturan"}),n.jsx("th",{className:"px-2 py-2",children:"Kullanilan Zaman"})]})}),n.jsx("tbody",{children:ue.data.used_invites.map(se=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-2 py-2",children:se.id}),n.jsx("td",{className:"px-2 py-2",children:se.status}),n.jsx("td",{className:"px-2 py-2",children:se.created_by_username}),n.jsx("td",{className:"px-2 py-2",children:pf(se.used_at)})]},se.id))})]}),ue.data.used_invites.length===0?n.jsx("p",{className:"px-2 py-2 text-sm text-slate-500",children:"Kayit yok."}):null]})]})]}):null]}):null}),n.jsx(Js,{open:!!_,title:"Admin Kullanici Duzenle",onClose:()=>{S(null),O("")},children:_?n.jsxs("form",{onSubmit:Be,className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Kullanici Adi",n.jsx("input",{value:w,onChange:se=>E(se.target.value),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ad Soyad",n.jsx("input",{value:R,onChange:se=>T(se.target.value),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Yeni Sifre (bos birakilirsa degismez)",n.jsx("input",{type:"password",value:A,onChange:se=>O(se.target.value),disabled:!f||!o,minLength:8,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Opsiyonel"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-700",children:[n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:q,disabled:!f||!o,onChange:se=>U(se.target.checked)}),"Aktif"]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:D,disabled:!f||!o,onChange:se=>G(se.target.checked)}),"Super Admin"]})]}),D?n.jsx("p",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:"Super admin secili oldugu icin tum modullerde tam yetki verilecektir."}):n.jsx(xv,{value:Y,disabled:!f||!o,onChange:ee}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{S(null),O("")},className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50",children:"Vazgec"}),n.jsx("button",{type:"submit",disabled:!f||!o||Le.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Le.isPending?"Kaydediliyor...":"Guncelle"})]})]}):null}),n.jsx(Js,{open:!!J,title:J?`MFA Yonetimi: ${J.username}`:"MFA Yonetimi",onClose:Ee,children:J?n.jsxs("div",{className:"space-y-4",children:[ce.isLoading?n.jsx("p",{className:"text-sm text-slate-500",children:"MFA durumu yukleniyor..."}):null,Oe?n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-3 text-sm text-slate-700",children:[n.jsxs("p",{children:["Durum:"," ",n.jsx("strong",{children:Oe.mfa_enabled?"MFA aktif":Oe.has_secret?"Kurulum bekliyor":"Kapali"})]}),n.jsxs("p",{children:["Aktif recovery kodu: ",Oe.recovery_code_active_count]}),n.jsxs("p",{children:["Son guncelleme:"," ",Oe.updated_at?new Date(Oe.updated_at).toLocaleString("tr-TR"):"-"]}),n.jsxs("p",{children:["Kod son gecerlilik:"," ",Oe.recovery_code_expires_at?new Date(Oe.recovery_code_expires_at).toLocaleDateString("tr-TR"):"-"]})]}):null,n.jsx("div",{className:"flex flex-wrap gap-2",children:n.jsx("button",{type:"button",disabled:Ge.isPending,onClick:()=>Ge.mutate(J.id),className:"rounded-lg border border-brand-300 px-3 py-2 text-xs font-semibold text-brand-700 hover:bg-brand-50 disabled:opacity-60",children:Ge.isPending?"Baslatiliyor...":"Kurulumu Baslat / Yenile"})}),ye?n.jsxs("form",{onSubmit:Ct,className:"space-y-3 rounded-lg border border-brand-100 bg-brand-50/40 px-3 py-3",children:[n.jsx("p",{className:"text-sm font-medium text-brand-900",children:"1) Authenticator ile QR kodu tarat"}),K?n.jsx("img",{src:K,alt:"MFA QR",className:"h-44 w-44 rounded-lg border border-brand-200 bg-white p-2"}):n.jsx("p",{className:"text-xs text-slate-600",children:"QR olusturulamadi. Asagidaki anahtari manuel girin."}),n.jsxs("p",{className:"text-xs text-slate-700",children:["Secret: ",n.jsx("code",{children:ye.secret_key})]}),n.jsx("p",{className:"text-xs text-slate-600 break-all",children:ye.otpauth_uri}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["2) Uretilen 6 haneli kod",n.jsx("input",{value:Se,onChange:se=>oe(se.target.value),inputMode:"numeric",pattern:"[0-9]*",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"123456"})]}),n.jsx("button",{type:"submit",disabled:Ye.isPending||!Se.trim(),className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Ye.isPending?"Onaylaniyor...":"MFA Kurulumunu Onayla"})]}):null,n.jsxs("div",{className:"space-y-2 rounded-lg border border-slate-200 px-3 py-3",children:[n.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Kritik Islemler (Sizin sifreniz gerekli)"}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["Mevcut sifreniz",n.jsx("input",{type:"password",value:le,onChange:se=>Q(se.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Sizin admin sifreniz"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",disabled:Tt.isPending||!le.trim()||!Oe?.mfa_enabled,onClick:()=>{le.trim()&&Tt.mutate({adminUserId:J.id,currentPassword:le})},className:"rounded-lg border border-emerald-300 px-3 py-2 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:Tt.isPending?"Yenileniyor...":"Recovery Kodlarini Yenile"}),n.jsx("button",{type:"button",disabled:ht.isPending||!le.trim(),onClick:()=>{!window.confirm(`${J.username} icin MFA sifirlansin mi?`)||!le.trim()||ht.mutate({adminUserId:J.id,currentPassword:le})},className:"rounded-lg border border-rose-300 px-3 py-2 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:ht.isPending?"Sifirlaniyor...":"MFA Sifirla"})]})]}),ke.length>0?n.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-3 text-sm text-amber-900",children:[n.jsx("p",{className:"font-semibold",children:"Recovery kodlari (tek seferlik gosterim)"}),n.jsxs("p",{className:"mt-1 text-xs",children:["Gecerlilik:"," ",z?new Date(z).toLocaleDateString("tr-TR"):"-"]}),n.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:ke.map(se=>n.jsx("code",{className:"rounded bg-white px-2 py-1 text-slate-900",children:se},se))})]}):null]}):null})]})}function yv({label:e,value:s,onCopy:l}){return n.jsxs("label",{className:"block text-sm text-slate-700",children:[e,n.jsxs("div",{className:"mt-1 flex items-stretch gap-2",children:[n.jsx("input",{readOnly:!0,value:s,className:"w-full rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm text-slate-700"}),n.jsx("button",{type:"button",onClick:()=>l(s),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:"Kopyala"})]})]})}var su={exports:{}};var MM=su.exports,vv;function zM(){return vv||(vv=1,(function(e,s){(function(l,o){o(s)})(MM,(function(l){var o="1.9.4";function d(i){var u,h,y,N;for(h=1,y=arguments.length;h<y;h++){N=arguments[h];for(u in N)i[u]=N[u]}return i}var m=Object.create||(function(){function i(){}return function(u){return i.prototype=u,new i}})();function f(i,u){var h=Array.prototype.slice;if(i.bind)return i.bind.apply(i,h.call(arguments,1));var y=h.call(arguments,2);return function(){return i.apply(u,y.length?y.concat(h.call(arguments)):arguments)}}var g=0;function v(i){return"_leaflet_id"in i||(i._leaflet_id=++g),i._leaflet_id}function _(i,u,h){var y,N,k,Z;return Z=function(){y=!1,N&&(k.apply(h,N),N=!1)},k=function(){y?N=arguments:(i.apply(h,arguments),setTimeout(Z,u),y=!0)},k}function S(i,u,h){var y=u[1],N=u[0],k=y-N;return i===y&&h?i:((i-N)%k+k)%k+N}function w(){return!1}function E(i,u){if(u===!1)return i;var h=Math.pow(10,u===void 0?6:u);return Math.round(i*h)/h}function R(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function T(i){return R(i).split(/\s+/)}function A(i,u){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?m(i.options):{});for(var h in u)i.options[h]=u[h];return i.options}function O(i,u,h){var y=[];for(var N in i)y.push(encodeURIComponent(h?N.toUpperCase():N)+"="+encodeURIComponent(i[N]));return(!u||u.indexOf("?")===-1?"?":"&")+y.join("&")}var q=/\{ *([\w_ -]+) *\}/g;function U(i,u){return i.replace(q,function(h,y){var N=u[y];if(N===void 0)throw new Error("No value provided for variable "+h);return typeof N=="function"&&(N=N(u)),N})}var D=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function G(i,u){for(var h=0;h<i.length;h++)if(i[h]===u)return h;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ee(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var H=0;function te(i){var u=+new Date,h=Math.max(0,16-(u-H));return H=u+h,window.setTimeout(i,h)}var J=window.requestAnimationFrame||ee("RequestAnimationFrame")||te,fe=window.cancelAnimationFrame||ee("CancelAnimationFrame")||ee("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function ye(i,u,h){if(h&&J===te)i.call(u);else return J.call(window,f(i,u))}function de(i){i&&fe.call(window,i)}var Se={__proto__:null,extend:d,create:m,bind:f,get lastId(){return g},stamp:v,throttle:_,wrapNum:S,falseFn:w,formatNum:E,trim:R,splitWords:T,setOptions:A,getParamString:O,template:U,isArray:D,indexOf:G,emptyImageUrl:Y,requestFn:J,cancelFn:fe,requestAnimFrame:ye,cancelAnimFrame:de};function oe(){}oe.extend=function(i){var u=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=u.__super__=this.prototype,y=m(h);y.constructor=u,u.prototype=y;for(var N in this)Object.prototype.hasOwnProperty.call(this,N)&&N!=="prototype"&&N!=="__super__"&&(u[N]=this[N]);return i.statics&&d(u,i.statics),i.includes&&(le(i.includes),d.apply(null,[y].concat(i.includes))),d(y,i),delete y.statics,delete y.includes,y.options&&(y.options=h.options?m(h.options):{},d(y.options,i.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var k=0,Z=y._initHooks.length;k<Z;k++)y._initHooks[k].call(this)}},u},oe.include=function(i){var u=this.prototype.options;return d(this.prototype,i),i.options&&(this.prototype.options=u,this.mergeOptions(i.options)),this},oe.mergeOptions=function(i){return d(this.prototype.options,i),this},oe.addInitHook=function(i){var u=Array.prototype.slice.call(arguments,1),h=typeof i=="function"?i:function(){this[i].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function le(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=D(i)?i:[i];for(var u=0;u<i.length;u++)i[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Q={on:function(i,u,h){if(typeof i=="object")for(var y in i)this._on(y,i[y],u);else{i=T(i);for(var N=0,k=i.length;N<k;N++)this._on(i[N],u,h)}return this},off:function(i,u,h){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var y in i)this._off(y,i[y],u);else{i=T(i);for(var N=arguments.length===1,k=0,Z=i.length;k<Z;k++)N?this._off(i[k]):this._off(i[k],u,h)}return this},_on:function(i,u,h,y){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(i,u,h)===!1){h===this&&(h=void 0);var N={fn:u,ctx:h};y&&(N.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(N)}},_off:function(i,u,h){var y,N,k;if(this._events&&(y=this._events[i],!!y)){if(arguments.length===1){if(this._firingCount)for(N=0,k=y.length;N<k;N++)y[N].fn=w;delete this._events[i];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var Z=this._listens(i,u,h);if(Z!==!1){var re=y[Z];this._firingCount&&(re.fn=w,this._events[i]=y=y.slice()),y.splice(Z,1)}}},fire:function(i,u,h){if(!this.listens(i,h))return this;var y=d({},u,{type:i,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var N=this._events[i];if(N){this._firingCount=this._firingCount+1||1;for(var k=0,Z=N.length;k<Z;k++){var re=N[k],xe=re.fn;re.once&&this.off(i,xe,re.ctx),xe.call(re.ctx||this,y)}this._firingCount--}}return h&&this._propagateEvent(y),this},listens:function(i,u,h,y){typeof i!="string"&&console.warn('"string" type argument expected');var N=u;typeof u!="function"&&(y=!!u,N=void 0,h=void 0);var k=this._events&&this._events[i];if(k&&k.length&&this._listens(i,N,h)!==!1)return!0;if(y){for(var Z in this._eventParents)if(this._eventParents[Z].listens(i,u,h,y))return!0}return!1},_listens:function(i,u,h){if(!this._events)return!1;var y=this._events[i]||[];if(!u)return!!y.length;h===this&&(h=void 0);for(var N=0,k=y.length;N<k;N++)if(y[N].fn===u&&y[N].ctx===h)return N;return!1},once:function(i,u,h){if(typeof i=="object")for(var y in i)this._on(y,i[y],u,!0);else{i=T(i);for(var N=0,k=i.length;N<k;N++)this._on(i[N],u,h,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[v(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[v(i)],this},_propagateEvent:function(i){for(var u in this._eventParents)this._eventParents[u].fire(i.type,d({layer:i.target,propagatedFrom:i.target},i),!0)}};Q.addEventListener=Q.on,Q.removeEventListener=Q.clearAllEventListeners=Q.off,Q.addOneTimeEventListener=Q.once,Q.fireEvent=Q.fire,Q.hasEventListeners=Q.listens;var K=oe.extend(Q);function X(i,u,h){this.x=h?Math.round(i):i,this.y=h?Math.round(u):u}var ke=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};X.prototype={clone:function(){return new X(this.x,this.y)},add:function(i){return this.clone()._add(je(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(je(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new X(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new X(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ke(this.x),this.y=ke(this.y),this},distanceTo:function(i){i=je(i);var u=i.x-this.x,h=i.y-this.y;return Math.sqrt(u*u+h*h)},equals:function(i){return i=je(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=je(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function je(i,u,h){return i instanceof X?i:D(i)?new X(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new X(i.x,i.y):new X(i,u,h)}function z(i,u){if(i)for(var h=u?[i,u]:i,y=0,N=h.length;y<N;y++)this.extend(h[y])}z.prototype={extend:function(i){var u,h;if(!i)return this;if(i instanceof X||typeof i[0]=="number"||"x"in i)u=h=je(i);else if(i=ne(i),u=i.min,h=i.max,!u||!h)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=h.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(i){return je((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return je(this.min.x,this.max.y)},getTopRight:function(){return je(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var u,h;return typeof i[0]=="number"||i instanceof X?i=je(i):i=ne(i),i instanceof z?(u=i.min,h=i.max):u=h=i,u.x>=this.min.x&&h.x<=this.max.x&&u.y>=this.min.y&&h.y<=this.max.y},intersects:function(i){i=ne(i);var u=this.min,h=this.max,y=i.min,N=i.max,k=N.x>=u.x&&y.x<=h.x,Z=N.y>=u.y&&y.y<=h.y;return k&&Z},overlaps:function(i){i=ne(i);var u=this.min,h=this.max,y=i.min,N=i.max,k=N.x>u.x&&y.x<h.x,Z=N.y>u.y&&y.y<h.y;return k&&Z},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var u=this.min,h=this.max,y=Math.abs(u.x-h.x)*i,N=Math.abs(u.y-h.y)*i;return ne(je(u.x-y,u.y-N),je(h.x+y,h.y+N))},equals:function(i){return i?(i=ne(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function ne(i,u){return!i||i instanceof z?i:new z(i,u)}function I(i,u){if(i)for(var h=u?[i,u]:i,y=0,N=h.length;y<N;y++)this.extend(h[y])}I.prototype={extend:function(i){var u=this._southWest,h=this._northEast,y,N;if(i instanceof ue)y=i,N=i;else if(i instanceof I){if(y=i._southWest,N=i._northEast,!y||!N)return this}else return i?this.extend(Ne(i)||ce(i)):this;return!u&&!h?(this._southWest=new ue(y.lat,y.lng),this._northEast=new ue(N.lat,N.lng)):(u.lat=Math.min(y.lat,u.lat),u.lng=Math.min(y.lng,u.lng),h.lat=Math.max(N.lat,h.lat),h.lng=Math.max(N.lng,h.lng)),this},pad:function(i){var u=this._southWest,h=this._northEast,y=Math.abs(u.lat-h.lat)*i,N=Math.abs(u.lng-h.lng)*i;return new I(new ue(u.lat-y,u.lng-N),new ue(h.lat+y,h.lng+N))},getCenter:function(){return new ue((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ue(this.getNorth(),this.getWest())},getSouthEast:function(){return new ue(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof ue||"lat"in i?i=Ne(i):i=ce(i);var u=this._southWest,h=this._northEast,y,N;return i instanceof I?(y=i.getSouthWest(),N=i.getNorthEast()):y=N=i,y.lat>=u.lat&&N.lat<=h.lat&&y.lng>=u.lng&&N.lng<=h.lng},intersects:function(i){i=ce(i);var u=this._southWest,h=this._northEast,y=i.getSouthWest(),N=i.getNorthEast(),k=N.lat>=u.lat&&y.lat<=h.lat,Z=N.lng>=u.lng&&y.lng<=h.lng;return k&&Z},overlaps:function(i){i=ce(i);var u=this._southWest,h=this._northEast,y=i.getSouthWest(),N=i.getNorthEast(),k=N.lat>u.lat&&y.lat<h.lat,Z=N.lng>u.lng&&y.lng<h.lng;return k&&Z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,u){return i?(i=ce(i),this._southWest.equals(i.getSouthWest(),u)&&this._northEast.equals(i.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ce(i,u){return i instanceof I?i:new I(i,u)}function ue(i,u,h){if(isNaN(i)||isNaN(u))throw new Error("Invalid LatLng object: ("+i+", "+u+")");this.lat=+i,this.lng=+u,h!==void 0&&(this.alt=+h)}ue.prototype={equals:function(i,u){if(!i)return!1;i=Ne(i);var h=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return h<=(u===void 0?1e-9:u)},toString:function(i){return"LatLng("+E(this.lat,i)+", "+E(this.lng,i)+")"},distanceTo:function(i){return Le.distance(this,Ne(i))},wrap:function(){return Le.wrapLatLng(this)},toBounds:function(i){var u=180*i/40075017,h=u/Math.cos(Math.PI/180*this.lat);return ce([this.lat-u,this.lng-h],[this.lat+u,this.lng+h])},clone:function(){return new ue(this.lat,this.lng,this.alt)}};function Ne(i,u,h){return i instanceof ue?i:D(i)&&typeof i[0]!="object"?i.length===3?new ue(i[0],i[1],i[2]):i.length===2?new ue(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new ue(i.lat,"lng"in i?i.lng:i.lon,i.alt):u===void 0?null:new ue(i,u,h)}var Re={latLngToPoint:function(i,u){var h=this.projection.project(i),y=this.scale(u);return this.transformation._transform(h,y)},pointToLatLng:function(i,u){var h=this.scale(u),y=this.transformation.untransform(i,h);return this.projection.unproject(y)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var u=this.projection.bounds,h=this.scale(i),y=this.transformation.transform(u.min,h),N=this.transformation.transform(u.max,h);return new z(y,N)},infinite:!1,wrapLatLng:function(i){var u=this.wrapLng?S(i.lng,this.wrapLng,!0):i.lng,h=this.wrapLat?S(i.lat,this.wrapLat,!0):i.lat,y=i.alt;return new ue(h,u,y)},wrapLatLngBounds:function(i){var u=i.getCenter(),h=this.wrapLatLng(u),y=u.lat-h.lat,N=u.lng-h.lng;if(y===0&&N===0)return i;var k=i.getSouthWest(),Z=i.getNorthEast(),re=new ue(k.lat-y,k.lng-N),xe=new ue(Z.lat-y,Z.lng-N);return new I(re,xe)}},Le=d({},Re,{wrapLng:[-180,180],R:6371e3,distance:function(i,u){var h=Math.PI/180,y=i.lat*h,N=u.lat*h,k=Math.sin((u.lat-i.lat)*h/2),Z=Math.sin((u.lng-i.lng)*h/2),re=k*k+Math.cos(y)*Math.cos(N)*Z*Z,xe=2*Math.atan2(Math.sqrt(re),Math.sqrt(1-re));return this.R*xe}}),me=6378137,Ge={R:me,MAX_LATITUDE:85.0511287798,project:function(i){var u=Math.PI/180,h=this.MAX_LATITUDE,y=Math.max(Math.min(h,i.lat),-h),N=Math.sin(y*u);return new X(this.R*i.lng*u,this.R*Math.log((1+N)/(1-N))/2)},unproject:function(i){var u=180/Math.PI;return new ue((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*u,i.x*u/this.R)},bounds:(function(){var i=me*Math.PI;return new z([-i,-i],[i,i])})()};function Ye(i,u,h,y){if(D(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=u,this._c=h,this._d=y}Ye.prototype={transform:function(i,u){return this._transform(i.clone(),u)},_transform:function(i,u){return u=u||1,i.x=u*(this._a*i.x+this._b),i.y=u*(this._c*i.y+this._d),i},untransform:function(i,u){return u=u||1,new X((i.x/u-this._b)/this._a,(i.y/u-this._d)/this._c)}};function Tt(i,u,h,y){return new Ye(i,u,h,y)}var ht=d({},Le,{code:"EPSG:3857",projection:Ge,transformation:(function(){var i=.5/(Math.PI*Ge.R);return Tt(i,.5,-i,.5)})()}),M=d({},ht,{code:"EPSG:900913"});function Oe(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function mt(i,u){var h="",y,N,k,Z,re,xe;for(y=0,k=i.length;y<k;y++){for(re=i[y],N=0,Z=re.length;N<Z;N++)xe=re[N],h+=(N?"L":"M")+xe.x+" "+xe.y;h+=u?Fe.svg?"z":"x":""}return h||"M0 0"}var Rt=document.documentElement.style,It="ActiveXObject"in window,Vt=It&&!document.addEventListener,ae="msLaunchUri"in navigator&&!("documentMode"in document),Ee=pt("webkit"),Be=pt("android"),Ct=pt("android 2")||pt("android 3"),se=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ke=Be&&pt("Google")&&se<537&&!("AudioNode"in window),_t=!!window.opera,pn=!ae&&pt("chrome"),Lt=pt("gecko")&&!Ee&&!_t&&!It,rt=!pn&&pt("safari"),Qn=pt("phantom"),_e="OTransition"in Rt,tt=navigator.platform.indexOf("Win")===0,ut=It&&"transition"in Rt,Nt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ct,$t="MozPerspective"in Rt,Dt=!window.L_DISABLE_3D&&(ut||Nt||$t)&&!_e&&!Qn,Xt=typeof orientation<"u"||pt("mobile"),Bn=Xt&&Ee,Pt=Xt&&Nt,ct=!window.PointerEvent&&window.MSPointerEvent,dn=!!(window.PointerEvent||ct),jn="ontouchstart"in window||!!window.TouchEvent,et=!window.L_NO_TOUCH&&(jn||dn),kn=Xt&&_t,gt=Xt&&Lt,Wa=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Dn=(function(){var i=!1;try{var u=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",w,u),window.removeEventListener("testPassiveEventSupport",w,u)}catch{}return i})(),Kt=(function(){return!!document.createElement("canvas").getContext})(),Gn=!!(document.createElementNS&&Oe("svg").createSVGRect),es=!!Gn&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),$=!Gn&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var u=i.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}})(),qe=navigator.platform.indexOf("Mac")===0,xn=navigator.platform.indexOf("Linux")===0;function pt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Fe={ie:It,ielt9:Vt,edge:ae,webkit:Ee,android:Be,android23:Ct,androidStock:Ke,opera:_t,chrome:pn,gecko:Lt,safari:rt,phantom:Qn,opera12:_e,win:tt,ie3d:ut,webkit3d:Nt,gecko3d:$t,any3d:Dt,mobile:Xt,mobileWebkit:Bn,mobileWebkit3d:Pt,msPointer:ct,pointer:dn,touch:et,touchNative:jn,mobileOpera:kn,mobileGecko:gt,retina:Wa,passiveEvents:Dn,canvas:Kt,svg:Gn,vml:$,inlineSvg:es,mac:qe,linux:xn},sn=Fe.msPointer?"MSPointerDown":"pointerdown",yn=Fe.msPointer?"MSPointerMove":"pointermove",En=Fe.msPointer?"MSPointerUp":"pointerup",Wt=Fe.msPointer?"MSPointerCancel":"pointercancel",hn={touchstart:sn,touchmove:yn,touchend:En,touchcancel:Wt},aa={touchstart:ja,touchmove:Un,touchend:Un,touchcancel:Un},F={},Pe=!1;function dt(i,u,h){return u==="touchstart"&&St(),aa[u]?(h=aa[u].bind(this,h),i.addEventListener(hn[u],h,!1),h):(console.warn("wrong event specified:",u),w)}function Vn(i,u,h){if(!hn[u]){console.warn("wrong event specified:",u);return}i.removeEventListener(hn[u],h,!1)}function Tn(i){F[i.pointerId]=i}function B(i){F[i.pointerId]&&(F[i.pointerId]=i)}function Ze(i){delete F[i.pointerId]}function St(){Pe||(document.addEventListener(sn,Tn,!0),document.addEventListener(yn,B,!0),document.addEventListener(En,Ze,!0),document.addEventListener(Wt,Ze,!0),Pe=!0)}function Un(i,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var h in F)u.touches.push(F[h]);u.changedTouches=[u],i(u)}}function ja(i,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&Cn(u),Un(i,u)}function vn(i){var u={},h,y;for(y in i)h=i[y],u[y]=h&&h.bind?h.bind(i):h;return i=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var rn=200;function hr(i,u){i.addEventListener("dblclick",u);var h=0,y;function N(k){if(k.detail!==1){y=k.detail;return}if(!(k.pointerType==="mouse"||k.sourceCapabilities&&!k.sourceCapabilities.firesTouchEvents)){var Z=gr(k);if(!(Z.some(function(xe){return xe instanceof HTMLLabelElement&&xe.attributes.for})&&!Z.some(function(xe){return xe instanceof HTMLInputElement||xe instanceof HTMLSelectElement}))){var re=Date.now();re-h<=rn?(y++,y===2&&u(vn(k))):y=1,h=re}}}return i.addEventListener("click",N),{dblclick:u,simDblclick:N}}function bs(i,u){i.removeEventListener("dblclick",u.dblclick),i.removeEventListener("click",u.simDblclick)}var ts=Rs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ns=Rs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Bt=ns==="webkitTransition"||ns==="OTransition"?ns+"End":"transitionend";function Ws(i){return typeof i=="string"?document.getElementById(i):i}function ei(i,u){var h=i.style[u]||i.currentStyle&&i.currentStyle[u];if((!h||h==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(i,null);h=y?y[u]:null}return h==="auto"?null:h}function jt(i,u,h){var y=document.createElement(i);return y.className=u||"",h&&h.appendChild(y),y}function Ut(i){var u=i.parentNode;u&&u.removeChild(i)}function sa(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Ln(i){var u=i.parentNode;u&&u.lastChild!==i&&u.appendChild(i)}function Sa(i){var u=i.parentNode;u&&u.firstChild!==i&&u.insertBefore(i,u.firstChild)}function zs(i,u){if(i.classList!==void 0)return i.classList.contains(u);var h=Si(i);return h.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(h)}function lt(i,u){if(i.classList!==void 0)for(var h=T(u),y=0,N=h.length;y<N;y++)i.classList.add(h[y]);else if(!zs(i,u)){var k=Si(i);Os(i,(k?k+" ":"")+u)}}function ln(i,u){i.classList!==void 0?i.classList.remove(u):Os(i,R((" "+Si(i)+" ").replace(" "+u+" "," ")))}function Os(i,u){i.className.baseVal===void 0?i.className=u:i.className.baseVal=u}function Si(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function en(i,u){"opacity"in i.style?i.style.opacity=u:"filter"in i.style&&ti(i,u)}function ti(i,u){var h=!1,y="DXImageTransform.Microsoft.Alpha";try{h=i.filters.item(y)}catch{if(u===1)return}u=Math.round(u*100),h?(h.Enabled=u!==100,h.Opacity=u):i.style.filter+=" progid:"+y+"(opacity="+u+")"}function Rs(i){for(var u=document.documentElement.style,h=0;h<i.length;h++)if(i[h]in u)return i[h];return!1}function P(i,u,h){var y=u||new X(0,0);i.style[ts]=(Fe.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(h?" scale("+h+")":"")}function De(i,u){i._leaflet_pos=u,Fe.any3d?P(i,u):(i.style.left=u.x+"px",i.style.top=u.y+"px")}function yt(i){return i._leaflet_pos||new X(0,0)}var ia,ra,wi;if("onselectstart"in document)ia=function(){it(window,"selectstart",Cn)},ra=function(){Yt(window,"selectstart",Cn)};else{var _s=Rs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ia=function(){if(_s){var i=document.documentElement.style;wi=i[_s],i[_s]="none"}},ra=function(){_s&&(document.documentElement.style[_s]=wi,wi=void 0)}}function tl(){it(window,"dragstart",Cn)}function fr(){Yt(window,"dragstart",Cn)}var nl,eo;function ki(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(wa(),nl=i,eo=i.style.outlineStyle,i.style.outlineStyle="none",it(window,"keydown",wa))}function wa(){nl&&(nl.style.outlineStyle=eo,nl=void 0,eo=void 0,Yt(window,"keydown",wa))}function al(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function pr(i){var u=i.getBoundingClientRect();return{x:u.width/i.offsetWidth||1,y:u.height/i.offsetHeight||1,boundingClientRect:u}}var Ei={__proto__:null,TRANSFORM:ts,TRANSITION:ns,TRANSITION_END:Bt,get:Ws,getStyle:ei,create:jt,remove:Ut,empty:sa,toFront:Ln,toBack:Sa,hasClass:zs,addClass:lt,removeClass:ln,setClass:Os,getClass:Si,setOpacity:en,testProp:Rs,setTransform:P,setPosition:De,getPosition:yt,get disableTextSelection(){return ia},get enableTextSelection(){return ra},disableImageDrag:tl,enableImageDrag:fr,preventOutline:ki,restoreOutline:wa,getSizedParentNode:al,getScale:pr};function it(i,u,h,y){if(u&&typeof u=="object")for(var N in u)Fa(i,N,u[N],h);else{u=T(u);for(var k=0,Z=u.length;k<Z;k++)Fa(i,u[k],h,y)}return this}var Ua="_leaflet_events";function Yt(i,u,h,y){if(arguments.length===1)to(i),delete i[Ua];else if(u&&typeof u=="object")for(var N in u)xr(i,N,u[N],h);else if(u=T(u),arguments.length===2)to(i,function(re){return G(u,re)!==-1});else for(var k=0,Z=u.length;k<Z;k++)xr(i,u[k],h,y);return this}function to(i,u){for(var h in i[Ua]){var y=h.split(/\d/)[0];(!u||u(y))&&xr(i,y,null,null,h)}}var ni={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Fa(i,u,h,y){var N=u+v(h)+(y?"_"+v(y):"");if(i[Ua]&&i[Ua][N])return this;var k=function(re){return h.call(y||i,re||window.event)},Z=k;!Fe.touchNative&&Fe.pointer&&u.indexOf("touch")===0?k=dt(i,u,k):Fe.touch&&u==="dblclick"?k=hr(i,k):"addEventListener"in i?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?i.addEventListener(ni[u]||u,k,Fe.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(k=function(re){re=re||window.event,Ns(i,re)&&Z(re)},i.addEventListener(ni[u],k,!1)):i.addEventListener(u,Z,!1):i.attachEvent("on"+u,k),i[Ua]=i[Ua]||{},i[Ua][N]=k}function xr(i,u,h,y,N){N=N||u+v(h)+(y?"_"+v(y):"");var k=i[Ua]&&i[Ua][N];if(!k)return this;!Fe.touchNative&&Fe.pointer&&u.indexOf("touch")===0?Vn(i,u,k):Fe.touch&&u==="dblclick"?bs(i,k):"removeEventListener"in i?i.removeEventListener(ni[u]||u,k,!1):i.detachEvent("on"+u,k),i[Ua][N]=null}function qa(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function as(i){return Fa(i,"wheel",qa),this}function ai(i){return it(i,"mousedown touchstart dblclick contextmenu",qa),i._leaflet_disable_click=!0,this}function Cn(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Ds(i){return Cn(i),qa(i),this}function gr(i){if(i.composedPath)return i.composedPath();for(var u=[],h=i.target;h;)u.push(h),h=h.parentNode;return u}function yr(i,u){if(!u)return new X(i.clientX,i.clientY);var h=pr(u),y=h.boundingClientRect;return new X((i.clientX-y.left)/h.x-u.clientLeft,(i.clientY-y.top)/h.y-u.clientTop)}var _u=Fe.linux&&Fe.chrome?window.devicePixelRatio:Fe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function la(i){return Fe.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/_u:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Ns(i,u){var h=u.relatedTarget;if(!h)return!0;try{for(;h&&h!==i;)h=h.parentNode}catch{return!1}return h!==i}var sl={__proto__:null,on:it,off:Yt,stopPropagation:qa,disableScrollPropagation:as,disableClickPropagation:ai,preventDefault:Cn,stop:Ds,getPropagationPath:gr,getMousePosition:yr,getWheelDelta:la,isExternalTarget:Ns,addListener:it,removeListener:Yt},Ti=K.extend({run:function(i,u,h,y){this.stop(),this._el=i,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=yt(i),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ye(this._animate,this),this._step()},_step:function(i){var u=+new Date-this._startTime,h=this._duration*1e3;u<h?this._runFrame(this._easeOut(u/h),i):(this._runFrame(1),this._complete())},_runFrame:function(i,u){var h=this._startPos.add(this._offset.multiplyBy(i));u&&h._round(),De(this._el,h),this.fire("step")},_complete:function(){de(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),At=K.extend({options:{crs:ht,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,u){u=A(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(Ne(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ns&&Fe.any3d&&!Fe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),it(this._proxy,Bt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,u,h){if(u=u===void 0?this._zoom:this._limitZoom(u),i=this._limitCenter(Ne(i),u,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=d({animate:h.animate},h.zoom),h.pan=d({animate:h.animate,duration:h.duration},h.pan));var y=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,u,h.zoom):this._tryAnimatedPan(i,h.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(i,u,h.pan&&h.pan.noMoveStart),this},setZoom:function(i,u){return this._loaded?this.setView(this.getCenter(),i,{zoom:u}):(this._zoom=i,this)},zoomIn:function(i,u){return i=i||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,u)},zoomOut:function(i,u){return i=i||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,u)},setZoomAround:function(i,u,h){var y=this.getZoomScale(u),N=this.getSize().divideBy(2),k=i instanceof X?i:this.latLngToContainerPoint(i),Z=k.subtract(N).multiplyBy(1-1/y),re=this.containerPointToLatLng(N.add(Z));return this.setView(re,u,{zoom:h})},_getBoundsCenterZoom:function(i,u){u=u||{},i=i.getBounds?i.getBounds():ce(i);var h=je(u.paddingTopLeft||u.padding||[0,0]),y=je(u.paddingBottomRight||u.padding||[0,0]),N=this.getBoundsZoom(i,!1,h.add(y));if(N=typeof u.maxZoom=="number"?Math.min(u.maxZoom,N):N,N===1/0)return{center:i.getCenter(),zoom:N};var k=y.subtract(h).divideBy(2),Z=this.project(i.getSouthWest(),N),re=this.project(i.getNorthEast(),N),xe=this.unproject(Z.add(re).divideBy(2).add(k),N);return{center:xe,zoom:N}},fitBounds:function(i,u){if(i=ce(i),!i.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(i,u);return this.setView(h.center,h.zoom,u)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,u){return this.setView(i,this._zoom,{pan:u})},panBy:function(i,u){if(i=je(i).round(),u=u||{},!i.x&&!i.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ti,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){lt(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,h,u.duration||.25,u.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,u,h){if(h=h||{},h.animate===!1||!Fe.any3d)return this.setView(i,u,h);this._stop();var y=this.project(this.getCenter()),N=this.project(i),k=this.getSize(),Z=this._zoom;i=Ne(i),u=u===void 0?Z:u;var re=Math.max(k.x,k.y),xe=re*this.getZoomScale(Z,u),Ae=N.distanceTo(y)||1,Ie=1.42,We=Ie*Ie;function vt(Sn){var ks=Sn?-1:1,li=Sn?xe:re,go=xe*xe-re*re+ks*We*We*Ae*Ae,Rr=2*li*We*Ae,Dr=go/Rr,Hs=Math.sqrt(Dr*Dr+1)-Dr,Es=Hs<1e-9?-18:Math.log(Hs);return Es}function $n(Sn){return(Math.exp(Sn)-Math.exp(-Sn))/2}function An(Sn){return(Math.exp(Sn)+Math.exp(-Sn))/2}function va(Sn){return $n(Sn)/An(Sn)}var Ft=vt(0);function qt(Sn){return re*(An(Ft)/An(Ft+Ie*Sn))}function wt(Sn){return re*(An(Ft)*va(Ft+Ie*Sn)-$n(Ft))/We}function qs(Sn){return 1-Math.pow(1-Sn,1.5)}var Ca=Date.now(),yl=(vt(1)-Ft)/Ie,Zs=h.duration?1e3*h.duration:1e3*yl*.8;function xo(){var Sn=(Date.now()-Ca)/Zs,ks=qs(Sn)*yl;Sn<=1?(this._flyToFrame=ye(xo,this),this._move(this.unproject(y.add(N.subtract(y).multiplyBy(wt(ks)/Ae)),Z),this.getScaleZoom(re/qt(ks),Z),{flyTo:!0})):this._move(i,u)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),xo.call(this),this},flyToBounds:function(i,u){var h=this._getBoundsCenterZoom(i,u);return this.flyTo(h.center,h.zoom,u)},setMaxBounds:function(i){return i=ce(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var u=this.options.minZoom;return this.options.minZoom=i,this._loaded&&u!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var u=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&u!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,u){this._enforcingBounds=!0;var h=this.getCenter(),y=this._limitCenter(h,this._zoom,ce(i));return h.equals(y)||this.panTo(y,u),this._enforcingBounds=!1,this},panInside:function(i,u){u=u||{};var h=je(u.paddingTopLeft||u.padding||[0,0]),y=je(u.paddingBottomRight||u.padding||[0,0]),N=this.project(this.getCenter()),k=this.project(i),Z=this.getPixelBounds(),re=ne([Z.min.add(h),Z.max.subtract(y)]),xe=re.getSize();if(!re.contains(k)){this._enforcingBounds=!0;var Ae=k.subtract(re.getCenter()),Ie=re.extend(k).getSize().subtract(xe);N.x+=Ae.x<0?-Ie.x:Ie.x,N.y+=Ae.y<0?-Ie.y:Ie.y,this.panTo(this.unproject(N),u),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=d({animate:!1,pan:!0},i===!0?{animate:!0}:i);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),y=u.divideBy(2).round(),N=h.divideBy(2).round(),k=y.subtract(N);return!k.x&&!k.y?this:(i.animate&&i.pan?this.panBy(k):(i.pan&&this._rawPanBy(k),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=d({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=f(this._handleGeolocationResponse,this),h=f(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,h,i):navigator.geolocation.getCurrentPosition(u,h,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var u=i.code,h=i.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var u=i.coords.latitude,h=i.coords.longitude,y=new ue(u,h),N=y.toBounds(i.coords.accuracy*2),k=this._locateOptions;if(k.setView){var Z=this.getBoundsZoom(N);this.setView(y,k.maxZoom?Math.min(Z,k.maxZoom):Z)}var re={latlng:y,bounds:N,timestamp:i.timestamp};for(var xe in i.coords)typeof i.coords[xe]=="number"&&(re[xe]=i.coords[xe]);this.fire("locationfound",re)}},addHandler:function(i,u){if(!u)return this;var h=this[i]=new u(this);return this._handlers.push(h),this.options[i]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ut(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(de(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Ut(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,u){var h="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),y=jt("div",h,u||this._mapPane);return i&&(this._panes[i]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),u=this.unproject(i.getBottomLeft()),h=this.unproject(i.getTopRight());return new I(u,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,u,h){i=ce(i),h=je(h||[0,0]);var y=this.getZoom()||0,N=this.getMinZoom(),k=this.getMaxZoom(),Z=i.getNorthWest(),re=i.getSouthEast(),xe=this.getSize().subtract(h),Ae=ne(this.project(re,y),this.project(Z,y)).getSize(),Ie=Fe.any3d?this.options.zoomSnap:1,We=xe.x/Ae.x,vt=xe.y/Ae.y,$n=u?Math.max(We,vt):Math.min(We,vt);return y=this.getScaleZoom($n,y),Ie&&(y=Math.round(y/(Ie/100))*(Ie/100),y=u?Math.ceil(y/Ie)*Ie:Math.floor(y/Ie)*Ie),Math.max(N,Math.min(k,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new X(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,u){var h=this._getTopLeftPoint(i,u);return new z(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,u){var h=this.options.crs;return u=u===void 0?this._zoom:u,h.scale(i)/h.scale(u)},getScaleZoom:function(i,u){var h=this.options.crs;u=u===void 0?this._zoom:u;var y=h.zoom(i*h.scale(u));return isNaN(y)?1/0:y},project:function(i,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(Ne(i),u)},unproject:function(i,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(je(i),u)},layerPointToLatLng:function(i){var u=je(i).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(i){var u=this.project(Ne(i))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(Ne(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ce(i))},distance:function(i,u){return this.options.crs.distance(Ne(i),Ne(u))},containerPointToLayerPoint:function(i){return je(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return je(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var u=this.containerPointToLayerPoint(je(i));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ne(i)))},mouseEventToContainerPoint:function(i){return yr(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var u=this._container=Ws(i);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");it(u,"scroll",this._onScroll,this),this._containerId=v(u)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Fe.any3d,lt(i,"leaflet-container"+(Fe.touch?" leaflet-touch":"")+(Fe.retina?" leaflet-retina":"")+(Fe.ielt9?" leaflet-oldie":"")+(Fe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=ei(i,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),De(this._mapPane,new X(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(lt(i.markerPane,"leaflet-zoom-hide"),lt(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,u,h){De(this._mapPane,new X(0,0));var y=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var N=this._zoom!==u;this._moveStart(N,h)._move(i,u)._moveEnd(N),this.fire("viewreset"),y&&this.fire("load")},_moveStart:function(i,u){return i&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(i,u,h,y){u===void 0&&(u=this._zoom);var N=this._zoom!==u;return this._zoom=u,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),y?h&&h.pinch&&this.fire("zoom",h):((N||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return de(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){De(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[v(this._container)]=this;var u=i?Yt:it;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Fe.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){de(this._resizeRequest),this._resizeRequest=ye(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,u){for(var h=[],y,N=u==="mouseout"||u==="mouseover",k=i.target||i.srcElement,Z=!1;k;){if(y=this._targets[v(k)],y&&(u==="click"||u==="preclick")&&this._draggableMoved(y)){Z=!0;break}if(y&&y.listens(u,!0)&&(N&&!Ns(k,i)||(h.push(y),N))||k===this._container)break;k=k.parentNode}return!h.length&&!Z&&!N&&this.listens(u,!0)&&(h=[this]),h},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var u=i.target||i.srcElement;if(!(!this._loaded||u._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(u))){var h=i.type;h==="mousedown"&&ki(u),this._fireDOMEvent(i,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,u,h){if(i.type==="click"){var y=d({},i);y.type="preclick",this._fireDOMEvent(y,y.type,h)}var N=this._findEventTargets(i,u);if(h){for(var k=[],Z=0;Z<h.length;Z++)h[Z].listens(u,!0)&&k.push(h[Z]);N=k.concat(N)}if(N.length){u==="contextmenu"&&Cn(i);var re=N[0],xe={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Ae=re.getLatLng&&(!re._radius||re._radius<=10);xe.containerPoint=Ae?this.latLngToContainerPoint(re.getLatLng()):this.mouseEventToContainerPoint(i),xe.layerPoint=this.containerPointToLayerPoint(xe.containerPoint),xe.latlng=Ae?re.getLatLng():this.layerPointToLatLng(xe.layerPoint)}for(Z=0;Z<N.length;Z++)if(N[Z].fire(u,xe,!0),xe.originalEvent._stopped||N[Z].options.bubblingMouseEvents===!1&&G(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,u=this._handlers.length;i<u;i++)this._handlers[i].disable()},whenReady:function(i,u){return this._loaded?i.call(u||this,{target:this}):this.on("load",i,u),this},_getMapPanePos:function(){return yt(this._mapPane)||new X(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,u){var h=i&&u!==void 0?this._getNewPixelOrigin(i,u):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,u){var h=this.getSize()._divideBy(2);return this.project(i,u)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,u,h){var y=this._getNewPixelOrigin(h,u);return this.project(i,u)._subtract(y)},_latLngBoundsToNewLayerBounds:function(i,u,h){var y=this._getNewPixelOrigin(h,u);return ne([this.project(i.getSouthWest(),u)._subtract(y),this.project(i.getNorthWest(),u)._subtract(y),this.project(i.getSouthEast(),u)._subtract(y),this.project(i.getNorthEast(),u)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,u,h){if(!h)return i;var y=this.project(i,u),N=this.getSize().divideBy(2),k=new z(y.subtract(N),y.add(N)),Z=this._getBoundsOffset(k,h,u);return Math.abs(Z.x)<=1&&Math.abs(Z.y)<=1?i:this.unproject(y.add(Z),u)},_limitOffset:function(i,u){if(!u)return i;var h=this.getPixelBounds(),y=new z(h.min.add(i),h.max.add(i));return i.add(this._getBoundsOffset(y,u))},_getBoundsOffset:function(i,u,h){var y=ne(this.project(u.getNorthEast(),h),this.project(u.getSouthWest(),h)),N=y.min.subtract(i.min),k=y.max.subtract(i.max),Z=this._rebound(N.x,-k.x),re=this._rebound(N.y,-k.y);return new X(Z,re)},_rebound:function(i,u){return i+u>0?Math.round(i-u)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(u))},_limitZoom:function(i){var u=this.getMinZoom(),h=this.getMaxZoom(),y=Fe.any3d?this.options.zoomSnap:1;return y&&(i=Math.round(i/y)*y),Math.max(u,Math.min(h,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ln(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,u){var h=this._getCenterOffset(i)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,u),!0)},_createAnimProxy:function(){var i=this._proxy=jt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(u){var h=ts,y=this._proxy.style[h];P(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),y===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ut(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),u=this.getZoom();P(this._proxy,this.project(i,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,u,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(u),N=this._getCenterOffset(i)._divideBy(1-1/y);return h.animate!==!0&&!this.getSize().contains(N)?!1:(ye(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(i,u,!0)},this),!0)},_animateZoom:function(i,u,h,y){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=u,lt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:u,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ln(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function no(i,u){return new At(i,u)}var ya=oe.extend({options:{position:"topright"},initialize:function(i){A(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var u=this._map;return u&&u.removeControl(this),this.options.position=i,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var u=this._container=this.onAdd(i),h=this.getPosition(),y=i._controlCorners[h];return lt(u,"leaflet-control"),h.indexOf("bottom")!==-1?y.insertBefore(u,y.firstChild):y.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ut(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),js=function(i){return new ya(i)};At.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},u="leaflet-",h=this._controlContainer=jt("div",u+"control-container",this._container);function y(N,k){var Z=u+N+" "+u+k;i[N+k]=jt("div",Z,h)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Ut(this._controlCorners[i]);Ut(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var vr=ya.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,u,h,y){return h<y?-1:y<h?1:0}},initialize:function(i,u,h){A(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var y in i)this._addLayer(i[y],y);for(y in u)this._addLayer(u[y],y,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return ya.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,u){return this._addLayer(i,u),this._map?this._update():this},addOverlay:function(i,u){return this._addLayer(i,u,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var u=this._getLayer(v(i));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){lt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(lt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):ln(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ln(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",u=this._container=jt("div",i),h=this.options.collapsed;u.setAttribute("aria-haspopup",!0),ai(u),as(u);var y=this._section=jt("section",i+"-list");h&&(this._map.on("click",this.collapse,this),it(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var N=this._layersLink=jt("a",i+"-toggle",u);N.href="#",N.title="Layers",N.setAttribute("role","button"),it(N,{keydown:function(k){k.keyCode===13&&this._expandSafely()},click:function(k){Cn(k),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=jt("div",i+"-base",y),this._separator=jt("div",i+"-separator",y),this._overlaysList=jt("div",i+"-overlays",y),u.appendChild(y)},_getLayer:function(i){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&v(this._layers[u].layer)===i)return this._layers[u]},_addLayer:function(i,u,h){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:u,overlay:h}),this.options.sortLayers&&this._layers.sort(f(function(y,N){return this.options.sortFunction(y.layer,N.layer,y.name,N.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;sa(this._baseLayersList),sa(this._overlaysList),this._layerControlInputs=[];var i,u,h,y,N=0;for(h=0;h<this._layers.length;h++)y=this._layers[h],this._addItem(y),u=u||y.overlay,i=i||!y.overlay,N+=y.overlay?0:1;return this.options.hideSingleBase&&(i=i&&N>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=u&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var u=this._getLayer(v(i.target)),h=u.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;h&&this._map.fire(h,u)},_createRadioElement:function(i,u){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(u?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=h,y.firstChild},_addItem:function(i){var u=document.createElement("label"),h=this._map.hasLayer(i.layer),y;i.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=h):y=this._createRadioElement("leaflet-base-layers_"+v(this),h),this._layerControlInputs.push(y),y.layerId=v(i.layer),it(y,"click",this._onInputClick,this);var N=document.createElement("span");N.innerHTML=" "+i.name;var k=document.createElement("span");u.appendChild(k),k.appendChild(y),k.appendChild(N);var Z=i.overlay?this._overlaysList:this._baseLayersList;return Z.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,u,h,y=[],N=[];this._handlingClick=!0;for(var k=i.length-1;k>=0;k--)u=i[k],h=this._getLayer(u.layerId).layer,u.checked?y.push(h):u.checked||N.push(h);for(k=0;k<N.length;k++)this._map.hasLayer(N[k])&&this._map.removeLayer(N[k]);for(k=0;k<y.length;k++)this._map.hasLayer(y[k])||this._map.addLayer(y[k]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,u,h,y=this._map.getZoom(),N=i.length-1;N>=0;N--)u=i[N],h=this._getLayer(u.layerId).layer,u.disabled=h.options.minZoom!==void 0&&y<h.options.minZoom||h.options.maxZoom!==void 0&&y>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,it(i,"click",Cn),this.expand();var u=this;setTimeout(function(){Yt(i,"click",Cn),u._preventClick=!1})}}),Nu=function(i,u,h){return new vr(i,u,h)},ao=ya.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var u="leaflet-control-zoom",h=jt("div",u+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,u+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,u+"-out",h,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,u,h,y,N){var k=jt("a",h,y);return k.innerHTML=i,k.href="#",k.title=u,k.setAttribute("role","button"),k.setAttribute("aria-label",u),ai(k),it(k,"click",Ds),it(k,"click",N,this),it(k,"click",this._refocusOnMap,this),k},_updateDisabled:function(){var i=this._map,u="leaflet-disabled";ln(this._zoomInButton,u),ln(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(lt(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(lt(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});At.mergeOptions({zoomControl:!0}),At.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ao,this.addControl(this.zoomControl))});var Dd=function(i){return new ao(i)},ju=ya.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var u="leaflet-control-scale",h=jt("div",u),y=this.options;return this._addScales(y,u+"-line",h),i.on(y.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),h},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,u,h){i.metric&&(this._mScale=jt("div",u,h)),i.imperial&&(this._iScale=jt("div",u,h))},_update:function(){var i=this._map,u=i.getSize().y/2,h=i.distance(i.containerPointToLatLng([0,u]),i.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(h)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var u=this._getRoundNum(i),h=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,h,u/i)},_updateImperial:function(i){var u=i*3.2808399,h,y,N;u>5280?(h=u/5280,y=this._getRoundNum(h),this._updateScale(this._iScale,y+" mi",y/h)):(N=this._getRoundNum(u),this._updateScale(this._iScale,N+" ft",N/u))},_updateScale:function(i,u,h){i.style.width=Math.round(this.options.maxWidth*h)+"px",i.innerHTML=u},_getRoundNum:function(i){var u=Math.pow(10,(Math.floor(i)+"").length-1),h=i/u;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,u*h}}),so=function(i){return new ju(i)},Ld='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',io=ya.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Fe.inlineSvg?Ld+" ":"")+"Leaflet</a>"},initialize:function(i){A(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=jt("div","leaflet-control-attribution"),ai(this._container);for(var u in i._layers)i._layers[u].getAttribution&&this.addAttribution(i._layers[u].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var u in this._attributions)this._attributions[u]&&i.push(u);var h=[];this.options.prefix&&h.push(this.options.prefix),i.length&&h.push(i.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});At.mergeOptions({attributionControl:!0}),At.addInitHook(function(){this.options.attributionControl&&new io().addTo(this)});var Pd=function(i){return new io(i)};ya.Layers=vr,ya.Zoom=ao,ya.Scale=ju,ya.Attribution=io,js.layers=Nu,js.zoom=Dd,js.scale=so,js.attribution=Pd;var ss=oe.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ss.addTo=function(i,u){return i.addHandler(u,this),this};var Id={Events:Q},ro=Fe.touch?"touchstart mousedown":"mousedown",Ls=K.extend({options:{clickTolerance:3},initialize:function(i,u,h,y){A(this,y),this._element=i,this._dragStartTarget=u||i,this._preventOutline=h},enable:function(){this._enabled||(it(this._dragStartTarget,ro,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ls._dragging===this&&this.finishDrag(!0),Yt(this._dragStartTarget,ro,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!zs(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Ls._dragging===this&&this.finishDrag();return}if(!(Ls._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Ls._dragging=this,this._preventOutline&&ki(this._element),tl(),ia(),!this._moving)){this.fire("down");var u=i.touches?i.touches[0]:i,h=al(this._element);this._startPoint=new X(u.clientX,u.clientY),this._startPos=yt(this._element),this._parentScale=pr(h);var y=i.type==="mousedown";it(document,y?"mousemove":"touchmove",this._onMove,this),it(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var u=i.touches&&i.touches.length===1?i.touches[0]:i,h=new X(u.clientX,u.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Cn(i),this._moved||(this.fire("dragstart"),this._moved=!0,lt(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),lt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),De(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){ln(document.body,"leaflet-dragging"),this._lastTarget&&(ln(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Yt(document,"mousemove touchmove",this._onMove,this),Yt(document,"mouseup touchend touchcancel",this._onUp,this),fr(),ra();var u=this._moved&&this._moving;this._moving=!1,Ls._dragging=!1,u&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Su(i,u,h){var y,N=[1,4,2,8],k,Z,re,xe,Ae,Ie,We,vt;for(k=0,Ie=i.length;k<Ie;k++)i[k]._code=si(i[k],u);for(re=0;re<4;re++){for(We=N[re],y=[],k=0,Ie=i.length,Z=Ie-1;k<Ie;Z=k++)xe=i[k],Ae=i[Z],xe._code&We?Ae._code&We||(vt=il(Ae,xe,We,u,h),vt._code=si(vt,u),y.push(vt)):(Ae._code&We&&(vt=il(Ae,xe,We,u,h),vt._code=si(vt,u),y.push(vt)),y.push(xe));i=y}return i}function wu(i,u){var h,y,N,k,Z,re,xe,Ae,Ie;if(!i||i.length===0)throw new Error("latlngs not passed");ka(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var We=Ne([0,0]),vt=ce(i),$n=vt.getNorthWest().distanceTo(vt.getSouthWest())*vt.getNorthEast().distanceTo(vt.getNorthWest());$n<1700&&(We=lo(i));var An=i.length,va=[];for(h=0;h<An;h++){var Ft=Ne(i[h]);va.push(u.project(Ne([Ft.lat-We.lat,Ft.lng-We.lng])))}for(re=xe=Ae=0,h=0,y=An-1;h<An;y=h++)N=va[h],k=va[y],Z=N.y*k.x-k.y*N.x,xe+=(N.x+k.x)*Z,Ae+=(N.y+k.y)*Z,re+=Z*3;re===0?Ie=va[0]:Ie=[xe/re,Ae/re];var qt=u.unproject(je(Ie));return Ne([qt.lat+We.lat,qt.lng+We.lng])}function lo(i){for(var u=0,h=0,y=0,N=0;N<i.length;N++){var k=Ne(i[N]);u+=k.lat,h+=k.lng,y++}return Ne([u/y,h/y])}var oo={__proto__:null,clipPolygon:Su,polygonCenter:wu,centroid:lo};function ku(i,u){if(!u||!i.length)return i.slice();var h=u*u;return i=Ud(i,h),i=Tu(i,h),i}function Eu(i,u,h){return Math.sqrt(br(i,u,h,!0))}function Bd(i,u,h){return br(i,u,h)}function Tu(i,u){var h=i.length,y=typeof Uint8Array<"u"?Uint8Array:Array,N=new y(h);N[0]=N[h-1]=1,uo(i,N,u,0,h-1);var k,Z=[];for(k=0;k<h;k++)N[k]&&Z.push(i[k]);return Z}function uo(i,u,h,y,N){var k=0,Z,re,xe;for(re=y+1;re<=N-1;re++)xe=br(i[re],i[y],i[N],!0),xe>k&&(Z=re,k=xe);k>h&&(u[Z]=1,uo(i,u,h,y,Z),uo(i,u,h,Z,N))}function Ud(i,u){for(var h=[i[0]],y=1,N=0,k=i.length;y<k;y++)Fd(i[y],i[N])>u&&(h.push(i[y]),N=y);return N<k-1&&h.push(i[k-1]),h}var Cu;function Au(i,u,h,y,N){var k=y?Cu:si(i,h),Z=si(u,h),re,xe,Ae;for(Cu=Z;;){if(!(k|Z))return[i,u];if(k&Z)return!1;re=k||Z,xe=il(i,u,re,h,N),Ae=si(xe,h),re===k?(i=xe,k=Ae):(u=xe,Z=Ae)}}function il(i,u,h,y,N){var k=u.x-i.x,Z=u.y-i.y,re=y.min,xe=y.max,Ae,Ie;return h&8?(Ae=i.x+k*(xe.y-i.y)/Z,Ie=xe.y):h&4?(Ae=i.x+k*(re.y-i.y)/Z,Ie=re.y):h&2?(Ae=xe.x,Ie=i.y+Z*(xe.x-i.x)/k):h&1&&(Ae=re.x,Ie=i.y+Z*(re.x-i.x)/k),new X(Ae,Ie,N)}function si(i,u){var h=0;return i.x<u.min.x?h|=1:i.x>u.max.x&&(h|=2),i.y<u.min.y?h|=4:i.y>u.max.y&&(h|=8),h}function Fd(i,u){var h=u.x-i.x,y=u.y-i.y;return h*h+y*y}function br(i,u,h,y){var N=u.x,k=u.y,Z=h.x-N,re=h.y-k,xe=Z*Z+re*re,Ae;return xe>0&&(Ae=((i.x-N)*Z+(i.y-k)*re)/xe,Ae>1?(N=h.x,k=h.y):Ae>0&&(N+=Z*Ae,k+=re*Ae)),Z=i.x-N,re=i.y-k,y?Z*Z+re*re:new X(N,k)}function ka(i){return!D(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function rl(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ka(i)}function Ci(i,u){var h,y,N,k,Z,re,xe,Ae;if(!i||i.length===0)throw new Error("latlngs not passed");ka(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Ie=Ne([0,0]),We=ce(i),vt=We.getNorthWest().distanceTo(We.getSouthWest())*We.getNorthEast().distanceTo(We.getNorthWest());vt<1700&&(Ie=lo(i));var $n=i.length,An=[];for(h=0;h<$n;h++){var va=Ne(i[h]);An.push(u.project(Ne([va.lat-Ie.lat,va.lng-Ie.lng])))}for(h=0,y=0;h<$n-1;h++)y+=An[h].distanceTo(An[h+1])/2;if(y===0)Ae=An[0];else for(h=0,k=0;h<$n-1;h++)if(Z=An[h],re=An[h+1],N=Z.distanceTo(re),k+=N,k>y){xe=(k-y)/N,Ae=[re.x-xe*(re.x-Z.x),re.y-xe*(re.y-Z.y)];break}var Ft=u.unproject(je(Ae));return Ne([Ft.lat+Ie.lat,Ft.lng+Ie.lng])}var qd={__proto__:null,simplify:ku,pointToSegmentDistance:Eu,closestPointOnSegment:Bd,clipSegment:Au,_getEdgeIntersection:il,_getBitCode:si,_sqClosestPointOnSegment:br,isFlat:ka,_flat:rl,polylineCenter:Ci},ll={project:function(i){return new X(i.lng,i.lat)},unproject:function(i){return new ue(i.y,i.x)},bounds:new z([-180,-90],[180,90])},ol={R:6378137,R_MINOR:6356752314245179e-9,bounds:new z([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var u=Math.PI/180,h=this.R,y=i.lat*u,N=this.R_MINOR/h,k=Math.sqrt(1-N*N),Z=k*Math.sin(y),re=Math.tan(Math.PI/4-y/2)/Math.pow((1-Z)/(1+Z),k/2);return y=-h*Math.log(Math.max(re,1e-10)),new X(i.lng*u*h,y)},unproject:function(i){for(var u=180/Math.PI,h=this.R,y=this.R_MINOR/h,N=Math.sqrt(1-y*y),k=Math.exp(-i.y/h),Z=Math.PI/2-2*Math.atan(k),re=0,xe=.1,Ae;re<15&&Math.abs(xe)>1e-7;re++)Ae=N*Math.sin(Z),Ae=Math.pow((1-Ae)/(1+Ae),N/2),xe=Math.PI/2-2*Math.atan(k*Ae)-Z,Z+=xe;return new ue(Z*u,i.x*u/h)}},Mu={__proto__:null,LonLat:ll,Mercator:ol,SphericalMercator:Ge},zu=d({},Le,{code:"EPSG:3395",projection:ol,transformation:(function(){var i=.5/(Math.PI*ol.R);return Tt(i,.5,-i,.5)})()}),co=d({},Le,{code:"EPSG:4326",projection:ll,transformation:Tt(1/180,1,-1/180,.5)}),Ai=d({},Re,{projection:ll,transformation:Tt(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,u){var h=u.lng-i.lng,y=u.lat-i.lat;return Math.sqrt(h*h+y*y)},infinite:!0});Re.Earth=Le,Re.EPSG3395=zu,Re.EPSG3857=ht,Re.EPSG900913=M,Re.EPSG4326=co,Re.Simple=Ai;var Za=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[v(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[v(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var u=i.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var h=this.getEvents();u.on(h,this),this.once("remove",function(){u.off(h,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});At.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var u=v(i);return this._layers[u]?this:(this._layers[u]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var u=v(i);return this._layers[u]?(this._loaded&&i.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return v(i)in this._layers},eachLayer:function(i,u){for(var h in this._layers)i.call(u,this._layers[h]);return this},_addLayers:function(i){i=i?D(i)?i:[i]:[];for(var u=0,h=i.length;u<h;u++)this.addLayer(i[u])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[v(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var u=v(i);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,u=-1/0,h=this._getZoomSpan();for(var y in this._zoomBoundLayers){var N=this._zoomBoundLayers[y].options;i=N.minZoom===void 0?i:Math.min(i,N.minZoom),u=N.maxZoom===void 0?u:Math.max(u,N.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=i===1/0?void 0:i,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Mi=Za.extend({initialize:function(i,u){A(this,u),this._layers={};var h,y;if(i)for(h=0,y=i.length;h<y;h++)this.addLayer(i[h])},addLayer:function(i){var u=this.getLayerId(i);return this._layers[u]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var u=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(i){var u=typeof i=="number"?i:this.getLayerId(i);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var u=Array.prototype.slice.call(arguments,1),h,y;for(h in this._layers)y=this._layers[h],y[i]&&y[i].apply(y,u);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,u){for(var h in this._layers)i.call(u,this._layers[h]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return v(i)}}),Zd=function(i,u){return new Mi(i,u)},is=Mi.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Mi.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Mi.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new I;for(var u in this._layers){var h=this._layers[u];i.extend(h.getBounds?h.getBounds():h.getLatLng())}return i}}),Ou=function(i,u){return new is(i,u)},rs=oe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){A(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,u){var h=this._getIconUrl(i);if(!h){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(h,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(y,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(i,u){var h=this.options,y=h[u+"Size"];typeof y=="number"&&(y=[y,y]);var N=je(y),k=je(u==="shadow"&&h.shadowAnchor||h.iconAnchor||N&&N.divideBy(2,!0));i.className="leaflet-marker-"+u+" "+(h.className||""),k&&(i.style.marginLeft=-k.x+"px",i.style.marginTop=-k.y+"px"),N&&(i.style.width=N.x+"px",i.style.height=N.y+"px")},_createImg:function(i,u){return u=u||document.createElement("img"),u.src=i,u},_getIconUrl:function(i){return Fe.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function _r(i){return new rs(i)}var Nr=rs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Nr.imagePath!="string"&&(Nr.imagePath=this._detectIconPath()),(this.options.imagePath||Nr.imagePath)+rs.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var u=function(h,y,N){var k=y.exec(h);return k&&k[N]};return i=u(i,/^url\((['"])?(.+)\1\)$/,2),i&&u(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=jt("div","leaflet-default-icon-path",document.body),u=ei(i,"background-image")||ei(i,"backgroundImage");if(document.body.removeChild(i),u=this._stripUrl(u),u)return u;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),jr=ss.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Ls(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),lt(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ln(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var u=this._marker,h=u._map,y=this._marker.options.autoPanSpeed,N=this._marker.options.autoPanPadding,k=yt(u._icon),Z=h.getPixelBounds(),re=h.getPixelOrigin(),xe=ne(Z.min._subtract(re).add(N),Z.max._subtract(re).subtract(N));if(!xe.contains(k)){var Ae=je((Math.max(xe.max.x,k.x)-xe.max.x)/(Z.max.x-xe.max.x)-(Math.min(xe.min.x,k.x)-xe.min.x)/(Z.min.x-xe.min.x),(Math.max(xe.max.y,k.y)-xe.max.y)/(Z.max.y-xe.max.y)-(Math.min(xe.min.y,k.y)-xe.min.y)/(Z.min.y-xe.min.y)).multiplyBy(y);h.panBy(Ae,{animate:!1}),this._draggable._newPos._add(Ae),this._draggable._startPos._add(Ae),De(u._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=ye(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(de(this._panRequest),this._panRequest=ye(this._adjustPan.bind(this,i)))},_onDrag:function(i){var u=this._marker,h=u._shadow,y=yt(u._icon),N=u._map.layerPointToLatLng(y);h&&De(h,y),u._latlng=N,i.latlng=N,i.oldLatLng=this._oldLatLng,u.fire("move",i).fire("drag",i)},_onDragEnd:function(i){de(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Sr=Za.extend({options:{icon:new Nr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,u){A(this,u),this._latlng=Ne(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var u=this._latlng;return this._latlng=Ne(i),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=i.icon.createIcon(this._icon),y=!1;h!==this._icon&&(this._icon&&this._removeIcon(),y=!0,i.title&&(h.title=i.title),h.tagName==="IMG"&&(h.alt=i.alt||"")),lt(h,u),i.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(h,"focus",this._panOnFocus,this);var N=i.icon.createShadow(this._shadow),k=!1;N!==this._shadow&&(this._removeShadow(),k=!0),N&&(lt(N,u),N.alt=""),this._shadow=N,i.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),N&&k&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Yt(this._icon,"focus",this._panOnFocus,this),Ut(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ut(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&De(this._icon,i),this._shadow&&De(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var u=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(lt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),jr)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new jr(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&en(this._icon,i),this._shadow&&en(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var u=this.options.icon.options,h=u.iconSize?je(u.iconSize):je(0,0),y=u.iconAnchor?je(u.iconAnchor):je(0,0);i.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:h.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ru(i,u){return new Sr(i,u)}var ls=Za.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return A(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),zi=ls.extend({options:{fill:!0,radius:10},initialize:function(i,u){A(this,u),this._latlng=Ne(i),this._radius=this.options.radius},setLatLng:function(i){var u=this._latlng;return this._latlng=Ne(i),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var u=i&&i.radius||this._radius;return ls.prototype.setStyle.call(this,i),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,u=this._radiusY||i,h=this._clickTolerance(),y=[i+h,u+h];this._pxBounds=new z(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Du(i,u){return new zi(i,u)}var ul=zi.extend({initialize:function(i,u,h){if(typeof u=="number"&&(u=d({},h,{radius:u})),A(this,u),this._latlng=Ne(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new I(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:ls.prototype.setStyle,_project:function(){var i=this._latlng.lng,u=this._latlng.lat,h=this._map,y=h.options.crs;if(y.distance===Le.distance){var N=Math.PI/180,k=this._mRadius/Le.R/N,Z=h.project([u+k,i]),re=h.project([u-k,i]),xe=Z.add(re).divideBy(2),Ae=h.unproject(xe).lat,Ie=Math.acos((Math.cos(k*N)-Math.sin(u*N)*Math.sin(Ae*N))/(Math.cos(u*N)*Math.cos(Ae*N)))/N;(isNaN(Ie)||Ie===0)&&(Ie=k/Math.cos(Math.PI/180*u)),this._point=xe.subtract(h.getPixelOrigin()),this._radius=isNaN(Ie)?0:xe.x-h.project([Ae,i-Ie]).x,this._radiusY=xe.y-Z.y}else{var We=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(We).x}this._updateBounds()}});function Lu(i,u,h){return new ul(i,u,h)}var Ss=ls.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,u){A(this,u),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var u=1/0,h=null,y=br,N,k,Z=0,re=this._parts.length;Z<re;Z++)for(var xe=this._parts[Z],Ae=1,Ie=xe.length;Ae<Ie;Ae++){N=xe[Ae-1],k=xe[Ae];var We=y(i,N,k,!0);We<u&&(u=We,h=y(i,N,k))}return h&&(h.distance=Math.sqrt(u)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ci(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,u){return u=u||this._defaultShape(),i=Ne(i),u.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new I,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return ka(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var u=[],h=ka(i),y=0,N=i.length;y<N;y++)h?(u[y]=Ne(i[y]),this._bounds.extend(u[y])):u[y]=this._convertLatLngs(i[y]);return u},_project:function(){var i=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),u=new X(i,i);this._rawPxBounds&&(this._pxBounds=new z([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(i,u,h){var y=i[0]instanceof ue,N=i.length,k,Z;if(y){for(Z=[],k=0;k<N;k++)Z[k]=this._map.latLngToLayerPoint(i[k]),h.extend(Z[k]);u.push(Z)}else for(k=0;k<N;k++)this._projectLatlngs(i[k],u,h)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,h,y,N,k,Z,re,xe;for(h=0,N=0,k=this._rings.length;h<k;h++)for(xe=this._rings[h],y=0,Z=xe.length;y<Z-1;y++)re=Au(xe[y],xe[y+1],i,y,!0),re&&(u[N]=u[N]||[],u[N].push(re[0]),(re[1]!==xe[y+1]||y===Z-2)&&(u[N].push(re[1]),N++))}},_simplifyPoints:function(){for(var i=this._parts,u=this.options.smoothFactor,h=0,y=i.length;h<y;h++)i[h]=ku(i[h],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,u){var h,y,N,k,Z,re,xe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(h=0,k=this._parts.length;h<k;h++)for(re=this._parts[h],y=0,Z=re.length,N=Z-1;y<Z;N=y++)if(!(!u&&y===0)&&Eu(i,re[N],re[y])<=xe)return!0;return!1}});function Hd(i,u){return new Ss(i,u)}Ss._flat=rl;var Oi=Ss.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var u=Ss.prototype._convertLatLngs.call(this,i),h=u.length;return h>=2&&u[0]instanceof ue&&u[0].equals(u[h-1])&&u.pop(),u},_setLatLngs:function(i){Ss.prototype._setLatLngs.call(this,i),ka(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ka(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,u=this.options.weight,h=new X(u,u);if(i=new z(i.min.subtract(h),i.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,N=this._rings.length,k;y<N;y++)k=Su(this._rings[y],i,!0),k.length&&this._parts.push(k)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var u=!1,h,y,N,k,Z,re,xe,Ae;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(k=0,xe=this._parts.length;k<xe;k++)for(h=this._parts[k],Z=0,Ae=h.length,re=Ae-1;Z<Ae;re=Z++)y=h[Z],N=h[re],y.y>i.y!=N.y>i.y&&i.x<(N.x-y.x)*(i.y-y.y)/(N.y-y.y)+y.x&&(u=!u);return u||Ss.prototype._containsPoint.call(this,i,!0)}});function Kd(i,u){return new Oi(i,u)}var ws=is.extend({initialize:function(i,u){A(this,u),this._layers={},i&&this.addData(i)},addData:function(i){var u=D(i)?i:i.features,h,y,N;if(u){for(h=0,y=u.length;h<y;h++)N=u[h],(N.geometries||N.geometry||N.features||N.coordinates)&&this.addData(N);return this}var k=this.options;if(k.filter&&!k.filter(i))return this;var Z=Wn(i,k);return Z?(Z.feature=ml(i),Z.defaultOptions=Z.options,this.resetStyle(Z),k.onEachFeature&&k.onEachFeature(i,Z),this.addLayer(Z)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=d({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(u){this._setLayerStyle(u,i)},this)},_setLayerStyle:function(i,u){i.setStyle&&(typeof u=="function"&&(u=u(i.feature)),i.setStyle(u))}});function Wn(i,u){var h=i.type==="Feature"?i.geometry:i,y=h?h.coordinates:null,N=[],k=u&&u.pointToLayer,Z=u&&u.coordsToLatLng||cl,re,xe,Ae,Ie;if(!y&&!h)return null;switch(h.type){case"Point":return re=Z(y),Ri(k,i,re,u);case"MultiPoint":for(Ae=0,Ie=y.length;Ae<Ie;Ae++)re=Z(y[Ae]),N.push(Ri(k,i,re,u));return new is(N);case"LineString":case"MultiLineString":return xe=wr(y,h.type==="LineString"?0:1,Z),new Ss(xe,u);case"Polygon":case"MultiPolygon":return xe=wr(y,h.type==="Polygon"?1:2,Z),new Oi(xe,u);case"GeometryCollection":for(Ae=0,Ie=h.geometries.length;Ae<Ie;Ae++){var We=Wn({geometry:h.geometries[Ae],type:"Feature",properties:i.properties},u);We&&N.push(We)}return new is(N);case"FeatureCollection":for(Ae=0,Ie=h.features.length;Ae<Ie;Ae++){var vt=Wn(h.features[Ae],u);vt&&N.push(vt)}return new is(N);default:throw new Error("Invalid GeoJSON object.")}}function Ri(i,u,h,y){return i?i(u,h):new Sr(h,y&&y.markersInheritOptions&&y)}function cl(i){return new ue(i[1],i[0],i[2])}function wr(i,u,h){for(var y=[],N=0,k=i.length,Z;N<k;N++)Z=u?wr(i[N],u-1,h):(h||cl)(i[N]),y.push(Z);return y}function dl(i,u){return i=Ne(i),i.alt!==void 0?[E(i.lng,u),E(i.lat,u),E(i.alt,u)]:[E(i.lng,u),E(i.lat,u)]}function kr(i,u,h,y){for(var N=[],k=0,Z=i.length;k<Z;k++)N.push(u?kr(i[k],ka(i[k])?0:u-1,h,y):dl(i[k],y));return!u&&h&&N.length>0&&N.push(N[0].slice()),N}function Ps(i,u){return i.feature?d({},i.feature,{geometry:u}):ml(u)}function ml(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Is={toGeoJSON:function(i){return Ps(this,{type:"Point",coordinates:dl(this.getLatLng(),i)})}};Sr.include(Is),ul.include(Is),zi.include(Is),Ss.include({toGeoJSON:function(i){var u=!ka(this._latlngs),h=kr(this._latlngs,u?1:0,!1,i);return Ps(this,{type:(u?"Multi":"")+"LineString",coordinates:h})}}),Oi.include({toGeoJSON:function(i){var u=!ka(this._latlngs),h=u&&!ka(this._latlngs[0]),y=kr(this._latlngs,h?2:u?1:0,!0,i);return u||(y=[y]),Ps(this,{type:(h?"Multi":"")+"Polygon",coordinates:y})}}),Mi.include({toMultiPoint:function(i){var u=[];return this.eachLayer(function(h){u.push(h.toGeoJSON(i).geometry.coordinates)}),Ps(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(i){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(i);var h=u==="GeometryCollection",y=[];return this.eachLayer(function(N){if(N.toGeoJSON){var k=N.toGeoJSON(i);if(h)y.push(k.geometry);else{var Z=ml(k);Z.type==="FeatureCollection"?y.push.apply(y,Z.features):y.push(Z)}}}),h?Ps(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function hl(i,u){return new ws(i,u)}var Er=hl,Di=Za.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,u,h){this._url=i,this._bounds=ce(u),A(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(lt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ut(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Ln(this._image),this},bringToBack:function(){return this._map&&Sa(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ce(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",u=this._image=i?this._url:jt("img");if(lt(u,"leaflet-image-layer"),this._zoomAnimated&&lt(u,"leaflet-zoom-animated"),this.options.className&&lt(u,this.options.className),u.onselectstart=w,u.onmousemove=w,u.onload=f(this.fire,this,"load"),u.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(i){var u=this._map.getZoomScale(i.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;P(this._image,h,u)},_reset:function(){var i=this._image,u=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=u.getSize();De(i,u.min),i.style.width=h.x+"px",i.style.height=h.y+"px"},_updateOpacity:function(){en(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),Pu=function(i,u,h){return new Di(i,u,h)},Bs=Di.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",u=this._image=i?this._url:jt("video");if(lt(u,"leaflet-image-layer"),this._zoomAnimated&&lt(u,"leaflet-zoom-animated"),this.options.className&&lt(u,this.options.className),u.onselectstart=w,u.onmousemove=w,u.onloadeddata=f(this.fire,this,"load"),i){for(var h=u.getElementsByTagName("source"),y=[],N=0;N<h.length;N++)y.push(h[N].src);this._url=h.length>0?y:[u.src];return}D(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var k=0;k<this._url.length;k++){var Z=jt("source");Z.src=this._url[k],u.appendChild(Z)}}});function Li(i,u,h){return new Bs(i,u,h)}var fl=Di.extend({_initImage:function(){var i=this._image=this._url;lt(i,"leaflet-image-layer"),this._zoomAnimated&&lt(i,"leaflet-zoom-animated"),this.options.className&&lt(i,this.options.className),i.onselectstart=w,i.onmousemove=w}});function Iu(i,u,h){return new fl(i,u,h)}var ea=Za.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,u){i&&(i instanceof ue||D(i))?(this._latlng=Ne(i),A(this,u)):(A(this,i),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&en(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&en(this._container,1),this.bringToFront(),this.options.interactive&&(lt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(en(this._container,0),this._removeTimeout=setTimeout(f(Ut,void 0,this._container),200)):Ut(this._container),this.options.interactive&&(ln(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=Ne(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ln(this._container),this},bringToBack:function(){return this._map&&Sa(this._container),this},_prepareOpen:function(i){var u=this._source;if(!u._map)return!1;if(u instanceof is){u=null;var h=this._source._layers;for(var y in h)if(h[y]._map){u=h[y];break}if(!u)return!1;this._source=u}if(!i)if(u.getCenter)i=u.getCenter();else if(u.getLatLng)i=u.getLatLng();else if(u.getBounds)i=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")i.innerHTML=u;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),u=je(this.options.offset),h=this._getAnchor();this._zoomAnimated?De(this._container,i.add(h)):u=u.add(i).add(h);var y=this._containerBottom=-u.y,N=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=y+"px",this._container.style.left=N+"px"}},_getAnchor:function(){return[0,0]}});At.include({_initOverlay:function(i,u,h,y){var N=u;return N instanceof i||(N=new i(y).setContent(u)),h&&N.setLatLng(h),N}}),Za.include({_initOverlay:function(i,u,h,y){var N=h;return N instanceof i?(A(N,y),N._source=this):(N=u&&!y?u:new i(y,this),N.setContent(h)),N}});var Tr=ea.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,ea.prototype.openOn.call(this,i)},onAdd:function(i){ea.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ls||this._source.on("preclick",qa))},onRemove:function(i){ea.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ls||this._source.off("preclick",qa))},getEvents:function(){var i=ea.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",u=this._container=jt("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=jt("div",i+"-content-wrapper",u);if(this._contentNode=jt("div",i+"-content",h),ai(u),as(this._contentNode),it(u,"contextmenu",qa),this._tipContainer=jt("div",i+"-tip-container",u),this._tip=jt("div",i+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=jt("a",i+"-close-button",u);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',it(y,"click",function(N){Cn(N),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,u=i.style;u.width="",u.whiteSpace="nowrap";var h=i.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),u.width=h+1+"px",u.whiteSpace="",u.height="";var y=i.offsetHeight,N=this.options.maxHeight,k="leaflet-popup-scrolled";N&&y>N?(u.height=N+"px",lt(i,k)):ln(i,k),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var u=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),h=this._getAnchor();De(this._container,u.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,u=parseInt(ei(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+u,y=this._containerWidth,N=new X(this._containerLeft,-h-this._containerBottom);N._add(yt(this._container));var k=i.layerPointToContainerPoint(N),Z=je(this.options.autoPanPadding),re=je(this.options.autoPanPaddingTopLeft||Z),xe=je(this.options.autoPanPaddingBottomRight||Z),Ae=i.getSize(),Ie=0,We=0;k.x+y+xe.x>Ae.x&&(Ie=k.x+y-Ae.x+xe.x),k.x-Ie-re.x<0&&(Ie=k.x-re.x),k.y+h+xe.y>Ae.y&&(We=k.y+h-Ae.y+xe.y),k.y-We-re.y<0&&(We=k.y-re.y),(Ie||We)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([Ie,We]))}},_getAnchor:function(){return je(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Bu=function(i,u){return new Tr(i,u)};At.mergeOptions({closePopupOnClick:!0}),At.include({openPopup:function(i,u,h){return this._initOverlay(Tr,i,u,h).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Za.include({bindPopup:function(i,u){return this._popup=this._initOverlay(Tr,this._popup,i,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof is||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Ds(i);var u=i.layer||i.target;if(this._popup._source===u&&!(u instanceof ls)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=u,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Cr=ea.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){ea.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){ea.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=ea.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",u=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=jt("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var u,h,y=this._map,N=this._container,k=y.latLngToContainerPoint(y.getCenter()),Z=y.layerPointToContainerPoint(i),re=this.options.direction,xe=N.offsetWidth,Ae=N.offsetHeight,Ie=je(this.options.offset),We=this._getAnchor();re==="top"?(u=xe/2,h=Ae):re==="bottom"?(u=xe/2,h=0):re==="center"?(u=xe/2,h=Ae/2):re==="right"?(u=0,h=Ae/2):re==="left"?(u=xe,h=Ae/2):Z.x<k.x?(re="right",u=0,h=Ae/2):(re="left",u=xe+(Ie.x+We.x)*2,h=Ae/2),i=i.subtract(je(u,h,!0)).add(Ie).add(We),ln(N,"leaflet-tooltip-right"),ln(N,"leaflet-tooltip-left"),ln(N,"leaflet-tooltip-top"),ln(N,"leaflet-tooltip-bottom"),lt(N,"leaflet-tooltip-"+re),De(N,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&en(this._container,i)},_animateZoom:function(i){var u=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(u)},_getAnchor:function(){return je(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Qd=function(i,u){return new Cr(i,u)};At.include({openTooltip:function(i,u,h){return this._initOverlay(Cr,i,u,h).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Za.include({bindTooltip:function(i,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Cr,this._tooltip,i,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var u=i?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[u](h),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof is||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var u=typeof i.getElement=="function"&&i.getElement();u&&(it(u,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),it(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var u=typeof i.getElement=="function"&&i.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var u=i.latlng,h,y;this._tooltip.options.sticky&&i.originalEvent&&(h=this._map.mouseEventToContainerPoint(i.originalEvent),y=this._map.containerPointToLayerPoint(h),u=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(u)}});var Uu=rs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var u=i&&i.tagName==="DIV"?i:document.createElement("div"),h=this.options;if(h.html instanceof Element?(sa(u),u.appendChild(h.html)):u.innerHTML=h.html!==!1?h.html:"",h.bgPos){var y=je(h.bgPos);u.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function Gd(i){return new Uu(i)}rs.Default=Nr;var Pi=Za.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Fe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){A(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Ut(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ln(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Sa(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof X?i:new X(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var u=this.getPane().children,h=-i(-1/0,1/0),y=0,N=u.length,k;y<N;y++)k=u[y].style.zIndex,u[y]!==this._container&&k&&(h=i(h,+k));isFinite(h)&&(this.options.zIndex=h+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Fe.ielt9){en(this._container,this.options.opacity);var i=+new Date,u=!1,h=!1;for(var y in this._tiles){var N=this._tiles[y];if(!(!N.current||!N.loaded)){var k=Math.min(1,(i-N.loaded)/200);en(N.el,k),k<1?u=!0:(N.active?h=!0:this._onOpaqueTile(N),N.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),u&&(de(this._fadeFrame),this._fadeFrame=ye(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=jt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,u=this.options.maxZoom;if(i!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===i?(this._levels[h].el.style.zIndex=u-Math.abs(i-h),this._onUpdateLevel(h)):(Ut(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var y=this._levels[i],N=this._map;return y||(y=this._levels[i]={},y.el=jt("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=u,y.origin=N.project(N.unproject(N.getPixelOrigin()),i).round(),y.zoom=i,this._setZoomTransform(y,N.getCenter(),N.getZoom()),w(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var i,u,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)u=this._tiles[i],u.retain=u.current;for(i in this._tiles)if(u=this._tiles[i],u.current&&!u.active){var y=u.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var u in this._tiles)this._tiles[u].coords.z===i&&this._removeTile(u)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Ut(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,u,h,y){var N=Math.floor(i/2),k=Math.floor(u/2),Z=h-1,re=new X(+N,+k);re.z=+Z;var xe=this._tileCoordsToKey(re),Ae=this._tiles[xe];return Ae&&Ae.active?(Ae.retain=!0,!0):(Ae&&Ae.loaded&&(Ae.retain=!0),Z>y?this._retainParent(N,k,Z,y):!1)},_retainChildren:function(i,u,h,y){for(var N=2*i;N<2*i+2;N++)for(var k=2*u;k<2*u+2;k++){var Z=new X(N,k);Z.z=h+1;var re=this._tileCoordsToKey(Z),xe=this._tiles[re];if(xe&&xe.active){xe.retain=!0;continue}else xe&&xe.loaded&&(xe.retain=!0);h+1<y&&this._retainChildren(N,k,h+1,y)}},_resetView:function(i){var u=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var u=this.options;return u.minNativeZoom!==void 0&&i<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<i?u.maxNativeZoom:i},_setView:function(i,u,h,y){var N=Math.round(u);this.options.maxZoom!==void 0&&N>this.options.maxZoom||this.options.minZoom!==void 0&&N<this.options.minZoom?N=void 0:N=this._clampZoom(N);var k=this.options.updateWhenZooming&&N!==this._tileZoom;(!y||k)&&(this._tileZoom=N,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),N!==void 0&&this._update(i),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(i,u)},_setZoomTransforms:function(i,u){for(var h in this._levels)this._setZoomTransform(this._levels[h],i,u)},_setZoomTransform:function(i,u,h){var y=this._map.getZoomScale(h,i.zoom),N=i.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(u,h)).round();Fe.any3d?P(i.el,N,y):De(i.el,N)},_resetGrid:function(){var i=this._map,u=i.options.crs,h=this._tileSize=this.getTileSize(),y=this._tileZoom,N=this._map.getPixelWorldBounds(this._tileZoom);N&&(this._globalTileRange=this._pxBoundsToTileRange(N)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,u.wrapLng[0]],y).x/h.x),Math.ceil(i.project([0,u.wrapLng[1]],y).x/h.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([u.wrapLat[0],0],y).y/h.x),Math.ceil(i.project([u.wrapLat[1],0],y).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var u=this._map,h=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),y=u.getZoomScale(h,this._tileZoom),N=u.project(i,this._tileZoom).floor(),k=u.getSize().divideBy(y*2);return new z(N.subtract(k),N.add(k))},_update:function(i){var u=this._map;if(u){var h=this._clampZoom(u.getZoom());if(i===void 0&&(i=u.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(i),N=this._pxBoundsToTileRange(y),k=N.getCenter(),Z=[],re=this.options.keepBuffer,xe=new z(N.getBottomLeft().subtract([re,-re]),N.getTopRight().add([re,-re]));if(!(isFinite(N.min.x)&&isFinite(N.min.y)&&isFinite(N.max.x)&&isFinite(N.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ae in this._tiles){var Ie=this._tiles[Ae].coords;(Ie.z!==this._tileZoom||!xe.contains(new X(Ie.x,Ie.y)))&&(this._tiles[Ae].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(i,h);return}for(var We=N.min.y;We<=N.max.y;We++)for(var vt=N.min.x;vt<=N.max.x;vt++){var $n=new X(vt,We);if($n.z=this._tileZoom,!!this._isValidTile($n)){var An=this._tiles[this._tileCoordsToKey($n)];An?An.current=!0:Z.push($n)}}if(Z.sort(function(Ft,qt){return Ft.distanceTo(k)-qt.distanceTo(k)}),Z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var va=document.createDocumentFragment();for(vt=0;vt<Z.length;vt++)this._addTile(Z[vt],va);this._level.el.appendChild(va)}}}},_isValidTile:function(i){var u=this._map.options.crs;if(!u.infinite){var h=this._globalTileRange;if(!u.wrapLng&&(i.x<h.min.x||i.x>h.max.x)||!u.wrapLat&&(i.y<h.min.y||i.y>h.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(i);return ce(this.options.bounds).overlaps(y)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var u=this._map,h=this.getTileSize(),y=i.scaleBy(h),N=y.add(h),k=u.unproject(y,i.z),Z=u.unproject(N,i.z);return[k,Z]},_tileCoordsToBounds:function(i){var u=this._tileCoordsToNwSe(i),h=new I(u[0],u[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var u=i.split(":"),h=new X(+u[0],+u[1]);return h.z=+u[2],h},_removeTile:function(i){var u=this._tiles[i];u&&(Ut(u.el),delete this._tiles[i],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){lt(i,"leaflet-tile");var u=this.getTileSize();i.style.width=u.x+"px",i.style.height=u.y+"px",i.onselectstart=w,i.onmousemove=w,Fe.ielt9&&this.options.opacity<1&&en(i,this.options.opacity)},_addTile:function(i,u){var h=this._getTilePos(i),y=this._tileCoordsToKey(i),N=this.createTile(this._wrapCoords(i),f(this._tileReady,this,i));this._initTile(N),this.createTile.length<2&&ye(f(this._tileReady,this,i,null,N)),De(N,h),this._tiles[y]={el:N,coords:i,current:!0},u.appendChild(N),this.fire("tileloadstart",{tile:N,coords:i})},_tileReady:function(i,u,h){u&&this.fire("tileerror",{error:u,tile:h,coords:i});var y=this._tileCoordsToKey(i);h=this._tiles[y],h&&(h.loaded=+new Date,this._map._fadeAnimated?(en(h.el,0),de(this._fadeFrame),this._fadeFrame=ye(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),u||(lt(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Fe.ielt9||!this._map._fadeAnimated?ye(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var u=new X(this._wrapX?S(i.x,this._wrapX):i.x,this._wrapY?S(i.y,this._wrapY):i.y);return u.z=i.z,u},_pxBoundsToTileRange:function(i){var u=this.getTileSize();return new z(i.min.unscaleBy(u).floor(),i.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Fu(i){return new Pi(i)}var Us=Pi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,u){this._url=i,u=A(this,u),u.detectRetina&&Fe.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,u){return this._url===i&&u===void 0&&(u=!0),this._url=i,u||this.redraw(),this},createTile:function(i,u){var h=document.createElement("img");return it(h,"load",f(this._tileOnLoad,this,u,h)),it(h,"error",f(this._tileOnError,this,u,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(i),h},getTileUrl:function(i){var u={r:Fe.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-i.y;this.options.tms&&(u.y=h),u["-y"]=h}return U(this._url,d(u,this.options))},_tileOnLoad:function(i,u){Fe.ielt9?setTimeout(f(i,this,null,u),0):i(null,u)},_tileOnError:function(i,u,h){var y=this.options.errorTileUrl;y&&u.getAttribute("src")!==y&&(u.src=y),i(h,u)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,u=this.options.maxZoom,h=this.options.zoomReverse,y=this.options.zoomOffset;return h&&(i=u-i),i+y},_getSubdomain:function(i){var u=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var i,u;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(u=this._tiles[i].el,u.onload=w,u.onerror=w,!u.complete)){u.src=Y;var h=this._tiles[i].coords;Ut(u),delete this._tiles[i],this.fire("tileabort",{tile:u,coords:h})}},_removeTile:function(i){var u=this._tiles[i];if(u)return u.el.setAttribute("src",Y),Pi.prototype._removeTile.call(this,i)},_tileReady:function(i,u,h){if(!(!this._map||h&&h.getAttribute("src")===Y))return Pi.prototype._tileReady.call(this,i,u,h)}});function Ea(i,u){return new Us(i,u)}var Ar=Us.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,u){this._url=i;var h=d({},this.defaultWmsParams);for(var y in u)y in this.options||(h[y]=u[y]);u=A(this,u);var N=u.detectRetina&&Fe.retina?2:1,k=this.getTileSize();h.width=k.x*N,h.height=k.y*N,this.wmsParams=h},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Us.prototype.onAdd.call(this,i)},getTileUrl:function(i){var u=this._tileCoordsToNwSe(i),h=this._crs,y=ne(h.project(u[0]),h.project(u[1])),N=y.min,k=y.max,Z=(this._wmsVersion>=1.3&&this._crs===co?[N.y,N.x,k.y,k.x]:[N.x,N.y,k.x,k.y]).join(","),re=Us.prototype.getTileUrl.call(this,i);return re+O(this.wmsParams,re,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Z},setParams:function(i,u){return d(this.wmsParams,i),u||this.redraw(),this}});function Ta(i,u){return new Ar(i,u)}Us.WMS=Ar,Ea.wms=Ta;var fa=Za.extend({options:{padding:.1},initialize:function(i){A(this,i),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),lt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,u){var h=this._map.getZoomScale(u,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),N=this._map.project(this._center,u),k=y.multiplyBy(-h).add(N).subtract(this._map._getNewPixelOrigin(i,u));Fe.any3d?P(this._container,k,h):De(this._container,k)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,u=this._map.getSize(),h=this._map.containerPointToLayerPoint(u.multiplyBy(-i)).round();this._bounds=new z(h,h.add(u.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),pl=fa.extend({options:{tolerance:0},getEvents:function(){var i=fa.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){fa.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");it(i,"mousemove",this._onMouseMove,this),it(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),it(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){de(this._redrawRequest),delete this._ctx,Ut(this._container),Yt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var u in this._layers)i=this._layers[u],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fa.prototype._update.call(this);var i=this._bounds,u=this._container,h=i.getSize(),y=Fe.retina?2:1;De(u,i.min),u.width=y*h.x,u.height=y*h.y,u.style.width=h.x+"px",u.style.height=h.y+"px",Fe.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){fa.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[v(i)]=i;var u=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var u=i._order,h=u.next,y=u.prev;h?h.prev=y:this._drawLast=y,y?y.next=h:this._drawFirst=h,delete i._order,delete this._layers[v(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var u=i.options.dashArray.split(/[, ]+/),h=[],y,N;for(N=0;N<u.length;N++){if(y=Number(u[N]),isNaN(y))return;h.push(y)}i.options._dashArray=h}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||ye(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var u=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(i._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(i._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var u=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,u=this._redrawBounds;if(this._ctx.save(),u){var h=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)i=y.layer,(!u||i._pxBounds&&i._pxBounds.intersects(u))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,u){if(this._drawing){var h,y,N,k,Z=i._parts,re=Z.length,xe=this._ctx;if(re){for(xe.beginPath(),h=0;h<re;h++){for(y=0,N=Z[h].length;y<N;y++)k=Z[h][y],xe[y?"lineTo":"moveTo"](k.x,k.y);u&&xe.closePath()}this._fillStroke(xe,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var u=i._point,h=this._ctx,y=Math.max(Math.round(i._radius),1),N=(Math.max(Math.round(i._radiusY),1)||y)/y;N!==1&&(h.save(),h.scale(1,N)),h.beginPath(),h.arc(u.x,u.y/N,y,0,Math.PI*2,!1),N!==1&&h.restore(),this._fillStroke(h,i)}},_fillStroke:function(i,u){var h=u.options;h.fill&&(i.globalAlpha=h.fillOpacity,i.fillStyle=h.fillColor||h.color,i.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(i.setLineDash&&i.setLineDash(u.options&&u.options._dashArray||[]),i.globalAlpha=h.opacity,i.lineWidth=h.weight,i.strokeStyle=h.color,i.lineCap=h.lineCap,i.lineJoin=h.lineJoin,i.stroke())},_onClick:function(i){for(var u=this._map.mouseEventToLayerPoint(i),h,y,N=this._drawFirst;N;N=N.next)h=N.layer,h.options.interactive&&h._containsPoint(u)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(h))&&(y=h);this._fireEvent(y?[y]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,u)}},_handleMouseOut:function(i){var u=this._hoveredLayer;u&&(ln(this._container,"leaflet-interactive"),this._fireEvent([u],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,u){if(!this._mouseHoverThrottled){for(var h,y,N=this._drawFirst;N;N=N.next)h=N.layer,h.options.interactive&&h._containsPoint(u)&&(y=h);y!==this._hoveredLayer&&(this._handleMouseOut(i),y&&(lt(this._container,"leaflet-interactive"),this._fireEvent([y],i,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,u,h){this._map._fireDOMEvent(u,h||u.type,i)},_bringToFront:function(i){var u=i._order;if(u){var h=u.next,y=u.prev;if(h)h.prev=y;else return;y?y.next=h:h&&(this._drawFirst=h),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(i)}},_bringToBack:function(i){var u=i._order;if(u){var h=u.next,y=u.prev;if(y)y.next=h;else return;h?h.prev=y:y&&(this._drawLast=y),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(i)}}});function Mr(i){return Fe.canvas?new pl(i):null}var Fs=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),mo={_initContainer:function(){this._container=jt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(fa.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var u=i._container=Fs("shape");lt(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",i._path=Fs("path"),u.appendChild(i._path),this._updateStyle(i),this._layers[v(i)]=i},_addPath:function(i){var u=i._container;this._container.appendChild(u),i.options.interactive&&i.addInteractiveTarget(u)},_removePath:function(i){var u=i._container;Ut(u),i.removeInteractiveTarget(u),delete this._layers[v(i)]},_updateStyle:function(i){var u=i._stroke,h=i._fill,y=i.options,N=i._container;N.stroked=!!y.stroke,N.filled=!!y.fill,y.stroke?(u||(u=i._stroke=Fs("stroke")),N.appendChild(u),u.weight=y.weight+"px",u.color=y.color,u.opacity=y.opacity,y.dashArray?u.dashStyle=D(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=y.lineCap.replace("butt","flat"),u.joinstyle=y.lineJoin):u&&(N.removeChild(u),i._stroke=null),y.fill?(h||(h=i._fill=Fs("fill")),N.appendChild(h),h.color=y.fillColor||y.color,h.opacity=y.fillOpacity):h&&(N.removeChild(h),i._fill=null)},_updateCircle:function(i){var u=i._point.round(),h=Math.round(i._radius),y=Math.round(i._radiusY||h);this._setPath(i,i._empty()?"M0 0":"AL "+u.x+","+u.y+" "+h+","+y+" 0,"+65535*360)},_setPath:function(i,u){i._path.v=u},_bringToFront:function(i){Ln(i._container)},_bringToBack:function(i){Sa(i._container)}},os=Fe.vml?Fs:Oe,Ii=fa.extend({_initContainer:function(){this._container=os("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=os("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ut(this._container),Yt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fa.prototype._update.call(this);var i=this._bounds,u=i.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,h.setAttribute("width",u.x),h.setAttribute("height",u.y)),De(h,i.min),h.setAttribute("viewBox",[i.min.x,i.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(i){var u=i._path=os("path");i.options.className&&lt(u,i.options.className),i.options.interactive&&lt(u,"leaflet-interactive"),this._updateStyle(i),this._layers[v(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Ut(i._path),i.removeInteractiveTarget(i._path),delete this._layers[v(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var u=i._path,h=i.options;u&&(h.stroke?(u.setAttribute("stroke",h.color),u.setAttribute("stroke-opacity",h.opacity),u.setAttribute("stroke-width",h.weight),u.setAttribute("stroke-linecap",h.lineCap),u.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?u.setAttribute("stroke-dasharray",h.dashArray):u.removeAttribute("stroke-dasharray"),h.dashOffset?u.setAttribute("stroke-dashoffset",h.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),h.fill?(u.setAttribute("fill",h.fillColor||h.color),u.setAttribute("fill-opacity",h.fillOpacity),u.setAttribute("fill-rule",h.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(i,u){this._setPath(i,mt(i._parts,u))},_updateCircle:function(i){var u=i._point,h=Math.max(Math.round(i._radius),1),y=Math.max(Math.round(i._radiusY),1)||h,N="a"+h+","+y+" 0 1,0 ",k=i._empty()?"M0 0":"M"+(u.x-h)+","+u.y+N+h*2+",0 "+N+-h*2+",0 ";this._setPath(i,k)},_setPath:function(i,u){i._path.setAttribute("d",u)},_bringToFront:function(i){Ln(i._path)},_bringToBack:function(i){Sa(i._path)}});Fe.vml&&Ii.include(mo);function zr(i){return Fe.svg||Fe.vml?new Ii(i):null}At.include({getRenderer:function(i){var u=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var u=this._paneRenderers[i];return u===void 0&&(u=this._createRenderer({pane:i}),this._paneRenderers[i]=u),u},_createRenderer:function(i){return this.options.preferCanvas&&Mr(i)||zr(i)}});var ii=Oi.extend({initialize:function(i,u){Oi.prototype.initialize.call(this,this._boundsToLatLngs(i),u)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ce(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Vd(i,u){return new ii(i,u)}Ii.create=os,Ii.pointsToPath=mt,ws.geometryToLayer=Wn,ws.coordsToLatLng=cl,ws.coordsToLatLngs=wr,ws.latLngToCoords=dl,ws.latLngsToCoords=kr,ws.getFeature=Ps,ws.asFeature=ml,At.mergeOptions({boxZoom:!0});var pa=ss.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Yt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ut(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ia(),tl(),this._startPoint=this._map.mouseEventToContainerPoint(i),it(document,{contextmenu:Ds,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=jt("div","leaflet-zoom-box",this._container),lt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var u=new z(this._point,this._startPoint),h=u.getSize();De(this._box,u.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(Ut(this._box),ln(this._container,"leaflet-crosshair")),ra(),fr(),Yt(document,{contextmenu:Ds,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var u=new I(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});At.addInitHook("addHandler","boxZoom",pa),At.mergeOptions({doubleClickZoom:!0});var xl=ss.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var u=this._map,h=u.getZoom(),y=u.options.zoomDelta,N=i.originalEvent.shiftKey?h-y:h+y;u.options.doubleClickZoom==="center"?u.setZoom(N):u.setZoomAround(i.containerPoint,N)}});At.addInitHook("addHandler","doubleClickZoom",xl),At.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var us=ss.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Ls(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}lt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ln(this._map._container,"leaflet-grab"),ln(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=ce(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var u=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(u),this._prunePositions(u)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,u){return i-(i-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;i.x<u.min.x&&(i.x=this._viscousLimit(i.x,u.min.x)),i.y<u.min.y&&(i.y=this._viscousLimit(i.y,u.min.y)),i.x>u.max.x&&(i.x=this._viscousLimit(i.x,u.max.x)),i.y>u.max.y&&(i.y=this._viscousLimit(i.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,u=Math.round(i/2),h=this._initialWorldOffset,y=this._draggable._newPos.x,N=(y-u+h)%i+u-h,k=(y+u+h)%i-u-h,Z=Math.abs(N+h)<Math.abs(k+h)?N:k;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Z},_onDragEnd:function(i){var u=this._map,h=u.options,y=!h.inertia||i.noInertia||this._times.length<2;if(u.fire("dragend",i),y)u.fire("moveend");else{this._prunePositions(+new Date);var N=this._lastPos.subtract(this._positions[0]),k=(this._lastTime-this._times[0])/1e3,Z=h.easeLinearity,re=N.multiplyBy(Z/k),xe=re.distanceTo([0,0]),Ae=Math.min(h.inertiaMaxSpeed,xe),Ie=re.multiplyBy(Ae/xe),We=Ae/(h.inertiaDeceleration*Z),vt=Ie.multiplyBy(-We/2).round();!vt.x&&!vt.y?u.fire("moveend"):(vt=u._limitOffset(vt,u.options.maxBounds),ye(function(){u.panBy(vt,{duration:We,easeLinearity:Z,noMoveStart:!0,animate:!0})}))}}});At.addInitHook("addHandler","dragging",us),At.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ho=ss.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),it(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Yt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,u=document.documentElement,h=i.scrollTop||u.scrollTop,y=i.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(y,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var u=this._panKeys={},h=this.keyCodes,y,N;for(y=0,N=h.left.length;y<N;y++)u[h.left[y]]=[-1*i,0];for(y=0,N=h.right.length;y<N;y++)u[h.right[y]]=[i,0];for(y=0,N=h.down.length;y<N;y++)u[h.down[y]]=[0,i];for(y=0,N=h.up.length;y<N;y++)u[h.up[y]]=[0,-1*i]},_setZoomDelta:function(i){var u=this._zoomKeys={},h=this.keyCodes,y,N;for(y=0,N=h.zoomIn.length;y<N;y++)u[h.zoomIn[y]]=i;for(y=0,N=h.zoomOut.length;y<N;y++)u[h.zoomOut[y]]=-i},_addHooks:function(){it(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Yt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var u=i.keyCode,h=this._map,y;if(u in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(y=this._panKeys[u],i.shiftKey&&(y=je(y).multiplyBy(3)),h.options.maxBounds&&(y=h._limitOffset(je(y),h.options.maxBounds)),h.options.worldCopyJump){var N=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(y)));h.panTo(N)}else h.panBy(y)}else if(u in this._zoomKeys)h.setZoom(h.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;Ds(i)}}});At.addInitHook("addHandler","keyboard",ho),At.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Or=ss.extend({addHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Yt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var u=la(i),h=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var y=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),y),Ds(i)},_performZoom:function(){var i=this._map,u=i.getZoom(),h=this._map.options.zoomSnap||0;i._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),N=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,k=h?Math.ceil(N/h)*h:N,Z=i._limitZoom(u+(this._delta>0?k:-k))-u;this._delta=0,this._startTime=null,Z&&(i.options.scrollWheelZoom==="center"?i.setZoom(u+Z):i.setZoomAround(this._lastMousePos,u+Z))}});At.addInitHook("addHandler","scrollWheelZoom",Or);var ri=600;At.mergeOptions({tapHold:Fe.touchNative&&Fe.safari&&Fe.mobile,tapTolerance:15});var gl=ss.extend({addHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Yt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var u=i.touches[0];this._startPos=this._newPos=new X(u.clientX,u.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(it(document,"touchend",Cn),it(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),ri),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Yt(document,"touchend",Cn),Yt(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Yt(document,"touchend touchcancel contextmenu",this._cancel,this),Yt(document,"touchmove",this._onMove,this)},_onMove:function(i){var u=i.touches[0];this._newPos=new X(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,u){var h=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});h._simulated=!0,u.target.dispatchEvent(h)}});At.addInitHook("addHandler","tapHold",gl),At.mergeOptions({touchZoom:Fe.touch,bounceAtZoomLimits:!0});var fo=ss.extend({addHooks:function(){lt(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ln(this._map._container,"leaflet-touch-zoom"),Yt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var u=this._map;if(!(!i.touches||i.touches.length!==2||u._animatingZoom||this._zooming)){var h=u.mouseEventToContainerPoint(i.touches[0]),y=u.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(h.add(y)._divideBy(2))),this._startDist=h.distanceTo(y),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),Cn(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var u=this._map,h=u.mouseEventToContainerPoint(i.touches[0]),y=u.mouseEventToContainerPoint(i.touches[1]),N=h.distanceTo(y)/this._startDist;if(this._zoom=u.getScaleZoom(N,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&N<1||this._zoom>u.getMaxZoom()&&N>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,N===1)return}else{var k=h._add(y)._divideBy(2)._subtract(this._centerPoint);if(N===1&&k.x===0&&k.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(k),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),de(this._animRequest);var Z=f(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ye(Z,this,!0),Cn(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,de(this._animRequest),Yt(document,"touchmove",this._onTouchMove,this),Yt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});At.addInitHook("addHandler","touchZoom",fo),At.BoxZoom=pa,At.DoubleClickZoom=xl,At.Drag=us,At.Keyboard=ho,At.ScrollWheelZoom=Or,At.TapHold=gl,At.TouchZoom=fo,l.Bounds=z,l.Browser=Fe,l.CRS=Re,l.Canvas=pl,l.Circle=ul,l.CircleMarker=zi,l.Class=oe,l.Control=ya,l.DivIcon=Uu,l.DivOverlay=ea,l.DomEvent=sl,l.DomUtil=Ei,l.Draggable=Ls,l.Evented=K,l.FeatureGroup=is,l.GeoJSON=ws,l.GridLayer=Pi,l.Handler=ss,l.Icon=rs,l.ImageOverlay=Di,l.LatLng=ue,l.LatLngBounds=I,l.Layer=Za,l.LayerGroup=Mi,l.LineUtil=qd,l.Map=At,l.Marker=Sr,l.Mixin=Id,l.Path=ls,l.Point=X,l.PolyUtil=oo,l.Polygon=Oi,l.Polyline=Ss,l.Popup=Tr,l.PosAnimation=Ti,l.Projection=Mu,l.Rectangle=ii,l.Renderer=fa,l.SVG=Ii,l.SVGOverlay=fl,l.TileLayer=Us,l.Tooltip=Cr,l.Transformation=Ye,l.Util=Se,l.VideoOverlay=Bs,l.bind=f,l.bounds=ne,l.canvas=Mr,l.circle=Lu,l.circleMarker=Du,l.control=js,l.divIcon=Gd,l.extend=d,l.featureGroup=Ou,l.geoJSON=hl,l.geoJson=Er,l.gridLayer=Fu,l.icon=_r,l.imageOverlay=Pu,l.latLng=Ne,l.latLngBounds=ce,l.layerGroup=Zd,l.map=no,l.marker=Ru,l.point=je,l.polygon=Kd,l.polyline=Hd,l.popup=Bu,l.rectangle=Vd,l.setOptions=A,l.stamp=v,l.svg=zr,l.svgOverlay=Iu,l.tileLayer=Ea,l.tooltip=Qd,l.transformation=Tt,l.version=o,l.videoOverlay=Li;var po=window.L;l.noConflict=function(){return window.L=po,this},window.L=l}))})(su,su.exports)),su.exports}var OM=zM();const La=Nd(OM);function RM(e){return e==="first"?{radius:10,color:"#7c3aed",fillColor:"#7c3aed",fillOpacity:.85,weight:2}:e==="recent"?{radius:7,color:"#1d4ed8",fillColor:"#bfdbfe",fillOpacity:.9,weight:2}:e==="checkin"?{radius:8,color:"#15803d",fillColor:"#15803d",fillOpacity:.85,weight:2}:e==="checkout"?{radius:11,color:"#be123c",fillColor:"#ffffff",fillOpacity:0,weight:3}:{radius:9,color:"#0f6a8c",fillColor:"#0f6a8c",fillOpacity:.9,weight:2}}function DM({markers:e,focusedMarkerId:s=null}){const l=b.useRef(null),o=b.useRef(null),d=b.useRef(null),m=b.useRef(new Map);return b.useEffect(()=>{if(!l.current||o.current)return;const f=e[0]?.lat??41.015137,g=e[0]?.lon??28.97953,v=La.map(l.current,{center:[f,g],zoom:14,zoomControl:!0});return o.current=v,La.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap katki saglayanlar"}).addTo(v),d.current=La.layerGroup().addTo(v),()=>{o.current&&(o.current.remove(),o.current=null),d.current=null}},[e]),b.useEffect(()=>{if(!o.current||!d.current)return;const f=o.current,g=d.current;if(g.clearLayers(),m.current.clear(),!e.length)return;const v=[],_=new Map;for(const w of e){const E=`${w.lat.toFixed(6)}:${w.lon.toFixed(6)}`;_.set(E,(_.get(E)??0)+1)}const S=new Map;for(const w of e){const E=`${w.lat.toFixed(6)}:${w.lon.toFixed(6)}`,R=_.get(E)??1,T=S.get(E)??0;S.set(E,T+1);let A=w.lat,O=w.lon;if(R>1){const D=2*Math.PI*T/R,G=12e-5;A=w.lat+Math.sin(D)*G,O=w.lon+Math.cos(D)*G}const q=RM(w.kind),U=La.circleMarker([A,O],q).bindPopup(`${w.label}<br/>${w.lat.toFixed(6)}, ${w.lon.toFixed(6)}`).addTo(g);m.current.set(w.id,U),v.push([A,O])}if(v.length===1){f.setView(v[0],16,{animate:!0});return}f.fitBounds(La.latLngBounds(v),{padding:[24,24],maxZoom:17,animate:!0})},[e]),b.useEffect(()=>{if(!s||!o.current)return;const f=m.current.get(s);if(!f)return;const g=f.getLatLng();o.current.setView(g,Math.max(o.current.getZoom(),16),{animate:!0}),f.openPopup()},[s,e]),n.jsx("div",{ref:l,className:"h-72 w-full rounded-lg border border-slate-300 bg-slate-100","aria-label":"Calisan konum haritasi"})}const LM=Xa({home_lat:Kn().min(-90),home_lon:Kn().min(-180),radius_m:Kn().int().positive().max(2e3)}),PM=Xa({expires_in_minutes:Kn().int().positive().max(1440)});function Da(e){if(!e)return"-";const s=new Date(e);return Number.isNaN(s.getTime())?e:s.toLocaleString("tr-TR",{timeZone:"Europe/Istanbul"})}function IM(e){return e==="OK"?"Tamam":e==="INCOMPLETE"?"Eksik":e==="LEAVE"?"Izinli":"Tatilde"}function BM(e){const s=new Date(`${e}T00:00:00`);return Number.isNaN(s.getTime())?"-":new Intl.DateTimeFormat("tr-TR",{timeZone:"Europe/Istanbul",weekday:"short"}).format(s)}function UM(e){return e.status==="INCOMPLETE"?"bg-rose-50/70":e.flags.length>0?"bg-amber-50/45":e.status==="LEAVE"||e.status==="OFF"?"bg-slate-50/70":""}function Yc(e,s){return e===null||s===null?"-":`${e.toFixed(6)}, ${s.toFixed(6)}`}function FM(e){return e.length?e.map(s=>`${Ya(s).label} (${s})`).join(", "):"-"}const qM=new Intl.DateTimeFormat("en-CA",{timeZone:"Europe/Istanbul",year:"numeric",month:"2-digit",day:"2-digit"});function ir(e){if(!e)return null;const s=new Date(e);return Number.isNaN(s.getTime())?null:qM.format(s)}function ZM(e){return e.in_lat!==null&&e.in_lon!==null||e.out_lat!==null&&e.out_lon!==null}function xf(e){return`recent-${e.ts_utc}-${e.device_id}-${e.event_type}-${e.lat.toFixed(6)}-${e.lon.toFixed(6)}`}const HM=[10,20,35,50];function KM(){const e=kS(),s=$l(),l=na(),{pushToast:o}=ha(),d=new Date,m=Number(e.id),f=Number.isFinite(m)&&sessionStorage.getItem("employee-detail-origin")==="employees"&&sessionStorage.getItem("employee-detail-id")===String(m),[g,v]=b.useState("41.0"),[_,S]=b.useState("29.0"),[w,E]=b.useState("120"),[R,T]=b.useState(null),[A,O]=b.useState(""),[q,U]=b.useState(""),[D,G]=b.useState(""),[Y,ee]=b.useState(String(d.getFullYear())),[H,te]=b.useState(String(d.getMonth()+1)),[J,fe]=b.useState(null),[ye,de]=b.useState(null),[Se,oe]=b.useState(""),[le,Q]=b.useState("all"),[K,X]=b.useState("all"),[ke,je]=b.useState("all"),[z,ne]=b.useState(""),[I,ce]=b.useState(""),[ue,Ne]=b.useState(1),[Re,Le]=b.useState(20),[me,Ge]=b.useState({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),[Ye,Tt]=b.useState(!1),[ht,M]=b.useState("30"),[Oe,mt]=b.useState(null),[Rt,It]=b.useState(null),[Vt,ae]=b.useState(null),Ee=Qe({queryKey:["employee-detail",m],queryFn:()=>nA(m),enabled:Number.isFinite(m)}),Be=Ee.data?.employee,Ct=Qe({queryKey:["departments","employee-detail-edit"],queryFn:()=>ji(),enabled:Number.isFinite(m)}),se=Qe({queryKey:["department-shifts",Be?.department_id],queryFn:()=>vu(Be?.department_id?{department_id:Be.department_id,active_only:!1}:void 0),enabled:!!Be?.department_id}),Ke=Number(Y),_t=Number(H),pn=Number.isFinite(Ke)&&Number.isFinite(_t)&&_t>=1&&_t<=12,Lt=Qe({queryKey:["employee-monthly",m,Ke,_t],queryFn:()=>bd({employee_id:m,year:Ke,month:_t}),enabled:Number.isFinite(m)&&pn}),rt=Qe({queryKey:["employee-monthly-current",m,d.getFullYear(),d.getMonth()+1],queryFn:()=>bd({employee_id:m,year:d.getFullYear(),month:d.getMonth()+1}),enabled:Number.isFinite(m)}),Qn=Je({mutationFn:F=>rA(m,F),onSuccess:()=>{T(null),o({variant:"success",title:"Ev konumu guncellendi",description:`Calisan #${m} icin konum kaydedildi.`}),l.invalidateQueries({queryKey:["employee-detail",m]})},onError:F=>{const Pe=He(F,"Konum kaydedilemedi.").message;T(Pe),o({variant:"error",title:"Konum kaydedilemedi",description:Pe})}}),_e=Je({mutationFn:F=>d_(m,{is_active:F}),onSuccess:F=>{o({variant:"success",title:F.is_active?"Calisan aktife alindi":"Calisan arsive alindi",description:`${F.full_name} icin durum guncellendi.`}),l.invalidateQueries({queryKey:["employees"]}),l.invalidateQueries({queryKey:["employee-detail",m]})},onError:F=>{o({variant:"error",title:"Durum guncellenemedi",description:He(F,"Islem basarisiz.").message})}}),tt=Je({mutationFn:F=>aA(m,F),onSuccess:F=>{o({variant:"success",title:"Calisan bilgileri guncellendi",description:`${F.full_name} icin profil bilgileri kaydedildi.`}),l.invalidateQueries({queryKey:["employees"]}),l.invalidateQueries({queryKey:["employee-detail",m]}),l.invalidateQueries({queryKey:["employee-monthly"]}),l.invalidateQueries({queryKey:["department-shifts",F.department_id]})},onError:F=>{o({variant:"error",title:"Calisan bilgileri guncellenemedi",description:He(F,"Islem basarisiz.").message})}}),ut=Je({mutationFn:F=>sA(m,{shift_id:F}),onSuccess:F=>{o({variant:"success",title:"Vardiya atamasi guncellendi",description:`${F.full_name} icin vardiya kaydedildi.`}),l.invalidateQueries({queryKey:["employees"]}),l.invalidateQueries({queryKey:["employee-detail",m]}),l.invalidateQueries({queryKey:["employee-monthly"]})},onError:F=>{o({variant:"error",title:"Vardiya atamasi basarisiz",description:He(F,"Islem basarisiz.").message})}}),Nt=Je({mutationFn:y_,onSuccess:F=>{mt(null),It(F.token),ae(F.invite_url),o({variant:"success",title:"Cihaz daveti olusturuldu",description:`Calisan #${m} icin davet hazir.`}),l.invalidateQueries({queryKey:["employee-detail",m]})},onError:F=>{const Pe=He(F,"Cihaz daveti olusturulamadi.").message;mt(Pe),o({variant:"error",title:"Davet olusturulamadi",description:Pe})}});b.useEffect(()=>{Ee.data?.home_location&&(v(String(Ee.data.home_location.home_lat)),S(String(Ee.data.home_location.home_lon)),E(String(Ee.data.home_location.radius_m)))},[Ee.data?.home_location]),b.useEffect(()=>{Be&&O(Be.shift_id?String(Be.shift_id):"")},[Be]),b.useEffect(()=>{Be&&(U(Be.full_name),G(Be.department_id?String(Be.department_id):""))},[Be]),b.useEffect(()=>{Number.isFinite(m)&&(f||s("/employees",{replace:!0}))},[m,f,s]);const $t=async F=>{try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(F);else{const Pe=document.createElement("textarea");Pe.value=F,document.body.appendChild(Pe),Pe.select(),document.execCommand("copy"),document.body.removeChild(Pe)}o({variant:"success",title:"Kopyalandi",description:"Deger panoya kopyalandi."})}catch{o({variant:"error",title:"Kopyalanamadi",description:"Tarayici kopyalama islemini engelledi."})}},Dt=()=>{mt(null),It(null),ae(null),M("30"),Tt(!0)},Xt=F=>{F.preventDefault(),mt(null);const Pe=PM.safeParse({expires_in_minutes:ht});if(!Pe.success){const dt=Pe.error.issues[0]?.message??"Sure alanini kontrol edin.";mt(dt),o({variant:"error",title:"Form hatasi",description:dt});return}Nt.mutate({employee_id:m,expires_in_minutes:Pe.data.expires_in_minutes})},Bn=F=>{F.preventDefault(),T(null);const Pe=LM.safeParse({home_lat:g,home_lon:_,radius_m:w});if(!Pe.success){const dt=Pe.error.issues[0]?.message??"Konum alanlarini kontrol edin.";T(dt),o({variant:"error",title:"Form hatasi",description:dt});return}Qn.mutate(Pe.data)},Pt=F=>{F.preventDefault();const Pe=q.trim();if(!Pe){o({variant:"error",title:"Form hatasi",description:"Ad Soyad alani bos birakilamaz."});return}const dt=D?Number(D):null;if(D&&(dt===null||!Number.isFinite(dt)||dt<=0)){o({variant:"error",title:"Form hatasi",description:"Departman secimi gecersiz."});return}tt.mutate({full_name:Pe,department_id:dt})},ct=Lt.data?.days??[],dn=b.useMemo(()=>w_(ct),[ct]),jn=b.useMemo(()=>ct.filter(F=>F.flags.length>0).length,[ct]),et=b.useMemo(()=>ct.length?`%${Math.round((Lt.data?.totals.incomplete_days??0)/ct.length*100)}`:"%0",[Lt.data?.totals.incomplete_days,ct.length]),kn=Ee.data?.ip_summary??[],gt=Ee.data?.recent_locations??[],Wa=b.useMemo(()=>Array.from(new Set(gt.map(F=>F.device_id))).filter(F=>Number.isFinite(F)).sort((F,Pe)=>F-Pe),[gt]),Dn=b.useMemo(()=>{const F=Se.trim().toLowerCase();return gt.filter(Pe=>{const dt=ir(Pe.ts_utc);return z&&dt&&dt<z||I&&dt&&dt>I||le!=="all"&&Pe.event_type!==le||K!=="all"&&Pe.location_status!==K||ke!=="all"&&String(Pe.device_id)!==ke?!1:F?[Da(Pe.ts_utc),dt??"",Pe.event_type,Pe.location_status,String(Pe.device_id),Yc(Pe.lat,Pe.lon)].join(" ").toLowerCase().includes(F):!0})},[z,I,ke,le,Se,K,gt]);b.useEffect(()=>{Ne(1)},[Se,le,K,ke,z,I,Re]);const Kt=b.useMemo(()=>Dn.length?Math.max(1,Math.ceil(Dn.length/Re)):1,[Dn.length,Re]);b.useEffect(()=>{ue<=Kt||Ne(Kt)},[ue,Kt]);const Gn=b.useMemo(()=>{const F=(ue-1)*Re;return Dn.slice(F,F+Re)},[Dn,ue,Re]),es=b.useMemo(()=>{if(!Dn.length)return{start:0,end:0};const F=(ue-1)*Re+1,Pe=Math.min(ue*Re,Dn.length);return{start:F,end:Pe}},[Dn.length,ue,Re]),$=b.useMemo(()=>{for(const F of gt){const Pe=ir(F.ts_utc);if(Pe)return Pe}for(let F=ct.length-1;F>=0;F-=1)if(ZM(ct[F]))return ct[F].date;return null},[ct,gt]);b.useEffect(()=>{J||!$||fe($)},[$,J]),b.useEffect(()=>{if(!J)return;const F=ct.some(dt=>dt.date===J),Pe=gt.some(dt=>ir(dt.ts_utc)===J);!F&&!Pe&&(fe(null),de(null))},[ct,gt,J]);const qe=b.useMemo(()=>ct.find(F=>F.date===J)??null,[ct,J]),xn=b.useMemo(()=>J?gt.filter(F=>ir(F.ts_utc)===J):[],[gt,J]),pt=b.useMemo(()=>{const F=[],Pe=Ee.data?.latest_location??null,dt=Ee.data?.first_location??null,Vn=Pe&&J?ir(Pe.ts_utc)===J:!1,Tn=dt&&J?ir(dt.ts_utc)===J:!1;qe&&(qe.in_lat!==null&&qe.in_lon!==null&&F.push({id:`${qe.date}-in`,lat:qe.in_lat,lon:qe.in_lon,label:`${qe.date} - Mesai Baslangici`,kind:"checkin"}),qe.out_lat!==null&&qe.out_lon!==null&&F.push({id:`${qe.date}-out`,lat:qe.out_lat,lon:qe.out_lon,label:`${qe.date} - Mesai Bitisi`,kind:"checkout"})),Pe&&Vn&&F.push({id:"latest",lat:Pe.lat,lon:Pe.lon,label:`Son bildirilen konum - ${Da(Pe.ts_utc)}`,kind:"latest"}),dt&&Tn&&F.push({id:"first",lat:dt.lat,lon:dt.lon,label:`Ilk konum kaydi - ${Da(dt.ts_utc)}`,kind:"first"});for(const B of xn){const Ze=Vn&&Pe!==null&&Pe.ts_utc===B.ts_utc&&Pe.device_id===B.device_id,St=Tn&&dt!==null&&dt.ts_utc===B.ts_utc&&dt.device_id===B.device_id;Ze||St||F.push({id:xf(B),lat:B.lat,lon:B.lon,label:`${B.event_type} - ${Da(B.ts_utc)}`,kind:"recent"})}return F},[Ee.data?.first_location,Ee.data?.latest_location,xn,J,qe]),Fe=b.useMemo(()=>pt.filter(F=>me[F.kind]),[pt,me]),sn=b.useMemo(()=>({checkin:pt.some(F=>F.kind==="checkin"),checkout:pt.some(F=>F.kind==="checkout"),first:pt.some(F=>F.kind==="first"),recent:pt.some(F=>F.kind==="recent"),latest:pt.some(F=>F.kind==="latest")}),[pt]);b.useEffect(()=>{pt.length&&(Fe.length||Ge({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}))},[Fe.length,pt.length]),b.useEffect(()=>{if(!ye)return;pt.some(Pe=>Pe.id===ye)||de(null)},[pt,ye]);const yn=F=>{if(!pt.some(Tn=>Tn.kind===F)){o({variant:"info",title:"Bu tipte konum yok",description:"Secili kayitta bu lejant turune ait konum bulunamadi."});return}const dt=Object.values(me).filter(Boolean).length;if(me[F]&&dt===1){Ge({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0});return}Ge({checkin:F==="checkin",checkout:F==="checkout",first:F==="first",recent:F==="recent",latest:F==="latest"});const Vn=pt.find(Tn=>Tn.kind===F);Vn&&de(Vn.id)},En=()=>{Ge({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),de(null)},Wt=(F,Pe)=>{const dt=F.in_lat!==null&&F.in_lon!==null,Vn=F.out_lat!==null&&F.out_lon!==null;if(!(Pe==="in"?dt:Vn)){o({variant:"info",title:"Konum bulunamadi",description:`${F.date} icin secilen konum kaydi yok.`});return}fe(F.date),Ge({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),de(Pe==="in"?`${F.date}-in`:`${F.date}-out`)},hn=F=>{const Pe=ir(F.ts_utc);if(!Pe){o({variant:"info",title:"Konum zamani okunamadi",description:"Secilen konum kaydi icin gun bilgisi hesaplanamadi."});return}fe(Pe),Ge({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),de(xf(F))},aa=b.useMemo(()=>`${Ee.data?.devices.length??0} cihaz`,[Ee.data?.devices.length]);return Number.isFinite(m)?f?Ee.isLoading?n.jsx(Gt,{}):Ee.isError||!Be?n.jsx(Ot,{message:"Calisan kaydi bulunamadi."}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:`Calisan Detayi #${Be.id}`,description:`${Be.full_name} icin puantaj, cihaz, aktivite ve konum bilgileri`,action:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{const F=!Be.is_active;window.confirm(F?`${Be.full_name} arsivden cikarilsin mi?`:`${Be.full_name} arsivlensin mi?`)&&_e.mutate(F)},disabled:_e.isPending,className:`rounded-lg px-4 py-2 text-sm font-semibold text-white ${Be.is_active?"bg-rose-600 hover:bg-rose-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:Be.is_active?"Arsivle":"Arsivden Cikar"}),n.jsx("button",{type:"button",onClick:Dt,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Cihaz Baglama Linki Olustur"})]})}),n.jsx(Ue,{children:n.jsxs("div",{className:"grid gap-3 md:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Calisan"}),n.jsx("p",{className:"text-base font-semibold text-slate-900",children:Be.full_name}),n.jsxs("p",{className:"text-xs text-slate-500",children:["ID: ",Be.id]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Durum"}),n.jsx(cr,{value:Be.is_active?"Aktif":"Pasif"}),n.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Bolge: ",Be.region_name??"-"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Departman ID: ",Be.department_id??"-"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Son employee portal aktivitesi"}),n.jsx("p",{className:"text-sm font-medium text-slate-800",children:Da(Ee.data?.last_portal_seen_utc)}),n.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Cihaz sayisi: ",aa]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Bu ay yasal fazla mesai"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx($e,{minutes:rt.data?.totals.legal_overtime_minutes??0})}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Plan ustu: ",n.jsx($e,{minutes:rt.data?.totals.plan_overtime_minutes??0})]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[d.getFullYear(),"-",String(d.getMonth()+1).padStart(2,"0")]})]})]})}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Calisan Bilgileri"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ad Soyad ve departman bilgisini bu alandan guncelleyebilirsiniz."}),n.jsxs("form",{onSubmit:Pt,className:"mt-3 grid gap-3 md:grid-cols-3 md:items-end",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Ad Soyad",n.jsx("input",{value:q,onChange:F=>U(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Calisan adi soyadi"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:D,onChange:F=>G(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",disabled:Ct.isLoading,children:[n.jsx("option",{value:"",children:"Atanmamis"}),(Ct.data??[]).map(F=>n.jsx("option",{value:F.id,children:F.name},F.id))]})]}),n.jsx("button",{type:"submit",disabled:tt.isPending||Ct.isLoading,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-700 disabled:opacity-60",children:tt.isPending?"Kaydediliyor...":"Bilgileri Kaydet"})]}),Ct.isError?n.jsx("p",{className:"mt-2 text-xs text-amber-700",children:"Departman listesi alinamadi. Lutfen tekrar deneyin."}):null]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Vardiya Atamasi"}),n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-[1fr_auto] md:items-end",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya",n.jsxs("select",{value:A,onChange:F=>O(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",disabled:!Be.department_id||se.isLoading,children:[n.jsx("option",{value:"",children:"Atanmamis"}),(se.data??[]).map(F=>n.jsxs("option",{value:F.id,children:[F.name," (",F.start_time_local,"-",F.end_time_local,")"]},F.id))]})]}),n.jsx("button",{type:"button",disabled:ut.isPending||!Be.department_id,onClick:()=>{const F=A?Number(A):null;ut.mutate(F)},className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-700 disabled:opacity-60",children:ut.isPending?"Kaydediliyor...":"Vardiya Ata"})]})]}),n.jsxs(Ue,{children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Aylik Puantaj"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Aydan aya puantaj ve secili ay fazla mesai durumunu inceleyin."})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("label",{className:"text-xs text-slate-600",children:["Yil",n.jsx("input",{type:"number",value:Y,onChange:F=>ee(F.target.value),className:"mt-1 w-28 rounded-lg border border-slate-300 px-2 py-1 text-sm"})]}),n.jsxs("label",{className:"text-xs text-slate-600",children:["Ay",n.jsx("input",{type:"number",min:1,max:12,value:H,onChange:F=>te(F.target.value),className:"mt-1 w-20 rounded-lg border border-slate-300 px-2 py-1 text-sm"})]})]})]}),pn?Lt.isLoading?n.jsx(Gt,{}):Lt.isError?n.jsx(Ot,{message:He(Lt.error,"Aylik puantaj alinamadi.").message}):n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-3 xl:grid-cols-7",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay net calisma"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx($e,{minutes:Lt.data?.totals.worked_minutes??0})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay plan ustu sure"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx($e,{minutes:Lt.data?.totals.plan_overtime_minutes??0})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[dn.planOvertimeDayCount," gun"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay yasal fazla sure"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx($e,{minutes:Lt.data?.totals.legal_extra_work_minutes??0})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay yasal fazla mesai"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx($e,{minutes:Lt.data?.totals.legal_overtime_minutes??0})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[dn.overtimeDayCount," gun fazla mesai"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Eksik gun"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:Lt.data?.totals.incomplete_days??0})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Calisilan gun"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:dn.workedDayCount}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Hafta ici: ",dn.weekdayWorkedDayCount," gun"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Pazar mesaisi"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[dn.sundayWorkedDayCount," gun"]}),n.jsx("p",{className:"text-xs text-slate-500",children:n.jsx($e,{minutes:dn.sundayWorkedMinutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Ozel gun mesaisi"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[dn.specialWorkedDayCount," gun"]}),n.jsx("p",{className:"text-xs text-slate-500",children:n.jsx($e,{minutes:dn.specialWorkedMinutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Bayrakli gun"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:jn}),n.jsx("p",{className:"text-xs text-slate-500",children:"Riskli veya kontrol gerektiren satir sayisi"})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Eksik gun orani"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:et}),n.jsxs("p",{className:"text-xs text-slate-500",children:[Lt.data?.totals.incomplete_days??0," / ",ct.length," gun"]})]})]}),n.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:"Ayni tabloda giris-cikis saatleri, konum koordinatlari ve bayraklar birlikte gosterilir. Satir renklendirmesi: kirmizi = eksik gun, amber = bayrakli gun, gri = izin/tatil."}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[1240px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Tarih"}),n.jsx("th",{className:"py-2",children:"Gun"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Gun Tipi"}),n.jsx("th",{className:"py-2",children:"Giris"}),n.jsx("th",{className:"py-2",children:"Cikis"}),n.jsx("th",{className:"py-2",children:"Giris Konum (lat/lon)"}),n.jsx("th",{className:"py-2",children:"Cikis Konum (lat/lon)"}),n.jsx("th",{className:"py-2",children:"Net Sure"}),n.jsx("th",{className:"py-2",children:"Plan Ustu"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Sure"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"}),n.jsx("th",{className:"py-2",children:"Bayraklar"})]})}),n.jsx("tbody",{children:ct.map(F=>{const Pe=UM(F);return n.jsxs("tr",{className:`border-t border-slate-100 ${Pe}`,children:[n.jsx("td",{className:"py-2 font-medium text-slate-800",children:F.date}),n.jsx("td",{className:"py-2 text-xs uppercase text-slate-600",children:BM(F.date)}),n.jsx("td",{className:"py-2",children:IM(F.status)}),n.jsx("td",{className:"py-2",children:Np(F).label}),n.jsx("td",{className:"py-2",children:Da(F.in)}),n.jsx("td",{className:"py-2",children:Da(F.out)}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-mono text-xs",children:Yc(F.in_lat,F.in_lon)}),F.in_lat!==null&&F.in_lon!==null?n.jsx("button",{type:"button",className:"rounded-md border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",onClick:()=>Wt(F,"in"),title:"Mesai baslangic konumunu haritada goster",children:"Harita"}):null]})}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-mono text-xs",children:Yc(F.out_lat,F.out_lon)}),F.out_lat!==null&&F.out_lon!==null?n.jsx("button",{type:"button",className:"rounded-md border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",onClick:()=>Wt(F,"out"),title:"Mesai bitis konumunu haritada goster",children:"Harita"}):null]})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:F.worked_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:F.plan_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:F.legal_extra_work_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:F.legal_overtime_minutes})}),n.jsx("td",{className:"py-2 text-xs text-slate-600",children:FM(F.flags)})]},F.date)})})]})})]}):n.jsx("p",{className:"mt-3 text-sm text-amber-700",children:"Yil/ay degeri gecersiz."})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Kayitli Cihazlar ve IP Bilgisi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Cihazlar, son attendance zamani ve son gorulen IP bilgisi."}),n.jsx("div",{className:"mt-3 list-scroll-area",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Cihaz ID"}),n.jsx("th",{className:"py-2",children:"Parmak Izi"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Olusma"}),n.jsx("th",{className:"py-2",children:"Son Attendance"}),n.jsx("th",{className:"py-2",children:"Son Gorulen IP"}),n.jsx("th",{className:"py-2",children:"Son Islem Zamani"})]})}),n.jsx("tbody",{children:(Ee.data?.devices??[]).map(F=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:F.id}),n.jsx("td",{className:"py-2 font-mono text-xs",children:F.device_fingerprint}),n.jsx("td",{className:"py-2",children:n.jsx(cr,{value:F.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2",children:Da(F.created_at)}),n.jsx("td",{className:"py-2",children:Da(F.last_attendance_ts_utc)}),n.jsx("td",{className:"py-2",children:F.last_seen_ip??"-"}),n.jsx("td",{className:"py-2",children:Da(F.last_seen_at_utc)})]},F.id))})]})})]}),n.jsxs("div",{className:"grid gap-4 lg:grid-cols-2 lg:items-start",children:[n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Employee Portal Aktivite Akisi"}),n.jsx("div",{className:"mt-3 list-scroll-area rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Zaman"}),n.jsx("th",{className:"py-2",children:"Islem"}),n.jsx("th",{className:"py-2",children:"IP"}),n.jsx("th",{className:"py-2",children:"User Agent"})]})}),n.jsx("tbody",{children:(Ee.data?.recent_activity??[]).map((F,Pe)=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:Da(F.ts_utc)}),n.jsx("td",{className:"py-2",children:F.action}),n.jsx("td",{className:"py-2",children:F.ip??"-"}),n.jsx("td",{className:"py-2 max-w-[280px] truncate",title:F.user_agent??"-",children:F.user_agent??"-"})]},`${F.ts_utc}-${Pe}`))})]})})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Cihaz IP Ozeti"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"IP, son gorulme zamani ve son bilinen konum bilgisi."}),n.jsx("div",{className:"mt-3 list-scroll-area rounded-lg border border-slate-200",children:kn.length?n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"IP"}),n.jsx("th",{className:"py-2",children:"Son gorulme"}),n.jsx("th",{className:"py-2",children:"Aksiyon"}),n.jsx("th",{className:"py-2",children:"Son konum (lat/lon)"}),n.jsx("th",{className:"py-2",children:"Konum zamani"})]})}),n.jsx("tbody",{children:kn.map(F=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2 font-mono text-xs",children:F.ip}),n.jsx("td",{className:"py-2",children:Da(F.last_seen_at_utc)}),n.jsx("td",{className:"py-2",children:F.last_action}),n.jsx("td",{className:"py-2",children:F.last_lat!==null&&F.last_lon!==null?`${F.last_lat.toFixed(6)}, ${F.last_lon.toFixed(6)}`:"-"}),n.jsx("td",{className:"py-2",children:F.last_location_ts_utc?Da(F.last_location_ts_utc):"-"})]},F.ip))})]}):n.jsx("div",{className:"p-3 text-sm text-slate-500",children:"IP kaydi bulunamadi."})})]})]}),n.jsxs(Ue,{children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Konum Haritasi"}),J&&$&&J!==$?n.jsx("button",{type:"button",onClick:()=>{fe($),Ge({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),de(null)},className:"rounded-md border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Son gune don"}):null]}),qe?n.jsxs("p",{className:"mt-2 text-sm text-slate-700",children:["Harita secimi: ",n.jsx("span",{className:"font-semibold",children:qe.date})," gununun giris/cikis konumlari"]}):J?n.jsxs("p",{className:"mt-2 text-sm text-slate-700",children:["Harita secimi: ",n.jsx("span",{className:"font-semibold",children:J})," gununun konum kayitlari"]}):n.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Calisan icin konum verisi henuz yok."}),Fe.length?n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsx(DM,{markers:Fe,focusedMarkerId:ye}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-700",children:[n.jsxs("button",{type:"button",onClick:()=>yn("first"),disabled:!sn.first,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${me.first?"border-violet-300 bg-violet-50 text-violet-800":"border-slate-300 bg-white text-slate-500"} ${sn.first?"":"cursor-not-allowed opacity-45"}`,title:"Yalnizca ilk konum noktasini goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-violet-600"}),"Ilk konum"]}),n.jsxs("button",{type:"button",onClick:()=>yn("recent"),disabled:!sn.recent,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${me.recent?"border-blue-300 bg-blue-50 text-blue-800":"border-slate-300 bg-white text-slate-500"} ${sn.recent?"":"cursor-not-allowed opacity-45"}`,title:"Diger konum noktalarini goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-600"}),"Diger konumlar"]}),n.jsxs("button",{type:"button",onClick:()=>yn("checkin"),disabled:!sn.checkin,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${me.checkin?"border-emerald-300 bg-emerald-50 text-emerald-800":"border-slate-300 bg-white text-slate-500"} ${sn.checkin?"":"cursor-not-allowed opacity-45"}`,title:"Yalnizca mesai baslangici noktalarini goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-600"}),"Mesai baslangici"]}),n.jsxs("button",{type:"button",onClick:()=>yn("checkout"),disabled:!sn.checkout,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${me.checkout?"border-rose-300 bg-rose-50 text-rose-800":"border-slate-300 bg-white text-slate-500"} ${sn.checkout?"":"cursor-not-allowed opacity-45"}`,title:"Yalnizca mesai bitisi noktalarini goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-600"}),"Mesai bitisi"]}),n.jsxs("button",{type:"button",onClick:()=>yn("latest"),disabled:!sn.latest,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${me.latest?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-white text-slate-500"} ${sn.latest?"":"cursor-not-allowed opacity-45"}`,title:"Yalnizca son bildirilen konumu goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-sky-700"}),"Son bildirilen konum"]}),n.jsx("button",{type:"button",onClick:En,className:"ml-1 rounded-md border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",children:"Tumunu goster"})]})]}):n.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Secili filtrede gosterilecek konum noktasi yok."}),n.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200",children:[n.jsxs("div",{className:"border-b border-slate-200 px-3 py-2",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Konum Gecmisi (satira tiklayinca haritada odaklar)"}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-7",children:[n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500 md:col-span-2",children:["Ara",n.jsx("input",{value:Se,onChange:F=>oe(F.target.value),placeholder:"Tarih, koordinat, cihaz, durum...",className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800"})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Tip",n.jsxs("select",{value:le,onChange:F=>Q(F.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800",children:[n.jsx("option",{value:"all",children:"Tum tipler"}),n.jsx("option",{value:"IN",children:"IN"}),n.jsx("option",{value:"OUT",children:"OUT"})]})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Durum",n.jsxs("select",{value:K,onChange:F=>X(F.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800",children:[n.jsx("option",{value:"all",children:"Tum durumlar"}),n.jsx("option",{value:"VERIFIED_HOME",children:"VERIFIED_HOME"}),n.jsx("option",{value:"UNVERIFIED_LOCATION",children:"UNVERIFIED_LOCATION"}),n.jsx("option",{value:"NO_LOCATION",children:"NO_LOCATION"})]})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Cihaz",n.jsxs("select",{value:ke,onChange:F=>je(F.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800",children:[n.jsx("option",{value:"all",children:"Tum cihazlar"}),Wa.map(F=>n.jsxs("option",{value:String(F),children:["#",F]},F))]})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Baslangic Tarihi",n.jsx("input",{type:"date",value:z,onChange:F=>ne(F.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800"})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Bitis Tarihi",n.jsx("input",{type:"date",value:I,min:z||void 0,onChange:F=>ce(F.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800"})]})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("p",{className:"text-[11px] text-slate-500",children:["Gosterilen satir: ",es.start,"-",es.end," /"," ",Dn.length]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Sayfa basi",n.jsx("select",{value:Re,onChange:F=>Le(Number(F.target.value)),className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-800",children:HM.map(F=>n.jsx("option",{value:F,children:F},F))})]})]})]}),Dn.length?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"list-scroll-area-compact",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2 pl-3",children:"Zaman"}),n.jsx("th",{className:"py-2",children:"Gun"}),n.jsx("th",{className:"py-2",children:"Tip"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Cihaz"}),n.jsx("th",{className:"py-2 pr-3",children:"Koordinat"})]})}),n.jsx("tbody",{children:Gn.map((F,Pe)=>{const dt=xf(F),Vn=ir(F.ts_utc)??"-",Tn=ye===dt;return n.jsxs("tr",{className:`border-t border-slate-100 transition-colors ${Tn?"bg-sky-100/60":"cursor-pointer hover:bg-sky-50/70"}`,role:"button",tabIndex:0,onClick:()=>hn(F),onKeyDown:B=>{(B.key==="Enter"||B.key===" ")&&(B.preventDefault(),hn(F))},title:"Haritada bu konumu odakla",children:[n.jsx("td",{className:"py-2 pl-3",children:Da(F.ts_utc)}),n.jsx("td",{className:"py-2 font-mono text-xs text-slate-600",children:Vn}),n.jsx("td",{className:"py-2",children:F.event_type}),n.jsx("td",{className:"py-2",children:F.location_status}),n.jsxs("td",{className:"py-2",children:["#",F.device_id]}),n.jsx("td",{className:"py-2 pr-3",children:Yc(F.lat,F.lon)})]},`${dt}-${Pe}`)})})]})}),n.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 px-3 py-2",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Sayfa ",ue," / ",Kt]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Ne(F=>Math.max(1,F-1)),disabled:ue<=1,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Onceki"}),n.jsx("button",{type:"button",onClick:()=>Ne(F=>Math.min(Kt,F+1)),disabled:ue>=Kt,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Sonraki"})]})]})]}):n.jsx("div",{className:"p-3 text-sm text-slate-500",children:"Filtreye uygun konum gecmisi bulunamadi."})]})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Ev Konumu"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Check-in konum dogrulamasi icin enlem, boylam ve yaricap metre bilgisini girin."}),Ee.data?.home_location?null:n.jsx("p",{className:"mt-2 text-sm text-amber-700",children:"Kayitli konum bulunamadi. Ilk kaydi olusturabilirsiniz."}),n.jsxs("form",{onSubmit:Bn,className:"mt-4 grid gap-3 md:grid-cols-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Ev Enlem (Lat)",n.jsx("input",{value:g,onChange:F=>v(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ev Boylam (Lon)",n.jsx("input",{value:_,onChange:F=>S(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yaricap (metre)",n.jsx("input",{value:w,onChange:F=>E(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsx("div",{className:"md:col-span-3",children:n.jsx("button",{type:"submit",disabled:Qn.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Qn.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Kaydediliyor..."]}):Ee.data?.home_location?"Konumu Guncelle":"Konumu Kaydet"})})]}),R?n.jsx("p",{className:"form-validation",children:R}):null]}),n.jsxs(Js,{open:Ye,title:"Cihaz Baglama Linki Olustur",onClose:()=>Tt(!1),children:[n.jsxs("form",{onSubmit:Xt,className:"space-y-4",children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Gecerlilik Suresi (dakika)",n.jsx("input",{value:ht,onChange:F=>M(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsx("button",{type:"submit",disabled:Nt.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Nt.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Olusturuluyor..."]}):"Daveti Uret"})]}),n.jsx("p",{className:"mt-3 text-xs text-slate-500",children:"Bu linki calisana iletin. Calisan linki acinca cihazini otomatik olarak hesabina baglayabilir."}),Oe?n.jsx("p",{className:"form-validation",children:Oe}):null,Rt&&Vt?n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsx(yv,{label:"Token",value:Rt,onCopy:$t}),n.jsx(yv,{label:"Baglanti Linki (invite_url)",value:Vt,onCopy:$t})]}):null]})]}):n.jsx(Gt,{}):n.jsx(Ot,{message:"Gecersiz calisan id degeri."})}const QM={NORMAL:"Normal",IZINLI:"Izinli",RESMI_TATIL:"Resmi Tatil",CALISMADI:"Calismadi"},GM={SHIFT:"Vardiya",WEEKLY:"Haftalik Kural",WORK_RULE:"Temel Kural"},Jc={AUTO:"Otomatik (Oncelik: Vardiya > Haftalik > Temel)",SHIFT:"Vardiya",WEEKLY:"Haftalik Kural",WORK_RULE:"Temel Kural"},bu="Europe/Istanbul";function gf(e){const s=[];e.status==="INCOMPLETE"&&s.push("EKSIK_GUN");for(const l of e.flags)s.push(l);return s}function VM(e){return e.length===0?void 0:`Supheli nedenleri:
${e.map((l,o)=>{const d=Ya(l);return`${o+1}. ${d.label}: ${d.description}`}).join(`
`)}`}function bv(e){if(!e)return"";const s=new Date(e);return Number.isNaN(s.getTime())?"":new Intl.DateTimeFormat("tr-TR",{timeZone:bu,hour:"2-digit",minute:"2-digit",hour12:!1}).format(s)}function _v(e){if(!e)return"-";const s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat("tr-TR",{timeZone:bu,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(s)}function Nv(e){if(!e)return"-";const s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat("tr-TR",{timeZone:bu,hour:"2-digit",minute:"2-digit",hour12:!1}).format(s)}function $M(e){const s=new Date(`${e}T00:00:00`);return Number.isNaN(s.getTime())?"-":new Intl.DateTimeFormat("tr-TR",{timeZone:bu,weekday:"short"}).format(s)}function YM(e,s){return e.status==="INCOMPLETE"?"bg-rose-50/70":s?"bg-amber-50/55":e.status==="LEAVE"||e.status==="OFF"?"bg-slate-50/70":""}function jv(e){if(!e)return{status:"NORMAL",reason:""};const s=(e.note??"").trim(),l=s.match(/^\[MANUAL_STATUS:(NORMAL|IZINLI|RESMI_TATIL|CALISMADI)\]\s*/i);return l?{status:l[1].toUpperCase(),reason:s.replace(l[0],"").trim()}:e.is_absent?{status:"CALISMADI",reason:s}:{status:"NORMAL",reason:s}}function JM(e,s){const l=s.trim();if(e==="NORMAL")return l||null;const o=`[MANUAL_STATUS:${e}]`;return l?`${o} ${l}`:o}function XM(){const e=na(),{pushToast:s}=ha(),l=new Date,o={employeeId:"",year:String(l.getFullYear()),month:String(l.getMonth()+1)},[d,m]=b.useState(o),[f,g]=b.useState(o),[v,_]=b.useState(!1),[S,w]=b.useState(null),[E,R]=b.useState(!1),[T,A]=b.useState(!1),[O,q]=b.useState(""),[U,D]=b.useState(""),[G,Y]=b.useState(""),[ee,H]=b.useState(""),[te,J]=b.useState("NORMAL"),[fe,ye]=b.useState("AUTO"),[de,Se]=b.useState(""),[oe,le]=b.useState(null),[Q,K]=b.useState(null),X=Qe({queryKey:["employees","all"],queryFn:()=>Ms({status:"all"})}),ke=Number(f.employeeId),je=Number(f.year),z=Number(f.month),ne=Number.isFinite(ke)&&ke>0&&Number.isFinite(je)&&je>0&&Number.isFinite(z)&&z>=1&&z<=12,I=Qe({queryKey:["employee-monthly",ke,je,z],queryFn:()=>bd({employee_id:ke,year:je,month:z}),enabled:ne}),ce=Qe({queryKey:["manual-overrides",ke,je,z],queryFn:()=>i3(ke,je,z),enabled:ne}),ue=Je({mutationFn:({employeeId:_e,dayDate:tt,inTime:ut,outTime:Nt,status:$t,ruleSource:Dt,ruleShiftId:Xt,reason:Bn})=>{const Pt=$t!=="NORMAL";return s3(_e,{day_date:tt,in_time:Pt?null:ut||null,out_time:Pt?null:Nt||null,is_absent:Pt,rule_source_override:Dt,rule_shift_id_override:Dt==="SHIFT"&&Xt?Number(Xt):null,note:JM($t,Bn)})},onSuccess:()=>{s({variant:"success",title:"Manuel duzeltme kaydedildi",description:"Gunluk puantaj kaydi guncellendi."}),A(!1),K(null),Se(""),e.invalidateQueries({queryKey:["employee-monthly"]}),e.invalidateQueries({queryKey:["manual-overrides"]})},onError:_e=>{s({variant:"error",title:"Duzeltme kaydedilemedi",description:He(_e,"Islem basarisiz.").message})}}),Ne=Je({mutationFn:r3,onSuccess:()=>{s({variant:"success",title:"Manuel duzeltme kaldirildi",description:"Secili gun icin manuel override silindi."}),A(!1),K(null),e.invalidateQueries({queryKey:["employee-monthly"]}),e.invalidateQueries({queryKey:["manual-overrides"]})},onError:_e=>{s({variant:"error",title:"Silme islemi basarisiz",description:He(_e,"Islem basarisiz.").message})}}),Re=b.useMemo(()=>X.data?.find(_e=>_e.id===ke),[X.data,ke]),Le=Re?.full_name,me=Qe({queryKey:["monthly-manual-shifts",Re?.department_id],queryFn:()=>vu(Re?.department_id?{department_id:Re.department_id,active_only:!1}:void 0),enabled:!!Re?.department_id}),Ge=b.useMemo(()=>{const _e=new Map;for(const tt of ce.data??[])_e.set(tt.day_date,tt);return _e},[ce.data]),Ye=I.data?.days??[],Tt=b.useMemo(()=>Ye.reduce((_e,tt)=>_e+(tt.missing_minutes??0),0),[Ye]),ht=b.useMemo(()=>Ye.filter(_e=>!(v&&gf(_e).length===0||S&&!_e.flags.includes(S))),[Ye,S,v]),M=b.useMemo(()=>Ye.filter(_e=>gf(_e).length>0).length,[Ye]),Oe=b.useMemo(()=>Ye.filter(_e=>_e.legal_overtime_minutes>0).length,[Ye]),mt=b.useMemo(()=>Ye.filter(_e=>_e.status==="LEAVE").length,[Ye]),Rt=b.useMemo(()=>Ye.filter(_e=>_e.status==="OFF").length,[Ye]),It=b.useMemo(()=>Ye.filter(_e=>_e.status==="OK"||_e.status==="INCOMPLETE").length,[Ye]),Vt=b.useMemo(()=>Ye.length?`%${Math.round(M/Ye.length*100)}`:"%0",[Ye.length,M]),ae=b.useMemo(()=>`${f.year}-${String(f.month).padStart(2,"0")}`,[f.month,f.year]),Ee=b.useMemo(()=>{const _e=["SHIFT_WEEKLY_RULE_OVERRIDE","NEEDS_SHIFT_REVIEW","MISSING_IN","MISSING_OUT","UNDERWORKED"],tt=new Map;for(const ut of _e)tt.set(ut,0);for(const ut of Ye)for(const Nt of _e)ut.flags.includes(Nt)&&tt.set(Nt,(tt.get(Nt)??0)+1);return _e.map(ut=>({code:ut,count:tt.get(ut)??0}))},[Ye]),Be=b.useMemo(()=>{const _e=[];return f.employeeId&&_e.push(`Calisan: ${f.employeeId}`),_e.push(`Yil: ${f.year}`),_e.push(`Ay: ${f.month}`),v&&_e.push("Sadece supheli gunler"),S&&_e.push(`Cakisma: ${Ya(S).label}`),_e},[f,S,v]),Ct=()=>g({...d}),se=()=>{m(o),g(o),_(!1),w(null)},Ke=async()=>{if(!ne){s({variant:"error",title:"Filtre hatasi",description:"Excel indirmek icin calisan, yil ve ay secin."});return}try{R(!0);const _e=await c3({employee_id:ke,year:je,month:z}),tt=window.URL.createObjectURL(_e),ut=document.createElement("a");ut.href=tt,ut.download=`puantaj-employee-${ke}-${je}-${String(z).padStart(2,"0")}.xlsx`,document.body.appendChild(ut),ut.click(),ut.remove(),window.URL.revokeObjectURL(tt)}catch(_e){s({variant:"error",title:"Excel indirilemedi",description:He(_e,"Dosya olusturulamadi.").message})}finally{R(!1)}},_t=_e=>{const tt=Ge.get(_e.date),ut=jv(tt);q(_e.date),le(tt?.id??null),J(ut.status),H(ut.reason),D(tt?bv(tt.in_ts):""),Y(tt?bv(tt.out_ts):""),ye(tt?.rule_source_override??"AUTO"),Se(tt?.rule_shift_id_override?String(tt.rule_shift_id_override):_e.shift_id?String(_e.shift_id):""),K(null),A(!0)},pn=()=>{if(!ne||Ye.length===0){s({variant:"error",title:"Rapor verisi yok",description:"Once calisan, yil ve ay secip raporu yukleyin."});return}_t(Ye[0])},Lt=()=>{if(K(null),!O)return K("Duzeltme icin tarih secmelisiniz."),!1;if(te==="NORMAL"){if(!U&&!G)return K("Normal gun icin en az bir saat bilgisi girin."),!1;if(U&&G&&G<U)return K("Cikis saati giris saatinden kucuk olamaz."),!1}return fe==="SHIFT"&&!de?(K("Vardiya kurali icin bir vardiya secmelisiniz."),!1):!0},rt=_e=>{_e.preventDefault(),ne&&Lt()&&ue.mutate({employeeId:ke,dayDate:O,inTime:U,outTime:G,status:te,ruleSource:fe,ruleShiftId:de,reason:ee})};if(X.isLoading)return n.jsx(Gt,{});if(X.isError)return n.jsx(Ot,{message:"Calisan listesi alinamadi."});const Qn=X.data??[];return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"Aylik Calisan Puantaj Raporu",description:"Gunluk giris/cikis ve fazla mesai bilgilerini inceleyin, HR icin manuel duzeltme yapin.",action:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:pn,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Manuel Duzeltme"}),n.jsx("button",{type:"button",onClick:()=>{Ke()},disabled:E,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:E?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner inline-spinner-dark","aria-hidden":"true"}),"Hazirlaniyor..."]}):"Excel Indir"}),n.jsx(Ys,{to:"/reports/excel-export",className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Gelismis Export"})]})}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-4",children:[n.jsx(Xs,{label:"Calisan",employees:Qn,value:d.employeeId,onChange:_e=>m(tt=>({...tt,employeeId:_e})),emptyLabel:"Seciniz",helperText:"Calisan adini veya ID bilgisini yazabilirsiniz.",className:"md:col-span-2"}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yil",n.jsx("input",{type:"number",value:d.year,onChange:_e=>m(tt=>({...tt,year:_e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",n.jsx("input",{type:"number",value:d.month,onChange:_e=>m(tt=>({...tt,month:_e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),n.jsx("div",{className:"mt-3",children:n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:v,onChange:_e=>_(_e.target.checked)}),"Sadece supheli gunleri goster"]})}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:Ct,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),n.jsx("button",{type:"button",onClick:se,className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Be.map(_e=>n.jsx("span",{className:"inline-flex rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:_e},_e))})]}),ne?null:n.jsx(Ot,{message:"Rapor icin calisan, yil ve ay secmelisiniz."}),I.isLoading?n.jsx(Gt,{}):null,I.isError?n.jsx(Ot,{message:He(I.error,"Aylik rapor alinamadi.").message}):null,I.data?n.jsxs(n.Fragment,{children:[n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Toplamlar"}),n.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["alan: ",Le??`#${I.data.employee_id}`," | Dnem: ",ae]}),n.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-5",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"lenen Gn"}),n.jsx("p",{className:"text-lg font-semibold",children:It}),n.jsxs("p",{className:"text-xs text-slate-500",children:["zin: ",mt," | Tatil: ",Rt]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"pheli Oran"}),n.jsx("p",{className:"text-lg font-semibold",children:Vt}),n.jsxs("p",{className:"text-xs text-slate-500",children:[M," / ",Ye.length," gn"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Filtrelenen Gn"}),n.jsx("p",{className:"text-lg font-semibold",children:ht.length}),n.jsx("p",{className:"text-xs text-slate-500",children:S?`akma: ${Ya(S).label}`:"Tm gnler"})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Vardiya Kayna"}),n.jsx("p",{className:"text-lg font-semibold",children:"SHIFT > WEEKLY > WORK_RULE"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Otomatik ncelik zinciri"})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Saat Dilimi"}),n.jsx("p",{className:"text-lg font-semibold",children:bu}),n.jsx("p",{className:"text-xs text-slate-500",children:"Tm saatler yerel zamanda gsterilir"})]})]}),n.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-7",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam alma"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:I.data.totals.worked_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Plan st Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:I.data.totals.plan_overtime_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yasal Fazla Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:I.data.totals.legal_extra_work_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yasal Fazla Mesai"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:I.data.totals.legal_overtime_minutes})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[Oe," gn"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Eksik Gn"}),n.jsx("p",{className:"text-lg font-semibold",children:I.data.totals.incomplete_days})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"pheli Gn"}),n.jsx("p",{className:"text-lg font-semibold",children:M})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Eksik Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:Tt})})]})]})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Compliance (TR Is Kanunu)"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Net Calisma"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:I.data.worked_minutes_net})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yillik Fazla Mesai Kullanim"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:I.data.annual_overtime_used_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yillik Kalan Fazla Mesai"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:I.data.annual_overtime_remaining_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yillik Limit Durumu"}),n.jsx("p",{className:`text-sm font-semibold ${I.data.annual_overtime_cap_exceeded?"text-rose-700":"text-emerald-700"}`,children:I.data.annual_overtime_cap_exceeded?"Limit Asildi":"Limit Icinde"})]})]}),n.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Flag aciklamalari"}),n.jsx("ul",{className:"mt-2 space-y-1 text-xs text-slate-600",children:T3().map(_e=>n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",title:Ya(_e).description,children:Ya(_e).label})," ","(",_e,"): ",Ya(_e).description]},_e))})]})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Cakisma Analizi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Vardiya, haftalik kural ve event siralamasi arasinda tutarsiz gorunen gunlerin ozeti."}),S?n.jsx("button",{type:"button",onClick:()=>w(null),className:"mt-2 rounded-lg border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 hover:bg-slate-100",children:"Cakisma filtresini temizle"}):null,n.jsx("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:Ee.map(_e=>n.jsxs("button",{type:"button",onClick:()=>{w(tt=>tt===_e.code?null:_e.code),_(!0)},className:`rounded-lg border px-3 py-2 text-left transition ${S===_e.code?"border-brand-500 bg-brand-50":"border-slate-200 bg-slate-50 hover:border-slate-300"}`,children:[n.jsx("p",{className:"text-xs text-slate-500",title:Ya(_e.code).description,children:Ya(_e.code).label}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:_e.count})]},_e.code))})]}),ht.length===0?n.jsx(Ue,{children:n.jsx("p",{className:"text-sm text-slate-600",children:"Secilen filtreye uygun gunluk kayit bulunamadi."})}):n.jsxs(Ue,{children:[n.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Gsterilen satr: ",ht.length," / ",Ye.length]}),n.jsx("p",{className:"text-xs text-slate-500",children:"pucu: satra gre renk tonu kayt riskini gsterir (krmz: eksik, amber: pheli)."})]}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[1220px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Tarih"}),n.jsx("th",{className:"py-2",children:"Gn"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Giris"}),n.jsx("th",{className:"py-2",children:"Cikis"}),n.jsx("th",{className:"py-2",children:"Calisma"}),n.jsx("th",{className:"py-2",children:"Plan Ustu"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Sure"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"}),n.jsx("th",{className:"py-2",children:"Eksik Sure"}),n.jsx("th",{className:"py-2",children:"Kural Kaynagi"}),n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Izin"}),n.jsx("th",{className:"py-2",children:"Supheli Neden"}),n.jsx("th",{className:"py-2",children:"Aksiyon"})]})}),n.jsx("tbody",{children:ht.map(_e=>{const tt=gf(_e),ut=tt.length>0,Nt=VM(tt),$t=Ge.get(_e.date),Dt=jv($t),Xt=_e.flags.includes("MANUAL_OVERRIDE")||_e.flags.includes("MANUAL_EVENT")||!!$t,Bn=Dt.status!=="NORMAL",Pt=YM(_e,ut);return n.jsxs("tr",{className:`border-t border-slate-100 ${Pt}`,children:[n.jsx("td",{className:"py-2 font-medium text-slate-800",children:_e.date}),n.jsx("td",{className:"py-2 text-xs uppercase text-slate-600",children:$M(_e.date)}),n.jsxs("td",{className:"py-2",children:[n.jsx(cr,{value:_e.status}),Xt?n.jsx("span",{className:"ml-2 inline-flex rounded-full bg-indigo-100 px-2 py-1 text-[11px] font-semibold text-indigo-700",children:"MANUEL"}):null,Bn?n.jsx("span",{className:"ml-2 inline-flex rounded-full bg-cyan-100 px-2 py-1 text-[11px] font-semibold text-cyan-700",children:QM[Dt.status]}):null,n.jsx("span",{className:"ml-2",children:n.jsx(N_,{suspicious:ut,tooltip:Nt})})]}),n.jsx("td",{className:"py-2",title:_e.in??void 0,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:_v(_e.in)}),n.jsx("span",{className:"text-[11px] text-slate-500",children:Nv(_e.in)})]})}),n.jsx("td",{className:"py-2",title:_e.out??void 0,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:_v(_e.out)}),n.jsx("span",{className:"text-[11px] text-slate-500",children:Nv(_e.out)})]})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:_e.worked_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:_e.plan_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:_e.legal_extra_work_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:_e.legal_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:_e.missing_minutes??0})}),n.jsx("td",{className:"py-2",children:n.jsx("span",{className:"inline-flex rounded-full bg-slate-100 px-2 py-1 text-[11px] font-semibold text-slate-700",title:`Oncelik: Vardiya > Haftalik > Temel | Plan: ${_e.applied_planned_minutes} dk | Mola: ${_e.applied_break_minutes} dk`,children:GM[_e.rule_source]})}),n.jsx("td",{className:"py-2",children:_e.shift_name??"-"}),n.jsx("td",{className:"py-2",children:_e.leave_type??"-"}),n.jsx("td",{className:"py-2",children:n.jsx(j_,{reasons:tt})}),n.jsx("td",{className:"py-2",children:n.jsx("button",{type:"button",onClick:()=>_t(_e),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Manuel Duzelt"})})]},_e.date)})})]})})]})]}):null,n.jsx(Js,{open:T,title:O?`${O} - Manuel Duzeltme`:"Manuel Duzeltme",onClose:()=>A(!1),placement:"right",maxWidthClass:"max-w-2xl",children:n.jsxs("form",{onSubmit:rt,className:"space-y-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Tarih",n.jsx("input",{type:"date",value:O,onChange:_e=>q(_e.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gun Durumu",n.jsxs("select",{value:te,onChange:_e=>J(_e.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"NORMAL",children:"Normal"}),n.jsx("option",{value:"IZINLI",children:"Izinli"}),n.jsx("option",{value:"RESMI_TATIL",children:"Resmi Tatil"}),n.jsx("option",{value:"CALISMADI",children:"Calismadi"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Kural Kaynagi",n.jsxs("select",{value:fe,onChange:_e=>{const tt=_e.target.value;ye(tt),tt!=="SHIFT"&&Se("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"AUTO",children:Jc.AUTO}),n.jsx("option",{value:"SHIFT",children:Jc.SHIFT}),n.jsx("option",{value:"WEEKLY",children:Jc.WEEKLY}),n.jsx("option",{value:"WORK_RULE",children:Jc.WORK_RULE})]})]}),fe==="SHIFT"?n.jsxs("label",{className:"text-sm text-slate-700",children:["Kural Vardiyasi",n.jsxs("select",{value:de,onChange:_e=>Se(_e.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Vardiya seciniz"}),(me.data??[]).map(_e=>n.jsxs("option",{value:_e.id,children:[_e.name," (",_e.start_time_local," - ",_e.end_time_local,")"]},_e.id))]})]}):null,n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Giris Saati",n.jsx("input",{type:"time",value:U,onChange:_e=>D(_e.target.value),disabled:te!=="NORMAL",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Cikis Saati",n.jsx("input",{type:"time",value:G,onChange:_e=>Y(_e.target.value),disabled:te!=="NORMAL",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),te==="NORMAL"?n.jsx("p",{className:"text-xs text-slate-500",children:"Uyari: Cikis saati giris saatinden kucuk olamaz."}):n.jsx("p",{className:"text-xs text-slate-500",children:"Bu secim gunu calisilmadi olarak isaretler; giris/cikis saatleri devre disi kalir."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gerekce / Not (opsiyonel)",n.jsx("input",{type:"text",value:ee,onChange:_e=>H(_e.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Saglik raporu / Sistem arizasi"})]}),Q?n.jsx("p",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-xs font-medium text-amber-800",children:Q}):null,n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"submit",disabled:ue.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:ue.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Kaydediliyor..."]}):"Kaydet"}),oe?n.jsx("button",{type:"button",onClick:()=>Ne.mutate(oe),disabled:Ne.isPending,className:"btn-danger rounded-lg bg-rose-600 px-4 py-2 text-sm font-semibold text-white hover:bg-rose-700 disabled:opacity-60",children:Ne.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Siliniyor..."]}):"Manuel Kaydi Sil"}):null]})]})})]})}const WM=Xa({full_name:da().min(2,"Ad soyad en az 2 karakter olmali."),region_id:xd([Kn().int().positive(),Df()]),department_id:xd([Kn().int().positive(),Df()]),is_active:Cd()}),ez=[20,35,50,100];function tz(){const e=na(),{pushToast:s}=ha(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState(!0),[S,w]=b.useState(""),[E,R]=b.useState(!1),[T,A]=b.useState(!1),[O,q]=b.useState(""),[U,D]=b.useState(""),[G,Y]=b.useState(35),[ee,H]=b.useState(1),[te,J]=b.useState(null),fe=Qe({queryKey:["employees",T,O,U],queryFn:()=>Ms({...T?{include_inactive:!0}:{},...O?{region_id:Number(O)}:{},...U?{department_id:Number(U)}:{}})}),ye=Qe({queryKey:["departments"],queryFn:ji}),de=Qe({queryKey:["regions","employees-page"],queryFn:()=>Xl({include_inactive:!0})}),Se=Je({mutationFn:tA,onSuccess:me=>{o(""),m(""),g(""),_(!0),J(null),R(!1),s({variant:"success",title:"Calisan olusturuldu",description:`${me.full_name} basariyla eklendi.`}),e.invalidateQueries({queryKey:["employees"]})},onError:me=>{const Ge=He(me,"Calisan olusturulamadi.").message;J(Ge),s({variant:"error",title:"Calisan olusturulamadi",description:Ge})}}),oe=Je({mutationFn:({employeeId:me,nextStatus:Ge})=>d_(me,{is_active:Ge}),onSuccess:me=>{s({variant:"success",title:me.is_active?"Calisan arsivden cikarildi":"Calisan arsivlendi",description:`${me.full_name} icin durum guncellendi.`}),e.invalidateQueries({queryKey:["employees"]})},onError:me=>{const Ge=He(me,"Calisan durumu guncellenemedi.").message;s({variant:"error",title:"Islem basarisiz",description:Ge})}}),le=me=>{me.preventDefault(),J(null);const Ge=d.trim()===""?null:Number(d),Ye=f.trim()===""?null:Number(f),Tt=WM.safeParse({full_name:l,region_id:Ge,department_id:Ye,is_active:v});if(!Tt.success){const ht=Tt.error.issues[0]?.message??"Calisan formunu kontrol edin.";J(ht),s({variant:"error",title:"Form hatasi",description:ht});return}Se.mutate(Tt.data)},Q=fe.data??[],K=ye.data??[],X=de.data??[],ke=new Map(K.map(me=>[me.id,me.name])),je=new Map(X.map(me=>[me.id,me.name])),z=b.useMemo(()=>{const me=d?Number(d):null;return me?K.filter(Ge=>Ge.region_id===me):K},[K,d]),ne=b.useMemo(()=>{const me=O?Number(O):null;return me?K.filter(Ge=>Ge.region_id===me):K},[K,O]),I=b.useMemo(()=>{const me=S.trim().toLowerCase();return me?Q.filter(Ge=>Ge.full_name.toLowerCase().includes(me)):Q},[Q,S]),ce=Math.max(1,Math.ceil(I.length/G)),ue=(ee-1)*G,Ne=b.useMemo(()=>I.slice(ue,ue+G),[I,ue,G]),Re=I.length===0?0:ue+1,Le=I.length===0?0:Math.min(ue+G,I.length);return b.useEffect(()=>{H(1)},[S,T,O,U,G]),b.useEffect(()=>{H(me=>Math.min(me,ce))},[ce]),fe.isLoading||ye.isLoading||de.isLoading?n.jsx(Gt,{}):fe.isError||ye.isError||de.isError?n.jsx(Ot,{message:"Calisan verileri alinamadi."}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"Calisanlar",description:"Calisan kayitlarini bolge ve departman bazli yonetin.",action:n.jsx("button",{type:"button",onClick:()=>R(me=>!me),className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Yeni Calisan"})}),E?n.jsxs(Ue,{children:[n.jsxs("form",{onSubmit:le,className:"grid gap-3 md:grid-cols-5",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Ad Soyad",n.jsx("input",{value:l,onChange:me=>o(me.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Ada Lovelace"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge",n.jsxs("select",{value:d,onChange:me=>{m(me.target.value),g("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Atanmamis"}),X.map(me=>n.jsx("option",{value:me.id,children:me.name},me.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:f,onChange:me=>g(me.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Atanmamis"}),z.map(me=>n.jsx("option",{value:me.id,children:me.name},me.id))]})]}),n.jsxs("label",{className:"flex items-center gap-2 pt-7 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:v,onChange:me=>_(me.target.checked)}),"Aktif"]}),n.jsxs("div",{className:"flex gap-2 md:col-span-5",children:[n.jsx("button",{type:"submit",disabled:Se.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Se.isPending?"Kaydediliyor...":"Kaydet"}),n.jsx("button",{type:"button",onClick:()=>{R(!1),J(null)},className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),te?n.jsx("div",{className:"form-validation",children:te}):null]}):null,n.jsxs(Ue,{children:[n.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-5",children:[n.jsx(_i,{value:S,onChange:w,placeholder:"Calisan adina gore ara..."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge filtresi",n.jsxs("select",{value:O,onChange:me=>{q(me.target.value),D("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tum bolgeler"}),X.map(me=>n.jsx("option",{value:me.id,children:me.name},me.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman filtresi",n.jsxs("select",{value:U,onChange:me=>D(me.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tum departmanlar"}),ne.map(me=>n.jsx("option",{value:me.id,children:me.name},me.id))]})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:T,onChange:me=>A(me.target.checked)}),"Arsivdekileri goster"]})]}),n.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2 text-xs text-slate-600",children:[n.jsxs("p",{children:["Gosterilen satir: ",Re,"-",Le," / ",I.length]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:["Sayfa basi",n.jsx("select",{value:G,onChange:me=>Y(Number(me.target.value)),className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-800",children:ez.map(me=>n.jsx("option",{value:me,children:me},me))})]})]}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Calisan ID"}),n.jsx("th",{className:"py-2",children:"Ad Soyad"}),n.jsx("th",{className:"py-2",children:"Bolge"}),n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Islem"})]})}),n.jsx("tbody",{children:Ne.map(me=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:me.id}),n.jsx("td",{className:"py-2",children:me.full_name}),n.jsx("td",{className:"py-2",children:me.region_name??(me.region_id?je.get(me.region_id):"-")??"-"}),n.jsx("td",{className:"py-2",children:me.department_id?ke.get(me.department_id):"-"}),n.jsx("td",{className:"py-2",children:n.jsx(cr,{value:me.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(Ys,{to:`/employees/${me.id}`,onClick:()=>{sessionStorage.setItem("employee-detail-origin","employees"),sessionStorage.setItem("employee-detail-id",String(me.id))},className:"employee-action-btn employee-action-edit",children:"Duzenle"}),n.jsx("button",{type:"button",disabled:oe.isPending,onClick:()=>{const Ge=!me.is_active;window.confirm(Ge?`${me.full_name} arsivden cikarilsin mi?`:`${me.full_name} arsivlensin mi?`)&&oe.mutate({employeeId:me.id,nextStatus:Ge})},className:`employee-action-btn ${me.is_active?"employee-action-archive":"employee-action-restore"}`,children:me.is_active?"Arsivle":"Arsivden Cikar"})]})})]},me.id))})]})}),n.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Sayfa ",ee," / ",ce]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>H(me=>Math.max(1,me-1)),disabled:ee<=1,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Onceki"}),n.jsx("button",{type:"button",onClick:()=>H(me=>Math.min(ce,me+1)),disabled:ee>=ce,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Sonraki"})]})]}),I.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Arama kriterine uygun calisan bulunamadi."}):null]})]})}const nz=Xa({employee_id:Kn().int().positive(),start_date:da().min(1),end_date:da().min(1),type:Pf(["ANNUAL","SICK","UNPAID","EXCUSE","PUBLIC_HOLIDAY"]),status:Pf(["APPROVED","PENDING","REJECTED"]).default("APPROVED"),note:da().trim().optional()}).refine(e=>e.end_date>=e.start_date,{message:"Biti tarihi balang tarihinden kk olamaz.",path:["end_date"]});function az(){const e=na(),{pushToast:s}=ha(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState("ANNUAL"),[S,w]=b.useState("APPROVED"),[E,R]=b.useState(""),[T,A]=b.useState(null),[O,q]=b.useState(""),[U,D]=b.useState(String(new Date().getFullYear())),[G,Y]=b.useState(String(new Date().getMonth()+1)),ee=Qe({queryKey:["employees"],queryFn:()=>Ms({include_inactive:!0,status:"all"})}),H=b.useMemo(()=>{const le=Number(O),Q=Number(U),K=Number(G);return{employee_id:Number.isFinite(le)&&le>0?le:void 0,year:Number.isFinite(Q)&&Q>0?Q:void 0,month:Number.isFinite(K)&&K>0?K:void 0}},[O,U,G]),te=Qe({queryKey:["leaves",H.employee_id??"all",H.year??"all",H.month??"all"],queryFn:()=>g_(H)}),J=Je({mutationFn:t3,onSuccess:le=>{m(""),g(""),_("ANNUAL"),w("APPROVED"),R(""),A(null),s({variant:"success",title:"zin kayd oluturuldu",description:`zin #${le.id} kaydedildi.`}),e.invalidateQueries({queryKey:["leaves"]})},onError:le=>{const Q=He(le,"zin kayd oluturulamad.");A(Q.message),s({variant:"error",title:"zin oluturulamad",description:Q.message})}}),fe=Je({mutationFn:n3,onSuccess:(le,Q)=>{s({variant:"success",title:"zin kayd silindi",description:`zin #${Q} silindi.`}),e.invalidateQueries({queryKey:["leaves"]})},onError:le=>{const Q=He(le,"zin silinemedi.");s({variant:"error",title:"zin silinemedi",description:Q.message})}}),ye=le=>{le.preventDefault(),A(null);const Q=nz.safeParse({employee_id:l,start_date:d,end_date:f,type:v,status:S,note:E});if(!Q.success){const K=Q.error.issues[0]?.message??"zin formunu kontrol edin.";A(K),s({variant:"error",title:"Form hatas",description:K});return}J.mutate({...Q.data,note:Q.data.note||null})};if(ee.isLoading)return n.jsx(Gt,{});if(ee.isError)return n.jsx(Ot,{message:"alan listesi alnamad."});const de=ee.data??[],Se=te.data??[],oe=new Map(de.map(le=>[le.id,le.full_name]));return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"zin Kaytlar",description:"Yllk izin, rapor ve mazeret kaytlarn ynetin."}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Yeni zin Kayd"}),n.jsxs("form",{onSubmit:ye,className:"mt-4 grid gap-3 md:grid-cols-3",children:[n.jsx(Xs,{label:"alan",employees:de,value:l,onChange:o,emptyLabel:"Seiniz",helperText:"Ad-soyad veya ID ile arayn."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang Tarihi",n.jsx("input",{type:"date",value:d,onChange:le=>m(le.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti Tarihi",n.jsx("input",{type:"date",value:f,onChange:le=>g(le.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["zin Tipi",n.jsxs("select",{value:v,onChange:le=>_(le.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"ANNUAL",children:"YILLIK ZN"}),n.jsx("option",{value:"SICK",children:"RAPOR / HASTALIK"}),n.jsx("option",{value:"UNPAID",children:"CRETSZ ZN"}),n.jsx("option",{value:"EXCUSE",children:"MAZERET ZN"}),n.jsx("option",{value:"PUBLIC_HOLIDAY",children:"RESM TATL"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Onay Durumu",n.jsxs("select",{value:S,onChange:le=>w(le.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"APPROVED",children:"ONAYLI"}),n.jsx("option",{value:"PENDING",children:"BEKLEMEDE"}),n.jsx("option",{value:"REJECTED",children:"REDDEDLD"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-3",children:["Aklama Notu",n.jsx("textarea",{value:E,onChange:le=>R(le.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",rows:3})]}),n.jsx("div",{className:"md:col-span-3",children:n.jsx("button",{type:"submit",disabled:J.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:J.isPending?"Kaydediliyor...":"zin Kaydn Olutur"})})]}),T?n.jsx("div",{className:"form-validation",children:T}):null]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"zin Listesi Filtreleri"}),n.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-3",children:[n.jsx(Xs,{label:"alan",employees:de,value:O,onChange:q,emptyLabel:"Tm",helperText:"alana gre filtreleyin."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yl",n.jsx("input",{value:U,onChange:le=>D(le.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",n.jsx("input",{value:G,onChange:le=>Y(le.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]})]}),te.isLoading?n.jsx(Gt,{}):null,te.isError?n.jsx(Ot,{message:"zin listesi alnamad."}):null,!te.isLoading&&!te.isError?n.jsxs(Ue,{children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"zin ID"}),n.jsx("th",{className:"py-2",children:"alan"}),n.jsx("th",{className:"py-2",children:"zin Tipi"}),n.jsx("th",{className:"py-2",children:"Tarih Aral"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"lem"})]})}),n.jsx("tbody",{children:Se.map(le=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:le.id}),n.jsx("td",{className:"py-2",children:oe.get(le.employee_id)??le.employee_id}),n.jsx("td",{className:"py-2",children:le.type}),n.jsxs("td",{className:"py-2",children:[le.start_date," - ",le.end_date]}),n.jsx("td",{className:"py-2",children:n.jsx(cr,{value:le.status})}),n.jsx("td",{className:"py-2",children:n.jsx("button",{type:"button",onClick:()=>fe.mutate(le.id),className:"btn-danger rounded-lg border border-rose-300 px-3 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50",children:"Sil"})})]},le.id))})]})}),Se.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"zin kayd bulunamad."}):null]}):null]})}const sz=Xa({username:da().min(1,"Kullanici adi gerekli."),password:da().min(1,"Sifre gerekli."),mfaCode:da().optional(),mfaRecoveryCode:da().optional()});function iz(e){return e.code==="INVALID_CREDENTIALS"?"Giris bilgileri hatali":e.code==="MFA_REQUIRED"?"MFA kodu gerekli":e.code==="INVALID_MFA_CODE"?"MFA kodu gecersiz":e.code==="MFA_SETUP_REQUIRED"?"MFA kurulumu gerekli":e.code==="TOO_MANY_ATTEMPTS"?"Cok fazla deneme":e.code==="INTERNAL_ERROR"?"Sunucu hatasi":"Giris basarisiz"}function rz(){const e=$l(),s=ys(),{login:l}=Wl(),[o,d]=b.useState("admin"),[m,f]=b.useState(""),[g,v]=b.useState(""),[_,S]=b.useState(""),[w,E]=b.useState(null),[R,T]=b.useState(!1),A=b.useMemo(()=>{const q=s.state?.from,U=new URLSearchParams(s.search).get("redirect");return q??U??"/management-console"},[s.search,s.state]),O=async q=>{q.preventDefault(),E(null);const U=sz.safeParse({username:o,password:m,mfaCode:g,mfaRecoveryCode:_});if(!U.success){E({message:U.error.issues[0]?.message??"Form alanlarini kontrol et."});return}T(!0);try{await l(U.data.username,U.data.password,U.data.mfaCode,U.data.mfaRecoveryCode),e(A,{replace:!0})}catch(D){E(He(D,"Giris basarisiz."))}finally{T(!1)}};return n.jsx("div",{className:"admin-auth-screen flex min-h-screen items-center justify-center px-4",children:n.jsxs("div",{className:"admin-auth-card w-full max-w-md rounded-2xl border border-slate-200 bg-white p-8 shadow-panel",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Admin Giris"}),n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Puantaj yonetim paneline giris yap."}),n.jsxs("form",{onSubmit:O,className:"mt-6 space-y-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Kullanici Adi"}),n.jsx("input",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:o,onChange:q=>d(q.target.value)})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Sifre"}),n.jsx("input",{type:"password",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:m,onChange:q=>f(q.target.value)})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"MFA Kodu (gerekliyse)"}),n.jsx("input",{inputMode:"numeric",pattern:"[0-9]*",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:g,onChange:q=>v(q.target.value),placeholder:"6 haneli kod"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Recovery Kodu (MFA yoksa)"}),n.jsx("input",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:_,onChange:q=>S(q.target.value),placeholder:"Ornek: ABCDE-FGHIJ"})]}),w?n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[n.jsx("p",{className:"font-semibold",children:iz(w)}),n.jsx("p",{className:"mt-1",children:w.message}),w.requestId?n.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",w.requestId]}):null]}):null,n.jsx("button",{type:"submit",disabled:R,className:"btn-animated w-full rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:R?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Giris yapiliyor..."]}):"Giris Yap"})]}),n.jsxs("p",{className:"admin-auth-signature mt-5 text-center text-xs tracking-wide text-slate-500",children:[ps.signatureText," | BUILD: ",ps.buildVersion]})]})})}function lz(e){return e.todayStatus==="IN_PROGRESS"&&e.locationState==="LIVE"?{radius:9,color:"#3b82f6",fillColor:"#3b82f6",fillOpacity:.86,weight:2}:e.locationState==="STALE"?{radius:8,color:"#f59e0b",fillColor:"#f59e0b",fillOpacity:.86,weight:2}:e.todayStatus==="NOT_STARTED"?{radius:8,color:"#dc2626",fillColor:"#dc2626",fillOpacity:.82,weight:2}:e.locationState==="DORMANT"?{radius:7,color:"#94a3b8",fillColor:"#334155",fillOpacity:.74,weight:2}:{radius:8,color:"#64748b",fillColor:"#64748b",fillOpacity:.82,weight:2}}function oz({markers:e,focusedMarkerId:s=null}){const l=b.useRef(null),o=b.useRef(null),d=b.useRef(null),m=b.useRef(new Map);return b.useEffect(()=>{if(!l.current||o.current)return;const f=e[0]?.lat??39.92077,g=e[0]?.lon??32.85411,v=La.map(l.current,{center:[f,g],zoom:6,zoomControl:!0,attributionControl:!1});return o.current=v,La.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(v),d.current=La.layerGroup().addTo(v),()=>{o.current&&(o.current.remove(),o.current=null),d.current=null,m.current.clear()}},[e]),b.useEffect(()=>{if(!o.current||!d.current)return;const f=o.current,g=d.current;if(g.clearLayers(),m.current.clear(),!e.length)return;const v=[],_=new Map,S=new Map;for(const w of e){const E=`${w.lat.toFixed(6)}:${w.lon.toFixed(6)}`;_.set(E,(_.get(E)??0)+1)}for(const w of e){const E=`${w.lat.toFixed(6)}:${w.lon.toFixed(6)}`,R=_.get(E)??1,T=S.get(E)??0;S.set(E,T+1);let A=w.lat,O=w.lon;if(R>1){const U=2*Math.PI*T/R,D=18e-5;A=w.lat+Math.sin(U)*D,O=w.lon+Math.cos(U)*D}const q=La.circleMarker([A,O],lz(w)).bindPopup(`${w.label}<br/>${w.lat.toFixed(5)}, ${w.lon.toFixed(5)}`).addTo(g);m.current.set(w.id,q),v.push([A,O])}v.length===1?f.setView(v[0],15,{animate:!0}):f.fitBounds(La.latLngBounds(v),{padding:[26,26],maxZoom:15,animate:!0}),window.setTimeout(()=>{f.invalidateSize()},80)},[e]),b.useEffect(()=>{if(!s||!o.current)return;const f=m.current.get(s);if(!f)return;const g=f.getLatLng();o.current.setView(g,Math.max(o.current.getZoom(),14),{animate:!0}),f.openPopup()},[s,e]),n.jsx("div",{ref:l,className:"control-room-map-canvas","aria-label":"Kontrol odasi calisan haritasi"})}const A_="Europe/Istanbul",uz=24,cz=[12,24,50,100],Sv=[{value:"risk_score",label:"Risk skoru"},{value:"last_activity",label:"Son aktivite"},{value:"last_checkin",label:"Son giris"},{value:"last_checkout",label:"Son cikis"},{value:"worked_today",label:"Bugunku sure"},{value:"weekly_total",label:"Haftalik sure"},{value:"violation_count_7d",label:"Ihlal sayisi"},{value:"employee_name",label:"Personel adi"},{value:"department_name",label:"Departman"}];function yf(e=0){const s=new Date;return s.setDate(s.getDate()+e),new Intl.DateTimeFormat("en-CA",{timeZone:A_,year:"numeric",month:"2-digit",day:"2-digit"}).format(s)}function vf(){return{q:"",region_id:"",department_id:"",start_date:yf(-6),end_date:yf(0),map_date:yf(0),include_inactive:!1,risk_min:"",risk_max:"",risk_status:"",sort_by:"risk_score",sort_dir:"desc",limit:uz}}function Xc(e){const s=e.trim();if(!s)return;const l=Number(s);return Number.isFinite(l)?l:void 0}function bf(e,s){return{q:e.q.trim()||void 0,region_id:Xc(e.region_id),department_id:Xc(e.department_id),start_date:e.start_date||void 0,end_date:e.end_date||void 0,map_date:e.map_date||void 0,include_inactive:e.include_inactive,risk_min:Xc(e.risk_min),risk_max:Xc(e.risk_max),risk_status:e.risk_status||void 0,sort_by:e.sort_by,sort_dir:e.sort_dir,limit:e.limit,offset:(s-1)*e.limit}}function $a(e){return e?new Intl.DateTimeFormat("tr-TR",{timeZone:A_,dateStyle:"short",timeStyle:"short"}).format(new Date(e)):"-"}function wv(e){if(!e)return"Veri yok";const s=Date.now()-new Date(e).getTime();if(!Number.isFinite(s))return"-";const l=Math.max(0,Math.round(s/6e4));if(l<1)return"Simdi";if(l<60)return`${l} dk once`;const o=Math.floor(l/60);return o<24?`${o} sa once`:`${Math.floor(o/24)} gun once`}function kv(e){if(e==null||Number.isNaN(e))return"-";const s=Math.max(0,Math.round(e));return`${String(Math.floor(s/60)).padStart(2,"0")}:${String(s%60).padStart(2,"0")}`}function eu(e){return e==="CRITICAL"?"Kritik":e==="WATCH"?"Izlemeli":"Normal"}function _f(e){return e==="IN_PROGRESS"?"Aktif vardiya":e==="FINISHED"?"Gun kapandi":"Bugun giris yok"}function dz(e){return e==="VERIFIED_HOME"?"Dogrulandi":e==="UNVERIFIED_LOCATION"?"Sapma":"Konum yok"}function mz(e){return e==="LIVE"?"Canli":e==="STALE"?"Yakinda":e==="DORMANT"?"Eski":"Veri yok"}function tu(e){return e==="CRITICAL"?"is-critical":e==="WATCH"?"is-watch":"is-normal"}function Ev(e){return e==="CRITICAL"?"Kritik":e==="ATTENTION"?"Izlemeli":"Stabil"}function hz(e){return e==="CRITICAL"?"is-critical":e==="ATTENTION"?"is-watch":"is-normal"}function Tv(e){return e.tooltip_items.length?e.tooltip_items.map(s=>`${s.title}: ${s.body}`).join(`
`):"Ek aciklama yok."}function fz(e,s){const l=s.trim().toLocaleLowerCase("tr-TR").replace("#","");if(!l)return 1;const o=e.full_name.toLocaleLowerCase("tr-TR"),d=String(e.id);return o.startsWith(l)||d.startsWith(l)?5:o.includes(l)||d.includes(l)?3:0}function pz({value:e,employees:s,onChange:l}){const[o,d]=b.useState(!1),m=b.useMemo(()=>s.map(f=>({employee:f,score:fz(f,e)})).filter(f=>f.score>0||!e.trim()).sort((f,g)=>g.score-f.score||f.employee.full_name.localeCompare(g.employee.full_name,"tr-TR")).slice(0,e.trim()?10:8),[s,e]);return n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Personel"}),n.jsxs("div",{className:"ops-lookup-shell",children:[n.jsx("input",{value:e,onFocus:()=>d(!0),onBlur:()=>window.setTimeout(()=>d(!1),120),onChange:f=>{l(f.target.value),d(!0)},placeholder:"Ad, soyad veya #ID",autoComplete:"off"}),e?n.jsx("button",{type:"button",className:"ops-inline-button",onMouseDown:f=>f.preventDefault(),onClick:()=>{l(""),d(!1)},children:"Temizle"}):null,o?n.jsx("div",{className:"ops-lookup-menu",children:m.length?m.map(({employee:f})=>n.jsxs("button",{type:"button",className:"ops-lookup-option",onMouseDown:g=>g.preventDefault(),onClick:()=>{l(f.full_name),d(!1)},children:[n.jsx("strong",{children:f.full_name}),n.jsxs("span",{children:["#",f.id]})]},f.id)):n.jsx("div",{className:"ops-lookup-empty",children:"Eslesen personel bulunamadi."})}):null]})]})}function rr({label:e,value:s,meta:l}){return n.jsxs("article",{className:"ops-kpi-card",children:[n.jsx("span",{className:"ops-kpi-label",children:e}),n.jsx("strong",{className:"ops-kpi-value",children:s}),l?n.jsx("span",{className:"ops-kpi-meta",children:l}):null]})}function xz(e,s){return e?s==="asc"?"":"":""}function gz(){const e=na(),{pushToast:s}=ha(),[l,o]=b.useState(vf()),[d,m]=b.useState(vf()),[f,g]=b.useState(1),[v,_]=b.useState(null),[S,w]=b.useState(!1),[E,R]=b.useState(null),[T,A]=b.useState(""),[O,q]=b.useState(""),[U,D]=b.useState("1"),[G,Y]=b.useState("50"),[ee,H]=b.useState(""),[te,J]=b.useState(""),[fe,ye]=b.useState(""),[de,Se]=b.useState(!1),oe=Qe({queryKey:["regions","control-room-matrix"],queryFn:()=>Xl()}),le=Qe({queryKey:["departments","control-room-matrix"],queryFn:()=>ji()}),Q=Qe({queryKey:["employees","control-room-matrix"],queryFn:()=>Ms()}),K=b.useMemo(()=>bf(d,f),[d,f]),X=Qe({queryKey:["control-room-overview",K],queryFn:()=>VA(K)}),ke=Qe({queryKey:["control-room-detail",v],queryFn:()=>$A(v),enabled:S&&v!==null}),je=Je({mutationFn:WA}),z=Je({mutationFn:async()=>{if(!v||!E)throw new Error("Personel secilmedi.");return E.kind==="action"?YA({employee_id:v,action_type:E.actionType,reason:T,note:O,duration_days:U==="indefinite"?void 0:Number(U),indefinite:U==="indefinite"}):E.kind==="override"?JA({employee_id:v,override_score:Math.max(0,Math.min(100,Number(G)||0)),reason:T,note:O,duration_days:U==="indefinite"?void 0:Number(U),indefinite:U==="indefinite"}):XA({employee_id:v,note:O})},onSuccess:M=>{s({variant:"success",title:"Kaydedildi",description:M.message}),R(null),A(""),q(""),Y("50"),D("1"),e.invalidateQueries({queryKey:["control-room-overview"]}),v!==null&&e.invalidateQueries({queryKey:["control-room-detail",v]})},onError:M=>{const Oe=M instanceof Error?M.message:"Islem tamamlanamadi.";s({variant:"error",title:"Islem hatasi",description:Oe})}}),ne=()=>{const M={...l};m(M),g(1),je.mutate({filters:{...bf(M,1)},total_results:X.data?.total})},I=M=>{const Oe=d.sort_by===M&&d.sort_dir==="desc"?"asc":"desc",mt={...d,sort_by:M,sort_dir:Oe};o(mt),m(mt),g(1),je.mutate({filters:{...bf(mt,1)},total_results:X.data?.total})},ce=M=>{_(M),w(!0)},ue=M=>{R(M),A(""),q(""),D("1"),Y("50")},Ne=ke.data?.employee_state??X.data?.items.find(M=>M.employee.id===v)??null,Re=Math.max(1,Math.ceil((X.data?.total??0)/(X.data?.limit||d.limit))),Le=X.data?.summary,me=b.useMemo(()=>(X.data?.map_points??[]).map(M=>({id:String(M.employee_id),lat:M.lat,lon:M.lon,label:M.label,todayStatus:M.today_status,locationState:M.location_state})),[X.data?.map_points]),Ge=b.useMemo(()=>{const M=ee.trim().toLocaleLowerCase("tr-TR");return(X.data?.recent_events??[]).filter(Oe=>te&&Oe.event_type!==te||fe&&Oe.location_status!==fe||de&&v!==null&&Oe.employee_id!==v?!1:M?[Oe.employee_name,Oe.department_name??"",String(Oe.employee_id)].join(" ").toLocaleLowerCase("tr-TR").includes(M):!0)},[fe,de,ee,te,X.data?.recent_events,v]),Ye=b.useMemo(()=>{const M=X.data?.active_filters;return M?[M.start_date&&M.end_date?`Analiz: ${M.start_date} - ${M.end_date}`:null,M.map_date?`Harita gunu: ${M.map_date}`:null,M.region_id?`Bolge #${M.region_id}`:null,M.department_id?`Departman #${M.department_id}`:null,M.risk_status?`Durum: ${eu(M.risk_status)}`:null,M.risk_min!=null||M.risk_max!=null?`Risk araligi: ${M.risk_min??0}-${M.risk_max??100}`:null,M.include_inactive?"Pasif personel dahil":null,`Siralama: ${Sv.find(Oe=>Oe.value===M.sort_by)?.label??M.sort_by} / ${M.sort_dir==="desc"?"Azalan":"Artan"}`,`Limit: ${M.limit}`].filter(Boolean):[]},[X.data?.active_filters]),Tt=Math.max(1,...(Le?.risk_histogram??[]).map(M=>M.count)),ht=Math.max(1,...(Le?.weekly_trend??[]).map(M=>M.value));return X.isLoading?n.jsx(Gt,{label:"Operasyonel guvenlik matrisi yukleniyor..."}):X.isError||!X.data?n.jsx(Ot,{message:"Operasyonel guvenlik matrisi verileri alinamadi."}):n.jsxs("div",{className:"ops-matrix-page",children:[n.jsx(Xn,{title:"Ana Panel",description:"Yonetim Konsolu. Operasyonel Guvenlik Matrisi, risk analizi, mesai takibi ve mudahale araclari bu ekranin merkezinde birlesir.",action:n.jsxs("div",{className:"ops-filter-action-group",children:[n.jsx(Ys,{to:"/notifications",className:"ops-button ops-button-ghost",children:"Bildirimler"}),n.jsx(Ys,{to:"/attendance-events",className:"ops-button ops-button-ghost",children:"Yoklama Kayitlari"}),n.jsx("button",{type:"button",className:"ops-button ops-button-secondary",onClick:()=>{X.refetch()},children:"Yenile"})]})}),n.jsxs("section",{className:"ops-panel",children:[n.jsxs("div",{className:"ops-panel-head",children:[n.jsxs("div",{children:[n.jsx("p",{className:"ops-panel-kicker",children:"YONETIM KONSOLU"}),n.jsx("h3",{children:"Canli operasyon akisi, risk yogunlugu ve mudahale katmani tek merkezde."})]}),n.jsxs("div",{className:"ops-filter-summary-text",children:["Sistem durumu:"," ",n.jsx("span",{className:`ops-status-pill ${hz(Le?.system_status??"HEALTHY")}`,children:Ev(Le?.system_status??"HEALTHY")})]})]}),n.jsxs("div",{className:"ops-filter-summary-text",children:["Son guncelleme: ",$a(X.data.generated_at_utc),". Filtrelenen kapsam icinde departman, ihlal, risk ve fazla mesai gorunumu ayni panelde izlenir."]})]}),n.jsxs("section",{className:"ops-filter-panel",children:[n.jsxs("div",{className:"ops-panel-head",children:[n.jsxs("div",{children:[n.jsx("p",{className:"ops-panel-kicker",children:"AKTIF FILTRELER"}),n.jsx("h3",{children:"Filtre yigini ve siralama kontrolu"})]}),n.jsxs("div",{className:"ops-filter-summary-text",children:["Son guncelleme: ",$a(X.data.generated_at_utc)]})]}),n.jsxs("div",{className:"ops-filter-grid",children:[n.jsx(pz,{value:l.q,employees:Q.data??[],onChange:M=>o(Oe=>({...Oe,q:M}))}),n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Bolge"}),n.jsxs("select",{value:l.region_id,onChange:M=>o(Oe=>({...Oe,region_id:M.target.value})),children:[n.jsx("option",{value:"",children:"Tum bolgeler"}),(oe.data??[]).map(M=>n.jsx("option",{value:M.id,children:M.name},M.id))]})]}),n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Departman"}),n.jsxs("select",{value:l.department_id,onChange:M=>o(Oe=>({...Oe,department_id:M.target.value})),children:[n.jsx("option",{value:"",children:"Tum departmanlar"}),(le.data??[]).map(M=>n.jsx("option",{value:M.id,children:M.name},M.id))]})]}),n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Baslangic tarihi"}),n.jsx("input",{type:"date",value:l.start_date,onChange:M=>o(Oe=>({...Oe,start_date:M.target.value}))})]}),n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Bitis tarihi"}),n.jsx("input",{type:"date",value:l.end_date,min:l.start_date||void 0,onChange:M=>o(Oe=>({...Oe,end_date:M.target.value}))})]}),n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Harita gunu"}),n.jsx("input",{type:"date",value:l.map_date,onChange:M=>o(Oe=>({...Oe,map_date:M.target.value}))})]}),n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Risk min"}),n.jsx("input",{type:"number",min:0,max:100,value:l.risk_min,onChange:M=>o(Oe=>({...Oe,risk_min:M.target.value})),placeholder:"0"})]}),n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Risk max"}),n.jsx("input",{type:"number",min:0,max:100,value:l.risk_max,onChange:M=>o(Oe=>({...Oe,risk_max:M.target.value})),placeholder:"100"})]}),n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Durum"}),n.jsxs("select",{value:l.risk_status,onChange:M=>o(Oe=>({...Oe,risk_status:M.target.value})),children:[n.jsx("option",{value:"",children:"Tum durumlar"}),n.jsx("option",{value:"NORMAL",children:"Normal"}),n.jsx("option",{value:"WATCH",children:"Izlemeli"}),n.jsx("option",{value:"CRITICAL",children:"Kritik"})]})]}),n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Siralama"}),n.jsx("select",{value:l.sort_by,onChange:M=>o(Oe=>({...Oe,sort_by:M.target.value})),children:Sv.map(M=>n.jsx("option",{value:M.value,children:M.label},M.value))})]}),n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Yon"}),n.jsxs("select",{value:l.sort_dir,onChange:M=>o(Oe=>({...Oe,sort_dir:M.target.value})),children:[n.jsx("option",{value:"desc",children:"Azalan"}),n.jsx("option",{value:"asc",children:"Artan"})]})]}),n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Sayfa limiti"}),n.jsx("select",{value:l.limit,onChange:M=>o(Oe=>({...Oe,limit:Number(M.target.value)})),children:cz.map(M=>n.jsx("option",{value:M,children:M},M))})]}),n.jsxs("label",{className:"ops-check-field",children:[n.jsx("input",{type:"checkbox",checked:l.include_inactive,onChange:M=>o(Oe=>({...Oe,include_inactive:M.target.checked}))}),n.jsx("span",{children:"Pasif personeli dahil et"})]})]}),n.jsxs("div",{className:"ops-filter-actions",children:[n.jsx("div",{className:"ops-filter-chip-list",children:Ye.map(M=>n.jsx("span",{className:"ops-filter-chip",children:M},M))}),n.jsxs("div",{className:"ops-filter-action-group",children:[n.jsx("button",{type:"button",className:"ops-button ops-button-ghost",onClick:()=>{const M=vf();o(M),m(M),g(1)},children:"Varsayilanlara don"}),n.jsx("button",{type:"button",className:"ops-button ops-button-primary",onClick:ne,children:"Filtreleri uygula"})]})]})]}),n.jsxs("section",{className:"ops-kpi-grid",children:[n.jsx(rr,{label:"Toplam aktif calisan",value:Le?.active_employees??0,meta:`${Le?.total_employees??0} kayit icinde`}),n.jsx(rr,{label:"Kritik riskli calisan",value:Le?.critical_count??0,meta:"Anlik kritik seviye"}),n.jsx(rr,{label:"Izlemeli calisan",value:Le?.watch_count??0,meta:"Yakindan takip gereken"}),n.jsx(rr,{label:"Ortalama risk skoru",value:Le?.average_risk_score??0,meta:"Filtrelenen evren ortalamasi"}),n.jsx(rr,{label:"Aktif mesai sayisi",value:Le?.active_overtime_count??0,meta:"Planli sureyi asan acik vardiya"}),n.jsx(rr,{label:"Gunluk ihlal sayisi",value:Le?.daily_violation_count??0,meta:"Bugun olusan toplam ihlal"}),n.jsx(rr,{label:"Aktif vardiya",value:Le?.in_progress_count??0,meta:"Bugun acik vardiyasi olanlar"}),n.jsx(rr,{label:"Sistem durumu",value:Ev(Le?.system_status??"HEALTHY"),meta:`En riskli zaman: ${Le?.most_common_violation_window??"-"}`})]}),n.jsxs("section",{className:"ops-analytics-grid",children:[n.jsxs("article",{className:"ops-panel",children:[n.jsx("div",{className:"ops-panel-head",children:n.jsxs("div",{children:[n.jsx("p",{className:"ops-panel-kicker",children:"RISK DAGILIMI"}),n.jsx("h3",{children:"Risk skoru histogrami"})]})}),n.jsx("div",{className:"ops-bar-list",children:(Le?.risk_histogram??[]).map(M=>n.jsxs("div",{className:"ops-bar-row",children:[n.jsx("span",{children:M.label}),n.jsx("div",{className:"ops-bar-track",children:n.jsx("div",{className:"ops-bar-fill ops-bar-fill-info",style:{width:`${M.count/Tt*100}%`}})}),n.jsx("strong",{children:M.count})]},M.label))})]}),n.jsxs("article",{className:"ops-panel",children:[n.jsx("div",{className:"ops-panel-head",children:n.jsxs("div",{children:[n.jsx("p",{className:"ops-panel-kicker",children:"HAFTALIK TREND"}),n.jsx("h3",{children:"Ihlal yogunlugu"})]})}),n.jsx("div",{className:"ops-trend-list",children:(Le?.weekly_trend??[]).map(M=>n.jsxs("div",{className:"ops-trend-item",children:[n.jsx("div",{className:"ops-trend-bar",style:{height:`${Math.max(12,M.value/ht*100)}%`}}),n.jsx("strong",{children:M.value}),n.jsx("span",{children:M.label})]},M.label))})]}),n.jsxs("article",{className:"ops-panel ops-panel-span-2",children:[n.jsx("div",{className:"ops-panel-head",children:n.jsxs("div",{children:[n.jsx("p",{className:"ops-panel-kicker",children:"DEPARTMAN KPI"}),n.jsx("h3",{children:"Departman bazli operasyon metrikleri"})]})}),n.jsx("div",{className:"ops-department-grid",children:(Le?.department_metrics??[]).map(M=>n.jsxs("div",{className:"ops-department-card",children:[n.jsx("strong",{children:M.department_name}),n.jsxs("span",{children:[M.employee_count," personel"]}),n.jsxs("span",{children:["Ort. giris: ",kv(M.average_checkin_minutes)]}),n.jsxs("span",{children:["Gec kalma: %",M.late_rate_percent]}),n.jsxs("span",{children:["Ort. aktif sure: ",kv(M.average_active_minutes)]})]},M.department_name))})]})]}),n.jsxs("section",{className:"ops-main-grid",children:[n.jsxs("article",{className:"ops-panel",children:[n.jsxs("div",{className:"ops-panel-head",children:[n.jsxs("div",{children:[n.jsx("p",{className:"ops-panel-kicker",children:"LOKASYON DAGILIMI"}),n.jsx("h3",{children:"Harita gorunumu"})]}),n.jsxs("div",{className:"ops-filter-summary-text",children:["Harita gunu: ",X.data.active_filters.map_date??"-"]})]}),me.length?n.jsx(oz,{markers:me,focusedMarkerId:v?String(v):null}):n.jsx("div",{className:"ops-empty-state",children:"Secili gun icin harita verisi bulunmuyor."})]}),n.jsxs("article",{className:"ops-panel",children:[n.jsxs("div",{className:"ops-panel-head",children:[n.jsxs("div",{children:[n.jsx("p",{className:"ops-panel-kicker",children:"OLAY AKISI"}),n.jsx("h3",{children:"Son personel hareketleri"})]}),n.jsxs("div",{className:"ops-filter-summary-text",children:[Ge.length," olay"]})]}),n.jsxs("div",{className:"ops-feed-filters",children:[n.jsx("input",{value:ee,onChange:M=>H(M.target.value),placeholder:"Personel, departman veya ID ara"}),n.jsxs("select",{value:te,onChange:M=>J(M.target.value),children:[n.jsx("option",{value:"",children:"Tum tipler"}),n.jsx("option",{value:"IN",children:"Giris"}),n.jsx("option",{value:"OUT",children:"Cikis"})]}),n.jsxs("select",{value:fe,onChange:M=>ye(M.target.value),children:[n.jsx("option",{value:"",children:"Tum lokasyon durumlari"}),n.jsx("option",{value:"VERIFIED_HOME",children:"Dogrulandi"}),n.jsx("option",{value:"UNVERIFIED_LOCATION",children:"Sapma"}),n.jsx("option",{value:"NO_LOCATION",children:"Konum yok"})]}),n.jsxs("label",{className:"ops-check-field ops-check-inline",children:[n.jsx("input",{type:"checkbox",checked:de,onChange:M=>Se(M.target.checked)}),n.jsx("span",{children:"Secili personeli izle"})]})]}),n.jsx("div",{className:"ops-feed-list",children:Ge.length?Ge.map(M=>n.jsxs("button",{type:"button",className:"ops-feed-item",onClick:()=>ce(M.employee_id),children:[n.jsxs("div",{children:[n.jsx("strong",{children:M.employee_name}),n.jsx("span",{children:M.department_name??"Departman yok"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:M.event_type==="IN"?"Giris":"Cikis"}),n.jsx("span",{children:dz(M.location_status)})]}),n.jsxs("div",{children:[n.jsx("strong",{children:$a(M.ts_utc)}),n.jsxs("span",{children:["#",M.device_id]})]})]},M.event_id)):n.jsx("div",{className:"ops-empty-state",children:"Filtreye uygun olay bulunmuyor."})})]})]}),n.jsxs("section",{className:"ops-panel ops-table-panel",children:[n.jsxs("div",{className:"ops-panel-head",children:[n.jsxs("div",{children:[n.jsx("p",{className:"ops-panel-kicker",children:"OPERASYONEL GUVENLIK MATRISI"}),n.jsx("h3",{children:"Risk bazli davranis, ihlal ve mesai tablosu"})]}),n.jsxs("div",{className:"ops-pagination-head",children:[n.jsxs("span",{children:[X.data.total," kayit"]}),n.jsxs("span",{children:["Sayfa ",f," / ",Re]})]})]}),n.jsx("div",{className:"ops-table-wrap",children:n.jsxs("table",{className:"ops-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[[["employee_name","Personel Adi"],["department_name","Departman"],["last_checkin","Son Giris Tarihi"],["last_checkout","Son Cikis Tarihi"],["worked_today","Toplam Calisma Suresi (Bugun)"],["weekly_total","Haftalik Toplam Sure"],["violation_count_7d","Kural Ihlali (7 gun)"],["risk_score","Risk Skoru"],["risk_status","Durum"],["last_activity","Son Aktivite"],["recent_ip","IP"],["location_label","Lokasyon"]].map(([M,Oe])=>n.jsx("th",{children:M==="risk_status"||M==="recent_ip"||M==="location_label"?Oe:n.jsxs("button",{type:"button",className:"ops-sort-button",onClick:()=>I(M),children:[Oe," ",n.jsx("span",{children:xz(d.sort_by===M,d.sort_dir)})]})},M)),n.jsx("th",{children:"Detay"})]})}),n.jsx("tbody",{children:X.data.items.map(M=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"ops-cell-stack",children:[n.jsx("strong",{children:M.employee.full_name}),n.jsx("span",{children:_f(M.today_status)})]})}),n.jsx("td",{children:M.department_name??"-"}),n.jsx("td",{children:$a(M.last_checkin_utc)}),n.jsx("td",{children:$a(M.last_checkout_utc)}),n.jsx("td",{children:n.jsx($e,{minutes:M.worked_today_minutes})}),n.jsx("td",{children:n.jsx($e,{minutes:M.weekly_total_minutes})}),n.jsx("td",{children:n.jsxs("div",{className:"ops-cell-stack",children:[n.jsx("strong",{children:M.violation_count_7d}),n.jsx("span",{title:Tv(M),children:M.tooltip_items.length?"Aciklama var":"Ek aciklama yok"})]})}),n.jsx("td",{children:n.jsx("span",{className:`ops-risk-pill ${tu(M.risk_status)}`,children:M.risk_score})}),n.jsx("td",{children:n.jsx("span",{className:`ops-status-pill ${tu(M.risk_status)}`,children:eu(M.risk_status)})}),n.jsx("td",{children:n.jsxs("div",{className:"ops-cell-stack",children:[n.jsx("strong",{children:$a(M.last_activity_utc)}),n.jsx("span",{children:wv(M.last_activity_utc)})]})}),n.jsx("td",{children:M.recent_ip??"-"}),n.jsx("td",{children:n.jsxs("div",{className:"ops-cell-stack",children:[n.jsx("strong",{children:M.location_label??"-"}),n.jsx("span",{children:mz(M.location_state)})]})}),n.jsx("td",{children:n.jsx("button",{type:"button",className:"ops-button ops-button-info",onClick:()=>ce(M.employee.id),children:"Detay"})})]},M.employee.id))})]})}),n.jsx("div",{className:"ops-card-list",children:X.data.items.map(M=>n.jsxs("article",{className:"ops-card",children:[n.jsxs("div",{className:"ops-card-head",children:[n.jsxs("div",{children:[n.jsx("h4",{children:M.employee.full_name}),n.jsx("p",{children:M.department_name??"Departman yok"})]}),n.jsxs("div",{className:`ops-card-score ${tu(M.risk_status)}`,children:[n.jsx("strong",{children:M.risk_score}),n.jsx("span",{children:eu(M.risk_status)})]})]}),n.jsxs("div",{className:"ops-card-primary",children:[n.jsx("span",{className:`ops-status-pill ${tu(M.risk_status)}`,children:eu(M.risk_status)}),n.jsx("span",{children:_f(M.today_status)}),n.jsxs("span",{children:[M.violation_count_7d," ihlal"]}),n.jsx("span",{children:wv(M.last_activity_utc)})]}),n.jsxs("div",{className:"ops-card-grid",children:[n.jsxs("div",{children:[n.jsx("span",{children:"Bugun"}),n.jsx("strong",{children:n.jsx($e,{minutes:M.worked_today_minutes})})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Haftalik"}),n.jsx("strong",{children:n.jsx($e,{minutes:M.weekly_total_minutes})})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Son giris"}),n.jsx("strong",{children:$a(M.last_checkin_utc)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Son cikis"}),n.jsx("strong",{children:$a(M.last_checkout_utc)})]})]}),n.jsxs("details",{className:"ops-card-details",children:[n.jsx("summary",{children:"Teknik detaylar"}),n.jsxs("div",{className:"ops-card-grid ops-card-grid-detail",children:[n.jsxs("div",{children:[n.jsx("span",{children:"IP"}),n.jsx("strong",{children:M.recent_ip??"-"})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Lokasyon"}),n.jsx("strong",{children:M.location_label??"-"})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Aktif cihaz"}),n.jsxs("strong",{children:[M.active_devices," / ",M.total_devices]})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Aciklama"}),n.jsx("strong",{title:Tv(M),children:M.tooltip_items[0]?.title??"Ek aciklama yok"})]})]})]}),n.jsx("div",{className:"ops-card-actions",children:n.jsx("button",{type:"button",className:"ops-button ops-button-info",onClick:()=>ce(M.employee.id),children:"Detay"})})]},M.employee.id))}),n.jsxs("div",{className:"ops-pagination-footer",children:[n.jsx("button",{type:"button",className:"ops-button ops-button-secondary",onClick:()=>g(M=>Math.max(1,M-1)),disabled:f<=1,children:"Onceki"}),n.jsxs("span",{children:["Sayfa ",f," / ",Re]}),n.jsx("button",{type:"button",className:"ops-button ops-button-secondary",onClick:()=>g(M=>Math.min(Re,M+1)),disabled:f>=Re,children:"Sonraki"})]})]}),n.jsxs("section",{className:"ops-panel",children:[n.jsx("div",{className:"ops-panel-head",children:n.jsxs("div",{children:[n.jsx("p",{className:"ops-panel-kicker",children:"SKOR FORMULU"}),n.jsx("h3",{children:"Risk skoru acik hesaplama mantigi"})]})}),n.jsx("div",{className:"ops-formula-grid",children:X.data.risk_formula.map(M=>n.jsxs("article",{className:"ops-formula-card",children:[n.jsx("strong",{children:M.label}),n.jsxs("span",{children:["Tavan puan: ",M.max_score]}),n.jsx("p",{children:M.description})]},M.code))})]}),n.jsx(Js,{open:S,title:Ne?`${Ne.employee.full_name} - Operasyon dosyasi`:"Operasyon dosyasi",onClose:()=>w(!1),placement:"right",maxWidthClass:"max-w-4xl",children:ke.isLoading&&ke.data==null?n.jsx(Gt,{label:"Personel detayi yukleniyor..."}):ke.isError?n.jsx(Ot,{message:"Personel detay bilgisi alinamadi."}):Ne?n.jsxs("div",{className:"ops-detail-shell",children:[n.jsxs("div",{className:"ops-detail-hero",children:[n.jsxs("div",{children:[n.jsx("p",{className:"ops-panel-kicker",children:"OPERASYON OZETI"}),n.jsx("h3",{children:Ne.employee.full_name}),n.jsxs("p",{children:[Ne.department_name??"Departman yok","  ",_f(Ne.today_status)]})]}),n.jsxs("div",{className:`ops-detail-score ${tu(Ne.risk_status)}`,children:[n.jsx("strong",{children:Ne.risk_score}),n.jsx("span",{children:eu(Ne.risk_status)})]})]}),n.jsxs("div",{className:"ops-detail-actions",children:[n.jsx("button",{type:"button",className:"ops-button ops-button-warning",onClick:()=>ue({kind:"action",actionType:"REVIEW"}),children:"Incelemeye Al"}),n.jsx("button",{type:"button",className:"ops-button ops-button-secondary",onClick:()=>ue({kind:"action",actionType:"DISABLE_TEMP"}),children:"Gecici Devre Disi"}),n.jsx("button",{type:"button",className:"ops-button ops-button-danger",onClick:()=>ue({kind:"action",actionType:"SUSPEND"}),children:"Askiya Al"}),n.jsx("button",{type:"button",className:"ops-button ops-button-info",onClick:()=>ue({kind:"override"}),children:"Risk Override"}),n.jsx("button",{type:"button",className:"ops-button ops-button-primary",onClick:()=>ue({kind:"note"}),children:"Not Ekle"}),n.jsx(Ys,{to:`/employees/${Ne.employee.id}`,className:"ops-button ops-button-ghost",children:"Calisan detayina git"})]}),n.jsxs("div",{className:"ops-detail-grid",children:[n.jsxs("div",{className:"ops-detail-card",children:[n.jsx("span",{children:"Son giris"}),n.jsx("strong",{children:$a(Ne.last_checkin_utc)})]}),n.jsxs("div",{className:"ops-detail-card",children:[n.jsx("span",{children:"Son cikis"}),n.jsx("strong",{children:$a(Ne.last_checkout_utc)})]}),n.jsxs("div",{className:"ops-detail-card",children:[n.jsx("span",{children:"Bugun"}),n.jsx("strong",{children:n.jsx($e,{minutes:Ne.worked_today_minutes})})]}),n.jsxs("div",{className:"ops-detail-card",children:[n.jsx("span",{children:"Haftalik"}),n.jsx("strong",{children:n.jsx($e,{minutes:Ne.weekly_total_minutes})})]}),n.jsxs("div",{className:"ops-detail-card",children:[n.jsx("span",{children:"IP"}),n.jsx("strong",{children:Ne.recent_ip??"-"})]}),n.jsxs("div",{className:"ops-detail-card",children:[n.jsx("span",{children:"Lokasyon"}),n.jsx("strong",{children:Ne.location_label??"-"})]})]}),n.jsxs("div",{className:"ops-detail-section",children:[n.jsx("h4",{children:"Risk faktorleri"}),n.jsx("div",{className:"ops-detail-list",children:ke.data?.employee_state.risk_factors.map(M=>n.jsxs("div",{className:"ops-detail-row",children:[n.jsxs("div",{children:[n.jsx("strong",{children:M.label}),n.jsx("p",{children:M.description})]}),n.jsxs("div",{className:"ops-detail-row-side",children:[n.jsx("span",{children:M.value}),n.jsxs("strong",{children:["+",M.impact_score]})]})]},M.code))})]}),n.jsxs("div",{className:"ops-detail-section",children:[n.jsx("h4",{children:"Aktif onlem ve notlar"}),n.jsxs("div",{className:"ops-detail-list",children:[ke.data?.recent_measures.length?ke.data.recent_measures.map((M,Oe)=>n.jsxs("div",{className:"ops-detail-row",children:[n.jsxs("div",{children:[n.jsx("strong",{children:M.label}),n.jsx("p",{children:M.reason})]}),n.jsxs("div",{className:"ops-detail-row-side",children:[n.jsx("span",{children:M.duration_days?`${M.duration_days} gun`:"Suresiz"}),n.jsx("strong",{children:$a(M.created_at)})]})]},`${M.created_at}-${Oe}`)):n.jsx("div",{className:"ops-empty-state",children:"Kayitli kontrol onlemi yok."}),ke.data?.recent_notes.length?ke.data.recent_notes.map((M,Oe)=>n.jsxs("div",{className:"ops-detail-row ops-detail-row-note",children:[n.jsxs("div",{children:[n.jsx("strong",{children:M.created_by}),n.jsx("p",{children:M.note})]}),n.jsx("div",{className:"ops-detail-row-side",children:n.jsx("strong",{children:$a(M.created_at)})})]},`${M.created_at}-${Oe}`)):null]})]}),n.jsxs("div",{className:"ops-detail-section",children:[n.jsx("h4",{children:"Audit izi"}),n.jsx("div",{className:"ops-detail-list ops-detail-list-scroll",children:ke.data?.recent_audit_entries.length?ke.data.recent_audit_entries.map(M=>n.jsxs("div",{className:"ops-detail-row",children:[n.jsxs("div",{children:[n.jsx("strong",{children:M.label}),n.jsx("p",{children:JSON.stringify(M.details)})]}),n.jsxs("div",{className:"ops-detail-row-side",children:[n.jsx("span",{children:M.actor_id}),n.jsx("strong",{children:$a(M.ts_utc)})]})]},M.audit_id)):n.jsx("div",{className:"ops-empty-state",children:"Audit kaydi bulunmuyor."})})]})]}):null}),n.jsx(Js,{open:E!==null,title:E?.kind==="action"?E.actionType==="SUSPEND"?"Askiya al":E.actionType==="DISABLE_TEMP"?"Gecici devre disi":"Incelemeye al":E?.kind==="override"?"Risk override":"Not ekle",onClose:()=>R(null),maxWidthClass:"max-w-2xl",children:n.jsxs("div",{className:"ops-action-form",children:[E?.kind!=="note"?n.jsxs(n.Fragment,{children:[n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Sebep"}),n.jsx("input",{value:T,onChange:M=>A(M.target.value),placeholder:"Islem gerekcesi"})]}),E?.kind==="override"?n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Risk skoru"}),n.jsx("input",{type:"number",min:0,max:100,value:G,onChange:M=>Y(M.target.value)})]}):null,n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:"Sure"}),n.jsxs("select",{value:U,onChange:M=>D(M.target.value),children:[n.jsx("option",{value:"1",children:"1 gun"}),n.jsx("option",{value:"3",children:"3 gun"}),n.jsx("option",{value:"7",children:"7 gun"}),n.jsx("option",{value:"indefinite",children:"Suresiz"})]})]})]}):null,n.jsxs("label",{className:"ops-field",children:[n.jsx("span",{children:E?.kind==="note"?"Not":"Islem notu"}),n.jsx("textarea",{value:O,onChange:M=>q(M.target.value),rows:5})]}),n.jsxs("div",{className:"ops-action-footer",children:[n.jsx("button",{type:"button",className:"ops-button ops-button-ghost",onClick:()=>R(null),children:"Vazgec"}),n.jsx("button",{type:"button",className:"ops-button ops-button-primary",disabled:z.isPending||!O.trim()||E?.kind!=="note"&&!T.trim(),onClick:()=>{z.mutateAsync()},children:z.isPending?"Kaydediliyor...":"Kaydet"})]})]})})]})}function yz(){return n.jsx(gz,{})}function vz(){return n.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",children:n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm",children:[n.jsx("p",{className:"text-4xl font-bold text-slate-900",children:"404"}),n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Sayfa bulunamadi."}),n.jsx(Ys,{to:"/management-console",className:"mt-5 inline-block rounded-lg bg-brand-600 px-4 py-2 text-sm text-white hover:bg-brand-700",children:"Ana Panel'e dn"}),n.jsx("p",{className:"mt-5 text-center text-xs tracking-wide text-slate-500",children:ps.signatureText})]})})}function Cv(e,s){const l=URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=s,document.body.appendChild(o),o.click(),o.remove(),URL.revokeObjectURL(l)}function bz(){const{pushToast:e}=ha(),s=new Date,[l,o]=b.useState("employee"),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState(""),[S,w]=b.useState(String(s.getFullYear())),[E,R]=b.useState(String(s.getMonth()+1)),[T,A]=b.useState(""),[O,q]=b.useState(""),[U,D]=b.useState(!0),[G,Y]=b.useState(!1),[ee,H]=b.useState(""),[te,J]=b.useState(""),[fe,ye]=b.useState("consolidated"),[de,Se]=b.useState(""),[oe,le]=b.useState(""),[Q,K]=b.useState(""),X=Qe({queryKey:["employees","all"],queryFn:()=>Ms({status:"all",include_inactive:!0})}),ke=Qe({queryKey:["departments"],queryFn:ji}),je=Qe({queryKey:["regions","all","for-export"],queryFn:()=>Xl({include_inactive:!0})}),z=Je({mutationFn:u3,onSuccess:M=>{Cv(M,`puantaj-${l}-${Date.now()}.xlsx`),e({variant:"success",title:"Excel indirildi",description:"Puantaj Excel dosyas baaryla indirildi."})},onError:M=>{e({variant:"error",title:"Da aktarma baarsz",description:He(M,"Excel dosyas retilemedi.").message})}}),ne=Je({mutationFn:h3,onSuccess:M=>{Cv(M,`puantaj-range-${fe}-${Date.now()}.xlsx`),e({variant:"success",title:"Aralkl Excel indirildi",description:"Tarih aral da aktarma dosyas indirildi."})},onError:M=>{e({variant:"error",title:"Tarih aral da aktarma baarsz",description:He(M,"Excel dosyas retilemedi.").message})}}),I=b.useMemo(()=>{const M=Number(S),Oe=Number(E),mt=Number(d),Rt=Number(f),It=Number(v);return l==="employee"?!mt||!M||!Oe?null:{mode:l,employee_id:mt,year:M,month:Oe}:l==="department"?!Rt||!M||!Oe?null:{mode:l,department_id:Rt,year:M,month:Oe,include_daily_sheet:U,include_inactive:G}:l==="all"?!M||!Oe?null:{mode:l,year:M,month:Oe,region_id:It||void 0,include_daily_sheet:U,include_inactive:G}:!T||!O?null:{mode:l,start_date:T,end_date:O,employee_id:mt||void 0,department_id:Rt||void 0,region_id:It||void 0,include_inactive:G}},[l,d,f,v,S,E,T,O,U,G]),ce=b.useMemo(()=>{const M=Number(Q),Oe=Number(de),mt=Number(oe);return!ee||!te?null:{start_date:ee,end_date:te,mode:fe,employee_id:M>0?M:void 0,department_id:Oe>0?Oe:void 0,region_id:mt>0?mt:void 0}},[ee,te,fe,Q,de,oe]),ue=()=>{if(!I){e({variant:"error",title:"Eksik filtre",description:"Setiiniz da aktarma tipine gre gerekli alanlar doldurun."});return}z.mutate(I)},Ne=()=>{if(!ce){e({variant:"error",title:"Eksik tarih aral filtresi",description:"Balang, biti ve gerekli filtreleri doldurun."});return}ne.mutate(ce)};if(X.isLoading||ke.isLoading||je.isLoading)return n.jsx(Gt,{});if(X.isError||ke.isError||je.isError)return n.jsx(Ot,{message:"alan/departman/blge bilgileri alnamad."});const Re=X.data??[],Le=ke.data??[],me=je.data??[],Ge=v?Number(v):null,Ye=oe?Number(oe):null,Tt=Ge&&Number.isFinite(Ge)?Le.filter(M=>M.region_id===Ge):Le,ht=Ye&&Number.isFinite(Ye)?Le.filter(M=>M.region_id===Ye):Le;return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"Puantaj Excel Da Aktar",description:"Mevcut endpoint veya tarih aral endpointi ile Excel da aktarm yapn."}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Mevcut Export Endpointi"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Da aktarma tipi",n.jsxs("select",{value:l,onChange:M=>o(M.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"employee",children:"alan Bazl"}),n.jsx("option",{value:"department",children:"Departman Bazl"}),n.jsx("option",{value:"all",children:"Tm alanlar (Aylk)"}),n.jsx("option",{value:"date_range",children:"Tarih Aral (Mevcut)"})]})]}),(l==="employee"||l==="date_range")&&n.jsx(Xs,{label:"alan",employees:Re,value:d,onChange:m,emptyLabel:"Seiniz",helperText:"Ad-soyad veya ID ile arayn."}),(l==="department"||l==="date_range")&&n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:f,onChange:M=>g(M.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seiniz"}),Tt.map(M=>n.jsxs("option",{value:M.id,children:["#",M.id," - ",M.name]},M.id))]})]}),(l==="all"||l==="date_range")&&n.jsxs("label",{className:"text-sm text-slate-700",children:["Blge (opsiyonel)",n.jsxs("select",{value:v,onChange:M=>{_(M.target.value),g("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tm"}),me.map(M=>n.jsxs("option",{value:M.id,children:["#",M.id," - ",M.name]},M.id))]})]}),(l==="employee"||l==="department"||l==="all")&&n.jsxs(n.Fragment,{children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Yl",n.jsx("input",{type:"number",value:S,onChange:M=>w(M.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",n.jsx("input",{type:"number",value:E,onChange:M=>R(M.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),l==="date_range"&&n.jsxs(n.Fragment,{children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang Tarihi",n.jsx("input",{type:"date",value:T,onChange:M=>A(M.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti Tarihi",n.jsx("input",{type:"date",value:O,onChange:M=>q(M.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]})]}),(l==="department"||l==="all")&&n.jsxs("label",{className:"mt-3 inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:U,onChange:M=>D(M.target.checked)}),"Gnlk sheetleri de ekle"]}),n.jsxs("label",{className:"mt-3 inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:G,onChange:M=>Y(M.target.checked)}),"Arivdeki alanlar dahil et"]}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{type:"button",onClick:ue,disabled:z.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:z.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Hazrlanyor..."]}):"Excel ndir"})})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Tarih Aral (Yeni Endpoint)"}),n.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Endpoint: ",n.jsx("code",{children:"/api/admin/export/puantaj-range.xlsx"})]}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang Tarihi",n.jsx("input",{type:"date",value:ee,onChange:M=>H(M.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti Tarihi",n.jsx("input",{type:"date",value:te,onChange:M=>J(M.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Sheet modu",n.jsxs("select",{value:fe,onChange:M=>ye(M.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"consolidated",children:"Tek Konsolide Sheet"}),n.jsx("option",{value:"employee_sheets",children:"alan Bazl Sheet"}),n.jsx("option",{value:"department_sheets",children:"Departman Bazl Sheet"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman (opsiyonel)",n.jsxs("select",{value:de,onChange:M=>Se(M.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tm"}),ht.map(M=>n.jsxs("option",{value:M.id,children:["#",M.id," - ",M.name]},M.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Blge (opsiyonel)",n.jsxs("select",{value:oe,onChange:M=>{le(M.target.value),Se("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tm"}),me.map(M=>n.jsxs("option",{value:M.id,children:["#",M.id," - ",M.name]},M.id))]})]}),n.jsx(Xs,{label:"alan (opsiyonel)",employees:Re,value:Q,onChange:K,emptyLabel:"Tm",helperText:"stee bal alan filtresi.",className:"md:col-span-2"})]}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{type:"button",onClick:Ne,disabled:ne.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:ne.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Hazrlanyor..."]}):"Tarih Aral Excel ndir"})})]})]})}const _z=[41.0082,28.9784];function lr(e){return e.toFixed(6)}function Nz({lat:e,lon:s,radiusM:l,onSelect:o}){const d=b.useRef(null),m=b.useRef(null),f=b.useRef(null),g=b.useRef(null),[v,_]=b.useState(!1),[S,w]=b.useState(""),[E,R]=b.useState(!1),[T,A]=b.useState(null),[O,q]=b.useState(null),U=b.useMemo(()=>e!==null&&s!==null?[e,s]:_z,[e,s]);b.useEffect(()=>{if(!(!d.current||m.current)){try{const Y=La.map(d.current,{center:U,zoom:e!==null&&s!==null?17:12,zoomControl:!0});m.current=Y,La.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap katkida bulunanlar"}).addTo(Y);const ee=La.circleMarker(U,{radius:8,color:"#0f6a8c",fillColor:"#0f6a8c",fillOpacity:.85,weight:2}).addTo(Y);f.current=ee;const H=La.circle(U,{radius:Number.isFinite(l)&&l>0?l:75,color:"#0f6a8c",fillColor:"#0f6a8c",fillOpacity:.14,weight:2}).addTo(Y);g.current=H,Y.on("click",te=>{const J=te.latlng.lat,fe=te.latlng.lng;o(J,fe),q(`Haritadan secildi: ${lr(J)}, ${lr(fe)}`)}),_(!0),A(null)}catch{A("Harita yuklenemedi. Lutfen tekrar deneyin."),_(!1)}return()=>{m.current&&(m.current.remove(),m.current=null),f.current=null,g.current=null,_(!1)}}},[U,e,s,o,l]),b.useEffect(()=>{if(!m.current||!f.current||!g.current)return;const Y=m.current,ee=f.current,H=g.current;if(e!==null&&s!==null){const J=[e,s];ee.setLatLng(J),H.setLatLng(J),Y.panTo(J,{animate:!0})}const te=Number.isFinite(l)&&l>0?l:75;H.setRadius(te)},[e,s,l]);const D=b.useCallback(async()=>{if(!v||!m.current)return;const Y=S.trim();if(!Y){q("Lutfen adres veya lokasyon adi girin.");return}R(!0);try{const ee=new URL("https://nominatim.openstreetmap.org/search");ee.searchParams.set("q",Y),ee.searchParams.set("format","json"),ee.searchParams.set("limit","1"),ee.searchParams.set("addressdetails","1"),ee.searchParams.set("accept-language","tr");const H=await fetch(ee.toString(),{headers:{Accept:"application/json"}});if(!H.ok)throw new Error("search_failed");const te=await H.json();if(!Array.isArray(te)||te.length===0){q("Adres bulunamadi. Daha net bir sorgu deneyin.");return}const J=te[0],fe=Number(J.lat),ye=Number(J.lon);if(!Number.isFinite(fe)||!Number.isFinite(ye)){q("Adres koordinata cevrilemedi.");return}o(fe,ye),m.current.setView([fe,ye],17,{animate:!0}),q(`Adres bulundu: ${lr(fe)}, ${lr(ye)}${J.display_name?` (${J.display_name})`:""}`)}catch{q("Adres aramasi gecici olarak kullanilamiyor. Lutfen tekrar deneyin.")}finally{R(!1)}},[v,o,S]),G=b.useCallback(()=>{if(!navigator.geolocation){q("Tarayiciniz konum API destegi vermiyor.");return}navigator.geolocation.getCurrentPosition(Y=>{const ee=Y.coords.latitude,H=Y.coords.longitude;o(ee,H),q(`Mevcut konum alindi: ${lr(ee)}, ${lr(H)}`)},()=>{q("Konum alinamadi. Konum iznini kontrol edin.")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[o]);return n.jsxs("div",{className:"rounded-lg border border-brand-200 bg-brand-50/40 p-3",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-700",children:"Harita Nokta Secici (Ucretsiz)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-600",children:"OpenStreetMap uzerinden haritaya tiklayarak veya adres arayarak lat/lon alanlarini otomatik doldurabilirsiniz."}),T?n.jsx("div",{className:"mt-3 rounded-md border border-rose-300 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:T}):n.jsx("div",{className:"mt-3 rounded-md border border-emerald-300 bg-emerald-50 px-3 py-2 text-xs text-emerald-800",children:"API key gerektirmez. OpenStreetMap/Nominatim kullanilir."}),n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-[1fr_auto_auto]",children:[n.jsx("input",{value:S,onChange:Y=>w(Y.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Adres / isyeri / bolge adi ara",disabled:!v}),n.jsx("button",{type:"button",onClick:()=>{D()},disabled:!v||E,className:"rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-white disabled:opacity-60",children:E?"Araniyor...":"Ara"}),n.jsx("button",{type:"button",onClick:G,disabled:!v,className:"rounded-lg border border-brand-300 px-3 py-2 text-sm font-semibold text-brand-700 hover:bg-brand-50 disabled:opacity-60",children:"Konumum"})]}),n.jsx("div",{ref:d,className:"mt-3 h-64 w-full rounded-lg border border-slate-300 bg-slate-100","aria-label":"OpenStreetMap qr point picker"}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-xs text-slate-600",children:[n.jsxs("span",{className:"rounded-md bg-white px-2 py-1",children:["Lat: ",e!==null?lr(e):"-"]}),n.jsxs("span",{className:"rounded-md bg-white px-2 py-1",children:["Lon: ",s!==null?lr(s):"-"]}),n.jsxs("span",{className:"rounded-md bg-white px-2 py-1",children:["Radius: ",l,"m"]})]}),O?n.jsx("p",{className:"mt-2 rounded-md border border-slate-200 bg-white px-2 py-1 text-xs text-slate-600",children:O}):null]})}const Wc={name:"",codeValue:"",codeType:"BOTH",isActive:!0},ed={name:"",lat:"",lon:"",radiusM:"75",isActive:!0},jz={regionCode:"IST",locationCode:"MERKEZ",serialNo:"1"};function Av(e){return e==="CHECKIN"?"CHECKIN (Giris)":e==="CHECKOUT"?"CHECKOUT (Cikis)":"BOTH (Duruma gore)"}function Mv(e,s){return e.trim().toUpperCase().replace(/[^A-Z0-9]+/g,"-").replace(/^-+|-+$/g,"")||s}function Sz(e){return e==="CHECKIN"?"IN":e==="CHECKOUT"?"OUT":"BOTH"}function wz(){const e=na(),{pushToast:s}=ha(),[l,o]=b.useState(null),[d,m]=b.useState(null),[f,g]=b.useState(null),[v,_]=b.useState(""),[S,w]=b.useState(""),[E,R]=b.useState(""),[T,A]=b.useState(Wc),[O,q]=b.useState(jz),[U,D]=b.useState(ed),[G,Y]=b.useState([]),[ee,H]=b.useState(null),te=Qe({queryKey:["qr-codes"],queryFn:()=>uA()}),J=Qe({queryKey:["qr-points"],queryFn:()=>fA()}),fe=Je({mutationFn:cA,onSuccess:ae=>{s({variant:"success",title:"QR kod olusturuldu",description:`Kod ID: ${ae.id}`}),A(Wc),o(ae.id),e.invalidateQueries({queryKey:["qr-codes"]})},onError:ae=>{s({variant:"error",title:"QR kod olusturulamadi",description:He(ae,"Islem basarisiz.").message})}}),ye=Je({mutationFn:({codeId:ae,payload:Ee})=>dA(ae,Ee),onSuccess:ae=>{s({variant:"success",title:"QR kod guncellendi",description:`Kod ID: ${ae.id}`}),m(null),A(Wc),e.invalidateQueries({queryKey:["qr-codes"]})},onError:ae=>{s({variant:"error",title:"QR kod guncellenemedi",description:He(ae,"Islem basarisiz.").message})}}),de=Je({mutationFn:({codeId:ae,pointIds:Ee})=>mA(ae,{point_ids:Ee}),onSuccess:()=>{s({variant:"success",title:"Nokta atamasi guncellendi",description:"Secili noktalari QR koda baglandi."}),Y([]),e.invalidateQueries({queryKey:["qr-codes"]}),e.invalidateQueries({queryKey:["qr-points"]})},onError:ae=>{s({variant:"error",title:"Atama basarisiz",description:He(ae,"Nokta atamasi yapilamadi.").message})}}),Se=Je({mutationFn:({codeId:ae,pointId:Ee})=>hA(ae,Ee),onSuccess:()=>{s({variant:"success",title:"Nokta baglantisi kaldirildi",description:"Secili nokta bu QR koddan ayrildi."}),e.invalidateQueries({queryKey:["qr-codes"]}),e.invalidateQueries({queryKey:["qr-points"]})},onError:ae=>{s({variant:"error",title:"Islem basarisiz",description:He(ae,"Nokta kaldirilamadi.").message})}}),oe=Je({mutationFn:pA,onSuccess:ae=>{s({variant:"success",title:"QR nokta olusturuldu",description:`Nokta ID: ${ae.id}`}),D(ed),e.invalidateQueries({queryKey:["qr-points"]})},onError:ae=>{s({variant:"error",title:"QR nokta olusturulamadi",description:He(ae,"Islem basarisiz.").message})}}),le=Je({mutationFn:({pointId:ae,payload:Ee})=>xA(ae,Ee),onSuccess:()=>{s({variant:"success",title:"QR nokta guncellendi",description:"Nokta bilgileri kaydedildi."}),g(null),D(ed),e.invalidateQueries({queryKey:["qr-points"]})},onError:ae=>{s({variant:"error",title:"QR nokta guncellenemedi",description:He(ae,"Islem basarisiz.").message})}}),Q=Je({mutationFn:gA,onSuccess:()=>{s({variant:"success",title:"QR nokta pasife alindi",description:"Nokta aktif listeden cikarildi."}),e.invalidateQueries({queryKey:["qr-points"]}),e.invalidateQueries({queryKey:["qr-codes"]})},onError:ae=>{s({variant:"error",title:"Islem basarisiz",description:He(ae,"Nokta pasife alinamadi.").message})}}),K=te.data??[],X=J.data??[];b.useEffect(()=>{l===null&&K.length>0&&o(K[0].id),l!==null&&!K.some(ae=>ae.id===l)&&o(K.length>0?K[0].id:null)},[K,l]);const ke=b.useMemo(()=>K.find(ae=>ae.id===l)??null,[K,l]);b.useEffect(()=>{if(!ke){H(null);return}let ae=!1;return Qf.toDataURL(ke.code_value,{errorCorrectionLevel:"M",margin:2,width:360}).then(Ee=>{ae||H(Ee)}).catch(()=>{ae||H(null)}),()=>{ae=!0}},[ke?.id,ke?.code_value]);const je=b.useMemo(()=>{const ae=new Map;for(const Ee of X)ae.set(Ee.id,Ee);return ae},[X]),z=b.useMemo(()=>ke?ke.point_ids.map(ae=>je.get(ae)??null).filter(ae=>ae!==null):[],[ke,je]),ne=b.useMemo(()=>{const ae=v.trim().toLowerCase();return ae?K.filter(Ee=>String(Ee.id).includes(ae)||(Ee.name??"").toLowerCase().includes(ae)||Ee.code_value.toLowerCase().includes(ae)):K},[K,v]),I=b.useMemo(()=>{const ae=S.trim().toLowerCase();return ae?X.filter(Ee=>String(Ee.id).includes(ae)||Ee.name.toLowerCase().includes(ae)||String(Ee.department_id??"").includes(ae)||String(Ee.region_id??"").includes(ae)):X},[X,S]),ce=b.useMemo(()=>{const ae=X.filter(Be=>Be.is_active),Ee=E.trim().toLowerCase();return Ee?ae.filter(Be=>String(Be.id).includes(Ee)||Be.name.toLowerCase().includes(Ee)||String(Be.department_id??"").includes(Ee)||String(Be.region_id??"").includes(Ee)):ae},[X,E]),ue=b.useMemo(()=>{const ae=K.filter(Ct=>Ct.is_active).length,Ee=X.filter(Ct=>Ct.is_active).length,Be=K.filter(Ct=>Ct.point_ids.length===0).length;return{codeCount:K.length,activeCodes:ae,pointCount:X.length,activePoints:Ee,codesWithoutPoint:Be}},[K,X]),Ne=b.useMemo(()=>{const ae=Number(U.lat);return Number.isFinite(ae)?ae:null},[U.lat]),Re=b.useMemo(()=>{const ae=Number(U.lon);return Number.isFinite(ae)?ae:null},[U.lon]),Le=b.useMemo(()=>{const ae=Number(U.radiusM);return Number.isFinite(ae)&&ae>0?ae:75},[U.radiusM]),me=ae=>{Y(Ee=>Ee.includes(ae)?Ee.filter(Be=>Be!==ae):[...Ee,ae])},Ge=ae=>{m(ae.id),A({name:ae.name??"",codeValue:ae.code_value,codeType:ae.code_type,isActive:ae.is_active})},Ye=()=>{m(null),A(Wc)},Tt=()=>{const ae=Mv(O.regionCode,"GEN"),Ee=Mv(O.locationCode,"LOKASYON"),Be=Number(O.serialNo),Ct=Number.isFinite(Be)&&Be>0?Math.floor(Be):1,se=Sz(T.codeType),Ke=`PF-${ae}-${Ee}-${se}-${String(Ct).padStart(6,"0")}`;A(_t=>({..._t,codeValue:Ke}))},ht=ae=>{g(ae.id),D({name:ae.name,lat:String(ae.lat),lon:String(ae.lon),radiusM:String(ae.radius_m),isActive:ae.is_active})},M=()=>{g(null),D(ed)},Oe=ae=>{ae.preventDefault();const Ee=T.codeValue.trim();if(!Ee){s({variant:"error",title:"Kod degeri zorunlu",description:"QR kod degerini bos birakamazsiniz."});return}const Be={name:T.name.trim()||null,code_value:Ee,code_type:T.codeType,is_active:T.isActive};if(d===null){fe.mutate(Be);return}ye.mutate({codeId:d,payload:Be})},mt=ae=>{ae.preventDefault();const Ee=U.name.trim(),Be=Number(U.lat),Ct=Number(U.lon),se=Number(U.radiusM);if(!Ee){s({variant:"error",title:"Nokta adi zorunlu",description:"Lutfen bir nokta adi girin."});return}if(!Number.isFinite(Be)||!Number.isFinite(Ct)||!Number.isFinite(se)||se<=0){s({variant:"error",title:"Gecersiz konum",description:"Lat/Lon/radius alanlarini kontrol edin."});return}const Ke={name:Ee,lat:Be,lon:Ct,radius_m:se,is_active:U.isActive};if(f===null){oe.mutate(Ke);return}le.mutate({pointId:f,payload:Ke})},Rt=()=>{if(!ke){s({variant:"error",title:"QR kod seciniz",description:"Nokta atamak icin once bir QR kod secin."});return}if(G.length===0){s({variant:"error",title:"Nokta seciniz",description:"Atama icin en az bir nokta secin."});return}de.mutate({codeId:ke.id,pointIds:G})},It=async ae=>{try{await navigator.clipboard.writeText(ae),s({variant:"success",title:"Kopyalandi",description:"QR kod degeri panoya kopyalandi."})}catch{s({variant:"error",title:"Kopyalama basarisiz",description:"Lutfen manuel olarak kopyalayin."})}},Vt=async ae=>{try{const Ee=await Qf.toDataURL(ae.code_value,{errorCorrectionLevel:"M",margin:2,width:900}),Be=document.createElement("a");Be.href=Ee,Be.download=`qr-kod-${ae.id}.png`,document.body.appendChild(Be),Be.click(),document.body.removeChild(Be),s({variant:"success",title:"PNG indirildi",description:`QR kod #${ae.id} dosyasi indirildi.`})}catch{s({variant:"error",title:"Indirme basarisiz",description:"QR kod PNG olusturulamadi."})}};return te.isLoading||J.isLoading?n.jsx(Gt,{}):te.isError||J.isError?n.jsx(Ue,{children:n.jsx("p",{className:"text-sm text-rose-700",children:"QR kod veya nokta listesi yuklenemedi."})}):n.jsxs("div",{className:"mx-auto w-full max-w-[1320px] space-y-4",children:[n.jsx(Xn,{title:"QR Kod Yonetimi",description:"Konuma bagli giris/cikis icin QR kod ve QR nokta yonetimi. Sirayla nokta olustur, kod olustur, nokta ata, sonra indir."}),n.jsx(Ue,{className:"min-w-0",children:n.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1.45fr)_minmax(260px,0.95fr)]",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Nasil Calisir?"}),n.jsxs("ol",{className:"mt-2 space-y-1 text-sm text-slate-700",children:[n.jsx("li",{children:"1) Once QR nokta olustur (ad + lat/lon + radius)."}),n.jsx("li",{children:"2) Sonra QR kod olustur (benzersiz code_value + tip)."}),n.jsx("li",{children:"3) QR koda bir veya birden fazla aktif nokta ata."}),n.jsx("li",{children:"4) Calisan sadece atanmis nokta icindeyse okutma basarili olur."})]}),n.jsx("div",{className:"mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:"Onemli: Noktasi olmayan QR kod okutulamaz. Pasif nokta ya da pasif QR kod da kullanilamaz."})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm sm:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Kod"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:ue.codeCount}),n.jsxs("p",{className:"text-xs text-emerald-700",children:["Aktif: ",ue.activeCodes]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Nokta"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:ue.pointCount}),n.jsxs("p",{className:"text-xs text-emerald-700",children:["Aktif: ",ue.activePoints]})]}),n.jsxs("div",{className:"col-span-2 rounded-lg border border-rose-200 bg-rose-50 p-3",children:[n.jsx("p",{className:"text-xs text-rose-700",children:"Noktasi Atanmamis Kod"}),n.jsx("p",{className:"text-lg font-semibold text-rose-800",children:ue.codesWithoutPoint}),n.jsx("p",{className:"text-xs text-rose-700",children:"Bu kodlar okutuldugunda sistem izin vermez."})]})]})]})}),n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]",children:[n.jsxs(Ue,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:d===null?"2) QR Kod Olustur":`2) QR Kod Duzenle (#${d})`}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Code value benzersiz olmalidir. Asagidaki anlamli format yardimcisini kullanabilirsiniz."}),n.jsxs("form",{className:"mt-3 space-y-3",onSubmit:Oe,children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Kod adi (opsiyonel)",n.jsx("input",{value:T.name,onChange:ae=>A(Ee=>({...Ee,name:ae.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Merkez Giris"})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Anlamli Format Yardimcisi"}),n.jsxs("div",{className:"mt-2 grid gap-2 sm:grid-cols-2 xl:grid-cols-4",children:[n.jsx("input",{value:O.regionCode,onChange:ae=>q(Ee=>({...Ee,regionCode:ae.target.value})),className:"rounded-lg border border-slate-300 px-2 py-2 text-sm",placeholder:"Bolge (IST)"}),n.jsx("input",{value:O.locationCode,onChange:ae=>q(Ee=>({...Ee,locationCode:ae.target.value})),className:"rounded-lg border border-slate-300 px-2 py-2 text-sm",placeholder:"Lokasyon (MERKEZ)"}),n.jsx("input",{type:"number",min:1,value:O.serialNo,onChange:ae=>q(Ee=>({...Ee,serialNo:ae.target.value})),className:"rounded-lg border border-slate-300 px-2 py-2 text-sm",placeholder:"Seri No"}),n.jsx("button",{type:"button",onClick:Tt,className:"rounded-lg border border-brand-300 bg-white px-3 py-2 text-sm font-semibold text-brand-700 hover:bg-brand-50",children:"Deger Uret"})]}),n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Ornek: PF-IST-MERKEZ-IN-000001 / PF-ANK-SUBE1-BOTH-000014"})]}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["code_value",n.jsx("input",{value:T.codeValue,onChange:ae=>A(Ee=>({...Ee,codeValue:ae.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: IN|HQ-1"})]}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["Kod tipi",n.jsxs("select",{value:T.codeType,onChange:ae=>A(Ee=>({...Ee,codeType:ae.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"CHECKIN",children:"CHECKIN"}),n.jsx("option",{value:"CHECKOUT",children:"CHECKOUT"}),n.jsx("option",{value:"BOTH",children:"BOTH"})]}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"CHECKIN: sadece giris, CHECKOUT: sadece cikis, BOTH: sistem bugunku duruma gore secer."})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:T.isActive,onChange:ae=>A(Ee=>({...Ee,isActive:ae.target.checked}))}),"Aktif"]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"submit",disabled:fe.isPending||ye.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:d===null?"Olustur":"Guncelle"}),d!==null?n.jsx("button",{type:"button",onClick:Ye,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Iptal"}):null]})]})]}),n.jsxs(Ue,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"QR Kod Listesi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Detay ve nokta atama islemleri icin bir QR kod secin."}),n.jsx("div",{className:"mt-3",children:n.jsx(_i,{value:v,onChange:_,placeholder:"Kod adi / degeri / ID ara"})}),n.jsx("div",{className:"mt-3 max-h-80 overflow-auto overscroll-contain rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-[980px] text-left text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2",children:"ID"}),n.jsx("th",{className:"px-3 py-2",children:"Kod"}),n.jsx("th",{className:"px-3 py-2",children:"Tip"}),n.jsx("th",{className:"px-3 py-2",children:"Durum"}),n.jsx("th",{className:"px-3 py-2",children:"Nokta"}),n.jsx("th",{className:"px-3 py-2",children:"Aksiyon"})]})}),n.jsxs("tbody",{children:[ne.map(ae=>n.jsxs("tr",{className:`border-t border-slate-100 ${l===ae.id?"bg-brand-50/60":""}`,children:[n.jsx("td",{className:"px-3 py-2",children:ae.id}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("button",{type:"button",onClick:()=>o(ae.id),className:"font-medium text-brand-700 hover:underline",children:ae.name||"-"}),n.jsx("div",{className:"max-w-[340px] break-all text-xs text-slate-500",children:ae.code_value})]}),n.jsx("td",{className:"px-3 py-2",children:Av(ae.code_type)}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-semibold ${ae.is_active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:ae.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"px-3 py-2",children:ae.point_ids.length}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.jsx("button",{type:"button",onClick:()=>Ge(ae),className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"}),n.jsx("button",{type:"button",onClick:()=>{Vt(ae)},className:"rounded-md border border-brand-300 px-2 py-1 text-xs font-medium text-brand-700 hover:bg-brand-50",children:"PNG"})]})})]},ae.id)),ne.length===0?n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4 text-sm text-slate-500",colSpan:6,children:"Arama kriterine uygun QR kod bulunamadi."})}):null]})]})})]})]}),n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]",children:[n.jsxs(Ue,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:ke?`3) QR Kod Detay (#${ke.id})`:"3) QR Kod Detay"}),ke?n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 text-sm text-slate-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Ad:"})," ",ke.name||"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Kod degeri:"})," ",ke.code_value]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Tip:"})," ",Av(ke.code_type)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Durum:"})," ",ke.is_active?"Aktif":"Pasif"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Atanan nokta sayisi:"})," ",ke.point_ids.length]})]}),ke.point_ids.length===0?n.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 p-3 text-xs text-rose-800",children:"Bu QR kodda nokta atamasi yok. Okutma yapildiginda sistem izin vermez."}):null,n.jsxs("div",{className:"rounded-lg border border-brand-200 bg-brand-50/60 p-3",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-700",children:"QR Onizleme"}),n.jsx("p",{className:"mt-1 break-all text-xs text-slate-700",children:ke.code_value}),ee?n.jsxs("div",{className:"mt-3 flex flex-col items-start gap-3",children:[n.jsx("img",{src:ee,alt:`QR Kod ${ke.id}`,className:"h-52 w-52 rounded-lg border border-brand-200 bg-white p-2"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{Vt(ke)},className:"rounded-md bg-brand-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-brand-700",children:"PNG Indir"}),n.jsx("button",{type:"button",onClick:()=>{It(ke.code_value)},className:"rounded-md border border-slate-300 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-white",children:"Kodu Kopyala"})]})]}):n.jsx("p",{className:"mt-2 text-xs text-rose-700",children:"QR onizleme olusturulamadi."})]}),n.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:"Bu QR kod, sadece bu koda atanmis aktif konum noktalarinin radius alaninda okutuldugunda gecerli olur. Diger konumlarda sistem isleme izin vermez."}),n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Atanmis Noktalar"}),z.length===0?n.jsx("p",{className:"text-sm text-slate-600",children:"Bu QR kod icin henuz nokta atanmis degil."}):n.jsx("div",{className:"space-y-2",children:z.map(ae=>n.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-slate-200 px-3 py-2 text-sm",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-slate-800",children:["#",ae.id," - ",ae.name]}),n.jsxs("p",{className:"text-xs text-slate-500",children:["lat/lon: ",ae.lat,", ",ae.lon," | radius: ",ae.radius_m,"m"]})]}),n.jsx("button",{type:"button",onClick:()=>Se.mutate({codeId:ke.id,pointId:ae.id}),className:"rounded-md border border-rose-300 px-2 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50",children:"Kaldir"})]},ae.id))})]}):n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Detay gormek icin listeden bir QR kod secin."})]}),n.jsxs(Ue,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"4) Nokta Ata (Coklu Secim)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Arama ile nokta secip tek islemde birden fazla noktayi QR koda baglayabilirsiniz."}),n.jsx("div",{className:"mt-3",children:n.jsx(_i,{value:E,onChange:R,placeholder:"Nokta adi / ID ara"})}),n.jsx("div",{className:"mt-3 max-h-56 overflow-auto overscroll-contain rounded-lg border border-slate-200 p-2",children:ce.length===0?n.jsx("p",{className:"px-2 py-1 text-sm text-slate-600",children:"Aktif nokta bulunamadi."}):n.jsx("div",{className:"space-y-1",children:ce.map(ae=>n.jsxs("label",{className:"flex items-center gap-2 rounded-md px-2 py-1 text-sm text-slate-700 hover:bg-slate-50",children:[n.jsx("input",{type:"checkbox",checked:G.includes(ae.id),onChange:()=>me(ae.id)}),n.jsxs("span",{children:["#",ae.id," - ",ae.name," (",ae.radius_m,"m)"]})]},ae.id))})}),n.jsxs("div",{className:"mt-3 flex items-center justify-between gap-3",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Secilen nokta: ",G.length]}),n.jsx("button",{type:"button",onClick:Rt,disabled:de.isPending||ke===null,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:"Secilenleri Ata"})]})]})]}),n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]",children:[n.jsxs(Ue,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:f===null?"1) QR Nokta Olustur":`1) QR Nokta Duzenle (#${f})`}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"QR noktasi okutmanin izinli oldugu fiziksel konumu temsil eder."}),n.jsxs("form",{className:"mt-3 space-y-3",onSubmit:mt,children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Nokta adi",n.jsx("input",{value:U.name,onChange:ae=>D(Ee=>({...Ee,name:ae.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Merkez Ofis Kapi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ornek: Istanbul Merkez Kapi, Ankara Sube Giris."})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Lat",n.jsx("input",{type:"number",step:"any",value:U.lat,onChange:ae=>D(Ee=>({...Ee,lat:ae.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["Lon",n.jsx("input",{type:"number",step:"any",value:U.lon,onChange:ae=>D(Ee=>({...Ee,lon:ae.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),n.jsx(Nz,{lat:Ne,lon:Re,radiusM:Le,onSelect:(ae,Ee)=>D(Be=>({...Be,lat:String(ae),lon:String(Ee)}))}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["Radius (m)",n.jsx("input",{type:"number",min:1,value:U.radiusM,onChange:ae=>D(Ee=>({...Ee,radiusM:ae.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Oneri: bina ici 50-80m, acik alan 80-150m."})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:U.isActive,onChange:ae=>D(Ee=>({...Ee,isActive:ae.target.checked}))}),"Aktif"]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"submit",disabled:oe.isPending||le.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:f===null?"Olustur":"Guncelle"}),f!==null?n.jsx("button",{type:"button",onClick:M,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Iptal"}):null]})]})]}),n.jsxs(Ue,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"5) QR Nokta Listesi"}),n.jsx("div",{className:"mt-3",children:n.jsx(_i,{value:S,onChange:w,placeholder:"Nokta adi / ID ara"})}),n.jsx("div",{className:"mt-3 max-h-96 overflow-auto overscroll-contain rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-[920px] text-left text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2",children:"ID"}),n.jsx("th",{className:"px-3 py-2",children:"Nokta"}),n.jsx("th",{className:"px-3 py-2",children:"Konum"}),n.jsx("th",{className:"px-3 py-2",children:"Durum"}),n.jsx("th",{className:"px-3 py-2",children:"Aksiyon"})]})}),n.jsxs("tbody",{children:[I.map(ae=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-3 py-2",children:ae.id}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("p",{className:"font-medium text-slate-800",children:ae.name}),n.jsxs("p",{className:"text-xs text-slate-500",children:["radius: ",ae.radius_m,"m"]})]}),n.jsxs("td",{className:"px-3 py-2 text-xs text-slate-600",children:[ae.lat,", ",ae.lon]}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-semibold ${ae.is_active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:ae.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.jsx("button",{type:"button",onClick:()=>ht(ae),className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"}),ae.is_active?n.jsx("button",{type:"button",onClick:()=>Q.mutate(ae.id),className:"rounded-md border border-rose-300 px-2 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50",children:"Pasife Al"}):null]})})]},ae.id)),I.length===0?n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4 text-sm text-slate-500",colSpan:5,children:"Arama kriterine uygun nokta bulunamadi."})}):null]})]})})]})]})]})}const zv=[{value:0,label:"Pazartesi"},{value:1,label:"Sal"},{value:2,label:"aramba"},{value:3,label:"Perembe"},{value:4,label:"Cuma"},{value:5,label:"Cumartesi"},{value:6,label:"Pazar"}];function kz(){const e=na(),{pushToast:s}=ha(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState({}),[S,w]=b.useState(""),[E,R]=b.useState("09:00"),[T,A]=b.useState("17:30"),[O,q]=b.useState("60"),[U,D]=b.useState(!0),[G,Y]=b.useState(null),ee=Qe({queryKey:["departments"],queryFn:ji}),H=Qe({queryKey:["employees","all-for-quick-setup"],queryFn:()=>Ms({include_inactive:!0,status:"all"})}),te=Qe({queryKey:["department-weekly-rules"],queryFn:()=>m_()}),J=Qe({queryKey:["department-shifts"],queryFn:()=>vu({active_only:!1})}),fe=l?Number(l):null,ye=Je({mutationFn:({employeeId:I,departmentId:ce})=>iA(I,{department_id:ce}),onSuccess:I=>{s({variant:"success",title:"Departman atamas gncellendi",description:`${I.full_name} iin departman kayd gncellendi.`}),e.invalidateQueries({queryKey:["employees"]}),e.invalidateQueries({queryKey:["employee-device-overview"]})},onError:I=>{s({variant:"error",title:"Departman gncellenemedi",description:He(I,"lem baarsz.").message})}}),de=Je({mutationFn:h_,onSuccess:()=>{s({variant:"success",title:"Haftalk kural kaydedildi",description:"Seilen gn iin plan gncellendi."}),e.invalidateQueries({queryKey:["department-weekly-rules"]})},onError:I=>{s({variant:"error",title:"Haftalk kural kaydedilemedi",description:He(I,"lem baarsz.").message})}}),Se=Je({mutationFn:vd,onSuccess:()=>{s({variant:"success",title:"Vardiya kaydedildi",description:"Departman vardiyas eklendi/gncellendi."}),w(""),R("09:00"),A("17:30"),q("60"),D(!0),Y(null),e.invalidateQueries({queryKey:["department-shifts"]})},onError:I=>{s({variant:"error",title:"Vardiya kaydedilemedi",description:He(I,"lem baarsz.").message})}}),oe=Je({mutationFn:f_,onSuccess:()=>{s({variant:"success",title:"Vardiya pasife alnd",description:"Vardiya kayd pasif duruma getirildi."}),G!==null&&(Y(null),w(""),R("09:00"),A("17:30"),q("60"),D(!0)),e.invalidateQueries({queryKey:["department-shifts"]})},onError:I=>{s({variant:"error",title:"Vardiya pasife alnamad",description:He(I,"lem baarsz.").message})}}),le=Je({mutationFn:({shift:I,nextActive:ce})=>vd({id:I.id,department_id:I.department_id,name:I.name,start_time_local:I.start_time_local,end_time_local:I.end_time_local,break_minutes:I.break_minutes,is_active:ce}),onSuccess:(I,ce)=>{s({variant:"success",title:ce.nextActive?"Vardiya aktif edildi":"Vardiya pasife alnd",description:ce.nextActive?"Vardiya tekrar kullanma ald.":"Vardiya pasif duruma getirildi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:I=>{s({variant:"error",title:"Vardiya durumu gncellenemedi",description:He(I,"lem baarsz.").message})}}),Q=ee.data??[],K=H.data??[],X=te.data??[],ke=J.data??[],je=b.useMemo(()=>new Map(Q.map(I=>[I.id,I.name])),[Q]),z=b.useMemo(()=>fe?ke.filter(I=>I.department_id===fe):[],[fe,ke]),ne=b.useMemo(()=>K.find(I=>String(I.id)===d),[K,d]);return b.useEffect(()=>{if(!fe){_({});return}const I=new Map(X.filter(ue=>ue.department_id===fe).map(ue=>[ue.weekday,ue])),ce={};for(const ue of zv){const Ne=I.get(ue.value);ce[ue.value]={is_workday:Ne?.is_workday??!0,planned_minutes:String(Ne?.planned_minutes??540),break_minutes:String(Ne?.break_minutes??60)}}_(ce)},[fe,X]),ee.isLoading||H.isLoading||te.isLoading||J.isLoading?n.jsx(Gt,{}):ee.isError||H.isError||te.isError||J.isError?n.jsx(Ot,{message:"Hzl ayarlar verileri alnamad."}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"Hzl Ayarlar",description:"Sadece gerekli kurulum admlar: alan-departman atamas, haftalk gn kurallar ve vardiyalar."}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"1) alan - Departman Atamas"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"alan adn veya ID bilgisini yazarak personeli bulun, departmann hzlca gncelleyin."}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3",children:[n.jsx(Xs,{label:"alan",employees:K,value:d,onChange:I=>{m(I);const ce=K.find(ue=>String(ue.id)===I);g(ce?.department_id?String(ce.department_id):"")},helperText:"Ad-soyad veya personel ID ile arayn.",className:"md:col-span-2"}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yeni departman",n.jsxs("select",{value:f,onChange:I=>g(I.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Atanmam"}),Q.map(I=>n.jsx("option",{value:I.id,children:I.name},I.id))]})]})]}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-3 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[n.jsxs("div",{children:[n.jsxs("p",{children:["Seili alan:"," ",ne?`#${ne.id} - ${ne.full_name}`:"-"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Mevcut departman:"," ",ne?.department_id?je.get(ne.department_id)??"-":"Atanmam"]})]}),n.jsx("button",{type:"button",disabled:!ne||ye.isPending,onClick:()=>{ne&&ye.mutate({employeeId:ne.id,departmentId:f?Number(f):null})},className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Departman Kaydet"})]})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"2) Departman Haftalk Gn Kurallar"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Her gn iin alma gn, planlanan dakika ve mola dakikasn belirleyin."}),n.jsx("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:l,onChange:I=>o(I.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seiniz"}),Q.map(I=>n.jsx("option",{value:I.id,children:I.name},I.id))]})]})}),fe?n.jsx("div",{className:"mt-4 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Gn"}),n.jsx("th",{className:"py-2",children:"alma Gn"}),n.jsx("th",{className:"py-2",children:"Planlanan Dakika"}),n.jsx("th",{className:"py-2",children:"Mola Dakika"}),n.jsx("th",{className:"py-2 text-right",children:"lem"})]})}),n.jsx("tbody",{children:zv.map(I=>{const ce=v[I.value]??{is_workday:!0,planned_minutes:"540",break_minutes:"60"};return n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:I.label}),n.jsx("td",{className:"py-2",children:n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:ce.is_workday,onChange:ue=>_(Ne=>({...Ne,[I.value]:{...ce,is_workday:ue.target.checked}}))}),"alma gn"]})}),n.jsx("td",{className:"py-2",children:n.jsx("input",{value:ce.planned_minutes,onChange:ue=>_(Ne=>({...Ne,[I.value]:{...ce,planned_minutes:ue.target.value}})),className:"w-full rounded-lg border border-slate-300 px-3 py-2"})}),n.jsx("td",{className:"py-2",children:n.jsx("input",{value:ce.break_minutes,onChange:ue=>_(Ne=>({...Ne,[I.value]:{...ce,break_minutes:ue.target.value}})),className:"w-full rounded-lg border border-slate-300 px-3 py-2"})}),n.jsx("td",{className:"py-2 text-right",children:n.jsx("button",{type:"button",disabled:de.isPending,onClick:()=>{const ue=Number(ce.planned_minutes),Ne=Number(ce.break_minutes);if(!Number.isFinite(ue)||ue<0){s({variant:"error",title:"Geersiz planlanan dakika",description:`${I.label} iin say giriniz.`});return}if(!Number.isFinite(Ne)||Ne<0){s({variant:"error",title:"Geersiz mola dakikas",description:`${I.label} iin say giriniz.`});return}de.mutate({department_id:fe,weekday:I.value,is_workday:ce.is_workday,planned_minutes:Math.trunc(ue),break_minutes:Math.trunc(Ne)})},className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Kaydet"})})]},I.value)})})]})}):n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Haftalk kural dzenlemek iin departman sein."})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"3) Departman Vardiyalar"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Bir departman iin birden fazla vardiya tanmlayabilirsiniz (r. 10:00-18:00 ve 14:00-22:00)."}),fe?n.jsxs(n.Fragment,{children:[n.jsxs("form",{className:"mt-3 grid gap-3 md:grid-cols-5",onSubmit:I=>{if(I.preventDefault(),!S.trim()){s({variant:"error",title:"Vardiya ad zorunlu",description:"Ltfen vardiya ad girin."});return}const ce=Number(O);if(!Number.isFinite(ce)||ce<0){s({variant:"error",title:"Geersiz mola dakikas",description:"Mola dakikasn say olarak girin."});return}Se.mutate({id:G??void 0,department_id:fe,name:S.trim(),start_time_local:E,end_time_local:T,break_minutes:Math.trunc(ce),is_active:U})},children:[G?n.jsxs("div",{className:"md:col-span-5 rounded-lg border border-brand-200 bg-brand-50 px-3 py-2 text-xs font-medium text-brand-700",children:["Dzenleme modu: #",G]}):null,n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya ad",n.jsx("input",{value:S,onChange:I=>w(I.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"rn: Sabah 10-18"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang",n.jsx("input",{type:"time",value:E,onChange:I=>R(I.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti",n.jsx("input",{type:"time",value:T,onChange:I=>A(I.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola dakika",n.jsx("input",{value:O,onChange:I=>q(I.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("div",{className:"flex items-end gap-3 pb-1",children:[n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:U,onChange:I=>D(I.target.checked)}),"Aktif"]}),n.jsx("button",{type:"submit",disabled:Se.isPending,className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:Se.isPending?"Kaydediliyor...":G?"Vardiya Gncelle":"Vardiya Kaydet"}),G?n.jsx("button",{type:"button",onClick:()=>{Y(null),w(""),R("09:00"),A("17:30"),q("60"),D(!0)},className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Vazge"}):null]})]}),n.jsx("div",{className:"mt-4 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Saat Aral"}),n.jsx("th",{className:"py-2",children:"Mola"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2 text-right",children:"Aksiyon"})]})}),n.jsx("tbody",{children:z.map(I=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:I.name}),n.jsxs("td",{className:"py-2",children:[I.start_time_local," - ",I.end_time_local]}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:I.break_minutes})}),n.jsx("td",{className:"py-2",children:I.is_active?"Aktif":"Pasif"}),n.jsx("td",{className:"py-2 text-right",children:n.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{Y(I.id),w(I.name),R(I.start_time_local),A(I.end_time_local),q(String(I.break_minutes)),D(I.is_active)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Dzenle"}),I.is_active?n.jsx("button",{type:"button",disabled:oe.isPending||le.isPending,onClick:()=>{window.confirm("Bu vardiya pasife alnsn m?")&&oe.mutate(I.id)},className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:"Pasife Al"}):n.jsx("button",{type:"button",disabled:le.isPending||oe.isPending,onClick:()=>le.mutate({shift:I,nextActive:!0}),className:"rounded-lg border border-emerald-300 px-3 py-1 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:"Aktif Et"})]})})]},I.id))})]})}),z.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Seilen departman iin vardiya bulunmuyor."}):null]}):n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Vardiya dzenlemek iin departman sein."})]})]})}const Ov=Xa({name:da().min(2,"Bolge adi en az 2 karakter olmali.").max(255),is_active:Cd()});function Rv(e){return fn.isAxiosError(e)&&e.response?.status===409?"Bu bolge adi zaten mevcut. Farkli bir ad girin.":He(e,"Bolge islemi basarisiz.").message}function Ez(){const e=na(),{pushToast:s}=ha(),[l,o]=b.useState(""),[d,m]=b.useState(!0),[f,g]=b.useState(""),[v,_]=b.useState(!0),[S,w]=b.useState(null),[E,R]=b.useState(""),[T,A]=b.useState(!0),[O,q]=b.useState(null),U=Qe({queryKey:["regions",v],queryFn:()=>Xl({include_inactive:v})}),D=Je({mutationFn:qC,onSuccess:te=>{o(""),m(!0),q(null),s({variant:"success",title:"Bolge olusturuldu",description:`${te.name} basariyla eklendi.`}),e.invalidateQueries({queryKey:["regions"]})},onError:te=>{const J=Rv(te);q(J),s({variant:"error",title:"Bolge olusturulamadi",description:J})}}),G=Je({mutationFn:({regionId:te,payload:J})=>ZC(te,J),onSuccess:te=>{q(null),w(null),R(""),A(!0),s({variant:"success",title:"Bolge guncellendi",description:`${te.name} guncellendi.`}),e.invalidateQueries({queryKey:["regions"]})},onError:te=>{const J=Rv(te);q(J),s({variant:"error",title:"Bolge guncellenemedi",description:J})}}),Y=te=>{te.preventDefault(),q(null);const J=Ov.safeParse({name:l,is_active:d});if(!J.success){const fe=J.error.issues[0]?.message??"Bolge formunu kontrol edin.";q(fe);return}D.mutate(J.data)},ee=te=>{if(te.preventDefault(),q(null),!S)return;const J=Ov.safeParse({name:E,is_active:T});if(!J.success){const fe=J.error.issues[0]?.message??"Bolge formunu kontrol edin.";q(fe);return}G.mutate({regionId:S,payload:J.data})},H=b.useMemo(()=>{const te=U.data??[],J=f.trim().toLowerCase();return J?te.filter(fe=>fe.name.toLowerCase().includes(J)):te},[U.data,f]);return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"Bolgeler",description:"Sube/sehir bazli yonetim icin bolge kayitlarini yonetin."}),n.jsxs(Ue,{children:[n.jsxs("form",{onSubmit:Y,className:"grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Bolge adi",n.jsx("input",{value:l,onChange:te=>o(te.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Istanbul Avrupa"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:d,onChange:te=>m(te.target.checked)}),"Aktif"]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"submit",disabled:D.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:D.isPending?"Kaydediliyor...":"Bolge Ekle"})})]}),O?n.jsx("p",{className:"form-validation mt-2",children:O}):null]}),S?n.jsxs(Ue,{children:[n.jsxs("form",{onSubmit:ee,className:"grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Bolge adi",n.jsx("input",{value:E,onChange:te=>R(te.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:T,onChange:te=>A(te.target.checked)}),"Aktif"]}),n.jsxs("div",{className:"flex items-end gap-2",children:[n.jsx("button",{type:"submit",disabled:G.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:G.isPending?"Guncelleniyor...":"Kaydet"}),n.jsx("button",{type:"button",onClick:()=>{w(null),R(""),A(!0),q(null)},className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),O?n.jsx("p",{className:"form-validation mt-2",children:O}):null]}):null,U.isLoading?n.jsx(Gt,{}):null,U.isError?n.jsx(Ot,{message:"Bolge listesi alinamadi."}):null,!U.isLoading&&!U.isError?n.jsxs(Ue,{children:[n.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-3 md:items-end",children:[n.jsx(_i,{value:f,onChange:g,placeholder:"Bolge adina gore ara..."}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:v,onChange:te=>_(te.target.checked)}),"Pasif bolgeleri goster"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Bolge ID"}),n.jsx("th",{className:"py-2",children:"Bolge Adi"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Islem"})]})}),n.jsx("tbody",{children:H.map(te=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:te.id}),n.jsx("td",{className:"py-2",children:te.name}),n.jsx("td",{className:"py-2",children:n.jsx(cr,{value:te.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2",children:n.jsx("button",{type:"button",onClick:()=>{w(te.id),R(te.name),A(te.is_active),q(null)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"})})]},te.id))})]})}),H.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Arama kriterine uygun bolge bulunamadi."}):null]}):null]})}function $s(e){return new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"medium"}).format(new Date(e))}function Tz(e){return e==="SENT"?"bg-emerald-100 text-emerald-700":e==="FAILED"?"bg-rose-100 text-rose-700":e==="CANCELED"?"bg-slate-200 text-slate-700":e==="SENDING"?"bg-amber-100 text-amber-700":"bg-sky-100 text-sky-700"}function Cz(e){return e==="SENT"?"bg-emerald-100 text-emerald-700":e==="FAILED"?"bg-rose-100 text-rose-700":"bg-amber-100 text-amber-700"}function td(e){return e==="admin"?"ADMIN":e==="employee"?"CALISAN":"-"}function Az(e){return e==="Kritik"?"bg-rose-100 text-rose-700":e==="Uyari"?"bg-amber-100 text-amber-700":"bg-sky-100 text-sky-700"}function Mz(e){const s=typeof e.flags?.SHIFT_NAME=="string"?e.flags.SHIFT_NAME:null,l=e.source==="MANUAL"||e.created_by_admin?"Manuel":"Cihaz",o=e.type==="IN"?"Giris":"Cikis";return s?`${o}  ${l}  ${s}`:`${o}  ${l}`}function zz(e){return e==="DAILY_REPORT_JOB_MISSING"?"Job olusmamis":e==="DAILY_REPORT_ARCHIVE_MISSING"?"Arsiv olusmamis":e==="DAILY_REPORT_JOB_STUCK"?"Job takilmis":e==="DAILY_REPORT_JOB_FAILED"?"Job hatali":e==="DAILY_REPORT_DELIVERY_EMPTY"?"Teslimat bos":e==="DAILY_REPORT_TARGET_ZERO"?"Hedef 0":e==="DAILY_REPORT_ARCHIVE_MISMATCH"?"Arsiv eslesmiyor":e==="DAILY_REPORT_HEALTH_QUERY_FAILED"?"Health sorgusu hatali":e}function Oz(e){return e?(e.alarms??[]).length>0?"border-rose-200 bg-rose-50 text-rose-800":!e.job_exists||!e.archive_exists?"border-amber-200 bg-amber-50 text-amber-800":e.status==="SENT"&&e.delivery_succeeded?"border-emerald-200 bg-emerald-50 text-emerald-800":e.status==="FAILED"?"border-rose-200 bg-rose-50 text-rose-800":"border-sky-200 bg-sky-50 text-sky-800":"border-slate-200 bg-slate-50 text-slate-700"}function Rz(e,s){const l=window.URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=s,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l)}const hs=35,M_="pf_admin_push_vapid_public_key";async function Dz(e){if(!("serviceWorker"in navigator)||!("PushManager"in window))throw new Error("Bu tarayici push bildirimlerini desteklemiyor.");if((Notification.permission==="granted"?"granted":await Notification.requestPermission())!=="granted")throw new Error("Bildirim izni verilmedi.");const o=await navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"});let d=await o.pushManager.getSubscription();const m=window.localStorage.getItem(M_);if(d&&m&&m!==e){try{await d.unsubscribe()}catch{}d=null}return d||(d=await o.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_p(e)})),d}function Lz(){const e=na(),{pushToast:s}=ha(),{user:l}=Wl(),[o,d]=mu(),[m,f]=b.useState("Puantaj Bildirimi"),[g,v]=b.useState(""),[_,S]=b.useState(""),[w,E]=b.useState("employees"),[R,T]=b.useState(15),[A,O]=b.useState(""),[q,U]=b.useState(""),[D,G]=b.useState(""),[Y,ee]=b.useState(""),[H,te]=b.useState(""),[J,fe]=b.useState(""),[ye,de]=b.useState(""),[Se,oe]=b.useState(1),[le,Q]=b.useState(1),[K,X]=b.useState(""),[ke,je]=b.useState(""),[z,ne]=b.useState([]),[I,ce]=b.useState([]),[ue,Ne]=b.useState(null),[Re,Le]=b.useState(!1),[me,Ge]=b.useState(""),[Ye,Tt]=b.useState(""),[ht,M]=b.useState(""),[Oe,mt]=b.useState(1),[Rt,It]=b.useState(""),[Vt,ae]=b.useState(null),[Ee,Be]=b.useState(null),[Ct,se]=b.useState(""),[Ke,_t]=b.useState(""),[pn,Lt]=b.useState(""),[rt,Qn]=b.useState("Puantaj test email bildirimi"),[_e,tt]=b.useState("Bu mesaj admin bildirim email testidir."),ut=Qe({queryKey:["employees","notify"],queryFn:()=>Ms({status:"active"})}),Nt=Qe({queryKey:["admin-users","notify"],queryFn:c_}),$t=Qe({queryKey:["admin-push-config"],queryFn:Kf}),Dt=Qe({queryKey:["admin-daily-report-health"],queryFn:AA,refetchInterval:3e4,retry:!1}),Xt=Qe({queryKey:["admin-notification-email-targets"],queryFn:MA,retry:!1}),Bn=Qe({queryKey:["admin-push-self-check"],queryFn:RA,refetchInterval:15e3,retry:!1}),Pt=Qe({queryKey:["notification-jobs",A,q,D,Y,H,J,ye,Se],queryFn:()=>jA({status:A||void 0,notification_type:q.trim()||void 0,risk_level:D||void 0,audience:Y||void 0,employee_id:Number(H)>0?Number(H):void 0,start_date:J||void 0,end_date:ye||void 0,offset:(Se-1)*hs,limit:hs}),refetchInterval:1e4}),ct=Qe({queryKey:["notification-delivery-logs",le],queryFn:()=>SA({offset:(le-1)*hs,limit:hs}),refetchInterval:15e3}),dn=Qe({queryKey:["notify-subs-emp"],queryFn:()=>EA({}),refetchInterval:15e3}),jn=Qe({queryKey:["notify-subs-admin"],queryFn:()=>TA({}),refetchInterval:15e3}),et=b.useMemo(()=>(Pt.data?.items??[]).find(P=>P.id===Vt)??null,[Pt.data,Vt]),kn=Qe({queryKey:["notification-job-timeline",et?.id,et?.employee_id,et?.local_day],queryFn:()=>bp({employee_id:et?.employee_id??void 0,start_date:et?.local_day??void 0,end_date:et?.local_day??void 0,limit:50}),enabled:et!==null&&typeof et.employee_id=="number"&&et.employee_id>0&&typeof et.local_day=="string"&&et.local_day.length>0,refetchInterval:15e3}),gt=Qe({queryKey:["daily-archives",me,Ye,ht,Oe],queryFn:()=>BA({offset:(Oe-1)*hs,limit:hs,start_date:me||void 0,end_date:Ye||void 0,employee_query:ht.trim()||void 0})}),Wa=b.useMemo(()=>{const P=K.trim().toLowerCase();return P?(ut.data??[]).filter(De=>`${De.id} ${De.full_name}`.toLowerCase().includes(P)):ut.data??[]},[ut.data,K]),Dn=b.useMemo(()=>{const P=ke.trim().toLowerCase();return P?(Nt.data??[]).filter(De=>`${De.id} ${De.username}`.toLowerCase().includes(P)):Nt.data??[]},[Nt.data,ke]),Kt=b.useMemo(()=>{const P=Rt.trim().toLowerCase(),De=ct.data?.items??[];return P?De.filter(yt=>[yt.recipient_name??"",yt.recipient_address??"",String(yt.recipient_id??""),String(yt.device_id??""),yt.ip??"",yt.status,yt.channel,yt.notification_type??"",yt.audience??"",yt.event_id,yt.title??""].join(" ").toLowerCase().includes(P)):De},[ct.data,Rt]),Gn=b.useMemo(()=>Kt.filter(P=>P.status==="SENT").length,[Kt]),es=b.useMemo(()=>Kt.filter(P=>P.status==="FAILED").length,[Kt]),$=b.useMemo(()=>Kt.find(P=>P.id===Ee)??null,[Kt,Ee]),qe=Pt.data?.items??[],xn=Pt.data?.total??0,pt=Math.max(1,Math.ceil(xn/hs)),Fe=xn===0?0:(Se-1)*hs+1,sn=qe.length===0?0:Fe+qe.length-1,yn=ct.data?.total??0,En=Math.max(1,Math.ceil(yn/hs)),Wt=yn===0?0:(le-1)*hs+1,hn=Kt.length===0?0:Wt+Kt.length-1,aa=gt.data?.items??[],F=gt.data?.total??0,Pe=Math.max(1,Math.ceil(F/hs)),dt=F===0?0:(Oe-1)*hs+1,Vn=aa.length===0?0:dt+aa.length-1,Tn=(jn.data??[]).length,B=Tn>0,Ze=(l?.username??"").trim().toLowerCase(),St=typeof l?.admin_user_id=="number"&&l.admin_user_id>0?l.admin_user_id:null,Un=b.useMemo(()=>{const P=jn.data??[];let De=0,yt=0,ia=0;for(const ra of P){const wi=St!==null&&ra.admin_user_id===St,_s=Ze.length>0&&(ra.admin_username||"").trim().toLowerCase()===Ze;wi&&(De+=1),_s&&(yt+=1),(wi||_s)&&(ia+=1)}return{total:ia,byId:De,byUsername:yt}},[jn.data,St,Ze]),ja=Bn.data,rn=ja?.self_check_ok!==!1?ja:void 0,hr=rn?.active_claims_for_actor??Un.total,bs=rn?.active_claims_for_actor_by_id??Un.byId,ts=rn?.active_claims_for_actor_by_username??Un.byUsername,ns=hr>0,Bt=Dt.data,Ws=Bt?.alarms?.length??0,ei=Bt?.status??(Bt?.job_exists?"BILINMIYOR":"YOK"),jt=Ws===0&&!!Bt?.job_exists&&!!Bt?.archive_exists&&Bt?.status==="SENT"&&!!Bt?.delivery_succeeded,Ut=Xt.data?.active_recipients??[],sa=Xt.data?.active_count??0;b.useEffect(()=>{Xt.data&&_t(P=>P.trim().length>0?P:Ut.join(`
`))},[Xt.data,Ut]);const Ln=Je({mutationFn:LA,onSuccess:P=>{Ne(P),s({variant:"success",title:"Davet hazir",description:"Link admin cihaza gonderildi."}),navigator.clipboard.writeText(P.invite_url)},onError:P=>s({variant:"error",title:"Davet hatasi",description:He(P,"Davet olusturulamadi").message})}),Sa=Je({mutationFn:DA,onSuccess:P=>{P.total_targets<=0||P.sent<=0?s({variant:"error",title:"Self-test basarisiz",description:`Hedef: ${P.total_targets} | Gonderilen: ${P.sent} | Hata: ${P.failed}`}):s({variant:"success",title:"Self-test bildirimi gonderildi",description:`Hedef: ${P.total_targets} | Gonderilen: ${P.sent}`}),e.invalidateQueries({queryKey:["admin-push-self-check"]}),e.invalidateQueries({queryKey:["notification-delivery-logs"]})},onError:P=>{const De=He(P,"Self-test bildirimi gonderilemedi.");s({variant:"error",title:"Self-test hatasi",description:De.message})}}),zs=Je({mutationFn:async()=>{const P=await Kf();if(!P.enabled||!P.vapid_public_key)throw new Error("Push bildirim servisi yapilandirilmamis.");const De=await Dz(P.vapid_public_key),yt=await x_({subscription:De.toJSON(),send_test:!0});return window.localStorage.setItem(M_,P.vapid_public_key),yt},onSuccess:P=>{s({variant:P.test_push_ok?"success":"error",title:P.test_push_ok?"Heal tamamlandi":"Heal tamamlandi ama test hatali",description:P.test_push_ok?`Abonelik yenilendi (#${P.subscription_id}) ve test bildirimi gonderildi.`:`Abonelik yenilendi (#${P.subscription_id}) ancak test bildirimi hatali.`}),e.invalidateQueries({queryKey:["admin-push-self-check"]}),e.invalidateQueries({queryKey:["notify-subs-admin"]}),e.invalidateQueries({queryKey:["notification-delivery-logs"]})},onError:P=>{if(P instanceof Error&&!("response"in P)){s({variant:"error",title:"Heal hatasi",description:P.message});return}const De=He(P,"Cihaz heal islemi basarisiz oldu.");s({variant:"error",title:"Heal hatasi",description:De.message})}}),lt=Je({mutationFn:async()=>{const P=Array.from(new Set(Ke.split(/[\n,;]+/g).map(De=>De.trim().toLowerCase()).filter(De=>De.length>0)));return zA({emails:P})},onSuccess:P=>{_t((P.active_recipients??[]).join(`
`)),s({variant:"success",title:"Mail alicilari guncellendi",description:`Aktif alici: ${P.active_count}`}),e.invalidateQueries({queryKey:["admin-notification-email-targets"]})},onError:P=>{const De=He(P,"Mail alicilari kaydedilemedi.");s({variant:"error",title:"Kayit hatasi",description:De.message})}}),ln=Je({mutationFn:async()=>{const P=pn.trim();return OA({recipients:P?[P]:void 0,subject:rt.trim()||void 0,message:_e.trim()||void 0})},onSuccess:P=>{if(!P.ok){s({variant:"error",title:"Test mail gonderilemedi",description:`${P.error??P.mode} | Alici: ${P.recipients.join(", ")||"-"}`});return}s({variant:"success",title:"Test mail gonderildi",description:`Alici: ${P.recipients.join(", ")} | Sent: ${P.sent}`})},onError:P=>{const De=He(P,"Test mail gonderilemedi.");s({variant:"error",title:"Test mail hatasi",description:De.message})}}),Os=Je({mutationFn:IA,onSuccess:(P,De)=>{const yt=De.target==="admins"||De.target==="both";P.total_targets<=0?s({variant:"error",title:"Bildirim gonderilemedi",description:"Hedef 0. Aktif abonelik yok; once cihaz claim edin."}):P.sent<=0?s({variant:"error",title:"Bildirim gonderilemedi",description:`Hedef: ${P.total_targets} / Gonderilen: ${P.sent} / Hata: ${P.failed}`}):(s({variant:"success",title:"Bildirim gonderildi",description:`Hedef: ${P.total_targets} / Gonderilen: ${P.sent}`}),yt&&!ns&&s({variant:"error",title:"Bu hesapta claim eksik",description:"Admin hedefli gonderim yapildi ancak bu hesapta aktif claim olmadigi icin sana dusmeyebilir."})),yt&&P.admin_target_missing&&s({variant:"error",title:"Admin hedefi 0",description:"Calisan bildirimi gitmis olabilir ama admin hedefinde aktif abonelik yok. Admin claim zorunlu."}),e.invalidateQueries({queryKey:["notification-jobs"]}),e.invalidateQueries({queryKey:["notification-delivery-logs"]}),e.invalidateQueries({queryKey:["admin-push-self-check"]})},onError:P=>s({variant:"error",title:"Gonderim hatasi",description:He(P,"Bildirim gonderilemedi").message})}),Si=Je({mutationFn:wA,onSuccess:()=>{e.invalidateQueries({queryKey:["notification-jobs"]})}}),en=Je({mutationFn:({jobId:P,note:De})=>kA(P,De),onSuccess:()=>{s({variant:"success",title:"Bildirim notu kaydedildi",description:"Admin aciklamasi guncellendi."}),e.invalidateQueries({queryKey:["notification-jobs"]})},onError:P=>{const De=He(P,"Bildirim notu kaydedilemedi.");s({variant:"error",title:"Not kayit hatasi",description:De.message})}}),ti=Je({mutationFn:FA,onSuccess:(P,De)=>{const yt=(gt.data?.items??[]).find(ia=>ia.id===De);Rz(P,yt?.file_name??`arsiv-${De}.xlsx`)}}),Rs=Je({mutationFn:P=>KA(P),onSuccess:P=>{P.total_targets<=0||P.sent<=0?s({variant:"error",title:"Arsiv bildirimi gonderilemedi",description:`Hedef: ${P.total_targets} | Gonderilen: ${P.sent} | Hata: ${P.failed}. Aktif admin cihazi claim edilmeli.`}):(s({variant:"success",title:"Arsiv bildirimi gonderildi",description:`Hedef: ${P.total_targets} | Gonderilen: ${P.sent} | Hata: ${P.failed}`}),ns||s({variant:"error",title:"Bu hesapta claim eksik",description:"Bildirim gitti ama bu admin hesabinda aktif cihaz claim olmadigi icin sana dusmeyebilir."})),e.invalidateQueries({queryKey:["notification-jobs"]}),e.invalidateQueries({queryKey:["admin-daily-report-health"]})},onError:P=>{const De=He(P,"Arsiv bildirimi gonderilemedi.");De.code==="ADMIN_PUSH_SUBSCRIPTION_REQUIRED"?s({variant:"error",title:"Admin hedefi 0",description:"Aktif admin push aboneligi yok. Once admin cihazini claim edip tekrar deneyin."}):s({variant:"error",title:"Arsiv bildirimi basarisiz",description:De.message}),e.invalidateQueries({queryKey:["admin-daily-report-health"]})}});return b.useEffect(()=>{if(Re)return;const P=o.get("archive_id");if(!P)return;const De=Number(P);if(!Number.isInteger(De)||De<=0){Le(!0);return}if(!(gt.data?.items??[]).find(ra=>ra.id===De))return;Le(!0),ti.mutate(De);const ia=new URLSearchParams(o);ia.delete("archive_id"),d(ia,{replace:!0})},[Re,gt.data,ti,o,d]),b.useEffect(()=>{const P=o.get("job_id");if(!P)return;const De=Number(P);!Number.isInteger(De)||De<=0||ae(De)},[o]),b.useEffect(()=>{oe(1)},[A,q,D,Y,H,J,ye]),b.useEffect(()=>{Pt.data&&oe(P=>P<1?1:P>pt?pt:P)},[Pt.data,pt]),b.useEffect(()=>{const P=Pt.data?.items??[];if(P.length===0){ae(null);return}(Vt===null||!P.some(De=>De.id===Vt))&&ae(P[0].id)},[Pt.data,Vt]),b.useEffect(()=>{se(et?.admin_note??"")},[et?.id,et?.admin_note]),b.useEffect(()=>{Q(1)},[Rt]),b.useEffect(()=>{ct.data&&Q(P=>P<1?1:P>En?En:P)},[ct.data,En]),b.useEffect(()=>{mt(1)},[me,Ye,ht]),b.useEffect(()=>{if(Kt.length===0){Be(null);return}(Ee===null||!Kt.some(P=>P.id===Ee))&&Be(Kt[0].id)},[Kt,Ee]),b.useEffect(()=>{gt.data&&mt(P=>P<1?1:P>Pe?Pe:P)},[gt.data,Pe]),n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"Bildirim Merkezi",description:"Push, claim daveti, job yonetimi ve gunluk Excel arsivi."}),n.jsxs(Ue,{children:[n.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Admin davet suresi (dk)",n.jsx("input",{type:"number",min:1,max:1440,value:R,onChange:P=>T(Number(P.target.value||15)),className:"mt-1 w-40 rounded border border-slate-300 px-3 py-2"})]}),n.jsx("button",{type:"button",onClick:()=>Ln.mutate({expires_in_minutes:R}),className:"rounded bg-brand-600 px-4 py-2 text-sm font-semibold text-white",children:"Admin cihaz claim linki uret"}),n.jsxs("span",{className:"text-xs text-slate-500",children:["Push: ",$t.data?.enabled?"Aktif":"Pasif"]})]}),n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Link otomatik kopyalanir. Guvenlik icin kisa sure onerilir (ornegin 10-30 dk). Ekran: /admin-panel/device-claim?token=..."}),ue?n.jsxs("div",{className:"mt-2 rounded border border-emerald-200 bg-emerald-50 p-2 text-xs text-emerald-800",children:[n.jsxs("p",{children:["Token: ",ue.token]}),n.jsxs("p",{className:"break-all",children:["Link: ",ue.invite_url]}),n.jsxs("p",{children:["Bitis: ",$s(ue.expires_at)]})]}):null]}),n.jsx(Ue,{children:n.jsxs("form",{className:"space-y-3",onSubmit:P=>{P.preventDefault(),Os.mutate({title:m.trim(),message:g.trim(),password:_.trim(),target:w,employee_ids:w!=="admins"&&z.length>0?z:void 0,admin_user_ids:w!=="employees"&&I.length>0?I:void 0})},children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Manuel Push Gonder"}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[n.jsx("input",{value:m,onChange:P=>f(P.target.value),className:"rounded border border-slate-300 px-3 py-2",placeholder:"Baslik"}),n.jsx("input",{type:"password",value:_,onChange:P=>S(P.target.value),className:"rounded border border-slate-300 px-3 py-2",placeholder:"Admin sifresi"}),n.jsxs("select",{value:w,onChange:P=>E(P.target.value),className:"rounded border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"employees",children:"Calisanlara"}),n.jsx("option",{value:"admins",children:"Adminlere"}),n.jsx("option",{value:"both",children:"Her ikisine"})]})]}),n.jsx("textarea",{value:g,onChange:P=>v(P.target.value),rows:3,className:"w-full rounded border border-slate-300 px-3 py-2",placeholder:"Mesaj"}),w!=="admins"?n.jsxs("div",{children:[n.jsx(_i,{value:K,onChange:X,placeholder:"Calisan filtrele..."}),n.jsx("div",{className:"mt-2 max-h-36 overflow-y-auto rounded border border-slate-200 p-2 text-sm",children:Wa.map(P=>n.jsxs("label",{className:"flex items-center justify-between py-1",children:[n.jsxs("span",{children:["#",P.id," - ",P.full_name]}),n.jsx("input",{type:"checkbox",checked:z.includes(P.id),onChange:()=>ne(De=>De.includes(P.id)?De.filter(yt=>yt!==P.id):[...De,P.id])})]},P.id))})]}):null,w!=="employees"?n.jsxs("div",{children:[n.jsx(_i,{value:ke,onChange:je,placeholder:"Admin filtrele..."}),n.jsx("div",{className:"mt-2 max-h-36 overflow-y-auto rounded border border-slate-200 p-2 text-sm",children:Dn.map(P=>n.jsxs("label",{className:"flex items-center justify-between py-1",children:[n.jsxs("span",{children:["#",P.id," - ",P.username]}),n.jsx("input",{type:"checkbox",checked:I.includes(P.id),onChange:()=>ce(De=>De.includes(P.id)?De.filter(yt=>yt!==P.id):[...De,P.id])})]},P.id))})]}):null,n.jsx("button",{type:"submit",className:"rounded bg-brand-600 px-4 py-2 text-sm font-semibold text-white",children:"Bildirimi gonder"})]})}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Bildirim Isleri"}),n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-3 xl:grid-cols-6",children:[n.jsxs("select",{value:A,onChange:P=>O(P.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"Durum: Tumu"}),n.jsx("option",{value:"PENDING",children:"PENDING"}),n.jsx("option",{value:"SENDING",children:"SENDING"}),n.jsx("option",{value:"SENT",children:"SENT"}),n.jsx("option",{value:"FAILED",children:"FAILED"}),n.jsx("option",{value:"CANCELED",children:"CANCELED"})]}),n.jsx("input",{value:q,onChange:P=>U(P.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm",placeholder:"Tur or. erken_cikis"}),n.jsxs("select",{value:D,onChange:P=>G(P.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"Risk: Tumu"}),n.jsx("option",{value:"Bilgi",children:"Bilgi"}),n.jsx("option",{value:"Uyari",children:"Uyari"}),n.jsx("option",{value:"Kritik",children:"Kritik"})]}),n.jsxs("select",{value:Y,onChange:P=>ee(P.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"Hedef: Tumu"}),n.jsx("option",{value:"employee",children:"Calisan"}),n.jsx("option",{value:"admin",children:"Admin"})]}),n.jsx("input",{value:H,onChange:P=>te(P.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm",placeholder:"Personel ID"}),n.jsx("button",{type:"button",onClick:()=>{Pt.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Listeyi yenile"}),n.jsx("input",{type:"date",value:J,onChange:P=>fe(P.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsx("input",{type:"date",value:ye,onChange:P=>de(P.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm"})]}),Pt.isLoading?n.jsx(Gt,{label:"Yukleniyor..."}):null,Pt.isError?n.jsx(Ot,{message:"Job listesi alinamadi."}):null,!Pt.isLoading&&!Pt.isError?n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:[n.jsxs("span",{children:["Gosterilen satir: ",Fe,"-",sn," / ",xn]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>oe(P=>Math.max(1,P-1)),disabled:Se<=1,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Onceki"}),n.jsxs("span",{children:["Sayfa ",Se," / ",pt]}),n.jsx("button",{type:"button",onClick:()=>oe(P=>Math.min(pt,P+1)),disabled:Se>=pt,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}):null,n.jsxs("div",{className:"mt-3 grid gap-4 xl:grid-cols-[minmax(0,1fr)_420px]",children:[n.jsx("div",{className:"max-h-[620px] overflow-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"sticky top-0 bg-white",children:n.jsxs("tr",{className:"text-xs uppercase text-slate-500",children:[n.jsx("th",{className:"px-2 py-2",children:"Sira"}),n.jsx("th",{className:"px-2 py-2",children:"Tur"}),n.jsx("th",{className:"px-2 py-2",children:"Risk"}),n.jsx("th",{className:"px-2 py-2",children:"Hedef"}),n.jsx("th",{className:"px-2 py-2",children:"Personel"}),n.jsx("th",{className:"px-2 py-2",children:"Baslik"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Olay"})]})}),n.jsx("tbody",{children:qe.map((P,De)=>{const yt=P.id===Vt;return n.jsxs("tr",{className:`border-t border-slate-100 ${yt?"bg-sky-50":"hover:bg-slate-50"} cursor-pointer`,onClick:()=>ae(P.id),children:[n.jsx("td",{className:"px-2 py-2 text-slate-500",children:Fe+De}),n.jsx("td",{className:"px-2 py-2 font-medium text-slate-700",children:P.notification_type??P.job_type}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("span",{className:`rounded px-2 py-1 text-xs ${Az(P.risk_level)}`,children:P.risk_level??"-"})}),n.jsx("td",{className:"px-2 py-2",children:td(P.audience)}),n.jsxs("td",{className:"px-2 py-2",children:["#",P.employee_id??"-"]}),n.jsx("td",{className:"px-2 py-2 max-w-56 truncate",title:P.title??"",children:P.title??"-"}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("span",{className:`rounded px-2 py-1 text-xs ${Tz(P.status)}`,children:P.status})}),n.jsx("td",{className:"px-2 py-2",children:P.event_ts_utc?$s(P.event_ts_utc):$s(P.scheduled_at_utc)})]},P.id)})})]})}),n.jsxs("aside",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Secili bildirim detayi"}),et===null?n.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Listeden bir bildirim secin."}):n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3 text-sm text-slate-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Baslik:"})," ",et.title??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Aciklama:"})," ",et.description??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Olay Zamani:"})," ",et.event_ts_utc?$s(et.event_ts_utc):"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Vardiya Bilgisi:"})," ",et.shift_summary??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Gerceklesen Saat:"})," ",et.actual_time_summary??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Risk Seviyesi:"})," ",et.risk_level??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Islem Onerisi:"})," ",et.suggested_action??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Event ID:"})," ",et.event_id??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Personel:"})," #",et.employee_id??"-"," "]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Hedef:"})," ",td(et.audience)]}),et.status==="PENDING"||et.status==="SENDING"?n.jsx("button",{type:"button",className:"mt-2 rounded border border-rose-300 px-3 py-2 text-xs text-rose-700",onClick:()=>Si.mutate(et.id),children:"Bildirimi iptal et"}):null]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("h6",{className:"text-sm font-semibold text-slate-900",children:"Gun timeline'i"}),et.employee_id&&et.local_day?n.jsx(Ys,{to:`/attendance-events?employee_id=${et.employee_id}&start_date=${et.local_day}&end_date=${et.local_day}`,className:"rounded border border-slate-300 px-2 py-1 text-xs text-slate-700",children:"Manuel duzeltme ekranini ac"}):null]}),kn.isLoading?n.jsx(Gt,{label:"Timeline yukleniyor..."}):null,kn.isError?n.jsx(Ot,{message:"Timeline alinamadi."}):null,!kn.isLoading&&!kn.isError?n.jsx("div",{className:"mt-2 space-y-2",children:(kn.data??[]).length===0?n.jsx("p",{className:"text-sm text-slate-500",children:"Bu gun icin timeline kaydi bulunamadi."}):(kn.data??[]).map(P=>n.jsxs("div",{className:"rounded border border-slate-200 bg-slate-50 p-2 text-sm text-slate-700",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("strong",{children:Mz(P)}),n.jsx("span",{children:$s(P.ts_utc)})]}),P.note?n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Not: ",P.note]}):null]},P.id))}):null]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("h6",{className:"text-sm font-semibold text-slate-900",children:"Admin aciklamasi"}),n.jsx("textarea",{value:Ct,onChange:P=>se(P.target.value),rows:4,className:"mt-2 w-full rounded border border-slate-300 px-2 py-1.5 text-sm",placeholder:"Bildirimle ilgili operasyon notu ekleyin"}),n.jsx("button",{type:"button",onClick:()=>en.mutate({jobId:et.id,note:Ct.trim()||null}),disabled:en.isPending,className:"mt-2 rounded border border-brand-300 px-3 py-2 text-sm text-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:en.isPending?"Kaydediliyor...":"Aciklamayi kaydet"})]})]})]})]}),!Pt.isLoading&&!Pt.isError&&xn===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Filtreye uygun bildirim isi bulunamadi."}):null]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Abonelik Ozeti"}),n.jsxs("div",{className:"grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Calisan abonelik: ",(dn.data??[]).length]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Admin abonelik: ",(jn.data??[]).length]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Arsiv dosyasi: ",F]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Teslimat log satiri: ",yn]})]}),B?null:n.jsx("p",{className:"mt-2 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:'Aktif admin push aboneligi yok. "Admin cihaz claim linki uret" adimini tamamlamadan bildirim gonderilemez.'})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Admin Push Self-Check"}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Login admin: ",n.jsx("strong",{children:l?.username??"-"})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Login admin ID: ",n.jsx("strong",{children:l?.admin_user_id??"-"})]}),n.jsxs("div",{className:`rounded border p-3 text-sm ${ns?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-rose-200 bg-rose-50 text-rose-800"}`,children:["Bu hesap claim: ",n.jsx("strong",{children:hr})," (id:",bs," / user:",ts,")"]}),n.jsxs("div",{className:`rounded border p-3 text-sm ${rn?.push_enabled??$t.data?.enabled?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-rose-200 bg-rose-50 text-rose-800"}`,children:["Push config:"," ",n.jsx("strong",{children:rn?.push_enabled??$t.data?.enabled?"Aktif":"Pasif"})]})]}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Toplam aktif admin claim: ",n.jsx("strong",{children:rn?.active_total_subscriptions??Tn})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Son claim gorulme:"," ",n.jsx("strong",{children:rn?.latest_claim_seen_at?$s(rn.latest_claim_seen_at):"-"})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Claim saglik:"," ",n.jsxs("strong",{children:["saglikli ",rn?.active_claims_healthy??0," / ","hatali ",rn?.active_claims_with_error??0," / ","stale ",rn?.active_claims_stale??0]})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Sa.mutate(),disabled:Sa.isPending||zs.isPending,className:"rounded border border-brand-300 px-3 py-2 text-sm text-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:Sa.isPending?"Self-test gonderiliyor...":"Kendime test bildirimi gonder"}),n.jsx("button",{type:"button",onClick:()=>zs.mutate(),disabled:zs.isPending||Sa.isPending,className:"rounded border border-emerald-300 px-3 py-2 text-sm text-emerald-700 disabled:cursor-not-allowed disabled:opacity-60",children:zs.isPending?"Heal calisiyor...":"Bu cihazi heal et"})]})})]}),n.jsxs("div",{className:"mt-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:["Son self-test:"," ",n.jsx("strong",{children:rn?.last_self_test_at?$s(rn.last_self_test_at):"-"})," | ","Durum:"," ",n.jsx("strong",{children:rn?.last_self_test_success===null?"-":rn?.last_self_test_success?"BASARILI":"HATALI"})," | ","Hedef:"," ",n.jsx("strong",{children:rn?.last_self_test_total_targets??"-"})," | ","Gonderilen:"," ",n.jsx("strong",{children:rn?.last_self_test_sent??"-"})," | ","Hata:"," ",n.jsx("strong",{children:rn?.last_self_test_failed??"-"})]}),Bn.isError?n.jsx("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:"Self-check verisi alinamadi. Fallback olarak abonelik listesi kullaniliyor."}):null,Bn.data?.self_check_ok===!1?n.jsxs("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:["Self-check degradasyona dustu: ",Bn.data.self_check_error||"bilinmeyen hata",". Fallback olarak abonelik listesi kullaniliyor."]}):null,ns?null:n.jsx("p",{className:"mt-2 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:"Bu admin hesabinda aktif cihaz claim gorunmuyor. Bildirim almak icin telefonda claim linkini acip izin adimini tamamla."}),rn?.latest_claim_error?n.jsxs("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:["Son claim hatasi: ",rn.latest_claim_error]}):null]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Mail Bildirim Ayarlari"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Gece gunluk Excel arsiv job'unda mail gonderimi best-effort calisir; push teslimati onceliklidir."}),n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-3",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Aktif mail alicisi: ",n.jsx("strong",{children:sa})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Son health email: ",n.jsx("strong",{children:Bt?.email_sent??0})]}),n.jsx("button",{type:"button",onClick:()=>{Xt.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Mail listesini yenile"})]}),Xt.isError?n.jsx("p",{className:"mt-2 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:"Mail hedefleri yuklenemedi."}):null,sa<=0?n.jsx("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:"Aktif mail alicisi yok. Mail kanali devre disi kalir, push bildirimi calismaya devam eder."}):null,n.jsxs("label",{className:"mt-3 block text-xs text-slate-600",children:["Alici listesi (satir satir veya virgul ile)",n.jsx("textarea",{value:Ke,onChange:P=>_t(P.target.value),rows:5,placeholder:`ornek@domain.com
destek@domain.com`,className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>lt.mutate(),disabled:lt.isPending,className:"rounded border border-brand-300 bg-brand-50 px-3 py-2 text-sm text-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:lt.isPending?"Kaydediliyor...":"Mail alicilarini kaydet"}),n.jsx("button",{type:"button",onClick:()=>_t(Ut.join(`
`)),className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Listeyi geri al"})]}),n.jsxs("div",{className:"mt-4 rounded border border-slate-200 bg-slate-50 p-3",children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Test mail gonder"}),n.jsx("p",{className:"mt-1 text-xs text-slate-600",children:"Alici bos birakilirsa kayitli tum aktif adreslere test mail gonderilir."}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-3",children:[n.jsxs("label",{className:"text-xs text-slate-600",children:["Test alici (opsiyonel)",n.jsx("input",{value:pn,onChange:P=>Lt(P.target.value),placeholder:"tekbir@adres.com",className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsxs("label",{className:"text-xs text-slate-600 md:col-span-2",children:["Konu",n.jsx("input",{value:rt,onChange:P=>Qn(P.target.value),className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]})]}),n.jsxs("label",{className:"mt-2 block text-xs text-slate-600",children:["Mesaj",n.jsx("textarea",{value:_e,onChange:P=>tt(P.target.value),rows:3,className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsx("button",{type:"button",onClick:()=>ln.mutate(),disabled:ln.isPending,className:"mt-2 rounded border border-slate-300 px-3 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-60",children:ln.isPending?"Test gonderiliyor...":"Test mail gonder"})]})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Bildirim Teslimat Logu"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Kime gitti / gitmedi, isim-ID, cihaz, IP ve hata bilgisini izleyin."}),n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Toplam satir: ",yn]}),n.jsxs("div",{className:"rounded border border-emerald-200 bg-emerald-50 p-3 text-sm text-emerald-800",children:["Gonderildi: ",Gn]}),n.jsxs("div",{className:"rounded border border-rose-200 bg-rose-50 p-3 text-sm text-rose-800",children:["Gonderilemedi: ",es]}),n.jsx("button",{type:"button",onClick:()=>{ct.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Logu yenile"})]}),n.jsx("div",{className:"mt-3",children:n.jsx(_i,{value:Rt,onChange:It,placeholder:"Isim, ID, cihaz, IP, baslik, durum ara..."})}),!ct.isLoading&&!ct.isError?n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:[n.jsxs("span",{children:["Gosterilen satir: ",Wt,"-",hn," / ",yn]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Q(P=>Math.max(1,P-1)),disabled:le<=1,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Onceki"}),n.jsxs("span",{children:["Sayfa ",le," / ",En]}),n.jsx("button",{type:"button",onClick:()=>Q(P=>Math.min(En,P+1)),disabled:le>=En,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}):null,ct.isLoading?n.jsx(Gt,{label:"Teslimat logu yukleniyor..."}):null,ct.isError?n.jsx(Ot,{message:"Teslimat logu alinamadi."}):null,!ct.isLoading&&!ct.isError?n.jsxs("div",{className:"mt-3 grid gap-4 xl:grid-cols-[minmax(0,1fr)_360px]",children:[n.jsxs("section",{className:"overflow-hidden rounded-xl border border-slate-900 bg-[#09131d] text-slate-200 shadow-inner",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-slate-700 bg-slate-900/70 px-3 py-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-rose-400"}),n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-amber-300"}),n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-emerald-400"}),n.jsx("span",{className:"ml-2 text-xs font-semibold text-slate-300",children:"delivery-terminal"})]}),n.jsxs("span",{className:"text-[11px] text-slate-400",children:[Wt,"-",hn," / ",yn]})]}),n.jsxs("div",{className:"max-h-[520px] overflow-auto",children:[n.jsxs("table",{className:"min-w-full table-fixed text-left text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-900/95 text-[11px] uppercase text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"w-36 px-2 py-2",children:"Zaman"}),n.jsx("th",{className:"w-24 px-2 py-2",children:"Durum"}),n.jsx("th",{className:"w-24 px-2 py-2",children:"Kanal"}),n.jsx("th",{className:"w-24 px-2 py-2",children:"Kitle"}),n.jsx("th",{className:"w-56 px-2 py-2",children:"Kisi"}),n.jsx("th",{className:"w-40 px-2 py-2",children:"Tur"}),n.jsx("th",{className:"w-48 px-2 py-2",children:"Baslik"}),n.jsx("th",{className:"w-64 px-2 py-2",children:"Hata"})]})}),n.jsx("tbody",{children:Kt.map((P,De)=>{const yt=P.id===Ee;return n.jsxs("tr",{onClick:()=>Be(P.id),className:`cursor-pointer border-t border-slate-800 ${yt?"bg-cyan-900/35":"hover:bg-slate-800/55"}`,children:[n.jsx("td",{className:"px-2 py-2 text-slate-300",children:$s(P.sent_at_utc)}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("span",{className:`rounded px-2 py-0.5 text-[11px] font-semibold ${Cz(P.status)}`,children:P.status})}),n.jsx("td",{className:"px-2 py-2 text-slate-300 uppercase",children:P.channel}),n.jsx("td",{className:"px-2 py-2 text-slate-300",children:td(P.audience)}),n.jsxs("td",{className:"px-2 py-2 text-slate-300 truncate",title:`#${P.recipient_id??"-"} - ${P.recipient_name??"-"}`,children:["#",P.recipient_id??"-"," - ",P.recipient_name??"-"]}),n.jsx("td",{className:"px-2 py-2 text-slate-300 truncate",title:P.notification_type??"-",children:P.notification_type??"-"}),n.jsx("td",{className:"px-2 py-2 text-slate-300 truncate",title:P.title??"-",children:P.title??"-"}),n.jsx("td",{className:"px-2 py-2 text-slate-300 truncate",title:P.error??"-",children:P.error??"-"})]},`${P.id}-${P.recipient_type}-${P.recipient_id??0}-${P.device_id??0}-${De}`)})})]}),Kt.length===0?n.jsx("p",{className:"px-3 py-3 text-sm text-amber-300",children:"Filtreye uygun teslimat kaydi bulunamadi."}):null]})]}),n.jsxs("aside",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Secili teslimat detayi"}),$===null?n.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Listeden bir kayit secin."}):n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-2 text-sm text-slate-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Zaman:"})," ",$s($.sent_at_utc)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Durum:"})," ",$.status]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Hedef tipi:"})," ",$.recipient_type==="employee"?"CALISAN":"ADMIN"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Kitle:"})," ",td($.audience)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Kisi:"})," #",$.recipient_id??"-"," -"," ",$.recipient_name??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"E-posta:"})," ",$.recipient_address??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Tur:"})," ",$.notification_type??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Kanal:"})," ",$.channel.toUpperCase()]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Cihaz:"})," ",$.device_id??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"IP:"})," ",$.ip??"-"]}),n.jsxs("p",{className:"break-words",children:[n.jsx("span",{className:"font-semibold",children:"Baslik:"})," ",$.title??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Event ID:"})," ",$.event_id]}),n.jsxs("p",{className:"break-all",children:[n.jsx("span",{className:"font-semibold",children:"Endpoint:"})," ",$.endpoint??"-"]}),n.jsxs("p",{className:"break-all",children:[n.jsx("span",{className:"font-semibold",children:"Hata:"})," ",$.error??"-"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-xs font-semibold text-slate-600",children:"JSON detay"}),n.jsx("pre",{className:"max-h-64 overflow-auto rounded-lg bg-slate-900 p-2 text-[11px] text-slate-100",children:JSON.stringify($,null,2)})]})]})]})]}):null]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Gunluk Excel Arsivi"}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:`rounded border p-3 text-sm ${Oz(Bt)}`,children:["Gece job durumu: ",n.jsx("strong",{children:ei}),n.jsxs("div",{className:"mt-1 text-xs",children:["Alarm: ",n.jsx("strong",{children:Ws})]})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Rapor tarihi: ",n.jsx("strong",{children:Bt?.report_date??"-"}),n.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Son kontrol: ",Bt?.evaluated_at_utc?$s(Bt.evaluated_at_utc):"-"]})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Teslimat: ",n.jsx("strong",{children:Bt?.push_sent??0})," / ",Bt?.push_total_targets??0,n.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Push hata: ",Bt?.push_failed??0," | Email: ",Bt?.email_sent??0]})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Arsiv: ",n.jsx("strong",{children:Bt?.archive_exists?`#${Bt.archive_id}`:"YOK"}),n.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Calisan: ",Bt?.archive_employee_count??0," | Boyut: ",((Bt?.archive_file_size_bytes??0)/1024).toFixed(1)," KB"]})]})]}),Dt.isError?n.jsx("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:"Gece 00:00 job health verisi alinamadi."}):null,!Dt.isError&&Bt?n.jsx("div",{className:"mt-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:Ws>0?n.jsx("div",{className:"flex flex-wrap gap-1",children:Bt.alarms.map(P=>n.jsx("span",{className:"rounded border border-rose-300 bg-rose-100 px-2 py-0.5 text-rose-800",children:zz(P)},P))}):n.jsx("span",{className:"text-emerald-700",children:"Alarm yok. Gece arsiv job durumu saglikli."})}):null,Bt?.target_zero?n.jsx("p",{className:"mt-2 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:"Gece job hedefi 0 gorunuyor. Push claim veya mail alici listesi bos olabilir."}):null,Bt?.last_error?n.jsxs("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:["Son job hatasi: ",Bt.last_error]}):null,Bt&&jt?n.jsx("p",{className:"mt-2 rounded border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-800",children:"Gece 00:00 job olustu, teslimat yapildi ve alarm bulunmuyor."}):null,n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-4",children:[n.jsxs("label",{className:"text-xs text-slate-600",children:["Baslangic",n.jsx("input",{type:"date",value:me,onChange:P=>Ge(P.target.value),className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsxs("label",{className:"text-xs text-slate-600",children:["Bitis",n.jsx("input",{type:"date",value:Ye,onChange:P=>Tt(P.target.value),className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsxs("label",{className:"text-xs text-slate-600",children:["Calisan icerigi",n.jsx("input",{value:ht,onChange:P=>M(P.target.value),placeholder:"ad veya ID",className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>{gt.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Arsivi yenile"})})]}),gt.isLoading?n.jsx(Gt,{label:"Arsiv yukleniyor..."}):null,gt.isError?n.jsx(Ot,{message:"Arsiv listesi alinamadi."}):null,!gt.isLoading&&!gt.isError?n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:[n.jsxs("span",{children:["Gosterilen satir: ",dt,"-",Vn," / ",F]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>mt(P=>Math.max(1,P-1)),disabled:Oe<=1,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Onceki"}),n.jsxs("span",{children:["Sayfa ",Oe," / ",Pe]}),n.jsx("button",{type:"button",onClick:()=>mt(P=>Math.min(Pe,P+1)),disabled:Oe>=Pe,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}):null,n.jsx("div",{className:"mt-2 max-h-[520px] overflow-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"sticky top-0 bg-white",children:n.jsxs("tr",{className:"text-xs uppercase text-slate-500",children:[n.jsx("th",{className:"px-2 py-2",children:"Sira"}),n.jsx("th",{className:"px-2 py-2",children:"ID"}),n.jsx("th",{className:"px-2 py-2",children:"Tarih"}),n.jsx("th",{className:"px-2 py-2",children:"Dosya"}),n.jsx("th",{className:"px-2 py-2",children:"Calisan"}),n.jsx("th",{className:"px-2 py-2",children:"Boyut"}),n.jsx("th",{className:"px-2 py-2",children:"Islem"})]})}),n.jsx("tbody",{children:aa.map((P,De)=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-2 py-2 text-slate-500",children:dt+De}),n.jsx("td",{className:"px-2 py-2",children:P.id}),n.jsx("td",{className:"px-2 py-2",children:P.report_date}),n.jsx("td",{className:"px-2 py-2",children:P.file_name}),n.jsx("td",{className:"px-2 py-2",children:P.employee_count}),n.jsxs("td",{className:"px-2 py-2",children:[(P.file_size_bytes/1024).toFixed(1)," KB"]}),n.jsx("td",{className:"px-2 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",className:"rounded border border-brand-300 px-2 py-1 text-xs text-brand-700",onClick:()=>ti.mutate(P.id),children:"Excel indir"}),n.jsx("button",{type:"button",className:"rounded border border-slate-300 px-2 py-1 text-xs text-slate-700",title:B?void 0:"Aktif admin push aboneligi yok",onClick:()=>Rs.mutate(P.id),disabled:Rs.isPending||!B,children:"Adminlere bildir"})]})})]},P.id))})]})}),!gt.isLoading&&!gt.isError&&F===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Filtreye uygun arsiv kaydi bulunamadi."}):null]})]})}const Fl={action:"",entityType:"",entityId:"",success:"all"},_d=35,Pz=[{value:"",label:"Tum aksiyonlar"},{value:"ADMIN_LOGIN_SUCCESS",label:"Admin giris basarili"},{value:"ADMIN_LOGIN_FAIL",label:"Admin giris basarisiz"},{value:"ADMIN_REFRESH",label:"Admin token yeniledi"},{value:"ADMIN_LOGOUT",label:"Admin cikis yapti"},{value:"ATTENDANCE_EVENT_CREATED",label:"Yoklama kaydi olusturuldu"},{value:"DEVICE_INVITE_CREATED",label:"Cihaz daveti olusturuldu"},{value:"DEVICE_CLAIMED",label:"Cihaz eslestirildi"},{value:"LEAVE_CREATED",label:"Izin olusturuldu"},{value:"LEAVE_DELETED",label:"Izin silindi"}],Iz={ADMIN_LOGIN_SUCCESS:"Admin giris basarili",ADMIN_LOGIN_FAIL:"Admin giris basarisiz",ADMIN_REFRESH:"Admin token yeniledi",ADMIN_LOGOUT:"Admin cikis yapti",ATTENDANCE_EVENT_CREATED:"Yoklama kaydi olusturuldu",DEVICE_INVITE_CREATED:"Cihaz daveti olusturuldu",DEVICE_CLAIMED:"Cihaz eslestirildi",LEAVE_CREATED:"Izin olusturuldu",LEAVE_DELETED:"Izin silindi"};function Bz(e){return new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"medium"}).format(new Date(e))}function Uz(e){return new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(e))}function Fz(e){return e?"Basarili":"Hata"}function qz(e){const s=Object.entries(e);return s.length===0?"-":s.slice(0,3).map(([l,o])=>`${l}: ${String(o)}`).join(" | ")}function Zz(e){return Iz[e]??e}function Hz(e,s){const l=Number.isInteger(s)&&s>0?s:1;return{action:e.action||void 0,entity_type:e.entityType||void 0,entity_id:e.entityId||void 0,success:e.success==="all"?void 0:e.success==="success",offset:(l-1)*_d,limit:_d}}function Kz(e){const s=`${e.actor_type}:${e.actor_id}`,l=e.entity_type?`${e.entity_type}${e.entity_id?`#${e.entity_id}`:""}`:"-",o=e.ip??"-";return`[${Uz(e.ts_utc)}] ${e.action} actor=${s} entity=${l} ip=${o}`}function Qz(e){return e==="success"?"text-emerald-300":e==="warning"?"text-amber-300":e==="error"?"text-rose-300":"text-cyan-300"}function Gz(){const[e,s]=b.useState(Fl),[l,o]=b.useState(Fl),[d,m]=b.useState(1),[f,g]=b.useState(""),[v,_]=b.useState(!0),[S,w]=b.useState(""),[E,R]=b.useState(null),[T,A]=b.useState([{id:1,level:"info",text:'Log terminali hazir. Yardim icin "help" yazin.'}]),O=b.useRef(2),q=b.useRef(null),U=b.useMemo(()=>Hz(l,d),[l,d]),D=Qe({queryKey:["audit-logs",U],queryFn:()=>p_(U),refetchInterval:v?8e3:!1,refetchIntervalInBackground:!0}),G=D.data?.items??[],Y=D.data?.total??0,ee=Math.max(1,Math.ceil(Y/_d)),H=Y===0?0:(d-1)*_d+1,te=G.length===0?0:H+G.length-1,J=b.useMemo(()=>{if(!f.trim())return G;const K=f.trim().toLowerCase();return G.filter(X=>[X.action,X.actor_type,X.actor_id,X.entity_type??"",X.entity_id??"",X.ip??"",X.user_agent??"",JSON.stringify(X.details)].join(" ").toLowerCase().includes(K))},[G,f]),fe=b.useMemo(()=>{if(E!==null){const K=J.find(X=>X.id===E);if(K)return K}return J[0]??null},[E,J]),ye=b.useMemo(()=>{const K=G.filter(je=>!je.success).length,X=G.filter(je=>je.action.startsWith("ADMIN_LOGIN")).length,ke=G.filter(je=>je.action==="ATTENDANCE_EVENT_CREATED").length;return{total:Y,failed:K,loginEvents:X,attendanceEvents:ke}},[G,Y]);b.useEffect(()=>{!fe&&E!==null&&R(null)},[fe,E]),b.useEffect(()=>{D.data&&m(K=>K<1?1:K>ee?ee:K)},[D.data,ee]),b.useEffect(()=>{!v||q.current===null||(q.current.scrollTop=q.current.scrollHeight)},[v,J,T]);const de=(K,X)=>{A(ke=>{const je=[...ke,{id:O.current,level:K,text:X}];return O.current+=1,je.slice(-120)})},Se=K=>{K.preventDefault(),o({...e}),m(1),de("success","Filtreler uygulandi.")},oe=()=>{s(Fl),o(Fl),m(1),g(""),de("info","Filtreler temizlendi.")},le=K=>{const X=K.trim();if(!X)return;de("info",`$ ${X}`);const[ke,...je]=X.split(/\s+/),z=ke.toLowerCase(),ne=X.slice(ke.length).trim();if(z==="help"||z==="yardim"){de("info","Komutlar: help, clear, apply, reset, refresh, follow on|off, status all|success|failed, action <AKSIYON>, search <METIN>, page <N>");return}if(z==="clear"||z==="temizle"){A([]),O.current=1,de("success","Terminal cikti gecmisi temizlendi.");return}if(z==="apply"||z==="uygula"){o({...e}),m(1),de("success","Taslak filtreler uygulandi.");return}if(z==="reset"||z==="sifirla"){s(Fl),o(Fl),m(1),g(""),de("warning","Filtreler sifirlandi.");return}if(z==="refresh"||z==="yenile"){D.refetch(),de("success","Log verisi yeniden cekiliyor.");return}if(z==="follow"||z==="takip"){const I=je[0]?.toLowerCase();if(I==="on"||I==="ac"){_(!0),de("success","Canli takip acildi.");return}if(I==="off"||I==="kapat"){_(!1),de("warning","Canli takip kapatildi.");return}de("error","Kullanim: follow on|off");return}if(z==="status"||z==="durum"){const I=je[0]?.toLowerCase();let ce=null;if((I==="all"||I==="tum")&&(ce="all"),(I==="success"||I==="ok"||I==="basarili")&&(ce="success"),(I==="failed"||I==="error"||I==="hata")&&(ce="failed"),ce===null){de("error","Kullanim: status all|success|failed");return}s(ue=>({...ue,success:ce})),o(ue=>({...ue,success:ce})),m(1),de("success",`Durum filtresi guncellendi: ${ce}`);return}if(z==="action"||z==="aksiyon"){if(!ne){de("error","Kullanim: action <AKSIYON_KODU>");return}s(I=>({...I,action:ne})),o(I=>({...I,action:ne})),m(1),de("success",`Aksiyon filtresi guncellendi: ${ne}`);return}if(z==="search"||z==="ara"){g(ne),de("success",ne?`Metin aramasi uygulandi: "${ne}"`:"Metin aramasi temizlendi.");return}if(z==="page"||z==="sayfa"){const I=Number(je[0]);if(!Number.isFinite(I)||I<=0){de("error","Kullanim: page <1-n>");return}const ce=Math.max(Math.trunc(I),1);m(ce),de("success",`Sayfa guncellendi: ${ce}`);return}de("error",`Bilinmeyen komut: ${z}. Yardim icin "help" yazin.`)},Q=K=>{K.preventDefault(),le(S),w("")};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"Sistem Loglari",description:"Program hareketleri, hata kayitlari, giris/cikis ve yoklama islemlerini terminal gorunumunde izleyin."}),n.jsxs(Ue,{children:[n.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam log"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ye.total})]}),n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-rose-700",children:"Hata logu"}),n.jsx("p",{className:"text-sm font-semibold text-rose-800",children:ye.failed})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Login olaylari"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ye.loginEvents})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yoklama eventleri"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ye.attendanceEvents})]})]}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{const K=!v;_(K),de("info",K?"Canli takip acildi.":"Canli takip kapatildi.")},className:`rounded-lg px-3 py-1.5 text-xs font-semibold ${v?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-700"}`,children:v?"Canli takip: Acik":"Canli takip: Kapali"}),n.jsx("button",{type:"button",onClick:()=>{D.refetch(),de("success","Log listesi manuel yenilendi.")},className:"rounded-lg border border-slate-300 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Yenile"}),n.jsx("button",{type:"button",onClick:oe,className:"rounded-lg border border-slate-300 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Filtreleri temizle"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[n.jsxs("span",{children:["Gosterilen satir: ",H,"-",te," / ",Y]}),n.jsx("button",{type:"button",onClick:()=>m(K=>Math.max(1,K-1)),disabled:d<=1,className:"rounded border border-slate-300 px-2 py-1 disabled:cursor-not-allowed disabled:opacity-50",children:"Onceki"}),n.jsxs("span",{children:["Sayfa ",d," / ",ee]}),n.jsx("button",{type:"button",onClick:()=>m(K=>Math.min(ee,K+1)),disabled:d>=ee,className:"rounded border border-slate-300 px-2 py-1 disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),n.jsxs("form",{className:"mt-3 space-y-3",onSubmit:Se,children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Aksiyon",n.jsx("select",{value:e.action,onChange:K=>s(X=>({...X,action:K.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:Pz.map(K=>n.jsx("option",{value:K.value,children:K.label},K.label))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Varlik turu",n.jsx("input",{type:"text",value:e.entityType,onChange:K=>s(X=>({...X,entityType:K.target.value})),placeholder:"attendance_event / leave",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Varlik ID",n.jsx("input",{type:"text",value:e.entityId,onChange:K=>s(X=>({...X,entityId:K.target.value})),placeholder:"Orn: 42",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Durum",n.jsxs("select",{value:e.success,onChange:K=>s(X=>({...X,success:K.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"all",children:"Tumu"}),n.jsx("option",{value:"success",children:"Basarili"}),n.jsx("option",{value:"failed",children:"Hata"})]})]})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-[1fr_auto_auto]",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Metin ara",n.jsx("input",{type:"text",value:f,onChange:K=>g(K.target.value),placeholder:"Aksiyon, kullanici, IP, detay...",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsx("button",{type:"submit",className:"btn-primary self-end rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),n.jsx("button",{type:"button",onClick:oe,className:"btn-secondary self-end rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]})]})]}),n.jsxs(Ue,{children:[D.isLoading?n.jsx(Gt,{label:"Log kayitlari yukleniyor..."}):null,D.isError?n.jsx(Ot,{message:He(D.error,"Log kayitlari alinamadi.").message}):null,!D.isLoading&&!D.isError?n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_360px]",children:[n.jsxs("section",{className:"overflow-hidden rounded-xl border border-slate-900 bg-[#09131d] text-slate-200 shadow-inner",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-slate-700 bg-slate-900/70 px-3 py-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-rose-400"}),n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-amber-300"}),n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-emerald-400"}),n.jsx("span",{className:"ml-2 text-xs font-semibold text-slate-300",children:"audit-terminal"})]}),n.jsxs("span",{className:"text-[11px] text-slate-400",children:[v?"FOLLOW MODE":"MANUAL MODE","  ",H,"-",te," / ",Y]})]}),n.jsx("form",{onSubmit:Q,className:"border-b border-slate-700 bg-slate-900/50 p-2",children:n.jsxs("label",{className:"flex items-center gap-2 text-xs font-mono text-emerald-300",children:[n.jsx("span",{children:"admin@audit:~$"}),n.jsx("input",{value:S,onChange:K=>w(K.target.value),placeholder:"help, follow on, status failed, action ATTENDANCE_EVENT_CREATED, search duplicate, page 2...",className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1.5 font-mono text-xs text-slate-100 placeholder:text-slate-500 focus:border-cyan-400"})]})}),n.jsxs("div",{ref:q,className:"h-[520px] overflow-y-auto px-3 py-2 font-mono text-xs",children:[T.map(K=>n.jsx("p",{className:`leading-6 ${Qz(K.level)}`,children:K.text},K.id)),J.map(K=>{const X=fe?.id===K.id;return n.jsxs("button",{type:"button",onClick:()=>R(K.id),className:`mt-1 block w-full rounded px-2 py-1 text-left leading-6 ${X?"bg-cyan-900/40 ring-1 ring-cyan-500/40":"hover:bg-slate-800/60"}`,children:[n.jsx("span",{className:K.success?"text-emerald-300":"text-rose-300",children:K.success?"[OK]":"[ERR]"})," ",n.jsx("span",{className:"text-slate-200",children:Kz(K)})]},K.id)}),J.length===0?n.jsx("p",{className:"mt-2 text-amber-300",children:"Filtreye uygun log kaydi bulunamadi."}):null]})]}),n.jsxs("aside",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Secili log detayi"}),fe===null?n.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Listeden bir kayit secin."}):n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Aksiyon"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:Zz(fe.action)}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:fe.action})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-2 text-sm text-slate-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Zaman:"})," ",Bz(fe.ts_utc)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Aktor:"})," ",fe.actor_type,":",fe.actor_id]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Durum:"})," ",Fz(fe.success)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Varlik:"})," ",fe.entity_type??"-",fe.entity_id?` #${fe.entity_id}`:""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"IP:"})," ",fe.ip??"-"]}),n.jsxs("p",{className:"break-all",children:[n.jsx("span",{className:"font-semibold",children:"User Agent:"})," ",fe.user_agent??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Detay ozeti:"})," ",qz(fe.details)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-xs font-semibold text-slate-600",children:"JSON detay"}),n.jsx("pre",{className:"max-h-64 overflow-auto rounded-lg bg-slate-900 p-2 text-[11px] text-slate-100",children:JSON.stringify(fe.details,null,2)})]})]})]})]}):null]})]})}const Vz=Xa({department_id:Kn().int().positive(),daily_minutes_planned:Kn().int().nonnegative(),break_minutes:Kn().int().nonnegative(),grace_minutes:Kn().int().nonnegative()}),$z=Xa({department_id:Kn().int().positive(),weekday:Kn().int().min(0).max(6),is_workday:Cd(),planned_minutes:Kn().int().nonnegative(),break_minutes:Kn().int().nonnegative()}),Yz=Xa({department_id:Kn().int().positive(),name:da().min(1).max(100),start_time_local:da().regex(/^\d{2}:\d{2}$/),end_time_local:da().regex(/^\d{2}:\d{2}$/),break_minutes:Kn().int().nonnegative(),is_active:Cd()}),Dv=[{value:0,label:"Pazartesi"},{value:1,label:"Sali"},{value:2,label:"Carsamba"},{value:3,label:"Persembe"},{value:4,label:"Cuma"},{value:5,label:"Cumartesi"},{value:6,label:"Pazar"}],Jz=[{value:"DEPARTMENT",label:"Tum departman"},{value:"DEPARTMENT_EXCEPT_EMPLOYEE",label:"Departman (calisan haric)"},{value:"ONLY_EMPLOYEE",label:"Sadece secili calisan"}],Xz={DEPARTMENT:"Departman geneli",DEPARTMENT_EXCEPT_EMPLOYEE:"Departman (haric)",ONLY_EMPLOYEE:"Sadece calisan"};function Nf(e){const s=e.trim();if(!s)return null;const l=Number(s);return!Number.isFinite(l)||l<0?null:Math.trunc(l)}function Wz(e,s){const l=e.target_employee_ids&&e.target_employee_ids.length>0?e.target_employee_ids:e.target_employee_id?[e.target_employee_id]:[];return{id:e.id,department_id:e.department_id,target_type:e.target_type,target_employee_id:l.length>0?l[0]:null,target_employee_ids:l,shift_id:e.shift_id,daily_minutes_planned:e.daily_minutes_planned,break_minutes:e.break_minutes,grace_minutes:e.grace_minutes,start_date:e.start_date,end_date:e.end_date,is_locked:e.is_locked,is_active:s,note:e.note}}function eO(){const e=na(),{pushToast:s}=ha(),[l,o]=b.useState(""),[d,m]=b.useState("540"),[f,g]=b.useState("60"),[v,_]=b.useState("5"),[S,w]=b.useState(""),[E,R]=b.useState("0"),[T,A]=b.useState(!0),[O,q]=b.useState("540"),[U,D]=b.useState("60"),[G,Y]=b.useState(""),[ee,H]=b.useState(""),[te,J]=b.useState("10:00"),[fe,ye]=b.useState("18:00"),[de,Se]=b.useState("60"),[oe,le]=b.useState(!0),[Q,K]=b.useState(null),[X,ke]=b.useState(null),[je,z]=b.useState(""),[ne,I]=b.useState("DEPARTMENT"),[ce,ue]=b.useState([]),[Ne,Re]=b.useState(""),[Le,me]=b.useState(""),[Ge,Ye]=b.useState(""),[Tt,ht]=b.useState(""),[M,Oe]=b.useState(""),[mt,Rt]=b.useState(new Date().toISOString().slice(0,10)),[It,Vt]=b.useState(new Date().toISOString().slice(0,10)),[ae,Ee]=b.useState(!1),[Be,Ct]=b.useState(!0),[se,Ke]=b.useState(""),[_t,pn]=b.useState(!0),[Lt,rt]=b.useState(null),Qn=Qe({queryKey:["departments"],queryFn:ji}),_e=Qe({queryKey:["employees","all"],queryFn:()=>Ms({status:"all"})}),tt=Qe({queryKey:["work-rules"],queryFn:lA}),ut=Qe({queryKey:["department-weekly-rules"],queryFn:()=>m_()}),Nt=Qe({queryKey:["department-shifts"],queryFn:()=>vu()}),$t=Qe({queryKey:["schedule-plans","all"],queryFn:()=>yA({active_only:!1})}),Dt=Je({mutationFn:oA,onSuccess:()=>{rt(null),s({variant:"success",title:"Mesai kurali kaydedildi",description:"Departman mesai kurali kaydedildi."}),e.invalidateQueries({queryKey:["work-rules"]})},onError:B=>{const Ze=He(B,"Mesai kurali kaydedilemedi.");rt(Ze.message),s({variant:"error",title:"Mesai kurali kaydedilemedi",description:Ze.message})}}),Xt=Je({mutationFn:h_,onSuccess:()=>{rt(null),s({variant:"success",title:"Haftalik plan kaydedildi",description:"Secilen gun icin departman plani guncellendi."}),e.invalidateQueries({queryKey:["department-weekly-rules"]})},onError:B=>{const Ze=He(B,"Haftalik plan kaydedilemedi.");rt(Ze.message),s({variant:"error",title:"Haftalik plan kaydedilemedi",description:Ze.message})}}),Bn=Je({mutationFn:vd,onSuccess:()=>{rt(null),K(null),H(""),J("10:00"),ye("18:00"),Se("60"),le(!0),s({variant:"success",title:"Vardiya kaydedildi",description:"Departman vardiyasi guncellendi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:B=>{const Ze=He(B,"Vardiya kaydedilemedi.");rt(Ze.message),s({variant:"error",title:"Vardiya kaydedilemedi",description:Ze.message})}}),Pt=Je({mutationFn:f_,onSuccess:()=>{rt(null),Q!==null&&(K(null),H(""),J("10:00"),ye("18:00"),Se("60"),le(!0)),s({variant:"success",title:"Vardiya pasife alindi",description:"Vardiya kaydi pasif duruma getirildi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:B=>{const Ze=He(B,"Vardiya pasife alinamadi.");rt(Ze.message),s({variant:"error",title:"Vardiya pasife alinamadi",description:Ze.message})}}),ct=Je({mutationFn:({shift:B,nextActive:Ze})=>vd({id:B.id,department_id:B.department_id,name:B.name,start_time_local:B.start_time_local,end_time_local:B.end_time_local,break_minutes:B.break_minutes,is_active:Ze}),onSuccess:(B,Ze)=>{rt(null),s({variant:"success",title:Ze.nextActive?"Vardiya aktif edildi":"Vardiya pasife alindi",description:Ze.nextActive?"Vardiya tekrar kullanilabilir duruma getirildi.":"Vardiya kaydi pasif duruma getirildi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:B=>{const Ze=He(B,"Vardiya durumu guncellenemedi.");rt(Ze.message),s({variant:"error",title:"Vardiya durumu guncellenemedi",description:Ze.message})}}),dn=Je({mutationFn:M0,onSuccess:()=>{rt(null),s({variant:"success",title:"Planlama kaydedildi",description:"Departman/calisan plani kaydedildi."}),e.invalidateQueries({queryKey:["schedule-plans"]}),ke(null),ue([]),me(""),Ye(""),ht(""),Oe(""),Ee(!1),Ct(!0),Ke("")},onError:B=>{const Ze=He(B,"Planlama kaydedilemedi.");rt(Ze.message),s({variant:"error",title:"Planlama kaydedilemedi",description:Ze.message})}}),jn=Je({mutationFn:vA,onSuccess:()=>{rt(null),s({variant:"success",title:"Planlama iptal edildi",description:"Plan pasife alindi."}),e.invalidateQueries({queryKey:["schedule-plans"]})},onError:B=>{const Ze=He(B,"Planlama iptal edilemedi.");rt(Ze.message),s({variant:"error",title:"Planlama iptal edilemedi",description:Ze.message})}}),et=Je({mutationFn:B=>M0(Wz(B,!0)),onSuccess:()=>{rt(null),s({variant:"success",title:"Planlama aktif edildi",description:"Plan tekrar aktif olarak kaydedildi."}),e.invalidateQueries({queryKey:["schedule-plans"]})},onError:B=>{const Ze=He(B,"Plan aktif edilemedi.");rt(Ze.message),s({variant:"error",title:"Plan aktif edilemedi",description:Ze.message})}}),kn=b.useMemo(()=>{const B=Number(d),Ze=Number(f),St=Number(v);return{daily:ld(B),breakValue:ld(Ze),grace:ld(St)}},[d,f,v]);if(Qn.isLoading||_e.isLoading||tt.isLoading||ut.isLoading||Nt.isLoading||$t.isLoading)return n.jsx(Gt,{});if(Qn.isError||_e.isError||tt.isError||ut.isError||Nt.isError||$t.isError)return n.jsx(Ot,{message:"Mesai kurali verileri alinamadi."});const gt=Qn.data??[],Wa=_e.data??[],Dn=tt.data??[],Kt=ut.data??[],Gn=Nt.data??[],es=$t.data??[],$=new Map(gt.map(B=>[B.id,B.name])),qe=new Map(Wa.map(B=>[B.id,B.full_name])),xn=new Map(Gn.map(B=>[B.id,B.name])),pt=es.filter(B=>_t||B.is_active),Fe=Number(je),sn=Number.isFinite(Fe)?Gn.filter(B=>B.department_id===Fe):[],yn=Number.isFinite(Fe)?Wa.filter(B=>B.department_id===Fe):[],En=Ne.trim()?yn.filter(B=>{const Ze=Ne.trim().toLowerCase();return B.full_name.toLowerCase().includes(Ze)||String(B.id).includes(Ze.replace("#",""))}):yn,Wt=()=>{ke(null),I("DEPARTMENT"),ue([]),Re(""),me(""),Ye(""),ht(""),Oe(""),Rt(new Date().toISOString().slice(0,10)),Vt(new Date().toISOString().slice(0,10)),Ee(!1),Ct(!0),Ke("")},hn=B=>{const Ze=B.target_employee_ids&&B.target_employee_ids.length>0?B.target_employee_ids:B.target_employee_id?[B.target_employee_id]:[];ke(B.id),z(String(B.department_id)),I(B.target_type),ue(Ze),Re(""),me(B.shift_id?String(B.shift_id):""),Ye(B.daily_minutes_planned!==null?String(B.daily_minutes_planned):""),ht(B.break_minutes!==null?String(B.break_minutes):""),Oe(B.grace_minutes!==null?String(B.grace_minutes):""),Rt(B.start_date),Vt(B.end_date),Ee(B.is_locked),Ct(B.is_active),Ke(B.note??"")},aa=B=>{B.preventDefault(),rt(null);const Ze=Vz.safeParse({department_id:l,daily_minutes_planned:d,break_minutes:f,grace_minutes:v});if(!Ze.success){const St=Ze.error.issues[0]?.message??"Mesai kurali formunu kontrol edin.";rt(St),s({variant:"error",title:"Form hatasi",description:St});return}Dt.mutate(Ze.data)},F=B=>{B.preventDefault(),rt(null);const Ze=$z.safeParse({department_id:S,weekday:E,is_workday:T,planned_minutes:O,break_minutes:U});if(!Ze.success){const St=Ze.error.issues[0]?.message??"Haftalik plan formunu kontrol edin.";rt(St),s({variant:"error",title:"Form hatasi",description:St});return}Xt.mutate(Ze.data)},Pe=B=>{B.preventDefault(),rt(null);const Ze=Yz.safeParse({department_id:G,name:ee.trim(),start_time_local:te,end_time_local:fe,break_minutes:de,is_active:oe});if(!Ze.success){const St=Ze.error.issues[0]?.message??"Vardiya formunu kontrol edin.";rt(St),s({variant:"error",title:"Form hatasi",description:St});return}Bn.mutate({id:Q??void 0,...Ze.data})},dt=B=>{K(B.id),Y(String(B.department_id)),H(B.name),J(B.start_time_local),ye(B.end_time_local),Se(String(B.break_minutes)),le(B.is_active),rt(null)},Vn=()=>{K(null),H(""),J("10:00"),ye("18:00"),Se("60"),le(!0),rt(null)},Tn=B=>{B.preventDefault(),rt(null);const Ze=Number(je);if(!Number.isFinite(Ze)||Ze<=0){rt("Planlama icin departman secmelisiniz.");return}if(!mt||!It){rt("Baslangic ve bitis tarihi zorunludur.");return}if(mt>It){rt("Baslangic tarihi bitis tarihinden buyuk olamaz.");return}const St=ne==="DEPARTMENT"?[]:[...ce];if(ne!=="DEPARTMENT"&&St.length===0){rt("Secilen hedef tipi icin en az bir calisan secmelisiniz.");return}const Un=Le?Number(Le):null,ja=Nf(Ge),vn=Nf(Tt),rn=Nf(M);if(!Un&&ja===null&&vn===null&&rn===null){rt("En az bir plan degeri girmelisiniz (vardiya veya dakika alanlari).");return}dn.mutate({id:X??void 0,department_id:Ze,target_type:ne,target_employee_id:St.length>0?St[0]:null,target_employee_ids:St,shift_id:Un,daily_minutes_planned:ja,break_minutes:vn,grace_minutes:rn,start_date:mt,end_date:It,is_locked:ae,is_active:Be,note:se.trim()||null})};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xn,{title:"Mesai Kurallari",description:"Departman bazinda gunluk plan, haftalik gun davranisi ve coklu vardiya tanimlarini yonetin."}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Temel Departman Kurali"}),n.jsxs("form",{onSubmit:aa,className:"mt-3 grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:l,onChange:B=>o(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),gt.map(B=>n.jsx("option",{value:B.id,children:B.name},B.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Planlanan Gunluk Dakika",n.jsx("input",{value:d,onChange:B=>m(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakikasi",n.jsx("input",{value:f,onChange:B=>g(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gecikme Toleransi (Dakika)",n.jsx("input",{value:v,onChange:B=>_(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("div",{className:"md:col-span-4 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:["Onizleme: Planlanan ",kn.daily," | Mola ",kn.breakValue," | Tolerans ",kn.grace]}),n.jsx("div",{className:"md:col-span-4",children:n.jsx("button",{type:"submit",disabled:Dt.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Dt.isPending?"Kaydediliyor...":"Kurali Kaydet"})})]})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Haftalik Gun Plani"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ornek: Cumartesi 5 saat, Pazar calisma yok gibi farkli gun davranislarini buradan tanimlayin."}),n.jsxs("form",{onSubmit:F,className:"mt-3 grid gap-3 md:grid-cols-5",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:S,onChange:B=>w(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),gt.map(B=>n.jsx("option",{value:B.id,children:B.name},B.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gun",n.jsx("select",{value:E,onChange:B=>R(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:Dv.map(B=>n.jsx("option",{value:B.value,children:B.label},B.value))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Planlanan Dakika",n.jsx("input",{value:O,onChange:B=>q(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakikasi",n.jsx("input",{value:U,onChange:B=>D(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:T,onChange:B=>A(B.target.checked)}),"Calisma Gunu"]}),n.jsx("div",{className:"md:col-span-5",children:n.jsx("button",{type:"submit",disabled:Xt.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Xt.isPending?"Kaydediliyor...":"Gunu Kaydet"})})]}),n.jsx("div",{className:"mt-4 list-scroll-area",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Gun"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Planlanan Sure"}),n.jsx("th",{className:"py-2",children:"Mola"})]})}),n.jsx("tbody",{children:Kt.map(B=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:$.get(B.department_id)??B.department_id}),n.jsx("td",{className:"py-2",children:Dv.find(Ze=>Ze.value===B.weekday)?.label??B.weekday}),n.jsx("td",{className:"py-2",children:B.is_workday?"Calisma":"Off"}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:B.planned_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:B.break_minutes})})]},B.id))})]})})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Departman Vardiyalari"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ornek: Stant icin 10:00-18:00 ve 14:00-22:00 vardiyalarini ayri ayri tanimlayabilirsiniz."}),Q?n.jsxs("p",{className:"mt-2 text-xs font-medium text-brand-700",children:["Duzenleme modu: #",Q]}):null,n.jsxs("form",{onSubmit:Pe,className:"mt-3 grid gap-3 md:grid-cols-6",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:G,onChange:B=>Y(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),gt.map(B=>n.jsx("option",{value:B.id,children:B.name},B.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya Adi",n.jsx("input",{value:ee,onChange:B=>H(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Sabah 10-18"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Baslangic",n.jsx("input",{type:"time",value:te,onChange:B=>J(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bitis",n.jsx("input",{type:"time",value:fe,onChange:B=>ye(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakikasi",n.jsx("input",{value:de,onChange:B=>Se(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:oe,onChange:B=>le(B.target.checked)}),"Aktif"]}),n.jsx("div",{className:"md:col-span-6",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("button",{type:"submit",disabled:Bn.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Bn.isPending?"Kaydediliyor...":Q?"Vardiya Guncelle":"Vardiya Kaydet"}),Q?n.jsx("button",{type:"button",onClick:Vn,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100",children:"Vazgec"}):null]})})]}),n.jsx("div",{className:"mt-4 list-scroll-area",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Saat"}),n.jsx("th",{className:"py-2",children:"Mola"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2 text-right",children:"Aksiyon"})]})}),n.jsx("tbody",{children:Gn.map(B=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:$.get(B.department_id)??B.department_id}),n.jsx("td",{className:"py-2",children:B.name}),n.jsxs("td",{className:"py-2",children:[B.start_time_local," - ",B.end_time_local]}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:B.break_minutes})}),n.jsx("td",{className:"py-2",children:B.is_active?"Aktif":"Pasif"}),n.jsx("td",{className:"py-2 text-right",children:n.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>dt(B),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Duzenle"}),B.is_active?n.jsx("button",{type:"button",disabled:Pt.isPending||ct.isPending,onClick:()=>{window.confirm("Bu vardiya pasife alinsin mi?")&&Pt.mutate(B.id)},className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:"Pasife Al"}):n.jsx("button",{type:"button",disabled:ct.isPending||Pt.isPending,onClick:()=>ct.mutate({shift:B,nextActive:!0}),className:"rounded-lg border border-emerald-300 px-3 py-1 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:"Aktif Et"})]})})]},B.id))})]})})]}),n.jsxs(Ue,{children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Ileri Planlama (Departman/Calisan)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Gelecek tarihli vardiya ve sure kurali tanimlayin. Planlar duzenlenebilir, iptal edilebilir, tekrar aktif edilebilir."})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:_t,onChange:B=>pn(B.target.checked)}),"Pasif planlari goster"]})]}),n.jsxs("form",{onSubmit:Tn,className:"mt-4 grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:je,onChange:B=>{z(B.target.value),ue([]),me("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),gt.map(B=>n.jsx("option",{value:B.id,children:B.name},B.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Hedef Tipi",n.jsx("select",{value:ne,onChange:B=>{const Ze=B.target.value;I(Ze),Ze==="DEPARTMENT"&&ue([])},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:Jz.map(B=>n.jsx("option",{value:B.value,children:B.label},B.value))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Calisanlar (gerekliyse)",n.jsx("input",{type:"text",value:Ne,onChange:B=>Re(B.target.value),disabled:ne==="DEPARTMENT",placeholder:"Calisan adi veya ID ile ara...",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 disabled:bg-slate-100"}),n.jsx("select",{multiple:!0,value:ce.map(String),onChange:B=>{const Ze=Array.from(B.target.selectedOptions).map(St=>Number(St.value));ue(Ze.filter(St=>Number.isFinite(St)&&St>0))},disabled:ne==="DEPARTMENT",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 disabled:bg-slate-100",children:En.map(B=>n.jsxs("option",{value:B.id,children:["#",B.id," - ",B.full_name]},B.id))}),n.jsx("span",{className:"mt-1 block text-xs text-slate-500",children:"Ctrl/Cmd ile birden fazla calisan secilebilir. Binlerce kayitta once arama yapin."})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya (opsiyonel)",n.jsxs("select",{value:Le,onChange:B=>me(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),sn.map(B=>n.jsxs("option",{value:B.id,children:[B.name," (",B.start_time_local," - ",B.end_time_local,")"]},B.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gunluk Dakika (ops.)",n.jsx("input",{value:Ge,onChange:B=>Ye(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakika (ops.)",n.jsx("input",{value:Tt,onChange:B=>ht(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Tolerans Dakika (ops.)",n.jsx("input",{value:M,onChange:B=>Oe(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Baslangic Tarihi",n.jsx("input",{type:"date",value:mt,onChange:B=>Rt(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bitis Tarihi",n.jsx("input",{type:"date",value:It,onChange:B=>Vt(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:ae,onChange:B=>Ee(B.target.checked)}),"Vardiya kilitli"]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:Be,onChange:B=>Ct(B.target.checked)}),"Aktif"]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Not",n.jsx("input",{value:se,onChange:B=>Ke(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("div",{className:"md:col-span-4 flex flex-wrap gap-2",children:[n.jsx("button",{type:"submit",disabled:dn.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:dn.isPending?"Kaydediliyor...":X?"Plani Guncelle":"Plan Olustur"}),n.jsx("button",{type:"button",onClick:Wt,className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Formu Temizle"})]})]}),n.jsx("div",{className:"mt-4 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Hedef"}),n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Plan/Mola"}),n.jsx("th",{className:"py-2",children:"Tarih Araligi"}),n.jsx("th",{className:"py-2",children:"Kilit"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Aksiyon"})]})}),n.jsx("tbody",{children:pt.map(B=>{const St=(B.target_employee_ids&&B.target_employee_ids.length>0?B.target_employee_ids:B.target_employee_id?[B.target_employee_id]:[]).map(Un=>qe.get(Un)??`#${Un}`);return n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:$.get(B.department_id)??B.department_id}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:Xz[B.target_type]}),St.length>0?n.jsx("span",{className:"text-xs text-slate-500",children:St.join(", ")}):null]})}),n.jsx("td",{className:"py-2",children:B.shift_id?xn.get(B.shift_id)??`#${B.shift_id}`:"-"}),n.jsxs("td",{className:"py-2 text-xs text-slate-700",children:[n.jsxs("div",{children:["Plan: ",B.daily_minutes_planned!==null?`${B.daily_minutes_planned} dk`:"-"]}),n.jsxs("div",{children:["Mola: ",B.break_minutes!==null?`${B.break_minutes} dk`:"-"]}),n.jsxs("div",{children:["Tolerans: ",B.grace_minutes!==null?`${B.grace_minutes} dk`:"-"]})]}),n.jsxs("td",{className:"py-2",children:[B.start_date," - ",B.end_date]}),n.jsx("td",{className:"py-2",children:B.is_locked?"Kilitli":"Serbest"}),n.jsx("td",{className:"py-2",children:B.is_active?"Aktif":"Pasif"}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>hn(B),className:"rounded-lg border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:"Duzenle"}),B.is_active?n.jsx("button",{type:"button",onClick:()=>jn.mutate(B.id),disabled:jn.isPending,className:"rounded-lg border border-rose-300 px-2 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:"Iptal Et"}):n.jsx("button",{type:"button",onClick:()=>et.mutate(B),disabled:et.isPending,className:"rounded-lg border border-emerald-300 px-2 py-1 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:"Aktif Et"})]})})]},B.id)})})]})})]}),n.jsxs(Ue,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Mevcut Temel Kurallar"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Planlanan Gunluk Sure"}),n.jsx("th",{className:"py-2",children:"Mola Suresi"}),n.jsx("th",{className:"py-2",children:"Tolerans"})]})}),n.jsx("tbody",{children:Dn.map(B=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:$.get(B.department_id)??B.department_id}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:B.daily_minutes_planned})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:B.break_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:B.grace_minutes})})]},B.id))})]})})]}),Lt?n.jsx("p",{className:"form-validation",children:Lt}):null]})}function tO(){return n.jsxs(FS,{children:[n.jsx(Jt,{element:n.jsx(_3,{}),children:n.jsx(Jt,{path:"/login",element:n.jsx(rz,{})})}),n.jsx(Jt,{path:"/device-claim",element:n.jsx(j3,{})}),n.jsx(Jt,{path:"/archive-download",element:n.jsx(eM,{})}),n.jsx(Jt,{path:"/attendance-extra-checkin-approval",element:n.jsx(sM,{})}),n.jsx(Jt,{element:n.jsx(b3,{}),children:n.jsxs(Jt,{element:n.jsx(v3,{}),children:[n.jsx(Jt,{path:"/",element:n.jsx(dd,{to:"/management-console",replace:!0})}),n.jsx(Jt,{path:"/management-console",element:n.jsx(yz,{})}),n.jsx(Jt,{path:"/control-room",element:n.jsx(dd,{to:"/management-console?focus=matrix",replace:!0})}),n.jsx(Jt,{path:"/dashboard",element:n.jsx(H3,{})}),n.jsx(Jt,{path:"/regions",element:n.jsx(Ez,{})}),n.jsx(Jt,{path:"/departments",element:n.jsx(G3,{})}),n.jsx(Jt,{path:"/employees",element:n.jsx(tz,{})}),n.jsx(Jt,{path:"/employees/:id",element:n.jsx(KM,{})}),n.jsx(Jt,{path:"/quick-setup",element:n.jsx(kz,{})}),n.jsx(Jt,{path:"/work-rules",element:n.jsx(eO,{})}),n.jsx(Jt,{path:"/attendance-events",element:n.jsx(F3,{})}),n.jsx(Jt,{path:"/devices",element:n.jsx($3,{})}),n.jsx(Jt,{path:"/compliance-settings",element:n.jsx(Y3,{})}),n.jsx(Jt,{path:"/leaves",element:n.jsx(az,{})}),n.jsx(Jt,{path:"/qr-kodlar",element:n.jsx(wz,{})}),n.jsx(Jt,{path:"/reports/employee-monthly",element:n.jsx(XM,{})}),n.jsx(Jt,{path:"/reports/department-summary",element:n.jsx(Q3,{})}),n.jsx(Jt,{path:"/reports/excel-export",element:n.jsx(bz,{})}),n.jsx(Jt,{path:"/notifications",element:n.jsx(Lz,{})}),n.jsx(Jt,{path:"/audit-logs",element:n.jsx(Gz,{})}),n.jsx(Jt,{path:"/admin-users",element:n.jsx(AM,{})})]})}),n.jsx(Jt,{path:"*",element:n.jsx(vz,{})})]})}const nO=new Cj({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});ij.createRoot(document.getElementById("root")).render(n.jsx(JN.StrictMode,{children:n.jsx(Aj,{client:nO,children:n.jsx(mw,{basename:"/admin-panel/",children:n.jsx(M3,{children:n.jsx(f3,{children:n.jsx(tO,{})})})})})}));typeof window<"u"&&"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"}).catch(()=>{})});
