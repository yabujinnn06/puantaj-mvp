(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const f of m.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function l(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(d){if(d.ep)return;d.ep=!0;const m=l(d);fetch(d.href,m)}})();function xd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _h={exports:{}},Qo={};var hy;function KN(){if(hy)return Qo;hy=1;var e=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function l(o,d,m){var f=null;if(m!==void 0&&(f=""+m),d.key!==void 0&&(f=""+d.key),"key"in d){m={};for(var g in d)g!=="key"&&(m[g]=d[g])}else m=d;return d=m.ref,{$$typeof:e,type:o,key:f,ref:d!==void 0?d:null,props:m}}return Qo.Fragment=s,Qo.jsx=l,Qo.jsxs=l,Qo}var fy;function GN(){return fy||(fy=1,_h.exports=KN()),_h.exports}var n=GN(),Nh={exports:{}},ht={};var py;function QN(){if(py)return ht;py=1;var e=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),T=Symbol.iterator;function O(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,z={};function U(D,te,P){this.props=D,this.context=te,this.refs=z,this.updater=P||k}U.prototype.isReactComponent={},U.prototype.setState=function(D,te){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,te,"setState")},U.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function I(){}I.prototype=U.prototype;function R(D,te,P){this.props=D,this.context=te,this.refs=z,this.updater=P||k}var K=R.prototype=new I;K.constructor=R,A(K,U.prototype),K.isPureReactComponent=!0;var V=Array.isArray;function ee(){}var q={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function $(D,te,P){var ce=P.ref;return{$$typeof:e,type:D,key:te,ref:ce!==void 0?ce:null,props:P}}function ie(D,te){return $(D.type,te,D.props)}function fe(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function ue(D){var te={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(P){return te[P]})}var je=/\/+/g;function X(D,te){return typeof D=="object"&&D!==null&&D.key!=null?ue(""+D.key):te.toString(36)}function oe(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(ee,ee):(D.status="pending",D.then(function(te){D.status==="pending"&&(D.status="fulfilled",D.value=te)},function(te){D.status==="pending"&&(D.status="rejected",D.reason=te)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Z(D,te,P,ce,de){var Ee=typeof D;(Ee==="undefined"||Ee==="boolean")&&(D=null);var De=!1;if(D===null)De=!0;else switch(Ee){case"bigint":case"string":case"number":De=!0;break;case"object":switch(D.$$typeof){case e:case s:De=!0;break;case S:return De=D._init,Z(De(D._payload),te,P,ce,de)}}if(De)return de=de(D),De=ce===""?"."+X(D,0):ce,V(de)?(P="",De!=null&&(P=De.replace(je,"$&/")+"/"),Z(de,te,P,"",function(Ke){return Ke})):de!=null&&(fe(de)&&(de=ie(de,P+(de.key==null||D&&D.key===de.key?"":(""+de.key).replace(je,"$&/")+"/")+De)),te.push(de)),1;De=0;var Ge=ce===""?".":ce+":";if(V(D))for(var pe=0;pe<D.length;pe++)ce=D[pe],Ee=Ge+X(ce,pe),De+=Z(ce,te,P,Ee,de);else if(pe=O(D),typeof pe=="function")for(D=pe.call(D),pe=0;!(ce=D.next()).done;)ce=ce.value,Ee=Ge+X(ce,pe++),De+=Z(ce,te,P,Ee,de);else if(Ee==="object"){if(typeof D.then=="function")return Z(oe(D),te,P,ce,de);throw te=String(D),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return De}function M(D,te,P){if(D==null)return D;var ce=[],de=0;return Z(D,ce,"","",function(Ee){return te.call(P,Ee,de++)}),ce}function ne(D){if(D._status===-1){var te=D._result;te=te(),te.then(function(P){(D._status===0||D._status===-1)&&(D._status=1,D._result=P)},function(P){(D._status===0||D._status===-1)&&(D._status=2,D._result=P)}),D._status===-1&&(D._status=0,D._result=te)}if(D._status===1)return D._result.default;throw D._result}var Se=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},be={map:M,forEach:function(D,te,P){M(D,function(){te.apply(this,arguments)},P)},count:function(D){var te=0;return M(D,function(){te++}),te},toArray:function(D){return M(D,function(te){return te})||[]},only:function(D){if(!fe(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return ht.Activity=w,ht.Children=be,ht.Component=U,ht.Fragment=l,ht.Profiler=d,ht.PureComponent=R,ht.StrictMode=o,ht.Suspense=v,ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,ht.__COMPILER_RUNTIME={__proto__:null,c:function(D){return q.H.useMemoCache(D)}},ht.cache=function(D){return function(){return D.apply(null,arguments)}},ht.cacheSignal=function(){return null},ht.cloneElement=function(D,te,P){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ce=A({},D.props),de=D.key;if(te!=null)for(Ee in te.key!==void 0&&(de=""+te.key),te)!Y.call(te,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&te.ref===void 0||(ce[Ee]=te[Ee]);var Ee=arguments.length-2;if(Ee===1)ce.children=P;else if(1<Ee){for(var De=Array(Ee),Ge=0;Ge<Ee;Ge++)De[Ge]=arguments[Ge+2];ce.children=De}return $(D.type,de,ce)},ht.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:m,_context:D},D},ht.createElement=function(D,te,P){var ce,de={},Ee=null;if(te!=null)for(ce in te.key!==void 0&&(Ee=""+te.key),te)Y.call(te,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(de[ce]=te[ce]);var De=arguments.length-2;if(De===1)de.children=P;else if(1<De){for(var Ge=Array(De),pe=0;pe<De;pe++)Ge[pe]=arguments[pe+2];de.children=Ge}if(D&&D.defaultProps)for(ce in De=D.defaultProps,De)de[ce]===void 0&&(de[ce]=De[ce]);return $(D,Ee,de)},ht.createRef=function(){return{current:null}},ht.forwardRef=function(D){return{$$typeof:g,render:D}},ht.isValidElement=fe,ht.lazy=function(D){return{$$typeof:S,_payload:{_status:-1,_result:D},_init:ne}},ht.memo=function(D,te){return{$$typeof:_,type:D,compare:te===void 0?null:te}},ht.startTransition=function(D){var te=q.T,P={};q.T=P;try{var ce=D(),de=q.S;de!==null&&de(P,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ee,Se)}catch(Ee){Se(Ee)}finally{te!==null&&P.types!==null&&(te.types=P.types),q.T=te}},ht.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},ht.use=function(D){return q.H.use(D)},ht.useActionState=function(D,te,P){return q.H.useActionState(D,te,P)},ht.useCallback=function(D,te){return q.H.useCallback(D,te)},ht.useContext=function(D){return q.H.useContext(D)},ht.useDebugValue=function(){},ht.useDeferredValue=function(D,te){return q.H.useDeferredValue(D,te)},ht.useEffect=function(D,te){return q.H.useEffect(D,te)},ht.useEffectEvent=function(D){return q.H.useEffectEvent(D)},ht.useId=function(){return q.H.useId()},ht.useImperativeHandle=function(D,te,P){return q.H.useImperativeHandle(D,te,P)},ht.useInsertionEffect=function(D,te){return q.H.useInsertionEffect(D,te)},ht.useLayoutEffect=function(D,te){return q.H.useLayoutEffect(D,te)},ht.useMemo=function(D,te){return q.H.useMemo(D,te)},ht.useOptimistic=function(D,te){return q.H.useOptimistic(D,te)},ht.useReducer=function(D,te,P){return q.H.useReducer(D,te,P)},ht.useRef=function(D){return q.H.useRef(D)},ht.useState=function(D){return q.H.useState(D)},ht.useSyncExternalStore=function(D,te,P){return q.H.useSyncExternalStore(D,te,P)},ht.useTransition=function(){return q.H.useTransition()},ht.version="19.2.4",ht}var xy;function Uf(){return xy||(xy=1,Nh.exports=QN()),Nh.exports}var b=Uf();const VN=xd(b);var jh={exports:{}},Vo={},Sh={exports:{}},wh={};var gy;function YN(){return gy||(gy=1,(function(e){function s(Z,M){var ne=Z.length;Z.push(M);e:for(;0<ne;){var Se=ne-1>>>1,be=Z[Se];if(0<d(be,M))Z[Se]=M,Z[ne]=be,ne=Se;else break e}}function l(Z){return Z.length===0?null:Z[0]}function o(Z){if(Z.length===0)return null;var M=Z[0],ne=Z.pop();if(ne!==M){Z[0]=ne;e:for(var Se=0,be=Z.length,D=be>>>1;Se<D;){var te=2*(Se+1)-1,P=Z[te],ce=te+1,de=Z[ce];if(0>d(P,ne))ce<be&&0>d(de,P)?(Z[Se]=de,Z[ce]=ne,Se=ce):(Z[Se]=P,Z[te]=ne,Se=te);else if(ce<be&&0>d(de,ne))Z[Se]=de,Z[ce]=ne,Se=ce;else break e}}return M}function d(Z,M){var ne=Z.sortIndex-M.sortIndex;return ne!==0?ne:Z.id-M.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;e.unstable_now=function(){return m.now()}}else{var f=Date,g=f.now();e.unstable_now=function(){return f.now()-g}}var v=[],_=[],S=1,w=null,T=3,O=!1,k=!1,A=!1,z=!1,U=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function K(Z){for(var M=l(_);M!==null;){if(M.callback===null)o(_);else if(M.startTime<=Z)o(_),M.sortIndex=M.expirationTime,s(v,M);else break;M=l(_)}}function V(Z){if(A=!1,K(Z),!k)if(l(v)!==null)k=!0,ee||(ee=!0,ue());else{var M=l(_);M!==null&&oe(V,M.startTime-Z)}}var ee=!1,q=-1,Y=5,$=-1;function ie(){return z?!0:!(e.unstable_now()-$<Y)}function fe(){if(z=!1,ee){var Z=e.unstable_now();$=Z;var M=!0;try{e:{k=!1,A&&(A=!1,I(q),q=-1),O=!0;var ne=T;try{t:{for(K(Z),w=l(v);w!==null&&!(w.expirationTime>Z&&ie());){var Se=w.callback;if(typeof Se=="function"){w.callback=null,T=w.priorityLevel;var be=Se(w.expirationTime<=Z);if(Z=e.unstable_now(),typeof be=="function"){w.callback=be,K(Z),M=!0;break t}w===l(v)&&o(v),K(Z)}else o(v);w=l(v)}if(w!==null)M=!0;else{var D=l(_);D!==null&&oe(V,D.startTime-Z),M=!1}}break e}finally{w=null,T=ne,O=!1}M=void 0}}finally{M?ue():ee=!1}}}var ue;if(typeof R=="function")ue=function(){R(fe)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,X=je.port2;je.port1.onmessage=fe,ue=function(){X.postMessage(null)}}else ue=function(){U(fe,0)};function oe(Z,M){q=U(function(){Z(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_next=function(Z){switch(T){case 1:case 2:case 3:var M=3;break;default:M=T}var ne=T;T=M;try{return Z()}finally{T=ne}},e.unstable_requestPaint=function(){z=!0},e.unstable_runWithPriority=function(Z,M){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ne=T;T=Z;try{return M()}finally{T=ne}},e.unstable_scheduleCallback=function(Z,M,ne){var Se=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Se+ne:Se):ne=Se,Z){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ne+be,Z={id:S++,callback:M,priorityLevel:Z,startTime:ne,expirationTime:be,sortIndex:-1},ne>Se?(Z.sortIndex=ne,s(_,Z),l(v)===null&&Z===l(_)&&(A?(I(q),q=-1):A=!0,oe(V,ne-Se))):(Z.sortIndex=be,s(v,Z),k||O||(k=!0,ee||(ee=!0,ue()))),Z},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function(Z){var M=T;return function(){var ne=T;T=M;try{return Z.apply(this,arguments)}finally{T=ne}}}})(wh)),wh}var yy;function $N(){return yy||(yy=1,Sh.exports=YN()),Sh.exports}var Eh={exports:{}},ma={};var vy;function XN(){if(vy)return ma;vy=1;var e=Uf();function s(v){var _="https://react.dev/errors/"+v;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var o={d:{f:l,r:function(){throw Error(s(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},d=Symbol.for("react.portal");function m(v,_,S){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:w==null?null:""+w,children:v,containerInfo:_,implementation:S}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,_){if(v==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return ma.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,ma.createPortal=function(v,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(s(299));return m(v,_,null,S)},ma.flushSync=function(v){var _=f.T,S=o.p;try{if(f.T=null,o.p=2,v)return v()}finally{f.T=_,o.p=S,o.d.f()}},ma.preconnect=function(v,_){typeof v=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,o.d.C(v,_))},ma.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},ma.preinit=function(v,_){if(typeof v=="string"&&_&&typeof _.as=="string"){var S=_.as,w=g(S,_.crossOrigin),T=typeof _.integrity=="string"?_.integrity:void 0,O=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?o.d.S(v,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:O}):S==="script"&&o.d.X(v,{crossOrigin:w,integrity:T,fetchPriority:O,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},ma.preinitModule=function(v,_){if(typeof v=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=g(_.as,_.crossOrigin);o.d.M(v,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&o.d.M(v)},ma.preload=function(v,_){if(typeof v=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,w=g(S,_.crossOrigin);o.d.L(v,S,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},ma.preloadModule=function(v,_){if(typeof v=="string")if(_){var S=g(_.as,_.crossOrigin);o.d.m(v,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else o.d.m(v)},ma.requestFormReset=function(v){o.d.r(v)},ma.unstable_batchedUpdates=function(v,_){return v(_)},ma.useFormState=function(v,_,S){return f.H.useFormState(v,_,S)},ma.useFormStatus=function(){return f.H.useHostTransitionStatus()},ma.version="19.2.4",ma}var by;function JN(){if(by)return Eh.exports;by=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(s){console.error(s)}}return e(),Eh.exports=XN(),Eh.exports}var _y;function WN(){if(_y)return Vo;_y=1;var e=$N(),s=Uf(),l=JN();function o(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var a=t,r=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(r=a.return),t=a.return;while(t)}return a.tag===3?r:null}function f(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function v(t){if(m(t)!==t)throw Error(o(188))}function _(t){var a=t.alternate;if(!a){if(a=m(t),a===null)throw Error(o(188));return a!==t?null:t}for(var r=t,u=a;;){var p=r.return;if(p===null)break;var x=p.alternate;if(x===null){if(u=p.return,u!==null){r=u;continue}break}if(p.child===x.child){for(x=p.child;x;){if(x===r)return v(p),t;if(x===u)return v(p),a;x=x.sibling}throw Error(o(188))}if(r.return!==u.return)r=p,u=x;else{for(var j=!1,C=p.child;C;){if(C===r){j=!0,r=p,u=x;break}if(C===u){j=!0,u=p,r=x;break}C=C.sibling}if(!j){for(C=x.child;C;){if(C===r){j=!0,r=x,u=p;break}if(C===u){j=!0,u=x,r=p;break}C=C.sibling}if(!j)throw Error(o(189))}}if(r.alternate!==u)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?t:a}function S(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=S(t),a!==null)return a;t=t.sibling}return null}var w=Object.assign,T=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),R=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),fe=Symbol.iterator;function ue(t){return t===null||typeof t!="object"?null:(t=fe&&t[fe]||t["@@iterator"],typeof t=="function"?t:null)}var je=Symbol.for("react.client.reference");function X(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===je?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case A:return"Fragment";case U:return"Profiler";case z:return"StrictMode";case V:return"Suspense";case ee:return"SuspenseList";case $:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case R:return t.displayName||"Context";case I:return(t._context.displayName||"Context")+".Consumer";case K:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case q:return a=t.displayName||null,a!==null?a:X(t.type)||"Memo";case Y:a=t._payload,t=t._init;try{return X(t(a))}catch{}}return null}var oe=Array.isArray,Z=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},Se=[],be=-1;function D(t){return{current:t}}function te(t){0>be||(t.current=Se[be],Se[be]=null,be--)}function P(t,a){be++,Se[be]=t.current,t.current=a}var ce=D(null),de=D(null),Ee=D(null),De=D(null);function Ge(t,a){switch(P(Ee,a),P(de,t),P(ce,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Lg(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Lg(a),t=Pg(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}te(ce),P(ce,t)}function pe(){te(ce),te(de),te(Ee)}function Ke(t){t.memoizedState!==null&&P(De,t);var a=ce.current,r=Pg(a,t.type);a!==r&&(P(de,t),P(ce,r))}function _e(t){de.current===t&&(te(ce),te(de)),De.current===t&&(te(De),Zo._currentValue=ne)}var lt,dt;function ze(t){if(lt===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);lt=a&&a[1]||"",dt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lt+t+dt}var ot=!1;function bt(t,a){if(!t||ot)return"";ot=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var Me=function(){throw Error()};if(Object.defineProperty(Me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Me,[])}catch(ye){var ge=ye}Reflect.construct(t,[],Me)}else{try{Me.call()}catch(ye){ge=ye}t.call(Me.prototype)}}else{try{throw Error()}catch(ye){ge=ye}(Me=t())&&typeof Me.catch=="function"&&Me.catch(function(){})}}catch(ye){if(ye&&ge&&typeof ye.stack=="string")return[ye.stack,ge.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=u.DetermineComponentFrameRoot(),j=x[0],C=x[1];if(j&&C){var G=j.split(`
`),he=C.split(`
`);for(p=u=0;u<G.length&&!G[u].includes("DetermineComponentFrameRoot");)u++;for(;p<he.length&&!he[p].includes("DetermineComponentFrameRoot");)p++;if(u===G.length||p===he.length)for(u=G.length-1,p=he.length-1;1<=u&&0<=p&&G[u]!==he[p];)p--;for(;1<=u&&0<=p;u--,p--)if(G[u]!==he[p]){if(u!==1||p!==1)do if(u--,p--,0>p||G[u]!==he[p]){var we=`
`+G[u].replace(" at new "," at ");return t.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",t.displayName)),we}while(1<=u&&0<=p);break}}}finally{ot=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?ze(r):""}function It(t,a){switch(t.tag){case 26:case 27:case 5:return ze(t.type);case 16:return ze("Lazy");case 13:return t.child!==a&&a!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return bt(t.type,!1);case 11:return bt(t.type.render,!1);case 1:return bt(t.type,!0);case 31:return ze("Activity");default:return""}}function Bt(t){try{var a="",r=null;do a+=It(t,r),r=t,t=t.return;while(t);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var rn=Object.prototype.hasOwnProperty,ae=e.unstable_scheduleCallback,ke=e.unstable_cancelCallback,Be=e.unstable_shouldYield,at=e.unstable_requestPaint,se=e.unstable_now,Ie=e.unstable_getCurrentPriorityLevel,_t=e.unstable_ImmediatePriority,Dt=e.unstable_UserBlockingPriority,Rt=e.unstable_NormalPriority,ft=e.unstable_LowPriority,Ut=e.unstable_IdlePriority,Ne=e.log,Je=e.unstable_setDisableYieldValue,nt=null,Nt=null;function Ft(t){if(typeof Ne=="function"&&Je(t),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(nt,t)}catch{}}var jt=Math.clz32?Math.clz32:ln,fn=Math.log,Jn=Math.LN2;function ln(t){return t>>>=0,t===0?32:31-(fn(t)/Jn|0)|0}var xt=256,Vt=262144,Tn=4194304;function Rn(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Cn(t,a,r){var u=t.pendingLanes;if(u===0)return 0;var p=0,x=t.suspendedLanes,j=t.pingedLanes;t=t.warmLanes;var C=u&134217727;return C!==0?(u=C&~x,u!==0?p=Rn(u):(j&=C,j!==0?p=Rn(j):r||(r=C&~t,r!==0&&(p=Rn(r))))):(C=u&~x,C!==0?p=Rn(C):j!==0?p=Rn(j):r||(r=u&~t,r!==0&&(p=Rn(r)))),p===0?0:a!==0&&a!==p&&(a&x)===0&&(x=p&-p,r=a&-a,x>=r||x===32&&(r&4194048)!==0)?a:p}function Lt(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function va(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function An(){var t=Tn;return Tn<<=1,(Tn&62914560)===0&&(Tn=4194304),t}function Hn(t){for(var a=[],r=0;31>r;r++)a.push(t);return a}function Mn(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function W(t,a,r,u,p,x){var j=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var C=t.entanglements,G=t.expirationTimes,he=t.hiddenUpdates;for(r=j&~r;0<r;){var we=31-jt(r),Me=1<<we;C[we]=0,G[we]=-1;var ge=he[we];if(ge!==null)for(he[we]=null,we=0;we<ge.length;we++){var ye=ge[we];ye!==null&&(ye.lane&=-536870913)}r&=~Me}u!==0&&Ve(t,u,0),x!==0&&p===0&&t.tag!==0&&(t.suspendedLanes|=x&~(j&~a))}function Ve(t,a,r){t.pendingLanes|=a,t.suspendedLanes&=~a;var u=31-jt(a);t.entangledLanes|=a,t.entanglements[u]=t.entanglements[u]|1073741824|r&261930}function zt(t,a){var r=t.entangledLanes|=a;for(t=t.entanglements;r;){var u=31-jt(r),p=1<<u;p&a|t[u]&a&&(t[u]|=a),r&=~p}}function ba(t,a){var r=a&-a;return r=(r&42)!==0?1:Ot(r),(r&(t.suspendedLanes|a))!==0?0:r}function Ot(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Oe(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function pn(){var t=M.p;return t!==0?t:(t=window.event,t===void 0?32:ry(t.type))}function ca(t,a){var r=M.p;try{return M.p=t,a()}finally{M.p=r}}var Wn=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Wn,it="__reactProps$"+Wn,ea="__reactContainer$"+Wn,F="__reactEvents$"+Wn,Ue="__reactListeners$"+Wn,ut="__reactHandles$"+Wn,Ln="__reactResources$"+Wn,zn="__reactMarker$"+Wn;function B(t){delete t[Yt],delete t[it],delete t[F],delete t[Ue],delete t[ut]}function Fe(t){var a=t[Yt];if(a)return a;for(var r=t.parentNode;r;){if(a=r[ea]||r[Yt]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(t=Hg(t);t!==null;){if(r=t[Yt])return r;t=Hg(t)}return a}t=r,r=t.parentNode}return null}function St(t){if(t=t[Yt]||t[ea]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Pn(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(o(33))}function Ia(t){var a=t[Ln];return a||(a=t[Ln]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function dn(t){t[zn]=!0}var gs=new Set,ir={};function Q(t,a){Ye(t,a),Ye(t+"Capture",a)}function Ye(t,a){for(ir[t]=a,t=0;t<a.length;t++)gs.add(a[t])}var Pt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_a={},Cs={};function As(t){return rn.call(Cs,t)?!0:rn.call(_a,t)?!1:Pt.test(t)?Cs[t]=!0:(_a[t]=!0,!1)}function vt(t,a,r){if(As(a))if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+r)}}function tn(t,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+r)}}function Na(t,a,r,u){if(u===null)t.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(a,r,""+u)}}function Kn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gs(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function $l(t,a,r){var u=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,x=u.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return p.call(this)},set:function(j){r=""+j,x.call(this,j)}}),Object.defineProperty(t,a,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(j){r=""+j},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function mt(t){if(!t._valueTracker){var a=Gs(t)?"checked":"value";t._valueTracker=$l(t,a,""+t[a])}}function xn(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var r=a.getValue(),u="";return t&&(u=Gs(t)?t.checked?"true":"false":t.value),t=u,t!==r?(a.setValue(t),!0):!1}function pi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Yr=/[\n"\\]/g;function mn(t){return t.replace(Yr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Xl(t,a,r,u,p,x,j,C){t.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?t.type=j:t.removeAttribute("type"),a!=null?j==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Kn(a)):t.value!==""+Kn(a)&&(t.value=""+Kn(a)):j!=="submit"&&j!=="reset"||t.removeAttribute("value"),a!=null?ys(t,j,Kn(a)):r!=null?ys(t,j,Kn(r)):u!=null&&t.removeAttribute("value"),p==null&&x!=null&&(t.defaultChecked=!!x),p!=null&&(t.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.name=""+Kn(C):t.removeAttribute("name")}function rr(t,a,r,u,p,x,j,C){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.type=x),a!=null||r!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){mt(t);return}r=r!=null?""+Kn(r):"",a=a!=null?""+Kn(a):r,C||a===t.value||(t.value=a),t.defaultValue=a}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=C?t.checked:!!u,t.defaultChecked=!!u,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(t.name=j),mt(t)}function ys(t,a,r){a==="number"&&pi(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function on(t,a,r,u){if(t=t.options,a){a={};for(var p=0;p<r.length;p++)a["$"+r[p]]=!0;for(r=0;r<t.length;r++)p=a.hasOwnProperty("$"+t[r].value),t[r].selected!==p&&(t[r].selected=p),p&&u&&(t[r].defaultSelected=!0)}else{for(r=""+Kn(r),a=null,p=0;p<t.length;p++){if(t[p].value===r){t[p].selected=!0,u&&(t[p].defaultSelected=!0);return}a!==null||t[p].disabled||(a=t[p])}a!==null&&(a.selected=!0)}}function Ms(t,a,r){if(a!=null&&(a=""+Kn(a),a!==t.value&&(t.value=a),r==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=r!=null?""+Kn(r):""}function xi(t,a,r,u){if(a==null){if(u!=null){if(r!=null)throw Error(o(92));if(oe(u)){if(1<u.length)throw Error(o(93));u=u[0]}r=u}r==null&&(r=""),a=r}r=Kn(a),t.defaultValue=r,u=t.textContent,u===r&&u!==""&&u!==null&&(t.value=u),mt(t)}function Xa(t,a){if(a){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=a;return}}t.textContent=a}var Jl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gi(t,a,r){var u=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":u?t.setProperty(a,r):typeof r!="number"||r===0||Jl.has(a)?a==="float"?t.cssFloat=r:t[a]=(""+r).trim():t[a]=r+"px"}function $r(t,a,r){if(a!=null&&typeof a!="object")throw Error(o(62));if(t=t.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var p in a)u=a[p],a.hasOwnProperty(p)&&r[p]!==u&&gi(t,p,u)}else for(var x in a)a.hasOwnProperty(x)&&gi(t,x,a[x])}function lr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yi(t){return Wl.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ja(){}var Jr=null;function or(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vi=null,rt=null;function Ba(t){var a=St(t);if(a&&(t=a.stateNode)){var r=t[it]||null;e:switch(t=a.stateNode,a.type){case"input":if(Xl(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+mn(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var u=r[a];if(u!==t&&u.form===t.form){var p=u[it]||null;if(!p)throw Error(o(90));Xl(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<r.length;a++)u=r[a],u.form===t.form&&xn(u)}break e;case"textarea":Ms(t,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&on(t,!!r.multiple,a,!1)}}}var $t=!1;function eo(t,a,r){if($t)return t(a,r);$t=!0;try{var u=t(a);return u}finally{if($t=!1,(vi!==null||rt!==null)&&(mu(),vi&&(a=vi,t=rt,rt=vi=null,Ba(a),t)))for(a=0;a<t.length;a++)Ba(t[a])}}function Qs(t,a){var r=t.stateNode;if(r===null)return null;var u=r[it]||null;if(u===null)return null;r=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(o(231,a,typeof r));return r}var Ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cr=!1;if(Ua)try{var Fa={};Object.defineProperty(Fa,"passive",{get:function(){cr=!0}}),window.addEventListener("test",Fa,Fa),window.removeEventListener("test",Fa,Fa)}catch{cr=!1}var Ja=null,Vs=null,Nn=null;function zs(){if(Nn)return Nn;var t,a=Vs,r=a.length,u,p="value"in Ja?Ja.value:Ja.textContent,x=p.length;for(t=0;t<r&&a[t]===p[t];t++);var j=r-t;for(u=1;u<=j&&a[r-u]===p[x-u];u++);return Nn=p.slice(t,1<u?1-u:void 0)}function ur(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function dr(){return!0}function gc(){return!1}function ta(t){function a(r,u,p,x,j){this._reactName=r,this._targetInst=p,this.type=u,this.nativeEvent=x,this.target=j,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(r=t[C],this[C]=r?r(x):x[C]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?dr:gc,this.isPropagationStopped=gc,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=dr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=dr)},persist:function(){},isPersistent:dr}),a}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wr=ta(vs),bi=w({},vs,{view:0,detail:0}),Ct=ta(bi),to,fa,bs,mr=w({},bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bs&&(bs&&t.type==="mousemove"?(to=t.screenX-bs.screenX,fa=t.screenY-bs.screenY):fa=to=0,bs=t),to)},movementY:function(t){return"movementY"in t?t.movementY:fa}}),yc=ta(mr),no=w({},mr,{dataTransfer:0}),Md=ta(no),vc=w({},bi,{relatedTarget:0}),ao=ta(vc),zd=w({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),so=ta(zd),Od=w({},vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wa=ta(Od),Dd=w({},vs,{data:0}),io=ta(Dd),Os={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ro(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=_c[t])?!!a[t]:!1}function lo(){return ro}var Nc=w({},bi,{key:function(t){if(t.key){var a=Os[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=ur(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lo,charCode:function(t){return t.type==="keypress"?ur(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ur(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jc=ta(Nc),Rd=w({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sc=ta(Rd),oo=w({},bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lo}),Ld=ta(oo),wc=w({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ec=ta(wc),el=w({},mr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ys=ta(el),Pd=w({},vs,{newState:0,oldState:0}),hr=ta(Pd),Sa=[9,13,27,32],tl=Ua&&"CompositionEvent"in window,_i=null;Ua&&"documentMode"in document&&(_i=document.documentMode);var Id=Ua&&"TextEvent"in window&&!_i,nl=Ua&&(!tl||_i&&8<_i&&11>=_i),al=" ",kc=!1;function Tc(t,a){switch(t){case"keyup":return Sa.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function co(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ni=!1;function qa(t,a){switch(t){case"compositionend":return co(a);case"keypress":return a.which!==32?null:(kc=!0,al);case"textInput":return t=a.data,t===al&&kc?null:t;default:return null}}function ji(t,a){if(Ni)return t==="compositionend"||!tl&&Tc(t,a)?(t=zs(),Nn=Vs=Ja=null,Ni=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return nl&&a.locale!=="ko"?null:a.data;default:return null}}var Bd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function es(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!Bd[t.type]:a==="textarea"}function Cc(t,a,r,u){vi?rt?rt.push(u):rt=[u]:vi=u,a=vu(a,"onChange"),0<a.length&&(r=new Wr("onChange","change",null,r,u),t.push({event:r,listeners:a}))}var ts=null,fr=null;function pr(t){Ag(t,0)}function xr(t){var a=Pn(t);if(xn(a))return t}function gr(t,a){if(t==="change")return a}var Ac=!1;if(Ua){var ns;if(Ua){var Si="oninput"in document;if(!Si){var Mc=document.createElement("div");Mc.setAttribute("oninput","return;"),Si=typeof Mc.oninput=="function"}ns=Si}else ns=!1;Ac=ns&&(!document.documentMode||9<document.documentMode)}function sl(){ts&&(ts.detachEvent("onpropertychange",zc),fr=ts=null)}function zc(t){if(t.propertyName==="value"&&xr(fr)){var a=[];Cc(a,fr,t,or(t)),eo(pr,a)}}function _s(t,a,r){t==="focusin"?(sl(),ts=a,fr=r,ts.attachEvent("onpropertychange",zc)):t==="focusout"&&sl()}function Ud(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xr(fr)}function wi(t,a){if(t==="click")return xr(a)}function Fd(t,a){if(t==="input"||t==="change")return xr(a)}function Ns(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Yn=typeof Object.is=="function"?Object.is:Ns;function Ei(t,a){if(Yn(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var r=Object.keys(t),u=Object.keys(a);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var p=r[u];if(!rn.call(a,p)||!Yn(t[p],a[p]))return!1}return!0}function il(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yr(t,a){var r=il(t);t=0;for(var u;r;){if(r.nodeType===3){if(u=t+r.textContent.length,t<=a&&u>=a)return{node:r,offset:a-t};t=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=il(r)}}function rl(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?rl(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function vr(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=pi(t.document);a instanceof t.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)t=a.contentWindow;else break;a=pi(t.document)}return a}function Ds(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var ll=Ua&&"documentMode"in document&&11>=document.documentMode,Rs=null,ol=null,br=null,ki=!1;function Oc(t,a,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ki||Rs==null||Rs!==pi(u)||(u=Rs,"selectionStart"in u&&Ds(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),br&&Ei(br,u)||(br=u,u=vu(ol,"onSelect"),0<u.length&&(a=new Wr("onSelect","select",null,a,r),t.push({event:a,listeners:u}),a.target=Rs)))}function Ls(t,a){var r={};return r[t.toLowerCase()]=a.toLowerCase(),r["Webkit"+t]="webkit"+a,r["Moz"+t]="moz"+a,r}var Ti={animationend:Ls("Animation","AnimationEnd"),animationiteration:Ls("Animation","AnimationIteration"),animationstart:Ls("Animation","AnimationStart"),transitionrun:Ls("Transition","TransitionRun"),transitionstart:Ls("Transition","TransitionStart"),transitioncancel:Ls("Transition","TransitionCancel"),transitionend:Ls("Transition","TransitionEnd")},cl={},Dc={};Ua&&(Dc=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function $n(t){if(cl[t])return cl[t];if(!Ti[t])return t;var a=Ti[t],r;for(r in a)if(a.hasOwnProperty(r)&&r in Dc)return cl[t]=a[r];return t}var _r=$n("animationend"),Rc=$n("animationiteration"),Nr=$n("animationstart"),qd=$n("transitionrun"),Lc=$n("transitionstart"),Zd=$n("transitioncancel"),Ci=$n("transitionend"),Pc=new Map,Ps="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ps.push("scrollEnd");function wa(t,a){Pc.set(t,a),Q(a,[t])}var jr=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ea=[],ua=0,ul=0;function Sr(){for(var t=ua,a=ul=ua=0;a<t;){var r=Ea[a];Ea[a++]=null;var u=Ea[a];Ea[a++]=null;var p=Ea[a];Ea[a++]=null;var x=Ea[a];if(Ea[a++]=null,u!==null&&p!==null){var j=u.pending;j===null?p.next=p:(p.next=j.next,j.next=p),u.pending=p}x!==0&&Ai(r,p,x)}}function Is(t,a,r,u){Ea[ua++]=t,Ea[ua++]=a,Ea[ua++]=r,Ea[ua++]=u,ul|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function uo(t,a,r,u){return Is(t,a,r,u),wr(t)}function as(t,a){return Is(t,null,null,a),wr(t)}function Ai(t,a,r){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r);for(var p=!1,x=t.return;x!==null;)x.childLanes|=r,u=x.alternate,u!==null&&(u.childLanes|=r),x.tag===22&&(t=x.stateNode,t===null||t._visibility&1||(p=!0)),t=x,x=x.return;return t.tag===3?(x=t.stateNode,p&&a!==null&&(p=31-jt(r),t=x.hiddenUpdates,u=t[p],u===null?t[p]=[a]:u.push(a),a.lane=r|536870912),x):null}function wr(t){if(50<Lo)throw Lo=0,Km=null,Error(o(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var $s={};function Hd(t,a,r,u){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function da(t,a,r,u){return new Hd(t,a,r,u)}function dl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ss(t,a){var r=t.alternate;return r===null?(r=da(t.tag,a,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=a,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,a=t.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function mo(t,a){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,a=r.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Er(t,a,r,u,p,x){var j=0;if(u=t,typeof t=="function")dl(t)&&(j=1);else if(typeof t=="string")j=ON(t,r,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case $:return t=da(31,r,a,p),t.elementType=$,t.lanes=x,t;case A:return Xs(r.children,p,x,a);case z:j=8,p|=24;break;case U:return t=da(12,r,a,p|2),t.elementType=U,t.lanes=x,t;case V:return t=da(13,r,a,p),t.elementType=V,t.lanes=x,t;case ee:return t=da(19,r,a,p),t.elementType=ee,t.lanes=x,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R:j=10;break e;case I:j=9;break e;case K:j=11;break e;case q:j=14;break e;case Y:j=16,u=null;break e}j=29,r=Error(o(130,t===null?"null":typeof t,"")),u=null}return a=da(j,r,a,p),a.elementType=t,a.type=u,a.lanes=x,a}function Xs(t,a,r,u){return t=da(7,t,u,a),t.lanes=r,t}function ml(t,a,r){return t=da(6,t,null,a),t.lanes=r,t}function ho(t){var a=da(18,null,null,0);return a.stateNode=t,a}function fo(t,a,r){return a=da(4,t.children!==null?t.children:[],t.key,a),a.lanes=r,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var i=new WeakMap;function c(t,a){if(typeof t=="object"&&t!==null){var r=i.get(t);return r!==void 0?r:(a={value:t,source:a,stack:Bt(a)},i.set(t,a),a)}return{value:t,source:a,stack:Bt(a)}}var h=[],y=0,N=null,E=0,H=[],le=0,xe=null,Ae=1,Pe="";function We(t,a){h[y++]=E,h[y++]=N,N=t,E=a}function gt(t,a,r){H[le++]=Ae,H[le++]=Pe,H[le++]=xe,xe=t;var u=Ae;t=Pe;var p=32-jt(u)-1;u&=~(1<<p),r+=1;var x=32-jt(a)+p;if(30<x){var j=p-p%5;x=(u&(1<<j)-1).toString(32),u>>=j,p-=j,Ae=1<<32-jt(a)+p|r<<p|u,Pe=x+t}else Ae=1<<x|r<<p|u,Pe=t}function Gn(t){t.return!==null&&(We(t,1),gt(t,1,0))}function jn(t){for(;t===N;)N=h[--y],h[y]=null,E=h[--y],h[y]=null;for(;t===xe;)xe=H[--le],H[le]=null,Pe=H[--le],H[le]=null,Ae=H[--le],H[le]=null}function pa(t,a){H[le++]=Ae,H[le++]=Pe,H[le++]=xe,Ae=a.id,Pe=a.overflow,xe=t}var qt=null,Zt=null,Et=!1,Bs=null,ka=!1,hl=Error(o(519));function Us(t){var a=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kr(c(a,t)),hl}function po(t){var a=t.stateNode,r=t.type,u=t.memoizedProps;switch(a[Yt]=t,a[it]=u,r){case"dialog":Tt("cancel",a),Tt("close",a);break;case"iframe":case"object":case"embed":Tt("load",a);break;case"video":case"audio":for(r=0;r<Io.length;r++)Tt(Io[r],a);break;case"source":Tt("error",a);break;case"img":case"image":case"link":Tt("error",a),Tt("load",a);break;case"details":Tt("toggle",a);break;case"input":Tt("invalid",a),rr(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Tt("invalid",a);break;case"textarea":Tt("invalid",a),xi(a,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||u.suppressHydrationWarning===!0||Dg(a.textContent,r)?(u.popover!=null&&(Tt("beforetoggle",a),Tt("toggle",a)),u.onScroll!=null&&Tt("scroll",a),u.onScrollEnd!=null&&Tt("scrollend",a),u.onClick!=null&&(a.onclick=ja),a=!0):a=!1,a||Us(t,!0)}function bn(t){for(qt=t.return;qt;)switch(qt.tag){case 5:case 31:case 13:ka=!1;return;case 27:case 3:ka=!0;return;default:qt=qt.return}}function js(t){if(t!==qt)return!1;if(!Et)return bn(t),Et=!0,!1;var a=t.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||rh(t.type,t.memoizedProps)),r=!r),r&&Zt&&Us(t),bn(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Zt=Zg(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Zt=Zg(t)}else a===27?(a=Zt,Hi(t.type)?(t=dh,dh=null,Zt=t):Zt=a):Zt=qt?rs(t.stateNode.nextSibling):null;return!0}function Js(){Zt=qt=null,Et=!1}function xo(){var t=Bs;return t!==null&&(Ma===null?Ma=t:Ma.push.apply(Ma,t),Bs=null),t}function kr(t){Bs===null?Bs=[t]:Bs.push(t)}var Tr=D(null),Fs=null,Ss=null;function Mi(t,a,r){P(Tr,a._currentValue),a._currentValue=r}function Ws(t){t._currentValue=Tr.current,te(Tr)}function Kd(t,a,r){for(;t!==null;){var u=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),t===r)break;t=t.return}}function Gd(t,a,r,u){var p=t.child;for(p!==null&&(p.return=t);p!==null;){var x=p.dependencies;if(x!==null){var j=p.child;x=x.firstContext;e:for(;x!==null;){var C=x;x=p;for(var G=0;G<a.length;G++)if(C.context===a[G]){x.lanes|=r,C=x.alternate,C!==null&&(C.lanes|=r),Kd(x.return,r,t),u||(j=null);break e}x=C.next}}else if(p.tag===18){if(j=p.return,j===null)throw Error(o(341));j.lanes|=r,x=j.alternate,x!==null&&(x.lanes|=r),Kd(j,r,t),j=null}else j=p.child;if(j!==null)j.return=p;else for(j=p;j!==null;){if(j===t){j=null;break}if(p=j.sibling,p!==null){p.return=j.return,j=p;break}j=j.return}p=j}}function fl(t,a,r,u){t=null;for(var p=a,x=!1;p!==null;){if(!x){if((p.flags&524288)!==0)x=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var j=p.alternate;if(j===null)throw Error(o(387));if(j=j.memoizedProps,j!==null){var C=p.type;Yn(p.pendingProps.value,j.value)||(t!==null?t.push(C):t=[C])}}else if(p===De.current){if(j=p.alternate,j===null)throw Error(o(387));j.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(t!==null?t.push(Zo):t=[Zo])}p=p.return}t!==null&&Gd(a,t,r,u),a.flags|=262144}function Ic(t){for(t=t.firstContext;t!==null;){if(!Yn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Cr(t){Fs=t,Ss=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function na(t){return vp(Fs,t)}function Bc(t,a){return Fs===null&&Cr(t),vp(t,a)}function vp(t,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},Ss===null){if(t===null)throw Error(o(308));Ss=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Ss=Ss.next=a;return r}var C_=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(r,u){t.push(u)}};this.abort=function(){a.aborted=!0,t.forEach(function(r){return r()})}},A_=e.unstable_scheduleCallback,M_=e.unstable_NormalPriority,In={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qd(){return{controller:new C_,data:new Map,refCount:0}}function go(t){t.refCount--,t.refCount===0&&A_(M_,function(){t.controller.abort()})}var yo=null,Vd=0,pl=0,xl=null;function z_(t,a){if(yo===null){var r=yo=[];Vd=0,pl=Xm(),xl={status:"pending",value:void 0,then:function(u){r.push(u)}}}return Vd++,a.then(bp,bp),a}function bp(){if(--Vd===0&&yo!==null){xl!==null&&(xl.status="fulfilled");var t=yo;yo=null,pl=0,xl=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function O_(t,a){var r=[],u={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return t.then(function(){u.status="fulfilled",u.value=a;for(var p=0;p<r.length;p++)(0,r[p])(a)},function(p){for(u.status="rejected",u.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),u}var _p=Z.S;Z.S=function(t,a){sg=se(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&z_(t,a),_p!==null&&_p(t,a)};var Ar=D(null);function Yd(){var t=Ar.current;return t!==null?t:cn.pooledCache}function Uc(t,a){a===null?P(Ar,Ar.current):P(Ar,a.pool)}function Np(){var t=Yd();return t===null?null:{parent:In._currentValue,pool:t}}var gl=Error(o(460)),$d=Error(o(474)),Fc=Error(o(542)),qc={then:function(){}};function jp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Sp(t,a,r){switch(r=t[r],r===void 0?t.push(a):r!==a&&(a.then(ja,ja),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Ep(t),t;default:if(typeof a.status=="string")a.then(ja,ja);else{if(t=cn,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=a,t.status="pending",t.then(function(u){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=u}},function(u){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Ep(t),t}throw zr=a,gl}}function Mr(t){try{var a=t._init;return a(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(zr=r,gl):r}}var zr=null;function wp(){if(zr===null)throw Error(o(459));var t=zr;return zr=null,t}function Ep(t){if(t===gl||t===Fc)throw Error(o(483))}var yl=null,vo=0;function Zc(t){var a=vo;return vo+=1,yl===null&&(yl=[]),Sp(yl,t,a)}function bo(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Hc(t,a){throw a.$$typeof===T?Error(o(525)):(t=Object.prototype.toString.call(a),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function kp(t){function a(re,J){if(t){var me=re.deletions;me===null?(re.deletions=[J],re.flags|=16):me.push(J)}}function r(re,J){if(!t)return null;for(;J!==null;)a(re,J),J=J.sibling;return null}function u(re){for(var J=new Map;re!==null;)re.key!==null?J.set(re.key,re):J.set(re.index,re),re=re.sibling;return J}function p(re,J){return re=ss(re,J),re.index=0,re.sibling=null,re}function x(re,J,me){return re.index=me,t?(me=re.alternate,me!==null?(me=me.index,me<J?(re.flags|=67108866,J):me):(re.flags|=67108866,J)):(re.flags|=1048576,J)}function j(re){return t&&re.alternate===null&&(re.flags|=67108866),re}function C(re,J,me,Te){return J===null||J.tag!==6?(J=ml(me,re.mode,Te),J.return=re,J):(J=p(J,me),J.return=re,J)}function G(re,J,me,Te){var et=me.type;return et===A?we(re,J,me.props.children,Te,me.key):J!==null&&(J.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Y&&Mr(et)===J.type)?(J=p(J,me.props),bo(J,me),J.return=re,J):(J=Er(me.type,me.key,me.props,null,re.mode,Te),bo(J,me),J.return=re,J)}function he(re,J,me,Te){return J===null||J.tag!==4||J.stateNode.containerInfo!==me.containerInfo||J.stateNode.implementation!==me.implementation?(J=fo(me,re.mode,Te),J.return=re,J):(J=p(J,me.children||[]),J.return=re,J)}function we(re,J,me,Te,et){return J===null||J.tag!==7?(J=Xs(me,re.mode,Te,et),J.return=re,J):(J=p(J,me),J.return=re,J)}function Me(re,J,me){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=ml(""+J,re.mode,me),J.return=re,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case O:return me=Er(J.type,J.key,J.props,null,re.mode,me),bo(me,J),me.return=re,me;case k:return J=fo(J,re.mode,me),J.return=re,J;case Y:return J=Mr(J),Me(re,J,me)}if(oe(J)||ue(J))return J=Xs(J,re.mode,me,null),J.return=re,J;if(typeof J.then=="function")return Me(re,Zc(J),me);if(J.$$typeof===R)return Me(re,Bc(re,J),me);Hc(re,J)}return null}function ge(re,J,me,Te){var et=J!==null?J.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return et!==null?null:C(re,J,""+me,Te);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case O:return me.key===et?G(re,J,me,Te):null;case k:return me.key===et?he(re,J,me,Te):null;case Y:return me=Mr(me),ge(re,J,me,Te)}if(oe(me)||ue(me))return et!==null?null:we(re,J,me,Te,null);if(typeof me.then=="function")return ge(re,J,Zc(me),Te);if(me.$$typeof===R)return ge(re,J,Bc(re,me),Te);Hc(re,me)}return null}function ye(re,J,me,Te,et){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return re=re.get(me)||null,C(J,re,""+Te,et);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case O:return re=re.get(Te.key===null?me:Te.key)||null,G(J,re,Te,et);case k:return re=re.get(Te.key===null?me:Te.key)||null,he(J,re,Te,et);case Y:return Te=Mr(Te),ye(re,J,me,Te,et)}if(oe(Te)||ue(Te))return re=re.get(me)||null,we(J,re,Te,et,null);if(typeof Te.then=="function")return ye(re,J,me,Zc(Te),et);if(Te.$$typeof===R)return ye(re,J,me,Bc(J,Te),et);Hc(J,Te)}return null}function Qe(re,J,me,Te){for(var et=null,Ht=null,$e=J,yt=J=0,Mt=null;$e!==null&&yt<me.length;yt++){$e.index>yt?(Mt=$e,$e=null):Mt=$e.sibling;var Kt=ge(re,$e,me[yt],Te);if(Kt===null){$e===null&&($e=Mt);break}t&&$e&&Kt.alternate===null&&a(re,$e),J=x(Kt,J,yt),Ht===null?et=Kt:Ht.sibling=Kt,Ht=Kt,$e=Mt}if(yt===me.length)return r(re,$e),Et&&We(re,yt),et;if($e===null){for(;yt<me.length;yt++)$e=Me(re,me[yt],Te),$e!==null&&(J=x($e,J,yt),Ht===null?et=$e:Ht.sibling=$e,Ht=$e);return Et&&We(re,yt),et}for($e=u($e);yt<me.length;yt++)Mt=ye($e,re,yt,me[yt],Te),Mt!==null&&(t&&Mt.alternate!==null&&$e.delete(Mt.key===null?yt:Mt.key),J=x(Mt,J,yt),Ht===null?et=Mt:Ht.sibling=Mt,Ht=Mt);return t&&$e.forEach(function(Yi){return a(re,Yi)}),Et&&We(re,yt),et}function st(re,J,me,Te){if(me==null)throw Error(o(151));for(var et=null,Ht=null,$e=J,yt=J=0,Mt=null,Kt=me.next();$e!==null&&!Kt.done;yt++,Kt=me.next()){$e.index>yt?(Mt=$e,$e=null):Mt=$e.sibling;var Yi=ge(re,$e,Kt.value,Te);if(Yi===null){$e===null&&($e=Mt);break}t&&$e&&Yi.alternate===null&&a(re,$e),J=x(Yi,J,yt),Ht===null?et=Yi:Ht.sibling=Yi,Ht=Yi,$e=Mt}if(Kt.done)return r(re,$e),Et&&We(re,yt),et;if($e===null){for(;!Kt.done;yt++,Kt=me.next())Kt=Me(re,Kt.value,Te),Kt!==null&&(J=x(Kt,J,yt),Ht===null?et=Kt:Ht.sibling=Kt,Ht=Kt);return Et&&We(re,yt),et}for($e=u($e);!Kt.done;yt++,Kt=me.next())Kt=ye($e,re,yt,Kt.value,Te),Kt!==null&&(t&&Kt.alternate!==null&&$e.delete(Kt.key===null?yt:Kt.key),J=x(Kt,J,yt),Ht===null?et=Kt:Ht.sibling=Kt,Ht=Kt);return t&&$e.forEach(function(HN){return a(re,HN)}),Et&&We(re,yt),et}function sn(re,J,me,Te){if(typeof me=="object"&&me!==null&&me.type===A&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case O:e:{for(var et=me.key;J!==null;){if(J.key===et){if(et=me.type,et===A){if(J.tag===7){r(re,J.sibling),Te=p(J,me.props.children),Te.return=re,re=Te;break e}}else if(J.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Y&&Mr(et)===J.type){r(re,J.sibling),Te=p(J,me.props),bo(Te,me),Te.return=re,re=Te;break e}r(re,J);break}else a(re,J);J=J.sibling}me.type===A?(Te=Xs(me.props.children,re.mode,Te,me.key),Te.return=re,re=Te):(Te=Er(me.type,me.key,me.props,null,re.mode,Te),bo(Te,me),Te.return=re,re=Te)}return j(re);case k:e:{for(et=me.key;J!==null;){if(J.key===et)if(J.tag===4&&J.stateNode.containerInfo===me.containerInfo&&J.stateNode.implementation===me.implementation){r(re,J.sibling),Te=p(J,me.children||[]),Te.return=re,re=Te;break e}else{r(re,J);break}else a(re,J);J=J.sibling}Te=fo(me,re.mode,Te),Te.return=re,re=Te}return j(re);case Y:return me=Mr(me),sn(re,J,me,Te)}if(oe(me))return Qe(re,J,me,Te);if(ue(me)){if(et=ue(me),typeof et!="function")throw Error(o(150));return me=et.call(me),st(re,J,me,Te)}if(typeof me.then=="function")return sn(re,J,Zc(me),Te);if(me.$$typeof===R)return sn(re,J,Bc(re,me),Te);Hc(re,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,J!==null&&J.tag===6?(r(re,J.sibling),Te=p(J,me),Te.return=re,re=Te):(r(re,J),Te=ml(me,re.mode,Te),Te.return=re,re=Te),j(re)):r(re,J)}return function(re,J,me,Te){try{vo=0;var et=sn(re,J,me,Te);return yl=null,et}catch($e){if($e===gl||$e===Fc)throw $e;var Ht=da(29,$e,null,re.mode);return Ht.lanes=Te,Ht.return=re,Ht}}}var Or=kp(!0),Tp=kp(!1),zi=!1;function Xd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jd(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Oi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Di(t,a,r){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Qt&2)!==0){var p=u.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),u.pending=a,a=wr(t),Ai(t,null,r),a}return Is(t,u,a,r),wr(t)}function _o(t,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var u=a.lanes;u&=t.pendingLanes,r|=u,a.lanes=r,zt(t,r)}}function Wd(t,a){var r=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var p=null,x=null;if(r=r.firstBaseUpdate,r!==null){do{var j={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};x===null?p=x=j:x=x.next=j,r=r.next}while(r!==null);x===null?p=x=a:x=x.next=a}else p=x=a;r={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:x,shared:u.shared,callbacks:u.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=a:t.next=a,r.lastBaseUpdate=a}var em=!1;function No(){if(em){var t=xl;if(t!==null)throw t}}function jo(t,a,r,u){em=!1;var p=t.updateQueue;zi=!1;var x=p.firstBaseUpdate,j=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var G=C,he=G.next;G.next=null,j===null?x=he:j.next=he,j=G;var we=t.alternate;we!==null&&(we=we.updateQueue,C=we.lastBaseUpdate,C!==j&&(C===null?we.firstBaseUpdate=he:C.next=he,we.lastBaseUpdate=G))}if(x!==null){var Me=p.baseState;j=0,we=he=G=null,C=x;do{var ge=C.lane&-536870913,ye=ge!==C.lane;if(ye?(At&ge)===ge:(u&ge)===ge){ge!==0&&ge===pl&&(em=!0),we!==null&&(we=we.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Qe=t,st=C;ge=a;var sn=r;switch(st.tag){case 1:if(Qe=st.payload,typeof Qe=="function"){Me=Qe.call(sn,Me,ge);break e}Me=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=st.payload,ge=typeof Qe=="function"?Qe.call(sn,Me,ge):Qe,ge==null)break e;Me=w({},Me,ge);break e;case 2:zi=!0}}ge=C.callback,ge!==null&&(t.flags|=64,ye&&(t.flags|=8192),ye=p.callbacks,ye===null?p.callbacks=[ge]:ye.push(ge))}else ye={lane:ge,tag:C.tag,payload:C.payload,callback:C.callback,next:null},we===null?(he=we=ye,G=Me):we=we.next=ye,j|=ge;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;ye=C,C=ye.next,ye.next=null,p.lastBaseUpdate=ye,p.shared.pending=null}}while(!0);we===null&&(G=Me),p.baseState=G,p.firstBaseUpdate=he,p.lastBaseUpdate=we,x===null&&(p.shared.lanes=0),Bi|=j,t.lanes=j,t.memoizedState=Me}}function Cp(t,a){if(typeof t!="function")throw Error(o(191,t));t.call(a)}function Ap(t,a){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Cp(r[t],a)}var vl=D(null),Kc=D(0);function Mp(t,a){t=oi,P(Kc,t),P(vl,a),oi=t|a.baseLanes}function tm(){P(Kc,oi),P(vl,vl.current)}function nm(){oi=Kc.current,te(vl),te(Kc)}var Za=D(null),is=null;function Ri(t){var a=t.alternate;P(On,On.current&1),P(Za,t),is===null&&(a===null||vl.current!==null||a.memoizedState!==null)&&(is=t)}function am(t){P(On,On.current),P(Za,t),is===null&&(is=t)}function zp(t){t.tag===22?(P(On,On.current),P(Za,t),is===null&&(is=t)):Li()}function Li(){P(On,On.current),P(Za,Za.current)}function Ha(t){te(Za),is===t&&(is=null),te(On)}var On=D(0);function Gc(t){for(var a=t;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||ch(r)||uh(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ei=0,pt=null,nn=null,Bn=null,Qc=!1,bl=!1,Dr=!1,Vc=0,So=0,_l=null,D_=0;function Sn(){throw Error(o(321))}function sm(t,a){if(a===null)return!1;for(var r=0;r<a.length&&r<t.length;r++)if(!Yn(t[r],a[r]))return!1;return!0}function im(t,a,r,u,p,x){return ei=x,pt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Z.H=t===null||t.memoizedState===null?px:bm,Dr=!1,x=r(u,p),Dr=!1,bl&&(x=Dp(a,r,u,p)),Op(t),x}function Op(t){Z.H=ko;var a=nn!==null&&nn.next!==null;if(ei=0,Bn=nn=pt=null,Qc=!1,So=0,_l=null,a)throw Error(o(300));t===null||Un||(t=t.dependencies,t!==null&&Ic(t)&&(Un=!0))}function Dp(t,a,r,u){pt=t;var p=0;do{if(bl&&(_l=null),So=0,bl=!1,25<=p)throw Error(o(301));if(p+=1,Bn=nn=null,t.updateQueue!=null){var x=t.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}Z.H=xx,x=a(r,u)}while(bl);return x}function R_(){var t=Z.H,a=t.useState()[0];return a=typeof a.then=="function"?wo(a):a,t=t.useState()[0],(nn!==null?nn.memoizedState:null)!==t&&(pt.flags|=1024),a}function rm(){var t=Vc!==0;return Vc=0,t}function lm(t,a,r){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~r}function om(t){if(Qc){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Qc=!1}ei=0,Bn=nn=pt=null,bl=!1,So=Vc=0,_l=null}function xa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?pt.memoizedState=Bn=t:Bn=Bn.next=t,Bn}function Dn(){if(nn===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=nn.next;var a=Bn===null?pt.memoizedState:Bn.next;if(a!==null)Bn=a,nn=t;else{if(t===null)throw pt.alternate===null?Error(o(467)):Error(o(310));nn=t,t={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},Bn===null?pt.memoizedState=Bn=t:Bn=Bn.next=t}return Bn}function Yc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wo(t){var a=So;return So+=1,_l===null&&(_l=[]),t=Sp(_l,t,a),a=pt,(Bn===null?a.memoizedState:Bn.next)===null&&(a=a.alternate,Z.H=a===null||a.memoizedState===null?px:bm),t}function $c(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wo(t);if(t.$$typeof===R)return na(t)}throw Error(o(438,String(t)))}function cm(t){var a=null,r=pt.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var u=pt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=Yc(),pt.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(t),u=0;u<t;u++)r[u]=ie;return a.index++,r}function ti(t,a){return typeof a=="function"?a(t):a}function Xc(t){var a=Dn();return um(a,nn,t)}function um(t,a,r){var u=t.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=r;var p=t.baseQueue,x=u.pending;if(x!==null){if(p!==null){var j=p.next;p.next=x.next,x.next=j}a.baseQueue=p=x,u.pending=null}if(x=t.baseState,p===null)t.memoizedState=x;else{a=p.next;var C=j=null,G=null,he=a,we=!1;do{var Me=he.lane&-536870913;if(Me!==he.lane?(At&Me)===Me:(ei&Me)===Me){var ge=he.revertLane;if(ge===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Me===pl&&(we=!0);else if((ei&ge)===ge){he=he.next,ge===pl&&(we=!0);continue}else Me={lane:0,revertLane:he.revertLane,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},G===null?(C=G=Me,j=x):G=G.next=Me,pt.lanes|=ge,Bi|=ge;Me=he.action,Dr&&r(x,Me),x=he.hasEagerState?he.eagerState:r(x,Me)}else ge={lane:Me,revertLane:he.revertLane,gesture:he.gesture,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},G===null?(C=G=ge,j=x):G=G.next=ge,pt.lanes|=Me,Bi|=Me;he=he.next}while(he!==null&&he!==a);if(G===null?j=x:G.next=C,!Yn(x,t.memoizedState)&&(Un=!0,we&&(r=xl,r!==null)))throw r;t.memoizedState=x,t.baseState=j,t.baseQueue=G,u.lastRenderedState=x}return p===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function dm(t){var a=Dn(),r=a.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=t;var u=r.dispatch,p=r.pending,x=a.memoizedState;if(p!==null){r.pending=null;var j=p=p.next;do x=t(x,j.action),j=j.next;while(j!==p);Yn(x,a.memoizedState)||(Un=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),r.lastRenderedState=x}return[x,u]}function Rp(t,a,r){var u=pt,p=Dn(),x=Et;if(x){if(r===void 0)throw Error(o(407));r=r()}else r=a();var j=!Yn((nn||p).memoizedState,r);if(j&&(p.memoizedState=r,Un=!0),p=p.queue,fm(Ip.bind(null,u,p,t),[t]),p.getSnapshot!==a||j||Bn!==null&&Bn.memoizedState.tag&1){if(u.flags|=2048,Nl(9,{destroy:void 0},Pp.bind(null,u,p,r,a),null),cn===null)throw Error(o(349));x||(ei&127)!==0||Lp(u,a,r)}return r}function Lp(t,a,r){t.flags|=16384,t={getSnapshot:a,value:r},a=pt.updateQueue,a===null?(a=Yc(),pt.updateQueue=a,a.stores=[t]):(r=a.stores,r===null?a.stores=[t]:r.push(t))}function Pp(t,a,r,u){a.value=r,a.getSnapshot=u,Bp(a)&&Up(t)}function Ip(t,a,r){return r(function(){Bp(a)&&Up(t)})}function Bp(t){var a=t.getSnapshot;t=t.value;try{var r=a();return!Yn(t,r)}catch{return!0}}function Up(t){var a=as(t,2);a!==null&&za(a,t,2)}function mm(t){var a=xa();if(typeof t=="function"){var r=t;if(t=r(),Dr){Ft(!0);try{r()}finally{Ft(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:t},a}function Fp(t,a,r,u){return t.baseState=r,um(t,nn,typeof u=="function"?u:ti)}function L_(t,a,r,u,p){if(eu(t))throw Error(o(485));if(t=a.action,t!==null){var x={payload:p,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){x.listeners.push(j)}};Z.T!==null?r(!0):x.isTransition=!1,u(x),r=a.pending,r===null?(x.next=a.pending=x,qp(a,x)):(x.next=r.next,a.pending=r.next=x)}}function qp(t,a){var r=a.action,u=a.payload,p=t.state;if(a.isTransition){var x=Z.T,j={};Z.T=j;try{var C=r(p,u),G=Z.S;G!==null&&G(j,C),Zp(t,a,C)}catch(he){hm(t,a,he)}finally{x!==null&&j.types!==null&&(x.types=j.types),Z.T=x}}else try{x=r(p,u),Zp(t,a,x)}catch(he){hm(t,a,he)}}function Zp(t,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){Hp(t,a,u)},function(u){return hm(t,a,u)}):Hp(t,a,r)}function Hp(t,a,r){a.status="fulfilled",a.value=r,Kp(a),t.state=r,a=t.pending,a!==null&&(r=a.next,r===a?t.pending=null:(r=r.next,a.next=r,qp(t,r)))}function hm(t,a,r){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=r,Kp(a),a=a.next;while(a!==u)}t.action=null}function Kp(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Gp(t,a){return a}function Qp(t,a){if(Et){var r=cn.formState;if(r!==null){e:{var u=pt;if(Et){if(Zt){t:{for(var p=Zt,x=ka;p.nodeType!==8;){if(!x){p=null;break t}if(p=rs(p.nextSibling),p===null){p=null;break t}}x=p.data,p=x==="F!"||x==="F"?p:null}if(p){Zt=rs(p.nextSibling),u=p.data==="F!";break e}}Us(u)}u=!1}u&&(a=r[0])}}return r=xa(),r.memoizedState=r.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gp,lastRenderedState:a},r.queue=u,r=mx.bind(null,pt,u),u.dispatch=r,u=mm(!1),x=vm.bind(null,pt,!1,u.queue),u=xa(),p={state:a,dispatch:null,action:t,pending:null},u.queue=p,r=L_.bind(null,pt,p,x,r),p.dispatch=r,u.memoizedState=t,[a,r,!1]}function Vp(t){var a=Dn();return Yp(a,nn,t)}function Yp(t,a,r){if(a=um(t,a,Gp)[0],t=Xc(ti)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=wo(a)}catch(j){throw j===gl?Fc:j}else u=a;a=Dn();var p=a.queue,x=p.dispatch;return r!==a.memoizedState&&(pt.flags|=2048,Nl(9,{destroy:void 0},P_.bind(null,p,r),null)),[u,x,t]}function P_(t,a){t.action=a}function $p(t){var a=Dn(),r=nn;if(r!==null)return Yp(a,r,t);Dn(),a=a.memoizedState,r=Dn();var u=r.queue.dispatch;return r.memoizedState=t,[a,u,!1]}function Nl(t,a,r,u){return t={tag:t,create:r,deps:u,inst:a,next:null},a=pt.updateQueue,a===null&&(a=Yc(),pt.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=t.next=t:(u=r.next,r.next=t,t.next=u,a.lastEffect=t),t}function Xp(){return Dn().memoizedState}function Jc(t,a,r,u){var p=xa();pt.flags|=t,p.memoizedState=Nl(1|a,{destroy:void 0},r,u===void 0?null:u)}function Wc(t,a,r,u){var p=Dn();u=u===void 0?null:u;var x=p.memoizedState.inst;nn!==null&&u!==null&&sm(u,nn.memoizedState.deps)?p.memoizedState=Nl(a,x,r,u):(pt.flags|=t,p.memoizedState=Nl(1|a,x,r,u))}function Jp(t,a){Jc(8390656,8,t,a)}function fm(t,a){Wc(2048,8,t,a)}function I_(t){pt.flags|=4;var a=pt.updateQueue;if(a===null)a=Yc(),pt.updateQueue=a,a.events=[t];else{var r=a.events;r===null?a.events=[t]:r.push(t)}}function Wp(t){var a=Dn().memoizedState;return I_({ref:a,nextImpl:t}),function(){if((Qt&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}function ex(t,a){return Wc(4,2,t,a)}function tx(t,a){return Wc(4,4,t,a)}function nx(t,a){if(typeof a=="function"){t=t();var r=a(t);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function ax(t,a,r){r=r!=null?r.concat([t]):null,Wc(4,4,nx.bind(null,a,t),r)}function pm(){}function sx(t,a){var r=Dn();a=a===void 0?null:a;var u=r.memoizedState;return a!==null&&sm(a,u[1])?u[0]:(r.memoizedState=[t,a],t)}function ix(t,a){var r=Dn();a=a===void 0?null:a;var u=r.memoizedState;if(a!==null&&sm(a,u[1]))return u[0];if(u=t(),Dr){Ft(!0);try{t()}finally{Ft(!1)}}return r.memoizedState=[u,a],u}function xm(t,a,r){return r===void 0||(ei&1073741824)!==0&&(At&261930)===0?t.memoizedState=a:(t.memoizedState=r,t=rg(),pt.lanes|=t,Bi|=t,r)}function rx(t,a,r,u){return Yn(r,a)?r:vl.current!==null?(t=xm(t,r,u),Yn(t,a)||(Un=!0),t):(ei&42)===0||(ei&1073741824)!==0&&(At&261930)===0?(Un=!0,t.memoizedState=r):(t=rg(),pt.lanes|=t,Bi|=t,a)}function lx(t,a,r,u,p){var x=M.p;M.p=x!==0&&8>x?x:8;var j=Z.T,C={};Z.T=C,vm(t,!1,a,r);try{var G=p(),he=Z.S;if(he!==null&&he(C,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var we=O_(G,u);Eo(t,a,we,Qa(t))}else Eo(t,a,u,Qa(t))}catch(Me){Eo(t,a,{then:function(){},status:"rejected",reason:Me},Qa())}finally{M.p=x,j!==null&&C.types!==null&&(j.types=C.types),Z.T=j}}function B_(){}function gm(t,a,r,u){if(t.tag!==5)throw Error(o(476));var p=ox(t).queue;lx(t,p,a,ne,r===null?B_:function(){return cx(t),r(u)})}function ox(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:ne},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:r},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function cx(t){var a=ox(t);a.next===null&&(a=t.alternate.memoizedState),Eo(t,a.next.queue,{},Qa())}function ym(){return na(Zo)}function ux(){return Dn().memoizedState}function dx(){return Dn().memoizedState}function U_(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var r=Qa();t=Oi(r);var u=Di(a,t,r);u!==null&&(za(u,a,r),_o(u,a,r)),a={cache:Qd()},t.payload=a;return}a=a.return}}function F_(t,a,r){var u=Qa();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},eu(t)?hx(a,r):(r=uo(t,a,r,u),r!==null&&(za(r,t,u),fx(r,a,u)))}function mx(t,a,r){var u=Qa();Eo(t,a,r,u)}function Eo(t,a,r,u){var p={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(eu(t))hx(a,p);else{var x=t.alternate;if(t.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var j=a.lastRenderedState,C=x(j,r);if(p.hasEagerState=!0,p.eagerState=C,Yn(C,j))return Is(t,a,p,0),cn===null&&Sr(),!1}catch{}if(r=uo(t,a,p,u),r!==null)return za(r,t,u),fx(r,a,u),!0}return!1}function vm(t,a,r,u){if(u={lane:2,revertLane:Xm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},eu(t)){if(a)throw Error(o(479))}else a=uo(t,r,u,2),a!==null&&za(a,t,2)}function eu(t){var a=t.alternate;return t===pt||a!==null&&a===pt}function hx(t,a){bl=Qc=!0;var r=t.pending;r===null?a.next=a:(a.next=r.next,r.next=a),t.pending=a}function fx(t,a,r){if((r&4194048)!==0){var u=a.lanes;u&=t.pendingLanes,r|=u,a.lanes=r,zt(t,r)}}var ko={readContext:na,use:$c,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useLayoutEffect:Sn,useInsertionEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useSyncExternalStore:Sn,useId:Sn,useHostTransitionStatus:Sn,useFormState:Sn,useActionState:Sn,useOptimistic:Sn,useMemoCache:Sn,useCacheRefresh:Sn};ko.useEffectEvent=Sn;var px={readContext:na,use:$c,useCallback:function(t,a){return xa().memoizedState=[t,a===void 0?null:a],t},useContext:na,useEffect:Jp,useImperativeHandle:function(t,a,r){r=r!=null?r.concat([t]):null,Jc(4194308,4,nx.bind(null,a,t),r)},useLayoutEffect:function(t,a){return Jc(4194308,4,t,a)},useInsertionEffect:function(t,a){Jc(4,2,t,a)},useMemo:function(t,a){var r=xa();a=a===void 0?null:a;var u=t();if(Dr){Ft(!0);try{t()}finally{Ft(!1)}}return r.memoizedState=[u,a],u},useReducer:function(t,a,r){var u=xa();if(r!==void 0){var p=r(a);if(Dr){Ft(!0);try{r(a)}finally{Ft(!1)}}}else p=a;return u.memoizedState=u.baseState=p,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:p},u.queue=t,t=t.dispatch=F_.bind(null,pt,t),[u.memoizedState,t]},useRef:function(t){var a=xa();return t={current:t},a.memoizedState=t},useState:function(t){t=mm(t);var a=t.queue,r=mx.bind(null,pt,a);return a.dispatch=r,[t.memoizedState,r]},useDebugValue:pm,useDeferredValue:function(t,a){var r=xa();return xm(r,t,a)},useTransition:function(){var t=mm(!1);return t=lx.bind(null,pt,t.queue,!0,!1),xa().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,r){var u=pt,p=xa();if(Et){if(r===void 0)throw Error(o(407));r=r()}else{if(r=a(),cn===null)throw Error(o(349));(At&127)!==0||Lp(u,a,r)}p.memoizedState=r;var x={value:r,getSnapshot:a};return p.queue=x,Jp(Ip.bind(null,u,x,t),[t]),u.flags|=2048,Nl(9,{destroy:void 0},Pp.bind(null,u,x,r,a),null),r},useId:function(){var t=xa(),a=cn.identifierPrefix;if(Et){var r=Pe,u=Ae;r=(u&~(1<<32-jt(u)-1)).toString(32)+r,a="_"+a+"R_"+r,r=Vc++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=D_++,a="_"+a+"r_"+r.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:ym,useFormState:Qp,useActionState:Qp,useOptimistic:function(t){var a=xa();a.memoizedState=a.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=vm.bind(null,pt,!0,r),r.dispatch=a,[t,a]},useMemoCache:cm,useCacheRefresh:function(){return xa().memoizedState=U_.bind(null,pt)},useEffectEvent:function(t){var a=xa(),r={impl:t};return a.memoizedState=r,function(){if((Qt&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}},bm={readContext:na,use:$c,useCallback:sx,useContext:na,useEffect:fm,useImperativeHandle:ax,useInsertionEffect:ex,useLayoutEffect:tx,useMemo:ix,useReducer:Xc,useRef:Xp,useState:function(){return Xc(ti)},useDebugValue:pm,useDeferredValue:function(t,a){var r=Dn();return rx(r,nn.memoizedState,t,a)},useTransition:function(){var t=Xc(ti)[0],a=Dn().memoizedState;return[typeof t=="boolean"?t:wo(t),a]},useSyncExternalStore:Rp,useId:ux,useHostTransitionStatus:ym,useFormState:Vp,useActionState:Vp,useOptimistic:function(t,a){var r=Dn();return Fp(r,nn,t,a)},useMemoCache:cm,useCacheRefresh:dx};bm.useEffectEvent=Wp;var xx={readContext:na,use:$c,useCallback:sx,useContext:na,useEffect:fm,useImperativeHandle:ax,useInsertionEffect:ex,useLayoutEffect:tx,useMemo:ix,useReducer:dm,useRef:Xp,useState:function(){return dm(ti)},useDebugValue:pm,useDeferredValue:function(t,a){var r=Dn();return nn===null?xm(r,t,a):rx(r,nn.memoizedState,t,a)},useTransition:function(){var t=dm(ti)[0],a=Dn().memoizedState;return[typeof t=="boolean"?t:wo(t),a]},useSyncExternalStore:Rp,useId:ux,useHostTransitionStatus:ym,useFormState:$p,useActionState:$p,useOptimistic:function(t,a){var r=Dn();return nn!==null?Fp(r,nn,t,a):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:cm,useCacheRefresh:dx};xx.useEffectEvent=Wp;function _m(t,a,r,u){a=t.memoizedState,r=r(u,a),r=r==null?a:w({},a,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Nm={enqueueSetState:function(t,a,r){t=t._reactInternals;var u=Qa(),p=Oi(u);p.payload=a,r!=null&&(p.callback=r),a=Di(t,p,u),a!==null&&(za(a,t,u),_o(a,t,u))},enqueueReplaceState:function(t,a,r){t=t._reactInternals;var u=Qa(),p=Oi(u);p.tag=1,p.payload=a,r!=null&&(p.callback=r),a=Di(t,p,u),a!==null&&(za(a,t,u),_o(a,t,u))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var r=Qa(),u=Oi(r);u.tag=2,a!=null&&(u.callback=a),a=Di(t,u,r),a!==null&&(za(a,t,r),_o(a,t,r))}};function gx(t,a,r,u,p,x,j){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,x,j):a.prototype&&a.prototype.isPureReactComponent?!Ei(r,u)||!Ei(p,x):!0}function yx(t,a,r,u){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,u),a.state!==t&&Nm.enqueueReplaceState(a,a.state,null)}function Rr(t,a){var r=a;if("ref"in a){r={};for(var u in a)u!=="ref"&&(r[u]=a[u])}if(t=t.defaultProps){r===a&&(r=w({},r));for(var p in t)r[p]===void 0&&(r[p]=t[p])}return r}function vx(t){jr(t)}function bx(t){console.error(t)}function _x(t){jr(t)}function tu(t,a){try{var r=t.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function Nx(t,a,r){try{var u=t.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function jm(t,a,r){return r=Oi(r),r.tag=3,r.payload={element:null},r.callback=function(){tu(t,a)},r}function jx(t){return t=Oi(t),t.tag=3,t}function Sx(t,a,r,u){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var x=u.value;t.payload=function(){return p(x)},t.callback=function(){Nx(a,r,u)}}var j=r.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(t.callback=function(){Nx(a,r,u),typeof p!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function q_(t,a,r,u,p){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=r.alternate,a!==null&&fl(a,r,p,!0),r=Za.current,r!==null){switch(r.tag){case 31:case 13:return is===null?hu():r.alternate===null&&wn===0&&(wn=3),r.flags&=-257,r.flags|=65536,r.lanes=p,u===qc?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([u]):a.add(u),Vm(t,u,p)),!1;case 22:return r.flags|=65536,u===qc?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([u]):r.add(u)),Vm(t,u,p)),!1}throw Error(o(435,r.tag))}return Vm(t,u,p),hu(),!1}if(Et)return a=Za.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,u!==hl&&(t=Error(o(422),{cause:u}),kr(c(t,r)))):(u!==hl&&(a=Error(o(423),{cause:u}),kr(c(a,r))),t=t.current.alternate,t.flags|=65536,p&=-p,t.lanes|=p,u=c(u,r),p=jm(t.stateNode,u,p),Wd(t,p),wn!==4&&(wn=2)),!1;var x=Error(o(520),{cause:u});if(x=c(x,r),Ro===null?Ro=[x]:Ro.push(x),wn!==4&&(wn=2),a===null)return!0;u=c(u,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,t=p&-p,r.lanes|=t,t=jm(r.stateNode,u,t),Wd(r,t),!1;case 1:if(a=r.type,x=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ui===null||!Ui.has(x))))return r.flags|=65536,p&=-p,r.lanes|=p,p=jx(p),Sx(p,t,r,u),Wd(r,p),!1}r=r.return}while(r!==null);return!1}var Sm=Error(o(461)),Un=!1;function aa(t,a,r,u){a.child=t===null?Tp(a,null,r,u):Or(a,t.child,r,u)}function wx(t,a,r,u,p){r=r.render;var x=a.ref;if("ref"in u){var j={};for(var C in u)C!=="ref"&&(j[C]=u[C])}else j=u;return Cr(a),u=im(t,a,r,j,x,p),C=rm(),t!==null&&!Un?(lm(t,a,p),ni(t,a,p)):(Et&&C&&Gn(a),a.flags|=1,aa(t,a,u,p),a.child)}function Ex(t,a,r,u,p){if(t===null){var x=r.type;return typeof x=="function"&&!dl(x)&&x.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=x,kx(t,a,x,u,p)):(t=Er(r.type,null,u,a,a.mode,p),t.ref=a.ref,t.return=a,a.child=t)}if(x=t.child,!zm(t,p)){var j=x.memoizedProps;if(r=r.compare,r=r!==null?r:Ei,r(j,u)&&t.ref===a.ref)return ni(t,a,p)}return a.flags|=1,t=ss(x,u),t.ref=a.ref,t.return=a,a.child=t}function kx(t,a,r,u,p){if(t!==null){var x=t.memoizedProps;if(Ei(x,u)&&t.ref===a.ref)if(Un=!1,a.pendingProps=u=x,zm(t,p))(t.flags&131072)!==0&&(Un=!0);else return a.lanes=t.lanes,ni(t,a,p)}return wm(t,a,r,u,p)}function Tx(t,a,r,u){var p=u.children,x=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|r:r,t!==null){for(u=a.child=t.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~x}else u=0,a.child=null;return Cx(t,a,x,r,u)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Uc(a,x!==null?x.cachePool:null),x!==null?Mp(a,x):tm(),zp(a);else return u=a.lanes=536870912,Cx(t,a,x!==null?x.baseLanes|r:r,r,u)}else x!==null?(Uc(a,x.cachePool),Mp(a,x),Li(),a.memoizedState=null):(t!==null&&Uc(a,null),tm(),Li());return aa(t,a,p,r),a.child}function To(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Cx(t,a,r,u,p){var x=Yd();return x=x===null?null:{parent:In._currentValue,pool:x},a.memoizedState={baseLanes:r,cachePool:x},t!==null&&Uc(a,null),tm(),zp(a),t!==null&&fl(t,a,u,!0),a.childLanes=p,null}function nu(t,a){return a=su({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Ax(t,a,r){return Or(a,t.child,null,r),t=nu(a,a.pendingProps),t.flags|=2,Ha(a),a.memoizedState=null,t}function Z_(t,a,r){var u=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Et){if(u.mode==="hidden")return t=nu(a,u),a.lanes=536870912,To(null,t);if(am(a),(t=Zt)?(t=qg(t,ka),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:xe!==null?{id:Ae,overflow:Pe}:null,retryLane:536870912,hydrationErrors:null},r=ho(t),r.return=a,a.child=r,qt=a,Zt=null)):t=null,t===null)throw Us(a);return a.lanes=536870912,null}return nu(a,u)}var x=t.memoizedState;if(x!==null){var j=x.dehydrated;if(am(a),p)if(a.flags&256)a.flags&=-257,a=Ax(t,a,r);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(o(558));else if(Un||fl(t,a,r,!1),p=(r&t.childLanes)!==0,Un||p){if(u=cn,u!==null&&(j=ba(u,r),j!==0&&j!==x.retryLane))throw x.retryLane=j,as(t,j),za(u,t,j),Sm;hu(),a=Ax(t,a,r)}else t=x.treeContext,Zt=rs(j.nextSibling),qt=a,Et=!0,Bs=null,ka=!1,t!==null&&pa(a,t),a=nu(a,u),a.flags|=4096;return a}return t=ss(t.child,{mode:u.mode,children:u.children}),t.ref=a.ref,a.child=t,t.return=a,t}function au(t,a){var r=a.ref;if(r===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(t===null||t.ref!==r)&&(a.flags|=4194816)}}function wm(t,a,r,u,p){return Cr(a),r=im(t,a,r,u,void 0,p),u=rm(),t!==null&&!Un?(lm(t,a,p),ni(t,a,p)):(Et&&u&&Gn(a),a.flags|=1,aa(t,a,r,p),a.child)}function Mx(t,a,r,u,p,x){return Cr(a),a.updateQueue=null,r=Dp(a,u,r,p),Op(t),u=rm(),t!==null&&!Un?(lm(t,a,x),ni(t,a,x)):(Et&&u&&Gn(a),a.flags|=1,aa(t,a,r,x),a.child)}function zx(t,a,r,u,p){if(Cr(a),a.stateNode===null){var x=$s,j=r.contextType;typeof j=="object"&&j!==null&&(x=na(j)),x=new r(u,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Nm,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=u,x.state=a.memoizedState,x.refs={},Xd(a),j=r.contextType,x.context=typeof j=="object"&&j!==null?na(j):$s,x.state=a.memoizedState,j=r.getDerivedStateFromProps,typeof j=="function"&&(_m(a,r,j,u),x.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(j=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),j!==x.state&&Nm.enqueueReplaceState(x,x.state,null),jo(a,u,x,p),No(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(t===null){x=a.stateNode;var C=a.memoizedProps,G=Rr(r,C);x.props=G;var he=x.context,we=r.contextType;j=$s,typeof we=="object"&&we!==null&&(j=na(we));var Me=r.getDerivedStateFromProps;we=typeof Me=="function"||typeof x.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,we||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C||he!==j)&&yx(a,x,u,j),zi=!1;var ge=a.memoizedState;x.state=ge,jo(a,u,x,p),No(),he=a.memoizedState,C||ge!==he||zi?(typeof Me=="function"&&(_m(a,r,Me,u),he=a.memoizedState),(G=zi||gx(a,r,G,u,ge,he,j))?(we||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=he),x.props=u,x.state=he,x.context=j,u=G):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{x=a.stateNode,Jd(t,a),j=a.memoizedProps,we=Rr(r,j),x.props=we,Me=a.pendingProps,ge=x.context,he=r.contextType,G=$s,typeof he=="object"&&he!==null&&(G=na(he)),C=r.getDerivedStateFromProps,(he=typeof C=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(j!==Me||ge!==G)&&yx(a,x,u,G),zi=!1,ge=a.memoizedState,x.state=ge,jo(a,u,x,p),No();var ye=a.memoizedState;j!==Me||ge!==ye||zi||t!==null&&t.dependencies!==null&&Ic(t.dependencies)?(typeof C=="function"&&(_m(a,r,C,u),ye=a.memoizedState),(we=zi||gx(a,r,we,u,ge,ye,G)||t!==null&&t.dependencies!==null&&Ic(t.dependencies))?(he||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(u,ye,G),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(u,ye,G)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=ye),x.props=u,x.state=ye,x.context=G,u=we):(typeof x.componentDidUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=1024),u=!1)}return x=u,au(t,a),u=(a.flags&128)!==0,x||u?(x=a.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,t!==null&&u?(a.child=Or(a,t.child,null,p),a.child=Or(a,null,r,p)):aa(t,a,r,p),a.memoizedState=x.state,t=a.child):t=ni(t,a,p),t}function Ox(t,a,r,u){return Js(),a.flags|=256,aa(t,a,r,u),a.child}var Em={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function km(t){return{baseLanes:t,cachePool:Np()}}function Tm(t,a,r){return t=t!==null?t.childLanes&~r:0,a&&(t|=Ga),t}function Dx(t,a,r){var u=a.pendingProps,p=!1,x=(a.flags&128)!==0,j;if((j=x)||(j=t!==null&&t.memoizedState===null?!1:(On.current&2)!==0),j&&(p=!0,a.flags&=-129),j=(a.flags&32)!==0,a.flags&=-33,t===null){if(Et){if(p?Ri(a):Li(),(t=Zt)?(t=qg(t,ka),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:xe!==null?{id:Ae,overflow:Pe}:null,retryLane:536870912,hydrationErrors:null},r=ho(t),r.return=a,a.child=r,qt=a,Zt=null)):t=null,t===null)throw Us(a);return uh(t)?a.lanes=32:a.lanes=536870912,null}var C=u.children;return u=u.fallback,p?(Li(),p=a.mode,C=su({mode:"hidden",children:C},p),u=Xs(u,p,r,null),C.return=a,u.return=a,C.sibling=u,a.child=C,u=a.child,u.memoizedState=km(r),u.childLanes=Tm(t,j,r),a.memoizedState=Em,To(null,u)):(Ri(a),Cm(a,C))}var G=t.memoizedState;if(G!==null&&(C=G.dehydrated,C!==null)){if(x)a.flags&256?(Ri(a),a.flags&=-257,a=Am(t,a,r)):a.memoizedState!==null?(Li(),a.child=t.child,a.flags|=128,a=null):(Li(),C=u.fallback,p=a.mode,u=su({mode:"visible",children:u.children},p),C=Xs(C,p,r,null),C.flags|=2,u.return=a,C.return=a,u.sibling=C,a.child=u,Or(a,t.child,null,r),u=a.child,u.memoizedState=km(r),u.childLanes=Tm(t,j,r),a.memoizedState=Em,a=To(null,u));else if(Ri(a),uh(C)){if(j=C.nextSibling&&C.nextSibling.dataset,j)var he=j.dgst;j=he,u=Error(o(419)),u.stack="",u.digest=j,kr({value:u,source:null,stack:null}),a=Am(t,a,r)}else if(Un||fl(t,a,r,!1),j=(r&t.childLanes)!==0,Un||j){if(j=cn,j!==null&&(u=ba(j,r),u!==0&&u!==G.retryLane))throw G.retryLane=u,as(t,u),za(j,t,u),Sm;ch(C)||hu(),a=Am(t,a,r)}else ch(C)?(a.flags|=192,a.child=t.child,a=null):(t=G.treeContext,Zt=rs(C.nextSibling),qt=a,Et=!0,Bs=null,ka=!1,t!==null&&pa(a,t),a=Cm(a,u.children),a.flags|=4096);return a}return p?(Li(),C=u.fallback,p=a.mode,G=t.child,he=G.sibling,u=ss(G,{mode:"hidden",children:u.children}),u.subtreeFlags=G.subtreeFlags&65011712,he!==null?C=ss(he,C):(C=Xs(C,p,r,null),C.flags|=2),C.return=a,u.return=a,u.sibling=C,a.child=u,To(null,u),u=a.child,C=t.child.memoizedState,C===null?C=km(r):(p=C.cachePool,p!==null?(G=In._currentValue,p=p.parent!==G?{parent:G,pool:G}:p):p=Np(),C={baseLanes:C.baseLanes|r,cachePool:p}),u.memoizedState=C,u.childLanes=Tm(t,j,r),a.memoizedState=Em,To(t.child,u)):(Ri(a),r=t.child,t=r.sibling,r=ss(r,{mode:"visible",children:u.children}),r.return=a,r.sibling=null,t!==null&&(j=a.deletions,j===null?(a.deletions=[t],a.flags|=16):j.push(t)),a.child=r,a.memoizedState=null,r)}function Cm(t,a){return a=su({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function su(t,a){return t=da(22,t,null,a),t.lanes=0,t}function Am(t,a,r){return Or(a,t.child,null,r),t=Cm(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Rx(t,a,r){t.lanes|=a;var u=t.alternate;u!==null&&(u.lanes|=a),Kd(t.return,a,r)}function Mm(t,a,r,u,p,x){var j=t.memoizedState;j===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:p,treeForkCount:x}:(j.isBackwards=a,j.rendering=null,j.renderingStartTime=0,j.last=u,j.tail=r,j.tailMode=p,j.treeForkCount=x)}function Lx(t,a,r){var u=a.pendingProps,p=u.revealOrder,x=u.tail;u=u.children;var j=On.current,C=(j&2)!==0;if(C?(j=j&1|2,a.flags|=128):j&=1,P(On,j),aa(t,a,u,r),u=Et?E:0,!C&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rx(t,r,a);else if(t.tag===19)Rx(t,r,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(p){case"forwards":for(r=a.child,p=null;r!==null;)t=r.alternate,t!==null&&Gc(t)===null&&(p=r),r=r.sibling;r=p,r===null?(p=a.child,a.child=null):(p=r.sibling,r.sibling=null),Mm(a,!1,p,r,x,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=a.child,a.child=null;p!==null;){if(t=p.alternate,t!==null&&Gc(t)===null){a.child=p;break}t=p.sibling,p.sibling=r,r=p,p=t}Mm(a,!0,r,null,x,u);break;case"together":Mm(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function ni(t,a,r){if(t!==null&&(a.dependencies=t.dependencies),Bi|=a.lanes,(r&a.childLanes)===0)if(t!==null){if(fl(t,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(o(153));if(a.child!==null){for(t=a.child,r=ss(t,t.pendingProps),a.child=r,r.return=a;t.sibling!==null;)t=t.sibling,r=r.sibling=ss(t,t.pendingProps),r.return=a;r.sibling=null}return a.child}function zm(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Ic(t)))}function H_(t,a,r){switch(a.tag){case 3:Ge(a,a.stateNode.containerInfo),Mi(a,In,t.memoizedState.cache),Js();break;case 27:case 5:Ke(a);break;case 4:Ge(a,a.stateNode.containerInfo);break;case 10:Mi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,am(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Ri(a),a.flags|=128,null):(r&a.child.childLanes)!==0?Dx(t,a,r):(Ri(a),t=ni(t,a,r),t!==null?t.sibling:null);Ri(a);break;case 19:var p=(t.flags&128)!==0;if(u=(r&a.childLanes)!==0,u||(fl(t,a,r,!1),u=(r&a.childLanes)!==0),p){if(u)return Lx(t,a,r);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),P(On,On.current),u)break;return null;case 22:return a.lanes=0,Tx(t,a,r,a.pendingProps);case 24:Mi(a,In,t.memoizedState.cache)}return ni(t,a,r)}function Px(t,a,r){if(t!==null)if(t.memoizedProps!==a.pendingProps)Un=!0;else{if(!zm(t,r)&&(a.flags&128)===0)return Un=!1,H_(t,a,r);Un=(t.flags&131072)!==0}else Un=!1,Et&&(a.flags&1048576)!==0&&gt(a,E,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(t=Mr(a.elementType),a.type=t,typeof t=="function")dl(t)?(u=Rr(t,u),a.tag=1,a=zx(null,a,t,u,r)):(a.tag=0,a=wm(null,a,t,u,r));else{if(t!=null){var p=t.$$typeof;if(p===K){a.tag=11,a=wx(null,a,t,u,r);break e}else if(p===q){a.tag=14,a=Ex(null,a,t,u,r);break e}}throw a=X(t)||t,Error(o(306,a,""))}}return a;case 0:return wm(t,a,a.type,a.pendingProps,r);case 1:return u=a.type,p=Rr(u,a.pendingProps),zx(t,a,u,p,r);case 3:e:{if(Ge(a,a.stateNode.containerInfo),t===null)throw Error(o(387));u=a.pendingProps;var x=a.memoizedState;p=x.element,Jd(t,a),jo(a,u,null,r);var j=a.memoizedState;if(u=j.cache,Mi(a,In,u),u!==x.cache&&Gd(a,[In],r,!0),No(),u=j.element,x.isDehydrated)if(x={element:u,isDehydrated:!1,cache:j.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=Ox(t,a,u,r);break e}else if(u!==p){p=c(Error(o(424)),a),kr(p),a=Ox(t,a,u,r);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Zt=rs(t.firstChild),qt=a,Et=!0,Bs=null,ka=!0,r=Tp(a,null,u,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Js(),u===p){a=ni(t,a,r);break e}aa(t,a,u,r)}a=a.child}return a;case 26:return au(t,a),t===null?(r=Vg(a.type,null,a.pendingProps,null))?a.memoizedState=r:Et||(r=a.type,t=a.pendingProps,u=bu(Ee.current).createElement(r),u[Yt]=a,u[it]=t,sa(u,r,t),dn(u),a.stateNode=u):a.memoizedState=Vg(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Ke(a),t===null&&Et&&(u=a.stateNode=Kg(a.type,a.pendingProps,Ee.current),qt=a,ka=!0,p=Zt,Hi(a.type)?(dh=p,Zt=rs(u.firstChild)):Zt=p),aa(t,a,a.pendingProps.children,r),au(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Et&&((p=u=Zt)&&(u=bN(u,a.type,a.pendingProps,ka),u!==null?(a.stateNode=u,qt=a,Zt=rs(u.firstChild),ka=!1,p=!0):p=!1),p||Us(a)),Ke(a),p=a.type,x=a.pendingProps,j=t!==null?t.memoizedProps:null,u=x.children,rh(p,x)?u=null:j!==null&&rh(p,j)&&(a.flags|=32),a.memoizedState!==null&&(p=im(t,a,R_,null,null,r),Zo._currentValue=p),au(t,a),aa(t,a,u,r),a.child;case 6:return t===null&&Et&&((t=r=Zt)&&(r=_N(r,a.pendingProps,ka),r!==null?(a.stateNode=r,qt=a,Zt=null,t=!0):t=!1),t||Us(a)),null;case 13:return Dx(t,a,r);case 4:return Ge(a,a.stateNode.containerInfo),u=a.pendingProps,t===null?a.child=Or(a,null,u,r):aa(t,a,u,r),a.child;case 11:return wx(t,a,a.type,a.pendingProps,r);case 7:return aa(t,a,a.pendingProps,r),a.child;case 8:return aa(t,a,a.pendingProps.children,r),a.child;case 12:return aa(t,a,a.pendingProps.children,r),a.child;case 10:return u=a.pendingProps,Mi(a,a.type,u.value),aa(t,a,u.children,r),a.child;case 9:return p=a.type._context,u=a.pendingProps.children,Cr(a),p=na(p),u=u(p),a.flags|=1,aa(t,a,u,r),a.child;case 14:return Ex(t,a,a.type,a.pendingProps,r);case 15:return kx(t,a,a.type,a.pendingProps,r);case 19:return Lx(t,a,r);case 31:return Z_(t,a,r);case 22:return Tx(t,a,r,a.pendingProps);case 24:return Cr(a),u=na(In),t===null?(p=Yd(),p===null&&(p=cn,x=Qd(),p.pooledCache=x,x.refCount++,x!==null&&(p.pooledCacheLanes|=r),p=x),a.memoizedState={parent:u,cache:p},Xd(a),Mi(a,In,p)):((t.lanes&r)!==0&&(Jd(t,a),jo(a,null,null,r),No()),p=t.memoizedState,x=a.memoizedState,p.parent!==u?(p={parent:u,cache:u},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Mi(a,In,u)):(u=x.cache,Mi(a,In,u),u!==p.cache&&Gd(a,[In],r,!0))),aa(t,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(o(156,a.tag))}function ai(t){t.flags|=4}function Om(t,a,r,u,p){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(p&335544128)===p)if(t.stateNode.complete)t.flags|=8192;else if(ug())t.flags|=8192;else throw zr=qc,$d}else t.flags&=-16777217}function Ix(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Wg(a))if(ug())t.flags|=8192;else throw zr=qc,$d}function iu(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?An():536870912,t.lanes|=a,El|=a)}function Co(t,a){if(!Et)switch(t.tailMode){case"hidden":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function hn(t){var a=t.alternate!==null&&t.alternate.child===t.child,r=0,u=0;if(a)for(var p=t.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=u,t.childLanes=r,a}function K_(t,a,r){var u=a.pendingProps;switch(jn(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(a),null;case 1:return hn(a),null;case 3:return r=a.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Ws(In),pe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(js(a)?ai(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,xo())),hn(a),null;case 26:var p=a.type,x=a.memoizedState;return t===null?(ai(a),x!==null?(hn(a),Ix(a,x)):(hn(a),Om(a,p,null,u,r))):x?x!==t.memoizedState?(ai(a),hn(a),Ix(a,x)):(hn(a),a.flags&=-16777217):(t=t.memoizedProps,t!==u&&ai(a),hn(a),Om(a,p,t,u,r)),null;case 27:if(_e(a),r=Ee.current,p=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==u&&ai(a);else{if(!u){if(a.stateNode===null)throw Error(o(166));return hn(a),null}t=ce.current,js(a)?po(a):(t=Kg(p,u,r),a.stateNode=t,ai(a))}return hn(a),null;case 5:if(_e(a),p=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==u&&ai(a);else{if(!u){if(a.stateNode===null)throw Error(o(166));return hn(a),null}if(x=ce.current,js(a))po(a);else{var j=bu(Ee.current);switch(x){case 1:x=j.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:x=j.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":x=j.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":x=j.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":x=j.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof u.is=="string"?j.createElement("select",{is:u.is}):j.createElement("select"),u.multiple?x.multiple=!0:u.size&&(x.size=u.size);break;default:x=typeof u.is=="string"?j.createElement(p,{is:u.is}):j.createElement(p)}}x[Yt]=a,x[it]=u;e:for(j=a.child;j!==null;){if(j.tag===5||j.tag===6)x.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===a)break e;for(;j.sibling===null;){if(j.return===null||j.return===a)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}a.stateNode=x;e:switch(sa(x,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ai(a)}}return hn(a),Om(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,r),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==u&&ai(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(o(166));if(t=Ee.current,js(a)){if(t=a.stateNode,r=a.memoizedProps,u=null,p=qt,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}t[Yt]=a,t=!!(t.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||Dg(t.nodeValue,r)),t||Us(a,!0)}else t=bu(t).createTextNode(u),t[Yt]=a,a.stateNode=t}return hn(a),null;case 31:if(r=a.memoizedState,t===null||t.memoizedState!==null){if(u=js(a),r!==null){if(t===null){if(!u)throw Error(o(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[Yt]=a}else Js(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;hn(a),t=!1}else r=xo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return a.flags&256?(Ha(a),a):(Ha(a),null);if((a.flags&128)!==0)throw Error(o(558))}return hn(a),null;case 13:if(u=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(p=js(a),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(o(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));p[Yt]=a}else Js(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;hn(a),p=!1}else p=xo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Ha(a),a):(Ha(a),null)}return Ha(a),(a.flags&128)!==0?(a.lanes=r,a):(r=u!==null,t=t!==null&&t.memoizedState!==null,r&&(u=a.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),x=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==p&&(u.flags|=2048)),r!==t&&r&&(a.child.flags|=8192),iu(a,a.updateQueue),hn(a),null);case 4:return pe(),t===null&&th(a.stateNode.containerInfo),hn(a),null;case 10:return Ws(a.type),hn(a),null;case 19:if(te(On),u=a.memoizedState,u===null)return hn(a),null;if(p=(a.flags&128)!==0,x=u.rendering,x===null)if(p)Co(u,!1);else{if(wn!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(x=Gc(t),x!==null){for(a.flags|=128,Co(u,!1),t=x.updateQueue,a.updateQueue=t,iu(a,t),a.subtreeFlags=0,t=r,r=a.child;r!==null;)mo(r,t),r=r.sibling;return P(On,On.current&1|2),Et&&We(a,u.treeForkCount),a.child}t=t.sibling}u.tail!==null&&se()>uu&&(a.flags|=128,p=!0,Co(u,!1),a.lanes=4194304)}else{if(!p)if(t=Gc(x),t!==null){if(a.flags|=128,p=!0,t=t.updateQueue,a.updateQueue=t,iu(a,t),Co(u,!0),u.tail===null&&u.tailMode==="hidden"&&!x.alternate&&!Et)return hn(a),null}else 2*se()-u.renderingStartTime>uu&&r!==536870912&&(a.flags|=128,p=!0,Co(u,!1),a.lanes=4194304);u.isBackwards?(x.sibling=a.child,a.child=x):(t=u.last,t!==null?t.sibling=x:a.child=x,u.last=x)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=se(),t.sibling=null,r=On.current,P(On,p?r&1|2:r&1),Et&&We(a,u.treeForkCount),t):(hn(a),null);case 22:case 23:return Ha(a),nm(),u=a.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(r&536870912)!==0&&(a.flags&128)===0&&(hn(a),a.subtreeFlags&6&&(a.flags|=8192)):hn(a),r=a.updateQueue,r!==null&&iu(a,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==r&&(a.flags|=2048),t!==null&&te(Ar),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Ws(In),hn(a),null;case 25:return null;case 30:return null}throw Error(o(156,a.tag))}function G_(t,a){switch(jn(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Ws(In),pe(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return _e(a),null;case 31:if(a.memoizedState!==null){if(Ha(a),a.alternate===null)throw Error(o(340));Js()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Ha(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(o(340));Js()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return te(On),null;case 4:return pe(),null;case 10:return Ws(a.type),null;case 22:case 23:return Ha(a),nm(),t!==null&&te(Ar),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Ws(In),null;case 25:return null;default:return null}}function Bx(t,a){switch(jn(a),a.tag){case 3:Ws(In),pe();break;case 26:case 27:case 5:_e(a);break;case 4:pe();break;case 31:a.memoizedState!==null&&Ha(a);break;case 13:Ha(a);break;case 19:te(On);break;case 10:Ws(a.type);break;case 22:case 23:Ha(a),nm(),t!==null&&te(Ar);break;case 24:Ws(In)}}function Ao(t,a){try{var r=a.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var p=u.next;r=p;do{if((r.tag&t)===t){u=void 0;var x=r.create,j=r.inst;u=x(),j.destroy=u}r=r.next}while(r!==p)}}catch(C){Wt(a,a.return,C)}}function Pi(t,a,r){try{var u=a.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var x=p.next;u=x;do{if((u.tag&t)===t){var j=u.inst,C=j.destroy;if(C!==void 0){j.destroy=void 0,p=a;var G=r,he=C;try{he()}catch(we){Wt(p,G,we)}}}u=u.next}while(u!==x)}}catch(we){Wt(a,a.return,we)}}function Ux(t){var a=t.updateQueue;if(a!==null){var r=t.stateNode;try{Ap(a,r)}catch(u){Wt(t,t.return,u)}}}function Fx(t,a,r){r.props=Rr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(u){Wt(t,a,u)}}function Mo(t,a){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof r=="function"?t.refCleanup=r(u):r.current=u}}catch(p){Wt(t,a,p)}}function qs(t,a){var r=t.ref,u=t.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(p){Wt(t,a,p)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){Wt(t,a,p)}else r.current=null}function qx(t){var a=t.type,r=t.memoizedProps,u=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(p){Wt(t,t.return,p)}}function Dm(t,a,r){try{var u=t.stateNode;fN(u,t.type,r,a),u[it]=a}catch(p){Wt(t,t.return,p)}}function Zx(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Hi(t.type)||t.tag===4}function Rm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Hi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lm(t,a,r){var u=t.tag;if(u===5||u===6)t=t.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(t),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=ja));else if(u!==4&&(u===27&&Hi(t.type)&&(r=t.stateNode,a=null),t=t.child,t!==null))for(Lm(t,a,r),t=t.sibling;t!==null;)Lm(t,a,r),t=t.sibling}function ru(t,a,r){var u=t.tag;if(u===5||u===6)t=t.stateNode,a?r.insertBefore(t,a):r.appendChild(t);else if(u!==4&&(u===27&&Hi(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(ru(t,a,r),t=t.sibling;t!==null;)ru(t,a,r),t=t.sibling}function Hx(t){var a=t.stateNode,r=t.memoizedProps;try{for(var u=t.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);sa(a,u,r),a[Yt]=t,a[it]=r}catch(x){Wt(t,t.return,x)}}var si=!1,Fn=!1,Pm=!1,Kx=typeof WeakSet=="function"?WeakSet:Set,Xn=null;function Q_(t,a){if(t=t.containerInfo,sh=ku,t=vr(t),Ds(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var p=u.anchorOffset,x=u.focusNode;u=u.focusOffset;try{r.nodeType,x.nodeType}catch{r=null;break e}var j=0,C=-1,G=-1,he=0,we=0,Me=t,ge=null;t:for(;;){for(var ye;Me!==r||p!==0&&Me.nodeType!==3||(C=j+p),Me!==x||u!==0&&Me.nodeType!==3||(G=j+u),Me.nodeType===3&&(j+=Me.nodeValue.length),(ye=Me.firstChild)!==null;)ge=Me,Me=ye;for(;;){if(Me===t)break t;if(ge===r&&++he===p&&(C=j),ge===x&&++we===u&&(G=j),(ye=Me.nextSibling)!==null)break;Me=ge,ge=Me.parentNode}Me=ye}r=C===-1||G===-1?null:{start:C,end:G}}else r=null}r=r||{start:0,end:0}}else r=null;for(ih={focusedElem:t,selectionRange:r},ku=!1,Xn=a;Xn!==null;)if(a=Xn,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Xn=t;else for(;Xn!==null;){switch(a=Xn,x=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)p=t[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&x!==null){t=void 0,r=a,p=x.memoizedProps,x=x.memoizedState,u=r.stateNode;try{var Qe=Rr(r.type,p);t=u.getSnapshotBeforeUpdate(Qe,x),u.__reactInternalSnapshotBeforeUpdate=t}catch(st){Wt(r,r.return,st)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,r=t.nodeType,r===9)oh(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":oh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=a.sibling,t!==null){t.return=a.return,Xn=t;break}Xn=a.return}}function Gx(t,a,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:ri(t,r),u&4&&Ao(5,r);break;case 1:if(ri(t,r),u&4)if(t=r.stateNode,a===null)try{t.componentDidMount()}catch(j){Wt(r,r.return,j)}else{var p=Rr(r.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(p,a,t.__reactInternalSnapshotBeforeUpdate)}catch(j){Wt(r,r.return,j)}}u&64&&Ux(r),u&512&&Mo(r,r.return);break;case 3:if(ri(t,r),u&64&&(t=r.updateQueue,t!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{Ap(t,a)}catch(j){Wt(r,r.return,j)}}break;case 27:a===null&&u&4&&Hx(r);case 26:case 5:ri(t,r),a===null&&u&4&&qx(r),u&512&&Mo(r,r.return);break;case 12:ri(t,r);break;case 31:ri(t,r),u&4&&Yx(t,r);break;case 13:ri(t,r),u&4&&$x(t,r),u&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=nN.bind(null,r),NN(t,r))));break;case 22:if(u=r.memoizedState!==null||si,!u){a=a!==null&&a.memoizedState!==null||Fn,p=si;var x=Fn;si=u,(Fn=a)&&!x?li(t,r,(r.subtreeFlags&8772)!==0):ri(t,r),si=p,Fn=x}break;case 30:break;default:ri(t,r)}}function Qx(t){var a=t.alternate;a!==null&&(t.alternate=null,Qx(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&B(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var gn=null,Ta=!1;function ii(t,a,r){for(r=r.child;r!==null;)Vx(t,a,r),r=r.sibling}function Vx(t,a,r){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(nt,r)}catch{}switch(r.tag){case 26:Fn||qs(r,a),ii(t,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Fn||qs(r,a);var u=gn,p=Ta;Hi(r.type)&&(gn=r.stateNode,Ta=!1),ii(t,a,r),Uo(r.stateNode),gn=u,Ta=p;break;case 5:Fn||qs(r,a);case 6:if(u=gn,p=Ta,gn=null,ii(t,a,r),gn=u,Ta=p,gn!==null)if(Ta)try{(gn.nodeType===9?gn.body:gn.nodeName==="HTML"?gn.ownerDocument.body:gn).removeChild(r.stateNode)}catch(x){Wt(r,a,x)}else try{gn.removeChild(r.stateNode)}catch(x){Wt(r,a,x)}break;case 18:gn!==null&&(Ta?(t=gn,Ug(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Dl(t)):Ug(gn,r.stateNode));break;case 4:u=gn,p=Ta,gn=r.stateNode.containerInfo,Ta=!0,ii(t,a,r),gn=u,Ta=p;break;case 0:case 11:case 14:case 15:Pi(2,r,a),Fn||Pi(4,r,a),ii(t,a,r);break;case 1:Fn||(qs(r,a),u=r.stateNode,typeof u.componentWillUnmount=="function"&&Fx(r,a,u)),ii(t,a,r);break;case 21:ii(t,a,r);break;case 22:Fn=(u=Fn)||r.memoizedState!==null,ii(t,a,r),Fn=u;break;default:ii(t,a,r)}}function Yx(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Dl(t)}catch(r){Wt(a,a.return,r)}}}function $x(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Dl(t)}catch(r){Wt(a,a.return,r)}}function V_(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Kx),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Kx),a;default:throw Error(o(435,t.tag))}}function lu(t,a){var r=V_(t);a.forEach(function(u){if(!r.has(u)){r.add(u);var p=aN.bind(null,t,u);u.then(p,p)}})}function Ca(t,a){var r=a.deletions;if(r!==null)for(var u=0;u<r.length;u++){var p=r[u],x=t,j=a,C=j;e:for(;C!==null;){switch(C.tag){case 27:if(Hi(C.type)){gn=C.stateNode,Ta=!1;break e}break;case 5:gn=C.stateNode,Ta=!1;break e;case 3:case 4:gn=C.stateNode.containerInfo,Ta=!0;break e}C=C.return}if(gn===null)throw Error(o(160));Vx(x,j,p),gn=null,Ta=!1,x=p.alternate,x!==null&&(x.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Xx(a,t),a=a.sibling}var ws=null;function Xx(t,a){var r=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ca(a,t),Aa(t),u&4&&(Pi(3,t,t.return),Ao(3,t),Pi(5,t,t.return));break;case 1:Ca(a,t),Aa(t),u&512&&(Fn||r===null||qs(r,r.return)),u&64&&si&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var p=ws;if(Ca(a,t),Aa(t),u&512&&(Fn||r===null||qs(r,r.return)),u&4){var x=r!==null?r.memoizedState:null;if(u=t.memoizedState,r===null)if(u===null)if(t.stateNode===null){e:{u=t.type,r=t.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":x=p.getElementsByTagName("title")[0],(!x||x[zn]||x[Yt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=p.createElement(u),p.head.insertBefore(x,p.querySelector("head > title"))),sa(x,u,r),x[Yt]=t,dn(x),u=x;break e;case"link":var j=Xg("link","href",p).get(u+(r.href||""));if(j){for(var C=0;C<j.length;C++)if(x=j[C],x.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&x.getAttribute("rel")===(r.rel==null?null:r.rel)&&x.getAttribute("title")===(r.title==null?null:r.title)&&x.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){j.splice(C,1);break t}}x=p.createElement(u),sa(x,u,r),p.head.appendChild(x);break;case"meta":if(j=Xg("meta","content",p).get(u+(r.content||""))){for(C=0;C<j.length;C++)if(x=j[C],x.getAttribute("content")===(r.content==null?null:""+r.content)&&x.getAttribute("name")===(r.name==null?null:r.name)&&x.getAttribute("property")===(r.property==null?null:r.property)&&x.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&x.getAttribute("charset")===(r.charSet==null?null:r.charSet)){j.splice(C,1);break t}}x=p.createElement(u),sa(x,u,r),p.head.appendChild(x);break;default:throw Error(o(468,u))}x[Yt]=t,dn(x),u=x}t.stateNode=u}else Jg(p,t.type,t.stateNode);else t.stateNode=$g(p,u,t.memoizedProps);else x!==u?(x===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):x.count--,u===null?Jg(p,t.type,t.stateNode):$g(p,u,t.memoizedProps)):u===null&&t.stateNode!==null&&Dm(t,t.memoizedProps,r.memoizedProps)}break;case 27:Ca(a,t),Aa(t),u&512&&(Fn||r===null||qs(r,r.return)),r!==null&&u&4&&Dm(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Ca(a,t),Aa(t),u&512&&(Fn||r===null||qs(r,r.return)),t.flags&32){p=t.stateNode;try{Xa(p,"")}catch(Qe){Wt(t,t.return,Qe)}}u&4&&t.stateNode!=null&&(p=t.memoizedProps,Dm(t,p,r!==null?r.memoizedProps:p)),u&1024&&(Pm=!0);break;case 6:if(Ca(a,t),Aa(t),u&4){if(t.stateNode===null)throw Error(o(162));u=t.memoizedProps,r=t.stateNode;try{r.nodeValue=u}catch(Qe){Wt(t,t.return,Qe)}}break;case 3:if(ju=null,p=ws,ws=_u(a.containerInfo),Ca(a,t),ws=p,Aa(t),u&4&&r!==null&&r.memoizedState.isDehydrated)try{Dl(a.containerInfo)}catch(Qe){Wt(t,t.return,Qe)}Pm&&(Pm=!1,Jx(t));break;case 4:u=ws,ws=_u(t.stateNode.containerInfo),Ca(a,t),Aa(t),ws=u;break;case 12:Ca(a,t),Aa(t);break;case 31:Ca(a,t),Aa(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,lu(t,u)));break;case 13:Ca(a,t),Aa(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(cu=se()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,lu(t,u)));break;case 22:p=t.memoizedState!==null;var G=r!==null&&r.memoizedState!==null,he=si,we=Fn;if(si=he||p,Fn=we||G,Ca(a,t),Fn=we,si=he,Aa(t),u&8192)e:for(a=t.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(r===null||G||si||Fn||Lr(t)),r=null,a=t;;){if(a.tag===5||a.tag===26){if(r===null){G=r=a;try{if(x=G.stateNode,p)j=x.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{C=G.stateNode;var Me=G.memoizedProps.style,ge=Me!=null&&Me.hasOwnProperty("display")?Me.display:null;C.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(Qe){Wt(G,G.return,Qe)}}}else if(a.tag===6){if(r===null){G=a;try{G.stateNode.nodeValue=p?"":G.memoizedProps}catch(Qe){Wt(G,G.return,Qe)}}}else if(a.tag===18){if(r===null){G=a;try{var ye=G.stateNode;p?Fg(ye,!0):Fg(G.stateNode,!1)}catch(Qe){Wt(G,G.return,Qe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=t.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,lu(t,r))));break;case 19:Ca(a,t),Aa(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,lu(t,u)));break;case 30:break;case 21:break;default:Ca(a,t),Aa(t)}}function Aa(t){var a=t.flags;if(a&2){try{for(var r,u=t.return;u!==null;){if(Zx(u)){r=u;break}u=u.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var p=r.stateNode,x=Rm(t);ru(t,x,p);break;case 5:var j=r.stateNode;r.flags&32&&(Xa(j,""),r.flags&=-33);var C=Rm(t);ru(t,C,j);break;case 3:case 4:var G=r.stateNode.containerInfo,he=Rm(t);Lm(t,he,G);break;default:throw Error(o(161))}}catch(we){Wt(t,t.return,we)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function Jx(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;Jx(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function ri(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Gx(t,a.alternate,a),a=a.sibling}function Lr(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Pi(4,a,a.return),Lr(a);break;case 1:qs(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&Fx(a,a.return,r),Lr(a);break;case 27:Uo(a.stateNode);case 26:case 5:qs(a,a.return),Lr(a);break;case 22:a.memoizedState===null&&Lr(a);break;case 30:Lr(a);break;default:Lr(a)}t=t.sibling}}function li(t,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,p=t,x=a,j=x.flags;switch(x.tag){case 0:case 11:case 15:li(p,x,r),Ao(4,x);break;case 1:if(li(p,x,r),u=x,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(he){Wt(u,u.return,he)}if(u=x,p=u.updateQueue,p!==null){var C=u.stateNode;try{var G=p.shared.hiddenCallbacks;if(G!==null)for(p.shared.hiddenCallbacks=null,p=0;p<G.length;p++)Cp(G[p],C)}catch(he){Wt(u,u.return,he)}}r&&j&64&&Ux(x),Mo(x,x.return);break;case 27:Hx(x);case 26:case 5:li(p,x,r),r&&u===null&&j&4&&qx(x),Mo(x,x.return);break;case 12:li(p,x,r);break;case 31:li(p,x,r),r&&j&4&&Yx(p,x);break;case 13:li(p,x,r),r&&j&4&&$x(p,x);break;case 22:x.memoizedState===null&&li(p,x,r),Mo(x,x.return);break;case 30:break;default:li(p,x,r)}a=a.sibling}}function Im(t,a){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&go(r))}function Bm(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&go(t))}function Es(t,a,r,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Wx(t,a,r,u),a=a.sibling}function Wx(t,a,r,u){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Es(t,a,r,u),p&2048&&Ao(9,a);break;case 1:Es(t,a,r,u);break;case 3:Es(t,a,r,u),p&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&go(t)));break;case 12:if(p&2048){Es(t,a,r,u),t=a.stateNode;try{var x=a.memoizedProps,j=x.id,C=x.onPostCommit;typeof C=="function"&&C(j,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(G){Wt(a,a.return,G)}}else Es(t,a,r,u);break;case 31:Es(t,a,r,u);break;case 13:Es(t,a,r,u);break;case 23:break;case 22:x=a.stateNode,j=a.alternate,a.memoizedState!==null?x._visibility&2?Es(t,a,r,u):zo(t,a):x._visibility&2?Es(t,a,r,u):(x._visibility|=2,jl(t,a,r,u,(a.subtreeFlags&10256)!==0||!1)),p&2048&&Im(j,a);break;case 24:Es(t,a,r,u),p&2048&&Bm(a.alternate,a);break;default:Es(t,a,r,u)}}function jl(t,a,r,u,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=t,j=a,C=r,G=u,he=j.flags;switch(j.tag){case 0:case 11:case 15:jl(x,j,C,G,p),Ao(8,j);break;case 23:break;case 22:var we=j.stateNode;j.memoizedState!==null?we._visibility&2?jl(x,j,C,G,p):zo(x,j):(we._visibility|=2,jl(x,j,C,G,p)),p&&he&2048&&Im(j.alternate,j);break;case 24:jl(x,j,C,G,p),p&&he&2048&&Bm(j.alternate,j);break;default:jl(x,j,C,G,p)}a=a.sibling}}function zo(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=t,u=a,p=u.flags;switch(u.tag){case 22:zo(r,u),p&2048&&Im(u.alternate,u);break;case 24:zo(r,u),p&2048&&Bm(u.alternate,u);break;default:zo(r,u)}a=a.sibling}}var Oo=8192;function Sl(t,a,r){if(t.subtreeFlags&Oo)for(t=t.child;t!==null;)eg(t,a,r),t=t.sibling}function eg(t,a,r){switch(t.tag){case 26:Sl(t,a,r),t.flags&Oo&&t.memoizedState!==null&&DN(r,ws,t.memoizedState,t.memoizedProps);break;case 5:Sl(t,a,r);break;case 3:case 4:var u=ws;ws=_u(t.stateNode.containerInfo),Sl(t,a,r),ws=u;break;case 22:t.memoizedState===null&&(u=t.alternate,u!==null&&u.memoizedState!==null?(u=Oo,Oo=16777216,Sl(t,a,r),Oo=u):Sl(t,a,r));break;default:Sl(t,a,r)}}function tg(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Do(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var u=a[r];Xn=u,ag(u,t)}tg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ng(t),t=t.sibling}function ng(t){switch(t.tag){case 0:case 11:case 15:Do(t),t.flags&2048&&Pi(9,t,t.return);break;case 3:Do(t);break;case 12:Do(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,ou(t)):Do(t);break;default:Do(t)}}function ou(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var u=a[r];Xn=u,ag(u,t)}tg(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Pi(8,a,a.return),ou(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,ou(a));break;default:ou(a)}t=t.sibling}}function ag(t,a){for(;Xn!==null;){var r=Xn;switch(r.tag){case 0:case 11:case 15:Pi(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:go(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,Xn=u;else e:for(r=t;Xn!==null;){u=Xn;var p=u.sibling,x=u.return;if(Qx(u),u===r){Xn=null;break e}if(p!==null){p.return=x,Xn=p;break e}Xn=x}}}var Y_={getCacheForType:function(t){var a=na(In),r=a.data.get(t);return r===void 0&&(r=t(),a.data.set(t,r)),r},cacheSignal:function(){return na(In).controller.signal}},$_=typeof WeakMap=="function"?WeakMap:Map,Qt=0,cn=null,kt=null,At=0,Jt=0,Ka=null,Ii=!1,wl=!1,Um=!1,oi=0,wn=0,Bi=0,Pr=0,Fm=0,Ga=0,El=0,Ro=null,Ma=null,qm=!1,cu=0,sg=0,uu=1/0,du=null,Ui=null,Qn=0,Fi=null,kl=null,ci=0,Zm=0,Hm=null,ig=null,Lo=0,Km=null;function Qa(){return(Qt&2)!==0&&At!==0?At&-At:Z.T!==null?Xm():pn()}function rg(){if(Ga===0)if((At&536870912)===0||Et){var t=Vt;Vt<<=1,(Vt&3932160)===0&&(Vt=262144),Ga=t}else Ga=536870912;return t=Za.current,t!==null&&(t.flags|=32),Ga}function za(t,a,r){(t===cn&&(Jt===2||Jt===9)||t.cancelPendingCommit!==null)&&(Tl(t,0),qi(t,At,Ga,!1)),Mn(t,r),((Qt&2)===0||t!==cn)&&(t===cn&&((Qt&2)===0&&(Pr|=r),wn===4&&qi(t,At,Ga,!1)),Zs(t))}function lg(t,a,r){if((Qt&6)!==0)throw Error(o(327));var u=!r&&(a&127)===0&&(a&t.expiredLanes)===0||Lt(t,a),p=u?W_(t,a):Qm(t,a,!0),x=u;do{if(p===0){wl&&!u&&qi(t,a,0,!1);break}else{if(r=t.current.alternate,x&&!X_(r)){p=Qm(t,a,!1),x=!1;continue}if(p===2){if(x=a,t.errorRecoveryDisabledLanes&x)var j=0;else j=t.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){a=j;e:{var C=t;p=Ro;var G=C.current.memoizedState.isDehydrated;if(G&&(Tl(C,j).flags|=256),j=Qm(C,j,!1),j!==2){if(Um&&!G){C.errorRecoveryDisabledLanes|=x,Pr|=x,p=4;break e}x=Ma,Ma=p,x!==null&&(Ma===null?Ma=x:Ma.push.apply(Ma,x))}p=j}if(x=!1,p!==2)continue}}if(p===1){Tl(t,0),qi(t,a,0,!0);break}e:{switch(u=t,x=p,x){case 0:case 1:throw Error(o(345));case 4:if((a&4194048)!==a)break;case 6:qi(u,a,Ga,!Ii);break e;case 2:Ma=null;break;case 3:case 5:break;default:throw Error(o(329))}if((a&62914560)===a&&(p=cu+300-se(),10<p)){if(qi(u,a,Ga,!Ii),Cn(u,0,!0)!==0)break e;ci=a,u.timeoutHandle=Ig(og.bind(null,u,r,Ma,du,qm,a,Ga,Pr,El,Ii,x,"Throttled",-0,0),p);break e}og(u,r,Ma,du,qm,a,Ga,Pr,El,Ii,x,null,-0,0)}}break}while(!0);Zs(t)}function og(t,a,r,u,p,x,j,C,G,he,we,Me,ge,ye){if(t.timeoutHandle=-1,Me=a.subtreeFlags,Me&8192||(Me&16785408)===16785408){Me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ja},eg(a,x,Me);var Qe=(x&62914560)===x?cu-se():(x&4194048)===x?sg-se():0;if(Qe=RN(Me,Qe),Qe!==null){ci=x,t.cancelPendingCommit=Qe(xg.bind(null,t,a,x,r,u,p,j,C,G,we,Me,null,ge,ye)),qi(t,x,j,!he);return}}xg(t,a,x,r,u,p,j,C,G)}function X_(t){for(var a=t;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var p=r[u],x=p.getSnapshot;p=p.value;try{if(!Yn(x(),p))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function qi(t,a,r,u){a&=~Fm,a&=~Pr,t.suspendedLanes|=a,t.pingedLanes&=~a,u&&(t.warmLanes|=a),u=t.expirationTimes;for(var p=a;0<p;){var x=31-jt(p),j=1<<x;u[x]=-1,p&=~j}r!==0&&Ve(t,r,a)}function mu(){return(Qt&6)===0?(Po(0),!1):!0}function Gm(){if(kt!==null){if(Jt===0)var t=kt.return;else t=kt,Ss=Fs=null,om(t),yl=null,vo=0,t=kt;for(;t!==null;)Bx(t.alternate,t),t=t.return;kt=null}}function Tl(t,a){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,gN(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),ci=0,Gm(),cn=t,kt=r=ss(t.current,null),At=a,Jt=0,Ka=null,Ii=!1,wl=Lt(t,a),Um=!1,El=Ga=Fm=Pr=Bi=wn=0,Ma=Ro=null,qm=!1,(a&8)!==0&&(a|=a&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=a;0<u;){var p=31-jt(u),x=1<<p;a|=t[p],u&=~x}return oi=a,Sr(),r}function cg(t,a){pt=null,Z.H=ko,a===gl||a===Fc?(a=wp(),Jt=3):a===$d?(a=wp(),Jt=4):Jt=a===Sm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ka=a,kt===null&&(wn=1,tu(t,c(a,t.current)))}function ug(){var t=Za.current;return t===null?!0:(At&4194048)===At?is===null:(At&62914560)===At||(At&536870912)!==0?t===is:!1}function dg(){var t=Z.H;return Z.H=ko,t===null?ko:t}function mg(){var t=Z.A;return Z.A=Y_,t}function hu(){wn=4,Ii||(At&4194048)!==At&&Za.current!==null||(wl=!0),(Bi&134217727)===0&&(Pr&134217727)===0||cn===null||qi(cn,At,Ga,!1)}function Qm(t,a,r){var u=Qt;Qt|=2;var p=dg(),x=mg();(cn!==t||At!==a)&&(du=null,Tl(t,a)),a=!1;var j=wn;e:do try{if(Jt!==0&&kt!==null){var C=kt,G=Ka;switch(Jt){case 8:Gm(),j=6;break e;case 3:case 2:case 9:case 6:Za.current===null&&(a=!0);var he=Jt;if(Jt=0,Ka=null,Cl(t,C,G,he),r&&wl){j=0;break e}break;default:he=Jt,Jt=0,Ka=null,Cl(t,C,G,he)}}J_(),j=wn;break}catch(we){cg(t,we)}while(!0);return a&&t.shellSuspendCounter++,Ss=Fs=null,Qt=u,Z.H=p,Z.A=x,kt===null&&(cn=null,At=0,Sr()),j}function J_(){for(;kt!==null;)hg(kt)}function W_(t,a){var r=Qt;Qt|=2;var u=dg(),p=mg();cn!==t||At!==a?(du=null,uu=se()+500,Tl(t,a)):wl=Lt(t,a);e:do try{if(Jt!==0&&kt!==null){a=kt;var x=Ka;t:switch(Jt){case 1:Jt=0,Ka=null,Cl(t,a,x,1);break;case 2:case 9:if(jp(x)){Jt=0,Ka=null,fg(a);break}a=function(){Jt!==2&&Jt!==9||cn!==t||(Jt=7),Zs(t)},x.then(a,a);break e;case 3:Jt=7;break e;case 4:Jt=5;break e;case 7:jp(x)?(Jt=0,Ka=null,fg(a)):(Jt=0,Ka=null,Cl(t,a,x,7));break;case 5:var j=null;switch(kt.tag){case 26:j=kt.memoizedState;case 5:case 27:var C=kt;if(j?Wg(j):C.stateNode.complete){Jt=0,Ka=null;var G=C.sibling;if(G!==null)kt=G;else{var he=C.return;he!==null?(kt=he,fu(he)):kt=null}break t}}Jt=0,Ka=null,Cl(t,a,x,5);break;case 6:Jt=0,Ka=null,Cl(t,a,x,6);break;case 8:Gm(),wn=6;break e;default:throw Error(o(462))}}eN();break}catch(we){cg(t,we)}while(!0);return Ss=Fs=null,Z.H=u,Z.A=p,Qt=r,kt!==null?0:(cn=null,At=0,Sr(),wn)}function eN(){for(;kt!==null&&!Be();)hg(kt)}function hg(t){var a=Px(t.alternate,t,oi);t.memoizedProps=t.pendingProps,a===null?fu(t):kt=a}function fg(t){var a=t,r=a.alternate;switch(a.tag){case 15:case 0:a=Mx(r,a,a.pendingProps,a.type,void 0,At);break;case 11:a=Mx(r,a,a.pendingProps,a.type.render,a.ref,At);break;case 5:om(a);default:Bx(r,a),a=kt=mo(a,oi),a=Px(r,a,oi)}t.memoizedProps=t.pendingProps,a===null?fu(t):kt=a}function Cl(t,a,r,u){Ss=Fs=null,om(a),yl=null,vo=0;var p=a.return;try{if(q_(t,p,a,r,At)){wn=1,tu(t,c(r,t.current)),kt=null;return}}catch(x){if(p!==null)throw kt=p,x;wn=1,tu(t,c(r,t.current)),kt=null;return}a.flags&32768?(Et||u===1?t=!0:wl||(At&536870912)!==0?t=!1:(Ii=t=!0,(u===2||u===9||u===3||u===6)&&(u=Za.current,u!==null&&u.tag===13&&(u.flags|=16384))),pg(a,t)):fu(a)}function fu(t){var a=t;do{if((a.flags&32768)!==0){pg(a,Ii);return}t=a.return;var r=K_(a.alternate,a,oi);if(r!==null){kt=r;return}if(a=a.sibling,a!==null){kt=a;return}kt=a=t}while(a!==null);wn===0&&(wn=5)}function pg(t,a){do{var r=G_(t.alternate,t);if(r!==null){r.flags&=32767,kt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(t=t.sibling,t!==null)){kt=t;return}kt=t=r}while(t!==null);wn=6,kt=null}function xg(t,a,r,u,p,x,j,C,G){t.cancelPendingCommit=null;do pu();while(Qn!==0);if((Qt&6)!==0)throw Error(o(327));if(a!==null){if(a===t.current)throw Error(o(177));if(x=a.lanes|a.childLanes,x|=ul,W(t,r,x,j,C,G),t===cn&&(kt=cn=null,At=0),kl=a,Fi=t,ci=r,Zm=x,Hm=p,ig=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,sN(Rt,function(){return _g(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=Z.T,Z.T=null,p=M.p,M.p=2,j=Qt,Qt|=4;try{Q_(t,a,r)}finally{Qt=j,M.p=p,Z.T=u}}Qn=1,gg(),yg(),vg()}}function gg(){if(Qn===1){Qn=0;var t=Fi,a=kl,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=Z.T,Z.T=null;var u=M.p;M.p=2;var p=Qt;Qt|=4;try{Xx(a,t);var x=ih,j=vr(t.containerInfo),C=x.focusedElem,G=x.selectionRange;if(j!==C&&C&&C.ownerDocument&&rl(C.ownerDocument.documentElement,C)){if(G!==null&&Ds(C)){var he=G.start,we=G.end;if(we===void 0&&(we=he),"selectionStart"in C)C.selectionStart=he,C.selectionEnd=Math.min(we,C.value.length);else{var Me=C.ownerDocument||document,ge=Me&&Me.defaultView||window;if(ge.getSelection){var ye=ge.getSelection(),Qe=C.textContent.length,st=Math.min(G.start,Qe),sn=G.end===void 0?st:Math.min(G.end,Qe);!ye.extend&&st>sn&&(j=sn,sn=st,st=j);var re=yr(C,st),J=yr(C,sn);if(re&&J&&(ye.rangeCount!==1||ye.anchorNode!==re.node||ye.anchorOffset!==re.offset||ye.focusNode!==J.node||ye.focusOffset!==J.offset)){var me=Me.createRange();me.setStart(re.node,re.offset),ye.removeAllRanges(),st>sn?(ye.addRange(me),ye.extend(J.node,J.offset)):(me.setEnd(J.node,J.offset),ye.addRange(me))}}}}for(Me=[],ye=C;ye=ye.parentNode;)ye.nodeType===1&&Me.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<Me.length;C++){var Te=Me[C];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}ku=!!sh,ih=sh=null}finally{Qt=p,M.p=u,Z.T=r}}t.current=a,Qn=2}}function yg(){if(Qn===2){Qn=0;var t=Fi,a=kl,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=Z.T,Z.T=null;var u=M.p;M.p=2;var p=Qt;Qt|=4;try{Gx(t,a.alternate,a)}finally{Qt=p,M.p=u,Z.T=r}}Qn=3}}function vg(){if(Qn===4||Qn===3){Qn=0,at();var t=Fi,a=kl,r=ci,u=ig;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Qn=5:(Qn=0,kl=Fi=null,bg(t,t.pendingLanes));var p=t.pendingLanes;if(p===0&&(Ui=null),Oe(r),a=a.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(nt,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=Z.T,p=M.p,M.p=2,Z.T=null;try{for(var x=t.onRecoverableError,j=0;j<u.length;j++){var C=u[j];x(C.value,{componentStack:C.stack})}}finally{Z.T=a,M.p=p}}(ci&3)!==0&&pu(),Zs(t),p=t.pendingLanes,(r&261930)!==0&&(p&42)!==0?t===Km?Lo++:(Lo=0,Km=t):Lo=0,Po(0)}}function bg(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,go(a)))}function pu(){return gg(),yg(),vg(),_g()}function _g(){if(Qn!==5)return!1;var t=Fi,a=Zm;Zm=0;var r=Oe(ci),u=Z.T,p=M.p;try{M.p=32>r?32:r,Z.T=null,r=Hm,Hm=null;var x=Fi,j=ci;if(Qn=0,kl=Fi=null,ci=0,(Qt&6)!==0)throw Error(o(331));var C=Qt;if(Qt|=4,ng(x.current),Wx(x,x.current,j,r),Qt=C,Po(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(nt,x)}catch{}return!0}finally{M.p=p,Z.T=u,bg(t,a)}}function Ng(t,a,r){a=c(r,a),a=jm(t.stateNode,a,2),t=Di(t,a,2),t!==null&&(Mn(t,2),Zs(t))}function Wt(t,a,r){if(t.tag===3)Ng(t,t,r);else for(;a!==null;){if(a.tag===3){Ng(a,t,r);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ui===null||!Ui.has(u))){t=c(r,t),r=jx(2),u=Di(a,r,2),u!==null&&(Sx(r,u,a,t),Mn(u,2),Zs(u));break}}a=a.return}}function Vm(t,a,r){var u=t.pingCache;if(u===null){u=t.pingCache=new $_;var p=new Set;u.set(a,p)}else p=u.get(a),p===void 0&&(p=new Set,u.set(a,p));p.has(r)||(Um=!0,p.add(r),t=tN.bind(null,t,a,r),a.then(t,t))}function tN(t,a,r){var u=t.pingCache;u!==null&&u.delete(a),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,cn===t&&(At&r)===r&&(wn===4||wn===3&&(At&62914560)===At&&300>se()-cu?(Qt&2)===0&&Tl(t,0):Fm|=r,El===At&&(El=0)),Zs(t)}function jg(t,a){a===0&&(a=An()),t=as(t,a),t!==null&&(Mn(t,a),Zs(t))}function nN(t){var a=t.memoizedState,r=0;a!==null&&(r=a.retryLane),jg(t,r)}function aN(t,a){var r=0;switch(t.tag){case 31:case 13:var u=t.stateNode,p=t.memoizedState;p!==null&&(r=p.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(a),jg(t,r)}function sN(t,a){return ae(t,a)}var xu=null,Al=null,Ym=!1,gu=!1,$m=!1,Zi=0;function Zs(t){t!==Al&&t.next===null&&(Al===null?xu=Al=t:Al=Al.next=t),gu=!0,Ym||(Ym=!0,rN())}function Po(t,a){if(!$m&&gu){$m=!0;do for(var r=!1,u=xu;u!==null;){if(t!==0){var p=u.pendingLanes;if(p===0)var x=0;else{var j=u.suspendedLanes,C=u.pingedLanes;x=(1<<31-jt(42|t)+1)-1,x&=p&~(j&~C),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(r=!0,kg(u,x))}else x=At,x=Cn(u,u===cn?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(x&3)===0||Lt(u,x)||(r=!0,kg(u,x));u=u.next}while(r);$m=!1}}function iN(){Sg()}function Sg(){gu=Ym=!1;var t=0;Zi!==0&&xN()&&(t=Zi);for(var a=se(),r=null,u=xu;u!==null;){var p=u.next,x=wg(u,a);x===0?(u.next=null,r===null?xu=p:r.next=p,p===null&&(Al=r)):(r=u,(t!==0||(x&3)!==0)&&(gu=!0)),u=p}Qn!==0&&Qn!==5||Po(t),Zi!==0&&(Zi=0)}function wg(t,a){for(var r=t.suspendedLanes,u=t.pingedLanes,p=t.expirationTimes,x=t.pendingLanes&-62914561;0<x;){var j=31-jt(x),C=1<<j,G=p[j];G===-1?((C&r)===0||(C&u)!==0)&&(p[j]=va(C,a)):G<=a&&(t.expiredLanes|=C),x&=~C}if(a=cn,r=At,r=Cn(t,t===a?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,r===0||t===a&&(Jt===2||Jt===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&ke(u),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Lt(t,r)){if(a=r&-r,a===t.callbackPriority)return a;switch(u!==null&&ke(u),Oe(r)){case 2:case 8:r=Dt;break;case 32:r=Rt;break;case 268435456:r=Ut;break;default:r=Rt}return u=Eg.bind(null,t),r=ae(r,u),t.callbackPriority=a,t.callbackNode=r,a}return u!==null&&u!==null&&ke(u),t.callbackPriority=2,t.callbackNode=null,2}function Eg(t,a){if(Qn!==0&&Qn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(pu()&&t.callbackNode!==r)return null;var u=At;return u=Cn(t,t===cn?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(lg(t,u,a),wg(t,se()),t.callbackNode!=null&&t.callbackNode===r?Eg.bind(null,t):null)}function kg(t,a){if(pu())return null;lg(t,a,!0)}function rN(){yN(function(){(Qt&6)!==0?ae(_t,iN):Sg()})}function Xm(){if(Zi===0){var t=pl;t===0&&(t=xt,xt<<=1,(xt&261888)===0&&(xt=256)),Zi=t}return Zi}function Tg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:yi(""+t)}function Cg(t,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,t.id&&r.setAttribute("form",t.id),a.parentNode.insertBefore(r,a),t=new FormData(t),r.parentNode.removeChild(r),t}function lN(t,a,r,u,p){if(a==="submit"&&r&&r.stateNode===p){var x=Tg((p[it]||null).action),j=u.submitter;j&&(a=(a=j[it]||null)?Tg(a.formAction):j.getAttribute("formAction"),a!==null&&(x=a,j=null));var C=new Wr("action","action",null,u,p);t.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Zi!==0){var G=j?Cg(p,j):new FormData(p);gm(r,{pending:!0,data:G,method:p.method,action:x},null,G)}}else typeof x=="function"&&(C.preventDefault(),G=j?Cg(p,j):new FormData(p),gm(r,{pending:!0,data:G,method:p.method,action:x},x,G))},currentTarget:p}]})}}for(var Jm=0;Jm<Ps.length;Jm++){var Wm=Ps[Jm],oN=Wm.toLowerCase(),cN=Wm[0].toUpperCase()+Wm.slice(1);wa(oN,"on"+cN)}wa(_r,"onAnimationEnd"),wa(Rc,"onAnimationIteration"),wa(Nr,"onAnimationStart"),wa("dblclick","onDoubleClick"),wa("focusin","onFocus"),wa("focusout","onBlur"),wa(qd,"onTransitionRun"),wa(Lc,"onTransitionStart"),wa(Zd,"onTransitionCancel"),wa(Ci,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Q("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Q("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Q("onBeforeInput",["compositionend","keypress","textInput","paste"]),Q("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Q("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Q("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Io));function Ag(t,a){a=(a&4)!==0;for(var r=0;r<t.length;r++){var u=t[r],p=u.event;u=u.listeners;e:{var x=void 0;if(a)for(var j=u.length-1;0<=j;j--){var C=u[j],G=C.instance,he=C.currentTarget;if(C=C.listener,G!==x&&p.isPropagationStopped())break e;x=C,p.currentTarget=he;try{x(p)}catch(we){jr(we)}p.currentTarget=null,x=G}else for(j=0;j<u.length;j++){if(C=u[j],G=C.instance,he=C.currentTarget,C=C.listener,G!==x&&p.isPropagationStopped())break e;x=C,p.currentTarget=he;try{x(p)}catch(we){jr(we)}p.currentTarget=null,x=G}}}}function Tt(t,a){var r=a[F];r===void 0&&(r=a[F]=new Set);var u=t+"__bubble";r.has(u)||(Mg(a,t,2,!1),r.add(u))}function eh(t,a,r){var u=0;a&&(u|=4),Mg(r,t,u,a)}var yu="_reactListening"+Math.random().toString(36).slice(2);function th(t){if(!t[yu]){t[yu]=!0,gs.forEach(function(r){r!=="selectionchange"&&(uN.has(r)||eh(r,!1,t),eh(r,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[yu]||(a[yu]=!0,eh("selectionchange",!1,a))}}function Mg(t,a,r,u){switch(ry(a)){case 2:var p=IN;break;case 8:p=BN;break;default:p=xh}r=p.bind(null,a,r,t),p=void 0,!cr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),u?p!==void 0?t.addEventListener(a,r,{capture:!0,passive:p}):t.addEventListener(a,r,!0):p!==void 0?t.addEventListener(a,r,{passive:p}):t.addEventListener(a,r,!1)}function nh(t,a,r,u,p){var x=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var j=u.tag;if(j===3||j===4){var C=u.stateNode.containerInfo;if(C===p)break;if(j===4)for(j=u.return;j!==null;){var G=j.tag;if((G===3||G===4)&&j.stateNode.containerInfo===p)return;j=j.return}for(;C!==null;){if(j=Fe(C),j===null)return;if(G=j.tag,G===5||G===6||G===26||G===27){u=x=j;continue e}C=C.parentNode}}u=u.return}eo(function(){var he=x,we=or(r),Me=[];e:{var ge=Pc.get(t);if(ge!==void 0){var ye=Wr,Qe=t;switch(t){case"keypress":if(ur(r)===0)break e;case"keydown":case"keyup":ye=jc;break;case"focusin":Qe="focus",ye=ao;break;case"focusout":Qe="blur",ye=ao;break;case"beforeblur":case"afterblur":ye=ao;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Md;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Ld;break;case _r:case Rc:case Nr:ye=so;break;case Ci:ye=Ec;break;case"scroll":case"scrollend":ye=Ct;break;case"wheel":ye=Ys;break;case"copy":case"cut":case"paste":ye=Wa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=Sc;break;case"toggle":case"beforetoggle":ye=hr}var st=(a&4)!==0,sn=!st&&(t==="scroll"||t==="scrollend"),re=st?ge!==null?ge+"Capture":null:ge;st=[];for(var J=he,me;J!==null;){var Te=J;if(me=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||me===null||re===null||(Te=Qs(J,re),Te!=null&&st.push(Bo(J,Te,me))),sn)break;J=J.return}0<st.length&&(ge=new ye(ge,Qe,null,r,we),Me.push({event:ge,listeners:st}))}}if((a&7)===0){e:{if(ge=t==="mouseover"||t==="pointerover",ye=t==="mouseout"||t==="pointerout",ge&&r!==Jr&&(Qe=r.relatedTarget||r.fromElement)&&(Fe(Qe)||Qe[ea]))break e;if((ye||ge)&&(ge=we.window===we?we:(ge=we.ownerDocument)?ge.defaultView||ge.parentWindow:window,ye?(Qe=r.relatedTarget||r.toElement,ye=he,Qe=Qe?Fe(Qe):null,Qe!==null&&(sn=m(Qe),st=Qe.tag,Qe!==sn||st!==5&&st!==27&&st!==6)&&(Qe=null)):(ye=null,Qe=he),ye!==Qe)){if(st=yc,Te="onMouseLeave",re="onMouseEnter",J="mouse",(t==="pointerout"||t==="pointerover")&&(st=Sc,Te="onPointerLeave",re="onPointerEnter",J="pointer"),sn=ye==null?ge:Pn(ye),me=Qe==null?ge:Pn(Qe),ge=new st(Te,J+"leave",ye,r,we),ge.target=sn,ge.relatedTarget=me,Te=null,Fe(we)===he&&(st=new st(re,J+"enter",Qe,r,we),st.target=me,st.relatedTarget=sn,Te=st),sn=Te,ye&&Qe)t:{for(st=dN,re=ye,J=Qe,me=0,Te=re;Te;Te=st(Te))me++;Te=0;for(var et=J;et;et=st(et))Te++;for(;0<me-Te;)re=st(re),me--;for(;0<Te-me;)J=st(J),Te--;for(;me--;){if(re===J||J!==null&&re===J.alternate){st=re;break t}re=st(re),J=st(J)}st=null}else st=null;ye!==null&&zg(Me,ge,ye,st,!1),Qe!==null&&sn!==null&&zg(Me,sn,Qe,st,!0)}}e:{if(ge=he?Pn(he):window,ye=ge.nodeName&&ge.nodeName.toLowerCase(),ye==="select"||ye==="input"&&ge.type==="file")var Ht=gr;else if(es(ge))if(Ac)Ht=Fd;else{Ht=Ud;var $e=_s}else ye=ge.nodeName,!ye||ye.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?he&&lr(he.elementType)&&(Ht=gr):Ht=wi;if(Ht&&(Ht=Ht(t,he))){Cc(Me,Ht,r,we);break e}$e&&$e(t,ge,he),t==="focusout"&&he&&ge.type==="number"&&he.memoizedProps.value!=null&&ys(ge,"number",ge.value)}switch($e=he?Pn(he):window,t){case"focusin":(es($e)||$e.contentEditable==="true")&&(Rs=$e,ol=he,br=null);break;case"focusout":br=ol=Rs=null;break;case"mousedown":ki=!0;break;case"contextmenu":case"mouseup":case"dragend":ki=!1,Oc(Me,r,we);break;case"selectionchange":if(ll)break;case"keydown":case"keyup":Oc(Me,r,we)}var yt;if(tl)e:{switch(t){case"compositionstart":var Mt="onCompositionStart";break e;case"compositionend":Mt="onCompositionEnd";break e;case"compositionupdate":Mt="onCompositionUpdate";break e}Mt=void 0}else Ni?Tc(t,r)&&(Mt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Mt="onCompositionStart");Mt&&(nl&&r.locale!=="ko"&&(Ni||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&Ni&&(yt=zs()):(Ja=we,Vs="value"in Ja?Ja.value:Ja.textContent,Ni=!0)),$e=vu(he,Mt),0<$e.length&&(Mt=new io(Mt,t,null,r,we),Me.push({event:Mt,listeners:$e}),yt?Mt.data=yt:(yt=co(r),yt!==null&&(Mt.data=yt)))),(yt=Id?qa(t,r):ji(t,r))&&(Mt=vu(he,"onBeforeInput"),0<Mt.length&&($e=new io("onBeforeInput","beforeinput",null,r,we),Me.push({event:$e,listeners:Mt}),$e.data=yt)),lN(Me,t,he,r,we)}Ag(Me,a)})}function Bo(t,a,r){return{instance:t,listener:a,currentTarget:r}}function vu(t,a){for(var r=a+"Capture",u=[];t!==null;){var p=t,x=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||x===null||(p=Qs(t,r),p!=null&&u.unshift(Bo(t,p,x)),p=Qs(t,a),p!=null&&u.push(Bo(t,p,x))),t.tag===3)return u;t=t.return}return[]}function dN(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function zg(t,a,r,u,p){for(var x=a._reactName,j=[];r!==null&&r!==u;){var C=r,G=C.alternate,he=C.stateNode;if(C=C.tag,G!==null&&G===u)break;C!==5&&C!==26&&C!==27||he===null||(G=he,p?(he=Qs(r,x),he!=null&&j.unshift(Bo(r,he,G))):p||(he=Qs(r,x),he!=null&&j.push(Bo(r,he,G)))),r=r.return}j.length!==0&&t.push({event:a,listeners:j})}var mN=/\r\n?/g,hN=/\u0000|\uFFFD/g;function Og(t){return(typeof t=="string"?t:""+t).replace(mN,`
`).replace(hN,"")}function Dg(t,a){return a=Og(a),Og(t)===a}function an(t,a,r,u,p,x){switch(r){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Xa(t,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Xa(t,""+u);break;case"className":tn(t,"class",u);break;case"tabIndex":tn(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":tn(t,r,u);break;case"style":$r(t,u,x);break;case"data":if(a!=="object"){tn(t,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||r!=="href")){t.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(r);break}u=yi(""+u),t.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(r==="formAction"?(a!=="input"&&an(t,a,"name",p.name,p,null),an(t,a,"formEncType",p.formEncType,p,null),an(t,a,"formMethod",p.formMethod,p,null),an(t,a,"formTarget",p.formTarget,p,null)):(an(t,a,"encType",p.encType,p,null),an(t,a,"method",p.method,p,null),an(t,a,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(r);break}u=yi(""+u),t.setAttribute(r,u);break;case"onClick":u!=null&&(t.onclick=ja);break;case"onScroll":u!=null&&Tt("scroll",t);break;case"onScrollEnd":u!=null&&Tt("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}r=yi(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,""+u):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":u===!0?t.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,u):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(r,u):t.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(r):t.setAttribute(r,u);break;case"popover":Tt("beforetoggle",t),Tt("toggle",t),vt(t,"popover",u);break;case"xlinkActuate":Na(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Na(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Na(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Na(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Na(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Na(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Na(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Na(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Na(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":vt(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Xr.get(r)||r,vt(t,r,u))}}function ah(t,a,r,u,p,x){switch(r){case"style":$r(t,u,x);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"children":typeof u=="string"?Xa(t,u):(typeof u=="number"||typeof u=="bigint")&&Xa(t,""+u);break;case"onScroll":u!=null&&Tt("scroll",t);break;case"onScrollEnd":u!=null&&Tt("scrollend",t);break;case"onClick":u!=null&&(t.onclick=ja);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ir.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),a=r.slice(2,p?r.length-7:void 0),x=t[it]||null,x=x!=null?x[r]:null,typeof x=="function"&&t.removeEventListener(a,x,p),typeof u=="function")){typeof x!="function"&&x!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(a,u,p);break e}r in t?t[r]=u:u===!0?t.setAttribute(r,""):vt(t,r,u)}}}function sa(t,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",t),Tt("load",t);var u=!1,p=!1,x;for(x in r)if(r.hasOwnProperty(x)){var j=r[x];if(j!=null)switch(x){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:an(t,a,x,j,r,null)}}p&&an(t,a,"srcSet",r.srcSet,r,null),u&&an(t,a,"src",r.src,r,null);return;case"input":Tt("invalid",t);var C=x=j=p=null,G=null,he=null;for(u in r)if(r.hasOwnProperty(u)){var we=r[u];if(we!=null)switch(u){case"name":p=we;break;case"type":j=we;break;case"checked":G=we;break;case"defaultChecked":he=we;break;case"value":x=we;break;case"defaultValue":C=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(o(137,a));break;default:an(t,a,u,we,r,null)}}rr(t,x,C,G,he,j,p,!1);return;case"select":Tt("invalid",t),u=j=x=null;for(p in r)if(r.hasOwnProperty(p)&&(C=r[p],C!=null))switch(p){case"value":x=C;break;case"defaultValue":j=C;break;case"multiple":u=C;default:an(t,a,p,C,r,null)}a=x,r=j,t.multiple=!!u,a!=null?on(t,!!u,a,!1):r!=null&&on(t,!!u,r,!0);return;case"textarea":Tt("invalid",t),x=p=u=null;for(j in r)if(r.hasOwnProperty(j)&&(C=r[j],C!=null))switch(j){case"value":u=C;break;case"defaultValue":p=C;break;case"children":x=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:an(t,a,j,C,r,null)}xi(t,u,p,x);return;case"option":for(G in r)r.hasOwnProperty(G)&&(u=r[G],u!=null)&&(G==="selected"?t.selected=u&&typeof u!="function"&&typeof u!="symbol":an(t,a,G,u,r,null));return;case"dialog":Tt("beforetoggle",t),Tt("toggle",t),Tt("cancel",t),Tt("close",t);break;case"iframe":case"object":Tt("load",t);break;case"video":case"audio":for(u=0;u<Io.length;u++)Tt(Io[u],t);break;case"image":Tt("error",t),Tt("load",t);break;case"details":Tt("toggle",t);break;case"embed":case"source":case"link":Tt("error",t),Tt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in r)if(r.hasOwnProperty(he)&&(u=r[he],u!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:an(t,a,he,u,r,null)}return;default:if(lr(a)){for(we in r)r.hasOwnProperty(we)&&(u=r[we],u!==void 0&&ah(t,a,we,u,r,void 0));return}}for(C in r)r.hasOwnProperty(C)&&(u=r[C],u!=null&&an(t,a,C,u,r,null))}function fN(t,a,r,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,x=null,j=null,C=null,G=null,he=null,we=null;for(ye in r){var Me=r[ye];if(r.hasOwnProperty(ye)&&Me!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":G=Me;default:u.hasOwnProperty(ye)||an(t,a,ye,null,u,Me)}}for(var ge in u){var ye=u[ge];if(Me=r[ge],u.hasOwnProperty(ge)&&(ye!=null||Me!=null))switch(ge){case"type":x=ye;break;case"name":p=ye;break;case"checked":he=ye;break;case"defaultChecked":we=ye;break;case"value":j=ye;break;case"defaultValue":C=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(o(137,a));break;default:ye!==Me&&an(t,a,ge,ye,u,Me)}}Xl(t,j,C,G,he,we,x,p);return;case"select":ye=j=C=ge=null;for(x in r)if(G=r[x],r.hasOwnProperty(x)&&G!=null)switch(x){case"value":break;case"multiple":ye=G;default:u.hasOwnProperty(x)||an(t,a,x,null,u,G)}for(p in u)if(x=u[p],G=r[p],u.hasOwnProperty(p)&&(x!=null||G!=null))switch(p){case"value":ge=x;break;case"defaultValue":C=x;break;case"multiple":j=x;default:x!==G&&an(t,a,p,x,u,G)}a=C,r=j,u=ye,ge!=null?on(t,!!r,ge,!1):!!u!=!!r&&(a!=null?on(t,!!r,a,!0):on(t,!!r,r?[]:"",!1));return;case"textarea":ye=ge=null;for(C in r)if(p=r[C],r.hasOwnProperty(C)&&p!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:an(t,a,C,null,u,p)}for(j in u)if(p=u[j],x=r[j],u.hasOwnProperty(j)&&(p!=null||x!=null))switch(j){case"value":ge=p;break;case"defaultValue":ye=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(o(91));break;default:p!==x&&an(t,a,j,p,u,x)}Ms(t,ge,ye);return;case"option":for(var Qe in r)ge=r[Qe],r.hasOwnProperty(Qe)&&ge!=null&&!u.hasOwnProperty(Qe)&&(Qe==="selected"?t.selected=!1:an(t,a,Qe,null,u,ge));for(G in u)ge=u[G],ye=r[G],u.hasOwnProperty(G)&&ge!==ye&&(ge!=null||ye!=null)&&(G==="selected"?t.selected=ge&&typeof ge!="function"&&typeof ge!="symbol":an(t,a,G,ge,u,ye));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in r)ge=r[st],r.hasOwnProperty(st)&&ge!=null&&!u.hasOwnProperty(st)&&an(t,a,st,null,u,ge);for(he in u)if(ge=u[he],ye=r[he],u.hasOwnProperty(he)&&ge!==ye&&(ge!=null||ye!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(o(137,a));break;default:an(t,a,he,ge,u,ye)}return;default:if(lr(a)){for(var sn in r)ge=r[sn],r.hasOwnProperty(sn)&&ge!==void 0&&!u.hasOwnProperty(sn)&&ah(t,a,sn,void 0,u,ge);for(we in u)ge=u[we],ye=r[we],!u.hasOwnProperty(we)||ge===ye||ge===void 0&&ye===void 0||ah(t,a,we,ge,u,ye);return}}for(var re in r)ge=r[re],r.hasOwnProperty(re)&&ge!=null&&!u.hasOwnProperty(re)&&an(t,a,re,null,u,ge);for(Me in u)ge=u[Me],ye=r[Me],!u.hasOwnProperty(Me)||ge===ye||ge==null&&ye==null||an(t,a,Me,ge,u,ye)}function Rg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pN(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var p=r[u],x=p.transferSize,j=p.initiatorType,C=p.duration;if(x&&C&&Rg(j)){for(j=0,C=p.responseEnd,u+=1;u<r.length;u++){var G=r[u],he=G.startTime;if(he>C)break;var we=G.transferSize,Me=G.initiatorType;we&&Rg(Me)&&(G=G.responseEnd,j+=we*(G<C?1:(C-he)/(G-he)))}if(--u,a+=8*(x+j)/(p.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var sh=null,ih=null;function bu(t){return t.nodeType===9?t:t.ownerDocument}function Lg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pg(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function rh(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var lh=null;function xN(){var t=window.event;return t&&t.type==="popstate"?t===lh?!1:(lh=t,!0):(lh=null,!1)}var Ig=typeof setTimeout=="function"?setTimeout:void 0,gN=typeof clearTimeout=="function"?clearTimeout:void 0,Bg=typeof Promise=="function"?Promise:void 0,yN=typeof queueMicrotask=="function"?queueMicrotask:typeof Bg<"u"?function(t){return Bg.resolve(null).then(t).catch(vN)}:Ig;function vN(t){setTimeout(function(){throw t})}function Hi(t){return t==="head"}function Ug(t,a){var r=a,u=0;do{var p=r.nextSibling;if(t.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(u===0){t.removeChild(p),Dl(a);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")Uo(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Uo(r);for(var x=r.firstChild;x;){var j=x.nextSibling,C=x.nodeName;x[zn]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&x.rel.toLowerCase()==="stylesheet"||r.removeChild(x),x=j}}else r==="body"&&Uo(t.ownerDocument.body);r=p}while(r);Dl(a)}function Fg(t,a){var r=t;t=0;do{var u=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=u}while(r)}function oh(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":oh(r),B(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function bN(t,a,r,u){for(;t.nodeType===1;){var p=r;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[zn])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(x=t.getAttribute("rel"),x==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(x!==p.rel||t.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||t.getAttribute("title")!==(p.title==null?null:p.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(x=t.getAttribute("src"),(x!==(p.src==null?null:p.src)||t.getAttribute("type")!==(p.type==null?null:p.type)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&x&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var x=p.name==null?null:""+p.name;if(p.type==="hidden"&&t.getAttribute("name")===x)return t}else return t;if(t=rs(t.nextSibling),t===null)break}return null}function _N(t,a,r){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=rs(t.nextSibling),t===null))return null;return t}function qg(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=rs(t.nextSibling),t===null))return null;return t}function ch(t){return t.data==="$?"||t.data==="$~"}function uh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function NN(t,a){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||r.readyState!=="loading")a();else{var u=function(){a(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function rs(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var dh=null;function Zg(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(a===0)return rs(t.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}t=t.nextSibling}return null}function Hg(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return t;a--}else r!=="/$"&&r!=="/&"||a++}t=t.previousSibling}return null}function Kg(t,a,r){switch(a=bu(r),t){case"html":if(t=a.documentElement,!t)throw Error(o(452));return t;case"head":if(t=a.head,!t)throw Error(o(453));return t;case"body":if(t=a.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Uo(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);B(t)}var ls=new Map,Gg=new Set;function _u(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ui=M.d;M.d={f:jN,r:SN,D:wN,C:EN,L:kN,m:TN,X:AN,S:CN,M:MN};function jN(){var t=ui.f(),a=mu();return t||a}function SN(t){var a=St(t);a!==null&&a.tag===5&&a.type==="form"?cx(a):ui.r(t)}var Ml=typeof document>"u"?null:document;function Qg(t,a,r){var u=Ml;if(u&&typeof a=="string"&&a){var p=mn(a);p='link[rel="'+t+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),Gg.has(p)||(Gg.add(p),t={rel:t,crossOrigin:r,href:a},u.querySelector(p)===null&&(a=u.createElement("link"),sa(a,"link",t),dn(a),u.head.appendChild(a)))}}function wN(t){ui.D(t),Qg("dns-prefetch",t,null)}function EN(t,a){ui.C(t,a),Qg("preconnect",t,a)}function kN(t,a,r){ui.L(t,a,r);var u=Ml;if(u&&t&&a){var p='link[rel="preload"][as="'+mn(a)+'"]';a==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+mn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+mn(r.imageSizes)+'"]')):p+='[href="'+mn(t)+'"]';var x=p;switch(a){case"style":x=zl(t);break;case"script":x=Ol(t)}ls.has(x)||(t=w({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:t,as:a},r),ls.set(x,t),u.querySelector(p)!==null||a==="style"&&u.querySelector(Fo(x))||a==="script"&&u.querySelector(qo(x))||(a=u.createElement("link"),sa(a,"link",t),dn(a),u.head.appendChild(a)))}}function TN(t,a){ui.m(t,a);var r=Ml;if(r&&t){var u=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+mn(u)+'"][href="'+mn(t)+'"]',x=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Ol(t)}if(!ls.has(x)&&(t=w({rel:"modulepreload",href:t},a),ls.set(x,t),r.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(qo(x)))return}u=r.createElement("link"),sa(u,"link",t),dn(u),r.head.appendChild(u)}}}function CN(t,a,r){ui.S(t,a,r);var u=Ml;if(u&&t){var p=Ia(u).hoistableStyles,x=zl(t);a=a||"default";var j=p.get(x);if(!j){var C={loading:0,preload:null};if(j=u.querySelector(Fo(x)))C.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":a},r),(r=ls.get(x))&&mh(t,r);var G=j=u.createElement("link");dn(G),sa(G,"link",t),G._p=new Promise(function(he,we){G.onload=he,G.onerror=we}),G.addEventListener("load",function(){C.loading|=1}),G.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Nu(j,a,u)}j={type:"stylesheet",instance:j,count:1,state:C},p.set(x,j)}}}function AN(t,a){ui.X(t,a);var r=Ml;if(r&&t){var u=Ia(r).hoistableScripts,p=Ol(t),x=u.get(p);x||(x=r.querySelector(qo(p)),x||(t=w({src:t,async:!0},a),(a=ls.get(p))&&hh(t,a),x=r.createElement("script"),dn(x),sa(x,"link",t),r.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(p,x))}}function MN(t,a){ui.M(t,a);var r=Ml;if(r&&t){var u=Ia(r).hoistableScripts,p=Ol(t),x=u.get(p);x||(x=r.querySelector(qo(p)),x||(t=w({src:t,async:!0,type:"module"},a),(a=ls.get(p))&&hh(t,a),x=r.createElement("script"),dn(x),sa(x,"link",t),r.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(p,x))}}function Vg(t,a,r,u){var p=(p=Ee.current)?_u(p):null;if(!p)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=zl(r.href),r=Ia(p).hoistableStyles,u=r.get(a),u||(u={type:"style",instance:null,count:0,state:null},r.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=zl(r.href);var x=Ia(p).hoistableStyles,j=x.get(t);if(j||(p=p.ownerDocument||p,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(t,j),(x=p.querySelector(Fo(t)))&&!x._p&&(j.instance=x,j.state.loading=5),ls.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ls.set(t,r),x||zN(p,t,r,j.state))),a&&u===null)throw Error(o(528,""));return j}if(a&&u!==null)throw Error(o(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ol(r),r=Ia(p).hoistableScripts,u=r.get(a),u||(u={type:"script",instance:null,count:0,state:null},r.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function zl(t){return'href="'+mn(t)+'"'}function Fo(t){return'link[rel="stylesheet"]['+t+"]"}function Yg(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function zN(t,a,r,u){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=t.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),sa(a,"link",r),dn(a),t.head.appendChild(a))}function Ol(t){return'[src="'+mn(t)+'"]'}function qo(t){return"script[async]"+t}function $g(t,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var u=t.querySelector('style[data-href~="'+mn(r.href)+'"]');if(u)return a.instance=u,dn(u),u;var p=w({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),dn(u),sa(u,"style",p),Nu(u,r.precedence,t),a.instance=u;case"stylesheet":p=zl(r.href);var x=t.querySelector(Fo(p));if(x)return a.state.loading|=4,a.instance=x,dn(x),x;u=Yg(r),(p=ls.get(p))&&mh(u,p),x=(t.ownerDocument||t).createElement("link"),dn(x);var j=x;return j._p=new Promise(function(C,G){j.onload=C,j.onerror=G}),sa(x,"link",u),a.state.loading|=4,Nu(x,r.precedence,t),a.instance=x;case"script":return x=Ol(r.src),(p=t.querySelector(qo(x)))?(a.instance=p,dn(p),p):(u=r,(p=ls.get(x))&&(u=w({},r),hh(u,p)),t=t.ownerDocument||t,p=t.createElement("script"),dn(p),sa(p,"link",u),t.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(o(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Nu(u,r.precedence,t));return a.instance}function Nu(t,a,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,x=p,j=0;j<u.length;j++){var C=u[j];if(C.dataset.precedence===a)x=C;else if(x!==p)break}x?x.parentNode.insertBefore(t,x.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(t,a.firstChild))}function mh(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function hh(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var ju=null;function Xg(t,a,r){if(ju===null){var u=new Map,p=ju=new Map;p.set(r,u)}else p=ju,u=p.get(r),u||(u=new Map,p.set(r,u));if(u.has(t))return u;for(u.set(t,null),r=r.getElementsByTagName(t),p=0;p<r.length;p++){var x=r[p];if(!(x[zn]||x[Yt]||t==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var j=x.getAttribute(a)||"";j=t+j;var C=u.get(j);C?C.push(x):u.set(j,[x])}}return u}function Jg(t,a,r){t=t.ownerDocument||t,t.head.insertBefore(r,a==="title"?t.querySelector("head > title"):null)}function ON(t,a,r){if(r===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Wg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function DN(t,a,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=zl(u.href),x=a.querySelector(Fo(p));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Su.bind(t),a.then(t,t)),r.state.loading|=4,r.instance=x,dn(x);return}x=a.ownerDocument||a,u=Yg(u),(p=ls.get(p))&&mh(u,p),x=x.createElement("link"),dn(x);var j=x;j._p=new Promise(function(C,G){j.onload=C,j.onerror=G}),sa(x,"link",u),r.instance=x}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Su.bind(t),a.addEventListener("load",r),a.addEventListener("error",r))}}var fh=0;function RN(t,a){return t.stylesheets&&t.count===0&&Eu(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var u=setTimeout(function(){if(t.stylesheets&&Eu(t,t.stylesheets),t.unsuspend){var x=t.unsuspend;t.unsuspend=null,x()}},6e4+a);0<t.imgBytes&&fh===0&&(fh=62500*pN());var p=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Eu(t,t.stylesheets),t.unsuspend)){var x=t.unsuspend;t.unsuspend=null,x()}},(t.imgBytes>fh?50:800)+a);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Su(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Eu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var wu=null;function Eu(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,wu=new Map,a.forEach(LN,t),wu=null,Su.call(t))}function LN(t,a){if(!(a.state.loading&4)){var r=wu.get(t);if(r)var u=r.get(null);else{r=new Map,wu.set(t,r);for(var p=t.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<p.length;x++){var j=p[x];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(r.set(j.dataset.precedence,j),u=j)}u&&r.set(null,u)}p=a.instance,j=p.getAttribute("data-precedence"),x=r.get(j)||u,x===u&&r.set(null,p),r.set(j,p),this.count++,u=Su.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),x?x.parentNode.insertBefore(p,x.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(p,t.firstChild)),a.state.loading|=4}}var Zo={$$typeof:R,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function PN(t,a,r,u,p,x,j,C,G){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hn(0),this.hiddenUpdates=Hn(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=x,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function ey(t,a,r,u,p,x,j,C,G,he,we,Me){return t=new PN(t,a,r,j,G,he,we,Me,C),a=1,x===!0&&(a|=24),x=da(3,null,null,a),t.current=x,x.stateNode=t,a=Qd(),a.refCount++,t.pooledCache=a,a.refCount++,x.memoizedState={element:u,isDehydrated:r,cache:a},Xd(x),t}function ty(t){return t?(t=$s,t):$s}function ny(t,a,r,u,p,x){p=ty(p),u.context===null?u.context=p:u.pendingContext=p,u=Oi(a),u.payload={element:r},x=x===void 0?null:x,x!==null&&(u.callback=x),r=Di(t,u,a),r!==null&&(za(r,t,a),_o(r,t,a))}function ay(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<a?r:a}}function ph(t,a){ay(t,a),(t=t.alternate)&&ay(t,a)}function sy(t){if(t.tag===13||t.tag===31){var a=as(t,67108864);a!==null&&za(a,t,67108864),ph(t,67108864)}}function iy(t){if(t.tag===13||t.tag===31){var a=Qa();a=Ot(a);var r=as(t,a);r!==null&&za(r,t,a),ph(t,a)}}var ku=!0;function IN(t,a,r,u){var p=Z.T;Z.T=null;var x=M.p;try{M.p=2,xh(t,a,r,u)}finally{M.p=x,Z.T=p}}function BN(t,a,r,u){var p=Z.T;Z.T=null;var x=M.p;try{M.p=8,xh(t,a,r,u)}finally{M.p=x,Z.T=p}}function xh(t,a,r,u){if(ku){var p=gh(u);if(p===null)nh(t,a,u,Tu,r),ly(t,u);else if(FN(p,t,a,r,u))u.stopPropagation();else if(ly(t,u),a&4&&-1<UN.indexOf(t)){for(;p!==null;){var x=St(p);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var j=Rn(x.pendingLanes);if(j!==0){var C=x;for(C.pendingLanes|=2,C.entangledLanes|=2;j;){var G=1<<31-jt(j);C.entanglements[1]|=G,j&=~G}Zs(x),(Qt&6)===0&&(uu=se()+500,Po(0))}}break;case 31:case 13:C=as(x,2),C!==null&&za(C,x,2),mu(),ph(x,2)}if(x=gh(u),x===null&&nh(t,a,u,Tu,r),x===p)break;p=x}p!==null&&u.stopPropagation()}else nh(t,a,u,null,r)}}function gh(t){return t=or(t),yh(t)}var Tu=null;function yh(t){if(Tu=null,t=Fe(t),t!==null){var a=m(t);if(a===null)t=null;else{var r=a.tag;if(r===13){if(t=f(a),t!==null)return t;t=null}else if(r===31){if(t=g(a),t!==null)return t;t=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Tu=t,null}function ry(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ie()){case _t:return 2;case Dt:return 8;case Rt:case ft:return 32;case Ut:return 268435456;default:return 32}default:return 32}}var vh=!1,Ki=null,Gi=null,Qi=null,Ho=new Map,Ko=new Map,Vi=[],UN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ly(t,a){switch(t){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":Ho.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ko.delete(a.pointerId)}}function Go(t,a,r,u,p,x){return t===null||t.nativeEvent!==x?(t={blockedOn:a,domEventName:r,eventSystemFlags:u,nativeEvent:x,targetContainers:[p]},a!==null&&(a=St(a),a!==null&&sy(a)),t):(t.eventSystemFlags|=u,a=t.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),t)}function FN(t,a,r,u,p){switch(a){case"focusin":return Ki=Go(Ki,t,a,r,u,p),!0;case"dragenter":return Gi=Go(Gi,t,a,r,u,p),!0;case"mouseover":return Qi=Go(Qi,t,a,r,u,p),!0;case"pointerover":var x=p.pointerId;return Ho.set(x,Go(Ho.get(x)||null,t,a,r,u,p)),!0;case"gotpointercapture":return x=p.pointerId,Ko.set(x,Go(Ko.get(x)||null,t,a,r,u,p)),!0}return!1}function oy(t){var a=Fe(t.target);if(a!==null){var r=m(a);if(r!==null){if(a=r.tag,a===13){if(a=f(r),a!==null){t.blockedOn=a,ca(t.priority,function(){iy(r)});return}}else if(a===31){if(a=g(r),a!==null){t.blockedOn=a,ca(t.priority,function(){iy(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cu(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var r=gh(t.nativeEvent);if(r===null){r=t.nativeEvent;var u=new r.constructor(r.type,r);Jr=u,r.target.dispatchEvent(u),Jr=null}else return a=St(r),a!==null&&sy(a),t.blockedOn=r,!1;a.shift()}return!0}function cy(t,a,r){Cu(t)&&r.delete(a)}function qN(){vh=!1,Ki!==null&&Cu(Ki)&&(Ki=null),Gi!==null&&Cu(Gi)&&(Gi=null),Qi!==null&&Cu(Qi)&&(Qi=null),Ho.forEach(cy),Ko.forEach(cy)}function Au(t,a){t.blockedOn===a&&(t.blockedOn=null,vh||(vh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qN)))}var Mu=null;function uy(t){Mu!==t&&(Mu=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Mu===t&&(Mu=null);for(var a=0;a<t.length;a+=3){var r=t[a],u=t[a+1],p=t[a+2];if(typeof u!="function"){if(yh(u||r)===null)continue;break}var x=St(r);x!==null&&(t.splice(a,3),a-=3,gm(x,{pending:!0,data:p,method:r.method,action:u},u,p))}}))}function Dl(t){function a(G){return Au(G,t)}Ki!==null&&Au(Ki,t),Gi!==null&&Au(Gi,t),Qi!==null&&Au(Qi,t),Ho.forEach(a),Ko.forEach(a);for(var r=0;r<Vi.length;r++){var u=Vi[r];u.blockedOn===t&&(u.blockedOn=null)}for(;0<Vi.length&&(r=Vi[0],r.blockedOn===null);)oy(r),r.blockedOn===null&&Vi.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var p=r[u],x=r[u+1],j=p[it]||null;if(typeof x=="function")j||uy(r);else if(j){var C=null;if(x&&x.hasAttribute("formAction")){if(p=x,j=x[it]||null)C=j.formAction;else if(yh(p)!==null)continue}else C=j.action;typeof C=="function"?r[u+1]=C:(r.splice(u,3),u-=3),uy(r)}}}function dy(){function t(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(j){return p=j})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function bh(t){this._internalRoot=t}zu.prototype.render=bh.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(o(409));var r=a.current,u=Qa();ny(r,u,t,a,null,null)},zu.prototype.unmount=bh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;ny(t.current,2,null,t,null,null),mu(),a[ea]=null}};function zu(t){this._internalRoot=t}zu.prototype.unstable_scheduleHydration=function(t){if(t){var a=pn();t={blockedOn:null,target:t,priority:a};for(var r=0;r<Vi.length&&a!==0&&a<Vi[r].priority;r++);Vi.splice(r,0,t),r===0&&oy(t)}};var my=s.version;if(my!=="19.2.4")throw Error(o(527,my,"19.2.4"));M.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=_(a),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var ZN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{nt=Ou.inject(ZN),Nt=Ou}catch{}}return Vo.createRoot=function(t,a){if(!d(t))throw Error(o(299));var r=!1,u="",p=vx,x=bx,j=_x;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(j=a.onRecoverableError)),a=ey(t,1,!1,null,null,r,u,null,p,x,j,dy),t[ea]=a.current,th(t),new bh(a)},Vo.hydrateRoot=function(t,a,r){if(!d(t))throw Error(o(299));var u=!1,p="",x=vx,j=bx,C=_x,G=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(x=r.onUncaughtError),r.onCaughtError!==void 0&&(j=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError),r.formState!==void 0&&(G=r.formState)),a=ey(t,1,!0,a,r??null,u,p,G,x,j,C,dy),a.context=ty(null),r=a.current,u=Qa(),u=Ot(u),p=Oi(u),p.callback=null,Di(r,p,u),r=u,a.current.lanes=r,Mn(a,r),Zs(a),t[ea]=a.current,th(t),new zu(a)},Vo.version="19.2.4",Vo}var Ny;function ej(){if(Ny)return jh.exports;Ny=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(s){console.error(s)}}return e(),jh.exports=WN(),jh.exports}var tj=ej();const nj=xd(tj);var Fl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},aj={setTimeout:(e,s)=>setTimeout(e,s),clearTimeout:e=>clearTimeout(e),setInterval:(e,s)=>setInterval(e,s),clearInterval:e=>clearInterval(e)},sj=class{#e=aj;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,s){return this.#e.setTimeout(e,s)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,s){return this.#e.setInterval(e,s)}clearInterval(e){this.#e.clearInterval(e)}},Br=new sj;function ij(e){setTimeout(e,0)}var qr=typeof window>"u"||"Deno"in globalThis;function ya(){}function rj(e,s){return typeof e=="function"?e(s):e}function pf(e){return typeof e=="number"&&e>=0&&e!==1/0}function zv(e,s){return Math.max(e+(s||0)-Date.now(),0)}function Wi(e,s){return typeof e=="function"?e(s):e}function cs(e,s){return typeof e=="function"?e(s):e}function jy(e,s){const{type:l="all",exact:o,fetchStatus:d,predicate:m,queryKey:f,stale:g}=e;if(f){if(o){if(s.queryHash!==Ff(f,s.options))return!1}else if(!nc(s.queryKey,f))return!1}if(l!=="all"){const v=s.isActive();if(l==="active"&&!v||l==="inactive"&&v)return!1}return!(typeof g=="boolean"&&s.isStale()!==g||d&&d!==s.state.fetchStatus||m&&!m(s))}function Sy(e,s){const{exact:l,status:o,predicate:d,mutationKey:m}=e;if(m){if(!s.options.mutationKey)return!1;if(l){if(Zr(s.options.mutationKey)!==Zr(m))return!1}else if(!nc(s.options.mutationKey,m))return!1}return!(o&&s.state.status!==o||d&&!d(s))}function Ff(e,s){return(s?.queryKeyHashFn||Zr)(e)}function Zr(e){return JSON.stringify(e,(s,l)=>xf(l)?Object.keys(l).sort().reduce((o,d)=>(o[d]=l[d],o),{}):l)}function nc(e,s){return e===s?!0:typeof e!=typeof s?!1:e&&s&&typeof e=="object"&&typeof s=="object"?Object.keys(s).every(l=>nc(e[l],s[l])):!1}var lj=Object.prototype.hasOwnProperty;function Ov(e,s,l=0){if(e===s)return e;if(l>500)return s;const o=wy(e)&&wy(s);if(!o&&!(xf(e)&&xf(s)))return s;const m=(o?e:Object.keys(e)).length,f=o?s:Object.keys(s),g=f.length,v=o?new Array(g):{};let _=0;for(let S=0;S<g;S++){const w=o?S:f[S],T=e[w],O=s[w];if(T===O){v[w]=T,(o?S<m:lj.call(e,w))&&_++;continue}if(T===null||O===null||typeof T!="object"||typeof O!="object"){v[w]=O;continue}const k=Ov(T,O,l+1);v[w]=k,k===T&&_++}return m===g&&_===m?e:v}function sd(e,s){if(!s||Object.keys(e).length!==Object.keys(s).length)return!1;for(const l in e)if(e[l]!==s[l])return!1;return!0}function wy(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function xf(e){if(!Ey(e))return!1;const s=e.constructor;if(s===void 0)return!0;const l=s.prototype;return!(!Ey(l)||!l.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ey(e){return Object.prototype.toString.call(e)==="[object Object]"}function oj(e){return new Promise(s=>{Br.setTimeout(s,e)})}function gf(e,s,l){return typeof l.structuralSharing=="function"?l.structuralSharing(e,s):l.structuralSharing!==!1?Ov(e,s):s}function cj(e,s,l=0){const o=[...e,s];return l&&o.length>l?o.slice(1):o}function uj(e,s,l=0){const o=[s,...e];return l&&o.length>l?o.slice(0,-1):o}var qf=Symbol();function Dv(e,s){return!e.queryFn&&s?.initialPromise?()=>s.initialPromise:!e.queryFn||e.queryFn===qf?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Zf(e,s){return typeof e=="function"?e(...s):!!e}function dj(e,s,l){let o=!1,d;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(d??=s(),o||(o=!0,d.aborted?l():d.addEventListener("abort",l,{once:!0})),d)}),e}var mj=class extends Fl{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!qr&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Hf=new mj;function yf(){let e,s;const l=new Promise((d,m)=>{e=d,s=m});l.status="pending",l.catch(()=>{});function o(d){Object.assign(l,d),delete l.resolve,delete l.reject}return l.resolve=d=>{o({status:"fulfilled",value:d}),e(d)},l.reject=d=>{o({status:"rejected",reason:d}),s(d)},l}var hj=ij;function fj(){let e=[],s=0,l=g=>{g()},o=g=>{g()},d=hj;const m=g=>{s?e.push(g):d(()=>{l(g)})},f=()=>{const g=e;e=[],g.length&&d(()=>{o(()=>{g.forEach(v=>{l(v)})})})};return{batch:g=>{let v;s++;try{v=g()}finally{s--,s||f()}return v},batchCalls:g=>(...v)=>{m(()=>{g(...v)})},schedule:m,setNotifyFunction:g=>{l=g},setBatchNotifyFunction:g=>{o=g},setScheduler:g=>{d=g}}}var Vn=fj(),pj=class extends Fl{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!qr&&window.addEventListener){const s=()=>e(!0),l=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",l,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",l)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(l=>{l(e)}))}isOnline(){return this.#e}},id=new pj;function xj(e){return Math.min(1e3*2**e,3e4)}function Rv(e){return(e??"online")==="online"?id.isOnline():!0}var vf=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Lv(e){let s=!1,l=0,o;const d=yf(),m=()=>d.status!=="pending",f=A=>{if(!m()){const z=new vf(A);T(z),e.onCancel?.(z)}},g=()=>{s=!0},v=()=>{s=!1},_=()=>Hf.isFocused()&&(e.networkMode==="always"||id.isOnline())&&e.canRun(),S=()=>Rv(e.networkMode)&&e.canRun(),w=A=>{m()||(o?.(),d.resolve(A))},T=A=>{m()||(o?.(),d.reject(A))},O=()=>new Promise(A=>{o=z=>{(m()||_())&&A(z)},e.onPause?.()}).then(()=>{o=void 0,m()||e.onContinue?.()}),k=()=>{if(m())return;let A;const z=l===0?e.initialPromise:void 0;try{A=z??e.fn()}catch(U){A=Promise.reject(U)}Promise.resolve(A).then(w).catch(U=>{if(m())return;const I=e.retry??(qr?0:3),R=e.retryDelay??xj,K=typeof R=="function"?R(l,U):R,V=I===!0||typeof I=="number"&&l<I||typeof I=="function"&&I(l,U);if(s||!V){T(U);return}l++,e.onFail?.(l,U),oj(K).then(()=>_()?void 0:O()).then(()=>{s?T(U):k()})})};return{promise:d,status:()=>d.status,cancel:f,continue:()=>(o?.(),d),cancelRetry:g,continueRetry:v,canStart:S,start:()=>(S()?k():O().then(k),d)}}var Pv=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pf(this.gcTime)&&(this.#e=Br.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(qr?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Br.clearTimeout(this.#e),this.#e=void 0)}},gj=class extends Pv{#e;#t;#n;#s;#a;#r;#l;constructor(e){super(),this.#l=!1,this.#r=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Ty(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(e){if(this.options={...this.#r,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=Ty(this.options);s.data!==void 0&&(this.setState(ky(s.data,s.dataUpdatedAt)),this.#e=s)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,s){const l=gf(this.state.data,e,this.options);return this.#i({data:l,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),l}setState(e,s){this.#i({type:"setState",state:e,setStateOptions:s})}cancel(e){const s=this.#a?.promise;return this.#a?.cancel(e),s?s.then(ya).catch(ya):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>cs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===qf||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Wi(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!zv(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(this.#a&&(this.#l?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,s){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(v=>v.options.queryFn);g&&this.setOptions(g.options)}const l=new AbortController,o=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(this.#l=!0,l.signal)})},d=()=>{const g=Dv(this.options,s),_=(()=>{const S={client:this.#s,queryKey:this.queryKey,meta:this.meta};return o(S),S})();return this.#l=!1,this.options.persister?this.options.persister(g,_,this):g(_)},f=(()=>{const g={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:d};return o(g),g})();this.options.behavior?.onFetch(f,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==f.fetchOptions?.meta)&&this.#i({type:"fetch",meta:f.fetchOptions?.meta}),this.#a=Lv({initialPromise:s?.initialPromise,fn:f.fetchFn,onCancel:g=>{g instanceof vf&&g.revert&&this.setState({...this.#t,fetchStatus:"idle"}),l.abort()},onFail:(g,v)=>{this.#i({type:"failed",failureCount:g,error:v})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0});try{const g=await this.#a.start();if(g===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(g),this.#n.config.onSuccess?.(g,this),this.#n.config.onSettled?.(g,this.state.error,this),g}catch(g){if(g instanceof vf){if(g.silent)return this.#a.promise;if(g.revert){if(this.state.data===void 0)throw g;return this.state.data}}throw this.#i({type:"error",error:g}),this.#n.config.onError?.(g,this),this.#n.config.onSettled?.(this.state.data,g,this),g}finally{this.scheduleGc()}}#i(e){const s=l=>{switch(e.type){case"failed":return{...l,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...l,fetchStatus:"paused"};case"continue":return{...l,fetchStatus:"fetching"};case"fetch":return{...l,...Iv(l.data,this.options),fetchMeta:e.meta??null};case"success":const o={...l,...ky(e.data,e.dataUpdatedAt),dataUpdateCount:l.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?o:void 0,o;case"error":const d=e.error;return{...l,error:d,errorUpdateCount:l.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:l.fetchFailureCount+1,fetchFailureReason:d,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...l,isInvalidated:!0};case"setState":return{...l,...e.state}}};this.state=s(this.state),Vn.batch(()=>{this.observers.forEach(l=>{l.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function Iv(e,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Rv(s.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ky(e,s){return{data:e,dataUpdatedAt:s??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Ty(e){const s=typeof e.initialData=="function"?e.initialData():e.initialData,l=s!==void 0,o=l?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:l?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:l?"success":"pending",fetchStatus:"idle"}}var yj=class extends Fl{constructor(e,s){super(),this.options=s,this.#e=e,this.#i=null,this.#l=yf(),this.bindMethods(),this.setOptions(s)}#e;#t=void 0;#n=void 0;#s=void 0;#a;#r;#l;#i;#p;#m;#h;#c;#u;#o;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Cy(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return bf(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return bf(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#_(),this.#t.removeObserver(this)}setOptions(e){const s=this.options,l=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof cs(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),s._defaulted&&!sd(this.options,s)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const o=this.hasListeners();o&&Ay(this.#t,l,this.options,s)&&this.#d(),this.updateResult(),o&&(this.#t!==l||cs(this.options.enabled,this.#t)!==cs(s.enabled,this.#t)||Wi(this.options.staleTime,this.#t)!==Wi(s.staleTime,this.#t))&&this.#x();const d=this.#g();o&&(this.#t!==l||cs(this.options.enabled,this.#t)!==cs(s.enabled,this.#t)||d!==this.#o)&&this.#y(d)}getOptimisticResult(e){const s=this.#e.getQueryCache().build(this.#e,e),l=this.createResult(s,e);return bj(this,l)&&(this.#s=l,this.#r=this.options,this.#a=this.#t.state),l}getCurrentResult(){return this.#s}trackResult(e,s){return new Proxy(e,{get:(l,o)=>(this.trackProp(o),s?.(o),o==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#l.status==="pending"&&this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(l,o))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=this.#e.defaultQueryOptions(e),l=this.#e.getQueryCache().build(this.#e,s);return l.fetch().then(()=>this.createResult(l,s))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(e){this.#N();let s=this.#t.fetch(this.options,e);return e?.throwOnError||(s=s.catch(ya)),s}#x(){this.#b();const e=Wi(this.options.staleTime,this.#t);if(qr||this.#s.isStale||!pf(e))return;const l=zv(this.#s.dataUpdatedAt,e)+1;this.#c=Br.setTimeout(()=>{this.#s.isStale||this.updateResult()},l)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#_(),this.#o=e,!(qr||cs(this.options.enabled,this.#t)===!1||!pf(this.#o)||this.#o===0)&&(this.#u=Br.setInterval(()=>{(this.options.refetchIntervalInBackground||Hf.isFocused())&&this.#d()},this.#o))}#v(){this.#x(),this.#y(this.#g())}#b(){this.#c&&(Br.clearTimeout(this.#c),this.#c=void 0)}#_(){this.#u&&(Br.clearInterval(this.#u),this.#u=void 0)}createResult(e,s){const l=this.#t,o=this.options,d=this.#s,m=this.#a,f=this.#r,v=e!==l?e.state:this.#n,{state:_}=e;let S={..._},w=!1,T;if(s._optimisticResults){const Y=this.hasListeners(),$=!Y&&Cy(e,s),ie=Y&&Ay(e,l,s,o);($||ie)&&(S={...S,...Iv(_.data,e.options)}),s._optimisticResults==="isRestoring"&&(S.fetchStatus="idle")}let{error:O,errorUpdatedAt:k,status:A}=S;T=S.data;let z=!1;if(s.placeholderData!==void 0&&T===void 0&&A==="pending"){let Y;d?.isPlaceholderData&&s.placeholderData===f?.placeholderData?(Y=d.data,z=!0):Y=typeof s.placeholderData=="function"?s.placeholderData(this.#h?.state.data,this.#h):s.placeholderData,Y!==void 0&&(A="success",T=gf(d?.data,Y,s),w=!0)}if(s.select&&T!==void 0&&!z)if(d&&T===m?.data&&s.select===this.#p)T=this.#m;else try{this.#p=s.select,T=s.select(T),T=gf(d?.data,T,s),this.#m=T,this.#i=null}catch(Y){this.#i=Y}this.#i&&(O=this.#i,T=this.#m,k=Date.now(),A="error");const U=S.fetchStatus==="fetching",I=A==="pending",R=A==="error",K=I&&U,V=T!==void 0,q={status:A,fetchStatus:S.fetchStatus,isPending:I,isSuccess:A==="success",isError:R,isInitialLoading:K,isLoading:K,data:T,dataUpdatedAt:S.dataUpdatedAt,error:O,errorUpdatedAt:k,failureCount:S.fetchFailureCount,failureReason:S.fetchFailureReason,errorUpdateCount:S.errorUpdateCount,isFetched:S.dataUpdateCount>0||S.errorUpdateCount>0,isFetchedAfterMount:S.dataUpdateCount>v.dataUpdateCount||S.errorUpdateCount>v.errorUpdateCount,isFetching:U,isRefetching:U&&!I,isLoadingError:R&&!V,isPaused:S.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:R&&V,isStale:Kf(e,s),refetch:this.refetch,promise:this.#l,isEnabled:cs(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const Y=q.data!==void 0,$=q.status==="error"&&!Y,ie=je=>{$?je.reject(q.error):Y&&je.resolve(q.data)},fe=()=>{const je=this.#l=q.promise=yf();ie(je)},ue=this.#l;switch(ue.status){case"pending":e.queryHash===l.queryHash&&ie(ue);break;case"fulfilled":($||q.data!==ue.value)&&fe();break;case"rejected":(!$||q.error!==ue.reason)&&fe();break}}return q}updateResult(){const e=this.#s,s=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#r=this.options,this.#a.data!==void 0&&(this.#h=this.#t),sd(s,e))return;this.#s=s;const l=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,d=typeof o=="function"?o():o;if(d==="all"||!d&&!this.#f.size)return!0;const m=new Set(d??this.#f);return this.options.throwOnError&&m.add("error"),Object.keys(this.#s).some(f=>{const g=f;return this.#s[g]!==e[g]&&m.has(g)})};this.#j({listeners:l()})}#N(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const s=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(s?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#j(e){Vn.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function vj(e,s){return cs(s.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&s.retryOnMount===!1)}function Cy(e,s){return vj(e,s)||e.state.data!==void 0&&bf(e,s,s.refetchOnMount)}function bf(e,s,l){if(cs(s.enabled,e)!==!1&&Wi(s.staleTime,e)!=="static"){const o=typeof l=="function"?l(e):l;return o==="always"||o!==!1&&Kf(e,s)}return!1}function Ay(e,s,l,o){return(e!==s||cs(o.enabled,e)===!1)&&(!l.suspense||e.state.status!=="error")&&Kf(e,l)}function Kf(e,s){return cs(s.enabled,e)!==!1&&e.isStaleByTime(Wi(s.staleTime,e))}function bj(e,s){return!sd(e.getCurrentResult(),s)}function My(e){return{onFetch:(s,l)=>{const o=s.options,d=s.fetchOptions?.meta?.fetchMore?.direction,m=s.state.data?.pages||[],f=s.state.data?.pageParams||[];let g={pages:[],pageParams:[]},v=0;const _=async()=>{let S=!1;const w=k=>{dj(k,()=>s.signal,()=>S=!0)},T=Dv(s.options,s.fetchOptions),O=async(k,A,z)=>{if(S)return Promise.reject();if(A==null&&k.pages.length)return Promise.resolve(k);const I=(()=>{const ee={client:s.client,queryKey:s.queryKey,pageParam:A,direction:z?"backward":"forward",meta:s.options.meta};return w(ee),ee})(),R=await T(I),{maxPages:K}=s.options,V=z?uj:cj;return{pages:V(k.pages,R,K),pageParams:V(k.pageParams,A,K)}};if(d&&m.length){const k=d==="backward",A=k?_j:zy,z={pages:m,pageParams:f},U=A(o,z);g=await O(z,U,k)}else{const k=e??m.length;do{const A=v===0?f[0]??o.initialPageParam:zy(o,g);if(v>0&&A==null)break;g=await O(g,A),v++}while(v<k)}return g};s.options.persister?s.fetchFn=()=>s.options.persister?.(_,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},l):s.fetchFn=_}}}function zy(e,{pages:s,pageParams:l}){const o=s.length-1;return s.length>0?e.getNextPageParam(s[o],s,l[o],l):void 0}function _j(e,{pages:s,pageParams:l}){return s.length>0?e.getPreviousPageParam?.(s[0],s,l[0],l):void 0}var Nj=class extends Pv{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||Bv(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(s=>s!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const s=()=>{this.#a({type:"continue"})},l={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=Lv({fn:()=>this.options.mutationFn?this.options.mutationFn(e,l):Promise.reject(new Error("No mutationFn found")),onFail:(m,f)=>{this.#a({type:"failed",failureCount:m,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const o=this.state.status==="pending",d=!this.#s.canStart();try{if(o)s();else{this.#a({type:"pending",variables:e,isPaused:d}),this.#n.config.onMutate&&await this.#n.config.onMutate(e,this,l);const f=await this.options.onMutate?.(e,l);f!==this.state.context&&this.#a({type:"pending",context:f,variables:e,isPaused:d})}const m=await this.#s.start();return await this.#n.config.onSuccess?.(m,e,this.state.context,this,l),await this.options.onSuccess?.(m,e,this.state.context,l),await this.#n.config.onSettled?.(m,null,this.state.variables,this.state.context,this,l),await this.options.onSettled?.(m,null,e,this.state.context,l),this.#a({type:"success",data:m}),m}catch(m){try{await this.#n.config.onError?.(m,e,this.state.context,this,l)}catch(f){Promise.reject(f)}try{await this.options.onError?.(m,e,this.state.context,l)}catch(f){Promise.reject(f)}try{await this.#n.config.onSettled?.(void 0,m,this.state.variables,this.state.context,this,l)}catch(f){Promise.reject(f)}try{await this.options.onSettled?.(void 0,m,e,this.state.context,l)}catch(f){Promise.reject(f)}throw this.#a({type:"error",error:m}),m}finally{this.#n.runNext(this)}}#a(e){const s=l=>{switch(e.type){case"failed":return{...l,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...l,isPaused:!0};case"continue":return{...l,isPaused:!1};case"pending":return{...l,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...l,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...l,data:void 0,error:e.error,failureCount:l.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Vn.batch(()=>{this.#t.forEach(l=>{l.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function Bv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var jj=class extends Fl{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,s,l){const o=new Nj({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(s),state:l});return this.add(o),o}add(e){this.#e.add(e);const s=Du(e);if(typeof s=="string"){const l=this.#t.get(s);l?l.push(e):this.#t.set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const s=Du(e);if(typeof s=="string"){const l=this.#t.get(s);if(l)if(l.length>1){const o=l.indexOf(e);o!==-1&&l.splice(o,1)}else l[0]===e&&this.#t.delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=Du(e);if(typeof s=="string"){const o=this.#t.get(s)?.find(d=>d.state.status==="pending");return!o||o===e}else return!0}runNext(e){const s=Du(e);return typeof s=="string"?this.#t.get(s)?.find(o=>o!==e&&o.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Vn.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const s={exact:!0,...e};return this.getAll().find(l=>Sy(s,l))}findAll(e={}){return this.getAll().filter(s=>Sy(e,s))}notify(e){Vn.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return Vn.batch(()=>Promise.all(e.map(s=>s.continue().catch(ya))))}};function Du(e){return e.options.scope?.id}var Sj=class extends Fl{#e;#t=void 0;#n;#s;constructor(s,l){super(),this.#e=s,this.setOptions(l),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const l=this.options;this.options=this.#e.defaultMutationOptions(s),sd(this.options,l)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),l?.mutationKey&&this.options.mutationKey&&Zr(l.mutationKey)!==Zr(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(s){this.#a(),this.#r(s)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#a(),this.#r()}mutate(s,l){return this.#s=l,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(s)}#a(){const s=this.#n?.state??Bv();this.#t={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#r(s){Vn.batch(()=>{if(this.#s&&this.hasListeners()){const l=this.#t.variables,o=this.#t.context,d={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(s?.type==="success"){try{this.#s.onSuccess?.(s.data,l,o,d)}catch(m){Promise.reject(m)}try{this.#s.onSettled?.(s.data,null,l,o,d)}catch(m){Promise.reject(m)}}else if(s?.type==="error"){try{this.#s.onError?.(s.error,l,o,d)}catch(m){Promise.reject(m)}try{this.#s.onSettled?.(void 0,s.error,l,o,d)}catch(m){Promise.reject(m)}}}this.listeners.forEach(l=>{l(this.#t)})})}},wj=class extends Fl{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,s,l){const o=s.queryKey,d=s.queryHash??Ff(o,s);let m=this.get(d);return m||(m=new gj({client:e,queryKey:o,queryHash:d,options:e.defaultQueryOptions(s),state:l,defaultOptions:e.getQueryDefaults(o)}),this.add(m)),m}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=this.#e.get(e.queryHash);s&&(e.destroy(),s===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const s={exact:!0,...e};return this.getAll().find(l=>jy(s,l))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(l=>jy(e,l)):s}notify(e){Vn.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){Vn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ej=class{#e;#t;#n;#s;#a;#r;#l;#i;constructor(e={}){this.#e=e.queryCache||new wj,this.#t=e.mutationCache||new jj,this.#n=e.defaultOptions||{},this.#s=new Map,this.#a=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#l=Hf.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=id.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#l?.(),this.#l=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const s=this.defaultQueryOptions({queryKey:e});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(e){const s=this.defaultQueryOptions(e),l=this.#e.build(this,s),o=l.state.data;return o===void 0?this.fetchQuery(e):(e.revalidateIfStale&&l.isStaleByTime(Wi(s.staleTime,l))&&this.prefetchQuery(s),Promise.resolve(o))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:s,state:l})=>{const o=l.data;return[s,o]})}setQueryData(e,s,l){const o=this.defaultQueryOptions({queryKey:e}),m=this.#e.get(o.queryHash)?.state.data,f=rj(s,m);if(f!==void 0)return this.#e.build(this,o).setData(f,{...l,manual:!0})}setQueriesData(e,s,l){return Vn.batch(()=>this.#e.findAll(e).map(({queryKey:o})=>[o,this.setQueryData(o,s,l)]))}getQueryState(e){const s=this.defaultQueryOptions({queryKey:e});return this.#e.get(s.queryHash)?.state}removeQueries(e){const s=this.#e;Vn.batch(()=>{s.findAll(e).forEach(l=>{s.remove(l)})})}resetQueries(e,s){const l=this.#e;return Vn.batch(()=>(l.findAll(e).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...e},s)))}cancelQueries(e,s={}){const l={revert:!0,...s},o=Vn.batch(()=>this.#e.findAll(e).map(d=>d.cancel(l)));return Promise.all(o).then(ya).catch(ya)}invalidateQueries(e,s={}){return Vn.batch(()=>(this.#e.findAll(e).forEach(l=>{l.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},s)))}refetchQueries(e,s={}){const l={...s,cancelRefetch:s.cancelRefetch??!0},o=Vn.batch(()=>this.#e.findAll(e).filter(d=>!d.isDisabled()&&!d.isStatic()).map(d=>{let m=d.fetch(void 0,l);return l.throwOnError||(m=m.catch(ya)),d.state.fetchStatus==="paused"?Promise.resolve():m}));return Promise.all(o).then(ya)}fetchQuery(e){const s=this.defaultQueryOptions(e);s.retry===void 0&&(s.retry=!1);const l=this.#e.build(this,s);return l.isStaleByTime(Wi(s.staleTime,l))?l.fetch(s):Promise.resolve(l.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ya).catch(ya)}fetchInfiniteQuery(e){return e.behavior=My(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ya).catch(ya)}ensureInfiniteQueryData(e){return e.behavior=My(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return id.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,s){this.#s.set(Zr(e),{queryKey:e,defaultOptions:s})}getQueryDefaults(e){const s=[...this.#s.values()],l={};return s.forEach(o=>{nc(e,o.queryKey)&&Object.assign(l,o.defaultOptions)}),l}setMutationDefaults(e,s){this.#a.set(Zr(e),{mutationKey:e,defaultOptions:s})}getMutationDefaults(e){const s=[...this.#a.values()],l={};return s.forEach(o=>{nc(e,o.mutationKey)&&Object.assign(l,o.defaultOptions)}),l}defaultQueryOptions(e){if(e._defaulted)return e;const s={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return s.queryHash||(s.queryHash=Ff(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===qf&&(s.enabled=!1),s}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Uv=b.createContext(void 0),la=e=>{const s=b.useContext(Uv);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},kj=({client:e,children:s})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(Uv.Provider,{value:e,children:s})),Fv=b.createContext(!1),Tj=()=>b.useContext(Fv);Fv.Provider;function Cj(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Aj=b.createContext(Cj()),Mj=()=>b.useContext(Aj),zj=(e,s,l)=>{const o=l?.state.error&&typeof e.throwOnError=="function"?Zf(e.throwOnError,[l.state.error,l]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||o)&&(s.isReset()||(e.retryOnMount=!1))},Oj=e=>{b.useEffect(()=>{e.clearReset()},[e])},Dj=({result:e,errorResetBoundary:s,throwOnError:l,query:o,suspense:d})=>e.isError&&!s.isReset()&&!e.isFetching&&o&&(d&&e.data===void 0||Zf(l,[e.error,o])),Rj=e=>{if(e.suspense){const l=d=>d==="static"?d:Math.max(d??1e3,1e3),o=e.staleTime;e.staleTime=typeof o=="function"?(...d)=>l(o(...d)):l(o),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Lj=(e,s)=>e.isLoading&&e.isFetching&&!s,Pj=(e,s)=>e?.suspense&&s.isPending,Oy=(e,s,l)=>s.fetchOptimistic(e).catch(()=>{l.clearReset()});function Ij(e,s,l){const o=Tj(),d=Mj(),m=la(),f=m.defaultQueryOptions(e);m.getDefaultOptions().queries?._experimental_beforeQuery?.(f);const g=m.getQueryCache().get(f.queryHash);f._optimisticResults=o?"isRestoring":"optimistic",Rj(f),zj(f,d,g),Oj(d);const v=!m.getQueryCache().get(f.queryHash),[_]=b.useState(()=>new s(m,f)),S=_.getOptimisticResult(f),w=!o&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(T=>{const O=w?_.subscribe(Vn.batchCalls(T)):ya;return _.updateResult(),O},[_,w]),()=>_.getCurrentResult(),()=>_.getCurrentResult()),b.useEffect(()=>{_.setOptions(f)},[f,_]),Pj(f,S))throw Oy(f,_,d);if(Dj({result:S,errorResetBoundary:d,throwOnError:f.throwOnError,query:g,suspense:f.suspense}))throw S.error;return m.getDefaultOptions().queries?._experimental_afterQuery?.(f,S),f.experimental_prefetchInRender&&!qr&&Lj(S,o)&&(v?Oy(f,_,d):g?.promise)?.catch(ya).finally(()=>{_.updateResult()}),f.notifyOnChangeProps?S:_.trackResult(S)}function Ze(e,s){return Ij(e,yj)}function Xe(e,s){const l=la(),[o]=b.useState(()=>new Sj(l,e));b.useEffect(()=>{o.setOptions(e)},[o,e]);const d=b.useSyncExternalStore(b.useCallback(f=>o.subscribe(Vn.batchCalls(f)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),m=b.useCallback((f,g)=>{o.mutate(f,g).catch(ya)},[o]);if(d.error&&Zf(o.options.throwOnError,[d.error]))throw d.error;return{...d,mutate:m,mutateAsync:d.mutate}}var Dy="popstate";function Bj(e={}){function s(o,d){let{pathname:m,search:f,hash:g}=o.location;return _f("",{pathname:m,search:f,hash:g},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function l(o,d){return typeof d=="string"?d:ac(d)}return Fj(s,l,null,e)}function yn(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function ms(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Uj(){return Math.random().toString(36).substring(2,10)}function Ry(e,s){return{usr:e.state,key:e.key,idx:s}}function _f(e,s,l=null,o){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof s=="string"?ql(s):s,state:l,key:s&&s.key||o||Uj()}}function ac({pathname:e="/",search:s="",hash:l=""}){return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),l&&l!=="#"&&(e+=l.charAt(0)==="#"?l:"#"+l),e}function ql(e){let s={};if(e){let l=e.indexOf("#");l>=0&&(s.hash=e.substring(l),e=e.substring(0,l));let o=e.indexOf("?");o>=0&&(s.search=e.substring(o),e=e.substring(0,o)),e&&(s.pathname=e)}return s}function Fj(e,s,l,o={}){let{window:d=document.defaultView,v5Compat:m=!1}=o,f=d.history,g="POP",v=null,_=S();_==null&&(_=0,f.replaceState({...f.state,idx:_},""));function S(){return(f.state||{idx:null}).idx}function w(){g="POP";let z=S(),U=z==null?null:z-_;_=z,v&&v({action:g,location:A.location,delta:U})}function T(z,U){g="PUSH";let I=_f(A.location,z,U);_=S()+1;let R=Ry(I,_),K=A.createHref(I);try{f.pushState(R,"",K)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;d.location.assign(K)}m&&v&&v({action:g,location:A.location,delta:1})}function O(z,U){g="REPLACE";let I=_f(A.location,z,U);_=S();let R=Ry(I,_),K=A.createHref(I);f.replaceState(R,"",K),m&&v&&v({action:g,location:A.location,delta:0})}function k(z){return qj(z)}let A={get action(){return g},get location(){return e(d,f)},listen(z){if(v)throw new Error("A history only accepts one active listener");return d.addEventListener(Dy,w),v=z,()=>{d.removeEventListener(Dy,w),v=null}},createHref(z){return s(d,z)},createURL:k,encodeLocation(z){let U=k(z);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:T,replace:O,go(z){return f.go(z)}};return A}function qj(e,s=!1){let l="http://localhost";typeof window<"u"&&(l=window.location.origin!=="null"?window.location.origin:window.location.href),yn(l,"No window.location.(origin|href) available to create URL");let o=typeof e=="string"?e:ac(e);return o=o.replace(/ $/,"%20"),!s&&o.startsWith("//")&&(o=l+o),new URL(o,l)}function qv(e,s,l="/"){return Zj(e,s,l,!1)}function Zj(e,s,l,o){let d=typeof s=="string"?ql(s):s,m=hi(d.pathname||"/",l);if(m==null)return null;let f=Zv(e);Hj(f);let g=null;for(let v=0;g==null&&v<f.length;++v){let _=tS(m);g=Wj(f[v],_,o)}return g}function Zv(e,s=[],l=[],o="",d=!1){let m=(f,g,v=d,_)=>{let S={relativePath:_===void 0?f.path||"":_,caseSensitive:f.caseSensitive===!0,childrenIndex:g,route:f};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(o)&&v)return;yn(S.relativePath.startsWith(o),`Absolute route path "${S.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(o.length)}let w=di([o,S.relativePath]),T=l.concat(S);f.children&&f.children.length>0&&(yn(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),Zv(f.children,s,T,w,v)),!(f.path==null&&!f.index)&&s.push({path:w,score:Xj(w,f.index),routesMeta:T})};return e.forEach((f,g)=>{if(f.path===""||!f.path?.includes("?"))m(f,g);else for(let v of Hv(f.path))m(f,g,!0,v)}),s}function Hv(e){let s=e.split("/");if(s.length===0)return[];let[l,...o]=s,d=l.endsWith("?"),m=l.replace(/\?$/,"");if(o.length===0)return d?[m,""]:[m];let f=Hv(o.join("/")),g=[];return g.push(...f.map(v=>v===""?m:[m,v].join("/"))),d&&g.push(...f),g.map(v=>e.startsWith("/")&&v===""?"/":v)}function Hj(e){e.sort((s,l)=>s.score!==l.score?l.score-s.score:Jj(s.routesMeta.map(o=>o.childrenIndex),l.routesMeta.map(o=>o.childrenIndex)))}var Kj=/^:[\w-]+$/,Gj=3,Qj=2,Vj=1,Yj=10,$j=-2,Ly=e=>e==="*";function Xj(e,s){let l=e.split("/"),o=l.length;return l.some(Ly)&&(o+=$j),s&&(o+=Qj),l.filter(d=>!Ly(d)).reduce((d,m)=>d+(Kj.test(m)?Gj:m===""?Vj:Yj),o)}function Jj(e,s){return e.length===s.length&&e.slice(0,-1).every((o,d)=>o===s[d])?e[e.length-1]-s[s.length-1]:0}function Wj(e,s,l=!1){let{routesMeta:o}=e,d={},m="/",f=[];for(let g=0;g<o.length;++g){let v=o[g],_=g===o.length-1,S=m==="/"?s:s.slice(m.length)||"/",w=rd({path:v.relativePath,caseSensitive:v.caseSensitive,end:_},S),T=v.route;if(!w&&_&&l&&!o[o.length-1].route.index&&(w=rd({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},S)),!w)return null;Object.assign(d,w.params),f.push({params:d,pathname:di([m,w.pathname]),pathnameBase:iS(di([m,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(m=di([m,w.pathnameBase]))}return f}function rd(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[l,o]=eS(e.path,e.caseSensitive,e.end),d=s.match(l);if(!d)return null;let m=d[0],f=m.replace(/(.)\/+$/,"$1"),g=d.slice(1);return{params:o.reduce((_,{paramName:S,isOptional:w},T)=>{if(S==="*"){let k=g[T]||"";f=m.slice(0,m.length-k.length).replace(/(.)\/+$/,"$1")}const O=g[T];return w&&!O?_[S]=void 0:_[S]=(O||"").replace(/%2F/g,"/"),_},{}),pathname:m,pathnameBase:f,pattern:e}}function eS(e,s=!1,l=!0){ms(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let o=[],d="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,g,v)=>(o.push({paramName:g,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(o.push({paramName:"*"}),d+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?d+="\\/*$":e!==""&&e!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,s?void 0:"i"),o]}function tS(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return ms(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),e}}function hi(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let l=s.endsWith("/")?s.length-1:s.length,o=e.charAt(l);return o&&o!=="/"?null:e.slice(l)||"/"}var nS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function aS(e,s="/"){let{pathname:l,search:o="",hash:d=""}=typeof e=="string"?ql(e):e,m;return l?(l=l.replace(/\/\/+/g,"/"),l.startsWith("/")?m=Py(l.substring(1),"/"):m=Py(l,s)):m=s,{pathname:m,search:rS(o),hash:lS(d)}}function Py(e,s){let l=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(d=>{d===".."?l.length>1&&l.pop():d!=="."&&l.push(d)}),l.length>1?l.join("/"):"/"}function kh(e,s,l,o){return`Cannot include a '${e}' character in a manually specified \`to.${s}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${l}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function sS(e){return e.filter((s,l)=>l===0||s.route.path&&s.route.path.length>0)}function Gf(e){let s=sS(e);return s.map((l,o)=>o===s.length-1?l.pathname:l.pathnameBase)}function Qf(e,s,l,o=!1){let d;typeof e=="string"?d=ql(e):(d={...e},yn(!d.pathname||!d.pathname.includes("?"),kh("?","pathname","search",d)),yn(!d.pathname||!d.pathname.includes("#"),kh("#","pathname","hash",d)),yn(!d.search||!d.search.includes("#"),kh("#","search","hash",d)));let m=e===""||d.pathname==="",f=m?"/":d.pathname,g;if(f==null)g=l;else{let w=s.length-1;if(!o&&f.startsWith("..")){let T=f.split("/");for(;T[0]==="..";)T.shift(),w-=1;d.pathname=T.join("/")}g=w>=0?s[w]:"/"}let v=aS(d,g),_=f&&f!=="/"&&f.endsWith("/"),S=(m||f===".")&&l.endsWith("/");return!v.pathname.endsWith("/")&&(_||S)&&(v.pathname+="/"),v}var di=e=>e.join("/").replace(/\/\/+/g,"/"),iS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),rS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,lS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,oS=class{constructor(e,s,l,o=!1){this.status=e,this.statusText=s||"",this.internal=o,l instanceof Error?(this.data=l.toString(),this.error=l):this.data=l}};function cS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function uS(e){return e.map(s=>s.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Kv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Gv(e,s){let l=e;if(typeof l!="string"||!nS.test(l))return{absoluteURL:void 0,isExternal:!1,to:l};let o=l,d=!1;if(Kv)try{let m=new URL(window.location.href),f=l.startsWith("//")?new URL(m.protocol+l):new URL(l),g=hi(f.pathname,s);f.origin===m.origin&&g!=null?l=g+f.search+f.hash:d=!0}catch{ms(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:d,to:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Qv=["POST","PUT","PATCH","DELETE"];new Set(Qv);var dS=["GET",...Qv];new Set(dS);var Zl=b.createContext(null);Zl.displayName="DataRouter";var gd=b.createContext(null);gd.displayName="DataRouterState";var mS=b.createContext(!1),Vv=b.createContext({isTransitioning:!1});Vv.displayName="ViewTransition";var hS=b.createContext(new Map);hS.displayName="Fetchers";var fS=b.createContext(null);fS.displayName="Await";var Ya=b.createContext(null);Ya.displayName="Navigation";var lc=b.createContext(null);lc.displayName="Location";var fs=b.createContext({outlet:null,matches:[],isDataRoute:!1});fs.displayName="Route";var Vf=b.createContext(null);Vf.displayName="RouteError";var Yv="REACT_ROUTER_ERROR",pS="REDIRECT",xS="ROUTE_ERROR_RESPONSE";function gS(e){if(e.startsWith(`${Yv}:${pS}:{`))try{let s=JSON.parse(e.slice(28));if(typeof s=="object"&&s&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.location=="string"&&typeof s.reloadDocument=="boolean"&&typeof s.replace=="boolean")return s}catch{}}function yS(e){if(e.startsWith(`${Yv}:${xS}:{`))try{let s=JSON.parse(e.slice(40));if(typeof s=="object"&&s&&typeof s.status=="number"&&typeof s.statusText=="string")return new oS(s.status,s.statusText,s.data)}catch{}}function vS(e,{relative:s}={}){yn(Hl(),"useHref() may be used only in the context of a <Router> component.");let{basename:l,navigator:o}=b.useContext(Ya),{hash:d,pathname:m,search:f}=oc(e,{relative:s}),g=m;return l!=="/"&&(g=m==="/"?l:di([l,m])),o.createHref({pathname:g,search:f,hash:d})}function Hl(){return b.useContext(lc)!=null}function ps(){return yn(Hl(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(lc).location}var $v="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Xv(e){b.useContext(Ya).static||b.useLayoutEffect(e)}function Kl(){let{isDataRoute:e}=b.useContext(fs);return e?RS():bS()}function bS(){yn(Hl(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(Zl),{basename:s,navigator:l}=b.useContext(Ya),{matches:o}=b.useContext(fs),{pathname:d}=ps(),m=JSON.stringify(Gf(o)),f=b.useRef(!1);return Xv(()=>{f.current=!0}),b.useCallback((v,_={})=>{if(ms(f.current,$v),!f.current)return;if(typeof v=="number"){l.go(v);return}let S=Qf(v,JSON.parse(m),d,_.relative==="path");e==null&&s!=="/"&&(S.pathname=S.pathname==="/"?s:di([s,S.pathname])),(_.replace?l.replace:l.push)(S,_.state,_)},[s,l,m,d,e])}var _S=b.createContext(null);function NS(e){let s=b.useContext(fs).outlet;return b.useMemo(()=>s&&b.createElement(_S.Provider,{value:e},s),[s,e])}function jS(){let{matches:e}=b.useContext(fs),s=e[e.length-1];return s?s.params:{}}function oc(e,{relative:s}={}){let{matches:l}=b.useContext(fs),{pathname:o}=ps(),d=JSON.stringify(Gf(l));return b.useMemo(()=>Qf(e,JSON.parse(d),o,s==="path"),[e,d,o,s])}function SS(e,s){return Jv(e,s)}function Jv(e,s,l,o,d){yn(Hl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=b.useContext(Ya),{matches:f}=b.useContext(fs),g=f[f.length-1],v=g?g.params:{},_=g?g.pathname:"/",S=g?g.pathnameBase:"/",w=g&&g.route;{let I=w&&w.path||"";eb(_,!w||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let T=ps(),O;if(s){let I=typeof s=="string"?ql(s):s;yn(S==="/"||I.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${I.pathname}" was given in the \`location\` prop.`),O=I}else O=T;let k=O.pathname||"/",A=k;if(S!=="/"){let I=S.replace(/^\//,"").split("/");A="/"+k.replace(/^\//,"").split("/").slice(I.length).join("/")}let z=qv(e,{pathname:A});ms(w||z!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),ms(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=CS(z&&z.map(I=>Object.assign({},I,{params:Object.assign({},v,I.params),pathname:di([S,m.encodeLocation?m.encodeLocation(I.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?S:di([S,m.encodeLocation?m.encodeLocation(I.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathnameBase])})),f,l,o,d);return s&&U?b.createElement(lc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},U):U}function wS(){let e=DS(),s=cS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),l=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:o},m={padding:"2px 4px",backgroundColor:o},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:m},"ErrorBoundary")," or"," ",b.createElement("code",{style:m},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},s),l?b.createElement("pre",{style:d},l):null,f)}var ES=b.createElement(wS,null),Wv=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){this.props.onError?this.props.onError(e,s):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const l=yS(e.digest);l&&(e=l)}let s=e!==void 0?b.createElement(fs.Provider,{value:this.props.routeContext},b.createElement(Vf.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?b.createElement(kS,{error:e},s):s}};Wv.contextType=mS;var Th=new WeakMap;function kS({children:e,error:s}){let{basename:l}=b.useContext(Ya);if(typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){let o=gS(s.digest);if(o){let d=Th.get(s);if(d)throw d;let m=Gv(o.location,l);if(Kv&&!Th.get(s))if(m.isExternal||o.reloadDocument)window.location.href=m.absoluteURL||m.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(m.to,{replace:o.replace}));throw Th.set(s,f),f}return b.createElement("meta",{httpEquiv:"refresh",content:`0;url=${m.absoluteURL||m.to}`})}}return e}function TS({routeContext:e,match:s,children:l}){let o=b.useContext(Zl);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),b.createElement(fs.Provider,{value:e},l)}function CS(e,s=[],l=null,o=null,d=null){if(e==null){if(!l)return null;if(l.errors)e=l.matches;else if(s.length===0&&!l.initialized&&l.matches.length>0)e=l.matches;else return null}let m=e,f=l?.errors;if(f!=null){let S=m.findIndex(w=>w.route.id&&f?.[w.route.id]!==void 0);yn(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),m=m.slice(0,Math.min(m.length,S+1))}let g=!1,v=-1;if(l)for(let S=0;S<m.length;S++){let w=m[S];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(v=S),w.route.id){let{loaderData:T,errors:O}=l,k=w.route.loader&&!T.hasOwnProperty(w.route.id)&&(!O||O[w.route.id]===void 0);if(w.route.lazy||k){g=!0,v>=0?m=m.slice(0,v+1):m=[m[0]];break}}}let _=l&&o?(S,w)=>{o(S,{location:l.location,params:l.matches?.[0]?.params??{},unstable_pattern:uS(l.matches),errorInfo:w})}:void 0;return m.reduceRight((S,w,T)=>{let O,k=!1,A=null,z=null;l&&(O=f&&w.route.id?f[w.route.id]:void 0,A=w.route.errorElement||ES,g&&(v<0&&T===0?(eb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,z=null):v===T&&(k=!0,z=w.route.hydrateFallbackElement||null)));let U=s.concat(m.slice(0,T+1)),I=()=>{let R;return O?R=A:k?R=z:w.route.Component?R=b.createElement(w.route.Component,null):w.route.element?R=w.route.element:R=S,b.createElement(TS,{match:w,routeContext:{outlet:S,matches:U,isDataRoute:l!=null},children:R})};return l&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?b.createElement(Wv,{location:l.location,revalidation:l.revalidation,component:A,error:O,children:I(),routeContext:{outlet:null,matches:U,isDataRoute:!0},onError:_}):I()},null)}function Yf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AS(e){let s=b.useContext(Zl);return yn(s,Yf(e)),s}function MS(e){let s=b.useContext(gd);return yn(s,Yf(e)),s}function zS(e){let s=b.useContext(fs);return yn(s,Yf(e)),s}function $f(e){let s=zS(e),l=s.matches[s.matches.length-1];return yn(l.route.id,`${e} can only be used on routes that contain a unique "id"`),l.route.id}function OS(){return $f("useRouteId")}function DS(){let e=b.useContext(Vf),s=MS("useRouteError"),l=$f("useRouteError");return e!==void 0?e:s.errors?.[l]}function RS(){let{router:e}=AS("useNavigate"),s=$f("useNavigate"),l=b.useRef(!1);return Xv(()=>{l.current=!0}),b.useCallback(async(d,m={})=>{ms(l.current,$v),l.current&&(typeof d=="number"?await e.navigate(d):await e.navigate(d,{fromRouteId:s,...m}))},[e,s])}var Iy={};function eb(e,s,l){!s&&!Iy[e]&&(Iy[e]=!0,ms(!1,l))}b.memo(LS);function LS({routes:e,future:s,state:l,onError:o}){return Jv(e,void 0,l,o,s)}function Xf({to:e,replace:s,state:l,relative:o}){yn(Hl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:d}=b.useContext(Ya);ms(!d,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:m}=b.useContext(fs),{pathname:f}=ps(),g=Kl(),v=Qf(e,Gf(m),f,o==="path"),_=JSON.stringify(v);return b.useEffect(()=>{g(JSON.parse(_),{replace:s,state:l,relative:o})},[g,_,o,s,l]),null}function Jf(e){return NS(e.context)}function Xt(e){yn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function PS({basename:e="/",children:s=null,location:l,navigationType:o="POP",navigator:d,static:m=!1,unstable_useTransitions:f}){yn(!Hl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=e.replace(/^\/*/,"/"),v=b.useMemo(()=>({basename:g,navigator:d,static:m,unstable_useTransitions:f,future:{}}),[g,d,m,f]);typeof l=="string"&&(l=ql(l));let{pathname:_="/",search:S="",hash:w="",state:T=null,key:O="default"}=l,k=b.useMemo(()=>{let A=hi(_,g);return A==null?null:{location:{pathname:A,search:S,hash:w,state:T,key:O},navigationType:o}},[g,_,S,w,T,O,o]);return ms(k!=null,`<Router basename="${g}"> is not able to match the URL "${_}${S}${w}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:b.createElement(Ya.Provider,{value:v},b.createElement(lc.Provider,{children:s,value:k}))}function IS({children:e,location:s}){return SS(Nf(e),s)}function Nf(e,s=[]){let l=[];return b.Children.forEach(e,(o,d)=>{if(!b.isValidElement(o))return;let m=[...s,d];if(o.type===b.Fragment){l.push.apply(l,Nf(o.props.children,m));return}yn(o.type===Xt,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yn(!o.props.index||!o.props.children,"An index route cannot have child routes.");let f={id:o.props.id||m.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(f.children=Nf(o.props.children,m)),l.push(f)}),l}var Ju="get",Wu="application/x-www-form-urlencoded";function yd(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function BS(e){return yd(e)&&e.tagName.toLowerCase()==="button"}function US(e){return yd(e)&&e.tagName.toLowerCase()==="form"}function FS(e){return yd(e)&&e.tagName.toLowerCase()==="input"}function qS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ZS(e,s){return e.button===0&&(!s||s==="_self")&&!qS(e)}function jf(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((s,l)=>{let o=e[l];return s.concat(Array.isArray(o)?o.map(d=>[l,d]):[[l,o]])},[]))}function HS(e,s){let l=jf(e);return s&&s.forEach((o,d)=>{l.has(d)||s.getAll(d).forEach(m=>{l.append(d,m)})}),l}var Ru=null;function KS(){if(Ru===null)try{new FormData(document.createElement("form"),0),Ru=!1}catch{Ru=!0}return Ru}var GS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ch(e){return e!=null&&!GS.has(e)?(ms(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wu}"`),null):e}function QS(e,s){let l,o,d,m,f;if(US(e)){let g=e.getAttribute("action");o=g?hi(g,s):null,l=e.getAttribute("method")||Ju,d=Ch(e.getAttribute("enctype"))||Wu,m=new FormData(e)}else if(BS(e)||FS(e)&&(e.type==="submit"||e.type==="image")){let g=e.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=e.getAttribute("formaction")||g.getAttribute("action");if(o=v?hi(v,s):null,l=e.getAttribute("formmethod")||g.getAttribute("method")||Ju,d=Ch(e.getAttribute("formenctype"))||Ch(g.getAttribute("enctype"))||Wu,m=new FormData(g,e),!KS()){let{name:_,type:S,value:w}=e;if(S==="image"){let T=_?`${_}.`:"";m.append(`${T}x`,"0"),m.append(`${T}y`,"0")}else _&&m.append(_,w)}}else{if(yd(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');l=Ju,o=null,d=Wu,f=e}return m&&d==="text/plain"&&(f=m,m=void 0),{action:o,method:l.toLowerCase(),encType:d,formData:m,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wf(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function VS(e,s,l,o){let d=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return l?d.pathname.endsWith("/")?d.pathname=`${d.pathname}_.${o}`:d.pathname=`${d.pathname}.${o}`:d.pathname==="/"?d.pathname=`_root.${o}`:s&&hi(d.pathname,s)==="/"?d.pathname=`${s.replace(/\/$/,"")}/_root.${o}`:d.pathname=`${d.pathname.replace(/\/$/,"")}.${o}`,d}async function YS(e,s){if(e.id in s)return s[e.id];try{let l=await import(e.module);return s[e.id]=l,l}catch(l){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(l),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $S(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function XS(e,s,l){let o=await Promise.all(e.map(async d=>{let m=s.routes[d.route.id];if(m){let f=await YS(m,l);return f.links?f.links():[]}return[]}));return tw(o.flat(1).filter($S).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function By(e,s,l,o,d,m){let f=(v,_)=>l[_]?v.route.id!==l[_].route.id:!0,g=(v,_)=>l[_].pathname!==v.pathname||l[_].route.path?.endsWith("*")&&l[_].params["*"]!==v.params["*"];return m==="assets"?s.filter((v,_)=>f(v,_)||g(v,_)):m==="data"?s.filter((v,_)=>{let S=o.routes[v.route.id];if(!S||!S.hasLoader)return!1;if(f(v,_)||g(v,_))return!0;if(v.route.shouldRevalidate){let w=v.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:l[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function JS(e,s,{includeHydrateFallback:l}={}){return WS(e.map(o=>{let d=s.routes[o.route.id];if(!d)return[];let m=[d.module];return d.clientActionModule&&(m=m.concat(d.clientActionModule)),d.clientLoaderModule&&(m=m.concat(d.clientLoaderModule)),l&&d.hydrateFallbackModule&&(m=m.concat(d.hydrateFallbackModule)),d.imports&&(m=m.concat(d.imports)),m}).flat(1))}function WS(e){return[...new Set(e)]}function ew(e){let s={},l=Object.keys(e).sort();for(let o of l)s[o]=e[o];return s}function tw(e,s){let l=new Set;return new Set(s),e.reduce((o,d)=>{let m=JSON.stringify(ew(d));return l.has(m)||(l.add(m),o.push({key:m,link:d})),o},[])}function tb(){let e=b.useContext(Zl);return Wf(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function nw(){let e=b.useContext(gd);return Wf(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var ep=b.createContext(void 0);ep.displayName="FrameworkContext";function nb(){let e=b.useContext(ep);return Wf(e,"You must render this element inside a <HydratedRouter> element"),e}function aw(e,s){let l=b.useContext(ep),[o,d]=b.useState(!1),[m,f]=b.useState(!1),{onFocus:g,onBlur:v,onMouseEnter:_,onMouseLeave:S,onTouchStart:w}=s,T=b.useRef(null);b.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let A=U=>{U.forEach(I=>{f(I.isIntersecting)})},z=new IntersectionObserver(A,{threshold:.5});return T.current&&z.observe(T.current),()=>{z.disconnect()}}},[e]),b.useEffect(()=>{if(o){let A=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(A)}}},[o]);let O=()=>{d(!0)},k=()=>{d(!1),f(!1)};return l?e!=="intent"?[m,T,{}]:[m,T,{onFocus:Yo(g,O),onBlur:Yo(v,k),onMouseEnter:Yo(_,O),onMouseLeave:Yo(S,k),onTouchStart:Yo(w,O)}]:[!1,T,{}]}function Yo(e,s){return l=>{e&&e(l),l.defaultPrevented||s(l)}}function sw({page:e,...s}){let{router:l}=tb(),o=b.useMemo(()=>qv(l.routes,e,l.basename),[l.routes,e,l.basename]);return o?b.createElement(rw,{page:e,matches:o,...s}):null}function iw(e){let{manifest:s,routeModules:l}=nb(),[o,d]=b.useState([]);return b.useEffect(()=>{let m=!1;return XS(e,s,l).then(f=>{m||d(f)}),()=>{m=!0}},[e,s,l]),o}function rw({page:e,matches:s,...l}){let o=ps(),{future:d,manifest:m,routeModules:f}=nb(),{basename:g}=tb(),{loaderData:v,matches:_}=nw(),S=b.useMemo(()=>By(e,s,_,m,o,"data"),[e,s,_,m,o]),w=b.useMemo(()=>By(e,s,_,m,o,"assets"),[e,s,_,m,o]),T=b.useMemo(()=>{if(e===o.pathname+o.search+o.hash)return[];let A=new Set,z=!1;if(s.forEach(I=>{let R=m.routes[I.route.id];!R||!R.hasLoader||(!S.some(K=>K.route.id===I.route.id)&&I.route.id in v&&f[I.route.id]?.shouldRevalidate||R.hasClientLoader?z=!0:A.add(I.route.id))}),A.size===0)return[];let U=VS(e,g,d.unstable_trailingSlashAwareDataRequests,"data");return z&&A.size>0&&U.searchParams.set("_routes",s.filter(I=>A.has(I.route.id)).map(I=>I.route.id).join(",")),[U.pathname+U.search]},[g,d.unstable_trailingSlashAwareDataRequests,v,o,m,S,s,e,f]),O=b.useMemo(()=>JS(w,m),[w,m]),k=iw(w);return b.createElement(b.Fragment,null,T.map(A=>b.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...l})),O.map(A=>b.createElement("link",{key:A,rel:"modulepreload",href:A,...l})),k.map(({key:A,link:z})=>b.createElement("link",{key:A,nonce:l.nonce,...z,crossOrigin:z.crossOrigin??l.crossOrigin})))}function lw(...e){return s=>{e.forEach(l=>{typeof l=="function"?l(s):l!=null&&(l.current=s)})}}var ow=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ow&&(window.__reactRouterVersion="7.13.0")}catch{}function cw({basename:e,children:s,unstable_useTransitions:l,window:o}){let d=b.useRef();d.current==null&&(d.current=Bj({window:o,v5Compat:!0}));let m=d.current,[f,g]=b.useState({action:m.action,location:m.location}),v=b.useCallback(_=>{l===!1?g(_):b.startTransition(()=>g(_))},[l]);return b.useLayoutEffect(()=>m.listen(v),[m,v]),b.createElement(PS,{basename:e,children:s,location:f.location,navigationType:f.action,navigator:m,unstable_useTransitions:l})}var ab=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,us=b.forwardRef(function({onClick:s,discover:l="render",prefetch:o="none",relative:d,reloadDocument:m,replace:f,state:g,target:v,to:_,preventScrollReset:S,viewTransition:w,unstable_defaultShouldRevalidate:T,...O},k){let{basename:A,unstable_useTransitions:z}=b.useContext(Ya),U=typeof _=="string"&&ab.test(_),I=Gv(_,A);_=I.to;let R=vS(_,{relative:d}),[K,V,ee]=aw(o,O),q=mw(_,{replace:f,state:g,target:v,preventScrollReset:S,relative:d,viewTransition:w,unstable_defaultShouldRevalidate:T,unstable_useTransitions:z});function Y(ie){s&&s(ie),ie.defaultPrevented||q(ie)}let $=b.createElement("a",{...O,...ee,href:I.absoluteURL||R,onClick:I.isExternal||m?s:Y,ref:lw(k,V),target:v,"data-discover":!U&&l==="render"?"true":void 0});return K&&!U?b.createElement(b.Fragment,null,$,b.createElement(sw,{page:R})):$});us.displayName="Link";var sb=b.forwardRef(function({"aria-current":s="page",caseSensitive:l=!1,className:o="",end:d=!1,style:m,to:f,viewTransition:g,children:v,..._},S){let w=oc(f,{relative:_.relative}),T=ps(),O=b.useContext(gd),{navigator:k,basename:A}=b.useContext(Ya),z=O!=null&&gw(w)&&g===!0,U=k.encodeLocation?k.encodeLocation(w).pathname:w.pathname,I=T.pathname,R=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;l||(I=I.toLowerCase(),R=R?R.toLowerCase():null,U=U.toLowerCase()),R&&A&&(R=hi(R,A)||R);const K=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let V=I===U||!d&&I.startsWith(U)&&I.charAt(K)==="/",ee=R!=null&&(R===U||!d&&R.startsWith(U)&&R.charAt(U.length)==="/"),q={isActive:V,isPending:ee,isTransitioning:z},Y=V?s:void 0,$;typeof o=="function"?$=o(q):$=[o,V?"active":null,ee?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let ie=typeof m=="function"?m(q):m;return b.createElement(us,{..._,"aria-current":Y,className:$,ref:S,style:ie,to:f,viewTransition:g},typeof v=="function"?v(q):v)});sb.displayName="NavLink";var uw=b.forwardRef(({discover:e="render",fetcherKey:s,navigate:l,reloadDocument:o,replace:d,state:m,method:f=Ju,action:g,onSubmit:v,relative:_,preventScrollReset:S,viewTransition:w,unstable_defaultShouldRevalidate:T,...O},k)=>{let{unstable_useTransitions:A}=b.useContext(Ya),z=pw(),U=xw(g,{relative:_}),I=f.toLowerCase()==="get"?"get":"post",R=typeof g=="string"&&ab.test(g),K=V=>{if(v&&v(V),V.defaultPrevented)return;V.preventDefault();let ee=V.nativeEvent.submitter,q=ee?.getAttribute("formmethod")||f,Y=()=>z(ee||V.currentTarget,{fetcherKey:s,method:q,navigate:l,replace:d,state:m,relative:_,preventScrollReset:S,viewTransition:w,unstable_defaultShouldRevalidate:T});A&&l!==!1?b.startTransition(()=>Y()):Y()};return b.createElement("form",{ref:k,method:I,action:U,onSubmit:o?v:K,...O,"data-discover":!R&&e==="render"?"true":void 0})});uw.displayName="Form";function dw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ib(e){let s=b.useContext(Zl);return yn(s,dw(e)),s}function mw(e,{target:s,replace:l,state:o,preventScrollReset:d,relative:m,viewTransition:f,unstable_defaultShouldRevalidate:g,unstable_useTransitions:v}={}){let _=Kl(),S=ps(),w=oc(e,{relative:m});return b.useCallback(T=>{if(ZS(T,s)){T.preventDefault();let O=l!==void 0?l:ac(S)===ac(w),k=()=>_(e,{replace:O,state:o,preventScrollReset:d,relative:m,viewTransition:f,unstable_defaultShouldRevalidate:g});v?b.startTransition(()=>k()):k()}},[S,_,w,l,o,s,e,d,m,f,g,v])}function vd(e){ms(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let s=b.useRef(jf(e)),l=b.useRef(!1),o=ps(),d=b.useMemo(()=>HS(o.search,l.current?null:s.current),[o.search]),m=Kl(),f=b.useCallback((g,v)=>{const _=jf(typeof g=="function"?g(new URLSearchParams(d)):g);l.current=!0,m("?"+_,v)},[m,d]);return[d,f]}var hw=0,fw=()=>`__${String(++hw)}__`;function pw(){let{router:e}=ib("useSubmit"),{basename:s}=b.useContext(Ya),l=OS(),o=e.fetch,d=e.navigate;return b.useCallback(async(m,f={})=>{let{action:g,method:v,encType:_,formData:S,body:w}=QS(m,s);if(f.navigate===!1){let T=f.fetcherKey||fw();await o(T,l,f.action||g,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:S,body:w,formMethod:f.method||v,formEncType:f.encType||_,flushSync:f.flushSync})}else await d(f.action||g,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:S,body:w,formMethod:f.method||v,formEncType:f.encType||_,replace:f.replace,state:f.state,fromRouteId:l,flushSync:f.flushSync,viewTransition:f.viewTransition})},[o,d,s,l])}function xw(e,{relative:s}={}){let{basename:l}=b.useContext(Ya),o=b.useContext(fs);yn(o,"useFormAction must be used inside a RouteContext");let[d]=o.matches.slice(-1),m={...oc(e||".",{relative:s})},f=ps();if(e==null){m.search=f.search;let g=new URLSearchParams(m.search),v=g.getAll("index");if(v.some(S=>S==="")){g.delete("index"),v.filter(w=>w).forEach(w=>g.append("index",w));let S=g.toString();m.search=S?`?${S}`:""}}return(!e||e===".")&&d.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),l!=="/"&&(m.pathname=m.pathname==="/"?l:di([l,m.pathname])),ac(m)}function gw(e,{relative:s}={}){let l=b.useContext(Vv);yn(l!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=ib("useViewTransitionState"),d=oc(e,{relative:s});if(!l.isTransitioning)return!1;let m=hi(l.currentLocation.pathname,o)||l.currentLocation.pathname,f=hi(l.nextLocation.pathname,o)||l.nextLocation.pathname;return rd(d.pathname,f)!=null||rd(d.pathname,m)!=null}function Ce(e,s,l){function o(g,v){if(g._zod||Object.defineProperty(g,"_zod",{value:{def:v,constr:f,traits:new Set},enumerable:!1}),g._zod.traits.has(e))return;g._zod.traits.add(e),s(g,v);const _=f.prototype,S=Object.keys(_);for(let w=0;w<S.length;w++){const T=S[w];T in g||(g[T]=_[T].bind(g))}}const d=l?.Parent??Object;class m extends d{}Object.defineProperty(m,"name",{value:e});function f(g){var v;const _=l?.Parent?new m:this;o(_,g),(v=_._zod).deferred??(v.deferred=[]);for(const S of _._zod.deferred)S();return _}return Object.defineProperty(f,"init",{value:o}),Object.defineProperty(f,Symbol.hasInstance,{value:g=>l?.Parent&&g instanceof l.Parent?!0:g?._zod?.traits?.has(e)}),Object.defineProperty(f,"name",{value:e}),f}class Bl extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class rb extends Error{constructor(s){super(`Encountered unidirectional transform during encode: ${s}`),this.name="ZodEncodeError"}}const Sf={};function tr(e){return e&&Object.assign(Sf,e),Sf}function lb(e){const s=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,d])=>s.indexOf(+o)===-1).map(([o,d])=>d)}function wf(e,s){return typeof s=="bigint"?s.toString():s}function tp(e){return{get value(){{const s=e();return Object.defineProperty(this,"value",{value:s}),s}}}}function np(e){return e==null}function ap(e){const s=e.startsWith("^")?1:0,l=e.endsWith("$")?e.length-1:e.length;return e.slice(s,l)}function yw(e,s){const l=(e.toString().split(".")[1]||"").length,o=s.toString();let d=(o.split(".")[1]||"").length;if(d===0&&/\d?e-\d?/.test(o)){const v=o.match(/\d?e-(\d?)/);v?.[1]&&(d=Number.parseInt(v[1]))}const m=l>d?l:d,f=Number.parseInt(e.toFixed(m).replace(".","")),g=Number.parseInt(s.toFixed(m).replace(".",""));return f%g/10**m}const Uy=Symbol("evaluating");function en(e,s,l){let o;Object.defineProperty(e,s,{get(){if(o!==Uy)return o===void 0&&(o=Uy,o=l()),o},set(d){Object.defineProperty(e,s,{value:d})},configurable:!0})}function Gr(e,s,l){Object.defineProperty(e,s,{value:l,writable:!0,enumerable:!0,configurable:!0})}function ar(...e){const s={};for(const l of e){const o=Object.getOwnPropertyDescriptors(l);Object.assign(s,o)}return Object.defineProperties({},s)}function Fy(e){return JSON.stringify(e)}function vw(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const ob="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function ld(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const bw=tp(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function sc(e){if(ld(e)===!1)return!1;const s=e.constructor;if(s===void 0||typeof s!="function")return!0;const l=s.prototype;return!(ld(l)===!1||Object.prototype.hasOwnProperty.call(l,"isPrototypeOf")===!1)}function cb(e){return sc(e)?{...e}:Array.isArray(e)?[...e]:e}const _w=new Set(["string","number","symbol"]);function bd(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function sr(e,s,l){const o=new e._zod.constr(s??e._zod.def);return(!s||l?.parent)&&(o._zod.parent=e),o}function tt(e){const s=e;if(!s)return{};if(typeof s=="string")return{error:()=>s};if(s?.message!==void 0){if(s?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");s.error=s.message}return delete s.message,typeof s.error=="string"?{...s,error:()=>s.error}:s}function Nw(e){return Object.keys(e).filter(s=>e[s]._zod.optin==="optional"&&e[s]._zod.optout==="optional")}const jw={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Sw(e,s){const l=e._zod.def,o=l.checks;if(o&&o.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const m=ar(e._zod.def,{get shape(){const f={};for(const g in s){if(!(g in l.shape))throw new Error(`Unrecognized key: "${g}"`);s[g]&&(f[g]=l.shape[g])}return Gr(this,"shape",f),f},checks:[]});return sr(e,m)}function ww(e,s){const l=e._zod.def,o=l.checks;if(o&&o.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const m=ar(e._zod.def,{get shape(){const f={...e._zod.def.shape};for(const g in s){if(!(g in l.shape))throw new Error(`Unrecognized key: "${g}"`);s[g]&&delete f[g]}return Gr(this,"shape",f),f},checks:[]});return sr(e,m)}function Ew(e,s){if(!sc(s))throw new Error("Invalid input to extend: expected a plain object");const l=e._zod.def.checks;if(l&&l.length>0){const m=e._zod.def.shape;for(const f in s)if(Object.getOwnPropertyDescriptor(m,f)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const d=ar(e._zod.def,{get shape(){const m={...e._zod.def.shape,...s};return Gr(this,"shape",m),m}});return sr(e,d)}function kw(e,s){if(!sc(s))throw new Error("Invalid input to safeExtend: expected a plain object");const l=ar(e._zod.def,{get shape(){const o={...e._zod.def.shape,...s};return Gr(this,"shape",o),o}});return sr(e,l)}function Tw(e,s){const l=ar(e._zod.def,{get shape(){const o={...e._zod.def.shape,...s._zod.def.shape};return Gr(this,"shape",o),o},get catchall(){return s._zod.def.catchall},checks:[]});return sr(e,l)}function Cw(e,s,l){const d=s._zod.def.checks;if(d&&d.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const f=ar(s._zod.def,{get shape(){const g=s._zod.def.shape,v={...g};if(l)for(const _ in l){if(!(_ in g))throw new Error(`Unrecognized key: "${_}"`);l[_]&&(v[_]=e?new e({type:"optional",innerType:g[_]}):g[_])}else for(const _ in g)v[_]=e?new e({type:"optional",innerType:g[_]}):g[_];return Gr(this,"shape",v),v},checks:[]});return sr(s,f)}function Aw(e,s,l){const o=ar(s._zod.def,{get shape(){const d=s._zod.def.shape,m={...d};if(l)for(const f in l){if(!(f in m))throw new Error(`Unrecognized key: "${f}"`);l[f]&&(m[f]=new e({type:"nonoptional",innerType:d[f]}))}else for(const f in d)m[f]=new e({type:"nonoptional",innerType:d[f]});return Gr(this,"shape",m),m}});return sr(s,o)}function Il(e,s=0){if(e.aborted===!0)return!0;for(let l=s;l<e.issues.length;l++)if(e.issues[l]?.continue!==!0)return!0;return!1}function ub(e,s){return s.map(l=>{var o;return(o=l).path??(o.path=[]),l.path.unshift(e),l})}function Lu(e){return typeof e=="string"?e:e?.message}function Hr(e,s,l){const o={...e,path:e.path??[]};if(!e.message){const d=Lu(e.inst?._zod.def?.error?.(e))??Lu(s?.error?.(e))??Lu(l.customError?.(e))??Lu(l.localeError?.(e))??"Invalid input";o.message=d}return delete o.inst,delete o.continue,s?.reportInput||delete o.input,o}function sp(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function ic(...e){const[s,l,o]=e;return typeof s=="string"?{message:s,code:"custom",input:l,inst:o}:{...s}}const db=(e,s)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:s,enumerable:!1}),e.message=JSON.stringify(s,wf,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},mb=Ce("$ZodError",db),hb=Ce("$ZodError",db,{Parent:Error});function Mw(e,s=l=>l.message){const l={},o=[];for(const d of e.issues)d.path.length>0?(l[d.path[0]]=l[d.path[0]]||[],l[d.path[0]].push(s(d))):o.push(s(d));return{formErrors:o,fieldErrors:l}}function zw(e,s=l=>l.message){const l={_errors:[]},o=d=>{for(const m of d.issues)if(m.code==="invalid_union"&&m.errors.length)m.errors.map(f=>o({issues:f}));else if(m.code==="invalid_key")o({issues:m.issues});else if(m.code==="invalid_element")o({issues:m.issues});else if(m.path.length===0)l._errors.push(s(m));else{let f=l,g=0;for(;g<m.path.length;){const v=m.path[g];g===m.path.length-1?(f[v]=f[v]||{_errors:[]},f[v]._errors.push(s(m))):f[v]=f[v]||{_errors:[]},f=f[v],g++}}};return o(e),l}const ip=e=>(s,l,o,d)=>{const m=o?Object.assign(o,{async:!1}):{async:!1},f=s._zod.run({value:l,issues:[]},m);if(f instanceof Promise)throw new Bl;if(f.issues.length){const g=new(d?.Err??e)(f.issues.map(v=>Hr(v,m,tr())));throw ob(g,d?.callee),g}return f.value},rp=e=>async(s,l,o,d)=>{const m=o?Object.assign(o,{async:!0}):{async:!0};let f=s._zod.run({value:l,issues:[]},m);if(f instanceof Promise&&(f=await f),f.issues.length){const g=new(d?.Err??e)(f.issues.map(v=>Hr(v,m,tr())));throw ob(g,d?.callee),g}return f.value},_d=e=>(s,l,o)=>{const d=o?{...o,async:!1}:{async:!1},m=s._zod.run({value:l,issues:[]},d);if(m instanceof Promise)throw new Bl;return m.issues.length?{success:!1,error:new(e??mb)(m.issues.map(f=>Hr(f,d,tr())))}:{success:!0,data:m.value}},Ow=_d(hb),Nd=e=>async(s,l,o)=>{const d=o?Object.assign(o,{async:!0}):{async:!0};let m=s._zod.run({value:l,issues:[]},d);return m instanceof Promise&&(m=await m),m.issues.length?{success:!1,error:new e(m.issues.map(f=>Hr(f,d,tr())))}:{success:!0,data:m.value}},Dw=Nd(hb),Rw=e=>(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return ip(e)(s,l,d)},Lw=e=>(s,l,o)=>ip(e)(s,l,o),Pw=e=>async(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return rp(e)(s,l,d)},Iw=e=>async(s,l,o)=>rp(e)(s,l,o),Bw=e=>(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return _d(e)(s,l,d)},Uw=e=>(s,l,o)=>_d(e)(s,l,o),Fw=e=>async(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Nd(e)(s,l,d)},qw=e=>async(s,l,o)=>Nd(e)(s,l,o),Zw=/^[cC][^\s-]{8,}$/,Hw=/^[0-9a-z]+$/,Kw=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Gw=/^[0-9a-vA-V]{20}$/,Qw=/^[A-Za-z0-9]{27}$/,Vw=/^[a-zA-Z0-9_-]{21}$/,Yw=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,$w=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,qy=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Xw=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Jw="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Ww(){return new RegExp(Jw,"u")}const e2=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,t2=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,n2=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,a2=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,s2=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,fb=/^[A-Za-z0-9_-]*$/,i2=/^\+[1-9]\d{6,14}$/,pb="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",r2=new RegExp(`^${pb}$`);function xb(e){const s="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${s}`:e.precision===0?`${s}:[0-5]\\d`:`${s}:[0-5]\\d\\.\\d{${e.precision}}`:`${s}(?::[0-5]\\d(?:\\.\\d+)?)?`}function l2(e){return new RegExp(`^${xb(e)}$`)}function o2(e){const s=xb({precision:e.precision}),l=["Z"];e.local&&l.push(""),e.offset&&l.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const o=`${s}(?:${l.join("|")})`;return new RegExp(`^${pb}T(?:${o})$`)}const c2=e=>{const s=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${s}$`)},u2=/^-?\d+$/,d2=/^-?\d+(?:\.\d+)?$/,m2=/^(?:true|false)$/i,h2=/^null$/i,f2=/^[^A-Z]*$/,p2=/^[^a-z]*$/,Pa=Ce("$ZodCheck",(e,s)=>{var l;e._zod??(e._zod={}),e._zod.def=s,(l=e._zod).onattach??(l.onattach=[])}),gb={number:"number",bigint:"bigint",object:"date"},yb=Ce("$ZodCheckLessThan",(e,s)=>{Pa.init(e,s);const l=gb[typeof s.value];e._zod.onattach.push(o=>{const d=o._zod.bag,m=(s.inclusive?d.maximum:d.exclusiveMaximum)??Number.POSITIVE_INFINITY;s.value<m&&(s.inclusive?d.maximum=s.value:d.exclusiveMaximum=s.value)}),e._zod.check=o=>{(s.inclusive?o.value<=s.value:o.value<s.value)||o.issues.push({origin:l,code:"too_big",maximum:typeof s.value=="object"?s.value.getTime():s.value,input:o.value,inclusive:s.inclusive,inst:e,continue:!s.abort})}}),vb=Ce("$ZodCheckGreaterThan",(e,s)=>{Pa.init(e,s);const l=gb[typeof s.value];e._zod.onattach.push(o=>{const d=o._zod.bag,m=(s.inclusive?d.minimum:d.exclusiveMinimum)??Number.NEGATIVE_INFINITY;s.value>m&&(s.inclusive?d.minimum=s.value:d.exclusiveMinimum=s.value)}),e._zod.check=o=>{(s.inclusive?o.value>=s.value:o.value>s.value)||o.issues.push({origin:l,code:"too_small",minimum:typeof s.value=="object"?s.value.getTime():s.value,input:o.value,inclusive:s.inclusive,inst:e,continue:!s.abort})}}),x2=Ce("$ZodCheckMultipleOf",(e,s)=>{Pa.init(e,s),e._zod.onattach.push(l=>{var o;(o=l._zod.bag).multipleOf??(o.multipleOf=s.value)}),e._zod.check=l=>{if(typeof l.value!=typeof s.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof l.value=="bigint"?l.value%s.value===BigInt(0):yw(l.value,s.value)===0)||l.issues.push({origin:typeof l.value,code:"not_multiple_of",divisor:s.value,input:l.value,inst:e,continue:!s.abort})}}),g2=Ce("$ZodCheckNumberFormat",(e,s)=>{Pa.init(e,s),s.format=s.format||"float64";const l=s.format?.includes("int"),o=l?"int":"number",[d,m]=jw[s.format];e._zod.onattach.push(f=>{const g=f._zod.bag;g.format=s.format,g.minimum=d,g.maximum=m,l&&(g.pattern=u2)}),e._zod.check=f=>{const g=f.value;if(l){if(!Number.isInteger(g)){f.issues.push({expected:o,format:s.format,code:"invalid_type",continue:!1,input:g,inst:e});return}if(!Number.isSafeInteger(g)){g>0?f.issues.push({input:g,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,inclusive:!0,continue:!s.abort}):f.issues.push({input:g,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,inclusive:!0,continue:!s.abort});return}}g<d&&f.issues.push({origin:"number",input:g,code:"too_small",minimum:d,inclusive:!0,inst:e,continue:!s.abort}),g>m&&f.issues.push({origin:"number",input:g,code:"too_big",maximum:m,inclusive:!0,inst:e,continue:!s.abort})}}),y2=Ce("$ZodCheckMaxLength",(e,s)=>{var l;Pa.init(e,s),(l=e._zod.def).when??(l.when=o=>{const d=o.value;return!np(d)&&d.length!==void 0}),e._zod.onattach.push(o=>{const d=o._zod.bag.maximum??Number.POSITIVE_INFINITY;s.maximum<d&&(o._zod.bag.maximum=s.maximum)}),e._zod.check=o=>{const d=o.value;if(d.length<=s.maximum)return;const f=sp(d);o.issues.push({origin:f,code:"too_big",maximum:s.maximum,inclusive:!0,input:d,inst:e,continue:!s.abort})}}),v2=Ce("$ZodCheckMinLength",(e,s)=>{var l;Pa.init(e,s),(l=e._zod.def).when??(l.when=o=>{const d=o.value;return!np(d)&&d.length!==void 0}),e._zod.onattach.push(o=>{const d=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;s.minimum>d&&(o._zod.bag.minimum=s.minimum)}),e._zod.check=o=>{const d=o.value;if(d.length>=s.minimum)return;const f=sp(d);o.issues.push({origin:f,code:"too_small",minimum:s.minimum,inclusive:!0,input:d,inst:e,continue:!s.abort})}}),b2=Ce("$ZodCheckLengthEquals",(e,s)=>{var l;Pa.init(e,s),(l=e._zod.def).when??(l.when=o=>{const d=o.value;return!np(d)&&d.length!==void 0}),e._zod.onattach.push(o=>{const d=o._zod.bag;d.minimum=s.length,d.maximum=s.length,d.length=s.length}),e._zod.check=o=>{const d=o.value,m=d.length;if(m===s.length)return;const f=sp(d),g=m>s.length;o.issues.push({origin:f,...g?{code:"too_big",maximum:s.length}:{code:"too_small",minimum:s.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!s.abort})}}),jd=Ce("$ZodCheckStringFormat",(e,s)=>{var l,o;Pa.init(e,s),e._zod.onattach.push(d=>{const m=d._zod.bag;m.format=s.format,s.pattern&&(m.patterns??(m.patterns=new Set),m.patterns.add(s.pattern))}),s.pattern?(l=e._zod).check??(l.check=d=>{s.pattern.lastIndex=0,!s.pattern.test(d.value)&&d.issues.push({origin:"string",code:"invalid_format",format:s.format,input:d.value,...s.pattern?{pattern:s.pattern.toString()}:{},inst:e,continue:!s.abort})}):(o=e._zod).check??(o.check=()=>{})}),_2=Ce("$ZodCheckRegex",(e,s)=>{jd.init(e,s),e._zod.check=l=>{s.pattern.lastIndex=0,!s.pattern.test(l.value)&&l.issues.push({origin:"string",code:"invalid_format",format:"regex",input:l.value,pattern:s.pattern.toString(),inst:e,continue:!s.abort})}}),N2=Ce("$ZodCheckLowerCase",(e,s)=>{s.pattern??(s.pattern=f2),jd.init(e,s)}),j2=Ce("$ZodCheckUpperCase",(e,s)=>{s.pattern??(s.pattern=p2),jd.init(e,s)}),S2=Ce("$ZodCheckIncludes",(e,s)=>{Pa.init(e,s);const l=bd(s.includes),o=new RegExp(typeof s.position=="number"?`^.{${s.position}}${l}`:l);s.pattern=o,e._zod.onattach.push(d=>{const m=d._zod.bag;m.patterns??(m.patterns=new Set),m.patterns.add(o)}),e._zod.check=d=>{d.value.includes(s.includes,s.position)||d.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:s.includes,input:d.value,inst:e,continue:!s.abort})}}),w2=Ce("$ZodCheckStartsWith",(e,s)=>{Pa.init(e,s);const l=new RegExp(`^${bd(s.prefix)}.*`);s.pattern??(s.pattern=l),e._zod.onattach.push(o=>{const d=o._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(l)}),e._zod.check=o=>{o.value.startsWith(s.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:s.prefix,input:o.value,inst:e,continue:!s.abort})}}),E2=Ce("$ZodCheckEndsWith",(e,s)=>{Pa.init(e,s);const l=new RegExp(`.*${bd(s.suffix)}$`);s.pattern??(s.pattern=l),e._zod.onattach.push(o=>{const d=o._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(l)}),e._zod.check=o=>{o.value.endsWith(s.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:s.suffix,input:o.value,inst:e,continue:!s.abort})}}),k2=Ce("$ZodCheckOverwrite",(e,s)=>{Pa.init(e,s),e._zod.check=l=>{l.value=s.tx(l.value)}});class T2{constructor(s=[]){this.content=[],this.indent=0,this&&(this.args=s)}indented(s){this.indent+=1,s(this),this.indent-=1}write(s){if(typeof s=="function"){s(this,{execution:"sync"}),s(this,{execution:"async"});return}const o=s.split(`
`).filter(f=>f),d=Math.min(...o.map(f=>f.length-f.trimStart().length)),m=o.map(f=>f.slice(d)).map(f=>" ".repeat(this.indent*2)+f);for(const f of m)this.content.push(f)}compile(){const s=Function,l=this?.args,d=[...(this?.content??[""]).map(m=>`  ${m}`)];return new s(...l,d.join(`
`))}}const C2={major:4,minor:3,patch:6},En=Ce("$ZodType",(e,s)=>{var l;e??(e={}),e._zod.def=s,e._zod.bag=e._zod.bag||{},e._zod.version=C2;const o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(const d of o)for(const m of d._zod.onattach)m(e);if(o.length===0)(l=e._zod).deferred??(l.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const d=(f,g,v)=>{let _=Il(f),S;for(const w of g){if(w._zod.def.when){if(!w._zod.def.when(f))continue}else if(_)continue;const T=f.issues.length,O=w._zod.check(f);if(O instanceof Promise&&v?.async===!1)throw new Bl;if(S||O instanceof Promise)S=(S??Promise.resolve()).then(async()=>{await O,f.issues.length!==T&&(_||(_=Il(f,T)))});else{if(f.issues.length===T)continue;_||(_=Il(f,T))}}return S?S.then(()=>f):f},m=(f,g,v)=>{if(Il(f))return f.aborted=!0,f;const _=d(g,o,v);if(_ instanceof Promise){if(v.async===!1)throw new Bl;return _.then(S=>e._zod.parse(S,v))}return e._zod.parse(_,v)};e._zod.run=(f,g)=>{if(g.skipChecks)return e._zod.parse(f,g);if(g.direction==="backward"){const _=e._zod.parse({value:f.value,issues:[]},{...g,skipChecks:!0});return _ instanceof Promise?_.then(S=>m(S,f,g)):m(_,f,g)}const v=e._zod.parse(f,g);if(v instanceof Promise){if(g.async===!1)throw new Bl;return v.then(_=>d(_,o,g))}return d(v,o,g)}}en(e,"~standard",()=>({validate:d=>{try{const m=Ow(e,d);return m.success?{value:m.data}:{issues:m.error?.issues}}catch{return Dw(e,d).then(f=>f.success?{value:f.data}:{issues:f.error?.issues})}},vendor:"zod",version:1}))}),lp=Ce("$ZodString",(e,s)=>{En.init(e,s),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??c2(e._zod.bag),e._zod.parse=(l,o)=>{if(s.coerce)try{l.value=String(l.value)}catch{}return typeof l.value=="string"||l.issues.push({expected:"string",code:"invalid_type",input:l.value,inst:e}),l}}),vn=Ce("$ZodStringFormat",(e,s)=>{jd.init(e,s),lp.init(e,s)}),A2=Ce("$ZodGUID",(e,s)=>{s.pattern??(s.pattern=$w),vn.init(e,s)}),M2=Ce("$ZodUUID",(e,s)=>{if(s.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[s.version];if(o===void 0)throw new Error(`Invalid UUID version: "${s.version}"`);s.pattern??(s.pattern=qy(o))}else s.pattern??(s.pattern=qy());vn.init(e,s)}),z2=Ce("$ZodEmail",(e,s)=>{s.pattern??(s.pattern=Xw),vn.init(e,s)}),O2=Ce("$ZodURL",(e,s)=>{vn.init(e,s),e._zod.check=l=>{try{const o=l.value.trim(),d=new URL(o);s.hostname&&(s.hostname.lastIndex=0,s.hostname.test(d.hostname)||l.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:s.hostname.source,input:l.value,inst:e,continue:!s.abort})),s.protocol&&(s.protocol.lastIndex=0,s.protocol.test(d.protocol.endsWith(":")?d.protocol.slice(0,-1):d.protocol)||l.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:s.protocol.source,input:l.value,inst:e,continue:!s.abort})),s.normalize?l.value=d.href:l.value=o;return}catch{l.issues.push({code:"invalid_format",format:"url",input:l.value,inst:e,continue:!s.abort})}}}),D2=Ce("$ZodEmoji",(e,s)=>{s.pattern??(s.pattern=Ww()),vn.init(e,s)}),R2=Ce("$ZodNanoID",(e,s)=>{s.pattern??(s.pattern=Vw),vn.init(e,s)}),L2=Ce("$ZodCUID",(e,s)=>{s.pattern??(s.pattern=Zw),vn.init(e,s)}),P2=Ce("$ZodCUID2",(e,s)=>{s.pattern??(s.pattern=Hw),vn.init(e,s)}),I2=Ce("$ZodULID",(e,s)=>{s.pattern??(s.pattern=Kw),vn.init(e,s)}),B2=Ce("$ZodXID",(e,s)=>{s.pattern??(s.pattern=Gw),vn.init(e,s)}),U2=Ce("$ZodKSUID",(e,s)=>{s.pattern??(s.pattern=Qw),vn.init(e,s)}),F2=Ce("$ZodISODateTime",(e,s)=>{s.pattern??(s.pattern=o2(s)),vn.init(e,s)}),q2=Ce("$ZodISODate",(e,s)=>{s.pattern??(s.pattern=r2),vn.init(e,s)}),Z2=Ce("$ZodISOTime",(e,s)=>{s.pattern??(s.pattern=l2(s)),vn.init(e,s)}),H2=Ce("$ZodISODuration",(e,s)=>{s.pattern??(s.pattern=Yw),vn.init(e,s)}),K2=Ce("$ZodIPv4",(e,s)=>{s.pattern??(s.pattern=e2),vn.init(e,s),e._zod.bag.format="ipv4"}),G2=Ce("$ZodIPv6",(e,s)=>{s.pattern??(s.pattern=t2),vn.init(e,s),e._zod.bag.format="ipv6",e._zod.check=l=>{try{new URL(`http://[${l.value}]`)}catch{l.issues.push({code:"invalid_format",format:"ipv6",input:l.value,inst:e,continue:!s.abort})}}}),Q2=Ce("$ZodCIDRv4",(e,s)=>{s.pattern??(s.pattern=n2),vn.init(e,s)}),V2=Ce("$ZodCIDRv6",(e,s)=>{s.pattern??(s.pattern=a2),vn.init(e,s),e._zod.check=l=>{const o=l.value.split("/");try{if(o.length!==2)throw new Error;const[d,m]=o;if(!m)throw new Error;const f=Number(m);if(`${f}`!==m)throw new Error;if(f<0||f>128)throw new Error;new URL(`http://[${d}]`)}catch{l.issues.push({code:"invalid_format",format:"cidrv6",input:l.value,inst:e,continue:!s.abort})}}});function bb(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Y2=Ce("$ZodBase64",(e,s)=>{s.pattern??(s.pattern=s2),vn.init(e,s),e._zod.bag.contentEncoding="base64",e._zod.check=l=>{bb(l.value)||l.issues.push({code:"invalid_format",format:"base64",input:l.value,inst:e,continue:!s.abort})}});function $2(e){if(!fb.test(e))return!1;const s=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),l=s.padEnd(Math.ceil(s.length/4)*4,"=");return bb(l)}const X2=Ce("$ZodBase64URL",(e,s)=>{s.pattern??(s.pattern=fb),vn.init(e,s),e._zod.bag.contentEncoding="base64url",e._zod.check=l=>{$2(l.value)||l.issues.push({code:"invalid_format",format:"base64url",input:l.value,inst:e,continue:!s.abort})}}),J2=Ce("$ZodE164",(e,s)=>{s.pattern??(s.pattern=i2),vn.init(e,s)});function W2(e,s=null){try{const l=e.split(".");if(l.length!==3)return!1;const[o]=l;if(!o)return!1;const d=JSON.parse(atob(o));return!("typ"in d&&d?.typ!=="JWT"||!d.alg||s&&(!("alg"in d)||d.alg!==s))}catch{return!1}}const eE=Ce("$ZodJWT",(e,s)=>{vn.init(e,s),e._zod.check=l=>{W2(l.value,s.alg)||l.issues.push({code:"invalid_format",format:"jwt",input:l.value,inst:e,continue:!s.abort})}}),_b=Ce("$ZodNumber",(e,s)=>{En.init(e,s),e._zod.pattern=e._zod.bag.pattern??d2,e._zod.parse=(l,o)=>{if(s.coerce)try{l.value=Number(l.value)}catch{}const d=l.value;if(typeof d=="number"&&!Number.isNaN(d)&&Number.isFinite(d))return l;const m=typeof d=="number"?Number.isNaN(d)?"NaN":Number.isFinite(d)?void 0:"Infinity":void 0;return l.issues.push({expected:"number",code:"invalid_type",input:d,inst:e,...m?{received:m}:{}}),l}}),tE=Ce("$ZodNumberFormat",(e,s)=>{g2.init(e,s),_b.init(e,s)}),nE=Ce("$ZodBoolean",(e,s)=>{En.init(e,s),e._zod.pattern=m2,e._zod.parse=(l,o)=>{if(s.coerce)try{l.value=!!l.value}catch{}const d=l.value;return typeof d=="boolean"||l.issues.push({expected:"boolean",code:"invalid_type",input:d,inst:e}),l}}),aE=Ce("$ZodNull",(e,s)=>{En.init(e,s),e._zod.pattern=h2,e._zod.values=new Set([null]),e._zod.parse=(l,o)=>{const d=l.value;return d===null||l.issues.push({expected:"null",code:"invalid_type",input:d,inst:e}),l}}),sE=Ce("$ZodUnknown",(e,s)=>{En.init(e,s),e._zod.parse=l=>l}),iE=Ce("$ZodNever",(e,s)=>{En.init(e,s),e._zod.parse=(l,o)=>(l.issues.push({expected:"never",code:"invalid_type",input:l.value,inst:e}),l)});function Zy(e,s,l){e.issues.length&&s.issues.push(...ub(l,e.issues)),s.value[l]=e.value}const rE=Ce("$ZodArray",(e,s)=>{En.init(e,s),e._zod.parse=(l,o)=>{const d=l.value;if(!Array.isArray(d))return l.issues.push({expected:"array",code:"invalid_type",input:d,inst:e}),l;l.value=Array(d.length);const m=[];for(let f=0;f<d.length;f++){const g=d[f],v=s.element._zod.run({value:g,issues:[]},o);v instanceof Promise?m.push(v.then(_=>Zy(_,l,f))):Zy(v,l,f)}return m.length?Promise.all(m).then(()=>l):l}});function od(e,s,l,o,d){if(e.issues.length){if(d&&!(l in o))return;s.issues.push(...ub(l,e.issues))}e.value===void 0?l in o&&(s.value[l]=void 0):s.value[l]=e.value}function Nb(e){const s=Object.keys(e.shape);for(const o of s)if(!e.shape?.[o]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${o}": expected a Zod schema`);const l=Nw(e.shape);return{...e,keys:s,keySet:new Set(s),numKeys:s.length,optionalKeys:new Set(l)}}function jb(e,s,l,o,d,m){const f=[],g=d.keySet,v=d.catchall._zod,_=v.def.type,S=v.optout==="optional";for(const w in s){if(g.has(w))continue;if(_==="never"){f.push(w);continue}const T=v.run({value:s[w],issues:[]},o);T instanceof Promise?e.push(T.then(O=>od(O,l,w,s,S))):od(T,l,w,s,S)}return f.length&&l.issues.push({code:"unrecognized_keys",keys:f,input:s,inst:m}),e.length?Promise.all(e).then(()=>l):l}const lE=Ce("$ZodObject",(e,s)=>{if(En.init(e,s),!Object.getOwnPropertyDescriptor(s,"shape")?.get){const g=s.shape;Object.defineProperty(s,"shape",{get:()=>{const v={...g};return Object.defineProperty(s,"shape",{value:v}),v}})}const o=tp(()=>Nb(s));en(e._zod,"propValues",()=>{const g=s.shape,v={};for(const _ in g){const S=g[_]._zod;if(S.values){v[_]??(v[_]=new Set);for(const w of S.values)v[_].add(w)}}return v});const d=ld,m=s.catchall;let f;e._zod.parse=(g,v)=>{f??(f=o.value);const _=g.value;if(!d(_))return g.issues.push({expected:"object",code:"invalid_type",input:_,inst:e}),g;g.value={};const S=[],w=f.shape;for(const T of f.keys){const O=w[T],k=O._zod.optout==="optional",A=O._zod.run({value:_[T],issues:[]},v);A instanceof Promise?S.push(A.then(z=>od(z,g,T,_,k))):od(A,g,T,_,k)}return m?jb(S,_,g,v,o.value,e):S.length?Promise.all(S).then(()=>g):g}}),oE=Ce("$ZodObjectJIT",(e,s)=>{lE.init(e,s);const l=e._zod.parse,o=tp(()=>Nb(s)),d=T=>{const O=new T2(["shape","payload","ctx"]),k=o.value,A=R=>{const K=Fy(R);return`shape[${K}]._zod.run({ value: input[${K}], issues: [] }, ctx)`};O.write("const input = payload.value;");const z=Object.create(null);let U=0;for(const R of k.keys)z[R]=`key_${U++}`;O.write("const newResult = {};");for(const R of k.keys){const K=z[R],V=Fy(R),q=T[R]?._zod?.optout==="optional";O.write(`const ${K} = ${A(R)};`),q?O.write(`
        if (${K}.issues.length) {
          if (${V} in input) {
            payload.issues = payload.issues.concat(${K}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${V}, ...iss.path] : [${V}]
            })));
          }
        }
        
        if (${K}.value === undefined) {
          if (${V} in input) {
            newResult[${V}] = undefined;
          }
        } else {
          newResult[${V}] = ${K}.value;
        }
        
      `):O.write(`
        if (${K}.issues.length) {
          payload.issues = payload.issues.concat(${K}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${V}, ...iss.path] : [${V}]
          })));
        }
        
        if (${K}.value === undefined) {
          if (${V} in input) {
            newResult[${V}] = undefined;
          }
        } else {
          newResult[${V}] = ${K}.value;
        }
        
      `)}O.write("payload.value = newResult;"),O.write("return payload;");const I=O.compile();return(R,K)=>I(T,R,K)};let m;const f=ld,g=!Sf.jitless,_=g&&bw.value,S=s.catchall;let w;e._zod.parse=(T,O)=>{w??(w=o.value);const k=T.value;return f(k)?g&&_&&O?.async===!1&&O.jitless!==!0?(m||(m=d(s.shape)),T=m(T,O),S?jb([],k,T,O,w,e):T):l(T,O):(T.issues.push({expected:"object",code:"invalid_type",input:k,inst:e}),T)}});function Hy(e,s,l,o){for(const m of e)if(m.issues.length===0)return s.value=m.value,s;const d=e.filter(m=>!Il(m));return d.length===1?(s.value=d[0].value,d[0]):(s.issues.push({code:"invalid_union",input:s.value,inst:l,errors:e.map(m=>m.issues.map(f=>Hr(f,o,tr())))}),s)}const cE=Ce("$ZodUnion",(e,s)=>{En.init(e,s),en(e._zod,"optin",()=>s.options.some(d=>d._zod.optin==="optional")?"optional":void 0),en(e._zod,"optout",()=>s.options.some(d=>d._zod.optout==="optional")?"optional":void 0),en(e._zod,"values",()=>{if(s.options.every(d=>d._zod.values))return new Set(s.options.flatMap(d=>Array.from(d._zod.values)))}),en(e._zod,"pattern",()=>{if(s.options.every(d=>d._zod.pattern)){const d=s.options.map(m=>m._zod.pattern);return new RegExp(`^(${d.map(m=>ap(m.source)).join("|")})$`)}});const l=s.options.length===1,o=s.options[0]._zod.run;e._zod.parse=(d,m)=>{if(l)return o(d,m);let f=!1;const g=[];for(const v of s.options){const _=v._zod.run({value:d.value,issues:[]},m);if(_ instanceof Promise)g.push(_),f=!0;else{if(_.issues.length===0)return _;g.push(_)}}return f?Promise.all(g).then(v=>Hy(v,d,e,m)):Hy(g,d,e,m)}}),uE=Ce("$ZodIntersection",(e,s)=>{En.init(e,s),e._zod.parse=(l,o)=>{const d=l.value,m=s.left._zod.run({value:d,issues:[]},o),f=s.right._zod.run({value:d,issues:[]},o);return m instanceof Promise||f instanceof Promise?Promise.all([m,f]).then(([v,_])=>Ky(l,v,_)):Ky(l,m,f)}});function Ef(e,s){if(e===s)return{valid:!0,data:e};if(e instanceof Date&&s instanceof Date&&+e==+s)return{valid:!0,data:e};if(sc(e)&&sc(s)){const l=Object.keys(s),o=Object.keys(e).filter(m=>l.indexOf(m)!==-1),d={...e,...s};for(const m of o){const f=Ef(e[m],s[m]);if(!f.valid)return{valid:!1,mergeErrorPath:[m,...f.mergeErrorPath]};d[m]=f.data}return{valid:!0,data:d}}if(Array.isArray(e)&&Array.isArray(s)){if(e.length!==s.length)return{valid:!1,mergeErrorPath:[]};const l=[];for(let o=0;o<e.length;o++){const d=e[o],m=s[o],f=Ef(d,m);if(!f.valid)return{valid:!1,mergeErrorPath:[o,...f.mergeErrorPath]};l.push(f.data)}return{valid:!0,data:l}}return{valid:!1,mergeErrorPath:[]}}function Ky(e,s,l){const o=new Map;let d;for(const g of s.issues)if(g.code==="unrecognized_keys"){d??(d=g);for(const v of g.keys)o.has(v)||o.set(v,{}),o.get(v).l=!0}else e.issues.push(g);for(const g of l.issues)if(g.code==="unrecognized_keys")for(const v of g.keys)o.has(v)||o.set(v,{}),o.get(v).r=!0;else e.issues.push(g);const m=[...o].filter(([,g])=>g.l&&g.r).map(([g])=>g);if(m.length&&d&&e.issues.push({...d,keys:m}),Il(e))return e;const f=Ef(s.value,l.value);if(!f.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(f.mergeErrorPath)}`);return e.value=f.data,e}const dE=Ce("$ZodEnum",(e,s)=>{En.init(e,s);const l=lb(s.entries),o=new Set(l);e._zod.values=o,e._zod.pattern=new RegExp(`^(${l.filter(d=>_w.has(typeof d)).map(d=>typeof d=="string"?bd(d):d.toString()).join("|")})$`),e._zod.parse=(d,m)=>{const f=d.value;return o.has(f)||d.issues.push({code:"invalid_value",values:l,input:f,inst:e}),d}}),mE=Ce("$ZodTransform",(e,s)=>{En.init(e,s),e._zod.parse=(l,o)=>{if(o.direction==="backward")throw new rb(e.constructor.name);const d=s.transform(l.value,l);if(o.async)return(d instanceof Promise?d:Promise.resolve(d)).then(f=>(l.value=f,l));if(d instanceof Promise)throw new Bl;return l.value=d,l}});function Gy(e,s){return e.issues.length&&s===void 0?{issues:[],value:void 0}:e}const Sb=Ce("$ZodOptional",(e,s)=>{En.init(e,s),e._zod.optin="optional",e._zod.optout="optional",en(e._zod,"values",()=>s.innerType._zod.values?new Set([...s.innerType._zod.values,void 0]):void 0),en(e._zod,"pattern",()=>{const l=s.innerType._zod.pattern;return l?new RegExp(`^(${ap(l.source)})?$`):void 0}),e._zod.parse=(l,o)=>{if(s.innerType._zod.optin==="optional"){const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(m=>Gy(m,l.value)):Gy(d,l.value)}return l.value===void 0?l:s.innerType._zod.run(l,o)}}),hE=Ce("$ZodExactOptional",(e,s)=>{Sb.init(e,s),en(e._zod,"values",()=>s.innerType._zod.values),en(e._zod,"pattern",()=>s.innerType._zod.pattern),e._zod.parse=(l,o)=>s.innerType._zod.run(l,o)}),fE=Ce("$ZodNullable",(e,s)=>{En.init(e,s),en(e._zod,"optin",()=>s.innerType._zod.optin),en(e._zod,"optout",()=>s.innerType._zod.optout),en(e._zod,"pattern",()=>{const l=s.innerType._zod.pattern;return l?new RegExp(`^(${ap(l.source)}|null)$`):void 0}),en(e._zod,"values",()=>s.innerType._zod.values?new Set([...s.innerType._zod.values,null]):void 0),e._zod.parse=(l,o)=>l.value===null?l:s.innerType._zod.run(l,o)}),pE=Ce("$ZodDefault",(e,s)=>{En.init(e,s),e._zod.optin="optional",en(e._zod,"values",()=>s.innerType._zod.values),e._zod.parse=(l,o)=>{if(o.direction==="backward")return s.innerType._zod.run(l,o);if(l.value===void 0)return l.value=s.defaultValue,l;const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(m=>Qy(m,s)):Qy(d,s)}});function Qy(e,s){return e.value===void 0&&(e.value=s.defaultValue),e}const xE=Ce("$ZodPrefault",(e,s)=>{En.init(e,s),e._zod.optin="optional",en(e._zod,"values",()=>s.innerType._zod.values),e._zod.parse=(l,o)=>(o.direction==="backward"||l.value===void 0&&(l.value=s.defaultValue),s.innerType._zod.run(l,o))}),gE=Ce("$ZodNonOptional",(e,s)=>{En.init(e,s),en(e._zod,"values",()=>{const l=s.innerType._zod.values;return l?new Set([...l].filter(o=>o!==void 0)):void 0}),e._zod.parse=(l,o)=>{const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(m=>Vy(m,e)):Vy(d,e)}});function Vy(e,s){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:s}),e}const yE=Ce("$ZodCatch",(e,s)=>{En.init(e,s),en(e._zod,"optin",()=>s.innerType._zod.optin),en(e._zod,"optout",()=>s.innerType._zod.optout),en(e._zod,"values",()=>s.innerType._zod.values),e._zod.parse=(l,o)=>{if(o.direction==="backward")return s.innerType._zod.run(l,o);const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(m=>(l.value=m.value,m.issues.length&&(l.value=s.catchValue({...l,error:{issues:m.issues.map(f=>Hr(f,o,tr()))},input:l.value}),l.issues=[]),l)):(l.value=d.value,d.issues.length&&(l.value=s.catchValue({...l,error:{issues:d.issues.map(m=>Hr(m,o,tr()))},input:l.value}),l.issues=[]),l)}}),vE=Ce("$ZodPipe",(e,s)=>{En.init(e,s),en(e._zod,"values",()=>s.in._zod.values),en(e._zod,"optin",()=>s.in._zod.optin),en(e._zod,"optout",()=>s.out._zod.optout),en(e._zod,"propValues",()=>s.in._zod.propValues),e._zod.parse=(l,o)=>{if(o.direction==="backward"){const m=s.out._zod.run(l,o);return m instanceof Promise?m.then(f=>Pu(f,s.in,o)):Pu(m,s.in,o)}const d=s.in._zod.run(l,o);return d instanceof Promise?d.then(m=>Pu(m,s.out,o)):Pu(d,s.out,o)}});function Pu(e,s,l){return e.issues.length?(e.aborted=!0,e):s._zod.run({value:e.value,issues:e.issues},l)}const bE=Ce("$ZodReadonly",(e,s)=>{En.init(e,s),en(e._zod,"propValues",()=>s.innerType._zod.propValues),en(e._zod,"values",()=>s.innerType._zod.values),en(e._zod,"optin",()=>s.innerType?._zod?.optin),en(e._zod,"optout",()=>s.innerType?._zod?.optout),e._zod.parse=(l,o)=>{if(o.direction==="backward")return s.innerType._zod.run(l,o);const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(Yy):Yy(d)}});function Yy(e){return e.value=Object.freeze(e.value),e}const _E=Ce("$ZodCustom",(e,s)=>{Pa.init(e,s),En.init(e,s),e._zod.parse=(l,o)=>l,e._zod.check=l=>{const o=l.value,d=s.fn(o);if(d instanceof Promise)return d.then(m=>$y(m,l,o,e));$y(d,l,o,e)}});function $y(e,s,l,o){if(!e){const d={code:"custom",input:l,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(d.params=o._zod.def.params),s.issues.push(ic(d))}}var Xy;class NE{constructor(){this._map=new WeakMap,this._idmap=new Map}add(s,...l){const o=l[0];return this._map.set(s,o),o&&typeof o=="object"&&"id"in o&&this._idmap.set(o.id,s),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(s){const l=this._map.get(s);return l&&typeof l=="object"&&"id"in l&&this._idmap.delete(l.id),this._map.delete(s),this}get(s){const l=s._zod.parent;if(l){const o={...this.get(l)??{}};delete o.id;const d={...o,...this._map.get(s)};return Object.keys(d).length?d:void 0}return this._map.get(s)}has(s){return this._map.has(s)}}function jE(){return new NE}(Xy=globalThis).__zod_globalRegistry??(Xy.__zod_globalRegistry=jE());const Jo=globalThis.__zod_globalRegistry;function SE(e,s){return new e({type:"string",...tt(s)})}function wE(e,s){return new e({type:"string",format:"email",check:"string_format",abort:!1,...tt(s)})}function Jy(e,s){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...tt(s)})}function EE(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...tt(s)})}function kE(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...tt(s)})}function TE(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...tt(s)})}function CE(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...tt(s)})}function AE(e,s){return new e({type:"string",format:"url",check:"string_format",abort:!1,...tt(s)})}function ME(e,s){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...tt(s)})}function zE(e,s){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...tt(s)})}function OE(e,s){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...tt(s)})}function DE(e,s){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...tt(s)})}function RE(e,s){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...tt(s)})}function LE(e,s){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...tt(s)})}function PE(e,s){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...tt(s)})}function IE(e,s){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...tt(s)})}function BE(e,s){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...tt(s)})}function UE(e,s){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...tt(s)})}function FE(e,s){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...tt(s)})}function qE(e,s){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...tt(s)})}function ZE(e,s){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...tt(s)})}function HE(e,s){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...tt(s)})}function KE(e,s){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...tt(s)})}function GE(e,s){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...tt(s)})}function QE(e,s){return new e({type:"string",format:"date",check:"string_format",...tt(s)})}function VE(e,s){return new e({type:"string",format:"time",check:"string_format",precision:null,...tt(s)})}function YE(e,s){return new e({type:"string",format:"duration",check:"string_format",...tt(s)})}function $E(e,s){return new e({type:"number",coerce:!0,checks:[],...tt(s)})}function XE(e,s){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...tt(s)})}function JE(e,s){return new e({type:"boolean",...tt(s)})}function WE(e,s){return new e({type:"null",...tt(s)})}function ek(e){return new e({type:"unknown"})}function tk(e,s){return new e({type:"never",...tt(s)})}function Wy(e,s){return new yb({check:"less_than",...tt(s),value:e,inclusive:!1})}function Ah(e,s){return new yb({check:"less_than",...tt(s),value:e,inclusive:!0})}function e0(e,s){return new vb({check:"greater_than",...tt(s),value:e,inclusive:!1})}function Mh(e,s){return new vb({check:"greater_than",...tt(s),value:e,inclusive:!0})}function t0(e,s){return new x2({check:"multiple_of",...tt(s),value:e})}function wb(e,s){return new y2({check:"max_length",...tt(s),maximum:e})}function cd(e,s){return new v2({check:"min_length",...tt(s),minimum:e})}function Eb(e,s){return new b2({check:"length_equals",...tt(s),length:e})}function nk(e,s){return new _2({check:"string_format",format:"regex",...tt(s),pattern:e})}function ak(e){return new N2({check:"string_format",format:"lowercase",...tt(e)})}function sk(e){return new j2({check:"string_format",format:"uppercase",...tt(e)})}function ik(e,s){return new S2({check:"string_format",format:"includes",...tt(s),includes:e})}function rk(e,s){return new w2({check:"string_format",format:"starts_with",...tt(s),prefix:e})}function lk(e,s){return new E2({check:"string_format",format:"ends_with",...tt(s),suffix:e})}function Gl(e){return new k2({check:"overwrite",tx:e})}function ok(e){return Gl(s=>s.normalize(e))}function ck(){return Gl(e=>e.trim())}function uk(){return Gl(e=>e.toLowerCase())}function dk(){return Gl(e=>e.toUpperCase())}function mk(){return Gl(e=>vw(e))}function hk(e,s,l){return new e({type:"array",element:s,...tt(l)})}function fk(e,s,l){return new e({type:"custom",check:"custom",fn:s,...tt(l)})}function pk(e){const s=xk(l=>(l.addIssue=o=>{if(typeof o=="string")l.issues.push(ic(o,l.value,s._zod.def));else{const d=o;d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=l.value),d.inst??(d.inst=s),d.continue??(d.continue=!s._zod.def.abort),l.issues.push(ic(d))}},e(l.value,l)));return s}function xk(e,s){const l=new Pa({check:"custom",...tt(s)});return l._zod.check=e,l}function kb(e){let s=e?.target??"draft-2020-12";return s==="draft-4"&&(s="draft-04"),s==="draft-7"&&(s="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??Jo,target:s,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function ra(e,s,l={path:[],schemaPath:[]}){var o;const d=e._zod.def,m=s.seen.get(e);if(m)return m.count++,l.schemaPath.includes(e)&&(m.cycle=l.path),m.schema;const f={schema:{},count:1,cycle:void 0,path:l.path};s.seen.set(e,f);const g=e._zod.toJSONSchema?.();if(g)f.schema=g;else{const S={...l,schemaPath:[...l.schemaPath,e],path:l.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(s,f.schema,S);else{const T=f.schema,O=s.processors[d.type];if(!O)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${d.type}`);O(e,s,T,S)}const w=e._zod.parent;w&&(f.ref||(f.ref=w),ra(w,s,S),s.seen.get(w).isParent=!0)}const v=s.metadataRegistry.get(e);return v&&Object.assign(f.schema,v),s.io==="input"&&ga(e)&&(delete f.schema.examples,delete f.schema.default),s.io==="input"&&f.schema._prefault&&((o=f.schema).default??(o.default=f.schema._prefault)),delete f.schema._prefault,s.seen.get(e).schema}function Tb(e,s){const l=e.seen.get(s);if(!l)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=new Map;for(const f of e.seen.entries()){const g=e.metadataRegistry.get(f[0])?.id;if(g){const v=o.get(g);if(v&&v!==f[0])throw new Error(`Duplicate schema id "${g}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);o.set(g,f[0])}}const d=f=>{const g=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const w=e.external.registry.get(f[0])?.id,T=e.external.uri??(k=>k);if(w)return{ref:T(w)};const O=f[1].defId??f[1].schema.id??`schema${e.counter++}`;return f[1].defId=O,{defId:O,ref:`${T("__shared")}#/${g}/${O}`}}if(f[1]===l)return{ref:"#"};const _=`#/${g}/`,S=f[1].schema.id??`__schema${e.counter++}`;return{defId:S,ref:_+S}},m=f=>{if(f[1].schema.$ref)return;const g=f[1],{ref:v,defId:_}=d(f);g.def={...g.schema},_&&(g.defId=_);const S=g.schema;for(const w in S)delete S[w];S.$ref=v};if(e.cycles==="throw")for(const f of e.seen.entries()){const g=f[1];if(g.cycle)throw new Error(`Cycle detected: #/${g.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const f of e.seen.entries()){const g=f[1];if(s===f[0]){m(f);continue}if(e.external){const _=e.external.registry.get(f[0])?.id;if(s!==f[0]&&_){m(f);continue}}if(e.metadataRegistry.get(f[0])?.id){m(f);continue}if(g.cycle){m(f);continue}if(g.count>1&&e.reused==="ref"){m(f);continue}}}function Cb(e,s){const l=e.seen.get(s);if(!l)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=f=>{const g=e.seen.get(f);if(g.ref===null)return;const v=g.def??g.schema,_={...v},S=g.ref;if(g.ref=null,S){o(S);const T=e.seen.get(S),O=T.schema;if(O.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(v.allOf=v.allOf??[],v.allOf.push(O)):Object.assign(v,O),Object.assign(v,_),f._zod.parent===S)for(const A in v)A==="$ref"||A==="allOf"||A in _||delete v[A];if(O.$ref&&T.def)for(const A in v)A==="$ref"||A==="allOf"||A in T.def&&JSON.stringify(v[A])===JSON.stringify(T.def[A])&&delete v[A]}const w=f._zod.parent;if(w&&w!==S){o(w);const T=e.seen.get(w);if(T?.schema.$ref&&(v.$ref=T.schema.$ref,T.def))for(const O in v)O==="$ref"||O==="allOf"||O in T.def&&JSON.stringify(v[O])===JSON.stringify(T.def[O])&&delete v[O]}e.override({zodSchema:f,jsonSchema:v,path:g.path??[]})};for(const f of[...e.seen.entries()].reverse())o(f[0]);const d={};if(e.target==="draft-2020-12"?d.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?d.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?d.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const f=e.external.registry.get(s)?.id;if(!f)throw new Error("Schema is missing an `id` property");d.$id=e.external.uri(f)}Object.assign(d,l.def??l.schema);const m=e.external?.defs??{};for(const f of e.seen.entries()){const g=f[1];g.def&&g.defId&&(m[g.defId]=g.def)}e.external||Object.keys(m).length>0&&(e.target==="draft-2020-12"?d.$defs=m:d.definitions=m);try{const f=JSON.parse(JSON.stringify(d));return Object.defineProperty(f,"~standard",{value:{...s["~standard"],jsonSchema:{input:ud(s,"input",e.processors),output:ud(s,"output",e.processors)}},enumerable:!1,writable:!1}),f}catch{throw new Error("Error converting schema to JSON.")}}function ga(e,s){const l=s??{seen:new Set};if(l.seen.has(e))return!1;l.seen.add(e);const o=e._zod.def;if(o.type==="transform")return!0;if(o.type==="array")return ga(o.element,l);if(o.type==="set")return ga(o.valueType,l);if(o.type==="lazy")return ga(o.getter(),l);if(o.type==="promise"||o.type==="optional"||o.type==="nonoptional"||o.type==="nullable"||o.type==="readonly"||o.type==="default"||o.type==="prefault")return ga(o.innerType,l);if(o.type==="intersection")return ga(o.left,l)||ga(o.right,l);if(o.type==="record"||o.type==="map")return ga(o.keyType,l)||ga(o.valueType,l);if(o.type==="pipe")return ga(o.in,l)||ga(o.out,l);if(o.type==="object"){for(const d in o.shape)if(ga(o.shape[d],l))return!0;return!1}if(o.type==="union"){for(const d of o.options)if(ga(d,l))return!0;return!1}if(o.type==="tuple"){for(const d of o.items)if(ga(d,l))return!0;return!!(o.rest&&ga(o.rest,l))}return!1}const gk=(e,s={})=>l=>{const o=kb({...l,processors:s});return ra(e,o),Tb(o,e),Cb(o,e)},ud=(e,s,l={})=>o=>{const{libraryOptions:d,target:m}=o??{},f=kb({...d??{},target:m,io:s,processors:l});return ra(e,f),Tb(f,e),Cb(f,e)},yk={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},vk=(e,s,l,o)=>{const d=l;d.type="string";const{minimum:m,maximum:f,format:g,patterns:v,contentEncoding:_}=e._zod.bag;if(typeof m=="number"&&(d.minLength=m),typeof f=="number"&&(d.maxLength=f),g&&(d.format=yk[g]??g,d.format===""&&delete d.format,g==="time"&&delete d.format),_&&(d.contentEncoding=_),v&&v.size>0){const S=[...v];S.length===1?d.pattern=S[0].source:S.length>1&&(d.allOf=[...S.map(w=>({...s.target==="draft-07"||s.target==="draft-04"||s.target==="openapi-3.0"?{type:"string"}:{},pattern:w.source}))])}},bk=(e,s,l,o)=>{const d=l,{minimum:m,maximum:f,format:g,multipleOf:v,exclusiveMaximum:_,exclusiveMinimum:S}=e._zod.bag;typeof g=="string"&&g.includes("int")?d.type="integer":d.type="number",typeof S=="number"&&(s.target==="draft-04"||s.target==="openapi-3.0"?(d.minimum=S,d.exclusiveMinimum=!0):d.exclusiveMinimum=S),typeof m=="number"&&(d.minimum=m,typeof S=="number"&&s.target!=="draft-04"&&(S>=m?delete d.minimum:delete d.exclusiveMinimum)),typeof _=="number"&&(s.target==="draft-04"||s.target==="openapi-3.0"?(d.maximum=_,d.exclusiveMaximum=!0):d.exclusiveMaximum=_),typeof f=="number"&&(d.maximum=f,typeof _=="number"&&s.target!=="draft-04"&&(_<=f?delete d.maximum:delete d.exclusiveMaximum)),typeof v=="number"&&(d.multipleOf=v)},_k=(e,s,l,o)=>{l.type="boolean"},Nk=(e,s,l,o)=>{s.target==="openapi-3.0"?(l.type="string",l.nullable=!0,l.enum=[null]):l.type="null"},jk=(e,s,l,o)=>{l.not={}},Sk=(e,s,l,o)=>{},wk=(e,s,l,o)=>{const d=e._zod.def,m=lb(d.entries);m.every(f=>typeof f=="number")&&(l.type="number"),m.every(f=>typeof f=="string")&&(l.type="string"),l.enum=m},Ek=(e,s,l,o)=>{if(s.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},kk=(e,s,l,o)=>{if(s.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Tk=(e,s,l,o)=>{const d=l,m=e._zod.def,{minimum:f,maximum:g}=e._zod.bag;typeof f=="number"&&(d.minItems=f),typeof g=="number"&&(d.maxItems=g),d.type="array",d.items=ra(m.element,s,{...o,path:[...o.path,"items"]})},Ck=(e,s,l,o)=>{const d=l,m=e._zod.def;d.type="object",d.properties={};const f=m.shape;for(const _ in f)d.properties[_]=ra(f[_],s,{...o,path:[...o.path,"properties",_]});const g=new Set(Object.keys(f)),v=new Set([...g].filter(_=>{const S=m.shape[_]._zod;return s.io==="input"?S.optin===void 0:S.optout===void 0}));v.size>0&&(d.required=Array.from(v)),m.catchall?._zod.def.type==="never"?d.additionalProperties=!1:m.catchall?m.catchall&&(d.additionalProperties=ra(m.catchall,s,{...o,path:[...o.path,"additionalProperties"]})):s.io==="output"&&(d.additionalProperties=!1)},Ak=(e,s,l,o)=>{const d=e._zod.def,m=d.inclusive===!1,f=d.options.map((g,v)=>ra(g,s,{...o,path:[...o.path,m?"oneOf":"anyOf",v]}));m?l.oneOf=f:l.anyOf=f},Mk=(e,s,l,o)=>{const d=e._zod.def,m=ra(d.left,s,{...o,path:[...o.path,"allOf",0]}),f=ra(d.right,s,{...o,path:[...o.path,"allOf",1]}),g=_=>"allOf"in _&&Object.keys(_).length===1,v=[...g(m)?m.allOf:[m],...g(f)?f.allOf:[f]];l.allOf=v},zk=(e,s,l,o)=>{const d=e._zod.def,m=ra(d.innerType,s,o),f=s.seen.get(e);s.target==="openapi-3.0"?(f.ref=d.innerType,l.nullable=!0):l.anyOf=[m,{type:"null"}]},Ok=(e,s,l,o)=>{const d=e._zod.def;ra(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType},Dk=(e,s,l,o)=>{const d=e._zod.def;ra(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType,l.default=JSON.parse(JSON.stringify(d.defaultValue))},Rk=(e,s,l,o)=>{const d=e._zod.def;ra(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType,s.io==="input"&&(l._prefault=JSON.parse(JSON.stringify(d.defaultValue)))},Lk=(e,s,l,o)=>{const d=e._zod.def;ra(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType;let f;try{f=d.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}l.default=f},Pk=(e,s,l,o)=>{const d=e._zod.def,m=s.io==="input"?d.in._zod.def.type==="transform"?d.out:d.in:d.out;ra(m,s,o);const f=s.seen.get(e);f.ref=m},Ik=(e,s,l,o)=>{const d=e._zod.def;ra(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType,l.readOnly=!0},Ab=(e,s,l,o)=>{const d=e._zod.def;ra(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType},Bk=Ce("ZodISODateTime",(e,s)=>{F2.init(e,s),_n.init(e,s)});function Uk(e){return GE(Bk,e)}const Fk=Ce("ZodISODate",(e,s)=>{q2.init(e,s),_n.init(e,s)});function qk(e){return QE(Fk,e)}const Zk=Ce("ZodISOTime",(e,s)=>{Z2.init(e,s),_n.init(e,s)});function Hk(e){return VE(Zk,e)}const Kk=Ce("ZodISODuration",(e,s)=>{H2.init(e,s),_n.init(e,s)});function Gk(e){return YE(Kk,e)}const Qk=(e,s)=>{mb.init(e,s),e.name="ZodError",Object.defineProperties(e,{format:{value:l=>zw(e,l)},flatten:{value:l=>Mw(e,l)},addIssue:{value:l=>{e.issues.push(l),e.message=JSON.stringify(e.issues,wf,2)}},addIssues:{value:l=>{e.issues.push(...l),e.message=JSON.stringify(e.issues,wf,2)}},isEmpty:{get(){return e.issues.length===0}}})},xs=Ce("ZodError",Qk,{Parent:Error}),Vk=ip(xs),Yk=rp(xs),$k=_d(xs),Xk=Nd(xs),Jk=Rw(xs),Wk=Lw(xs),e1=Pw(xs),t1=Iw(xs),n1=Bw(xs),a1=Uw(xs),s1=Fw(xs),i1=qw(xs),kn=Ce("ZodType",(e,s)=>(En.init(e,s),Object.assign(e["~standard"],{jsonSchema:{input:ud(e,"input"),output:ud(e,"output")}}),e.toJSONSchema=gk(e,{}),e.def=s,e.type=s.type,Object.defineProperty(e,"_def",{value:s}),e.check=(...l)=>e.clone(ar(s,{checks:[...s.checks??[],...l.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]}),{parent:!0}),e.with=e.check,e.clone=(l,o)=>sr(e,l,o),e.brand=()=>e,e.register=((l,o)=>(l.add(e,o),e)),e.parse=(l,o)=>Vk(e,l,o,{callee:e.parse}),e.safeParse=(l,o)=>$k(e,l,o),e.parseAsync=async(l,o)=>Yk(e,l,o,{callee:e.parseAsync}),e.safeParseAsync=async(l,o)=>Xk(e,l,o),e.spa=e.safeParseAsync,e.encode=(l,o)=>Jk(e,l,o),e.decode=(l,o)=>Wk(e,l,o),e.encodeAsync=async(l,o)=>e1(e,l,o),e.decodeAsync=async(l,o)=>t1(e,l,o),e.safeEncode=(l,o)=>n1(e,l,o),e.safeDecode=(l,o)=>a1(e,l,o),e.safeEncodeAsync=async(l,o)=>s1(e,l,o),e.safeDecodeAsync=async(l,o)=>i1(e,l,o),e.refine=(l,o)=>e.check(J1(l,o)),e.superRefine=l=>e.check(W1(l)),e.overwrite=l=>e.check(Gl(l)),e.optional=()=>i0(e),e.exactOptional=()=>B1(e),e.nullable=()=>r0(e),e.nullish=()=>i0(r0(e)),e.nonoptional=l=>K1(e,l),e.array=()=>M1(e),e.or=l=>dd([e,l]),e.and=l=>R1(e,l),e.transform=l=>l0(e,P1(l)),e.default=l=>q1(e,l),e.prefault=l=>H1(e,l),e.catch=l=>Q1(e,l),e.pipe=l=>l0(e,l),e.readonly=()=>$1(e),e.describe=l=>{const o=e.clone();return Jo.add(o,{description:l}),o},Object.defineProperty(e,"description",{get(){return Jo.get(e)?.description},configurable:!0}),e.meta=(...l)=>{if(l.length===0)return Jo.get(e);const o=e.clone();return Jo.add(o,l[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=l=>l(e),e)),Mb=Ce("_ZodString",(e,s)=>{lp.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(o,d,m)=>vk(e,o,d);const l=e._zod.bag;e.format=l.format??null,e.minLength=l.minimum??null,e.maxLength=l.maximum??null,e.regex=(...o)=>e.check(nk(...o)),e.includes=(...o)=>e.check(ik(...o)),e.startsWith=(...o)=>e.check(rk(...o)),e.endsWith=(...o)=>e.check(lk(...o)),e.min=(...o)=>e.check(cd(...o)),e.max=(...o)=>e.check(wb(...o)),e.length=(...o)=>e.check(Eb(...o)),e.nonempty=(...o)=>e.check(cd(1,...o)),e.lowercase=o=>e.check(ak(o)),e.uppercase=o=>e.check(sk(o)),e.trim=()=>e.check(ck()),e.normalize=(...o)=>e.check(ok(...o)),e.toLowerCase=()=>e.check(uk()),e.toUpperCase=()=>e.check(dk()),e.slugify=()=>e.check(mk())}),r1=Ce("ZodString",(e,s)=>{lp.init(e,s),Mb.init(e,s),e.email=l=>e.check(wE(l1,l)),e.url=l=>e.check(AE(o1,l)),e.jwt=l=>e.check(KE(j1,l)),e.emoji=l=>e.check(ME(c1,l)),e.guid=l=>e.check(Jy(n0,l)),e.uuid=l=>e.check(EE(Iu,l)),e.uuidv4=l=>e.check(kE(Iu,l)),e.uuidv6=l=>e.check(TE(Iu,l)),e.uuidv7=l=>e.check(CE(Iu,l)),e.nanoid=l=>e.check(zE(u1,l)),e.guid=l=>e.check(Jy(n0,l)),e.cuid=l=>e.check(OE(d1,l)),e.cuid2=l=>e.check(DE(m1,l)),e.ulid=l=>e.check(RE(h1,l)),e.base64=l=>e.check(qE(b1,l)),e.base64url=l=>e.check(ZE(_1,l)),e.xid=l=>e.check(LE(f1,l)),e.ksuid=l=>e.check(PE(p1,l)),e.ipv4=l=>e.check(IE(x1,l)),e.ipv6=l=>e.check(BE(g1,l)),e.cidrv4=l=>e.check(UE(y1,l)),e.cidrv6=l=>e.check(FE(v1,l)),e.e164=l=>e.check(HE(N1,l)),e.datetime=l=>e.check(Uk(l)),e.date=l=>e.check(qk(l)),e.time=l=>e.check(Hk(l)),e.duration=l=>e.check(Gk(l))});function ia(e){return SE(r1,e)}const _n=Ce("ZodStringFormat",(e,s)=>{vn.init(e,s),Mb.init(e,s)}),l1=Ce("ZodEmail",(e,s)=>{z2.init(e,s),_n.init(e,s)}),n0=Ce("ZodGUID",(e,s)=>{A2.init(e,s),_n.init(e,s)}),Iu=Ce("ZodUUID",(e,s)=>{M2.init(e,s),_n.init(e,s)}),o1=Ce("ZodURL",(e,s)=>{O2.init(e,s),_n.init(e,s)}),c1=Ce("ZodEmoji",(e,s)=>{D2.init(e,s),_n.init(e,s)}),u1=Ce("ZodNanoID",(e,s)=>{R2.init(e,s),_n.init(e,s)}),d1=Ce("ZodCUID",(e,s)=>{L2.init(e,s),_n.init(e,s)}),m1=Ce("ZodCUID2",(e,s)=>{P2.init(e,s),_n.init(e,s)}),h1=Ce("ZodULID",(e,s)=>{I2.init(e,s),_n.init(e,s)}),f1=Ce("ZodXID",(e,s)=>{B2.init(e,s),_n.init(e,s)}),p1=Ce("ZodKSUID",(e,s)=>{U2.init(e,s),_n.init(e,s)}),x1=Ce("ZodIPv4",(e,s)=>{K2.init(e,s),_n.init(e,s)}),g1=Ce("ZodIPv6",(e,s)=>{G2.init(e,s),_n.init(e,s)}),y1=Ce("ZodCIDRv4",(e,s)=>{Q2.init(e,s),_n.init(e,s)}),v1=Ce("ZodCIDRv6",(e,s)=>{V2.init(e,s),_n.init(e,s)}),b1=Ce("ZodBase64",(e,s)=>{Y2.init(e,s),_n.init(e,s)}),_1=Ce("ZodBase64URL",(e,s)=>{X2.init(e,s),_n.init(e,s)}),N1=Ce("ZodE164",(e,s)=>{J2.init(e,s),_n.init(e,s)}),j1=Ce("ZodJWT",(e,s)=>{eE.init(e,s),_n.init(e,s)}),zb=Ce("ZodNumber",(e,s)=>{_b.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(o,d,m)=>bk(e,o,d),e.gt=(o,d)=>e.check(e0(o,d)),e.gte=(o,d)=>e.check(Mh(o,d)),e.min=(o,d)=>e.check(Mh(o,d)),e.lt=(o,d)=>e.check(Wy(o,d)),e.lte=(o,d)=>e.check(Ah(o,d)),e.max=(o,d)=>e.check(Ah(o,d)),e.int=o=>e.check(a0(o)),e.safe=o=>e.check(a0(o)),e.positive=o=>e.check(e0(0,o)),e.nonnegative=o=>e.check(Mh(0,o)),e.negative=o=>e.check(Wy(0,o)),e.nonpositive=o=>e.check(Ah(0,o)),e.multipleOf=(o,d)=>e.check(t0(o,d)),e.step=(o,d)=>e.check(t0(o,d)),e.finite=()=>e;const l=e._zod.bag;e.minValue=Math.max(l.minimum??Number.NEGATIVE_INFINITY,l.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(l.maximum??Number.POSITIVE_INFINITY,l.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(l.format??"").includes("int")||Number.isSafeInteger(l.multipleOf??.5),e.isFinite=!0,e.format=l.format??null}),S1=Ce("ZodNumberFormat",(e,s)=>{tE.init(e,s),zb.init(e,s)});function a0(e){return XE(S1,e)}const w1=Ce("ZodBoolean",(e,s)=>{nE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>_k(e,l,o)});function Sd(e){return JE(w1,e)}const E1=Ce("ZodNull",(e,s)=>{aE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Nk(e,l,o)});function kf(e){return WE(E1,e)}const k1=Ce("ZodUnknown",(e,s)=>{sE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Sk()});function s0(){return ek(k1)}const T1=Ce("ZodNever",(e,s)=>{iE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>jk(e,l,o)});function C1(e){return tk(T1,e)}const A1=Ce("ZodArray",(e,s)=>{rE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Tk(e,l,o,d),e.element=s.element,e.min=(l,o)=>e.check(cd(l,o)),e.nonempty=l=>e.check(cd(1,l)),e.max=(l,o)=>e.check(wb(l,o)),e.length=(l,o)=>e.check(Eb(l,o)),e.unwrap=()=>e.element});function M1(e,s){return hk(A1,e,s)}const z1=Ce("ZodObject",(e,s)=>{oE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Ck(e,l,o,d),en(e,"shape",()=>s.shape),e.keyof=()=>Cf(Object.keys(e._zod.def.shape)),e.catchall=l=>e.clone({...e._zod.def,catchall:l}),e.passthrough=()=>e.clone({...e._zod.def,catchall:s0()}),e.loose=()=>e.clone({...e._zod.def,catchall:s0()}),e.strict=()=>e.clone({...e._zod.def,catchall:C1()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=l=>Ew(e,l),e.safeExtend=l=>kw(e,l),e.merge=l=>Tw(e,l),e.pick=l=>Sw(e,l),e.omit=l=>ww(e,l),e.partial=(...l)=>Cw(Ob,e,l[0]),e.required=(...l)=>Aw(Db,e,l[0])});function $a(e,s){const l={type:"object",shape:e??{},...tt(s)};return new z1(l)}const O1=Ce("ZodUnion",(e,s)=>{cE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Ak(e,l,o,d),e.options=s.options});function dd(e,s){return new O1({type:"union",options:e,...tt(s)})}const D1=Ce("ZodIntersection",(e,s)=>{uE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Mk(e,l,o,d)});function R1(e,s){return new D1({type:"intersection",left:e,right:s})}const Tf=Ce("ZodEnum",(e,s)=>{dE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(o,d,m)=>wk(e,o,d),e.enum=s.entries,e.options=Object.values(s.entries);const l=new Set(Object.keys(s.entries));e.extract=(o,d)=>{const m={};for(const f of o)if(l.has(f))m[f]=s.entries[f];else throw new Error(`Key ${f} not found in enum`);return new Tf({...s,checks:[],...tt(d),entries:m})},e.exclude=(o,d)=>{const m={...s.entries};for(const f of o)if(l.has(f))delete m[f];else throw new Error(`Key ${f} not found in enum`);return new Tf({...s,checks:[],...tt(d),entries:m})}});function Cf(e,s){const l=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new Tf({type:"enum",entries:l,...tt(s)})}const L1=Ce("ZodTransform",(e,s)=>{mE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>kk(e,l),e._zod.parse=(l,o)=>{if(o.direction==="backward")throw new rb(e.constructor.name);l.addIssue=m=>{if(typeof m=="string")l.issues.push(ic(m,l.value,s));else{const f=m;f.fatal&&(f.continue=!1),f.code??(f.code="custom"),f.input??(f.input=l.value),f.inst??(f.inst=e),l.issues.push(ic(f))}};const d=s.transform(l.value,l);return d instanceof Promise?d.then(m=>(l.value=m,l)):(l.value=d,l)}});function P1(e){return new L1({type:"transform",transform:e})}const Ob=Ce("ZodOptional",(e,s)=>{Sb.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Ab(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function i0(e){return new Ob({type:"optional",innerType:e})}const I1=Ce("ZodExactOptional",(e,s)=>{hE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Ab(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function B1(e){return new I1({type:"optional",innerType:e})}const U1=Ce("ZodNullable",(e,s)=>{fE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>zk(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function r0(e){return new U1({type:"nullable",innerType:e})}const F1=Ce("ZodDefault",(e,s)=>{pE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Dk(e,l,o,d),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function q1(e,s){return new F1({type:"default",innerType:e,get defaultValue(){return typeof s=="function"?s():cb(s)}})}const Z1=Ce("ZodPrefault",(e,s)=>{xE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Rk(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function H1(e,s){return new Z1({type:"prefault",innerType:e,get defaultValue(){return typeof s=="function"?s():cb(s)}})}const Db=Ce("ZodNonOptional",(e,s)=>{gE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Ok(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function K1(e,s){return new Db({type:"nonoptional",innerType:e,...tt(s)})}const G1=Ce("ZodCatch",(e,s)=>{yE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Lk(e,l,o,d),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Q1(e,s){return new G1({type:"catch",innerType:e,catchValue:typeof s=="function"?s:()=>s})}const V1=Ce("ZodPipe",(e,s)=>{vE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Pk(e,l,o,d),e.in=s.in,e.out=s.out});function l0(e,s){return new V1({type:"pipe",in:e,out:s})}const Y1=Ce("ZodReadonly",(e,s)=>{bE.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Ik(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function $1(e){return new Y1({type:"readonly",innerType:e})}const X1=Ce("ZodCustom",(e,s)=>{_E.init(e,s),kn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>Ek(e,l)});function J1(e,s={}){return fk(X1,e,s)}function W1(e){return pk(e)}function qn(e){return $E(zb,e)}tr({jitless:!0});function Rb(e,s){return function(){return e.apply(s,arguments)}}const{toString:eT}=Object.prototype,{getPrototypeOf:op}=Object,{iterator:wd,toStringTag:Lb}=Symbol,Ed=(e=>s=>{const l=eT.call(s);return e[l]||(e[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),ks=e=>(e=e.toLowerCase(),s=>Ed(s)===e),kd=e=>s=>typeof s===e,{isArray:Ql}=Array,Ul=kd("undefined");function cc(e){return e!==null&&!Ul(e)&&e.constructor!==null&&!Ul(e.constructor)&&Ra(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Pb=ks("ArrayBuffer");function tT(e){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(e):s=e&&e.buffer&&Pb(e.buffer),s}const nT=kd("string"),Ra=kd("function"),Ib=kd("number"),uc=e=>e!==null&&typeof e=="object",aT=e=>e===!0||e===!1,ed=e=>{if(Ed(e)!=="object")return!1;const s=op(e);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Lb in e)&&!(wd in e)},sT=e=>{if(!uc(e)||cc(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},iT=ks("Date"),rT=ks("File"),lT=ks("Blob"),oT=ks("FileList"),cT=e=>uc(e)&&Ra(e.pipe),uT=e=>{let s;return e&&(typeof FormData=="function"&&e instanceof FormData||Ra(e.append)&&((s=Ed(e))==="formdata"||s==="object"&&Ra(e.toString)&&e.toString()==="[object FormData]"))},dT=ks("URLSearchParams"),[mT,hT,fT,pT]=["ReadableStream","Request","Response","Headers"].map(ks),xT=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function dc(e,s,{allOwnKeys:l=!1}={}){if(e===null||typeof e>"u")return;let o,d;if(typeof e!="object"&&(e=[e]),Ql(e))for(o=0,d=e.length;o<d;o++)s.call(null,e[o],o,e);else{if(cc(e))return;const m=l?Object.getOwnPropertyNames(e):Object.keys(e),f=m.length;let g;for(o=0;o<f;o++)g=m[o],s.call(null,e[g],g,e)}}function Bb(e,s){if(cc(e))return null;s=s.toLowerCase();const l=Object.keys(e);let o=l.length,d;for(;o-- >0;)if(d=l[o],s===d.toLowerCase())return d;return null}const Ur=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ub=e=>!Ul(e)&&e!==Ur;function Af(){const{caseless:e,skipUndefined:s}=Ub(this)&&this||{},l={},o=(d,m)=>{const f=e&&Bb(l,m)||m;ed(l[f])&&ed(d)?l[f]=Af(l[f],d):ed(d)?l[f]=Af({},d):Ql(d)?l[f]=d.slice():(!s||!Ul(d))&&(l[f]=d)};for(let d=0,m=arguments.length;d<m;d++)arguments[d]&&dc(arguments[d],o);return l}const gT=(e,s,l,{allOwnKeys:o}={})=>(dc(s,(d,m)=>{l&&Ra(d)?Object.defineProperty(e,m,{value:Rb(d,l),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,m,{value:d,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:o}),e),yT=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),vT=(e,s,l,o)=>{e.prototype=Object.create(s.prototype,o),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:s.prototype}),l&&Object.assign(e.prototype,l)},bT=(e,s,l,o)=>{let d,m,f;const g={};if(s=s||{},e==null)return s;do{for(d=Object.getOwnPropertyNames(e),m=d.length;m-- >0;)f=d[m],(!o||o(f,e,s))&&!g[f]&&(s[f]=e[f],g[f]=!0);e=l!==!1&&op(e)}while(e&&(!l||l(e,s))&&e!==Object.prototype);return s},_T=(e,s,l)=>{e=String(e),(l===void 0||l>e.length)&&(l=e.length),l-=s.length;const o=e.indexOf(s,l);return o!==-1&&o===l},NT=e=>{if(!e)return null;if(Ql(e))return e;let s=e.length;if(!Ib(s))return null;const l=new Array(s);for(;s-- >0;)l[s]=e[s];return l},jT=(e=>s=>e&&s instanceof e)(typeof Uint8Array<"u"&&op(Uint8Array)),ST=(e,s)=>{const o=(e&&e[wd]).call(e);let d;for(;(d=o.next())&&!d.done;){const m=d.value;s.call(e,m[0],m[1])}},wT=(e,s)=>{let l;const o=[];for(;(l=e.exec(s))!==null;)o.push(l);return o},ET=ks("HTMLFormElement"),kT=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(l,o,d){return o.toUpperCase()+d}),o0=(({hasOwnProperty:e})=>(s,l)=>e.call(s,l))(Object.prototype),TT=ks("RegExp"),Fb=(e,s)=>{const l=Object.getOwnPropertyDescriptors(e),o={};dc(l,(d,m)=>{let f;(f=s(d,m,e))!==!1&&(o[m]=f||d)}),Object.defineProperties(e,o)},CT=e=>{Fb(e,(s,l)=>{if(Ra(e)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const o=e[l];if(Ra(o)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},AT=(e,s)=>{const l={},o=d=>{d.forEach(m=>{l[m]=!0})};return Ql(e)?o(e):o(String(e).split(s)),l},MT=()=>{},zT=(e,s)=>e!=null&&Number.isFinite(e=+e)?e:s;function OT(e){return!!(e&&Ra(e.append)&&e[Lb]==="FormData"&&e[wd])}const DT=e=>{const s=new Array(10),l=(o,d)=>{if(uc(o)){if(s.indexOf(o)>=0)return;if(cc(o))return o;if(!("toJSON"in o)){s[d]=o;const m=Ql(o)?[]:{};return dc(o,(f,g)=>{const v=l(f,d+1);!Ul(v)&&(m[g]=v)}),s[d]=void 0,m}}return o};return l(e,0)},RT=ks("AsyncFunction"),LT=e=>e&&(uc(e)||Ra(e))&&Ra(e.then)&&Ra(e.catch),qb=((e,s)=>e?setImmediate:s?((l,o)=>(Ur.addEventListener("message",({source:d,data:m})=>{d===Ur&&m===l&&o.length&&o.shift()()},!1),d=>{o.push(d),Ur.postMessage(l,"*")}))(`axios@${Math.random()}`,[]):l=>setTimeout(l))(typeof setImmediate=="function",Ra(Ur.postMessage)),PT=typeof queueMicrotask<"u"?queueMicrotask.bind(Ur):typeof process<"u"&&process.nextTick||qb,IT=e=>e!=null&&Ra(e[wd]),ve={isArray:Ql,isArrayBuffer:Pb,isBuffer:cc,isFormData:uT,isArrayBufferView:tT,isString:nT,isNumber:Ib,isBoolean:aT,isObject:uc,isPlainObject:ed,isEmptyObject:sT,isReadableStream:mT,isRequest:hT,isResponse:fT,isHeaders:pT,isUndefined:Ul,isDate:iT,isFile:rT,isBlob:lT,isRegExp:TT,isFunction:Ra,isStream:cT,isURLSearchParams:dT,isTypedArray:jT,isFileList:oT,forEach:dc,merge:Af,extend:gT,trim:xT,stripBOM:yT,inherits:vT,toFlatObject:bT,kindOf:Ed,kindOfTest:ks,endsWith:_T,toArray:NT,forEachEntry:ST,matchAll:wT,isHTMLForm:ET,hasOwnProperty:o0,hasOwnProp:o0,reduceDescriptors:Fb,freezeMethods:CT,toObjectSet:AT,toCamelCase:kT,noop:MT,toFiniteNumber:zT,findKey:Bb,global:Ur,isContextDefined:Ub,isSpecCompliantForm:OT,toJSONObject:DT,isAsyncFn:RT,isThenable:LT,setImmediate:qb,asap:PT,isIterable:IT};let ct=class Zb extends Error{static from(s,l,o,d,m,f){const g=new Zb(s.message,l||s.code,o,d,m);return g.cause=s,g.name=s.name,f&&Object.assign(g,f),g}constructor(s,l,o,d,m){super(s),this.name="AxiosError",this.isAxiosError=!0,l&&(this.code=l),o&&(this.config=o),d&&(this.request=d),m&&(this.response=m,this.status=m.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ve.toJSONObject(this.config),code:this.code,status:this.status}}};ct.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";ct.ERR_BAD_OPTION="ERR_BAD_OPTION";ct.ECONNABORTED="ECONNABORTED";ct.ETIMEDOUT="ETIMEDOUT";ct.ERR_NETWORK="ERR_NETWORK";ct.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";ct.ERR_DEPRECATED="ERR_DEPRECATED";ct.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";ct.ERR_BAD_REQUEST="ERR_BAD_REQUEST";ct.ERR_CANCELED="ERR_CANCELED";ct.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";ct.ERR_INVALID_URL="ERR_INVALID_URL";const BT=null;function Mf(e){return ve.isPlainObject(e)||ve.isArray(e)}function Hb(e){return ve.endsWith(e,"[]")?e.slice(0,-2):e}function c0(e,s,l){return e?e.concat(s).map(function(d,m){return d=Hb(d),!l&&m?"["+d+"]":d}).join(l?".":""):s}function UT(e){return ve.isArray(e)&&!e.some(Mf)}const FT=ve.toFlatObject(ve,{},null,function(s){return/^is[A-Z]/.test(s)});function Td(e,s,l){if(!ve.isObject(e))throw new TypeError("target must be an object");s=s||new FormData,l=ve.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,z){return!ve.isUndefined(z[A])});const o=l.metaTokens,d=l.visitor||S,m=l.dots,f=l.indexes,v=(l.Blob||typeof Blob<"u"&&Blob)&&ve.isSpecCompliantForm(s);if(!ve.isFunction(d))throw new TypeError("visitor must be a function");function _(k){if(k===null)return"";if(ve.isDate(k))return k.toISOString();if(ve.isBoolean(k))return k.toString();if(!v&&ve.isBlob(k))throw new ct("Blob is not supported. Use a Buffer instead.");return ve.isArrayBuffer(k)||ve.isTypedArray(k)?v&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function S(k,A,z){let U=k;if(k&&!z&&typeof k=="object"){if(ve.endsWith(A,"{}"))A=o?A:A.slice(0,-2),k=JSON.stringify(k);else if(ve.isArray(k)&&UT(k)||(ve.isFileList(k)||ve.endsWith(A,"[]"))&&(U=ve.toArray(k)))return A=Hb(A),U.forEach(function(R,K){!(ve.isUndefined(R)||R===null)&&s.append(f===!0?c0([A],K,m):f===null?A:A+"[]",_(R))}),!1}return Mf(k)?!0:(s.append(c0(z,A,m),_(k)),!1)}const w=[],T=Object.assign(FT,{defaultVisitor:S,convertValue:_,isVisitable:Mf});function O(k,A){if(!ve.isUndefined(k)){if(w.indexOf(k)!==-1)throw Error("Circular reference detected in "+A.join("."));w.push(k),ve.forEach(k,function(U,I){(!(ve.isUndefined(U)||U===null)&&d.call(s,U,ve.isString(I)?I.trim():I,A,T))===!0&&O(U,A?A.concat(I):[I])}),w.pop()}}if(!ve.isObject(e))throw new TypeError("data must be an object");return O(e),s}function u0(e){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return s[o]})}function cp(e,s){this._pairs=[],e&&Td(e,this,s)}const Kb=cp.prototype;Kb.append=function(s,l){this._pairs.push([s,l])};Kb.toString=function(s){const l=s?function(o){return s.call(this,o,u0)}:u0;return this._pairs.map(function(d){return l(d[0])+"="+l(d[1])},"").join("&")};function qT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Gb(e,s,l){if(!s)return e;const o=l&&l.encode||qT,d=ve.isFunction(l)?{serialize:l}:l,m=d&&d.serialize;let f;if(m?f=m(s,d):f=ve.isURLSearchParams(s)?s.toString():new cp(s,d).toString(o),f){const g=e.indexOf("#");g!==-1&&(e=e.slice(0,g)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class d0{constructor(){this.handlers=[]}use(s,l,o){return this.handlers.push({fulfilled:s,rejected:l,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){ve.forEach(this.handlers,function(o){o!==null&&s(o)})}}const Qb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ZT=typeof URLSearchParams<"u"?URLSearchParams:cp,HT=typeof FormData<"u"?FormData:null,KT=typeof Blob<"u"?Blob:null,GT={isBrowser:!0,classes:{URLSearchParams:ZT,FormData:HT,Blob:KT},protocols:["http","https","file","blob","url","data"]},up=typeof window<"u"&&typeof document<"u",zf=typeof navigator=="object"&&navigator||void 0,QT=up&&(!zf||["ReactNative","NativeScript","NS"].indexOf(zf.product)<0),VT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",YT=up&&window.location.href||"http://localhost",$T=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:up,hasStandardBrowserEnv:QT,hasStandardBrowserWebWorkerEnv:VT,navigator:zf,origin:YT},Symbol.toStringTag,{value:"Module"})),ha={...$T,...GT};function XT(e,s){return Td(e,new ha.classes.URLSearchParams,{visitor:function(l,o,d,m){return ha.isNode&&ve.isBuffer(l)?(this.append(o,l.toString("base64")),!1):m.defaultVisitor.apply(this,arguments)},...s})}function JT(e){return ve.matchAll(/\w+|\[(\w*)]/g,e).map(s=>s[0]==="[]"?"":s[1]||s[0])}function WT(e){const s={},l=Object.keys(e);let o;const d=l.length;let m;for(o=0;o<d;o++)m=l[o],s[m]=e[m];return s}function Vb(e){function s(l,o,d,m){let f=l[m++];if(f==="__proto__")return!0;const g=Number.isFinite(+f),v=m>=l.length;return f=!f&&ve.isArray(d)?d.length:f,v?(ve.hasOwnProp(d,f)?d[f]=[d[f],o]:d[f]=o,!g):((!d[f]||!ve.isObject(d[f]))&&(d[f]=[]),s(l,o,d[f],m)&&ve.isArray(d[f])&&(d[f]=WT(d[f])),!g)}if(ve.isFormData(e)&&ve.isFunction(e.entries)){const l={};return ve.forEachEntry(e,(o,d)=>{s(JT(o),d,l,0)}),l}return null}function eC(e,s,l){if(ve.isString(e))try{return(s||JSON.parse)(e),ve.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(l||JSON.stringify)(e)}const mc={transitional:Qb,adapter:["xhr","http","fetch"],transformRequest:[function(s,l){const o=l.getContentType()||"",d=o.indexOf("application/json")>-1,m=ve.isObject(s);if(m&&ve.isHTMLForm(s)&&(s=new FormData(s)),ve.isFormData(s))return d?JSON.stringify(Vb(s)):s;if(ve.isArrayBuffer(s)||ve.isBuffer(s)||ve.isStream(s)||ve.isFile(s)||ve.isBlob(s)||ve.isReadableStream(s))return s;if(ve.isArrayBufferView(s))return s.buffer;if(ve.isURLSearchParams(s))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let g;if(m){if(o.indexOf("application/x-www-form-urlencoded")>-1)return XT(s,this.formSerializer).toString();if((g=ve.isFileList(s))||o.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Td(g?{"files[]":s}:s,v&&new v,this.formSerializer)}}return m||d?(l.setContentType("application/json",!1),eC(s)):s}],transformResponse:[function(s){const l=this.transitional||mc.transitional,o=l&&l.forcedJSONParsing,d=this.responseType==="json";if(ve.isResponse(s)||ve.isReadableStream(s))return s;if(s&&ve.isString(s)&&(o&&!this.responseType||d)){const f=!(l&&l.silentJSONParsing)&&d;try{return JSON.parse(s,this.parseReviver)}catch(g){if(f)throw g.name==="SyntaxError"?ct.from(g,ct.ERR_BAD_RESPONSE,this,null,this.response):g}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ha.classes.FormData,Blob:ha.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ve.forEach(["delete","get","head","post","put","patch"],e=>{mc.headers[e]={}});const tC=ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nC=e=>{const s={};let l,o,d;return e&&e.split(`
`).forEach(function(f){d=f.indexOf(":"),l=f.substring(0,d).trim().toLowerCase(),o=f.substring(d+1).trim(),!(!l||s[l]&&tC[l])&&(l==="set-cookie"?s[l]?s[l].push(o):s[l]=[o]:s[l]=s[l]?s[l]+", "+o:o)}),s},m0=Symbol("internals");function $o(e){return e&&String(e).trim().toLowerCase()}function td(e){return e===!1||e==null?e:ve.isArray(e)?e.map(td):String(e)}function aC(e){const s=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=l.exec(e);)s[o[1]]=o[2];return s}const sC=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function zh(e,s,l,o,d){if(ve.isFunction(o))return o.call(this,s,l);if(d&&(s=l),!!ve.isString(s)){if(ve.isString(o))return s.indexOf(o)!==-1;if(ve.isRegExp(o))return o.test(s)}}function iC(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,l,o)=>l.toUpperCase()+o)}function rC(e,s){const l=ve.toCamelCase(" "+s);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+l,{value:function(d,m,f){return this[o].call(this,s,d,m,f)},configurable:!0})})}let La=class{constructor(s){s&&this.set(s)}set(s,l,o){const d=this;function m(g,v,_){const S=$o(v);if(!S)throw new Error("header name must be a non-empty string");const w=ve.findKey(d,S);(!w||d[w]===void 0||_===!0||_===void 0&&d[w]!==!1)&&(d[w||v]=td(g))}const f=(g,v)=>ve.forEach(g,(_,S)=>m(_,S,v));if(ve.isPlainObject(s)||s instanceof this.constructor)f(s,l);else if(ve.isString(s)&&(s=s.trim())&&!sC(s))f(nC(s),l);else if(ve.isObject(s)&&ve.isIterable(s)){let g={},v,_;for(const S of s){if(!ve.isArray(S))throw TypeError("Object iterator must return a key-value pair");g[_=S[0]]=(v=g[_])?ve.isArray(v)?[...v,S[1]]:[v,S[1]]:S[1]}f(g,l)}else s!=null&&m(l,s,o);return this}get(s,l){if(s=$o(s),s){const o=ve.findKey(this,s);if(o){const d=this[o];if(!l)return d;if(l===!0)return aC(d);if(ve.isFunction(l))return l.call(this,d,o);if(ve.isRegExp(l))return l.exec(d);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,l){if(s=$o(s),s){const o=ve.findKey(this,s);return!!(o&&this[o]!==void 0&&(!l||zh(this,this[o],o,l)))}return!1}delete(s,l){const o=this;let d=!1;function m(f){if(f=$o(f),f){const g=ve.findKey(o,f);g&&(!l||zh(o,o[g],g,l))&&(delete o[g],d=!0)}}return ve.isArray(s)?s.forEach(m):m(s),d}clear(s){const l=Object.keys(this);let o=l.length,d=!1;for(;o--;){const m=l[o];(!s||zh(this,this[m],m,s,!0))&&(delete this[m],d=!0)}return d}normalize(s){const l=this,o={};return ve.forEach(this,(d,m)=>{const f=ve.findKey(o,m);if(f){l[f]=td(d),delete l[m];return}const g=s?iC(m):String(m).trim();g!==m&&delete l[m],l[g]=td(d),o[g]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const l=Object.create(null);return ve.forEach(this,(o,d)=>{o!=null&&o!==!1&&(l[d]=s&&ve.isArray(o)?o.join(", "):o)}),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,l])=>s+": "+l).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...l){const o=new this(s);return l.forEach(d=>o.set(d)),o}static accessor(s){const o=(this[m0]=this[m0]={accessors:{}}).accessors,d=this.prototype;function m(f){const g=$o(f);o[g]||(rC(d,f),o[g]=!0)}return ve.isArray(s)?s.forEach(m):m(s),this}};La.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ve.reduceDescriptors(La.prototype,({value:e},s)=>{let l=s[0].toUpperCase()+s.slice(1);return{get:()=>e,set(o){this[l]=o}}});ve.freezeMethods(La);function Oh(e,s){const l=this||mc,o=s||l,d=La.from(o.headers);let m=o.data;return ve.forEach(e,function(g){m=g.call(l,m,d.normalize(),s?s.status:void 0)}),d.normalize(),m}function Yb(e){return!!(e&&e.__CANCEL__)}let hc=class extends ct{constructor(s,l,o){super(s??"canceled",ct.ERR_CANCELED,l,o),this.name="CanceledError",this.__CANCEL__=!0}};function $b(e,s,l){const o=l.config.validateStatus;!l.status||!o||o(l.status)?e(l):s(new ct("Request failed with status code "+l.status,[ct.ERR_BAD_REQUEST,ct.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}function lC(e){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return s&&s[1]||""}function oC(e,s){e=e||10;const l=new Array(e),o=new Array(e);let d=0,m=0,f;return s=s!==void 0?s:1e3,function(v){const _=Date.now(),S=o[m];f||(f=_),l[d]=v,o[d]=_;let w=m,T=0;for(;w!==d;)T+=l[w++],w=w%e;if(d=(d+1)%e,d===m&&(m=(m+1)%e),_-f<s)return;const O=S&&_-S;return O?Math.round(T*1e3/O):void 0}}function cC(e,s){let l=0,o=1e3/s,d,m;const f=(_,S=Date.now())=>{l=S,d=null,m&&(clearTimeout(m),m=null),e(..._)};return[(..._)=>{const S=Date.now(),w=S-l;w>=o?f(_,S):(d=_,m||(m=setTimeout(()=>{m=null,f(d)},o-w)))},()=>d&&f(d)]}const md=(e,s,l=3)=>{let o=0;const d=oC(50,250);return cC(m=>{const f=m.loaded,g=m.lengthComputable?m.total:void 0,v=f-o,_=d(v),S=f<=g;o=f;const w={loaded:f,total:g,progress:g?f/g:void 0,bytes:v,rate:_||void 0,estimated:_&&g&&S?(g-f)/_:void 0,event:m,lengthComputable:g!=null,[s?"download":"upload"]:!0};e(w)},l)},h0=(e,s)=>{const l=e!=null;return[o=>s[0]({lengthComputable:l,total:e,loaded:o}),s[1]]},f0=e=>(...s)=>ve.asap(()=>e(...s)),uC=ha.hasStandardBrowserEnv?((e,s)=>l=>(l=new URL(l,ha.origin),e.protocol===l.protocol&&e.host===l.host&&(s||e.port===l.port)))(new URL(ha.origin),ha.navigator&&/(msie|trident)/i.test(ha.navigator.userAgent)):()=>!0,dC=ha.hasStandardBrowserEnv?{write(e,s,l,o,d,m,f){if(typeof document>"u")return;const g=[`${e}=${encodeURIComponent(s)}`];ve.isNumber(l)&&g.push(`expires=${new Date(l).toUTCString()}`),ve.isString(o)&&g.push(`path=${o}`),ve.isString(d)&&g.push(`domain=${d}`),m===!0&&g.push("secure"),ve.isString(f)&&g.push(`SameSite=${f}`),document.cookie=g.join("; ")},read(e){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function mC(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function hC(e,s){return s?e.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):e}function Xb(e,s,l){let o=!mC(s);return e&&(o||l==!1)?hC(e,s):s}const p0=e=>e instanceof La?{...e}:e;function Kr(e,s){s=s||{};const l={};function o(_,S,w,T){return ve.isPlainObject(_)&&ve.isPlainObject(S)?ve.merge.call({caseless:T},_,S):ve.isPlainObject(S)?ve.merge({},S):ve.isArray(S)?S.slice():S}function d(_,S,w,T){if(ve.isUndefined(S)){if(!ve.isUndefined(_))return o(void 0,_,w,T)}else return o(_,S,w,T)}function m(_,S){if(!ve.isUndefined(S))return o(void 0,S)}function f(_,S){if(ve.isUndefined(S)){if(!ve.isUndefined(_))return o(void 0,_)}else return o(void 0,S)}function g(_,S,w){if(w in s)return o(_,S);if(w in e)return o(void 0,_)}const v={url:m,method:m,data:m,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:g,headers:(_,S,w)=>d(p0(_),p0(S),w,!0)};return ve.forEach(Object.keys({...e,...s}),function(S){const w=v[S]||d,T=w(e[S],s[S],S);ve.isUndefined(T)&&w!==g||(l[S]=T)}),l}const Jb=e=>{const s=Kr({},e);let{data:l,withXSRFToken:o,xsrfHeaderName:d,xsrfCookieName:m,headers:f,auth:g}=s;if(s.headers=f=La.from(f),s.url=Gb(Xb(s.baseURL,s.url,s.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&f.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),ve.isFormData(l)){if(ha.hasStandardBrowserEnv||ha.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(ve.isFunction(l.getHeaders)){const v=l.getHeaders(),_=["content-type","content-length"];Object.entries(v).forEach(([S,w])=>{_.includes(S.toLowerCase())&&f.set(S,w)})}}if(ha.hasStandardBrowserEnv&&(o&&ve.isFunction(o)&&(o=o(s)),o||o!==!1&&uC(s.url))){const v=d&&m&&dC.read(m);v&&f.set(d,v)}return s},fC=typeof XMLHttpRequest<"u",pC=fC&&function(e){return new Promise(function(l,o){const d=Jb(e);let m=d.data;const f=La.from(d.headers).normalize();let{responseType:g,onUploadProgress:v,onDownloadProgress:_}=d,S,w,T,O,k;function A(){O&&O(),k&&k(),d.cancelToken&&d.cancelToken.unsubscribe(S),d.signal&&d.signal.removeEventListener("abort",S)}let z=new XMLHttpRequest;z.open(d.method.toUpperCase(),d.url,!0),z.timeout=d.timeout;function U(){if(!z)return;const R=La.from("getAllResponseHeaders"in z&&z.getAllResponseHeaders()),V={data:!g||g==="text"||g==="json"?z.responseText:z.response,status:z.status,statusText:z.statusText,headers:R,config:e,request:z};$b(function(q){l(q),A()},function(q){o(q),A()},V),z=null}"onloadend"in z?z.onloadend=U:z.onreadystatechange=function(){!z||z.readyState!==4||z.status===0&&!(z.responseURL&&z.responseURL.indexOf("file:")===0)||setTimeout(U)},z.onabort=function(){z&&(o(new ct("Request aborted",ct.ECONNABORTED,e,z)),z=null)},z.onerror=function(K){const V=K&&K.message?K.message:"Network Error",ee=new ct(V,ct.ERR_NETWORK,e,z);ee.event=K||null,o(ee),z=null},z.ontimeout=function(){let K=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded";const V=d.transitional||Qb;d.timeoutErrorMessage&&(K=d.timeoutErrorMessage),o(new ct(K,V.clarifyTimeoutError?ct.ETIMEDOUT:ct.ECONNABORTED,e,z)),z=null},m===void 0&&f.setContentType(null),"setRequestHeader"in z&&ve.forEach(f.toJSON(),function(K,V){z.setRequestHeader(V,K)}),ve.isUndefined(d.withCredentials)||(z.withCredentials=!!d.withCredentials),g&&g!=="json"&&(z.responseType=d.responseType),_&&([T,k]=md(_,!0),z.addEventListener("progress",T)),v&&z.upload&&([w,O]=md(v),z.upload.addEventListener("progress",w),z.upload.addEventListener("loadend",O)),(d.cancelToken||d.signal)&&(S=R=>{z&&(o(!R||R.type?new hc(null,e,z):R),z.abort(),z=null)},d.cancelToken&&d.cancelToken.subscribe(S),d.signal&&(d.signal.aborted?S():d.signal.addEventListener("abort",S)));const I=lC(d.url);if(I&&ha.protocols.indexOf(I)===-1){o(new ct("Unsupported protocol "+I+":",ct.ERR_BAD_REQUEST,e));return}z.send(m||null)})},xC=(e,s)=>{const{length:l}=e=e?e.filter(Boolean):[];if(s||l){let o=new AbortController,d;const m=function(_){if(!d){d=!0,g();const S=_ instanceof Error?_:this.reason;o.abort(S instanceof ct?S:new hc(S instanceof Error?S.message:S))}};let f=s&&setTimeout(()=>{f=null,m(new ct(`timeout of ${s}ms exceeded`,ct.ETIMEDOUT))},s);const g=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(_=>{_.unsubscribe?_.unsubscribe(m):_.removeEventListener("abort",m)}),e=null)};e.forEach(_=>_.addEventListener("abort",m));const{signal:v}=o;return v.unsubscribe=()=>ve.asap(g),v}},gC=function*(e,s){let l=e.byteLength;if(l<s){yield e;return}let o=0,d;for(;o<l;)d=o+s,yield e.slice(o,d),o=d},yC=async function*(e,s){for await(const l of vC(e))yield*gC(l,s)},vC=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const s=e.getReader();try{for(;;){const{done:l,value:o}=await s.read();if(l)break;yield o}}finally{await s.cancel()}},x0=(e,s,l,o)=>{const d=yC(e,s);let m=0,f,g=v=>{f||(f=!0,o&&o(v))};return new ReadableStream({async pull(v){try{const{done:_,value:S}=await d.next();if(_){g(),v.close();return}let w=S.byteLength;if(l){let T=m+=w;l(T)}v.enqueue(new Uint8Array(S))}catch(_){throw g(_),_}},cancel(v){return g(v),d.return()}},{highWaterMark:2})},g0=64*1024,{isFunction:Bu}=ve,bC=(({Request:e,Response:s})=>({Request:e,Response:s}))(ve.global),{ReadableStream:y0,TextEncoder:v0}=ve.global,b0=(e,...s)=>{try{return!!e(...s)}catch{return!1}},_C=e=>{e=ve.merge.call({skipUndefined:!0},bC,e);const{fetch:s,Request:l,Response:o}=e,d=s?Bu(s):typeof fetch=="function",m=Bu(l),f=Bu(o);if(!d)return!1;const g=d&&Bu(y0),v=d&&(typeof v0=="function"?(k=>A=>k.encode(A))(new v0):async k=>new Uint8Array(await new l(k).arrayBuffer())),_=m&&g&&b0(()=>{let k=!1;const A=new l(ha.origin,{body:new y0,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!A}),S=f&&g&&b0(()=>ve.isReadableStream(new o("").body)),w={stream:S&&(k=>k.body)};d&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!w[k]&&(w[k]=(A,z)=>{let U=A&&A[k];if(U)return U.call(A);throw new ct(`Response type '${k}' is not supported`,ct.ERR_NOT_SUPPORT,z)})});const T=async k=>{if(k==null)return 0;if(ve.isBlob(k))return k.size;if(ve.isSpecCompliantForm(k))return(await new l(ha.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(ve.isArrayBufferView(k)||ve.isArrayBuffer(k))return k.byteLength;if(ve.isURLSearchParams(k)&&(k=k+""),ve.isString(k))return(await v(k)).byteLength},O=async(k,A)=>{const z=ve.toFiniteNumber(k.getContentLength());return z??T(A)};return async k=>{let{url:A,method:z,data:U,signal:I,cancelToken:R,timeout:K,onDownloadProgress:V,onUploadProgress:ee,responseType:q,headers:Y,withCredentials:$="same-origin",fetchOptions:ie}=Jb(k),fe=s||fetch;q=q?(q+"").toLowerCase():"text";let ue=xC([I,R&&R.toAbortSignal()],K),je=null;const X=ue&&ue.unsubscribe&&(()=>{ue.unsubscribe()});let oe;try{if(ee&&_&&z!=="get"&&z!=="head"&&(oe=await O(Y,U))!==0){let D=new l(A,{method:"POST",body:U,duplex:"half"}),te;if(ve.isFormData(U)&&(te=D.headers.get("content-type"))&&Y.setContentType(te),D.body){const[P,ce]=h0(oe,md(f0(ee)));U=x0(D.body,g0,P,ce)}}ve.isString($)||($=$?"include":"omit");const Z=m&&"credentials"in l.prototype,M={...ie,signal:ue,method:z.toUpperCase(),headers:Y.normalize().toJSON(),body:U,duplex:"half",credentials:Z?$:void 0};je=m&&new l(A,M);let ne=await(m?fe(je,ie):fe(A,M));const Se=S&&(q==="stream"||q==="response");if(S&&(V||Se&&X)){const D={};["status","statusText","headers"].forEach(de=>{D[de]=ne[de]});const te=ve.toFiniteNumber(ne.headers.get("content-length")),[P,ce]=V&&h0(te,md(f0(V),!0))||[];ne=new o(x0(ne.body,g0,P,()=>{ce&&ce(),X&&X()}),D)}q=q||"text";let be=await w[ve.findKey(w,q)||"text"](ne,k);return!Se&&X&&X(),await new Promise((D,te)=>{$b(D,te,{data:be,headers:La.from(ne.headers),status:ne.status,statusText:ne.statusText,config:k,request:je})})}catch(Z){throw X&&X(),Z&&Z.name==="TypeError"&&/Load failed|fetch/i.test(Z.message)?Object.assign(new ct("Network Error",ct.ERR_NETWORK,k,je),{cause:Z.cause||Z}):ct.from(Z,Z&&Z.code,k,je)}}},NC=new Map,Wb=e=>{let s=e&&e.env||{};const{fetch:l,Request:o,Response:d}=s,m=[o,d,l];let f=m.length,g=f,v,_,S=NC;for(;g--;)v=m[g],_=S.get(v),_===void 0&&S.set(v,_=g?new Map:_C(s)),S=_;return _};Wb();const dp={http:BT,xhr:pC,fetch:{get:Wb}};ve.forEach(dp,(e,s)=>{if(e){try{Object.defineProperty(e,"name",{value:s})}catch{}Object.defineProperty(e,"adapterName",{value:s})}});const _0=e=>`- ${e}`,jC=e=>ve.isFunction(e)||e===null||e===!1;function SC(e,s){e=ve.isArray(e)?e:[e];const{length:l}=e;let o,d;const m={};for(let f=0;f<l;f++){o=e[f];let g;if(d=o,!jC(o)&&(d=dp[(g=String(o)).toLowerCase()],d===void 0))throw new ct(`Unknown adapter '${g}'`);if(d&&(ve.isFunction(d)||(d=d.get(s))))break;m[g||"#"+f]=d}if(!d){const f=Object.entries(m).map(([v,_])=>`adapter ${v} `+(_===!1?"is not supported by the environment":"is not available in the build"));let g=l?f.length>1?`since :
`+f.map(_0).join(`
`):" "+_0(f[0]):"as no adapter specified";throw new ct("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return d}const e_={getAdapter:SC,adapters:dp};function Dh(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hc(null,e)}function N0(e){return Dh(e),e.headers=La.from(e.headers),e.data=Oh.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),e_.getAdapter(e.adapter||mc.adapter,e)(e).then(function(o){return Dh(e),o.data=Oh.call(e,e.transformResponse,o),o.headers=La.from(o.headers),o},function(o){return Yb(o)||(Dh(e),o&&o.response&&(o.response.data=Oh.call(e,e.transformResponse,o.response),o.response.headers=La.from(o.response.headers))),Promise.reject(o)})}const t_="1.13.4",Cd={};["object","boolean","number","function","string","symbol"].forEach((e,s)=>{Cd[e]=function(o){return typeof o===e||"a"+(s<1?"n ":" ")+e}});const j0={};Cd.transitional=function(s,l,o){function d(m,f){return"[Axios v"+t_+"] Transitional option '"+m+"'"+f+(o?". "+o:"")}return(m,f,g)=>{if(s===!1)throw new ct(d(f," has been removed"+(l?" in "+l:"")),ct.ERR_DEPRECATED);return l&&!j0[f]&&(j0[f]=!0,console.warn(d(f," has been deprecated since v"+l+" and will be removed in the near future"))),s?s(m,f,g):!0}};Cd.spelling=function(s){return(l,o)=>(console.warn(`${o} is likely a misspelling of ${s}`),!0)};function wC(e,s,l){if(typeof e!="object")throw new ct("options must be an object",ct.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let d=o.length;for(;d-- >0;){const m=o[d],f=s[m];if(f){const g=e[m],v=g===void 0||f(g,m,e);if(v!==!0)throw new ct("option "+m+" must be "+v,ct.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new ct("Unknown option "+m,ct.ERR_BAD_OPTION)}}const nd={assertOptions:wC,validators:Cd},Hs=nd.validators;let Fr=class{constructor(s){this.defaults=s||{},this.interceptors={request:new d0,response:new d0}}async request(s,l){try{return await this._request(s,l)}catch(o){if(o instanceof Error){let d={};Error.captureStackTrace?Error.captureStackTrace(d):d=new Error;const m=d.stack?d.stack.replace(/^.+\n/,""):"";try{o.stack?m&&!String(o.stack).endsWith(m.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+m):o.stack=m}catch{}}throw o}}_request(s,l){typeof s=="string"?(l=l||{},l.url=s):l=s||{},l=Kr(this.defaults,l);const{transitional:o,paramsSerializer:d,headers:m}=l;o!==void 0&&nd.assertOptions(o,{silentJSONParsing:Hs.transitional(Hs.boolean),forcedJSONParsing:Hs.transitional(Hs.boolean),clarifyTimeoutError:Hs.transitional(Hs.boolean)},!1),d!=null&&(ve.isFunction(d)?l.paramsSerializer={serialize:d}:nd.assertOptions(d,{encode:Hs.function,serialize:Hs.function},!0)),l.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?l.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:l.allowAbsoluteUrls=!0),nd.assertOptions(l,{baseUrl:Hs.spelling("baseURL"),withXsrfToken:Hs.spelling("withXSRFToken")},!0),l.method=(l.method||this.defaults.method||"get").toLowerCase();let f=m&&ve.merge(m.common,m[l.method]);m&&ve.forEach(["delete","get","head","post","put","patch","common"],k=>{delete m[k]}),l.headers=La.concat(f,m);const g=[];let v=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(l)===!1||(v=v&&A.synchronous,g.unshift(A.fulfilled,A.rejected))});const _=[];this.interceptors.response.forEach(function(A){_.push(A.fulfilled,A.rejected)});let S,w=0,T;if(!v){const k=[N0.bind(this),void 0];for(k.unshift(...g),k.push(..._),T=k.length,S=Promise.resolve(l);w<T;)S=S.then(k[w++],k[w++]);return S}T=g.length;let O=l;for(;w<T;){const k=g[w++],A=g[w++];try{O=k(O)}catch(z){A.call(this,z);break}}try{S=N0.call(this,O)}catch(k){return Promise.reject(k)}for(w=0,T=_.length;w<T;)S=S.then(_[w++],_[w++]);return S}getUri(s){s=Kr(this.defaults,s);const l=Xb(s.baseURL,s.url,s.allowAbsoluteUrls);return Gb(l,s.params,s.paramsSerializer)}};ve.forEach(["delete","get","head","options"],function(s){Fr.prototype[s]=function(l,o){return this.request(Kr(o||{},{method:s,url:l,data:(o||{}).data}))}});ve.forEach(["post","put","patch"],function(s){function l(o){return function(m,f,g){return this.request(Kr(g||{},{method:s,headers:o?{"Content-Type":"multipart/form-data"}:{},url:m,data:f}))}}Fr.prototype[s]=l(),Fr.prototype[s+"Form"]=l(!0)});let EC=class n_{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(m){l=m});const o=this;this.promise.then(d=>{if(!o._listeners)return;let m=o._listeners.length;for(;m-- >0;)o._listeners[m](d);o._listeners=null}),this.promise.then=d=>{let m;const f=new Promise(g=>{o.subscribe(g),m=g}).then(d);return f.cancel=function(){o.unsubscribe(m)},f},s(function(m,f,g){o.reason||(o.reason=new hc(m,f,g),l(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const l=this._listeners.indexOf(s);l!==-1&&this._listeners.splice(l,1)}toAbortSignal(){const s=new AbortController,l=o=>{s.abort(o)};return this.subscribe(l),s.signal.unsubscribe=()=>this.unsubscribe(l),s.signal}static source(){let s;return{token:new n_(function(d){s=d}),cancel:s}}};function kC(e){return function(l){return e.apply(null,l)}}function TC(e){return ve.isObject(e)&&e.isAxiosError===!0}const Of={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Of).forEach(([e,s])=>{Of[s]=e});function a_(e){const s=new Fr(e),l=Rb(Fr.prototype.request,s);return ve.extend(l,Fr.prototype,s,{allOwnKeys:!0}),ve.extend(l,s,null,{allOwnKeys:!0}),l.create=function(d){return a_(Kr(e,d))},l}const un=a_(mc);un.Axios=Fr;un.CanceledError=hc;un.CancelToken=EC;un.isCancel=Yb;un.VERSION=t_;un.toFormData=Td;un.AxiosError=ct;un.Cancel=un.CanceledError;un.all=function(s){return Promise.all(s)};un.spread=kC;un.isAxiosError=TC;un.mergeConfig=Kr;un.AxiosHeaders=La;un.formToJSON=e=>Vb(ve.isHTMLForm(e)?new FormData(e):e);un.getAdapter=e_.getAdapter;un.HttpStatusCode=Of;un.default=un;const{Axios:Hz,AxiosError:Kz,CanceledError:Gz,isCancel:Qz,CancelToken:Vz,VERSION:Yz,all:$z,Cancel:Xz,isAxiosError:Jz,spread:Wz,toFormData:eO,AxiosHeaders:tO,HttpStatusCode:nO,formToJSON:aO,getAdapter:sO,mergeConfig:iO}=un,mp="puantaj_access_token",hd="puantaj_refresh_token";function s_(){return localStorage.getItem(mp)}function Df(){return localStorage.getItem(hd)}function Rf(e,s){if(localStorage.setItem(mp,e),s){localStorage.setItem(hd,s);return}localStorage.removeItem(hd)}function i_(){localStorage.removeItem(mp),localStorage.removeItem(hd)}function CC(e){try{const s=e.split(".")[1];if(!s)return null;const l=s.replace(/-/g,"+").replace(/_/g,"/"),o=l.padEnd(l.length+(4-l.length%4)%4,"=");return JSON.parse(atob(o))}catch{return null}}function AC(e){if(!e)return!1;const s=CC(e);if(!s?.exp)return!1;const l=Math.floor(Date.now()/1e3);return s.exp>l+10}const Lf="http://127.0.0.1:8000",MC=Lf.includes("127.0.0.1")||Lf.includes("localhost"),zC=typeof window<"u"&&window.location.hostname!=="127.0.0.1"&&window.location.hostname!=="localhost",hp=zC&&MC?window.location.origin:Lf,Rh="/admin-panel/",Uu=Rh.endsWith("/")?Rh.slice(0,-1):Rh,Re=un.create({baseURL:hp,headers:{"Content-Type":"application/json"}}),fc=un.create({baseURL:hp,headers:{"Content-Type":"application/json"}});function S0(){if(i_(),typeof window>"u")return;const e=`${window.location.pathname}${window.location.search}`,s=Uu&&e.startsWith(Uu)?e.slice(Uu.length)||"/":e;if(s==="/login"||s.startsWith("/login?")){window.dispatchEvent(new Event("auth:logout"));return}const l=`${Uu}/login?redirect=${encodeURIComponent(s)}`;window.location.replace(l)}Re.interceptors.request.use(e=>{const s=s_();return s&&(e.headers.Authorization=`Bearer ${s}`),e});let Fu=null;async function OC(){const e=Df();if(!e)return S0(),null;try{const s=await un.post(`${hp}/api/admin/auth/refresh`,{refresh_token:e});return Rf(s.data.access_token,s.data.refresh_token??e),s.data.access_token}catch{return S0(),null}}Re.interceptors.response.use(e=>e,async e=>{const s=e.config;if(!s||e.response?.status!==401||s._retry)return Promise.reject(e);const o=s.url??"";if(o.includes("/api/admin/auth/login")||o.includes("/api/admin/auth/refresh")||o.includes("/api/admin/auth/logout"))return Promise.reject(e);s._retry=!0,Fu||(Fu=OC().finally(()=>{Fu=null}));const m=await Fu;return m?(s.headers.Authorization=`Bearer ${m}`,Re(s)):Promise.reject(e)});async function DC(e){return(await Re.post("/api/admin/auth/login",e)).data}async function RC(e){return(await Re.post("/api/admin/auth/refresh",e)).data}async function LC(e){return(await Re.post("/api/admin/auth/logout",e)).data}async function Lh(){return(await Re.get("/api/admin/auth/me")).data}async function r_(){return(await Re.get("/api/admin/admin-users")).data}async function PC(e){return(await Re.get(`/api/admin/admin-users/${e}/claim-detail`)).data}async function IC(e,s,l){return(await Re.patch(`/api/admin/admin-users/${e}/claims/${s}/active`,l)).data}async function Vl(e){return(await Re.get("/api/admin/regions",{params:e})).data}async function BC(e){return(await Re.post("/api/admin/regions",e)).data}async function UC(e,s){return(await Re.patch(`/api/admin/regions/${e}`,s)).data}async function FC(e){return(await Re.post("/api/admin/admin-users",e)).data}async function qC(e,s){return(await Re.patch(`/api/admin/admin-users/${e}`,s)).data}async function ZC(e){await Re.delete(`/api/admin/admin-users/${e}`)}async function HC(e){return(await Re.get(`/api/admin/admin-users/${e}/mfa`)).data}async function KC(e){return(await Re.post(`/api/admin/admin-users/${e}/mfa/setup/start`)).data}async function GC(e,s){return(await Re.post(`/api/admin/admin-users/${e}/mfa/setup/confirm`,s)).data}async function QC(e,s){return(await Re.post(`/api/admin/admin-users/${e}/mfa/recovery-codes/regenerate`,s)).data}async function VC(e,s){return(await Re.post(`/api/admin/admin-users/${e}/mfa/reset`,s)).data}async function fi(){return(await Re.get("/admin/departments")).data}async function YC(e){return(await Re.get("/admin/departments",{params:e})).data}async function $C(e){return(await Re.post("/admin/departments",e)).data}async function XC(e,s){return(await Re.patch(`/admin/departments/${e}`,s)).data}async function Ts(e={}){return(await Re.get("/admin/employees",{params:e})).data}async function JC(e){return(await Re.post("/admin/employees",e)).data}async function WC(e){return(await Re.get(`/api/admin/employees/${e}/detail`)).data}async function eA(e,s){return(await Re.patch(`/api/admin/employees/${e}`,s)).data}async function l_(e,s){return(await Re.patch(`/api/admin/employees/${e}/active`,s)).data}async function tA(e,s){return(await Re.patch(`/api/admin/employees/${e}/shift`,s)).data}async function nA(e,s){return(await Re.patch(`/api/admin/employees/${e}/department`,s)).data}async function aA(e,s){return(await Re.put(`/admin/employee-locations/${e}`,s)).data}async function sA(){return(await Re.get("/admin/work-rules")).data}async function iA(e){return(await Re.post("/admin/work-rules",e)).data}async function o_(e){return(await Re.get("/admin/department-weekly-rules",{params:e})).data}async function c_(e){return(await Re.post("/admin/department-weekly-rules",e)).data}async function pc(e){return(await Re.get("/admin/department-shifts",{params:e})).data}async function fd(e){return(await Re.post("/admin/department-shifts",e)).data}async function u_(e){return(await Re.delete(`/admin/department-shifts/${e}`)).data}async function rA(e={}){return(await Re.get("/api/admin/qr/codes",{params:e})).data}async function lA(e){return(await Re.post("/api/admin/qr/codes",e)).data}async function oA(e,s){return(await Re.patch(`/api/admin/qr/codes/${e}`,s)).data}async function cA(e,s){return(await Re.post(`/api/admin/qr/codes/${e}/points`,s)).data}async function uA(e,s){return(await Re.delete(`/api/admin/qr/codes/${e}/points/${s}`)).data}async function dA(e={}){return(await Re.get("/api/admin/qr/points",{params:e})).data}async function mA(e){return(await Re.post("/api/admin/qr/points",e)).data}async function hA(e,s){return(await Re.patch(`/api/admin/qr/points/${e}`,s)).data}async function fA(e){return(await Re.delete(`/api/admin/qr/points/${e}`)).data}async function w0(e){return(await Re.post("/api/admin/schedule-plans",e)).data}async function pA(e={}){return(await Re.get("/api/admin/schedule-plans",{params:e})).data}async function xA(e){return(await Re.delete(`/api/admin/schedule-plans/${e}`)).data}async function fp(e={}){return(await Re.get("/admin/attendance-events",{params:e})).data}async function gA(e){return(await Re.post("/api/admin/attendance-events",e)).data}async function yA(e,s){return(await Re.patch(`/api/admin/attendance-events/${e}`,s)).data}async function vA(e,s=!1){return(await Re.delete(`/api/admin/attendance-events/${e}`,{params:{force:s}})).data}async function d_(e={}){return(await Re.get("/api/admin/audit-logs",{params:e})).data}async function bA(e={}){return(await Re.get("/api/admin/notifications/jobs",{params:e})).data}async function _A(e={}){return(await Re.get("/api/admin/notifications/delivery-logs",{params:e})).data}async function NA(e){return(await Re.post(`/api/admin/notifications/jobs/${e}/cancel`)).data}async function jA(e={}){return(await Re.get("/api/admin/notifications/subscriptions",{params:e})).data}async function SA(e={}){return(await Re.get("/api/admin/notifications/admin-subscriptions",{params:e})).data}async function Pf(){return(await Re.get("/api/admin/notifications/push/config")).data}async function wA(){return(await fc.get("/api/admin/notifications/push/config/public")).data}async function EA(){return(await Re.get("/api/admin/notifications/daily-report-health")).data}async function kA(){return(await Re.get("/api/admin/notifications/email-targets")).data}async function TA(e){return(await Re.put("/api/admin/notifications/email-targets",e)).data}async function CA(e={}){return(await Re.post("/api/admin/notifications/email-test",e)).data}async function AA(){return(await Re.get("/api/admin/notifications/admin-self-check")).data}async function MA(){return(await Re.post("/api/admin/notifications/admin-self-test")).data}async function zA(e){return(await Re.post("/api/admin/notifications/admin-device-invite",e)).data}async function OA(e){return(await fc.post("/api/admin/notifications/admin-device-claim/public",e)).data}async function m_(e){return(await Re.post("/api/admin/notifications/admin-device-heal",e)).data}async function h_(e){return(await Re.post("/api/admin/notifications/send",e)).data}async function DA(e={}){return(await Re.get("/api/admin/daily-report-archives",{params:e})).data}function RA(e){if(!e)return null;const s=e.match(/filename\*=UTF-8''([^;]+)/i);if(s?.[1])try{return decodeURIComponent(s[1].trim())}catch{return s[1].trim()}const l=e.match(/filename="?([^";]+)"?/i);return l?.[1]?l[1].trim():null}async function LA(e){return(await Re.get(`/api/admin/daily-report-archives/${e}/download`,{responseType:"blob"})).data}async function PA(e,s){const l=await fc.post(`/api/admin/daily-report-archives/${e}/password-download`,s,{responseType:"blob"}),o=l.headers["content-disposition"];return{blob:l.data,file_name:RA(o)}}async function IA(e){return(await fc.get("/api/admin/attendance-extra-checkin-approval",{params:{token:e}})).data}async function BA(e){return(await fc.post("/api/admin/attendance-extra-checkin-approval/approve",e)).data}async function UA(e,s={}){return(await Re.post(`/api/admin/daily-report-archives/${e}/notify`,s)).data}async function f_(){return(await Re.get("/admin/devices")).data}async function If(e={}){return(await Re.get("/api/admin/employee-device-overview",{params:e})).data}async function p_(e){return(await Re.get("/api/admin/dashboard/employee-snapshot",{params:e})).data}async function FA(e={}){return(await Re.get("/api/admin/control-room/overview",{params:e})).data}async function qA(e,s){return(await Re.patch(`/api/admin/devices/${e}/active`,s)).data}async function x_(e={}){return(await Re.get("/api/admin/leaves",{params:e})).data}async function ZA(e){return(await Re.post("/api/admin/leaves",e)).data}async function HA(e){await Re.delete(`/api/admin/leaves/${e}`)}async function g_(e){return(await Re.post("/api/admin/device-invite",e)).data}async function rc(e){return(await Re.get("/api/admin/monthly/employee",{params:e})).data}async function KA(e){return(await Re.get("/api/admin/monthly/department-summary",{params:e})).data}async function GA(e,s){return(await Re.post("/api/admin/manual-overrides/day",s,{params:{employee_id:e}})).data}async function QA(e,s,l){return(await Re.get("/api/admin/manual-overrides/day",{params:{employee_id:e,year:s,month:l}})).data}async function VA(e){await Re.delete(`/api/admin/manual-overrides/day/${e}`)}async function YA(){return(await Re.get("/api/admin/compliance-settings")).data}async function $A(e){return(await Re.put("/api/admin/compliance-settings",e)).data}async function XA(e){return(await Re.get("/api/admin/exports/puantaj.xlsx",{params:e,responseType:"blob"})).data}async function JA(e){return(await Re.get("/api/admin/export/employee-monthly",{params:e,responseType:"blob"})).data}async function WA(e){return(await Re.get("/api/admin/export/department-monthly",{params:e,responseType:"blob"})).data}async function eM(e){return(await Re.get("/api/admin/export/all-monthly",{params:e,responseType:"blob"})).data}async function tM(e){return(await Re.get("/api/admin/export/puantaj-range.xlsx",{params:e,responseType:"blob"})).data}const ds={signatureText:"YABUJIN",signatureTagline:"Rainwater Systems",buildVersion:"dev"},y_=b.createContext(void 0);function nM({children:e}){const[s,l]=b.useState(null),[o,d]=b.useState(!0),m=b.useCallback(()=>{i_(),l(null)},[]),f=b.useCallback(async()=>{const w=Df();if(!w)return m(),!1;try{const T=await RC({refresh_token:w});Rf(T.access_token,T.refresh_token??w);const O=await Lh();return l(O),!0}catch{return m(),!1}},[m]),g=b.useCallback(async()=>{const w=s_();if(!w){l(null),d(!1);return}if(AC(w)){try{const T=await Lh();l(T)}catch{await f()}finally{d(!1)}return}await f(),d(!1)},[f]);b.useEffect(()=>{g()},[g]),b.useEffect(()=>{const w=()=>{l(null)};return window.addEventListener("auth:logout",w),()=>{window.removeEventListener("auth:logout",w)}},[]);const v=b.useCallback(async(w,T,O,k)=>{const A=await DC({username:w,password:T,mfa_code:O?.trim()||void 0,mfa_recovery_code:k?.trim()||void 0});Rf(A.access_token,A.refresh_token);const z=await Lh();l(z)},[]),_=b.useCallback(async()=>{const w=Df();if(w)try{await LC({refresh_token:w})}catch{}m()},[m]),S=b.useMemo(()=>({user:s,isAuthenticated:!!s,isBootstrapping:o,isSuperAdmin:!!s?.is_super_admin,login:v,logout:_,refreshSession:f,hasPermission:(w,T="read")=>{if(!s)return!1;if(s.is_super_admin)return!0;const O=s.permissions?.[w];return O?T==="write"?!!O.write:!!(O.read||O.write):!1}}),[s,o,v,_,f]);return n.jsx(y_.Provider,{value:S,children:e})}function Yl(){const e=b.useContext(y_);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function pp(e){const s="=".repeat((4-e.length%4)%4),l=`${e}${s}`.replace(/-/g,"+").replace(/_/g,"/"),o=window.atob(l),d=new Uint8Array(o.length);for(let m=0;m<o.length;m+=1)d[m]=o.charCodeAt(m);return d}const aM=[{to:"/management-console",label:"Ynetim Konsolu"},{to:"/control-room",label:"Kontrol Odas"},{to:"/dashboard",label:"Genel Bak"},{to:"/regions",label:"Blgeler",permission:"regions"},{to:"/departments",label:"Departmanlar",permission:"departments"},{to:"/employees",label:"alanlar",permission:"employees"},{to:"/quick-setup",label:"Hzl Ayarlar",permission:"schedule"},{to:"/work-rules",label:"Mesai Kurallar",permission:"work_rules"},{to:"/attendance-events",label:"Yoklama Kaytlar",permission:"attendance_events"},{to:"/devices",label:"Cihazlar",permission:"devices"},{to:"/compliance-settings",label:"Uyumluluk Ayarlar",permission:"compliance"},{to:"/qr-kodlar",label:"QR Kodlar"},{to:"/leaves",label:"zinler",permission:"leaves"},{to:"/reports/employee-monthly",label:"Aylk alan Raporu",permission:"reports"},{to:"/reports/department-summary",label:"Departman zeti",permission:"reports"},{to:"/reports/excel-export",label:"Excel Da Aktar",permission:"reports"},{to:"/notifications",label:"Bildirimler",permission:"audit"},{to:"/audit-logs",label:"Sistem Loglar",permission:"audit"},{to:"/admin-users",label:"Admin Kullanclar",permission:"admin_users"}],sM={"/management-console":"Ynetim Konsolu","/control-room":"Kontrol Odas","/dashboard":"Genel Bak","/regions":"Blgeler","/departments":"Departmanlar","/employees":"alanlar","/quick-setup":"Hzl Ayarlar","/work-rules":"Mesai Kurallar","/attendance-events":"Yoklama Kaytlar","/devices":"Cihazlar","/compliance-settings":"Uyumluluk Ayarlar","/qr-kodlar":"QR Kodlar","/leaves":"zinler","/reports/employee-monthly":"Aylk alan Raporu","/reports/department-summary":"Departman zeti","/reports/excel-export":"Excel Da Aktar","/notifications":"Bildirimler","/audit-logs":"Sistem Loglar","/admin-users":"Admin Kullanclar"},E0="pf_admin_push_vapid_public_key",v_="pf_admin_push_auto_heal_ts",iM=600*1e3;async function rM(){if(!("serviceWorker"in navigator)||!("PushManager"in window)||Notification.permission!=="granted")return;const e=await Pf();if(!e.enabled||!e.vapid_public_key)return;const l=await navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"});let o=await l.pushManager.getSubscription();const d=window.localStorage.getItem(E0);if(o&&d&&d!==e.vapid_public_key){try{await o.unsubscribe()}catch{}o=null}o||(o=await l.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pp(e.vapid_public_key)})),await m_({subscription:o.toJSON(),send_test:!1}),window.localStorage.setItem(E0,e.vapid_public_key),window.sessionStorage.setItem(v_,String(Date.now()))}function lM(){const e=ps(),{user:s,logout:l,hasPermission:o}=Yl(),d=b.useRef(null),m=b.useRef(null),f=b.useRef(!1),g=b.useRef(null),[v,_]=b.useState(!1),[S,w]=b.useState("erie geiliyor..."),T=o("audit","write"),O=aM.filter(K=>!K.permission||o(K.permission)),k=sM[e.pathname]??(e.pathname.startsWith("/employees/")?"alan Detay":"Admin Panel"),A=()=>typeof window<"u"&&window.innerWidth<1024,z=()=>{g.current!==null&&(window.clearTimeout(g.current),g.current=null)},U=(K,V)=>{w(V),_(!0),K==="content"?m.current?.scrollIntoView({behavior:"smooth",block:"start"}):d.current?.scrollIntoView({behavior:"smooth",block:"start"}),z(),g.current=window.setTimeout(()=>{_(!1)},1200)},I=K=>{if(A()){if(e.pathname===K){window.requestAnimationFrame(()=>{U("content","erie geiliyor...")});return}w("erie geiliyor..."),_(!0),f.current=!0}},R=()=>{A()&&window.requestAnimationFrame(()=>{U("sidebar","Sidebar'a dnlyor...")})};return b.useEffect(()=>{A()&&window.scrollTo({top:0})},[]),b.useEffect(()=>{if(!T)return;const K=window.sessionStorage.getItem(v_),V=K?Number(K):0;Number.isFinite(V)&&V>0&&Date.now()-V<iM||rM().catch(()=>{})},[T,s?.admin_user_id,s?.username]),b.useEffect(()=>{f.current&&(f.current=!1,window.requestAnimationFrame(()=>{U("content","erie geiliyor...")}))},[e.pathname]),b.useEffect(()=>()=>{z()},[]),n.jsxs("div",{className:"admin-shell min-h-screen bg-slate-100 lg:grid lg:grid-cols-[228px_minmax(0,1fr)]",children:[v?n.jsxs("div",{className:"mobile-nav-loader lg:hidden",role:"status","aria-live":"polite","aria-label":"Sayfa geii",children:[n.jsxs("div",{className:"mobile-nav-loader-logo","aria-hidden":"true",children:[n.jsx("div",{className:"mobile-nav-loader-halo"}),n.jsx("div",{className:"mobile-nav-loader-ring"}),n.jsx("div",{className:"mobile-nav-loader-spark"}),n.jsxs("div",{className:"mobile-nav-loader-core",children:[n.jsx("span",{className:"mobile-nav-loader-brand",children:"YABUJIN"}),n.jsx("span",{className:"mobile-nav-loader-sub",children:"CONTROL CORE"})]})]}),n.jsx("p",{className:"mobile-nav-loader-text",children:S})]}):null,n.jsxs("aside",{ref:d,className:"admin-sidebar flex flex-col px-3 py-6 text-slate-100 shadow-panel xl:px-4",children:[n.jsx("h1",{className:"px-2 text-xl font-bold tracking-tight",children:"Puantaj Admin"}),n.jsx("p",{className:"px-2 pt-1 text-xs text-slate-400",children:"FastAPI Ynetim Paneli"}),n.jsx("nav",{className:"mt-6 flex flex-col gap-1",children:O.map(K=>n.jsx(sb,{to:K.to,onClick:()=>I(K.to),className:({isActive:V})=>`rounded-lg px-3 py-2 text-sm font-medium transition ${V?"bg-brand-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800/85 hover:text-white"}`,children:K.label},K.to))}),n.jsxs("div",{className:"admin-signature",children:[n.jsx("p",{className:"admin-signature-main",children:ds.signatureText}),n.jsx("p",{className:"admin-signature-sub",children:ds.signatureTagline})]})]}),n.jsxs("div",{ref:m,className:"flex min-h-screen min-w-0 flex-col",children:[n.jsx("header",{className:"admin-topbar border-b border-slate-200 bg-white/90 px-4 py-4 backdrop-blur sm:px-6",children:n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:k}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Oturum: ",s?.username??s?.sub??"admin"," / Rol: ",s?.role??"admin"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:R,className:"btn-animated rounded-lg border border-slate-300 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-100 lg:hidden",children:"Sidebar'a Git"}),n.jsx("button",{type:"button",onClick:()=>{l()},className:"btn-animated rounded-lg bg-slate-900 px-4 py-2 text-sm font-medium text-white hover:bg-slate-700",children:"k"})]})]})}),n.jsx("main",{className:"admin-main min-w-0 flex-1 p-4 sm:p-6",children:n.jsx(Jf,{})}),n.jsxs("footer",{className:"admin-footer-signature px-6 pb-4 pt-1 text-center text-xs tracking-wide text-slate-500",children:[n.jsx("span",{className:"admin-footer-brand",children:ds.signatureText}),n.jsx("span",{className:"admin-footer-sub",children:ds.signatureTagline}),n.jsxs("span",{className:"admin-footer-build",children:["BUILD: ",ds.buildVersion]})]})]})]})}function oM(){const{isAuthenticated:e,isBootstrapping:s}=Yl(),l=ps();if(s)return n.jsx("div",{className:"flex min-h-screen items-center justify-center text-slate-600",children:"Oturum kontrol ediliyor..."});if(!e){const o=`${l.pathname}${l.search}`;return n.jsx(Xf,{to:"/login",replace:!0,state:{from:o}})}return n.jsx(Jf,{})}function cM(){const{isAuthenticated:e,isBootstrapping:s}=Yl();return s?n.jsx("div",{className:"flex min-h-screen items-center justify-center text-slate-600",children:"Ykleniyor..."}):e?n.jsx(Xf,{to:"/dashboard",replace:!0}):n.jsx(Jf,{})}const k0={INVALID_CREDENTIALS:"Kullanici adi veya sifre hatali.",TOO_MANY_ATTEMPTS:"Cok fazla deneme yaptiniz. Lutfen daha sonra tekrar deneyin.",INVALID_TOKEN:"Oturum gecersiz veya suresi dolmus. Lutfen tekrar giris yapin.",FORBIDDEN:"Bu islem icin yetkiniz yok.",INTERNAL_ERROR:"Sunucu hatasi olustu. Lutfen tekrar deneyin.",MFA_REQUIRED:"MFA kodu zorunlu. Authenticator kodunu girin.",INVALID_MFA_CODE:"MFA kodu gecersiz. Tekrar deneyin.",MFA_SETUP_REQUIRED:"Bu hesap icin MFA kurulumu tamamlanmamis.",MFA_SETUP_NOT_STARTED:"Once MFA kurulumunu baslatin.",MFA_NOT_ENABLED:"Bu hesapta MFA aktif degil.",ARCHIVE_DECRYPT_FAILED:"Arsiv dosyasi acilamadi. Sunucu anahtarini kontrol edin.",EXTRA_CHECKIN_APPROVAL_NOT_FOUND:"Ek giris onay talebi bulunamadi.",EXTRA_CHECKIN_APPROVAL_EXPIRED:"Ek giris onay talebinin suresi dolmus.",INVITE_ATTEMPTS_EXCEEDED:"Davet linkinin deneme limiti doldu. Yeni bir link uretin.",INVITE_CONTEXT_MISMATCH:"Davet linki ayni cihaz/tarayici baglaminda kullanilmalidir.",INVITE_RETRY_TOO_FAST:"Cok hizli deneme yaptiniz. Birkac saniye bekleyip tekrar deneyin.",INVITE_TTL_TOO_LONG:"Davet suresi izin verilen limiti asiyor.",ADMIN_PUSH_SUBSCRIPTION_REQUIRED:"Aktif admin push aboneligi yok. Once bir admin cihazi claim edilmelidir."};function He(e,s){if(un.isAxiosError(e)){const l=e.response?.data;if(typeof l=="string")return{message:l};const o=l?.error?.code,d=l?.error?.request_id,m=l?.error?.message;if(o&&k0[o])return{code:o,requestId:d,message:k0[o]};if(m)return{code:o,requestId:d,message:m};if(e.message)return{message:e.message}}return e instanceof Error&&e.message?{message:e.message}:{message:s}}function uM(e,s){return He(e,s).message}const T0="pf_admin_push_vapid_public_key";function dM(){const e=Kl(),[s]=vd(),l=b.useMemo(()=>s.get("token")?.trim()??"",[s]),[o,d]=b.useState("admin"),[m,f]=b.useState(""),[g,v]=b.useState(!1),[_,S]=b.useState(null),[w,T]=b.useState(null),[O,k]=b.useState(null),A=async z=>{if(z.preventDefault(),T(null),k(null),S(null),!l){T("Davet token bulunamad. Ltfen yeni balant isteyin.");return}const U=o.trim(),I=m.trim();if(!U||!I){T("Admin kullanc ad ve ifre zorunludur.");return}try{v(!0);const R=await wA();if(!R.enabled||!R.vapid_public_key){T("Push bildirim servisi yaplandrlmam.");return}if(!("serviceWorker"in navigator)||!("PushManager"in window)){T("Bu tarayc push bildirimlerini desteklemiyor.");return}if((Notification.permission==="granted"?"granted":await Notification.requestPermission())!=="granted"){T("Bildirim izni verilmedi. Cihaz balama tamamlanamad.");return}const ee=await navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"});let q=await ee.pushManager.getSubscription();const Y=window.localStorage.getItem(T0);if(q&&Y&&Y!==R.vapid_public_key){try{await q.unsubscribe()}catch{}q=null}q||(q=await ee.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pp(R.vapid_public_key)})),await OA({token:l,username:U,password:I,subscription:q.toJSON()}),window.localStorage.setItem(T0,R.vapid_public_key),S("Admin cihaz baaryla baland. Bildirimler bu cihaza gnderilecek."),window.setTimeout(()=>{e("/login",{replace:!0})},1e3)}catch(R){const K=He(R,"Cihaz balama ilemi baarsz oldu.");T(K.message),k(K.requestId??null)}finally{v(!1)}};return n.jsxs("div",{className:"mx-auto mt-10 w-full max-w-lg rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[n.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Admin Cihaz Balama"}),n.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Bu cihaz admin bildirimleri iin kaydetmek adna hesabnzla giri yapn."}),n.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:["Token: ",l||"Bulunamad"]}),n.jsxs("form",{className:"mt-4 space-y-3",onSubmit:A,children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Kullanc ad",n.jsx("input",{value:o,onChange:z=>d(z.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",autoComplete:"username"})]}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["ifre",n.jsx("input",{type:"password",value:m,onChange:z=>f(z.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",autoComplete:"current-password"})]}),w?n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:[n.jsx("p",{children:w}),O?n.jsxs("p",{className:"mt-1 text-xs",children:["request_id: ",O]}):null]}):null,_?n.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:_}):null,n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"submit",disabled:g,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:g?"Balanyor...":"Cihaz Bala"}),n.jsx(us,{to:"/login",className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Login ekran"})]})]})]})}function qu(e){return`#${e.id} - ${e.full_name}`}function hs({label:e,employees:s,value:l,onChange:o,placeholder:d="alan ad veya ID yazn...",emptyLabel:m="Seiniz",helperText:f,disabled:g=!1,className:v=""}){const _=b.useMemo(()=>s.find(z=>String(z.id)===l),[s,l]),[S,w]=b.useState(_?qu(_):""),[T,O]=b.useState(!1);b.useEffect(()=>{if(_){w(qu(_));return}l||w("")},[_,l]);const k=b.useMemo(()=>{const z=S.trim().toLowerCase();return(z?s.filter(I=>{const R=I.full_name.toLowerCase().includes(z),K=String(I.id).includes(z.replace("#",""));return R||K}):s).slice(0,60)},[s,S]),A=z=>{o(String(z.id)),w(qu(z)),O(!1)};return n.jsxs("div",{className:v,children:[n.jsxs("label",{className:"text-sm text-slate-700",children:[e,n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",value:S,disabled:g,onFocus:()=>O(!0),onChange:z=>{const U=z.target.value;w(U),O(!0),U.trim()||o("")},onBlur:()=>{window.setTimeout(()=>O(!1),120)},placeholder:d,className:"w-full rounded-lg border border-slate-300 px-3 py-2"}),n.jsx("button",{type:"button",disabled:g,onClick:()=>{o(""),w(""),O(!1)},className:"absolute right-2 top-1/2 -translate-y-1/2 rounded px-1 text-xs text-slate-500 hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-50",children:"Temizle"}),T?n.jsxs("div",{className:"absolute z-20 mt-1 max-h-72 w-full overflow-y-auto rounded-lg border border-slate-200 bg-white shadow-lg",children:[n.jsx("button",{type:"button",onMouseDown:z=>z.preventDefault(),onClick:()=>{o(""),w(""),O(!1)},className:"flex w-full items-center justify-between border-b border-slate-100 px-3 py-2 text-left text-sm text-slate-600 hover:bg-slate-50",children:n.jsx("span",{children:m})}),k.map(z=>n.jsxs("button",{type:"button",onMouseDown:U=>U.preventDefault(),onClick:()=>A(z),className:"flex w-full items-center justify-between px-3 py-2 text-left text-sm hover:bg-slate-50",children:[n.jsx("span",{children:qu(z)}),z.is_active?null:n.jsx("span",{className:"rounded-full bg-amber-100 px-2 py-0.5 text-[11px] font-semibold text-amber-700",children:"Pasif"})]},z.id)),k.length===0?n.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"Sonu bulunamad."}):null]}):null]})]}),f?n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:f}):null]})}function wt({message:e}){return n.jsx("div",{className:"error-block admin-panel rounded-xl border border-rose-200 bg-rose-50 p-4 text-sm text-rose-700 shadow-sm",children:e})}function Gt({label:e="Ykleniyor..."}){return n.jsxs("div",{className:"loading-block admin-panel rounded-xl border border-slate-200 bg-white p-8 text-center text-sm text-slate-600 shadow-sm",children:[n.jsx("span",{className:"loading-spinner","aria-hidden":"true"}),n.jsx("span",{children:e})]})}function mM(e){return Number.isFinite(e)?Math.max(0,Math.floor(e)):0}function b_(e){const s=mM(e),l=Math.floor(s/60),o=s%60;return{hours:l,minutes:o}}function hM(e){const{hours:s,minutes:l}=b_(e),o=String(s).padStart(2,"0"),d=String(l).padStart(2,"0");return`${o}:${d}`}function fM(e){const{hours:s,minutes:l}=b_(e);return s===0?`${l}dk`:`${s}s ${l}dk`}function ad(e){return`${hM(e)} (${fM(e)})`}function qe({minutes:e}){return n.jsx("span",{className:"whitespace-nowrap",children:ad(e)})}function er({open:e,title:s,onClose:l,children:o,placement:d="center",maxWidthClass:m="max-w-xl"}){if(!e)return null;const f=d==="right";return n.jsx("div",{className:`fixed inset-0 z-50 flex bg-slate-900/45 ${f?"items-stretch justify-end p-0 sm:p-3":"items-center justify-center px-4"}`,children:n.jsxs("div",{className:`admin-panel page-enter w-full border border-slate-200 bg-white p-5 shadow-2xl ${f?`${m} h-full overflow-y-auto rounded-none sm:rounded-l-2xl`:`${m} rounded-xl`}`,children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:s}),n.jsx("button",{type:"button",onClick:l,className:"btn-animated rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Kapat"})]}),o]})})}function Zn({title:e,description:s,action:l}){return n.jsxs("div",{className:"mb-5 flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:e}),s?n.jsx("p",{className:"mt-1 text-sm text-slate-600",children:s}):null]}),l]})}function Le({children:e,className:s=""}){return n.jsx("section",{className:`admin-panel min-w-0 rounded-xl border border-slate-200 bg-white p-5 shadow-sm ${s}`,children:e})}function __({suspicious:e,label:s="Supheli",tooltip:l}){return e?n.jsx("span",{className:"status-badge status-badge-incomplete",title:l,children:s}):n.jsx("span",{className:"status-badge status-badge-neutral",children:"Normal"})}const pM={DUPLICATE_EVENT:{label:"Mkerrer kayt",description:"Ayn gn iinde ayn tipte (IN/OUT) birden fazla kayt tespit edildi.",tone:"warning"},MANUAL_CHECKOUT:{label:"Manuel k",description:"k kayd alan tarafndan manuel butonla oluturuldu.",tone:"info"},NEEDS_SHIFT_REVIEW:{label:"Vardiya kontrol gerekli",description:"Otomatik atanan vardiya ile giri saati arasnda yksek fark var. K kontrol etmelidir.",tone:"warning"},SHIFT_WEEKLY_RULE_OVERRIDE:{label:"Vardiya-kural akmas",description:"Ayn gn iin haftalk gn kural ile vardiya sresi/mola bilgisi farkl. Hesaplamada vardiya kural nceliklendirildi.",tone:"warning"},CROSS_MIDNIGHT_CHECKOUT:{label:"Gece vardiyas k",description:"Giri bir gn, k ertesi gn alnm. Sistem k nceki gnn mesaisine balayarak hesaplad.",tone:"info"},RULE_SOURCE_MANUAL_OVERRIDE:{label:"Kural manuel seildi",description:"Bu gn iin kural kayna K tarafndan manuel olarak seildi.",tone:"info"},RULE_OVERRIDE_INVALID:{label:"Geersiz manuel kural",description:"Manuel seilen kural kayna o gn iin uygulanamad; sistem otomatik kurala dnd.",tone:"warning"},UNDERWORKED:{label:"Eksik alma",description:"Net alma sresi, o gn iin planlanan srenin altnda kald.",tone:"warning"},SECOND_CHECKIN_APPROVED:{label:"2. giri admin onay",description:"Gnlk maksimum vardiya dngs tamamlandktan sonra, ek giri kayd admin onay ile ald.",tone:"info"},LOCATION_NO_LOCATION:{label:"Konum yok",description:"Kayt srasnda konum bilgisi gnderilmedi veya alnamad.",tone:"warning"},LOCATION_UNVERIFIED:{label:"Ev d konum",description:"Kayt, tanml ev konumu yarap dnda alnd.",tone:"warning"},ADMIN_MANUAL_EVENT:{label:"Admin manuel kayt",description:"Kayt admin tarafndan manuel olarak eklenmi/dzenlenmi.",tone:"info"},EKSIK_GUN:{label:"Eksik gn",description:"Gn iinde giri veya k kayd eksik olduu iin gn tamamlanmam grnyor.",tone:"danger"},MISSING_IN:{label:"Giri eksik",description:"Bu gn iin giri (IN) kayd bulunamad.",tone:"danger"},MISSING_OUT:{label:"k eksik",description:"Bu gn iin k (OUT) kayd bulunamad.",tone:"danger"},OPEN_SHIFT_ACTIVE:{label:"Ak vardiya devam ediyor",description:"Gn iinde bir ktan sonra yeniden giri yapld ve son giri iin henz k kayd olumad.",tone:"warning"},DAILY_MAX_EXCEEDED:{label:"Gnlk sre ald",description:"Gnlk azami alma sresi (11 saat) ald.",tone:"danger"},MIN_BREAK_NOT_MET:{label:"Yasal mola yetersiz",description:"Tanml mola, yasal minimum mola sresinin altnda kald.",tone:"warning"},NIGHT_WORK_EXCEEDED:{label:"Gece alma snr ald",description:"Gece alma sresi yasal snrn zerinde grnyor.",tone:"danger"},ANNUAL_OVERTIME_CAP_EXCEEDED:{label:"Yllk fazla mesai limiti ald",description:"alann yllk fazla mesai limiti ald.",tone:"danger"}};function Va(e){return pM[e]??{label:e,description:`${e} bayra iin aklama tanml deil.`,tone:"neutral"}}function xM(){return["DAILY_MAX_EXCEEDED","MIN_BREAK_NOT_MET","NIGHT_WORK_EXCEEDED","ANNUAL_OVERTIME_CAP_EXCEEDED","SHIFT_WEEKLY_RULE_OVERRIDE","UNDERWORKED"]}function gM(e){return e==="danger"||e==="warning"?"status-badge status-badge-incomplete":e==="info"?"status-badge status-badge-leave":"status-badge status-badge-neutral"}function N_({reasons:e}){return e.length===0?n.jsx("span",{className:"status-badge status-badge-neutral",children:"Sorun yok"}):n.jsx("div",{className:"flex flex-wrap gap-1",children:e.map(s=>n.jsx("span",{title:Va(s).description,className:gM(Va(s).tone),children:Va(s).label},s))})}const j_=b.createContext(void 0);function yM(e){return e==="success"?"border-emerald-200 bg-emerald-50 text-emerald-900":e==="error"?"border-rose-200 bg-rose-50 text-rose-900":"border-sky-200 bg-sky-50 text-sky-900"}function vM({children:e}){const[s,l]=b.useState([]),o=b.useCallback(f=>{l(g=>g.map(v=>v.id===f?{...v,isClosing:!0}:v)),window.setTimeout(()=>{l(g=>g.filter(v=>v.id!==f))},170)},[]),d=b.useCallback(f=>{const g=crypto.randomUUID(),v={id:g,title:f.title,description:f.description,durationMs:f.durationMs??3500,variant:f.variant??"info"};l(_=>[..._,v]),window.setTimeout(()=>{o(g)},v.durationMs)},[o]),m=b.useMemo(()=>({pushToast:d,removeToast:o}),[d,o]);return n.jsxs(j_.Provider,{value:m,children:[e,n.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 flex w-full max-w-sm flex-col gap-2",children:s.map(f=>n.jsx("div",{className:`toast-card pointer-events-auto rounded-lg border px-4 py-3 shadow-lg ${yM(f.variant)} ${f.isClosing?"is-leaving":""}`,role:"status",children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold",children:f.title}),f.description?n.jsx("p",{className:"mt-1 text-xs",children:f.description}):null]}),n.jsx("button",{type:"button",onClick:()=>o(f.id),className:"rounded px-2 py-1 text-xs font-medium opacity-80 hover:opacity-100",children:"Kapat"})]})},f.id))})]})}function oa(){const e=b.useContext(j_);return e||{pushToast:()=>{},removeToast:()=>{}}}function bM(e){const[s,l,o]=e.split("-"),d=Number(s),m=Number(l),f=Number(o);return!Number.isInteger(d)||!Number.isInteger(m)||!Number.isInteger(f)?new Date("invalid"):new Date(Date.UTC(d,m-1,f))}function _M(e){return e.leave_type==="PUBLIC_HOLIDAY"||e.flags.includes("PUBLIC_HOLIDAY")}function NM(e){return e.worked_minutes>0?!0:!!(e.in||e.out)}function Ad(e){if(_M(e))return{key:"SPECIAL",label:"zel Gn"};const s=bM(e.date);return!Number.isNaN(s.getTime())&&s.getUTCDay()===0?{key:"SUNDAY",label:"Pazar"}:{key:"WEEKDAY",label:"Hafta i"}}function xp(e){const s={workedMinutes:0,overtimeMinutes:0,planOvertimeMinutes:0,legalExtraWorkMinutes:0,workedDayCount:0,overtimeDayCount:0,planOvertimeDayCount:0,sundayWorkedDayCount:0,weekdayWorkedDayCount:0,specialWorkedDayCount:0,sundayWorkedMinutes:0,weekdayWorkedMinutes:0,specialWorkedMinutes:0};for(const l of e){const o=l.plan_overtime_minutes??l.overtime_minutes,d=l.legal_extra_work_minutes??0,m=l.legal_overtime_minutes??l.overtime_minutes;if(s.workedMinutes+=l.worked_minutes,s.planOvertimeMinutes+=o,s.legalExtraWorkMinutes+=d,s.overtimeMinutes+=m,NM(l)){s.workedDayCount+=1;const g=Ad(l);g.key==="SPECIAL"?(s.specialWorkedDayCount+=1,s.specialWorkedMinutes+=l.worked_minutes):g.key==="SUNDAY"?(s.sundayWorkedDayCount+=1,s.sundayWorkedMinutes+=l.worked_minutes):(s.weekdayWorkedDayCount+=1,s.weekdayWorkedMinutes+=l.worked_minutes)}o>0&&(s.planOvertimeDayCount+=1),m>0&&(s.overtimeDayCount+=1)}return s}const jM=[{value:"ALL",label:"Tm konum durumlar"},{value:"VERIFIED_HOME",label:"Evde onayl"},{value:"UNVERIFIED_LOCATION",label:"Ev d"},{value:"NO_LOCATION",label:"Konum yok"}],SM=[{value:"ALL",label:"Tm tipler"},{value:"IN",label:"IN (Giri)"},{value:"OUT",label:"OUT (k)"}],Zu={employeeId:"",departmentId:"",dateFrom:"",dateTo:"",eventType:"ALL",locationStatus:"ALL",duplicatesOnly:!1,suspiciousOnly:!1,includeDeleted:!1,limit:"200"},wM="Europe/Istanbul",C0=[20,35,50,100];function Wo(e,s){return e[s]===!0}function A0(e){if(typeof e=="number"&&Number.isInteger(e)&&e>0)return e;if(typeof e=="string"){const s=Number(e.trim());if(Number.isInteger(s)&&s>0)return s}return null}function Hu(e){return new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"medium",timeZone:wM}).format(new Date(e))}function EM(e){const s=new Date(e);return new Date(s.getTime()-s.getTimezoneOffset()*6e4).toISOString().slice(0,16)}function kM(e){return e==="VERIFIED_HOME"?"Evde onayl":e==="UNVERIFIED_LOCATION"?"Ev d":"Konum yok"}function Ph(e){const s=[],l=e.flags.reason==="home_location_not_set";return Wo(e.flags,"DUPLICATE_EVENT")&&s.push("DUPLICATE_EVENT"),Wo(e.flags,"MANUAL_CHECKOUT")&&s.push("MANUAL_CHECKOUT"),Wo(e.flags,"NEEDS_SHIFT_REVIEW")&&s.push("NEEDS_SHIFT_REVIEW"),e.location_status==="NO_LOCATION"&&s.push("LOCATION_NO_LOCATION"),e.location_status==="UNVERIFIED_LOCATION"&&!l&&s.push("LOCATION_UNVERIFIED"),(e.source==="MANUAL"||e.created_by_admin||Wo(e.flags,"ADMIN_MANUAL"))&&s.push("ADMIN_MANUAL_EVENT"),s}function Ih(e){const s=Number(e);return Number.isInteger(s)&&s>0?s:null}function TM(e){return e.length?e.map(s=>`${Va(s).label} (${s})`).join(", "):"-"}function CM(){const e=la(),{pushToast:s}=oa(),[l,o]=b.useState(Zu),[d,m]=b.useState(Zu),[f,g]=b.useState(""),[v,_]=b.useState("IN"),[S,w]=b.useState(""),[T,O]=b.useState(""),[k,A]=b.useState(""),[z,U]=b.useState(!1),[I,R]=b.useState(null),[K,V]=b.useState("IN"),[ee,q]=b.useState(""),[Y,$]=b.useState(""),[ie,fe]=b.useState(""),[ue,je]=b.useState(!1),[X,oe]=b.useState(!1),[Z,M]=b.useState(null),[ne,Se]=b.useState(!1),[be,D]=b.useState(35),[te,P]=b.useState(1),[ce,de]=b.useState(35),[Ee,De]=b.useState(1),Ge=Ze({queryKey:["employees","all"],queryFn:()=>Ts({status:"all",include_inactive:!0})}),pe=Ze({queryKey:["departments"],queryFn:fi}),Ke=Ze({queryKey:["department-shifts","all"],queryFn:()=>pc({active_only:!1})}),_e=b.useMemo(()=>{const W=Number(d.employeeId),Ve=Number(d.departmentId),zt=Number(d.limit);return{employee_id:W>0?W:void 0,department_id:Ve>0?Ve:void 0,start_date:d.dateFrom||void 0,end_date:d.dateTo||void 0,type:d.eventType==="ALL"?void 0:d.eventType,location_status:d.locationStatus==="ALL"?void 0:d.locationStatus,duplicates_only:d.duplicatesOnly||void 0,include_deleted:d.includeDeleted||void 0,limit:zt>0?zt:200}},[d]),lt=Ze({queryKey:["attendance-events",_e],queryFn:()=>fp(_e)}),dt=(Ee-1)*ce,ze=Ze({queryKey:["audit-logs","attendance-events",Ee,ce],queryFn:()=>d_({entity_type:"attendance_event",offset:dt,limit:ce})}),ot=Number(d.employeeId),bt=b.useMemo(()=>{const W=d.dateFrom||d.dateTo;if(!W)return new Date;const Ve=new Date(`${W}T00:00:00`);return Number.isNaN(Ve.getTime())?new Date:Ve},[d.dateFrom,d.dateTo]),It=Ze({queryKey:["attendance-events-monthly-summary",ot,bt.getFullYear(),bt.getMonth()+1],queryFn:()=>rc({employee_id:ot,year:bt.getFullYear(),month:bt.getMonth()+1}),enabled:Number.isInteger(ot)&&ot>0,staleTime:15e3}),Bt=Xe({mutationFn:gA,onSuccess:()=>{s({variant:"success",title:"Manuel event kaydedildi",description:"Kayt baaryla oluturuldu."}),O(""),A(""),U(!1),e.invalidateQueries({queryKey:["attendance-events"]}),e.invalidateQueries({queryKey:["audit-logs"]})},onError:W=>{s({variant:"error",title:"Kayt oluturulamad",description:He(W,"lem baarsz.").message})}}),rn=Xe({mutationFn:({eventId:W,payload:Ve})=>yA(W,Ve),onSuccess:()=>{s({variant:"success",title:"Event gncellendi",description:"Deiiklikler kaydedildi."}),R(null),e.invalidateQueries({queryKey:["attendance-events"]}),e.invalidateQueries({queryKey:["audit-logs"]})},onError:W=>{s({variant:"error",title:"Event gncellenemedi",description:He(W,"lem baarsz.").message})}}),ae=Xe({mutationFn:({eventId:W,force:Ve})=>vA(W,Ve),onSuccess:()=>{s({variant:"success",title:"Event soft silindi",description:"Kayt pasife alnd."}),M(null),Se(!1),e.invalidateQueries({queryKey:["attendance-events"]}),e.invalidateQueries({queryKey:["audit-logs"]})},onError:W=>{s({variant:"error",title:"Silme baarsz",description:He(W,"lem baarsz.").message})}}),ke=Ge.data??[],Be=pe.data??[],at=Ke.data??[],se=lt.data??[],Ie=b.useMemo(()=>(It.data?.days??[]).filter(Ve=>!(d.dateFrom&&Ve.date<d.dateFrom||d.dateTo&&Ve.date>d.dateTo)),[It.data?.days,d.dateFrom,d.dateTo]),_t=b.useMemo(()=>xp(Ie),[Ie]),Dt=Math.max(1,Math.ceil(Ie.length/be)),Rt=(te-1)*be,ft=b.useMemo(()=>Ie.slice(Rt,Rt+be),[Ie,Rt,be]),Ut=Ie.length===0?0:Rt+1,Ne=Ie.length===0?0:Math.min(Rt+be,Ie.length),Je=b.useMemo(()=>new Map(ke.map(W=>[W.id,W])),[ke]),nt=b.useMemo(()=>new Map(ke.map(W=>[W.id,W.full_name])),[ke]),Nt=b.useMemo(()=>new Map(Be.map(W=>[W.id,W.name])),[Be]),Ft=b.useMemo(()=>new Map(at.map(W=>[W.id,W])),[at]),jt=b.useMemo(()=>Je.get(Number(f)),[Je,f]),fn=b.useMemo(()=>jt?.department_id?at.filter(W=>W.department_id===jt.department_id):at,[jt?.department_id,at]),Jn=b.useMemo(()=>{if(!I)return at;const W=Je.get(I.employee_id);return W?.department_id?at.filter(Ve=>Ve.department_id===W.department_id):at},[Je,I,at]),ln=b.useMemo(()=>d.suspiciousOnly?se.filter(W=>Ph(W).length>0):se,[se,d.suspiciousOnly]),xt=ze.data?.items??[],Vt=ze.data?.total??xt.length,Tn=Math.max(1,Math.ceil(Vt/ce)),Rn=Vt===0?0:dt+1,Cn=Vt===0?0:Math.min(dt+xt.length,Vt);b.useEffect(()=>{P(1)},[ot,d.dateFrom,d.dateTo,be]),b.useEffect(()=>{P(W=>Math.min(W,Dt))},[Dt]),b.useEffect(()=>{De(1)},[ce]),b.useEffect(()=>{De(W=>Math.min(W,Tn))},[Tn]);const Lt=()=>m({...l}),va=()=>{o(Zu),m(Zu)},An=W=>{W.preventDefault();const Ve=Ih(f);if(!Ve||!S){s({variant:"error",title:"Eksik alan",description:"alan ve tarih/saat zorunludur."});return}const zt=Ih(k);Bt.mutate({employee_id:Ve,type:v,ts_utc:new Date(S).toISOString(),note:T||void 0,shift_id:zt??void 0,allow_duplicate:z})},Hn=W=>{R(W),V(W.type),q(EM(W.ts_utc)),$(W.note??""),je(!1),oe(!1),fe(String(A0(W.flags.SHIFT_ID)??""))},Mn=W=>{if(W.preventDefault(),!I||!ee)return;const Ve=Ih(ie);rn.mutate({eventId:I.id,payload:{type:K,ts_utc:new Date(ee).toISOString(),note:Y||null,shift_id:Ve??void 0,allow_duplicate:ue,force_edit:X}})};return Ge.isLoading||pe.isLoading||Ke.isLoading?n.jsx(Gt,{}):Ge.isError||pe.isError||Ke.isError?n.jsx(wt,{message:"alan/departman/vardiya bilgileri alnamad."}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"Yoklama Kaytlar",description:"Manuel event ekleme, vardiya dzeltme, soft silme ve audit takibi."}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:[n.jsx(hs,{label:"alan",employees:ke,value:l.employeeId,onChange:W=>o(Ve=>({...Ve,employeeId:W})),emptyLabel:"Tm",helperText:"Ad-soyad veya ID ile arayn."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:l.departmentId,onChange:W=>o(Ve=>({...Ve,departmentId:W.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tm"}),Be.map(W=>n.jsxs("option",{value:W.id,children:["#",W.id," - ",W.name]},W.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang",n.jsx("input",{type:"date",value:l.dateFrom,onChange:W=>o(Ve=>({...Ve,dateFrom:W.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti",n.jsx("input",{type:"date",value:l.dateTo,onChange:W=>o(Ve=>({...Ve,dateTo:W.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Event tipi",n.jsx("select",{value:l.eventType,onChange:W=>o(Ve=>({...Ve,eventType:W.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:SM.map(W=>n.jsx("option",{value:W.value,children:W.label},W.value))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Konum",n.jsx("select",{value:l.locationStatus,onChange:W=>o(Ve=>({...Ve,locationStatus:W.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:jM.map(W=>n.jsx("option",{value:W.value,children:W.label},W.value))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Limit",n.jsx("input",{type:"number",value:l.limit,onChange:W=>o(Ve=>({...Ve,limit:W.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("div",{className:"flex flex-col justify-end gap-2 text-sm text-slate-700",children:[n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:l.duplicatesOnly,onChange:W=>o(Ve=>({...Ve,duplicatesOnly:W.target.checked}))}),"Sadece mkerrer"]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:l.suspiciousOnly,onChange:W=>o(Ve=>({...Ve,suspiciousOnly:W.target.checked}))}),"Sadece pheli"]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:l.includeDeleted,onChange:W=>o(Ve=>({...Ve,includeDeleted:W.target.checked}))}),"Silinenleri gster"]})]})]}),n.jsxs("div",{className:"mt-4 flex gap-2",children:[n.jsx("button",{type:"button",onClick:Lt,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),n.jsx("button",{type:"button",onClick:va,className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Manuel Event Ekle"}),n.jsxs("form",{onSubmit:An,className:"mt-3 grid gap-3 md:grid-cols-3",children:[n.jsx(hs,{label:"alan",employees:ke,value:f,onChange:g,emptyLabel:"Seiniz",helperText:"Manuel kayt iin alan sein.",className:"md:col-span-2"}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Event tipi",n.jsxs("select",{value:v,onChange:W=>_(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"IN",children:"IN (Giri)"}),n.jsx("option",{value:"OUT",children:"OUT (k)"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Tarih/saat",n.jsx("input",{type:"datetime-local",value:S,onChange:W=>w(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya (opsiyonel)",n.jsxs("select",{value:k,onChange:W=>A(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Otomatik/bo"}),fn.map(W=>n.jsxs("option",{value:W.id,children:["#",W.id," - ",W.name," (",W.start_time_local,"-",W.end_time_local,")"]},W.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-3",children:["Not",n.jsx("input",{type:"text",value:T,onChange:W=>O(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 md:col-span-3",children:[n.jsx("input",{type:"checkbox",checked:z,onChange:W=>U(W.target.checked)}),"Sra akyorsa duplicate olarak kaydet"]}),n.jsx("div",{className:"md:col-span-3",children:n.jsx("button",{type:"submit",disabled:Bt.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Bt.isPending?"Kaydediliyor...":"Manuel event kaydet"})})]})]}),n.jsxs(Le,{children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Puantaj Analiz Ozeti"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Secili calisan icin saat bazli net calisma, fazla mesai ve gun tipi kirilimlari."})]}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Ay: ",bt.getFullYear(),"-",String(bt.getMonth()+1).padStart(2,"0")]})]}),ot?It.isLoading?n.jsx(Gt,{}):It.isError?n.jsx(wt,{message:He(It.error,"Puantaj analiz ozeti alinamadi.").message}):n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-5",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Net calisma"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:n.jsx(qe,{minutes:_t.workedMinutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Plan ustu sure"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:n.jsx(qe,{minutes:_t.planOvertimeMinutes})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[_t.planOvertimeDayCount," gun"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yasal fazla mesai"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:n.jsx(qe,{minutes:_t.overtimeMinutes})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[_t.overtimeDayCount," gun"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Calisilan gun"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:_t.workedDayCount}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Hafta ici: ",_t.weekdayWorkedDayCount]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Pazar / Ozel"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[_t.sundayWorkedDayCount," / ",_t.specialWorkedDayCount," gun"]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-600",children:[n.jsxs("p",{children:["Gosterilen satir: ",Ut,"-",Ne," / ",Ie.length]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:["Sayfa basi",n.jsx("select",{value:be,onChange:W=>D(Number(W.target.value)),className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-800",children:C0.map(W=>n.jsx("option",{value:W,children:W},W))})]})]}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"min-w-[1100px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Tarih"}),n.jsx("th",{className:"py-2",children:"Gun Tipi"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Giris"}),n.jsx("th",{className:"py-2",children:"Cikis"}),n.jsx("th",{className:"py-2",children:"Calisma"}),n.jsx("th",{className:"py-2",children:"Plan Ustu"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Sure"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"}),n.jsx("th",{className:"py-2",children:"Bayraklar"})]})}),n.jsx("tbody",{children:ft.map(W=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:W.date}),n.jsx("td",{className:"py-2",children:Ad(W).label}),n.jsx("td",{className:"py-2",children:W.status}),n.jsx("td",{className:"py-2",children:W.in?Hu(W.in):"-"}),n.jsx("td",{className:"py-2",children:W.out?Hu(W.out):"-"}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:W.worked_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:W.plan_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:W.legal_extra_work_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:W.legal_overtime_minutes})}),n.jsx("td",{className:"py-2 text-xs text-slate-600",children:TM(W.flags)})]},W.date))})]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Sayfa ",te," / ",Dt]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>P(W=>Math.max(1,W-1)),disabled:te<=1,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Onceki"}),n.jsx("button",{type:"button",onClick:()=>P(W=>Math.min(Dt,W+1)),disabled:te>=Dt,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Sonraki"})]})]}),Ie.length===0?n.jsx("p",{className:"text-sm text-slate-500",children:"Secili aralikta puantaj gun kaydi bulunamadi."}):null]}):n.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Analiz gormek icin filtrelerden bir calisan secin."})]}),n.jsxs(Le,{children:[n.jsxs("div",{className:"mb-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam kayt"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ln.length})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"pheli kayt"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ln.filter(W=>Ph(W).length>0).length})]})]}),lt.isLoading?n.jsx(Gt,{}):null,lt.isError?n.jsx(wt,{message:He(lt.error,"Yoklama kaytlar alnamad.").message}):null,!lt.isLoading&&!lt.isError?n.jsxs("div",{className:"max-h-[66vh] overflow-auto overscroll-contain",children:[n.jsxs("table",{className:"min-w-[1320px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"ID"}),n.jsx("th",{className:"py-2",children:"alan"}),n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Tip"}),n.jsx("th",{className:"py-2",children:"Kaynak"}),n.jsx("th",{className:"py-2",children:"Zaman"}),n.jsx("th",{className:"py-2",children:"Konum"}),n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Not"}),n.jsx("th",{className:"py-2",children:"Bayraklar"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Aksiyon"})]})}),n.jsx("tbody",{children:ln.map(W=>{const Ve=Ph(W),zt=Je.get(W.employee_id),ba=zt?.department_id!=null?Nt.get(zt.department_id):"-",Ot=W.source==="MANUAL"||W.created_by_admin||Wo(W.flags,"ADMIN_MANUAL"),Oe=A0(W.flags.SHIFT_ID),pn=typeof W.flags.SHIFT_NAME=="string"?W.flags.SHIFT_NAME:Oe&&Ft.get(Oe)?Ft.get(Oe)?.name:null;return n.jsxs("tr",{className:`border-t border-slate-100 ${Ve.length>0?"bg-amber-50/40":""}`,children:[n.jsx("td",{className:"py-2",children:W.id}),n.jsxs("td",{className:"py-2",children:["#",W.employee_id," - ",nt.get(W.employee_id)??"-"]}),n.jsx("td",{className:"py-2",children:ba??"-"}),n.jsx("td",{className:"py-2",children:W.type}),n.jsxs("td",{className:"py-2",children:[Ot?n.jsx("span",{className:"inline-flex rounded-full bg-indigo-100 px-2 py-1 text-[11px] font-semibold text-indigo-700",children:"MANUEL"}):"CHAZ",W.deleted_at?n.jsx("span",{className:"ml-1 inline-flex rounded-full bg-rose-100 px-2 py-1 text-[11px] font-semibold text-rose-700",children:"SLND"}):null]}),n.jsx("td",{className:"py-2",children:Hu(W.ts_utc)}),n.jsx("td",{className:"py-2",children:kM(W.location_status)}),n.jsx("td",{className:"py-2",children:pn?n.jsxs("span",{children:[pn,Oe?` (#${Oe})`:""]}):Oe?n.jsxs("span",{children:["#",Oe]}):"-"}),n.jsx("td",{className:"py-2",children:W.note||"-"}),n.jsx("td",{className:"py-2",children:n.jsx(N_,{reasons:Ve})}),n.jsx("td",{className:"py-2",children:n.jsx(__,{suspicious:Ve.length>0,label:"pheli"})}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Hn(W),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Dzenle"}),n.jsx("button",{type:"button",onClick:()=>M(W),className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50",children:"Soft sil"})]})})]},W.id)})})]}),ln.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Filtreye uygun kayt bulunamad."}):null]}):null]}),n.jsxs(Le,{children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Audit Log"}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-slate-600",children:["Sayfa basi",n.jsx("select",{value:ce,onChange:W=>de(Number(W.target.value)),className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-800",children:C0.map(W=>n.jsx("option",{value:W,children:W},W))})]})]}),ze.isLoading?n.jsx(Gt,{}):null,ze.isError?n.jsx(wt,{message:He(ze.error,"Audit loglar alnamad.").message}):null,!ze.isLoading&&!ze.isError?n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("p",{className:"text-xs text-slate-600",children:["Gosterilen satir: ",Rn,"-",Cn," / ",Vt]}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"min-w-[980px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Zaman"}),n.jsx("th",{className:"py-2",children:"Aksiyon"}),n.jsx("th",{className:"py-2",children:"Kullanc"}),n.jsx("th",{className:"py-2",children:"Entity"}),n.jsx("th",{className:"py-2",children:"Durum"})]})}),n.jsx("tbody",{children:xt.map(W=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:Hu(W.ts_utc)}),n.jsx("td",{className:"py-2",children:W.action}),n.jsxs("td",{className:"py-2",children:[W.actor_type,":",W.actor_id]}),n.jsxs("td",{className:"py-2",children:[W.entity_type??"-"," ",W.entity_id?`#${W.entity_id}`:""]}),n.jsx("td",{className:"py-2",children:W.success?"Baarl":"Hatal"})]},W.id))})]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Sayfa ",Ee," / ",Tn]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>De(W=>Math.max(1,W-1)),disabled:Ee<=1,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Onceki"}),n.jsx("button",{type:"button",onClick:()=>De(W=>Math.min(Tn,W+1)),disabled:Ee>=Tn,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Sonraki"})]})]}),xt.length===0?n.jsx("p",{className:"text-sm text-slate-500",children:"Audit kaydi bulunamadi."}):null]}):null]}),n.jsx(er,{open:I!==null,title:I?`Event #${I.id} dzenle`:"Event dzenle",onClose:()=>R(null),children:n.jsxs("form",{onSubmit:Mn,className:"space-y-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Event tipi",n.jsxs("select",{value:K,onChange:W=>V(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"IN",children:"IN (Giri)"}),n.jsx("option",{value:"OUT",children:"OUT (k)"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Tarih/saat",n.jsx("input",{type:"datetime-local",value:ee,onChange:W=>q(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya (opsiyonel)",n.jsxs("select",{value:ie,onChange:W=>fe(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Deitirme"}),Jn.map(W=>n.jsxs("option",{value:W.id,children:["#",W.id," - ",W.name," (",W.start_time_local,"-",W.end_time_local,")"]},W.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Not",n.jsx("input",{type:"text",value:Y,onChange:W=>$(W.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:ue,onChange:W=>je(W.target.checked)})," Sra akyorsa duplicate olarak gncelle"]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:X,onChange:W=>oe(W.target.checked)})," Manuel olmayan kaytlarda zorla dzenle"]}),n.jsx("button",{type:"submit",disabled:rn.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:rn.isPending?"Kaydediliyor...":"Kaydet"})]})}),n.jsx(er,{open:Z!==null,title:Z?`Event #${Z.id} soft sil`:"Event soft sil",onClose:()=>M(null),children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm text-slate-700",children:"Kayt hard delete edilmez, soft delete olarak iaretlenir."}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:ne,onChange:W=>Se(W.target.checked)})," Manuel olmayan kaytlarda zorla sil"]}),n.jsx("button",{type:"button",onClick:()=>Z&&ae.mutate({eventId:Z.id,force:ne}),disabled:ae.isPending,className:"btn-danger rounded-lg bg-rose-600 px-4 py-2 text-sm font-semibold text-white hover:bg-rose-700 disabled:opacity-60",children:ae.isPending?"Siliniyor...":"Soft sil"})]})})]})}const AM=$a({employee_id:qn().int().positive(),expires_in_minutes:qn().int().positive().max(1440)});function Ku(e){return e?new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"short"}).format(new Date(e)):"-"}function M0(e,s){return`${new Intl.DateTimeFormat("tr-TR",{month:"long"}).format(new Date(Date.UTC(e,s-1,1)))} ${e}`}function MM(e){return e==="FINISHED"?"status-badge status-badge-ok":e==="IN_PROGRESS"?"status-badge status-badge-pending":"status-badge status-badge-neutral"}function zM(){const e=la(),[s,l]=b.useState(""),[o,d]=b.useState("30"),[m,f]=b.useState(null),[g,v]=b.useState(null),_=Ze({queryKey:["departments"],queryFn:fi}),S=Ze({queryKey:["employees"],queryFn:()=>Ts({status:"active"})}),w=Ze({queryKey:["devices"],queryFn:f_}),T=Ze({queryKey:["leaves","dashboard"],queryFn:()=>x_({})}),O=Ze({queryKey:["attendance-events","dashboard"],queryFn:()=>fp({limit:8})}),k=Ze({queryKey:["dashboard-employee-snapshot",s],queryFn:()=>p_({employee_id:Number(s)}),enabled:!!s,staleTime:2e4}),A=Xe({mutationFn:g_,onSuccess:q=>{f({token:q.token,invite_url:q.invite_url}),v(null),e.invalidateQueries({queryKey:["devices"]})},onError:q=>{v(uM(q,"Claim token olusturulamadi."))}}),z=()=>{f(null),v(null);const q=AM.safeParse({employee_id:s,expires_in_minutes:o});if(!q.success){v(q.error.issues[0]?.message??"Form alanlarini kontrol et.");return}A.mutate(q.data)},U=_.data??[],I=S.data??[],R=w.data??[],K=T.data??[],V=O.data??[],ee=b.useMemo(()=>I.find(q=>String(q.id)===s)??null,[I,s]);return _.isLoading||S.isLoading||w.isLoading||T.isLoading||O.isLoading?n.jsx(Gt,{}):_.isError||S.isError||w.isError||T.isError||O.isError?n.jsx(wt,{message:"Dashboard verileri alinamadi."}):n.jsxs("div",{className:"space-y-6",children:[n.jsx(Zn,{title:"Genel Bakis",description:"Calisan odakli claim token operasyonu ve anlik puantaj gorunumu."}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs(Le,{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Departman"}),n.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:U.length})]}),n.jsxs(Le,{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Calisan"}),n.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:I.length})]}),n.jsxs(Le,{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Cihaz"}),n.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:R.length})]}),n.jsxs(Le,{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Izin Kaydi"}),n.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:K.length})]})]}),n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[1.05fr_1.3fr]",children:[n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Claim Token Uretimi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Calisan adi veya ID secip employee claim URL olustur."}),n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsx(hs,{label:"Calisan",employees:I,value:s,onChange:l,placeholder:"Calisan adi veya #ID",helperText:"Tek bir calisan secildiginde dashboard ozet kartlari otomatik dolar."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Token suresi (dakika)",n.jsx("input",{value:o,onChange:q=>d(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"30"})]})]}),ee?n.jsxs("div",{className:"mt-3 rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:[n.jsxs("p",{children:["Secili: #",ee.id," - ",ee.full_name]}),n.jsxs("p",{children:["Departman: ",ee.department_id??"-"]})]}):null,n.jsx("button",{type:"button",onClick:z,disabled:A.isPending||!s,className:"mt-4 rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:A.isPending?"Olusturuluyor...":"Claim Token Olustur"}),m?n.jsxs("div",{className:"mt-3 rounded-lg border border-emerald-200 bg-emerald-50 p-3 text-sm text-emerald-700",children:[n.jsxs("p",{className:"font-semibold",children:["Token: ",m.token]}),n.jsxs("p",{className:"mt-1 break-all",children:["URL: ",m.invite_url]})]}):null,g?n.jsx("div",{className:"form-validation",children:g}):null]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Calisan Canli Ozet"}),s?null:n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Bir calisan secildiginde bu ay/gecen ay mesai, cihaz ve konum bilgisi gorunur."}),s&&k.isLoading?n.jsx(Gt,{label:"Calisan ozeti yukleniyor..."}):null,s&&k.isError?n.jsx(wt,{message:"Calisan ozeti alinamadi."}):null,k.data?n.jsxs("div",{className:"mt-3 space-y-4 text-sm",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:MM(k.data.today_status),children:k.data.today_status}),n.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs text-slate-700",children:["Aktif cihaz: ",k.data.active_devices,"/",k.data.total_devices]}),n.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs text-slate-700",children:["Son guncelleme: ",Ku(k.data.generated_at_utc)]})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:M0(k.data.current_month.year,k.data.current_month.month)}),n.jsxs("p",{className:"mt-2 text-xs text-slate-600",children:["Toplam net sure: ",n.jsx(qe,{minutes:k.data.current_month.worked_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Plan ustu sure: ",n.jsx(qe,{minutes:k.data.current_month.plan_overtime_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla sure: ",n.jsx(qe,{minutes:k.data.current_month.extra_work_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla mesai: ",n.jsx(qe,{minutes:k.data.current_month.overtime_minutes})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:M0(k.data.previous_month.year,k.data.previous_month.month)}),n.jsxs("p",{className:"mt-2 text-xs text-slate-600",children:["Toplam net sure: ",n.jsx(qe,{minutes:k.data.previous_month.worked_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Plan ustu sure: ",n.jsx(qe,{minutes:k.data.previous_month.plan_overtime_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla sure: ",n.jsx(qe,{minutes:k.data.previous_month.extra_work_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla mesai: ",n.jsx(qe,{minutes:k.data.previous_month.overtime_minutes})]})]})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Son Puantaj Olayi"}),k.data.last_event?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"mt-2 text-xs text-slate-700",children:["Tip: ",k.data.last_event.event_type]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-700",children:["Zaman: ",Ku(k.data.last_event.ts_utc)]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-700",children:["Konum: ",k.data.last_event.location_status]})]}):n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Kayit bulunamadi."})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Son Konum"}),k.data.latest_location?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"mt-2 text-xs text-slate-700",children:["Lat/Lon: ",k.data.latest_location.lat.toFixed(6),", ",k.data.latest_location.lon.toFixed(6)]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-700",children:["Zaman: ",Ku(k.data.latest_location.ts_utc)]})]}):n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Konum verisi yok."})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Cihazlar"}),k.data.devices.length===0?n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Cihaz kaydi bulunamadi."}):n.jsx("div",{className:"mt-2 space-y-1 text-xs text-slate-700",children:k.data.devices.slice(0,8).map(q=>n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded border border-slate-100 px-2 py-1",children:[n.jsxs("span",{children:["#",q.id," - ",q.device_fingerprint]}),n.jsx("span",{className:q.is_active?"status-badge status-badge-ok":"status-badge status-badge-danger",children:q.is_active?"AKTIF":"PASIF"})]},q.id))})]})]}):null]})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Son Attendance Eventleri"}),n.jsx("div",{className:"mt-4 list-scroll-area",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"ID"}),n.jsx("th",{className:"py-2",children:"Calisan"}),n.jsx("th",{className:"py-2",children:"Tip"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Zaman"})]})}),n.jsx("tbody",{children:V.map(q=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:q.id}),n.jsx("td",{className:"py-2",children:q.employee_id}),n.jsx("td",{className:"py-2",children:q.type}),n.jsx("td",{className:"py-2",children:q.location_status}),n.jsx("td",{className:"py-2",children:Ku(q.ts_utc)})]},q.id))})]})})]})]})}function OM(e,s){const l=window.URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=s,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l)}function DM(){const e=new Date,{pushToast:s}=oa(),l={year:String(e.getFullYear()),month:String(e.getMonth()+1),departmentId:"",includeInactive:!1},[o,d]=b.useState(l),[m,f]=b.useState(l),[g,v]=b.useState(!1),_=Ze({queryKey:["departments"],queryFn:fi}),S=Number(m.year),w=Number(m.month),T=Number(m.departmentId),O=Number.isFinite(S)&&S>0&&Number.isFinite(w)&&w>=1&&w<=12,k=Ze({queryKey:["department-summary",S,w,m.departmentId||"all",m.includeInactive?"with-inactive":"active-only"],queryFn:()=>KA({year:S,month:w,department_id:Number.isFinite(T)&&T>0?T:void 0,include_inactive:m.includeInactive}),enabled:O}),A=k.data??[],z=b.useMemo(()=>A.reduce((V,ee)=>(V.worked+=ee.worked_minutes,V.planOvertime+=ee.plan_overtime_minutes,V.legalExtra+=ee.legal_extra_work_minutes,V.legalOvertime+=ee.legal_overtime_minutes,V.employeeCount+=ee.employee_count,V),{worked:0,planOvertime:0,legalExtra:0,legalOvertime:0,employeeCount:0}),[A]),U=b.useMemo(()=>{const V=[`Yl: ${m.year}`,`Ay: ${m.month}`];if(m.departmentId){const ee=_.data?.find(q=>q.id===Number(m.departmentId));V.push(`Departman: ${ee?.name??m.departmentId}`)}return m.includeInactive&&V.push("Arivdekiler dahil"),V},[m,_.data]),I=()=>f({...o}),R=()=>{d(l),f(l)},K=async()=>{if(!O){s({variant:"error",title:"Filtre hatas",description:"Excel indirmek iin geerli yl ve ay sein."});return}try{v(!0);const V=Number.isFinite(T)&&T>0?await WA({department_id:T,year:S,month:w,include_inactive:m.includeInactive}):await eM({year:S,month:w,include_inactive:m.includeInactive}),ee=Number.isFinite(T)&&T>0?`department-${T}`:"all";OM(V,`puantaj-${ee}-${S}-${String(w).padStart(2,"0")}.xlsx`)}catch(V){s({variant:"error",title:"Excel indirilemedi",description:He(V,"Dosya oluturulamad.").message})}finally{v(!1)}};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"Departman Aylk zeti",description:"Departman baznda aylk toplam alma, plan st sre ve yasal fazla mesai deerlerini karlatrn.",action:n.jsx("button",{type:"button",onClick:()=>{K()},disabled:g,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:g?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner inline-spinner-dark","aria-hidden":"true"}),"Hazrlanyor..."]}):"Excel ndir"})}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Yl",n.jsx("input",{type:"number",value:o.year,onChange:V=>d(ee=>({...ee,year:V.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",n.jsx("input",{type:"number",value:o.month,onChange:V=>d(ee=>({...ee,month:V.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Departman",n.jsxs("select",{value:o.departmentId,onChange:V=>d(ee=>({...ee,departmentId:V.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",disabled:_.isLoading,children:[n.jsx("option",{value:"",children:"Tm"}),(_.data??[]).map(V=>n.jsxs("option",{value:V.id,children:["#",V.id," - ",V.name]},V.id))]})]})]}),n.jsxs("label",{className:"mt-3 inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:o.includeInactive,onChange:V=>d(ee=>({...ee,includeInactive:V.target.checked}))}),"Arivdeki alanlar dahil et"]}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:I,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),n.jsx("button",{type:"button",onClick:R,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:U.map(V=>n.jsx("span",{className:"inline-flex rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:V},V))})]}),O?null:n.jsx(wt,{message:"Yl ve ay deerleri geersiz."}),k.isLoading?n.jsx(Gt,{}):null,k.isError?n.jsx(wt,{message:He(k.error,"Departman zeti alnamad.").message}):null,!k.isLoading&&!k.isError?n.jsxs(n.Fragment,{children:[n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Toplamlar"}),n.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 xl:grid-cols-5",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam alma"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx(qe,{minutes:z.worked})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Plan st Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx(qe,{minutes:z.planOvertime})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Yasal Fazla Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx(qe,{minutes:z.legalExtra})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Yasal Fazla Mesai"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx(qe,{minutes:z.legalOvertime})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam alan Says"}),n.jsx("p",{className:"text-lg font-semibold",children:z.employeeCount})]})]})]}),A.length===0?n.jsx(Le,{children:n.jsx("p",{className:"text-sm text-slate-600",children:"Seilen filtrede departman zeti bulunamad."})}):n.jsx(Le,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"alan Says"}),n.jsx("th",{className:"py-2",children:"Toplam alma"}),n.jsx("th",{className:"py-2",children:"Plan st"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Sre"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"})]})}),n.jsx("tbody",{children:A.map(V=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsxs("td",{className:"py-2",children:["#",V.department_id," - ",V.department_name]}),n.jsx("td",{className:"py-2",children:V.employee_count}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:V.worked_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:V.plan_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:V.legal_extra_work_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:V.legal_overtime_minutes})})]},V.department_id))})]})})})]}):null]})}function mi({value:e,onChange:s,placeholder:l="Isme gore ara..."}){return n.jsxs("label",{className:"block text-sm text-slate-700",children:["Ara",n.jsx("input",{value:e,onChange:o=>s(o.target.value),placeholder:l,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring"})]})}const z0=$a({name:ia().min(2,"Departman adi en az 2 karakter olmali.").max(255),region_id:dd([qn().int().positive(),kf()])});function O0(e){if(un.isAxiosError(e)&&e.response?.status===409)return"Bu departman adi zaten mevcut. Lutfen farkli bir ad girin.";const s=He(e,"Departman olusturulamadi.");return s.message.toLowerCase().includes("department name already exists")?"Bu departman adi zaten mevcut. Lutfen farkli bir ad girin.":s.message}function RM(){const e=la(),{pushToast:s}=oa(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState(!1),[S,w]=b.useState(""),[T,O]=b.useState(null),[k,A]=b.useState(""),[z,U]=b.useState(""),[I,R]=b.useState(null),K=Ze({queryKey:["departments",S],queryFn:()=>YC(S?{region_id:Number(S)}:void 0)}),V=Ze({queryKey:["regions","departments-page"],queryFn:()=>Vl({include_inactive:!0})}),ee=Xe({mutationFn:$C,onSuccess:X=>{o(""),m(""),R(null),_(!1),s({variant:"success",title:"Departman olusturuldu",description:`${X.name} basariyla eklendi.`}),e.invalidateQueries({queryKey:["departments"]})},onError:X=>{const oe=O0(X);R(oe),s({variant:"error",title:"Departman olusturulamadi",description:oe})}}),q=Xe({mutationFn:({departmentId:X,name:oe,regionIdValue:Z})=>XC(X,{name:oe,region_id:Z}),onSuccess:X=>{R(null),O(null),A(""),U(""),s({variant:"success",title:"Departman guncellendi",description:`${X.name} basariyla guncellendi.`}),e.invalidateQueries({queryKey:["departments"]})},onError:X=>{const oe=O0(X);R(oe),s({variant:"error",title:"Departman guncellenemedi",description:oe})}}),Y=X=>{X.preventDefault(),R(null);const oe=d.trim()===""?null:Number(d),Z=z0.safeParse({name:l,region_id:oe});if(!Z.success){const M=Z.error.issues[0]?.message??"Departman alanlarini kontrol edin.";R(M),s({variant:"error",title:"Form hatasi",description:M});return}ee.mutate({name:Z.data.name,region_id:Z.data.region_id})},$=X=>{if(X.preventDefault(),R(null),!T)return;const oe=z.trim()===""?null:Number(z),Z=z0.safeParse({name:k,region_id:oe});if(!Z.success){const M=Z.error.issues[0]?.message??"Departman alanlarini kontrol edin.";R(M),s({variant:"error",title:"Form hatasi",description:M});return}q.mutate({departmentId:T,name:Z.data.name,regionIdValue:Z.data.region_id})},ie=K.data??[],fe=V.data??[],ue=b.useMemo(()=>new Map(fe.map(X=>[X.id,X.name])),[fe]),je=b.useMemo(()=>{const X=f.trim().toLowerCase();return X?ie.filter(oe=>oe.name.toLowerCase().includes(X)):ie},[ie,f]);return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"Departmanlar",description:"Departman kayitlarini bolge bazli olarak yonetin.",action:n.jsx("button",{type:"button",onClick:()=>_(X=>!X),className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Yeni Departman"})}),v?n.jsxs(Le,{children:[n.jsxs("form",{onSubmit:Y,className:"grid gap-3 md:grid-cols-3 md:items-end",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Departman adi",n.jsx("input",{value:l,onChange:X=>o(X.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Insan Kaynaklari"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge",n.jsxs("select",{value:d,onChange:X=>m(X.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Bolge yok"}),fe.map(X=>n.jsx("option",{value:X.id,children:X.name},X.id))]})]}),n.jsxs("div",{className:"flex gap-2 md:col-span-3",children:[n.jsx("button",{type:"submit",disabled:ee.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:ee.isPending?"Kaydediliyor...":"Kaydet"}),n.jsx("button",{type:"button",onClick:()=>{_(!1),R(null)},className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),I?n.jsx("div",{className:"form-validation",children:I}):null]}):null,T?n.jsxs(Le,{children:[n.jsxs("form",{onSubmit:$,className:"grid gap-3 md:grid-cols-3 md:items-end",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Departman adi",n.jsx("input",{value:k,onChange:X=>A(X.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge",n.jsxs("select",{value:z,onChange:X=>U(X.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Bolge yok"}),fe.map(X=>n.jsx("option",{value:X.id,children:X.name},X.id))]})]}),n.jsxs("div",{className:"flex gap-2 md:col-span-3",children:[n.jsx("button",{type:"submit",disabled:q.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:q.isPending?"Guncelleniyor...":"Guncelle"}),n.jsx("button",{type:"button",onClick:()=>{O(null),A(""),U(""),R(null)},className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),I?n.jsx("div",{className:"form-validation",children:I}):null]}):null,K.isLoading||V.isLoading?n.jsx(Gt,{}):null,K.isError||V.isError?n.jsx(wt,{message:"Departman verileri alinamadi."}):null,!K.isLoading&&!K.isError&&!V.isLoading&&!V.isError?n.jsxs(Le,{children:[n.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-3",children:[n.jsx(mi,{value:f,onChange:g,placeholder:"Departman adina gore ara..."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge filtresi",n.jsxs("select",{value:S,onChange:X=>w(X.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tum bolgeler"}),fe.map(X=>n.jsx("option",{value:X.id,children:X.name},X.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman ID"}),n.jsx("th",{className:"py-2",children:"Departman Adi"}),n.jsx("th",{className:"py-2",children:"Bolge"}),n.jsx("th",{className:"py-2",children:"Islem"})]})}),n.jsx("tbody",{children:je.map(X=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:X.id}),n.jsx("td",{className:"py-2",children:X.name}),n.jsx("td",{className:"py-2",children:X.region_name??(X.region_id?ue.get(X.region_id):"-")??"-"}),n.jsx("td",{className:"py-2",children:n.jsx("button",{type:"button",onClick:()=>{O(X.id),A(X.name),U(X.region_id?String(X.region_id):""),R(null)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"})})]},X.id))})]})}),je.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Arama kriterine uygun departman bulunamadi."}):null]}):null]})}function nr({value:e}){const s=e.toUpperCase();return s==="OK"||s==="AKTIF"||s==="APPROVED"?n.jsx("span",{className:"status-badge status-badge-ok",children:e}):s==="INCOMPLETE"?n.jsx("span",{className:"status-badge status-badge-incomplete",children:"INCOMPLETE"}):s==="LEAVE"?n.jsx("span",{className:"status-badge status-badge-leave",children:"LEAVE"}):s==="OFF"?n.jsx("span",{className:"status-badge status-badge-neutral",children:"OFF"}):s==="PENDING"?n.jsx("span",{className:"status-badge status-badge-pending",children:"PENDING"}):s==="REJECTED"||s==="PASIF"?n.jsx("span",{className:"status-badge status-badge-danger",children:e}):n.jsx("span",{className:"status-badge status-badge-neutral",children:e})}function Bh(e){return e?new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"short"}).format(new Date(e)):"-"}function LM(e){return e==="ACTIVE"?"Aktif":"Kullanildi/Suresi Doldu"}function PM(){const e=la(),{pushToast:s}=oa(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(!0),[v,_]=b.useState(""),[S,w]=b.useState(1),[T,O]=b.useState(50),[k,A]=b.useState(null),[z,U]=b.useState(null),I=l?Number(l):void 0,R=I?0:(S-1)*T,K=Ze({queryKey:["employee-device-overview-summary",I??null,d,f,v,S,T],queryFn:()=>If({employee_id:I,region_id:d?Number(d):void 0,include_inactive:f,q:v.trim()||void 0,offset:R,limit:I?1:T,device_limit:1})}),V=Ze({queryKey:["employee-device-overview-detail",k],enabled:k!==null,queryFn:()=>If({employee_id:k??void 0,include_inactive:!0,include_recovery_secrets:!0,offset:0,limit:1,device_limit:100})}),ee=Ze({queryKey:["employees","all-for-devices"],queryFn:()=>Ts({include_inactive:!0,status:"all"})}),q=Ze({queryKey:["regions","devices-page"],queryFn:()=>Vl({include_inactive:!0})}),Y=Xe({mutationFn:({deviceId:oe,isActive:Z})=>qA(oe,{is_active:Z}),onSuccess:oe=>{s({variant:"success",title:oe.is_active?"Cihaz aktif edildi":"Cihaz pasife alnd",description:`Cihaz #${oe.id} durumu gncellendi.`}),e.invalidateQueries({queryKey:["employee-device-overview-summary"]}),e.invalidateQueries({queryKey:["employee-device-overview-detail"]})},onError:oe=>{s({variant:"error",title:"Cihaz durumu gncellenemedi",description:He(oe,"lem baarsz.").message})}}),$=ee.data??[],ie=q.data??[],fe=K.data??[],ue=V.data?.[0],je=!I&&fe.length===T,X=!I&&S>1;return K.isLoading||ee.isLoading||q.isLoading?n.jsx(Gt,{}):K.isError?n.jsx(wt,{message:He(K.error,"Cihaz verisi alnamad.").message}):ee.isError?n.jsx(wt,{message:He(ee.error,"alan listesi alnamad.").message}):q.isError?n.jsx(wt,{message:He(q.error,"Bolge listesi alinamadi.").message}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"Cihazlar ve Token Takibi",description:"Youn kullanm iin optimize edilmi liste grnm. Satrdan detay ap cihazlar ynetin."}),n.jsxs(Le,{children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-5 md:items-end",children:[n.jsx(hs,{label:"alan filtresi",employees:$,value:l,onChange:oe=>{o(oe),w(1),A(null)},emptyLabel:"Tm",helperText:"Ad-soyad veya ID ile filtreleyin."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["zet arama",n.jsx("input",{type:"text",value:v,onChange:oe=>{_(oe.target.value),w(1),A(null)},placeholder:"alan ad veya ID",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Sayfa boyutu",n.jsxs("select",{value:T,onChange:oe=>{O(Number(oe.target.value)),w(1),A(null)},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge filtresi",n.jsxs("select",{value:d,onChange:oe=>{m(oe.target.value),w(1),A(null)},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tum bolgeler"}),ie.map(oe=>n.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:f,onChange:oe=>{g(oe.target.checked),w(1),A(null)}}),"Pasif alanlar gster"]})]}),I?null:n.jsxs("div",{className:"mt-3 flex items-center justify-end gap-2",children:[n.jsx("button",{type:"button",disabled:!X,onClick:()=>{w(oe=>Math.max(1,oe-1)),A(null)},className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"nceki"}),n.jsxs("span",{className:"text-xs text-slate-500",children:["Sayfa ",S]}),n.jsx("button",{type:"button",disabled:!je,onClick:()=>{w(oe=>oe+1),A(null)},className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}),n.jsxs(Le,{children:[n.jsx("div",{className:"max-h-[68vh] overflow-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"sticky top-0 z-10 bg-white text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2",children:"alan"}),n.jsx("th",{className:"px-2 py-2",children:"Departman"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Cihaz"}),n.jsx("th",{className:"px-2 py-2",children:"Token"}),n.jsx("th",{className:"px-2 py-2 text-right",children:"lem"})]})}),n.jsx("tbody",{children:fe.map(oe=>{const Z=k===oe.employee_id;return n.jsxs(b.Fragment,{children:[n.jsxs("tr",{className:"border-t border-slate-100 align-top hover:bg-slate-50/60",children:[n.jsx("td",{className:"px-2 py-2",children:n.jsxs("div",{className:"font-medium text-slate-900",children:["#",oe.employee_id," - ",oe.employee_name]})}),n.jsx("td",{className:"px-2 py-2 text-xs text-slate-600",children:oe.department_name??oe.department_id??"-"}),n.jsx("td",{className:"px-2 py-2",children:n.jsx(nr,{value:oe.is_employee_active?"Aktif":"Pasif"})}),n.jsxs("td",{className:"px-2 py-2 text-xs text-slate-700",children:[n.jsx("span",{className:"font-semibold",children:oe.active_devices})," aktif / ",oe.total_devices," toplam"]}),n.jsxs("td",{className:"px-2 py-2 text-xs text-slate-700",children:["K:",oe.token_used," B:",oe.token_pending," D:",oe.token_expired," T:",oe.token_total]}),n.jsx("td",{className:"px-2 py-2 text-right",children:n.jsx("button",{type:"button",onClick:()=>{A(M=>M===oe.employee_id?null:oe.employee_id)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:Z?"Kapat":"Cihazlar Ynet"})})]}),Z?n.jsx("tr",{className:"border-t border-slate-100 bg-slate-50/70",children:n.jsx("td",{colSpan:6,className:"px-2 py-3",children:V.isLoading?n.jsx("p",{className:"text-xs text-slate-500",children:"Cihaz listesi ykleniyor..."}):V.isError?n.jsx("p",{className:"text-xs text-rose-700",children:"Cihaz detaylar alnamad."}):ue?n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full text-left text-xs",children:[n.jsx("thead",{className:"uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Cihaz ID"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Fingerprint"}),n.jsx("th",{className:"py-2",children:"Recovery"}),n.jsx("th",{className:"py-2",children:"Oluturulma"}),n.jsx("th",{className:"py-2 text-right",children:"lem"})]})}),n.jsx("tbody",{children:ue.devices.map(M=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:M.id}),n.jsx("td",{className:"py-2",children:n.jsx(nr,{value:M.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2 font-mono",children:M.device_fingerprint}),n.jsx("td",{className:"py-2 text-[11px] text-slate-700",children:M.recovery_ready?n.jsxs("span",{className:"rounded-full bg-emerald-100 px-2 py-1 font-semibold text-emerald-700",children:["Hazir (",M.recovery_code_active_count,")"]}):n.jsx("span",{className:"rounded-full bg-amber-100 px-2 py-1 font-semibold text-amber-700",children:"Kurulu Degil"})}),n.jsx("td",{className:"py-2",children:Bh(M.created_at)}),n.jsx("td",{className:"py-2 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>U(M),className:"rounded-lg border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",children:"Detay"}),n.jsx("button",{type:"button",disabled:Y.isPending,onClick:()=>Y.mutate({deviceId:M.id,isActive:!M.is_active}),className:`rounded-lg px-2 py-1 text-[11px] font-semibold text-white ${M.is_active?"bg-rose-600 hover:bg-rose-700":"bg-emerald-600 hover:bg-emerald-700"} disabled:cursor-not-allowed disabled:opacity-60`,children:M.is_active?"Pasife Al":"Aktif Et"})]})})]},M.id))})]}),ue.has_more_devices?n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Bu alan iin daha fazla cihaz var. lk 100 cihaz gsteriliyor."}):null,ue.devices.length===0?n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Bu alana bal cihaz yok."}):null]}):n.jsx("p",{className:"text-xs text-slate-500",children:"Cihaz detay bulunamad."})})}):null]},oe.employee_id)})})]})}),fe.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Seilen filtreye uygun alan veya cihaz kayd yok."}):null]}),n.jsx(er,{open:z!==null,title:z?`Cihaz #${z.id} Recovery Detayi`:"Recovery Detayi",onClose:()=>U(null),children:z?n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Fingerprint"}),n.jsx("p",{className:"mt-1 break-all font-mono text-xs text-slate-800",children:z.device_fingerprint})]}),n.jsxs("div",{className:"grid gap-2 rounded-lg border border-slate-200 p-3 sm:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recovery Durumu"}),n.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:z.recovery_ready?"Hazir":"Kurulu Degil"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Aktif Kod"}),n.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:z.recovery_code_active_count})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"PIN Son Guncelleme"}),n.jsx("p",{className:"mt-1 text-slate-800",children:Bh(z.recovery_pin_updated_at)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Kod Son Gecerlilik"}),n.jsx("p",{className:"mt-1 text-slate-800",children:Bh(z.recovery_expires_at)})]})]}),n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-rose-700",children:"Recovery PIN"}),n.jsx("p",{className:"mt-1 font-mono text-lg font-semibold text-rose-900",children:z.recovery_pin_plain??"-"})]}),z.recovery_code_entries.length>0?n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recovery Kodlari"}),n.jsx("div",{className:"mt-2 space-y-2",children:z.recovery_code_entries.map(oe=>n.jsxs("div",{className:"flex items-center justify-between rounded border border-slate-200 px-3 py-2",children:[n.jsx("span",{className:"font-mono text-slate-900",children:oe.code}),n.jsx("span",{className:`rounded-full px-2 py-1 text-[11px] font-semibold ${oe.status==="ACTIVE"?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:LM(oe.status)})]},`${z.id}-${oe.code}`))})]}):n.jsx("p",{className:"text-xs text-slate-500",children:"Bu cihaz icin kayitli recovery kodu bulunamadi."})]}):null})]})}function IM(){const e=la(),{pushToast:s}=oa(),l=Ze({queryKey:["compliance-settings"],queryFn:YA}),[o,d]=b.useState({name:"TR_DEFAULT",weekly_normal_minutes_default:2700,daily_max_minutes:660,enforce_min_break_rules:!1,night_work_max_minutes_default:450,night_work_exceptions_note_enabled:!0,overtime_annual_cap_minutes:16200,overtime_premium:1.5,extra_work_premium:1.25,overtime_rounding_mode:"OFF"});b.useEffect(()=>{l.data&&d({name:l.data.name,weekly_normal_minutes_default:l.data.weekly_normal_minutes_default,daily_max_minutes:l.data.daily_max_minutes,enforce_min_break_rules:l.data.enforce_min_break_rules,night_work_max_minutes_default:l.data.night_work_max_minutes_default,night_work_exceptions_note_enabled:l.data.night_work_exceptions_note_enabled,overtime_annual_cap_minutes:l.data.overtime_annual_cap_minutes,overtime_premium:l.data.overtime_premium,extra_work_premium:l.data.extra_work_premium,overtime_rounding_mode:l.data.overtime_rounding_mode})},[l.data]);const m=Xe({mutationFn:$A,onSuccess:()=>{s({variant:"success",title:"Uyumluluk ayarlari guncellendi",description:"Yasal puantaj hesaplama parametreleri kaydedildi."}),e.invalidateQueries({queryKey:["compliance-settings"]}),e.invalidateQueries({queryKey:["employee-monthly"]})},onError:f=>{s({variant:"error",title:"Kayit hatasi",description:He(f,"Ayarlar kaydedilemedi.").message})}});return l.isLoading?n.jsx(Gt,{}):l.isError?n.jsx(wt,{message:He(l.error,"Uyumluluk ayarlari alinamadi.").message}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"Uyumluluk Ayarlar",description:"Turk is kanunu varsayimlarini yonetmek iin bu ayarlari kullanin."}),n.jsx(Le,{children:n.jsxs("form",{className:"grid gap-3 md:grid-cols-2",onSubmit:f=>{f.preventDefault(),m.mutate(o)},children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Profil Adi",n.jsx("input",{value:o.name,onChange:f=>d(g=>({...g,name:f.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Haftalik Normal Sure (dk)",n.jsx("input",{type:"number",min:1,value:o.weekly_normal_minutes_default,onChange:f=>d(g=>({...g,weekly_normal_minutes_default:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gnlk Azami Sure (dk)",n.jsx("input",{type:"number",min:1,value:o.daily_max_minutes,onChange:f=>d(g=>({...g,daily_max_minutes:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gece Azami Sure (dk)",n.jsx("input",{type:"number",min:1,value:o.night_work_max_minutes_default,onChange:f=>d(g=>({...g,night_work_max_minutes_default:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yillik Fazla Mesai Limiti (dk)",n.jsx("input",{type:"number",min:1,value:o.overtime_annual_cap_minutes,onChange:f=>d(g=>({...g,overtime_annual_cap_minutes:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Fazla Mesai Carpani",n.jsx("input",{type:"number",min:1,step:"0.01",value:o.overtime_premium,onChange:f=>d(g=>({...g,overtime_premium:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ek Calisma Carpani",n.jsx("input",{type:"number",min:1,step:"0.01",value:o.extra_work_premium,onChange:f=>d(g=>({...g,extra_work_premium:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Fazla Mesai Yuvarlama",n.jsxs("select",{value:o.overtime_rounding_mode,onChange:f=>d(g=>({...g,overtime_rounding_mode:f.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"OFF",children:"OFF"}),n.jsx("option",{value:"REG_HALF_HOUR",children:"REG_HALF_HOUR"})]})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 md:col-span-2",children:[n.jsx("input",{type:"checkbox",checked:o.enforce_min_break_rules,onChange:f=>d(g=>({...g,enforce_min_break_rules:f.target.checked}))}),"Asgari mola kurallarini uygula (Is Kanunu madde 68)"]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 md:col-span-2",children:[n.jsx("input",{type:"checkbox",checked:o.night_work_exceptions_note_enabled,onChange:f=>d(g=>({...g,night_work_exceptions_note_enabled:f.target.checked}))}),"Gece calisma istisna notu bayragini aktif tut"]}),n.jsx("div",{className:"md:col-span-2",children:n.jsx("button",{type:"submit",disabled:m.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:m.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Kaydediliyor..."]}):"Ayarlar Kaydet"})})]})}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Hizli zet"}),n.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Haftalik normal sure"}),n.jsx("p",{className:"font-semibold",children:n.jsx(qe,{minutes:o.weekly_normal_minutes_default})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Gnlk ust sinir"}),n.jsx("p",{className:"font-semibold",children:n.jsx(qe,{minutes:o.daily_max_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yillik fazla mesai limiti"}),n.jsx("p",{className:"font-semibold",children:n.jsx(qe,{minutes:o.overtime_annual_cap_minutes})})]})]})]})]})}var ec={exports:{}};var BM=ec.exports,D0;function UM(){return D0||(D0=1,(function(e,s){(function(l,o){o(s)})(BM,(function(l){var o="1.9.4";function d(i){var c,h,y,N;for(h=1,y=arguments.length;h<y;h++){N=arguments[h];for(c in N)i[c]=N[c]}return i}var m=Object.create||(function(){function i(){}return function(c){return i.prototype=c,new i}})();function f(i,c){var h=Array.prototype.slice;if(i.bind)return i.bind.apply(i,h.call(arguments,1));var y=h.call(arguments,2);return function(){return i.apply(c,y.length?y.concat(h.call(arguments)):arguments)}}var g=0;function v(i){return"_leaflet_id"in i||(i._leaflet_id=++g),i._leaflet_id}function _(i,c,h){var y,N,E,H;return H=function(){y=!1,N&&(E.apply(h,N),N=!1)},E=function(){y?N=arguments:(i.apply(h,arguments),setTimeout(H,c),y=!0)},E}function S(i,c,h){var y=c[1],N=c[0],E=y-N;return i===y&&h?i:((i-N)%E+E)%E+N}function w(){return!1}function T(i,c){if(c===!1)return i;var h=Math.pow(10,c===void 0?6:c);return Math.round(i*h)/h}function O(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function k(i){return O(i).split(/\s+/)}function A(i,c){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?m(i.options):{});for(var h in c)i.options[h]=c[h];return i.options}function z(i,c,h){var y=[];for(var N in i)y.push(encodeURIComponent(h?N.toUpperCase():N)+"="+encodeURIComponent(i[N]));return(!c||c.indexOf("?")===-1?"?":"&")+y.join("&")}var U=/\{ *([\w_ -]+) *\}/g;function I(i,c){return i.replace(U,function(h,y){var N=c[y];if(N===void 0)throw new Error("No value provided for variable "+h);return typeof N=="function"&&(N=N(c)),N})}var R=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function K(i,c){for(var h=0;h<i.length;h++)if(i[h]===c)return h;return-1}var V="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ee(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var q=0;function Y(i){var c=+new Date,h=Math.max(0,16-(c-q));return q=c+h,window.setTimeout(i,h)}var $=window.requestAnimationFrame||ee("RequestAnimationFrame")||Y,ie=window.cancelAnimationFrame||ee("CancelAnimationFrame")||ee("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function fe(i,c,h){if(h&&$===Y)i.call(c);else return $.call(window,f(i,c))}function ue(i){i&&ie.call(window,i)}var je={__proto__:null,extend:d,create:m,bind:f,get lastId(){return g},stamp:v,throttle:_,wrapNum:S,falseFn:w,formatNum:T,trim:O,splitWords:k,setOptions:A,getParamString:z,template:I,isArray:R,indexOf:K,emptyImageUrl:V,requestFn:$,cancelFn:ie,requestAnimFrame:fe,cancelAnimFrame:ue};function X(){}X.extend=function(i){var c=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=c.__super__=this.prototype,y=m(h);y.constructor=c,c.prototype=y;for(var N in this)Object.prototype.hasOwnProperty.call(this,N)&&N!=="prototype"&&N!=="__super__"&&(c[N]=this[N]);return i.statics&&d(c,i.statics),i.includes&&(oe(i.includes),d.apply(null,[y].concat(i.includes))),d(y,i),delete y.statics,delete y.includes,y.options&&(y.options=h.options?m(h.options):{},d(y.options,i.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,H=y._initHooks.length;E<H;E++)y._initHooks[E].call(this)}},c},X.include=function(i){var c=this.prototype.options;return d(this.prototype,i),i.options&&(this.prototype.options=c,this.mergeOptions(i.options)),this},X.mergeOptions=function(i){return d(this.prototype.options,i),this},X.addInitHook=function(i){var c=Array.prototype.slice.call(arguments,1),h=typeof i=="function"?i:function(){this[i].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function oe(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=R(i)?i:[i];for(var c=0;c<i.length;c++)i[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(i,c,h){if(typeof i=="object")for(var y in i)this._on(y,i[y],c);else{i=k(i);for(var N=0,E=i.length;N<E;N++)this._on(i[N],c,h)}return this},off:function(i,c,h){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var y in i)this._off(y,i[y],c);else{i=k(i);for(var N=arguments.length===1,E=0,H=i.length;E<H;E++)N?this._off(i[E]):this._off(i[E],c,h)}return this},_on:function(i,c,h,y){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(i,c,h)===!1){h===this&&(h=void 0);var N={fn:c,ctx:h};y&&(N.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(N)}},_off:function(i,c,h){var y,N,E;if(this._events&&(y=this._events[i],!!y)){if(arguments.length===1){if(this._firingCount)for(N=0,E=y.length;N<E;N++)y[N].fn=w;delete this._events[i];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var H=this._listens(i,c,h);if(H!==!1){var le=y[H];this._firingCount&&(le.fn=w,this._events[i]=y=y.slice()),y.splice(H,1)}}},fire:function(i,c,h){if(!this.listens(i,h))return this;var y=d({},c,{type:i,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var N=this._events[i];if(N){this._firingCount=this._firingCount+1||1;for(var E=0,H=N.length;E<H;E++){var le=N[E],xe=le.fn;le.once&&this.off(i,xe,le.ctx),xe.call(le.ctx||this,y)}this._firingCount--}}return h&&this._propagateEvent(y),this},listens:function(i,c,h,y){typeof i!="string"&&console.warn('"string" type argument expected');var N=c;typeof c!="function"&&(y=!!c,N=void 0,h=void 0);var E=this._events&&this._events[i];if(E&&E.length&&this._listens(i,N,h)!==!1)return!0;if(y){for(var H in this._eventParents)if(this._eventParents[H].listens(i,c,h,y))return!0}return!1},_listens:function(i,c,h){if(!this._events)return!1;var y=this._events[i]||[];if(!c)return!!y.length;h===this&&(h=void 0);for(var N=0,E=y.length;N<E;N++)if(y[N].fn===c&&y[N].ctx===h)return N;return!1},once:function(i,c,h){if(typeof i=="object")for(var y in i)this._on(y,i[y],c,!0);else{i=k(i);for(var N=0,E=i.length;N<E;N++)this._on(i[N],c,h,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[v(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[v(i)],this},_propagateEvent:function(i){for(var c in this._eventParents)this._eventParents[c].fire(i.type,d({layer:i.target,propagatedFrom:i.target},i),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var M=X.extend(Z);function ne(i,c,h){this.x=h?Math.round(i):i,this.y=h?Math.round(c):c}var Se=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(i){return this.clone()._add(be(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(be(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new ne(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new ne(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Se(this.x),this.y=Se(this.y),this},distanceTo:function(i){i=be(i);var c=i.x-this.x,h=i.y-this.y;return Math.sqrt(c*c+h*h)},equals:function(i){return i=be(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=be(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function be(i,c,h){return i instanceof ne?i:R(i)?new ne(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new ne(i.x,i.y):new ne(i,c,h)}function D(i,c){if(i)for(var h=c?[i,c]:i,y=0,N=h.length;y<N;y++)this.extend(h[y])}D.prototype={extend:function(i){var c,h;if(!i)return this;if(i instanceof ne||typeof i[0]=="number"||"x"in i)c=h=be(i);else if(i=te(i),c=i.min,h=i.max,!c||!h)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=h.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(i){return be((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return be(this.min.x,this.max.y)},getTopRight:function(){return be(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var c,h;return typeof i[0]=="number"||i instanceof ne?i=be(i):i=te(i),i instanceof D?(c=i.min,h=i.max):c=h=i,c.x>=this.min.x&&h.x<=this.max.x&&c.y>=this.min.y&&h.y<=this.max.y},intersects:function(i){i=te(i);var c=this.min,h=this.max,y=i.min,N=i.max,E=N.x>=c.x&&y.x<=h.x,H=N.y>=c.y&&y.y<=h.y;return E&&H},overlaps:function(i){i=te(i);var c=this.min,h=this.max,y=i.min,N=i.max,E=N.x>c.x&&y.x<h.x,H=N.y>c.y&&y.y<h.y;return E&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var c=this.min,h=this.max,y=Math.abs(c.x-h.x)*i,N=Math.abs(c.y-h.y)*i;return te(be(c.x-y,c.y-N),be(h.x+y,h.y+N))},equals:function(i){return i?(i=te(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function te(i,c){return!i||i instanceof D?i:new D(i,c)}function P(i,c){if(i)for(var h=c?[i,c]:i,y=0,N=h.length;y<N;y++)this.extend(h[y])}P.prototype={extend:function(i){var c=this._southWest,h=this._northEast,y,N;if(i instanceof de)y=i,N=i;else if(i instanceof P){if(y=i._southWest,N=i._northEast,!y||!N)return this}else return i?this.extend(Ee(i)||ce(i)):this;return!c&&!h?(this._southWest=new de(y.lat,y.lng),this._northEast=new de(N.lat,N.lng)):(c.lat=Math.min(y.lat,c.lat),c.lng=Math.min(y.lng,c.lng),h.lat=Math.max(N.lat,h.lat),h.lng=Math.max(N.lng,h.lng)),this},pad:function(i){var c=this._southWest,h=this._northEast,y=Math.abs(c.lat-h.lat)*i,N=Math.abs(c.lng-h.lng)*i;return new P(new de(c.lat-y,c.lng-N),new de(h.lat+y,h.lng+N))},getCenter:function(){return new de((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new de(this.getNorth(),this.getWest())},getSouthEast:function(){return new de(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof de||"lat"in i?i=Ee(i):i=ce(i);var c=this._southWest,h=this._northEast,y,N;return i instanceof P?(y=i.getSouthWest(),N=i.getNorthEast()):y=N=i,y.lat>=c.lat&&N.lat<=h.lat&&y.lng>=c.lng&&N.lng<=h.lng},intersects:function(i){i=ce(i);var c=this._southWest,h=this._northEast,y=i.getSouthWest(),N=i.getNorthEast(),E=N.lat>=c.lat&&y.lat<=h.lat,H=N.lng>=c.lng&&y.lng<=h.lng;return E&&H},overlaps:function(i){i=ce(i);var c=this._southWest,h=this._northEast,y=i.getSouthWest(),N=i.getNorthEast(),E=N.lat>c.lat&&y.lat<h.lat,H=N.lng>c.lng&&y.lng<h.lng;return E&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,c){return i?(i=ce(i),this._southWest.equals(i.getSouthWest(),c)&&this._northEast.equals(i.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ce(i,c){return i instanceof P?i:new P(i,c)}function de(i,c,h){if(isNaN(i)||isNaN(c))throw new Error("Invalid LatLng object: ("+i+", "+c+")");this.lat=+i,this.lng=+c,h!==void 0&&(this.alt=+h)}de.prototype={equals:function(i,c){if(!i)return!1;i=Ee(i);var h=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return h<=(c===void 0?1e-9:c)},toString:function(i){return"LatLng("+T(this.lat,i)+", "+T(this.lng,i)+")"},distanceTo:function(i){return Ge.distance(this,Ee(i))},wrap:function(){return Ge.wrapLatLng(this)},toBounds:function(i){var c=180*i/40075017,h=c/Math.cos(Math.PI/180*this.lat);return ce([this.lat-c,this.lng-h],[this.lat+c,this.lng+h])},clone:function(){return new de(this.lat,this.lng,this.alt)}};function Ee(i,c,h){return i instanceof de?i:R(i)&&typeof i[0]!="object"?i.length===3?new de(i[0],i[1],i[2]):i.length===2?new de(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new de(i.lat,"lng"in i?i.lng:i.lon,i.alt):c===void 0?null:new de(i,c,h)}var De={latLngToPoint:function(i,c){var h=this.projection.project(i),y=this.scale(c);return this.transformation._transform(h,y)},pointToLatLng:function(i,c){var h=this.scale(c),y=this.transformation.untransform(i,h);return this.projection.unproject(y)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var c=this.projection.bounds,h=this.scale(i),y=this.transformation.transform(c.min,h),N=this.transformation.transform(c.max,h);return new D(y,N)},infinite:!1,wrapLatLng:function(i){var c=this.wrapLng?S(i.lng,this.wrapLng,!0):i.lng,h=this.wrapLat?S(i.lat,this.wrapLat,!0):i.lat,y=i.alt;return new de(h,c,y)},wrapLatLngBounds:function(i){var c=i.getCenter(),h=this.wrapLatLng(c),y=c.lat-h.lat,N=c.lng-h.lng;if(y===0&&N===0)return i;var E=i.getSouthWest(),H=i.getNorthEast(),le=new de(E.lat-y,E.lng-N),xe=new de(H.lat-y,H.lng-N);return new P(le,xe)}},Ge=d({},De,{wrapLng:[-180,180],R:6371e3,distance:function(i,c){var h=Math.PI/180,y=i.lat*h,N=c.lat*h,E=Math.sin((c.lat-i.lat)*h/2),H=Math.sin((c.lng-i.lng)*h/2),le=E*E+Math.cos(y)*Math.cos(N)*H*H,xe=2*Math.atan2(Math.sqrt(le),Math.sqrt(1-le));return this.R*xe}}),pe=6378137,Ke={R:pe,MAX_LATITUDE:85.0511287798,project:function(i){var c=Math.PI/180,h=this.MAX_LATITUDE,y=Math.max(Math.min(h,i.lat),-h),N=Math.sin(y*c);return new ne(this.R*i.lng*c,this.R*Math.log((1+N)/(1-N))/2)},unproject:function(i){var c=180/Math.PI;return new de((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*c,i.x*c/this.R)},bounds:(function(){var i=pe*Math.PI;return new D([-i,-i],[i,i])})()};function _e(i,c,h,y){if(R(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=c,this._c=h,this._d=y}_e.prototype={transform:function(i,c){return this._transform(i.clone(),c)},_transform:function(i,c){return c=c||1,i.x=c*(this._a*i.x+this._b),i.y=c*(this._c*i.y+this._d),i},untransform:function(i,c){return c=c||1,new ne((i.x/c-this._b)/this._a,(i.y/c-this._d)/this._c)}};function lt(i,c,h,y){return new _e(i,c,h,y)}var dt=d({},Ge,{code:"EPSG:3857",projection:Ke,transformation:(function(){var i=.5/(Math.PI*Ke.R);return lt(i,.5,-i,.5)})()}),ze=d({},dt,{code:"EPSG:900913"});function ot(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function bt(i,c){var h="",y,N,E,H,le,xe;for(y=0,E=i.length;y<E;y++){for(le=i[y],N=0,H=le.length;N<H;N++)xe=le[N],h+=(N?"L":"M")+xe.x+" "+xe.y;h+=c?Oe.svg?"z":"x":""}return h||"M0 0"}var It=document.documentElement.style,Bt="ActiveXObject"in window,rn=Bt&&!document.addEventListener,ae="msLaunchUri"in navigator&&!("documentMode"in document),ke=Ot("webkit"),Be=Ot("android"),at=Ot("android 2")||Ot("android 3"),se=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ie=Be&&Ot("Google")&&se<537&&!("AudioNode"in window),_t=!!window.opera,Dt=!ae&&Ot("chrome"),Rt=Ot("gecko")&&!ke&&!_t&&!Bt,ft=!Dt&&Ot("safari"),Ut=Ot("phantom"),Ne="OTransition"in It,Je=navigator.platform.indexOf("Win")===0,nt=Bt&&"transition"in It,Nt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!at,Ft="MozPerspective"in It,jt=!window.L_DISABLE_3D&&(nt||Nt||Ft)&&!Ne&&!Ut,fn=typeof orientation<"u"||Ot("mobile"),Jn=fn&&ke,ln=fn&&Nt,xt=!window.PointerEvent&&window.MSPointerEvent,Vt=!!(window.PointerEvent||xt),Tn="ontouchstart"in window||!!window.TouchEvent,Rn=!window.L_NO_TOUCH&&(Tn||Vt),Cn=fn&&_t,Lt=fn&&Rt,va=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,An=(function(){var i=!1;try{var c=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",w,c),window.removeEventListener("testPassiveEventSupport",w,c)}catch{}return i})(),Hn=(function(){return!!document.createElement("canvas").getContext})(),Mn=!!(document.createElementNS&&ot("svg").createSVGRect),W=!!Mn&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Ve=!Mn&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var c=i.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}})(),zt=navigator.platform.indexOf("Mac")===0,ba=navigator.platform.indexOf("Linux")===0;function Ot(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Oe={ie:Bt,ielt9:rn,edge:ae,webkit:ke,android:Be,android23:at,androidStock:Ie,opera:_t,chrome:Dt,gecko:Rt,safari:ft,phantom:Ut,opera12:Ne,win:Je,ie3d:nt,webkit3d:Nt,gecko3d:Ft,any3d:jt,mobile:fn,mobileWebkit:Jn,mobileWebkit3d:ln,msPointer:xt,pointer:Vt,touch:Rn,touchNative:Tn,mobileOpera:Cn,mobileGecko:Lt,retina:va,passiveEvents:An,canvas:Hn,svg:Mn,vml:Ve,inlineSvg:W,mac:zt,linux:ba},pn=Oe.msPointer?"MSPointerDown":"pointerdown",ca=Oe.msPointer?"MSPointerMove":"pointermove",Wn=Oe.msPointer?"MSPointerUp":"pointerup",Yt=Oe.msPointer?"MSPointerCancel":"pointercancel",it={touchstart:pn,touchmove:ca,touchend:Wn,touchcancel:Yt},ea={touchstart:Ia,touchmove:Pn,touchend:Pn,touchcancel:Pn},F={},Ue=!1;function ut(i,c,h){return c==="touchstart"&&St(),ea[c]?(h=ea[c].bind(this,h),i.addEventListener(it[c],h,!1),h):(console.warn("wrong event specified:",c),w)}function Ln(i,c,h){if(!it[c]){console.warn("wrong event specified:",c);return}i.removeEventListener(it[c],h,!1)}function zn(i){F[i.pointerId]=i}function B(i){F[i.pointerId]&&(F[i.pointerId]=i)}function Fe(i){delete F[i.pointerId]}function St(){Ue||(document.addEventListener(pn,zn,!0),document.addEventListener(ca,B,!0),document.addEventListener(Wn,Fe,!0),document.addEventListener(Yt,Fe,!0),Ue=!0)}function Pn(i,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var h in F)c.touches.push(F[h]);c.changedTouches=[c],i(c)}}function Ia(i,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Nn(c),Pn(i,c)}function dn(i){var c={},h,y;for(y in i)h=i[y],c[y]=h&&h.bind?h.bind(i):h;return i=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var gs=200;function ir(i,c){i.addEventListener("dblclick",c);var h=0,y;function N(E){if(E.detail!==1){y=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var H=ur(E);if(!(H.some(function(xe){return xe instanceof HTMLLabelElement&&xe.attributes.for})&&!H.some(function(xe){return xe instanceof HTMLInputElement||xe instanceof HTMLSelectElement}))){var le=Date.now();le-h<=gs?(y++,y===2&&c(dn(E))):y=1,h=le}}}return i.addEventListener("click",N),{dblclick:c,simDblclick:N}}function Q(i,c){i.removeEventListener("dblclick",c.dblclick),i.removeEventListener("click",c.simDblclick)}var Ye=rr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Pt=rr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),_a=Pt==="webkitTransition"||Pt==="OTransition"?Pt+"End":"transitionend";function Cs(i){return typeof i=="string"?document.getElementById(i):i}function As(i,c){var h=i.style[c]||i.currentStyle&&i.currentStyle[c];if((!h||h==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(i,null);h=y?y[c]:null}return h==="auto"?null:h}function vt(i,c,h){var y=document.createElement(i);return y.className=c||"",h&&h.appendChild(y),y}function tn(i){var c=i.parentNode;c&&c.removeChild(i)}function Na(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Kn(i){var c=i.parentNode;c&&c.lastChild!==i&&c.appendChild(i)}function Gs(i){var c=i.parentNode;c&&c.firstChild!==i&&c.insertBefore(i,c.firstChild)}function $l(i,c){if(i.classList!==void 0)return i.classList.contains(c);var h=Yr(i);return h.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(h)}function mt(i,c){if(i.classList!==void 0)for(var h=k(c),y=0,N=h.length;y<N;y++)i.classList.add(h[y]);else if(!$l(i,c)){var E=Yr(i);pi(i,(E?E+" ":"")+c)}}function xn(i,c){i.classList!==void 0?i.classList.remove(c):pi(i,O((" "+Yr(i)+" ").replace(" "+c+" "," ")))}function pi(i,c){i.className.baseVal===void 0?i.className=c:i.className.baseVal=c}function Yr(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function mn(i,c){"opacity"in i.style?i.style.opacity=c:"filter"in i.style&&Xl(i,c)}function Xl(i,c){var h=!1,y="DXImageTransform.Microsoft.Alpha";try{h=i.filters.item(y)}catch{if(c===1)return}c=Math.round(c*100),h?(h.Enabled=c!==100,h.Opacity=c):i.style.filter+=" progid:"+y+"(opacity="+c+")"}function rr(i){for(var c=document.documentElement.style,h=0;h<i.length;h++)if(i[h]in c)return i[h];return!1}function ys(i,c,h){var y=c||new ne(0,0);i.style[Ye]=(Oe.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(h?" scale("+h+")":"")}function on(i,c){i._leaflet_pos=c,Oe.any3d?ys(i,c):(i.style.left=c.x+"px",i.style.top=c.y+"px")}function Ms(i){return i._leaflet_pos||new ne(0,0)}var xi,Xa,Jl;if("onselectstart"in document)xi=function(){rt(window,"selectstart",Nn)},Xa=function(){$t(window,"selectstart",Nn)};else{var gi=rr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);xi=function(){if(gi){var i=document.documentElement.style;Jl=i[gi],i[gi]="none"}},Xa=function(){gi&&(document.documentElement.style[gi]=Jl,Jl=void 0)}}function $r(){rt(window,"dragstart",Nn)}function lr(){$t(window,"dragstart",Nn)}var Xr,Wl;function yi(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(ja(),Xr=i,Wl=i.style.outlineStyle,i.style.outlineStyle="none",rt(window,"keydown",ja))}function ja(){Xr&&(Xr.style.outlineStyle=Wl,Xr=void 0,Wl=void 0,$t(window,"keydown",ja))}function Jr(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function or(i){var c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}var vi={__proto__:null,TRANSFORM:Ye,TRANSITION:Pt,TRANSITION_END:_a,get:Cs,getStyle:As,create:vt,remove:tn,empty:Na,toFront:Kn,toBack:Gs,hasClass:$l,addClass:mt,removeClass:xn,setClass:pi,getClass:Yr,setOpacity:mn,testProp:rr,setTransform:ys,setPosition:on,getPosition:Ms,get disableTextSelection(){return xi},get enableTextSelection(){return Xa},disableImageDrag:$r,enableImageDrag:lr,preventOutline:yi,restoreOutline:ja,getSizedParentNode:Jr,getScale:or};function rt(i,c,h,y){if(c&&typeof c=="object")for(var N in c)Ua(i,N,c[N],h);else{c=k(c);for(var E=0,H=c.length;E<H;E++)Ua(i,c[E],h,y)}return this}var Ba="_leaflet_events";function $t(i,c,h,y){if(arguments.length===1)eo(i),delete i[Ba];else if(c&&typeof c=="object")for(var N in c)cr(i,N,c[N],h);else if(c=k(c),arguments.length===2)eo(i,function(le){return K(c,le)!==-1});else for(var E=0,H=c.length;E<H;E++)cr(i,c[E],h,y);return this}function eo(i,c){for(var h in i[Ba]){var y=h.split(/\d/)[0];(!c||c(y))&&cr(i,y,null,null,h)}}var Qs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ua(i,c,h,y){var N=c+v(h)+(y?"_"+v(y):"");if(i[Ba]&&i[Ba][N])return this;var E=function(le){return h.call(y||i,le||window.event)},H=E;!Oe.touchNative&&Oe.pointer&&c.indexOf("touch")===0?E=ut(i,c,E):Oe.touch&&c==="dblclick"?E=ir(i,E):"addEventListener"in i?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?i.addEventListener(Qs[c]||c,E,Oe.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(E=function(le){le=le||window.event,vs(i,le)&&H(le)},i.addEventListener(Qs[c],E,!1)):i.addEventListener(c,H,!1):i.attachEvent("on"+c,E),i[Ba]=i[Ba]||{},i[Ba][N]=E}function cr(i,c,h,y,N){N=N||c+v(h)+(y?"_"+v(y):"");var E=i[Ba]&&i[Ba][N];if(!E)return this;!Oe.touchNative&&Oe.pointer&&c.indexOf("touch")===0?Ln(i,c,E):Oe.touch&&c==="dblclick"?Q(i,E):"removeEventListener"in i?i.removeEventListener(Qs[c]||c,E,!1):i.detachEvent("on"+c,E),i[Ba][N]=null}function Fa(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Ja(i){return Ua(i,"wheel",Fa),this}function Vs(i){return rt(i,"mousedown touchstart dblclick contextmenu",Fa),i._leaflet_disable_click=!0,this}function Nn(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function zs(i){return Nn(i),Fa(i),this}function ur(i){if(i.composedPath)return i.composedPath();for(var c=[],h=i.target;h;)c.push(h),h=h.parentNode;return c}function dr(i,c){if(!c)return new ne(i.clientX,i.clientY);var h=or(c),y=h.boundingClientRect;return new ne((i.clientX-y.left)/h.x-c.clientLeft,(i.clientY-y.top)/h.y-c.clientTop)}var gc=Oe.linux&&Oe.chrome?window.devicePixelRatio:Oe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ta(i){return Oe.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/gc:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function vs(i,c){var h=c.relatedTarget;if(!h)return!0;try{for(;h&&h!==i;)h=h.parentNode}catch{return!1}return h!==i}var Wr={__proto__:null,on:rt,off:$t,stopPropagation:Fa,disableScrollPropagation:Ja,disableClickPropagation:Vs,preventDefault:Nn,stop:zs,getPropagationPath:ur,getMousePosition:dr,getWheelDelta:ta,isExternalTarget:vs,addListener:rt,removeListener:$t},bi=M.extend({run:function(i,c,h,y){this.stop(),this._el=i,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=Ms(i),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=fe(this._animate,this),this._step()},_step:function(i){var c=+new Date-this._startTime,h=this._duration*1e3;c<h?this._runFrame(this._easeOut(c/h),i):(this._runFrame(1),this._complete())},_runFrame:function(i,c){var h=this._startPos.add(this._offset.multiplyBy(i));c&&h._round(),on(this._el,h),this.fire("step")},_complete:function(){ue(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Ct=M.extend({options:{crs:dt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,c){c=A(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(Ee(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Pt&&Oe.any3d&&!Oe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),rt(this._proxy,_a,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,c,h){if(c=c===void 0?this._zoom:this._limitZoom(c),i=this._limitCenter(Ee(i),c,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=d({animate:h.animate},h.zoom),h.pan=d({animate:h.animate,duration:h.duration},h.pan));var y=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,c,h.zoom):this._tryAnimatedPan(i,h.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(i,c,h.pan&&h.pan.noMoveStart),this},setZoom:function(i,c){return this._loaded?this.setView(this.getCenter(),i,{zoom:c}):(this._zoom=i,this)},zoomIn:function(i,c){return i=i||(Oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,c)},zoomOut:function(i,c){return i=i||(Oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,c)},setZoomAround:function(i,c,h){var y=this.getZoomScale(c),N=this.getSize().divideBy(2),E=i instanceof ne?i:this.latLngToContainerPoint(i),H=E.subtract(N).multiplyBy(1-1/y),le=this.containerPointToLatLng(N.add(H));return this.setView(le,c,{zoom:h})},_getBoundsCenterZoom:function(i,c){c=c||{},i=i.getBounds?i.getBounds():ce(i);var h=be(c.paddingTopLeft||c.padding||[0,0]),y=be(c.paddingBottomRight||c.padding||[0,0]),N=this.getBoundsZoom(i,!1,h.add(y));if(N=typeof c.maxZoom=="number"?Math.min(c.maxZoom,N):N,N===1/0)return{center:i.getCenter(),zoom:N};var E=y.subtract(h).divideBy(2),H=this.project(i.getSouthWest(),N),le=this.project(i.getNorthEast(),N),xe=this.unproject(H.add(le).divideBy(2).add(E),N);return{center:xe,zoom:N}},fitBounds:function(i,c){if(i=ce(i),!i.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(i,c);return this.setView(h.center,h.zoom,c)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,c){return this.setView(i,this._zoom,{pan:c})},panBy:function(i,c){if(i=be(i).round(),c=c||{},!i.x&&!i.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new bi,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){mt(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,h,c.duration||.25,c.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,c,h){if(h=h||{},h.animate===!1||!Oe.any3d)return this.setView(i,c,h);this._stop();var y=this.project(this.getCenter()),N=this.project(i),E=this.getSize(),H=this._zoom;i=Ee(i),c=c===void 0?H:c;var le=Math.max(E.x,E.y),xe=le*this.getZoomScale(H,c),Ae=N.distanceTo(y)||1,Pe=1.42,We=Pe*Pe;function gt(bn){var js=bn?-1:1,Js=bn?xe:le,xo=xe*xe-le*le+js*We*We*Ae*Ae,kr=2*Js*We*Ae,Tr=xo/kr,Fs=Math.sqrt(Tr*Tr+1)-Tr,Ss=Fs<1e-9?-18:Math.log(Fs);return Ss}function Gn(bn){return(Math.exp(bn)-Math.exp(-bn))/2}function jn(bn){return(Math.exp(bn)+Math.exp(-bn))/2}function pa(bn){return Gn(bn)/jn(bn)}var qt=gt(0);function Zt(bn){return le*(jn(qt)/jn(qt+Pe*bn))}function Et(bn){return le*(jn(qt)*pa(qt+Pe*bn)-Gn(qt))/We}function Bs(bn){return 1-Math.pow(1-bn,1.5)}var ka=Date.now(),hl=(gt(1)-qt)/Pe,Us=h.duration?1e3*h.duration:1e3*hl*.8;function po(){var bn=(Date.now()-ka)/Us,js=Bs(bn)*hl;bn<=1?(this._flyToFrame=fe(po,this),this._move(this.unproject(y.add(N.subtract(y).multiplyBy(Et(js)/Ae)),H),this.getScaleZoom(le/Zt(js),H),{flyTo:!0})):this._move(i,c)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),po.call(this),this},flyToBounds:function(i,c){var h=this._getBoundsCenterZoom(i,c);return this.flyTo(h.center,h.zoom,c)},setMaxBounds:function(i){return i=ce(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var c=this.options.minZoom;return this.options.minZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var c=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,c){this._enforcingBounds=!0;var h=this.getCenter(),y=this._limitCenter(h,this._zoom,ce(i));return h.equals(y)||this.panTo(y,c),this._enforcingBounds=!1,this},panInside:function(i,c){c=c||{};var h=be(c.paddingTopLeft||c.padding||[0,0]),y=be(c.paddingBottomRight||c.padding||[0,0]),N=this.project(this.getCenter()),E=this.project(i),H=this.getPixelBounds(),le=te([H.min.add(h),H.max.subtract(y)]),xe=le.getSize();if(!le.contains(E)){this._enforcingBounds=!0;var Ae=E.subtract(le.getCenter()),Pe=le.extend(E).getSize().subtract(xe);N.x+=Ae.x<0?-Pe.x:Pe.x,N.y+=Ae.y<0?-Pe.y:Pe.y,this.panTo(this.unproject(N),c),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=d({animate:!1,pan:!0},i===!0?{animate:!0}:i);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),y=c.divideBy(2).round(),N=h.divideBy(2).round(),E=y.subtract(N);return!E.x&&!E.y?this:(i.animate&&i.pan?this.panBy(E):(i.pan&&this._rawPanBy(E),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=d({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=f(this._handleGeolocationResponse,this),h=f(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,h,i):navigator.geolocation.getCurrentPosition(c,h,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var c=i.code,h=i.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var c=i.coords.latitude,h=i.coords.longitude,y=new de(c,h),N=y.toBounds(i.coords.accuracy*2),E=this._locateOptions;if(E.setView){var H=this.getBoundsZoom(N);this.setView(y,E.maxZoom?Math.min(H,E.maxZoom):H)}var le={latlng:y,bounds:N,timestamp:i.timestamp};for(var xe in i.coords)typeof i.coords[xe]=="number"&&(le[xe]=i.coords[xe]);this.fire("locationfound",le)}},addHandler:function(i,c){if(!c)return this;var h=this[i]=new c(this);return this._handlers.push(h),this.options[i]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),tn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ue(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)tn(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,c){var h="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),y=vt("div",h,c||this._mapPane);return i&&(this._panes[i]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),c=this.unproject(i.getBottomLeft()),h=this.unproject(i.getTopRight());return new P(c,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,c,h){i=ce(i),h=be(h||[0,0]);var y=this.getZoom()||0,N=this.getMinZoom(),E=this.getMaxZoom(),H=i.getNorthWest(),le=i.getSouthEast(),xe=this.getSize().subtract(h),Ae=te(this.project(le,y),this.project(H,y)).getSize(),Pe=Oe.any3d?this.options.zoomSnap:1,We=xe.x/Ae.x,gt=xe.y/Ae.y,Gn=c?Math.max(We,gt):Math.min(We,gt);return y=this.getScaleZoom(Gn,y),Pe&&(y=Math.round(y/(Pe/100))*(Pe/100),y=c?Math.ceil(y/Pe)*Pe:Math.floor(y/Pe)*Pe),Math.max(N,Math.min(E,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ne(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,c){var h=this._getTopLeftPoint(i,c);return new D(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,c){var h=this.options.crs;return c=c===void 0?this._zoom:c,h.scale(i)/h.scale(c)},getScaleZoom:function(i,c){var h=this.options.crs;c=c===void 0?this._zoom:c;var y=h.zoom(i*h.scale(c));return isNaN(y)?1/0:y},project:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(Ee(i),c)},unproject:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(be(i),c)},layerPointToLatLng:function(i){var c=be(i).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(i){var c=this.project(Ee(i))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(Ee(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ce(i))},distance:function(i,c){return this.options.crs.distance(Ee(i),Ee(c))},containerPointToLayerPoint:function(i){return be(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return be(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var c=this.containerPointToLayerPoint(be(i));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ee(i)))},mouseEventToContainerPoint:function(i){return dr(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var c=this._container=Cs(i);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");rt(c,"scroll",this._onScroll,this),this._containerId=v(c)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Oe.any3d,mt(i,"leaflet-container"+(Oe.touch?" leaflet-touch":"")+(Oe.retina?" leaflet-retina":"")+(Oe.ielt9?" leaflet-oldie":"")+(Oe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=As(i,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),on(this._mapPane,new ne(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(mt(i.markerPane,"leaflet-zoom-hide"),mt(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,c,h){on(this._mapPane,new ne(0,0));var y=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var N=this._zoom!==c;this._moveStart(N,h)._move(i,c)._moveEnd(N),this.fire("viewreset"),y&&this.fire("load")},_moveStart:function(i,c){return i&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(i,c,h,y){c===void 0&&(c=this._zoom);var N=this._zoom!==c;return this._zoom=c,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),y?h&&h.pinch&&this.fire("zoom",h):((N||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ue(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){on(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[v(this._container)]=this;var c=i?$t:rt;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Oe.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ue(this._resizeRequest),this._resizeRequest=fe(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,c){for(var h=[],y,N=c==="mouseout"||c==="mouseover",E=i.target||i.srcElement,H=!1;E;){if(y=this._targets[v(E)],y&&(c==="click"||c==="preclick")&&this._draggableMoved(y)){H=!0;break}if(y&&y.listens(c,!0)&&(N&&!vs(E,i)||(h.push(y),N))||E===this._container)break;E=E.parentNode}return!h.length&&!H&&!N&&this.listens(c,!0)&&(h=[this]),h},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var c=i.target||i.srcElement;if(!(!this._loaded||c._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(c))){var h=i.type;h==="mousedown"&&yi(c),this._fireDOMEvent(i,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,c,h){if(i.type==="click"){var y=d({},i);y.type="preclick",this._fireDOMEvent(y,y.type,h)}var N=this._findEventTargets(i,c);if(h){for(var E=[],H=0;H<h.length;H++)h[H].listens(c,!0)&&E.push(h[H]);N=E.concat(N)}if(N.length){c==="contextmenu"&&Nn(i);var le=N[0],xe={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Ae=le.getLatLng&&(!le._radius||le._radius<=10);xe.containerPoint=Ae?this.latLngToContainerPoint(le.getLatLng()):this.mouseEventToContainerPoint(i),xe.layerPoint=this.containerPointToLayerPoint(xe.containerPoint),xe.latlng=Ae?le.getLatLng():this.layerPointToLatLng(xe.layerPoint)}for(H=0;H<N.length;H++)if(N[H].fire(c,xe,!0),xe.originalEvent._stopped||N[H].options.bubblingMouseEvents===!1&&K(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,c=this._handlers.length;i<c;i++)this._handlers[i].disable()},whenReady:function(i,c){return this._loaded?i.call(c||this,{target:this}):this.on("load",i,c),this},_getMapPanePos:function(){return Ms(this._mapPane)||new ne(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,c){var h=i&&c!==void 0?this._getNewPixelOrigin(i,c):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,c){var h=this.getSize()._divideBy(2);return this.project(i,c)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,c,h){var y=this._getNewPixelOrigin(h,c);return this.project(i,c)._subtract(y)},_latLngBoundsToNewLayerBounds:function(i,c,h){var y=this._getNewPixelOrigin(h,c);return te([this.project(i.getSouthWest(),c)._subtract(y),this.project(i.getNorthWest(),c)._subtract(y),this.project(i.getSouthEast(),c)._subtract(y),this.project(i.getNorthEast(),c)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,c,h){if(!h)return i;var y=this.project(i,c),N=this.getSize().divideBy(2),E=new D(y.subtract(N),y.add(N)),H=this._getBoundsOffset(E,h,c);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?i:this.unproject(y.add(H),c)},_limitOffset:function(i,c){if(!c)return i;var h=this.getPixelBounds(),y=new D(h.min.add(i),h.max.add(i));return i.add(this._getBoundsOffset(y,c))},_getBoundsOffset:function(i,c,h){var y=te(this.project(c.getNorthEast(),h),this.project(c.getSouthWest(),h)),N=y.min.subtract(i.min),E=y.max.subtract(i.max),H=this._rebound(N.x,-E.x),le=this._rebound(N.y,-E.y);return new ne(H,le)},_rebound:function(i,c){return i+c>0?Math.round(i-c)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(c))},_limitZoom:function(i){var c=this.getMinZoom(),h=this.getMaxZoom(),y=Oe.any3d?this.options.zoomSnap:1;return y&&(i=Math.round(i/y)*y),Math.max(c,Math.min(h,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){xn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,c){var h=this._getCenterOffset(i)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,c),!0)},_createAnimProxy:function(){var i=this._proxy=vt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(c){var h=Ye,y=this._proxy.style[h];ys(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),y===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){tn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),c=this.getZoom();ys(this._proxy,this.project(i,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,c,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(c),N=this._getCenterOffset(i)._divideBy(1-1/y);return h.animate!==!0&&!this.getSize().contains(N)?!1:(fe(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(i,c,!0)},this),!0)},_animateZoom:function(i,c,h,y){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=c,mt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:c,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&xn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function to(i,c){return new Ct(i,c)}var fa=X.extend({options:{position:"topright"},initialize:function(i){A(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var c=this._map;return c&&c.removeControl(this),this.options.position=i,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var c=this._container=this.onAdd(i),h=this.getPosition(),y=i._controlCorners[h];return mt(c,"leaflet-control"),h.indexOf("bottom")!==-1?y.insertBefore(c,y.firstChild):y.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(tn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),bs=function(i){return new fa(i)};Ct.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},c="leaflet-",h=this._controlContainer=vt("div",c+"control-container",this._container);function y(N,E){var H=c+N+" "+c+E;i[N+E]=vt("div",H,h)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)tn(this._controlCorners[i]);tn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var mr=fa.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,c,h,y){return h<y?-1:y<h?1:0}},initialize:function(i,c,h){A(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var y in i)this._addLayer(i[y],y);for(y in c)this._addLayer(c[y],y,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return fa.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,c){return this._addLayer(i,c),this._map?this._update():this},addOverlay:function(i,c){return this._addLayer(i,c,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var c=this._getLayer(v(i));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){mt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(mt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):xn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return xn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",c=this._container=vt("div",i),h=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Vs(c),Ja(c);var y=this._section=vt("section",i+"-list");h&&(this._map.on("click",this.collapse,this),rt(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var N=this._layersLink=vt("a",i+"-toggle",c);N.href="#",N.title="Layers",N.setAttribute("role","button"),rt(N,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){Nn(E),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=vt("div",i+"-base",y),this._separator=vt("div",i+"-separator",y),this._overlaysList=vt("div",i+"-overlays",y),c.appendChild(y)},_getLayer:function(i){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&v(this._layers[c].layer)===i)return this._layers[c]},_addLayer:function(i,c,h){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:c,overlay:h}),this.options.sortLayers&&this._layers.sort(f(function(y,N){return this.options.sortFunction(y.layer,N.layer,y.name,N.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Na(this._baseLayersList),Na(this._overlaysList),this._layerControlInputs=[];var i,c,h,y,N=0;for(h=0;h<this._layers.length;h++)y=this._layers[h],this._addItem(y),c=c||y.overlay,i=i||!y.overlay,N+=y.overlay?0:1;return this.options.hideSingleBase&&(i=i&&N>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=c&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var c=this._getLayer(v(i.target)),h=c.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;h&&this._map.fire(h,c)},_createRadioElement:function(i,c){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(c?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=h,y.firstChild},_addItem:function(i){var c=document.createElement("label"),h=this._map.hasLayer(i.layer),y;i.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=h):y=this._createRadioElement("leaflet-base-layers_"+v(this),h),this._layerControlInputs.push(y),y.layerId=v(i.layer),rt(y,"click",this._onInputClick,this);var N=document.createElement("span");N.innerHTML=" "+i.name;var E=document.createElement("span");c.appendChild(E),E.appendChild(y),E.appendChild(N);var H=i.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,c,h,y=[],N=[];this._handlingClick=!0;for(var E=i.length-1;E>=0;E--)c=i[E],h=this._getLayer(c.layerId).layer,c.checked?y.push(h):c.checked||N.push(h);for(E=0;E<N.length;E++)this._map.hasLayer(N[E])&&this._map.removeLayer(N[E]);for(E=0;E<y.length;E++)this._map.hasLayer(y[E])||this._map.addLayer(y[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,c,h,y=this._map.getZoom(),N=i.length-1;N>=0;N--)c=i[N],h=this._getLayer(c.layerId).layer,c.disabled=h.options.minZoom!==void 0&&y<h.options.minZoom||h.options.maxZoom!==void 0&&y>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,rt(i,"click",Nn),this.expand();var c=this;setTimeout(function(){$t(i,"click",Nn),c._preventClick=!1})}}),yc=function(i,c,h){return new mr(i,c,h)},no=fa.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var c="leaflet-control-zoom",h=vt("div",c+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,c+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,c+"-out",h,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,c,h,y,N){var E=vt("a",h,y);return E.innerHTML=i,E.href="#",E.title=c,E.setAttribute("role","button"),E.setAttribute("aria-label",c),Vs(E),rt(E,"click",zs),rt(E,"click",N,this),rt(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var i=this._map,c="leaflet-disabled";xn(this._zoomInButton,c),xn(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(mt(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(mt(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ct.mergeOptions({zoomControl:!0}),Ct.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new no,this.addControl(this.zoomControl))});var Md=function(i){return new no(i)},vc=fa.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var c="leaflet-control-scale",h=vt("div",c),y=this.options;return this._addScales(y,c+"-line",h),i.on(y.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),h},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,c,h){i.metric&&(this._mScale=vt("div",c,h)),i.imperial&&(this._iScale=vt("div",c,h))},_update:function(){var i=this._map,c=i.getSize().y/2,h=i.distance(i.containerPointToLatLng([0,c]),i.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(h)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var c=this._getRoundNum(i),h=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,h,c/i)},_updateImperial:function(i){var c=i*3.2808399,h,y,N;c>5280?(h=c/5280,y=this._getRoundNum(h),this._updateScale(this._iScale,y+" mi",y/h)):(N=this._getRoundNum(c),this._updateScale(this._iScale,N+" ft",N/c))},_updateScale:function(i,c,h){i.style.width=Math.round(this.options.maxWidth*h)+"px",i.innerHTML=c},_getRoundNum:function(i){var c=Math.pow(10,(Math.floor(i)+"").length-1),h=i/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,c*h}}),ao=function(i){return new vc(i)},zd='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',so=fa.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Oe.inlineSvg?zd+" ":"")+"Leaflet</a>"},initialize:function(i){A(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=vt("div","leaflet-control-attribution"),Vs(this._container);for(var c in i._layers)i._layers[c].getAttribution&&this.addAttribution(i._layers[c].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var c in this._attributions)this._attributions[c]&&i.push(c);var h=[];this.options.prefix&&h.push(this.options.prefix),i.length&&h.push(i.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Ct.mergeOptions({attributionControl:!0}),Ct.addInitHook(function(){this.options.attributionControl&&new so().addTo(this)});var Od=function(i){return new so(i)};fa.Layers=mr,fa.Zoom=no,fa.Scale=vc,fa.Attribution=so,bs.layers=yc,bs.zoom=Md,bs.scale=ao,bs.attribution=Od;var Wa=X.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Wa.addTo=function(i,c){return i.addHandler(c,this),this};var Dd={Events:Z},io=Oe.touch?"touchstart mousedown":"mousedown",Os=M.extend({options:{clickTolerance:3},initialize:function(i,c,h,y){A(this,y),this._element=i,this._dragStartTarget=c||i,this._preventOutline=h},enable:function(){this._enabled||(rt(this._dragStartTarget,io,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Os._dragging===this&&this.finishDrag(!0),$t(this._dragStartTarget,io,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!$l(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Os._dragging===this&&this.finishDrag();return}if(!(Os._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Os._dragging=this,this._preventOutline&&yi(this._element),$r(),xi(),!this._moving)){this.fire("down");var c=i.touches?i.touches[0]:i,h=Jr(this._element);this._startPoint=new ne(c.clientX,c.clientY),this._startPos=Ms(this._element),this._parentScale=or(h);var y=i.type==="mousedown";rt(document,y?"mousemove":"touchmove",this._onMove,this),rt(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var c=i.touches&&i.touches.length===1?i.touches[0]:i,h=new ne(c.clientX,c.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Nn(i),this._moved||(this.fire("dragstart"),this._moved=!0,mt(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),mt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),on(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){xn(document.body,"leaflet-dragging"),this._lastTarget&&(xn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$t(document,"mousemove touchmove",this._onMove,this),$t(document,"mouseup touchend touchcancel",this._onUp,this),lr(),Xa();var c=this._moved&&this._moving;this._moving=!1,Os._dragging=!1,c&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function bc(i,c,h){var y,N=[1,4,2,8],E,H,le,xe,Ae,Pe,We,gt;for(E=0,Pe=i.length;E<Pe;E++)i[E]._code=Ys(i[E],c);for(le=0;le<4;le++){for(We=N[le],y=[],E=0,Pe=i.length,H=Pe-1;E<Pe;H=E++)xe=i[E],Ae=i[H],xe._code&We?Ae._code&We||(gt=el(Ae,xe,We,c,h),gt._code=Ys(gt,c),y.push(gt)):(Ae._code&We&&(gt=el(Ae,xe,We,c,h),gt._code=Ys(gt,c),y.push(gt)),y.push(xe));i=y}return i}function _c(i,c){var h,y,N,E,H,le,xe,Ae,Pe;if(!i||i.length===0)throw new Error("latlngs not passed");Sa(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var We=Ee([0,0]),gt=ce(i),Gn=gt.getNorthWest().distanceTo(gt.getSouthWest())*gt.getNorthEast().distanceTo(gt.getNorthWest());Gn<1700&&(We=ro(i));var jn=i.length,pa=[];for(h=0;h<jn;h++){var qt=Ee(i[h]);pa.push(c.project(Ee([qt.lat-We.lat,qt.lng-We.lng])))}for(le=xe=Ae=0,h=0,y=jn-1;h<jn;y=h++)N=pa[h],E=pa[y],H=N.y*E.x-E.y*N.x,xe+=(N.x+E.x)*H,Ae+=(N.y+E.y)*H,le+=H*3;le===0?Pe=pa[0]:Pe=[xe/le,Ae/le];var Zt=c.unproject(be(Pe));return Ee([Zt.lat+We.lat,Zt.lng+We.lng])}function ro(i){for(var c=0,h=0,y=0,N=0;N<i.length;N++){var E=Ee(i[N]);c+=E.lat,h+=E.lng,y++}return Ee([c/y,h/y])}var lo={__proto__:null,clipPolygon:bc,polygonCenter:_c,centroid:ro};function Nc(i,c){if(!c||!i.length)return i.slice();var h=c*c;return i=Ld(i,h),i=Sc(i,h),i}function jc(i,c,h){return Math.sqrt(hr(i,c,h,!0))}function Rd(i,c,h){return hr(i,c,h)}function Sc(i,c){var h=i.length,y=typeof Uint8Array<"u"?Uint8Array:Array,N=new y(h);N[0]=N[h-1]=1,oo(i,N,c,0,h-1);var E,H=[];for(E=0;E<h;E++)N[E]&&H.push(i[E]);return H}function oo(i,c,h,y,N){var E=0,H,le,xe;for(le=y+1;le<=N-1;le++)xe=hr(i[le],i[y],i[N],!0),xe>E&&(H=le,E=xe);E>h&&(c[H]=1,oo(i,c,h,y,H),oo(i,c,h,H,N))}function Ld(i,c){for(var h=[i[0]],y=1,N=0,E=i.length;y<E;y++)Pd(i[y],i[N])>c&&(h.push(i[y]),N=y);return N<E-1&&h.push(i[E-1]),h}var wc;function Ec(i,c,h,y,N){var E=y?wc:Ys(i,h),H=Ys(c,h),le,xe,Ae;for(wc=H;;){if(!(E|H))return[i,c];if(E&H)return!1;le=E||H,xe=el(i,c,le,h,N),Ae=Ys(xe,h),le===E?(i=xe,E=Ae):(c=xe,H=Ae)}}function el(i,c,h,y,N){var E=c.x-i.x,H=c.y-i.y,le=y.min,xe=y.max,Ae,Pe;return h&8?(Ae=i.x+E*(xe.y-i.y)/H,Pe=xe.y):h&4?(Ae=i.x+E*(le.y-i.y)/H,Pe=le.y):h&2?(Ae=xe.x,Pe=i.y+H*(xe.x-i.x)/E):h&1&&(Ae=le.x,Pe=i.y+H*(le.x-i.x)/E),new ne(Ae,Pe,N)}function Ys(i,c){var h=0;return i.x<c.min.x?h|=1:i.x>c.max.x&&(h|=2),i.y<c.min.y?h|=4:i.y>c.max.y&&(h|=8),h}function Pd(i,c){var h=c.x-i.x,y=c.y-i.y;return h*h+y*y}function hr(i,c,h,y){var N=c.x,E=c.y,H=h.x-N,le=h.y-E,xe=H*H+le*le,Ae;return xe>0&&(Ae=((i.x-N)*H+(i.y-E)*le)/xe,Ae>1?(N=h.x,E=h.y):Ae>0&&(N+=H*Ae,E+=le*Ae)),H=i.x-N,le=i.y-E,y?H*H+le*le:new ne(N,E)}function Sa(i){return!R(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function tl(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Sa(i)}function _i(i,c){var h,y,N,E,H,le,xe,Ae;if(!i||i.length===0)throw new Error("latlngs not passed");Sa(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Pe=Ee([0,0]),We=ce(i),gt=We.getNorthWest().distanceTo(We.getSouthWest())*We.getNorthEast().distanceTo(We.getNorthWest());gt<1700&&(Pe=ro(i));var Gn=i.length,jn=[];for(h=0;h<Gn;h++){var pa=Ee(i[h]);jn.push(c.project(Ee([pa.lat-Pe.lat,pa.lng-Pe.lng])))}for(h=0,y=0;h<Gn-1;h++)y+=jn[h].distanceTo(jn[h+1])/2;if(y===0)Ae=jn[0];else for(h=0,E=0;h<Gn-1;h++)if(H=jn[h],le=jn[h+1],N=H.distanceTo(le),E+=N,E>y){xe=(E-y)/N,Ae=[le.x-xe*(le.x-H.x),le.y-xe*(le.y-H.y)];break}var qt=c.unproject(be(Ae));return Ee([qt.lat+Pe.lat,qt.lng+Pe.lng])}var Id={__proto__:null,simplify:Nc,pointToSegmentDistance:jc,closestPointOnSegment:Rd,clipSegment:Ec,_getEdgeIntersection:el,_getBitCode:Ys,_sqClosestPointOnSegment:hr,isFlat:Sa,_flat:tl,polylineCenter:_i},nl={project:function(i){return new ne(i.lng,i.lat)},unproject:function(i){return new de(i.y,i.x)},bounds:new D([-180,-90],[180,90])},al={R:6378137,R_MINOR:6356752314245179e-9,bounds:new D([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var c=Math.PI/180,h=this.R,y=i.lat*c,N=this.R_MINOR/h,E=Math.sqrt(1-N*N),H=E*Math.sin(y),le=Math.tan(Math.PI/4-y/2)/Math.pow((1-H)/(1+H),E/2);return y=-h*Math.log(Math.max(le,1e-10)),new ne(i.lng*c*h,y)},unproject:function(i){for(var c=180/Math.PI,h=this.R,y=this.R_MINOR/h,N=Math.sqrt(1-y*y),E=Math.exp(-i.y/h),H=Math.PI/2-2*Math.atan(E),le=0,xe=.1,Ae;le<15&&Math.abs(xe)>1e-7;le++)Ae=N*Math.sin(H),Ae=Math.pow((1-Ae)/(1+Ae),N/2),xe=Math.PI/2-2*Math.atan(E*Ae)-H,H+=xe;return new de(H*c,i.x*c/h)}},kc={__proto__:null,LonLat:nl,Mercator:al,SphericalMercator:Ke},Tc=d({},Ge,{code:"EPSG:3395",projection:al,transformation:(function(){var i=.5/(Math.PI*al.R);return lt(i,.5,-i,.5)})()}),co=d({},Ge,{code:"EPSG:4326",projection:nl,transformation:lt(1/180,1,-1/180,.5)}),Ni=d({},De,{projection:nl,transformation:lt(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,c){var h=c.lng-i.lng,y=c.lat-i.lat;return Math.sqrt(h*h+y*y)},infinite:!0});De.Earth=Ge,De.EPSG3395=Tc,De.EPSG3857=dt,De.EPSG900913=ze,De.EPSG4326=co,De.Simple=Ni;var qa=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[v(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[v(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var c=i.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var h=this.getEvents();c.on(h,this),this.once("remove",function(){c.off(h,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Ct.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var c=v(i);return this._layers[c]?this:(this._layers[c]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var c=v(i);return this._layers[c]?(this._loaded&&i.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return v(i)in this._layers},eachLayer:function(i,c){for(var h in this._layers)i.call(c,this._layers[h]);return this},_addLayers:function(i){i=i?R(i)?i:[i]:[];for(var c=0,h=i.length;c<h;c++)this.addLayer(i[c])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[v(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var c=v(i);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,c=-1/0,h=this._getZoomSpan();for(var y in this._zoomBoundLayers){var N=this._zoomBoundLayers[y].options;i=N.minZoom===void 0?i:Math.min(i,N.minZoom),c=N.maxZoom===void 0?c:Math.max(c,N.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=i===1/0?void 0:i,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ji=qa.extend({initialize:function(i,c){A(this,c),this._layers={};var h,y;if(i)for(h=0,y=i.length;h<y;h++)this.addLayer(i[h])},addLayer:function(i){var c=this.getLayerId(i);return this._layers[c]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var c=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(i){var c=typeof i=="number"?i:this.getLayerId(i);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var c=Array.prototype.slice.call(arguments,1),h,y;for(h in this._layers)y=this._layers[h],y[i]&&y[i].apply(y,c);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,c){for(var h in this._layers)i.call(c,this._layers[h]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return v(i)}}),Bd=function(i,c){return new ji(i,c)},es=ji.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),ji.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),ji.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new P;for(var c in this._layers){var h=this._layers[c];i.extend(h.getBounds?h.getBounds():h.getLatLng())}return i}}),Cc=function(i,c){return new es(i,c)},ts=X.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){A(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,c){var h=this._getIconUrl(i);if(!h){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(h,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(y,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(i,c){var h=this.options,y=h[c+"Size"];typeof y=="number"&&(y=[y,y]);var N=be(y),E=be(c==="shadow"&&h.shadowAnchor||h.iconAnchor||N&&N.divideBy(2,!0));i.className="leaflet-marker-"+c+" "+(h.className||""),E&&(i.style.marginLeft=-E.x+"px",i.style.marginTop=-E.y+"px"),N&&(i.style.width=N.x+"px",i.style.height=N.y+"px")},_createImg:function(i,c){return c=c||document.createElement("img"),c.src=i,c},_getIconUrl:function(i){return Oe.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function fr(i){return new ts(i)}var pr=ts.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof pr.imagePath!="string"&&(pr.imagePath=this._detectIconPath()),(this.options.imagePath||pr.imagePath)+ts.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var c=function(h,y,N){var E=y.exec(h);return E&&E[N]};return i=c(i,/^url\((['"])?(.+)\1\)$/,2),i&&c(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=vt("div","leaflet-default-icon-path",document.body),c=As(i,"background-image")||As(i,"backgroundImage");if(document.body.removeChild(i),c=this._stripUrl(c),c)return c;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),xr=Wa.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Os(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),mt(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&xn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var c=this._marker,h=c._map,y=this._marker.options.autoPanSpeed,N=this._marker.options.autoPanPadding,E=Ms(c._icon),H=h.getPixelBounds(),le=h.getPixelOrigin(),xe=te(H.min._subtract(le).add(N),H.max._subtract(le).subtract(N));if(!xe.contains(E)){var Ae=be((Math.max(xe.max.x,E.x)-xe.max.x)/(H.max.x-xe.max.x)-(Math.min(xe.min.x,E.x)-xe.min.x)/(H.min.x-xe.min.x),(Math.max(xe.max.y,E.y)-xe.max.y)/(H.max.y-xe.max.y)-(Math.min(xe.min.y,E.y)-xe.min.y)/(H.min.y-xe.min.y)).multiplyBy(y);h.panBy(Ae,{animate:!1}),this._draggable._newPos._add(Ae),this._draggable._startPos._add(Ae),on(c._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=fe(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(ue(this._panRequest),this._panRequest=fe(this._adjustPan.bind(this,i)))},_onDrag:function(i){var c=this._marker,h=c._shadow,y=Ms(c._icon),N=c._map.layerPointToLatLng(y);h&&on(h,y),c._latlng=N,i.latlng=N,i.oldLatLng=this._oldLatLng,c.fire("move",i).fire("drag",i)},_onDragEnd:function(i){ue(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),gr=qa.extend({options:{icon:new pr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,c){A(this,c),this._latlng=Ee(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var c=this._latlng;return this._latlng=Ee(i),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=i.icon.createIcon(this._icon),y=!1;h!==this._icon&&(this._icon&&this._removeIcon(),y=!0,i.title&&(h.title=i.title),h.tagName==="IMG"&&(h.alt=i.alt||"")),mt(h,c),i.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&rt(h,"focus",this._panOnFocus,this);var N=i.icon.createShadow(this._shadow),E=!1;N!==this._shadow&&(this._removeShadow(),E=!0),N&&(mt(N,c),N.alt=""),this._shadow=N,i.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),N&&E&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$t(this._icon,"focus",this._panOnFocus,this),tn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&tn(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&on(this._icon,i),this._shadow&&on(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(mt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),xr)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new xr(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&mn(this._icon,i),this._shadow&&mn(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var c=this.options.icon.options,h=c.iconSize?be(c.iconSize):be(0,0),y=c.iconAnchor?be(c.iconAnchor):be(0,0);i.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:h.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ac(i,c){return new gr(i,c)}var ns=qa.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return A(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Si=ns.extend({options:{fill:!0,radius:10},initialize:function(i,c){A(this,c),this._latlng=Ee(i),this._radius=this.options.radius},setLatLng:function(i){var c=this._latlng;return this._latlng=Ee(i),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var c=i&&i.radius||this._radius;return ns.prototype.setStyle.call(this,i),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,c=this._radiusY||i,h=this._clickTolerance(),y=[i+h,c+h];this._pxBounds=new D(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Mc(i,c){return new Si(i,c)}var sl=Si.extend({initialize:function(i,c,h){if(typeof c=="number"&&(c=d({},h,{radius:c})),A(this,c),this._latlng=Ee(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new P(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:ns.prototype.setStyle,_project:function(){var i=this._latlng.lng,c=this._latlng.lat,h=this._map,y=h.options.crs;if(y.distance===Ge.distance){var N=Math.PI/180,E=this._mRadius/Ge.R/N,H=h.project([c+E,i]),le=h.project([c-E,i]),xe=H.add(le).divideBy(2),Ae=h.unproject(xe).lat,Pe=Math.acos((Math.cos(E*N)-Math.sin(c*N)*Math.sin(Ae*N))/(Math.cos(c*N)*Math.cos(Ae*N)))/N;(isNaN(Pe)||Pe===0)&&(Pe=E/Math.cos(Math.PI/180*c)),this._point=xe.subtract(h.getPixelOrigin()),this._radius=isNaN(Pe)?0:xe.x-h.project([Ae,i-Pe]).x,this._radiusY=xe.y-H.y}else{var We=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(We).x}this._updateBounds()}});function zc(i,c,h){return new sl(i,c,h)}var _s=ns.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,c){A(this,c),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var c=1/0,h=null,y=hr,N,E,H=0,le=this._parts.length;H<le;H++)for(var xe=this._parts[H],Ae=1,Pe=xe.length;Ae<Pe;Ae++){N=xe[Ae-1],E=xe[Ae];var We=y(i,N,E,!0);We<c&&(c=We,h=y(i,N,E))}return h&&(h.distance=Math.sqrt(c)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _i(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,c){return c=c||this._defaultShape(),i=Ee(i),c.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new P,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Sa(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var c=[],h=Sa(i),y=0,N=i.length;y<N;y++)h?(c[y]=Ee(i[y]),this._bounds.extend(c[y])):c[y]=this._convertLatLngs(i[y]);return c},_project:function(){var i=new D;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),c=new ne(i,i);this._rawPxBounds&&(this._pxBounds=new D([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(i,c,h){var y=i[0]instanceof de,N=i.length,E,H;if(y){for(H=[],E=0;E<N;E++)H[E]=this._map.latLngToLayerPoint(i[E]),h.extend(H[E]);c.push(H)}else for(E=0;E<N;E++)this._projectLatlngs(i[E],c,h)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,h,y,N,E,H,le,xe;for(h=0,N=0,E=this._rings.length;h<E;h++)for(xe=this._rings[h],y=0,H=xe.length;y<H-1;y++)le=Ec(xe[y],xe[y+1],i,y,!0),le&&(c[N]=c[N]||[],c[N].push(le[0]),(le[1]!==xe[y+1]||y===H-2)&&(c[N].push(le[1]),N++))}},_simplifyPoints:function(){for(var i=this._parts,c=this.options.smoothFactor,h=0,y=i.length;h<y;h++)i[h]=Nc(i[h],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,c){var h,y,N,E,H,le,xe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(h=0,E=this._parts.length;h<E;h++)for(le=this._parts[h],y=0,H=le.length,N=H-1;y<H;N=y++)if(!(!c&&y===0)&&jc(i,le[N],le[y])<=xe)return!0;return!1}});function Ud(i,c){return new _s(i,c)}_s._flat=tl;var wi=_s.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _c(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var c=_s.prototype._convertLatLngs.call(this,i),h=c.length;return h>=2&&c[0]instanceof de&&c[0].equals(c[h-1])&&c.pop(),c},_setLatLngs:function(i){_s.prototype._setLatLngs.call(this,i),Sa(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Sa(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,c=this.options.weight,h=new ne(c,c);if(i=new D(i.min.subtract(h),i.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,N=this._rings.length,E;y<N;y++)E=bc(this._rings[y],i,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var c=!1,h,y,N,E,H,le,xe,Ae;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(E=0,xe=this._parts.length;E<xe;E++)for(h=this._parts[E],H=0,Ae=h.length,le=Ae-1;H<Ae;le=H++)y=h[H],N=h[le],y.y>i.y!=N.y>i.y&&i.x<(N.x-y.x)*(i.y-y.y)/(N.y-y.y)+y.x&&(c=!c);return c||_s.prototype._containsPoint.call(this,i,!0)}});function Fd(i,c){return new wi(i,c)}var Ns=es.extend({initialize:function(i,c){A(this,c),this._layers={},i&&this.addData(i)},addData:function(i){var c=R(i)?i:i.features,h,y,N;if(c){for(h=0,y=c.length;h<y;h++)N=c[h],(N.geometries||N.geometry||N.features||N.coordinates)&&this.addData(N);return this}var E=this.options;if(E.filter&&!E.filter(i))return this;var H=Yn(i,E);return H?(H.feature=ll(i),H.defaultOptions=H.options,this.resetStyle(H),E.onEachFeature&&E.onEachFeature(i,H),this.addLayer(H)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=d({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(c){this._setLayerStyle(c,i)},this)},_setLayerStyle:function(i,c){i.setStyle&&(typeof c=="function"&&(c=c(i.feature)),i.setStyle(c))}});function Yn(i,c){var h=i.type==="Feature"?i.geometry:i,y=h?h.coordinates:null,N=[],E=c&&c.pointToLayer,H=c&&c.coordsToLatLng||il,le,xe,Ae,Pe;if(!y&&!h)return null;switch(h.type){case"Point":return le=H(y),Ei(E,i,le,c);case"MultiPoint":for(Ae=0,Pe=y.length;Ae<Pe;Ae++)le=H(y[Ae]),N.push(Ei(E,i,le,c));return new es(N);case"LineString":case"MultiLineString":return xe=yr(y,h.type==="LineString"?0:1,H),new _s(xe,c);case"Polygon":case"MultiPolygon":return xe=yr(y,h.type==="Polygon"?1:2,H),new wi(xe,c);case"GeometryCollection":for(Ae=0,Pe=h.geometries.length;Ae<Pe;Ae++){var We=Yn({geometry:h.geometries[Ae],type:"Feature",properties:i.properties},c);We&&N.push(We)}return new es(N);case"FeatureCollection":for(Ae=0,Pe=h.features.length;Ae<Pe;Ae++){var gt=Yn(h.features[Ae],c);gt&&N.push(gt)}return new es(N);default:throw new Error("Invalid GeoJSON object.")}}function Ei(i,c,h,y){return i?i(c,h):new gr(h,y&&y.markersInheritOptions&&y)}function il(i){return new de(i[1],i[0],i[2])}function yr(i,c,h){for(var y=[],N=0,E=i.length,H;N<E;N++)H=c?yr(i[N],c-1,h):(h||il)(i[N]),y.push(H);return y}function rl(i,c){return i=Ee(i),i.alt!==void 0?[T(i.lng,c),T(i.lat,c),T(i.alt,c)]:[T(i.lng,c),T(i.lat,c)]}function vr(i,c,h,y){for(var N=[],E=0,H=i.length;E<H;E++)N.push(c?vr(i[E],Sa(i[E])?0:c-1,h,y):rl(i[E],y));return!c&&h&&N.length>0&&N.push(N[0].slice()),N}function Ds(i,c){return i.feature?d({},i.feature,{geometry:c}):ll(c)}function ll(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Rs={toGeoJSON:function(i){return Ds(this,{type:"Point",coordinates:rl(this.getLatLng(),i)})}};gr.include(Rs),sl.include(Rs),Si.include(Rs),_s.include({toGeoJSON:function(i){var c=!Sa(this._latlngs),h=vr(this._latlngs,c?1:0,!1,i);return Ds(this,{type:(c?"Multi":"")+"LineString",coordinates:h})}}),wi.include({toGeoJSON:function(i){var c=!Sa(this._latlngs),h=c&&!Sa(this._latlngs[0]),y=vr(this._latlngs,h?2:c?1:0,!0,i);return c||(y=[y]),Ds(this,{type:(h?"Multi":"")+"Polygon",coordinates:y})}}),ji.include({toMultiPoint:function(i){var c=[];return this.eachLayer(function(h){c.push(h.toGeoJSON(i).geometry.coordinates)}),Ds(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(i){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(i);var h=c==="GeometryCollection",y=[];return this.eachLayer(function(N){if(N.toGeoJSON){var E=N.toGeoJSON(i);if(h)y.push(E.geometry);else{var H=ll(E);H.type==="FeatureCollection"?y.push.apply(y,H.features):y.push(H)}}}),h?Ds(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function ol(i,c){return new Ns(i,c)}var br=ol,ki=qa.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,c,h){this._url=i,this._bounds=ce(c),A(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(mt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){tn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Kn(this._image),this},bringToBack:function(){return this._map&&Gs(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ce(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",c=this._image=i?this._url:vt("img");if(mt(c,"leaflet-image-layer"),this._zoomAnimated&&mt(c,"leaflet-zoom-animated"),this.options.className&&mt(c,this.options.className),c.onselectstart=w,c.onmousemove=w,c.onload=f(this.fire,this,"load"),c.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(i){var c=this._map.getZoomScale(i.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;ys(this._image,h,c)},_reset:function(){var i=this._image,c=new D(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=c.getSize();on(i,c.min),i.style.width=h.x+"px",i.style.height=h.y+"px"},_updateOpacity:function(){mn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),Oc=function(i,c,h){return new ki(i,c,h)},Ls=ki.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",c=this._image=i?this._url:vt("video");if(mt(c,"leaflet-image-layer"),this._zoomAnimated&&mt(c,"leaflet-zoom-animated"),this.options.className&&mt(c,this.options.className),c.onselectstart=w,c.onmousemove=w,c.onloadeddata=f(this.fire,this,"load"),i){for(var h=c.getElementsByTagName("source"),y=[],N=0;N<h.length;N++)y.push(h[N].src);this._url=h.length>0?y:[c.src];return}R(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var H=vt("source");H.src=this._url[E],c.appendChild(H)}}});function Ti(i,c,h){return new Ls(i,c,h)}var cl=ki.extend({_initImage:function(){var i=this._image=this._url;mt(i,"leaflet-image-layer"),this._zoomAnimated&&mt(i,"leaflet-zoom-animated"),this.options.className&&mt(i,this.options.className),i.onselectstart=w,i.onmousemove=w}});function Dc(i,c,h){return new cl(i,c,h)}var $n=qa.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,c){i&&(i instanceof de||R(i))?(this._latlng=Ee(i),A(this,c)):(A(this,i),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&mn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&mn(this._container,1),this.bringToFront(),this.options.interactive&&(mt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(mn(this._container,0),this._removeTimeout=setTimeout(f(tn,void 0,this._container),200)):tn(this._container),this.options.interactive&&(xn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=Ee(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Kn(this._container),this},bringToBack:function(){return this._map&&Gs(this._container),this},_prepareOpen:function(i){var c=this._source;if(!c._map)return!1;if(c instanceof es){c=null;var h=this._source._layers;for(var y in h)if(h[y]._map){c=h[y];break}if(!c)return!1;this._source=c}if(!i)if(c.getCenter)i=c.getCenter();else if(c.getLatLng)i=c.getLatLng();else if(c.getBounds)i=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")i.innerHTML=c;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),c=be(this.options.offset),h=this._getAnchor();this._zoomAnimated?on(this._container,i.add(h)):c=c.add(i).add(h);var y=this._containerBottom=-c.y,N=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=y+"px",this._container.style.left=N+"px"}},_getAnchor:function(){return[0,0]}});Ct.include({_initOverlay:function(i,c,h,y){var N=c;return N instanceof i||(N=new i(y).setContent(c)),h&&N.setLatLng(h),N}}),qa.include({_initOverlay:function(i,c,h,y){var N=h;return N instanceof i?(A(N,y),N._source=this):(N=c&&!y?c:new i(y,this),N.setContent(h)),N}});var _r=$n.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,$n.prototype.openOn.call(this,i)},onAdd:function(i){$n.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ns||this._source.on("preclick",Fa))},onRemove:function(i){$n.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ns||this._source.off("preclick",Fa))},getEvents:function(){var i=$n.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",c=this._container=vt("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=vt("div",i+"-content-wrapper",c);if(this._contentNode=vt("div",i+"-content",h),Vs(c),Ja(this._contentNode),rt(c,"contextmenu",Fa),this._tipContainer=vt("div",i+"-tip-container",c),this._tip=vt("div",i+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=vt("a",i+"-close-button",c);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',rt(y,"click",function(N){Nn(N),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,c=i.style;c.width="",c.whiteSpace="nowrap";var h=i.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),c.width=h+1+"px",c.whiteSpace="",c.height="";var y=i.offsetHeight,N=this.options.maxHeight,E="leaflet-popup-scrolled";N&&y>N?(c.height=N+"px",mt(i,E)):xn(i,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),h=this._getAnchor();on(this._container,c.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,c=parseInt(As(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+c,y=this._containerWidth,N=new ne(this._containerLeft,-h-this._containerBottom);N._add(Ms(this._container));var E=i.layerPointToContainerPoint(N),H=be(this.options.autoPanPadding),le=be(this.options.autoPanPaddingTopLeft||H),xe=be(this.options.autoPanPaddingBottomRight||H),Ae=i.getSize(),Pe=0,We=0;E.x+y+xe.x>Ae.x&&(Pe=E.x+y-Ae.x+xe.x),E.x-Pe-le.x<0&&(Pe=E.x-le.x),E.y+h+xe.y>Ae.y&&(We=E.y+h-Ae.y+xe.y),E.y-We-le.y<0&&(We=E.y-le.y),(Pe||We)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([Pe,We]))}},_getAnchor:function(){return be(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Rc=function(i,c){return new _r(i,c)};Ct.mergeOptions({closePopupOnClick:!0}),Ct.include({openPopup:function(i,c,h){return this._initOverlay(_r,i,c,h).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),qa.include({bindPopup:function(i,c){return this._popup=this._initOverlay(_r,this._popup,i,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof es||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){zs(i);var c=i.layer||i.target;if(this._popup._source===c&&!(c instanceof ns)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=c,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Nr=$n.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){$n.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){$n.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=$n.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",c=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=vt("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var c,h,y=this._map,N=this._container,E=y.latLngToContainerPoint(y.getCenter()),H=y.layerPointToContainerPoint(i),le=this.options.direction,xe=N.offsetWidth,Ae=N.offsetHeight,Pe=be(this.options.offset),We=this._getAnchor();le==="top"?(c=xe/2,h=Ae):le==="bottom"?(c=xe/2,h=0):le==="center"?(c=xe/2,h=Ae/2):le==="right"?(c=0,h=Ae/2):le==="left"?(c=xe,h=Ae/2):H.x<E.x?(le="right",c=0,h=Ae/2):(le="left",c=xe+(Pe.x+We.x)*2,h=Ae/2),i=i.subtract(be(c,h,!0)).add(Pe).add(We),xn(N,"leaflet-tooltip-right"),xn(N,"leaflet-tooltip-left"),xn(N,"leaflet-tooltip-top"),xn(N,"leaflet-tooltip-bottom"),mt(N,"leaflet-tooltip-"+le),on(N,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&mn(this._container,i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(c)},_getAnchor:function(){return be(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),qd=function(i,c){return new Nr(i,c)};Ct.include({openTooltip:function(i,c,h){return this._initOverlay(Nr,i,c,h).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),qa.include({bindTooltip:function(i,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Nr,this._tooltip,i,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var c=i?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[c](h),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof es||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&(rt(c,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),rt(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var c=i.latlng,h,y;this._tooltip.options.sticky&&i.originalEvent&&(h=this._map.mouseEventToContainerPoint(i.originalEvent),y=this._map.containerPointToLayerPoint(h),c=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(c)}});var Lc=ts.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var c=i&&i.tagName==="DIV"?i:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Na(c),c.appendChild(h.html)):c.innerHTML=h.html!==!1?h.html:"",h.bgPos){var y=be(h.bgPos);c.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function Zd(i){return new Lc(i)}ts.Default=pr;var Ci=qa.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Oe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){A(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),tn(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Kn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Gs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof ne?i:new ne(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var c=this.getPane().children,h=-i(-1/0,1/0),y=0,N=c.length,E;y<N;y++)E=c[y].style.zIndex,c[y]!==this._container&&E&&(h=i(h,+E));isFinite(h)&&(this.options.zIndex=h+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Oe.ielt9){mn(this._container,this.options.opacity);var i=+new Date,c=!1,h=!1;for(var y in this._tiles){var N=this._tiles[y];if(!(!N.current||!N.loaded)){var E=Math.min(1,(i-N.loaded)/200);mn(N.el,E),E<1?c=!0:(N.active?h=!0:this._onOpaqueTile(N),N.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),c&&(ue(this._fadeFrame),this._fadeFrame=fe(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=vt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,c=this.options.maxZoom;if(i!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===i?(this._levels[h].el.style.zIndex=c-Math.abs(i-h),this._onUpdateLevel(h)):(tn(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var y=this._levels[i],N=this._map;return y||(y=this._levels[i]={},y.el=vt("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=c,y.origin=N.project(N.unproject(N.getPixelOrigin()),i).round(),y.zoom=i,this._setZoomTransform(y,N.getCenter(),N.getZoom()),w(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var i,c,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)c=this._tiles[i],c.retain=c.current;for(i in this._tiles)if(c=this._tiles[i],c.current&&!c.active){var y=c.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var c in this._tiles)this._tiles[c].coords.z===i&&this._removeTile(c)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)tn(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,c,h,y){var N=Math.floor(i/2),E=Math.floor(c/2),H=h-1,le=new ne(+N,+E);le.z=+H;var xe=this._tileCoordsToKey(le),Ae=this._tiles[xe];return Ae&&Ae.active?(Ae.retain=!0,!0):(Ae&&Ae.loaded&&(Ae.retain=!0),H>y?this._retainParent(N,E,H,y):!1)},_retainChildren:function(i,c,h,y){for(var N=2*i;N<2*i+2;N++)for(var E=2*c;E<2*c+2;E++){var H=new ne(N,E);H.z=h+1;var le=this._tileCoordsToKey(H),xe=this._tiles[le];if(xe&&xe.active){xe.retain=!0;continue}else xe&&xe.loaded&&(xe.retain=!0);h+1<y&&this._retainChildren(N,E,h+1,y)}},_resetView:function(i){var c=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var c=this.options;return c.minNativeZoom!==void 0&&i<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<i?c.maxNativeZoom:i},_setView:function(i,c,h,y){var N=Math.round(c);this.options.maxZoom!==void 0&&N>this.options.maxZoom||this.options.minZoom!==void 0&&N<this.options.minZoom?N=void 0:N=this._clampZoom(N);var E=this.options.updateWhenZooming&&N!==this._tileZoom;(!y||E)&&(this._tileZoom=N,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),N!==void 0&&this._update(i),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(i,c)},_setZoomTransforms:function(i,c){for(var h in this._levels)this._setZoomTransform(this._levels[h],i,c)},_setZoomTransform:function(i,c,h){var y=this._map.getZoomScale(h,i.zoom),N=i.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(c,h)).round();Oe.any3d?ys(i.el,N,y):on(i.el,N)},_resetGrid:function(){var i=this._map,c=i.options.crs,h=this._tileSize=this.getTileSize(),y=this._tileZoom,N=this._map.getPixelWorldBounds(this._tileZoom);N&&(this._globalTileRange=this._pxBoundsToTileRange(N)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,c.wrapLng[0]],y).x/h.x),Math.ceil(i.project([0,c.wrapLng[1]],y).x/h.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([c.wrapLat[0],0],y).y/h.x),Math.ceil(i.project([c.wrapLat[1],0],y).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var c=this._map,h=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),y=c.getZoomScale(h,this._tileZoom),N=c.project(i,this._tileZoom).floor(),E=c.getSize().divideBy(y*2);return new D(N.subtract(E),N.add(E))},_update:function(i){var c=this._map;if(c){var h=this._clampZoom(c.getZoom());if(i===void 0&&(i=c.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(i),N=this._pxBoundsToTileRange(y),E=N.getCenter(),H=[],le=this.options.keepBuffer,xe=new D(N.getBottomLeft().subtract([le,-le]),N.getTopRight().add([le,-le]));if(!(isFinite(N.min.x)&&isFinite(N.min.y)&&isFinite(N.max.x)&&isFinite(N.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ae in this._tiles){var Pe=this._tiles[Ae].coords;(Pe.z!==this._tileZoom||!xe.contains(new ne(Pe.x,Pe.y)))&&(this._tiles[Ae].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(i,h);return}for(var We=N.min.y;We<=N.max.y;We++)for(var gt=N.min.x;gt<=N.max.x;gt++){var Gn=new ne(gt,We);if(Gn.z=this._tileZoom,!!this._isValidTile(Gn)){var jn=this._tiles[this._tileCoordsToKey(Gn)];jn?jn.current=!0:H.push(Gn)}}if(H.sort(function(qt,Zt){return qt.distanceTo(E)-Zt.distanceTo(E)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var pa=document.createDocumentFragment();for(gt=0;gt<H.length;gt++)this._addTile(H[gt],pa);this._level.el.appendChild(pa)}}}},_isValidTile:function(i){var c=this._map.options.crs;if(!c.infinite){var h=this._globalTileRange;if(!c.wrapLng&&(i.x<h.min.x||i.x>h.max.x)||!c.wrapLat&&(i.y<h.min.y||i.y>h.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(i);return ce(this.options.bounds).overlaps(y)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var c=this._map,h=this.getTileSize(),y=i.scaleBy(h),N=y.add(h),E=c.unproject(y,i.z),H=c.unproject(N,i.z);return[E,H]},_tileCoordsToBounds:function(i){var c=this._tileCoordsToNwSe(i),h=new P(c[0],c[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var c=i.split(":"),h=new ne(+c[0],+c[1]);return h.z=+c[2],h},_removeTile:function(i){var c=this._tiles[i];c&&(tn(c.el),delete this._tiles[i],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){mt(i,"leaflet-tile");var c=this.getTileSize();i.style.width=c.x+"px",i.style.height=c.y+"px",i.onselectstart=w,i.onmousemove=w,Oe.ielt9&&this.options.opacity<1&&mn(i,this.options.opacity)},_addTile:function(i,c){var h=this._getTilePos(i),y=this._tileCoordsToKey(i),N=this.createTile(this._wrapCoords(i),f(this._tileReady,this,i));this._initTile(N),this.createTile.length<2&&fe(f(this._tileReady,this,i,null,N)),on(N,h),this._tiles[y]={el:N,coords:i,current:!0},c.appendChild(N),this.fire("tileloadstart",{tile:N,coords:i})},_tileReady:function(i,c,h){c&&this.fire("tileerror",{error:c,tile:h,coords:i});var y=this._tileCoordsToKey(i);h=this._tiles[y],h&&(h.loaded=+new Date,this._map._fadeAnimated?(mn(h.el,0),ue(this._fadeFrame),this._fadeFrame=fe(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),c||(mt(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Oe.ielt9||!this._map._fadeAnimated?fe(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var c=new ne(this._wrapX?S(i.x,this._wrapX):i.x,this._wrapY?S(i.y,this._wrapY):i.y);return c.z=i.z,c},_pxBoundsToTileRange:function(i){var c=this.getTileSize();return new D(i.min.unscaleBy(c).floor(),i.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Pc(i){return new Ci(i)}var Ps=Ci.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,c){this._url=i,c=A(this,c),c.detectRetina&&Oe.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,c){return this._url===i&&c===void 0&&(c=!0),this._url=i,c||this.redraw(),this},createTile:function(i,c){var h=document.createElement("img");return rt(h,"load",f(this._tileOnLoad,this,c,h)),rt(h,"error",f(this._tileOnError,this,c,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(i),h},getTileUrl:function(i){var c={r:Oe.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-i.y;this.options.tms&&(c.y=h),c["-y"]=h}return I(this._url,d(c,this.options))},_tileOnLoad:function(i,c){Oe.ielt9?setTimeout(f(i,this,null,c),0):i(null,c)},_tileOnError:function(i,c,h){var y=this.options.errorTileUrl;y&&c.getAttribute("src")!==y&&(c.src=y),i(h,c)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,c=this.options.maxZoom,h=this.options.zoomReverse,y=this.options.zoomOffset;return h&&(i=c-i),i+y},_getSubdomain:function(i){var c=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var i,c;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(c=this._tiles[i].el,c.onload=w,c.onerror=w,!c.complete)){c.src=V;var h=this._tiles[i].coords;tn(c),delete this._tiles[i],this.fire("tileabort",{tile:c,coords:h})}},_removeTile:function(i){var c=this._tiles[i];if(c)return c.el.setAttribute("src",V),Ci.prototype._removeTile.call(this,i)},_tileReady:function(i,c,h){if(!(!this._map||h&&h.getAttribute("src")===V))return Ci.prototype._tileReady.call(this,i,c,h)}});function wa(i,c){return new Ps(i,c)}var jr=Ps.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,c){this._url=i;var h=d({},this.defaultWmsParams);for(var y in c)y in this.options||(h[y]=c[y]);c=A(this,c);var N=c.detectRetina&&Oe.retina?2:1,E=this.getTileSize();h.width=E.x*N,h.height=E.y*N,this.wmsParams=h},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Ps.prototype.onAdd.call(this,i)},getTileUrl:function(i){var c=this._tileCoordsToNwSe(i),h=this._crs,y=te(h.project(c[0]),h.project(c[1])),N=y.min,E=y.max,H=(this._wmsVersion>=1.3&&this._crs===co?[N.y,N.x,E.y,E.x]:[N.x,N.y,E.x,E.y]).join(","),le=Ps.prototype.getTileUrl.call(this,i);return le+z(this.wmsParams,le,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(i,c){return d(this.wmsParams,i),c||this.redraw(),this}});function Ea(i,c){return new jr(i,c)}Ps.WMS=jr,wa.wms=Ea;var ua=qa.extend({options:{padding:.1},initialize:function(i){A(this,i),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),mt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,c){var h=this._map.getZoomScale(c,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),N=this._map.project(this._center,c),E=y.multiplyBy(-h).add(N).subtract(this._map._getNewPixelOrigin(i,c));Oe.any3d?ys(this._container,E,h):on(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,c=this._map.getSize(),h=this._map.containerPointToLayerPoint(c.multiplyBy(-i)).round();this._bounds=new D(h,h.add(c.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ul=ua.extend({options:{tolerance:0},getEvents:function(){var i=ua.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ua.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");rt(i,"mousemove",this._onMouseMove,this),rt(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),rt(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){ue(this._redrawRequest),delete this._ctx,tn(this._container),$t(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var c in this._layers)i=this._layers[c],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ua.prototype._update.call(this);var i=this._bounds,c=this._container,h=i.getSize(),y=Oe.retina?2:1;on(c,i.min),c.width=y*h.x,c.height=y*h.y,c.style.width=h.x+"px",c.style.height=h.y+"px",Oe.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){ua.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[v(i)]=i;var c=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var c=i._order,h=c.next,y=c.prev;h?h.prev=y:this._drawLast=y,y?y.next=h:this._drawFirst=h,delete i._order,delete this._layers[v(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var c=i.options.dashArray.split(/[, ]+/),h=[],y,N;for(N=0;N<c.length;N++){if(y=Number(c[N]),isNaN(y))return;h.push(y)}i.options._dashArray=h}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||fe(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var c=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new D,this._redrawBounds.extend(i._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(i._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var c=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,c=this._redrawBounds;if(this._ctx.save(),c){var h=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)i=y.layer,(!c||i._pxBounds&&i._pxBounds.intersects(c))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,c){if(this._drawing){var h,y,N,E,H=i._parts,le=H.length,xe=this._ctx;if(le){for(xe.beginPath(),h=0;h<le;h++){for(y=0,N=H[h].length;y<N;y++)E=H[h][y],xe[y?"lineTo":"moveTo"](E.x,E.y);c&&xe.closePath()}this._fillStroke(xe,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var c=i._point,h=this._ctx,y=Math.max(Math.round(i._radius),1),N=(Math.max(Math.round(i._radiusY),1)||y)/y;N!==1&&(h.save(),h.scale(1,N)),h.beginPath(),h.arc(c.x,c.y/N,y,0,Math.PI*2,!1),N!==1&&h.restore(),this._fillStroke(h,i)}},_fillStroke:function(i,c){var h=c.options;h.fill&&(i.globalAlpha=h.fillOpacity,i.fillStyle=h.fillColor||h.color,i.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(i.setLineDash&&i.setLineDash(c.options&&c.options._dashArray||[]),i.globalAlpha=h.opacity,i.lineWidth=h.weight,i.strokeStyle=h.color,i.lineCap=h.lineCap,i.lineJoin=h.lineJoin,i.stroke())},_onClick:function(i){for(var c=this._map.mouseEventToLayerPoint(i),h,y,N=this._drawFirst;N;N=N.next)h=N.layer,h.options.interactive&&h._containsPoint(c)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(h))&&(y=h);this._fireEvent(y?[y]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,c)}},_handleMouseOut:function(i){var c=this._hoveredLayer;c&&(xn(this._container,"leaflet-interactive"),this._fireEvent([c],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,c){if(!this._mouseHoverThrottled){for(var h,y,N=this._drawFirst;N;N=N.next)h=N.layer,h.options.interactive&&h._containsPoint(c)&&(y=h);y!==this._hoveredLayer&&(this._handleMouseOut(i),y&&(mt(this._container,"leaflet-interactive"),this._fireEvent([y],i,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,c,h){this._map._fireDOMEvent(c,h||c.type,i)},_bringToFront:function(i){var c=i._order;if(c){var h=c.next,y=c.prev;if(h)h.prev=y;else return;y?y.next=h:h&&(this._drawFirst=h),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(i)}},_bringToBack:function(i){var c=i._order;if(c){var h=c.next,y=c.prev;if(y)y.next=h;else return;h?h.prev=y:y&&(this._drawLast=y),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(i)}}});function Sr(i){return Oe.canvas?new ul(i):null}var Is=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),uo={_initContainer:function(){this._container=vt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ua.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var c=i._container=Is("shape");mt(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",i._path=Is("path"),c.appendChild(i._path),this._updateStyle(i),this._layers[v(i)]=i},_addPath:function(i){var c=i._container;this._container.appendChild(c),i.options.interactive&&i.addInteractiveTarget(c)},_removePath:function(i){var c=i._container;tn(c),i.removeInteractiveTarget(c),delete this._layers[v(i)]},_updateStyle:function(i){var c=i._stroke,h=i._fill,y=i.options,N=i._container;N.stroked=!!y.stroke,N.filled=!!y.fill,y.stroke?(c||(c=i._stroke=Is("stroke")),N.appendChild(c),c.weight=y.weight+"px",c.color=y.color,c.opacity=y.opacity,y.dashArray?c.dashStyle=R(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=y.lineCap.replace("butt","flat"),c.joinstyle=y.lineJoin):c&&(N.removeChild(c),i._stroke=null),y.fill?(h||(h=i._fill=Is("fill")),N.appendChild(h),h.color=y.fillColor||y.color,h.opacity=y.fillOpacity):h&&(N.removeChild(h),i._fill=null)},_updateCircle:function(i){var c=i._point.round(),h=Math.round(i._radius),y=Math.round(i._radiusY||h);this._setPath(i,i._empty()?"M0 0":"AL "+c.x+","+c.y+" "+h+","+y+" 0,"+65535*360)},_setPath:function(i,c){i._path.v=c},_bringToFront:function(i){Kn(i._container)},_bringToBack:function(i){Gs(i._container)}},as=Oe.vml?Is:ot,Ai=ua.extend({_initContainer:function(){this._container=as("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=as("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){tn(this._container),$t(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ua.prototype._update.call(this);var i=this._bounds,c=i.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,h.setAttribute("width",c.x),h.setAttribute("height",c.y)),on(h,i.min),h.setAttribute("viewBox",[i.min.x,i.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(i){var c=i._path=as("path");i.options.className&&mt(c,i.options.className),i.options.interactive&&mt(c,"leaflet-interactive"),this._updateStyle(i),this._layers[v(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){tn(i._path),i.removeInteractiveTarget(i._path),delete this._layers[v(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var c=i._path,h=i.options;c&&(h.stroke?(c.setAttribute("stroke",h.color),c.setAttribute("stroke-opacity",h.opacity),c.setAttribute("stroke-width",h.weight),c.setAttribute("stroke-linecap",h.lineCap),c.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?c.setAttribute("stroke-dasharray",h.dashArray):c.removeAttribute("stroke-dasharray"),h.dashOffset?c.setAttribute("stroke-dashoffset",h.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),h.fill?(c.setAttribute("fill",h.fillColor||h.color),c.setAttribute("fill-opacity",h.fillOpacity),c.setAttribute("fill-rule",h.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(i,c){this._setPath(i,bt(i._parts,c))},_updateCircle:function(i){var c=i._point,h=Math.max(Math.round(i._radius),1),y=Math.max(Math.round(i._radiusY),1)||h,N="a"+h+","+y+" 0 1,0 ",E=i._empty()?"M0 0":"M"+(c.x-h)+","+c.y+N+h*2+",0 "+N+-h*2+",0 ";this._setPath(i,E)},_setPath:function(i,c){i._path.setAttribute("d",c)},_bringToFront:function(i){Kn(i._path)},_bringToBack:function(i){Gs(i._path)}});Oe.vml&&Ai.include(uo);function wr(i){return Oe.svg||Oe.vml?new Ai(i):null}Ct.include({getRenderer:function(i){var c=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var c=this._paneRenderers[i];return c===void 0&&(c=this._createRenderer({pane:i}),this._paneRenderers[i]=c),c},_createRenderer:function(i){return this.options.preferCanvas&&Sr(i)||wr(i)}});var $s=wi.extend({initialize:function(i,c){wi.prototype.initialize.call(this,this._boundsToLatLngs(i),c)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ce(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Hd(i,c){return new $s(i,c)}Ai.create=as,Ai.pointsToPath=bt,Ns.geometryToLayer=Yn,Ns.coordsToLatLng=il,Ns.coordsToLatLngs=yr,Ns.latLngToCoords=rl,Ns.latLngsToCoords=vr,Ns.getFeature=Ds,Ns.asFeature=ll,Ct.mergeOptions({boxZoom:!0});var da=Wa.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){rt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$t(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){tn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),xi(),$r(),this._startPoint=this._map.mouseEventToContainerPoint(i),rt(document,{contextmenu:zs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=vt("div","leaflet-zoom-box",this._container),mt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var c=new D(this._point,this._startPoint),h=c.getSize();on(this._box,c.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(tn(this._box),xn(this._container,"leaflet-crosshair")),Xa(),lr(),$t(document,{contextmenu:zs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var c=new P(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ct.addInitHook("addHandler","boxZoom",da),Ct.mergeOptions({doubleClickZoom:!0});var dl=Wa.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var c=this._map,h=c.getZoom(),y=c.options.zoomDelta,N=i.originalEvent.shiftKey?h-y:h+y;c.options.doubleClickZoom==="center"?c.setZoom(N):c.setZoomAround(i.containerPoint,N)}});Ct.addInitHook("addHandler","doubleClickZoom",dl),Ct.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ss=Wa.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Os(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}mt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){xn(this._map._container,"leaflet-grab"),xn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=ce(this._map.options.maxBounds);this._offsetLimit=te(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var c=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(c),this._prunePositions(c)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,c){return i-(i-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;i.x<c.min.x&&(i.x=this._viscousLimit(i.x,c.min.x)),i.y<c.min.y&&(i.y=this._viscousLimit(i.y,c.min.y)),i.x>c.max.x&&(i.x=this._viscousLimit(i.x,c.max.x)),i.y>c.max.y&&(i.y=this._viscousLimit(i.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,c=Math.round(i/2),h=this._initialWorldOffset,y=this._draggable._newPos.x,N=(y-c+h)%i+c-h,E=(y+c+h)%i-c-h,H=Math.abs(N+h)<Math.abs(E+h)?N:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(i){var c=this._map,h=c.options,y=!h.inertia||i.noInertia||this._times.length<2;if(c.fire("dragend",i),y)c.fire("moveend");else{this._prunePositions(+new Date);var N=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,H=h.easeLinearity,le=N.multiplyBy(H/E),xe=le.distanceTo([0,0]),Ae=Math.min(h.inertiaMaxSpeed,xe),Pe=le.multiplyBy(Ae/xe),We=Ae/(h.inertiaDeceleration*H),gt=Pe.multiplyBy(-We/2).round();!gt.x&&!gt.y?c.fire("moveend"):(gt=c._limitOffset(gt,c.options.maxBounds),fe(function(){c.panBy(gt,{duration:We,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});Ct.addInitHook("addHandler","dragging",ss),Ct.mergeOptions({keyboard:!0,keyboardPanDelta:80});var mo=Wa.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),rt(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$t(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,c=document.documentElement,h=i.scrollTop||c.scrollTop,y=i.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(y,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var c=this._panKeys={},h=this.keyCodes,y,N;for(y=0,N=h.left.length;y<N;y++)c[h.left[y]]=[-1*i,0];for(y=0,N=h.right.length;y<N;y++)c[h.right[y]]=[i,0];for(y=0,N=h.down.length;y<N;y++)c[h.down[y]]=[0,i];for(y=0,N=h.up.length;y<N;y++)c[h.up[y]]=[0,-1*i]},_setZoomDelta:function(i){var c=this._zoomKeys={},h=this.keyCodes,y,N;for(y=0,N=h.zoomIn.length;y<N;y++)c[h.zoomIn[y]]=i;for(y=0,N=h.zoomOut.length;y<N;y++)c[h.zoomOut[y]]=-i},_addHooks:function(){rt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$t(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var c=i.keyCode,h=this._map,y;if(c in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(y=this._panKeys[c],i.shiftKey&&(y=be(y).multiplyBy(3)),h.options.maxBounds&&(y=h._limitOffset(be(y),h.options.maxBounds)),h.options.worldCopyJump){var N=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(y)));h.panTo(N)}else h.panBy(y)}else if(c in this._zoomKeys)h.setZoom(h.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;zs(i)}}});Ct.addInitHook("addHandler","keyboard",mo),Ct.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Er=Wa.extend({addHooks:function(){rt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$t(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var c=ta(i),h=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var y=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),y),zs(i)},_performZoom:function(){var i=this._map,c=i.getZoom(),h=this._map.options.zoomSnap||0;i._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),N=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,E=h?Math.ceil(N/h)*h:N,H=i._limitZoom(c+(this._delta>0?E:-E))-c;this._delta=0,this._startTime=null,H&&(i.options.scrollWheelZoom==="center"?i.setZoom(c+H):i.setZoomAround(this._lastMousePos,c+H))}});Ct.addInitHook("addHandler","scrollWheelZoom",Er);var Xs=600;Ct.mergeOptions({tapHold:Oe.touchNative&&Oe.safari&&Oe.mobile,tapTolerance:15});var ml=Wa.extend({addHooks:function(){rt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$t(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var c=i.touches[0];this._startPos=this._newPos=new ne(c.clientX,c.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(rt(document,"touchend",Nn),rt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),Xs),rt(document,"touchend touchcancel contextmenu",this._cancel,this),rt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){$t(document,"touchend",Nn),$t(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),$t(document,"touchend touchcancel contextmenu",this._cancel,this),$t(document,"touchmove",this._onMove,this)},_onMove:function(i){var c=i.touches[0];this._newPos=new ne(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,c){var h=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});h._simulated=!0,c.target.dispatchEvent(h)}});Ct.addInitHook("addHandler","tapHold",ml),Ct.mergeOptions({touchZoom:Oe.touch,bounceAtZoomLimits:!0});var ho=Wa.extend({addHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),rt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){xn(this._map._container,"leaflet-touch-zoom"),$t(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var c=this._map;if(!(!i.touches||i.touches.length!==2||c._animatingZoom||this._zooming)){var h=c.mouseEventToContainerPoint(i.touches[0]),y=c.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(h.add(y)._divideBy(2))),this._startDist=h.distanceTo(y),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),rt(document,"touchmove",this._onTouchMove,this),rt(document,"touchend touchcancel",this._onTouchEnd,this),Nn(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var c=this._map,h=c.mouseEventToContainerPoint(i.touches[0]),y=c.mouseEventToContainerPoint(i.touches[1]),N=h.distanceTo(y)/this._startDist;if(this._zoom=c.getScaleZoom(N,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&N<1||this._zoom>c.getMaxZoom()&&N>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,N===1)return}else{var E=h._add(y)._divideBy(2)._subtract(this._centerPoint);if(N===1&&E.x===0&&E.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),ue(this._animRequest);var H=f(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=fe(H,this,!0),Nn(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ue(this._animRequest),$t(document,"touchmove",this._onTouchMove,this),$t(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ct.addInitHook("addHandler","touchZoom",ho),Ct.BoxZoom=da,Ct.DoubleClickZoom=dl,Ct.Drag=ss,Ct.Keyboard=mo,Ct.ScrollWheelZoom=Er,Ct.TapHold=ml,Ct.TouchZoom=ho,l.Bounds=D,l.Browser=Oe,l.CRS=De,l.Canvas=ul,l.Circle=sl,l.CircleMarker=Si,l.Class=X,l.Control=fa,l.DivIcon=Lc,l.DivOverlay=$n,l.DomEvent=Wr,l.DomUtil=vi,l.Draggable=Os,l.Evented=M,l.FeatureGroup=es,l.GeoJSON=Ns,l.GridLayer=Ci,l.Handler=Wa,l.Icon=ts,l.ImageOverlay=ki,l.LatLng=de,l.LatLngBounds=P,l.Layer=qa,l.LayerGroup=ji,l.LineUtil=Id,l.Map=Ct,l.Marker=gr,l.Mixin=Dd,l.Path=ns,l.Point=ne,l.PolyUtil=lo,l.Polygon=wi,l.Polyline=_s,l.Popup=_r,l.PosAnimation=bi,l.Projection=kc,l.Rectangle=$s,l.Renderer=ua,l.SVG=Ai,l.SVGOverlay=cl,l.TileLayer=Ps,l.Tooltip=Nr,l.Transformation=_e,l.Util=je,l.VideoOverlay=Ls,l.bind=f,l.bounds=te,l.canvas=Sr,l.circle=zc,l.circleMarker=Mc,l.control=bs,l.divIcon=Zd,l.extend=d,l.featureGroup=Cc,l.geoJSON=ol,l.geoJson=br,l.gridLayer=Pc,l.icon=fr,l.imageOverlay=Oc,l.latLng=Ee,l.latLngBounds=ce,l.layerGroup=Bd,l.map=to,l.marker=Ac,l.point=be,l.polygon=Fd,l.polyline=Ud,l.popup=Rc,l.rectangle=Hd,l.setOptions=A,l.stamp=v,l.svg=wr,l.svgOverlay=Dc,l.tileLayer=wa,l.tooltip=qd,l.transformation=lt,l.version=o,l.videoOverlay=Ti;var fo=window.L;l.noConflict=function(){return window.L=fo,this},window.L=l}))})(ec,ec.exports)),ec.exports}var FM=UM();const Da=xd(FM);function qM(e){return e.todayStatus==="IN_PROGRESS"&&e.locationState==="LIVE"?{radius:9,color:"#74ff9a",fillColor:"#74ff9a",fillOpacity:.9,weight:2}:e.locationState==="STALE"?{radius:8,color:"#ffd166",fillColor:"#ffd166",fillOpacity:.86,weight:2}:e.todayStatus==="NOT_STARTED"?{radius:8,color:"#ff6b6b",fillColor:"#ff6b6b",fillOpacity:.82,weight:2}:e.locationState==="DORMANT"?{radius:7,color:"#8fb6d9",fillColor:"#0b1520",fillOpacity:.72,weight:2}:{radius:8,color:"#40e0d0",fillColor:"#40e0d0",fillOpacity:.82,weight:2}}function ZM({markers:e,focusedMarkerId:s=null}){const l=b.useRef(null),o=b.useRef(null),d=b.useRef(null),m=b.useRef(new Map);return b.useEffect(()=>{if(!l.current||o.current)return;const f=e[0]?.lat??39.92077,g=e[0]?.lon??32.85411,v=Da.map(l.current,{center:[f,g],zoom:6,zoomControl:!0,attributionControl:!1});return o.current=v,Da.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(v),d.current=Da.layerGroup().addTo(v),()=>{o.current&&(o.current.remove(),o.current=null),d.current=null,m.current.clear()}},[e]),b.useEffect(()=>{if(!o.current||!d.current)return;const f=o.current,g=d.current;if(g.clearLayers(),m.current.clear(),!e.length)return;const v=[],_=new Map,S=new Map;for(const w of e){const T=`${w.lat.toFixed(6)}:${w.lon.toFixed(6)}`;_.set(T,(_.get(T)??0)+1)}for(const w of e){const T=`${w.lat.toFixed(6)}:${w.lon.toFixed(6)}`,O=_.get(T)??1,k=S.get(T)??0;S.set(T,k+1);let A=w.lat,z=w.lon;if(O>1){const I=2*Math.PI*k/O,R=18e-5;A=w.lat+Math.sin(I)*R,z=w.lon+Math.cos(I)*R}const U=Da.circleMarker([A,z],qM(w)).bindPopup(`${w.label}<br/>${w.lat.toFixed(5)}, ${w.lon.toFixed(5)}`).addTo(g);m.current.set(w.id,U),v.push([A,z])}v.length===1?f.setView(v[0],15,{animate:!0}):f.fitBounds(Da.latLngBounds(v),{padding:[26,26],maxZoom:15,animate:!0}),window.setTimeout(()=>{f.invalidateSize()},80)},[e]),b.useEffect(()=>{if(!s||!o.current)return;const f=m.current.get(s);if(!f)return;const g=f.getLatLng();o.current.setView(g,Math.max(o.current.getZoom(),14),{animate:!0}),f.openPopup()},[s,e]),n.jsx("div",{ref:l,className:"control-room-map-canvas","aria-label":"Kontrol odasi calisan haritasi"})}function Rl(e){return e?new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"short"}).format(new Date(e)):"-"}function R0(e){if(!e)return"Ak yok";const s=Date.now()-new Date(e).getTime();if(!Number.isFinite(s))return"-";const l=Math.max(0,Math.round(s/6e4));if(l<1)return"imdi";if(l<60)return`${l} dk nce`;const o=Math.floor(l/60);return o<24?`${o} sa nce`:`${Math.floor(o/24)} gn nce`}function L0(e){return e==="IN_PROGRESS"?"Sahada":e==="FINISHED"?"Tamam":"Balamad"}function P0(e){return e==="LIVE"?"Canl":e==="STALE"?"Scak":e==="DORMANT"?"Souk":"Yok"}function I0(e){return e==="critical"?"Kritik":e==="warning"?"Uyar":"Bilgi"}function B0(e){return e==="IN_PROGRESS"?"control-room-pill status-live":e==="FINISHED"?"control-room-pill status-finished":"control-room-pill status-idle"}function U0(e){return e==="LIVE"?"control-room-pill location-live":e==="STALE"?"control-room-pill location-stale":e==="DORMANT"?"control-room-pill location-dormant":"control-room-pill location-none"}function F0(e){return e==="critical"?"control-room-alert control-room-alert-critical":e==="warning"?"control-room-alert control-room-alert-warning":"control-room-alert control-room-alert-info"}const HM=24;function KM(){const[e,s]=b.useState(!1),[l,o]=b.useState(!1),[d,m]=b.useState(""),[f,g]=b.useState(null),[v,_]=b.useState(null),[S,w]=b.useState(""),[T,O]=b.useState(""),[k,A]=b.useState(!1),[z,U]=b.useState(HM),[I,R]=b.useState(1),[K,V]=b.useState(null),ee=Ze({queryKey:["regions","control-room"],queryFn:()=>Vl({include_inactive:!1})}),q=Ze({queryKey:["departments","control-room"],queryFn:fi}),Y=b.useMemo(()=>{const M=q.data??[];return f?M.filter(ne=>ne.region_id===f):M},[q.data,f]);b.useEffect(()=>{v&&!Y.some(M=>M.id===v)&&_(null)},[Y,v]),b.useEffect(()=>{if(!l)return;const M=window.setTimeout(()=>{o(!1),s(!0)},1250);return()=>window.clearTimeout(M)},[l]),b.useEffect(()=>{R(1)},[d,f,v,S,T,k,z]);const $=b.useMemo(()=>({q:d.trim()||void 0,region_id:f??void 0,department_id:v??void 0,today_status:S||void 0,location_state:T||void 0,include_inactive:k||void 0,offset:(I-1)*z,limit:z}),[v,k,z,T,I,d,f,S]),ie=Ze({queryKey:["control-room-overview",$],queryFn:()=>FA($),enabled:e,refetchInterval:e?2e4:!1,placeholderData:M=>M}),fe=ie.data?.items??[],ue=ie.data?.total??0,je=Math.max(1,Math.ceil(ue/z));b.useEffect(()=>{if(!fe.length){V(null);return}K&&fe.some(ne=>ne.employee.id===K)||V(fe[0].employee.id)},[fe,K]);const X=b.useMemo(()=>fe.find(M=>M.employee.id===K)??fe[0]??null,[fe,K]),oe=b.useMemo(()=>(ie.data?.map_points??[]).map(M=>({id:`employee-${M.employee_id}`,lat:M.lat,lon:M.lon,label:M.label,todayStatus:M.today_status,locationState:M.location_state})),[ie.data?.map_points]),Z=!e&&!l;return ee.isError||q.isError?n.jsx(wt,{message:"Kontrol odas filtre verileri alnamad."}):n.jsxs("div",{className:"control-room-page",children:[n.jsx(Zn,{title:"Kontrol Odas",description:"Mevcut admin oturumu iinde alan, harita ve telemetri odakl operasyon paneli.",action:e?n.jsx("button",{type:"button",className:"btn-animated control-room-refresh-button",onClick:()=>{ie.refetch()},children:"Veriyi Yenile"}):null}),Z?n.jsxs("section",{className:"control-room-intro",children:[n.jsxs("div",{className:"control-room-intro-copy",children:[n.jsx("p",{className:"control-room-kicker",children:"BLACKLIST CORE / LIVE SURVEILLANCE GRID"}),n.jsx("h2",{className:"control-room-intro-title",children:"Sistemin iindeki en sert operasyon ekran."}),n.jsx("p",{className:"control-room-intro-text",children:"Ayr sistem deil. Ayn admin oturumu ile, anlk vardiya ak, konum hareketi, cihaz-IP izi ve dikkat isteyen personel durumlar tek odada toplanr."}),n.jsxs("div",{className:"control-room-intro-tags",children:[n.jsx("span",{className:"control-room-inline-tag",children:"Harita + tablo"}),n.jsx("span",{className:"control-room-inline-tag",children:"Filtreli vardiya grnm"}),n.jsx("span",{className:"control-room-inline-tag",children:"Operasyon ak beslemesi"})]})]}),n.jsxs("div",{className:"control-room-intro-side",children:[n.jsxs("div",{className:"control-room-intro-console",children:[n.jsxs("div",{className:"control-room-console-line",children:[n.jsx("span",{children:"AUTH"}),n.jsx("strong",{children:"SESSION VERIFIED"})]}),n.jsxs("div",{className:"control-room-console-line",children:[n.jsx("span",{children:"MODE"}),n.jsx("strong",{children:"ADMIN LINKED"})]}),n.jsxs("div",{className:"control-room-console-line",children:[n.jsx("span",{children:"GRID"}),n.jsx("strong",{children:"READY TO ARM"})]})]}),n.jsx("button",{type:"button",className:"control-room-launch-button",onClick:()=>o(!0),children:"Kontrol Odasn A"})]})]}):null,l?n.jsx("div",{className:"control-room-boot-overlay",role:"status","aria-live":"polite",children:n.jsxs("div",{className:"control-room-boot-core",children:[n.jsx("div",{className:"control-room-boot-ring"}),n.jsx("div",{className:"control-room-boot-orbit"}),n.jsxs("div",{className:"control-room-boot-panel",children:[n.jsx("p",{className:"control-room-boot-kicker",children:"CONTROL CORE"}),n.jsx("p",{className:"control-room-boot-title",children:"Telemetri katman hazrlanyor..."}),n.jsx("p",{className:"control-room-boot-subtitle",children:"vardiya / konum / cihaz / ip / alarm ak eleniyor"})]})]})}):null,e?n.jsxs("div",{className:"control-room-shell",children:[n.jsxs("section",{className:"control-room-topline",children:[n.jsxs("div",{children:[n.jsx("p",{className:"control-room-kicker",children:"REAL-TIME FIELD COMMAND"}),n.jsx("h2",{className:"control-room-heading",children:"Canl operasyon matrisi"})]}),n.jsxs("div",{className:"control-room-topline-meta",children:[n.jsxs("span",{className:"control-room-inline-tag",children:["Son retim: ",Rl(ie.data?.generated_at_utc??null)]}),n.jsxs("span",{className:"control-room-inline-tag",children:["Sayfa ",I,"/",je]})]})]}),n.jsxs("section",{className:"control-room-kpi-grid",children:[n.jsxs("article",{className:"control-room-kpi-card",children:[n.jsx("span",{className:"control-room-kpi-label",children:"Filtreli personel"}),n.jsx("strong",{className:"control-room-kpi-value",children:ie.data?.summary.total_employees??0}),n.jsxs("span",{className:"control-room-kpi-meta",children:["Aktif: ",ie.data?.summary.active_employees??0]})]}),n.jsxs("article",{className:"control-room-kpi-card",children:[n.jsx("span",{className:"control-room-kpi-label",children:"Sahadakiler"}),n.jsx("strong",{className:"control-room-kpi-value",children:ie.data?.summary.in_progress_count??0}),n.jsx("span",{className:"control-room-kpi-meta",children:"Anlk ak vardiya"})]}),n.jsxs("article",{className:"control-room-kpi-card",children:[n.jsx("span",{className:"control-room-kpi-label",children:"Balamayan"}),n.jsx("strong",{className:"control-room-kpi-value",children:ie.data?.summary.not_started_count??0}),n.jsx("span",{className:"control-room-kpi-meta",children:"Bugn giri grnmeyen"})]}),n.jsxs("article",{className:"control-room-kpi-card",children:[n.jsx("span",{className:"control-room-kpi-label",children:"Tamamlayan"}),n.jsx("strong",{className:"control-room-kpi-value",children:ie.data?.summary.finished_count??0}),n.jsx("span",{className:"control-room-kpi-meta",children:"Bugn kapatan"})]}),n.jsxs("article",{className:"control-room-kpi-card",children:[n.jsx("span",{className:"control-room-kpi-label",children:"Sayfa alarm"}),n.jsx("strong",{className:"control-room-kpi-value",children:ie.data?.summary.attention_on_page_count??0}),n.jsx("span",{className:"control-room-kpi-meta",children:"Gz isteyen kaytlar"})]}),n.jsxs("article",{className:"control-room-kpi-card",children:[n.jsx("span",{className:"control-room-kpi-label",children:"Canl konum"}),n.jsx("strong",{className:"control-room-kpi-value",children:ie.data?.summary.live_location_on_page_count??0}),n.jsx("span",{className:"control-room-kpi-meta",children:"Haritada scak nokta"})]})]}),n.jsxs("div",{className:"control-room-main-grid",children:[n.jsxs("section",{className:"control-room-panel control-room-filter-panel",children:[n.jsx("div",{className:"control-room-panel-head",children:n.jsxs("div",{children:[n.jsx("p",{className:"control-room-panel-kicker",children:"FILTER STACK"}),n.jsx("h3",{children:"Operasyon szgeci"})]})}),n.jsxs("div",{className:"control-room-filter-grid",children:[n.jsxs("label",{className:"control-room-field",children:[n.jsx("span",{children:"alan / #ID"}),n.jsx("input",{value:d,onChange:M=>m(M.target.value),placeholder:"r: Hseyincan veya #1"})]}),n.jsxs("label",{className:"control-room-field",children:[n.jsx("span",{children:"Blge"}),n.jsxs("select",{value:f??"",onChange:M=>g(M.target.value?Number(M.target.value):null),children:[n.jsx("option",{value:"",children:"Tm"}),(ee.data??[]).map(M=>n.jsx("option",{value:M.id,children:M.name},M.id))]})]}),n.jsxs("label",{className:"control-room-field",children:[n.jsx("span",{children:"Departman"}),n.jsxs("select",{value:v??"",onChange:M=>_(M.target.value?Number(M.target.value):null),children:[n.jsx("option",{value:"",children:"Tm"}),Y.map(M=>n.jsx("option",{value:M.id,children:M.name},M.id))]})]}),n.jsxs("label",{className:"control-room-field",children:[n.jsx("span",{children:"Gn durumu"}),n.jsxs("select",{value:S,onChange:M=>w(M.target.value),children:[n.jsx("option",{value:"",children:"Tm"}),n.jsx("option",{value:"NOT_STARTED",children:"Balamad"}),n.jsx("option",{value:"IN_PROGRESS",children:"Sahada"}),n.jsx("option",{value:"FINISHED",children:"Tamam"})]})]}),n.jsxs("label",{className:"control-room-field",children:[n.jsx("span",{children:"Konum ss"}),n.jsxs("select",{value:T,onChange:M=>O(M.target.value),children:[n.jsx("option",{value:"",children:"Tm"}),n.jsx("option",{value:"LIVE",children:"Canl"}),n.jsx("option",{value:"STALE",children:"Scak"}),n.jsx("option",{value:"DORMANT",children:"Souk"}),n.jsx("option",{value:"NONE",children:"Yok"})]})]}),n.jsxs("label",{className:"control-room-field",children:[n.jsx("span",{children:"Sayfa limiti"}),n.jsxs("select",{value:z,onChange:M=>U(Number(M.target.value)),children:[n.jsx("option",{value:"12",children:"12"}),n.jsx("option",{value:"24",children:"24"}),n.jsx("option",{value:"35",children:"35"}),n.jsx("option",{value:"50",children:"50"})]})]})]}),n.jsxs("label",{className:"control-room-toggle",children:[n.jsx("input",{type:"checkbox",checked:k,onChange:M=>A(M.target.checked)}),n.jsx("span",{children:"Pasif alanlar da dahil et"})]})]}),n.jsxs("section",{className:"control-room-panel control-room-selected-panel",children:[n.jsxs("div",{className:"control-room-panel-head",children:[n.jsxs("div",{children:[n.jsx("p",{className:"control-room-panel-kicker",children:"TARGET LOCK"}),n.jsx("h3",{children:"Seili operatr"})]}),X?n.jsx(us,{to:`/employees/${X.employee.id}`,className:"control-room-link-button",children:"Detay A"}):null]}),X?n.jsxs("div",{className:"control-room-selected-content",children:[n.jsxs("div",{className:"control-room-selected-title-row",children:[n.jsxs("div",{children:[n.jsx("h4",{children:X.employee.full_name}),n.jsxs("p",{children:[X.department_name??"Departman yok"," / ",X.employee.region_name??"Blge yok"]})]}),n.jsxs("div",{className:"control-room-chip-stack",children:[n.jsx("span",{className:B0(X.today_status),children:L0(X.today_status)}),n.jsx("span",{className:U0(X.location_state),children:P0(X.location_state)})]})]}),n.jsxs("div",{className:"control-room-selected-grid",children:[n.jsxs("div",{className:"control-room-selected-block",children:[n.jsx("span",{className:"control-room-selected-label",children:"Vardiya"}),n.jsx("strong",{children:X.shift_name??"Atanmad"}),n.jsx("p",{children:X.shift_window_label??"Saat penceresi yok"})]}),n.jsxs("div",{className:"control-room-selected-block",children:[n.jsx("span",{className:"control-room-selected-label",children:"Cihaz / IP"}),n.jsxs("strong",{children:[X.active_devices,"/",X.total_devices," aktif"]}),n.jsx("p",{children:X.recent_ip??"IP yok"})]}),n.jsxs("div",{className:"control-room-selected-block",children:[n.jsx("span",{className:"control-room-selected-label",children:"Plan st"}),n.jsx("strong",{children:n.jsx(qe,{minutes:X.current_month.plan_overtime_minutes})}),n.jsx("p",{children:"Bu ay"})]}),n.jsxs("div",{className:"control-room-selected-block",children:[n.jsx("span",{className:"control-room-selected-label",children:"Yasal FM"}),n.jsx("strong",{children:n.jsx(qe,{minutes:X.current_month.overtime_minutes})}),n.jsx("p",{children:"Bu ay"})]})]}),n.jsxs("div",{className:"control-room-selected-timeline",children:[n.jsxs("div",{children:[n.jsx("span",{children:"Son olay"}),n.jsx("strong",{children:X.last_event?Rl(X.last_event.ts_utc):"-"})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Portal izi"}),n.jsx("strong",{children:Rl(X.last_portal_seen_utc)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Konum"}),n.jsx("strong",{children:X.latest_location?R0(X.latest_location.ts_utc):"Konum yok"})]})]}),n.jsx("div",{className:"control-room-alert-list",children:X.attention_flags.length?X.attention_flags.map(M=>n.jsxs("span",{className:F0(M.severity),children:[I0(M.severity)," / ",M.label]},M.code)):n.jsx("span",{className:"control-room-alert control-room-alert-clear",children:"Ak alarm yok"})})]}):n.jsx("div",{className:"control-room-empty-state",children:"Bu sayfada seilecek kayt bulunmuyor."})]})]}),ie.isLoading&&!ie.data?n.jsx(Gt,{label:"Kontrol odas ykleniyor..."}):null,ie.isError?n.jsx(wt,{message:"Kontrol odas verileri alnamad."}):null,!ie.isLoading&&!ie.isError?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"control-room-telemetry-grid",children:[n.jsxs("section",{className:"control-room-panel control-room-map-panel",children:[n.jsxs("div",{className:"control-room-panel-head",children:[n.jsxs("div",{children:[n.jsx("p",{className:"control-room-panel-kicker",children:"TACTICAL MAP"}),n.jsx("h3",{children:"Anlk saha haritas"})]}),n.jsx("span",{className:"control-room-inline-tag",children:"Harita bu sayfadaki alanlar gsterir"})]}),oe.length?n.jsx(ZM,{markers:oe,focusedMarkerId:X?`employee-${X.employee.id}`:null}):n.jsx("div",{className:"control-room-empty-map",children:"Filtrede grnr konum kayd yok."})]}),n.jsxs("section",{className:"control-room-panel control-room-feed-panel",children:[n.jsx("div",{className:"control-room-panel-head",children:n.jsxs("div",{children:[n.jsx("p",{className:"control-room-panel-kicker",children:"EVENT FEED"}),n.jsx("h3",{children:"Canl ak"})]})}),n.jsx("div",{className:"control-room-feed-list",children:(ie.data?.recent_events??[]).length?ie.data?.recent_events.map(M=>n.jsxs("button",{type:"button",className:"control-room-feed-item",onClick:()=>V(M.employee_id),children:[n.jsx("span",{className:"control-room-feed-time",children:Rl(M.ts_utc)}),n.jsxs("strong",{children:["#",M.employee_id," ",M.employee_name]}),n.jsxs("span",{children:[M.department_name??"Departman yok"," / ",M.event_type," / ",M.location_status]})]},M.event_id)):n.jsx("div",{className:"control-room-empty-state",children:"Ak satr yok."})})]})]}),n.jsxs("section",{className:"control-room-panel control-room-table-panel",children:[n.jsxs("div",{className:"control-room-panel-head",children:[n.jsxs("div",{children:[n.jsx("p",{className:"control-room-panel-kicker",children:"SURVEILLANCE TABLE"}),n.jsx("h3",{children:"Personel vardiya matrisi"})]}),n.jsxs("div",{className:"control-room-pagination",children:[n.jsx("button",{type:"button",className:"control-room-page-button",disabled:I<=1,onClick:()=>R(M=>Math.max(1,M-1)),children:"nceki"}),n.jsxs("span",{children:[I," / ",je]}),n.jsx("button",{type:"button",className:"control-room-page-button",disabled:I>=je,onClick:()=>R(M=>Math.min(je,M+1)),children:"Sonraki"})]})]}),n.jsx("div",{className:"control-room-table-wrap",children:n.jsxs("table",{className:"control-room-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Operatr"}),n.jsx("th",{children:"Durum"}),n.jsx("th",{children:"Konum"}),n.jsx("th",{children:"Vardiya"}),n.jsx("th",{children:"Son olay"}),n.jsx("th",{children:"Portal / IP"}),n.jsx("th",{children:"Cihaz"}),n.jsx("th",{children:"Plan st"}),n.jsx("th",{children:"Yasal FM"}),n.jsx("th",{children:"Alarm"})]})}),n.jsx("tbody",{children:fe.length?fe.map(M=>{const ne=X?.employee.id===M.employee.id;return n.jsxs("tr",{className:ne?"is-selected":"",onClick:()=>V(M.employee.id),onKeyDown:Se=>{(Se.key==="Enter"||Se.key===" ")&&(Se.preventDefault(),V(M.employee.id))},tabIndex:0,children:[n.jsx("td",{children:n.jsxs("div",{className:"control-room-person-cell",children:[n.jsxs("strong",{children:["#",M.employee.id," ",M.employee.full_name]}),n.jsx("span",{children:M.department_name??"Departman yok"})]})}),n.jsx("td",{children:n.jsx("span",{className:B0(M.today_status),children:L0(M.today_status)})}),n.jsx("td",{children:n.jsxs("div",{className:"control-room-cell-stack",children:[n.jsx("span",{className:U0(M.location_state),children:P0(M.location_state)}),n.jsx("small",{children:M.latest_location?R0(M.latest_location.ts_utc):"Veri yok"})]})}),n.jsx("td",{children:n.jsxs("div",{className:"control-room-cell-stack",children:[n.jsx("strong",{children:M.shift_name??"Atanmad"}),n.jsx("small",{children:M.shift_window_label??"-"})]})}),n.jsx("td",{children:n.jsxs("div",{className:"control-room-cell-stack",children:[n.jsx("strong",{children:M.last_event?.event_type??"-"}),n.jsx("small",{children:Rl(M.last_event?.ts_utc)})]})}),n.jsx("td",{children:n.jsxs("div",{className:"control-room-cell-stack",children:[n.jsx("strong",{children:M.recent_ip??"-"}),n.jsx("small",{children:Rl(M.last_portal_seen_utc)})]})}),n.jsxs("td",{children:[M.active_devices,"/",M.total_devices]}),n.jsx("td",{children:n.jsx(qe,{minutes:M.current_month.plan_overtime_minutes})}),n.jsx("td",{children:n.jsx(qe,{minutes:M.current_month.overtime_minutes})}),n.jsx("td",{children:M.attention_flags.length?n.jsx("div",{className:"control-room-table-alerts",children:M.attention_flags.slice(0,2).map(Se=>n.jsx("span",{className:F0(Se.severity),children:I0(Se.severity)},Se.code))}):n.jsx("span",{className:"control-room-alert control-room-alert-clear",children:"Temiz"})})]},M.employee.id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:10,children:n.jsx("div",{className:"control-room-empty-state",children:"Filtrelerle eleen alan bulunamad."})})})})]})})]})]}):null]}):null]})}const GM=$a({username:ia().min(1,"Kullanici adi gerekli."),password:ia().min(1,"Sifre gerekli.")});function QM(e,s){const l=window.URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=s,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l)}function VM(e){return e.code==="INVALID_CREDENTIALS"?"Sifre dogrulanamadi":e.code==="TOO_MANY_ATTEMPTS"?"Cok fazla deneme":e.code==="INTERNAL_ERROR"?"Sunucu hatasi":"Indirme basarisiz"}function YM(){const[e]=vd(),[s,l]=b.useState("admin"),[o,d]=b.useState(""),[m,f]=b.useState(null),[g,v]=b.useState(null),[_,S]=b.useState(!1),w=b.useMemo(()=>{const O=e.get("archive_id");if(!O)return null;const k=Number(O);return!Number.isInteger(k)||k<=0?null:k},[e]),T=async O=>{if(O.preventDefault(),f(null),v(null),!w){f({message:"Gecerli bir arsiv kimligi bulunamadi."});return}const k=GM.safeParse({username:s,password:o});if(!k.success){f({message:k.error.issues[0]?.message??"Form alanlarini kontrol edin."});return}S(!0);try{const A=await PA(w,k.data),z=A.file_name??`arsiv-${w}.xlsx`;QM(A.blob,z),v("Indirme baslatildi. Dosya cihaziniza kaydedildi."),d("")}catch(A){f(He(A,"Excel dosyasi indirilemedi."))}finally{S(!1)}};return n.jsx("div",{className:"admin-auth-screen flex min-h-screen items-center justify-center px-4",children:n.jsxs("div",{className:"admin-auth-card w-full max-w-md rounded-2xl border border-slate-200 bg-white p-8 shadow-panel",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Excel Arsiv Indirme"}),n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Admin sifreni dogrula, gunluk puantaj Excel dosyasi panel acmadan indirilsin."}),n.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Arsiv ID: ",w??"-"]}),n.jsxs("form",{onSubmit:T,className:"mt-6 space-y-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Kullanici Adi"}),n.jsx("input",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:s,onChange:O=>l(O.target.value)})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Sifre"}),n.jsx("input",{type:"password",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:o,onChange:O=>d(O.target.value)})]}),m?n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[n.jsx("p",{className:"font-semibold",children:VM(m)}),n.jsx("p",{className:"mt-1",children:m.message}),m.requestId?n.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",m.requestId]}):null]}):null,g?n.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-3 text-sm text-emerald-700",children:g}):null,n.jsx("button",{type:"submit",disabled:_||!w,className:"btn-animated w-full rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:_?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Dogrulaniyor..."]}):"Sifreyi dogrula ve indir"})]}),n.jsxs("p",{className:"admin-auth-signature mt-5 text-center text-xs tracking-wide text-slate-500",children:[ds.signatureText," | BUILD: ",ds.buildVersion]})]})})}const $M=$a({username:ia().min(1,"Kullanici adi gerekli."),password:ia().min(1,"Sifre gerekli.")});function Uh(e){if(!e)return"-";const s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat("tr-TR",{timeZone:"Europe/Istanbul",dateStyle:"medium",timeStyle:"medium"}).format(s)}function XM(e){return e==="PENDING"?"Onay Bekliyor":e==="APPROVED"?"Onaylandi":e==="CONSUMED"?"Kullanildi":"Suresi Doldu"}function JM(e){return e==="PENDING"?"bg-amber-100 text-amber-800 border-amber-200":e==="APPROVED"?"bg-emerald-100 text-emerald-800 border-emerald-200":e==="CONSUMED"?"bg-cyan-100 text-cyan-800 border-cyan-200":"bg-rose-100 text-rose-800 border-rose-200"}function q0(e){return e.code==="INVALID_CREDENTIALS"?"Sifre dogrulanamadi":e.code==="TOO_MANY_ATTEMPTS"?"Cok fazla deneme":e.code==="EXTRA_CHECKIN_APPROVAL_EXPIRED"?"Talep suresi dolmus":e.code==="EXTRA_CHECKIN_APPROVAL_NOT_FOUND"?"Talep bulunamadi":"Onay islemi basarisiz"}function WM(){const[e]=vd(),s=b.useMemo(()=>e.get("token")?.trim()??"",[e]),[l,o]=b.useState(null),[d,m]=b.useState(!1),[f,g]=b.useState(null),[v,_]=b.useState(null),[S,w]=b.useState(null),[T,O]=b.useState("admin"),[k,A]=b.useState(""),[z,U]=b.useState(!1);b.useEffect(()=>{if(!s){g({message:"Onay tokeni bulunamadi."}),o(null);return}let R=!1;return(async()=>{m(!0),g(null);try{const V=await IA(s);R||o(V)}catch(V){R||(g(He(V,"Onay talebi yuklenemedi.")),o(null))}finally{R||m(!1)}})(),()=>{R=!0}},[s]);const I=async R=>{if(R.preventDefault(),_(null),w(null),!l||l.status!=="PENDING")return;const K=$M.safeParse({username:T,password:k});if(!K.success){_({message:K.error.issues[0]?.message??"Form alanlarini kontrol edin."});return}U(!0);try{const V=await BA({token:s,username:K.data.username,password:K.data.password});o(V.approval),A(""),w(V.already_processed?"Talep daha once islenmis. Calisan tekrar giris deneyebilir.":"Onay verildi. Calisan ikinci giris islemini tekrar deneyebilir.")}catch(V){_(He(V,"Onay islemi tamamlanamadi."))}finally{U(!1)}};return n.jsx("div",{className:"admin-auth-screen flex min-h-screen items-center justify-center px-4",children:n.jsxs("div",{className:"admin-auth-card w-full max-w-2xl rounded-2xl border border-slate-200 bg-white p-8 shadow-panel",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Ek Giris Admin Onayi"}),n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Gunluk mesai tamamlama sonrasi ikinci giris denemesi icin sifre dogrulayarak onay verin."}),s?null:n.jsx("div",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:"Gecerli bir token olmadan onay islemi baslatilamaz."}),d?n.jsx("div",{className:"mt-4 rounded-lg border border-slate-200 bg-slate-50 px-3 py-3 text-sm text-slate-700",children:"Talep yukleniyor..."}):null,f?n.jsxs("div",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[n.jsx("p",{className:"font-semibold",children:q0(f)}),n.jsx("p",{className:"mt-1",children:f.message}),f.requestId?n.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",f.requestId]}):null]}):null,l?n.jsxs("section",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:["#",l.employee_id," - ",l.employee_name]}),n.jsx("span",{className:`inline-flex rounded-full border px-2 py-1 text-xs font-semibold ${JM(l.status)}`,children:XM(l.status)})]}),n.jsxs("div",{className:"mt-3 grid gap-2 text-xs text-slate-600 sm:grid-cols-2",children:[n.jsxs("p",{children:["Mesai gunu: ",l.local_day]}),n.jsxs("p",{children:["Istenen cihaz ID: ",l.device_id??"-"]}),n.jsxs("p",{children:["Talep zamani: ",Uh(l.requested_at)]}),n.jsxs("p",{children:["Son gecerlilik: ",Uh(l.expires_at)]}),n.jsxs("p",{children:["Onaylayan: ",l.approved_by_username??"-"]}),n.jsxs("p",{children:["Kullanilma zamani: ",Uh(l.consumed_at)]})]}),n.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Push dagitimi: hedef ",l.push_total_targets," | gonderilen ",l.push_sent," | hata ",l.push_failed]})]}):null,S?n.jsx("div",{className:"mt-4 rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-3 text-sm text-emerald-700",children:S}):null,l?.status==="PENDING"?n.jsxs("form",{onSubmit:I,className:"mt-5 space-y-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Kullanici Adi"}),n.jsx("input",{value:T,onChange:R=>O(R.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",autoComplete:"username"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Sifre (MFA gerektirmez)"}),n.jsx("input",{type:"password",value:k,onChange:R=>A(R.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",autoComplete:"current-password"})]}),v?n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[n.jsx("p",{className:"font-semibold",children:q0(v)}),n.jsx("p",{className:"mt-1",children:v.message}),v.requestId?n.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",v.requestId]}):null]}):null,n.jsx("button",{type:"submit",disabled:z,className:"btn-animated w-full rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:z?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Onay veriliyor..."]}):"Evet, 2. Girisi Onayla"})]}):null,n.jsxs("p",{className:"admin-auth-signature mt-5 text-center text-xs tracking-wide text-slate-500",children:[ds.signatureText," | BUILD: ",ds.buildVersion]})]})})}var Ll={},Fh,Z0;function e3(){return Z0||(Z0=1,Fh=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Fh}var qh={},$i={},H0;function Qr(){if(H0)return $i;H0=1;let e;const s=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return $i.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},$i.getSymbolTotalCodewords=function(o){return s[o]},$i.getBCHDigit=function(l){let o=0;for(;l!==0;)o++,l>>>=1;return o},$i.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');e=o},$i.isKanjiModeEnabled=function(){return typeof e<"u"},$i.toSJIS=function(o){return e(o)},$i}var Zh={},K0;function gp(){return K0||(K0=1,(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function s(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+l)}}e.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},e.from=function(o,d){if(e.isValid(o))return o;try{return s(o)}catch{return d}}})(Zh)),Zh}var Hh,G0;function t3(){if(G0)return Hh;G0=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(s){const l=Math.floor(s/8);return(this.buffer[l]>>>7-s%8&1)===1},put:function(s,l){for(let o=0;o<l;o++)this.putBit((s>>>l-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(s){const l=Math.floor(this.length/8);this.buffer.length<=l&&this.buffer.push(0),s&&(this.buffer[l]|=128>>>this.length%8),this.length++}},Hh=e,Hh}var Kh,Q0;function n3(){if(Q0)return Kh;Q0=1;function e(s){if(!s||s<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=s,this.data=new Uint8Array(s*s),this.reservedBit=new Uint8Array(s*s)}return e.prototype.set=function(s,l,o,d){const m=s*this.size+l;this.data[m]=o,d&&(this.reservedBit[m]=!0)},e.prototype.get=function(s,l){return this.data[s*this.size+l]},e.prototype.xor=function(s,l,o){this.data[s*this.size+l]^=o},e.prototype.isReserved=function(s,l){return this.reservedBit[s*this.size+l]},Kh=e,Kh}var Gh={},V0;function a3(){return V0||(V0=1,(function(e){const s=Qr().getSymbolSize;e.getRowColCoords=function(o){if(o===1)return[];const d=Math.floor(o/7)+2,m=s(o),f=m===145?26:Math.ceil((m-13)/(2*d-2))*2,g=[m-7];for(let v=1;v<d-1;v++)g[v]=g[v-1]-f;return g.push(6),g.reverse()},e.getPositions=function(o){const d=[],m=e.getRowColCoords(o),f=m.length;for(let g=0;g<f;g++)for(let v=0;v<f;v++)g===0&&v===0||g===0&&v===f-1||g===f-1&&v===0||d.push([m[g],m[v]]);return d}})(Gh)),Gh}var Qh={},Y0;function s3(){if(Y0)return Qh;Y0=1;const e=Qr().getSymbolSize,s=7;return Qh.getPositions=function(o){const d=e(o);return[[0,0],[d-s,0],[0,d-s]]},Qh}var Vh={},$0;function i3(){return $0||($0=1,(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const s={N1:3,N2:3,N3:40,N4:10};e.isValid=function(d){return d!=null&&d!==""&&!isNaN(d)&&d>=0&&d<=7},e.from=function(d){return e.isValid(d)?parseInt(d,10):void 0},e.getPenaltyN1=function(d){const m=d.size;let f=0,g=0,v=0,_=null,S=null;for(let w=0;w<m;w++){g=v=0,_=S=null;for(let T=0;T<m;T++){let O=d.get(w,T);O===_?g++:(g>=5&&(f+=s.N1+(g-5)),_=O,g=1),O=d.get(T,w),O===S?v++:(v>=5&&(f+=s.N1+(v-5)),S=O,v=1)}g>=5&&(f+=s.N1+(g-5)),v>=5&&(f+=s.N1+(v-5))}return f},e.getPenaltyN2=function(d){const m=d.size;let f=0;for(let g=0;g<m-1;g++)for(let v=0;v<m-1;v++){const _=d.get(g,v)+d.get(g,v+1)+d.get(g+1,v)+d.get(g+1,v+1);(_===4||_===0)&&f++}return f*s.N2},e.getPenaltyN3=function(d){const m=d.size;let f=0,g=0,v=0;for(let _=0;_<m;_++){g=v=0;for(let S=0;S<m;S++)g=g<<1&2047|d.get(_,S),S>=10&&(g===1488||g===93)&&f++,v=v<<1&2047|d.get(S,_),S>=10&&(v===1488||v===93)&&f++}return f*s.N3},e.getPenaltyN4=function(d){let m=0;const f=d.data.length;for(let v=0;v<f;v++)m+=d.data[v];return Math.abs(Math.ceil(m*100/f/5)-10)*s.N4};function l(o,d,m){switch(o){case e.Patterns.PATTERN000:return(d+m)%2===0;case e.Patterns.PATTERN001:return d%2===0;case e.Patterns.PATTERN010:return m%3===0;case e.Patterns.PATTERN011:return(d+m)%3===0;case e.Patterns.PATTERN100:return(Math.floor(d/2)+Math.floor(m/3))%2===0;case e.Patterns.PATTERN101:return d*m%2+d*m%3===0;case e.Patterns.PATTERN110:return(d*m%2+d*m%3)%2===0;case e.Patterns.PATTERN111:return(d*m%3+(d+m)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}e.applyMask=function(d,m){const f=m.size;for(let g=0;g<f;g++)for(let v=0;v<f;v++)m.isReserved(v,g)||m.xor(v,g,l(d,v,g))},e.getBestMask=function(d,m){const f=Object.keys(e.Patterns).length;let g=0,v=1/0;for(let _=0;_<f;_++){m(_),e.applyMask(_,d);const S=e.getPenaltyN1(d)+e.getPenaltyN2(d)+e.getPenaltyN3(d)+e.getPenaltyN4(d);e.applyMask(_,d),S<v&&(v=S,g=_)}return g}})(Vh)),Vh}var Gu={},X0;function S_(){if(X0)return Gu;X0=1;const e=gp(),s=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],l=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Gu.getBlocksCount=function(d,m){switch(m){case e.L:return s[(d-1)*4+0];case e.M:return s[(d-1)*4+1];case e.Q:return s[(d-1)*4+2];case e.H:return s[(d-1)*4+3];default:return}},Gu.getTotalCodewordsCount=function(d,m){switch(m){case e.L:return l[(d-1)*4+0];case e.M:return l[(d-1)*4+1];case e.Q:return l[(d-1)*4+2];case e.H:return l[(d-1)*4+3];default:return}},Gu}var Yh={},Xo={},J0;function r3(){if(J0)return Xo;J0=1;const e=new Uint8Array(512),s=new Uint8Array(256);return(function(){let o=1;for(let d=0;d<255;d++)e[d]=o,s[o]=d,o<<=1,o&256&&(o^=285);for(let d=255;d<512;d++)e[d]=e[d-255]})(),Xo.log=function(o){if(o<1)throw new Error("log("+o+")");return s[o]},Xo.exp=function(o){return e[o]},Xo.mul=function(o,d){return o===0||d===0?0:e[s[o]+s[d]]},Xo}var W0;function l3(){return W0||(W0=1,(function(e){const s=r3();e.mul=function(o,d){const m=new Uint8Array(o.length+d.length-1);for(let f=0;f<o.length;f++)for(let g=0;g<d.length;g++)m[f+g]^=s.mul(o[f],d[g]);return m},e.mod=function(o,d){let m=new Uint8Array(o);for(;m.length-d.length>=0;){const f=m[0];for(let v=0;v<d.length;v++)m[v]^=s.mul(d[v],f);let g=0;for(;g<m.length&&m[g]===0;)g++;m=m.slice(g)}return m},e.generateECPolynomial=function(o){let d=new Uint8Array([1]);for(let m=0;m<o;m++)d=e.mul(d,new Uint8Array([1,s.exp(m)]));return d}})(Yh)),Yh}var $h,ev;function o3(){if(ev)return $h;ev=1;const e=l3();function s(l){this.genPoly=void 0,this.degree=l,this.degree&&this.initialize(this.degree)}return s.prototype.initialize=function(o){this.degree=o,this.genPoly=e.generateECPolynomial(this.degree)},s.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const d=new Uint8Array(o.length+this.degree);d.set(o);const m=e.mod(d,this.genPoly),f=this.degree-m.length;if(f>0){const g=new Uint8Array(this.degree);return g.set(m,f),g}return m},$h=s,$h}var Xh={},Jh={},Wh={},tv;function w_(){return tv||(tv=1,Wh.isValid=function(s){return!isNaN(s)&&s>=1&&s<=40}),Wh}var Ks={},nv;function E_(){if(nv)return Ks;nv=1;const e="[0-9]+",s="[A-Z $%*+\\-./:]+";let l="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";l=l.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+l+`)(?:.|[\r
]))+`;Ks.KANJI=new RegExp(l,"g"),Ks.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ks.BYTE=new RegExp(o,"g"),Ks.NUMERIC=new RegExp(e,"g"),Ks.ALPHANUMERIC=new RegExp(s,"g");const d=new RegExp("^"+l+"$"),m=new RegExp("^"+e+"$"),f=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ks.testKanji=function(v){return d.test(v)},Ks.testNumeric=function(v){return m.test(v)},Ks.testAlphanumeric=function(v){return f.test(v)},Ks}var av;function Vr(){return av||(av=1,(function(e){const s=w_(),l=E_();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(m,f){if(!m.ccBits)throw new Error("Invalid mode: "+m);if(!s.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?m.ccBits[0]:f<27?m.ccBits[1]:m.ccBits[2]},e.getBestModeForData=function(m){return l.testNumeric(m)?e.NUMERIC:l.testAlphanumeric(m)?e.ALPHANUMERIC:l.testKanji(m)?e.KANJI:e.BYTE},e.toString=function(m){if(m&&m.id)return m.id;throw new Error("Invalid mode")},e.isValid=function(m){return m&&m.bit&&m.ccBits};function o(d){if(typeof d!="string")throw new Error("Param is not a string");switch(d.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+d)}}e.from=function(m,f){if(e.isValid(m))return m;try{return o(m)}catch{return f}}})(Jh)),Jh}var sv;function c3(){return sv||(sv=1,(function(e){const s=Qr(),l=S_(),o=gp(),d=Vr(),m=w_(),f=7973,g=s.getBCHDigit(f);function v(T,O,k){for(let A=1;A<=40;A++)if(O<=e.getCapacity(A,k,T))return A}function _(T,O){return d.getCharCountIndicator(T,O)+4}function S(T,O){let k=0;return T.forEach(function(A){const z=_(A.mode,O);k+=z+A.getBitsLength()}),k}function w(T,O){for(let k=1;k<=40;k++)if(S(T,k)<=e.getCapacity(k,O,d.MIXED))return k}e.from=function(O,k){return m.isValid(O)?parseInt(O,10):k},e.getCapacity=function(O,k,A){if(!m.isValid(O))throw new Error("Invalid QR Code version");typeof A>"u"&&(A=d.BYTE);const z=s.getSymbolTotalCodewords(O),U=l.getTotalCodewordsCount(O,k),I=(z-U)*8;if(A===d.MIXED)return I;const R=I-_(A,O);switch(A){case d.NUMERIC:return Math.floor(R/10*3);case d.ALPHANUMERIC:return Math.floor(R/11*2);case d.KANJI:return Math.floor(R/13);case d.BYTE:default:return Math.floor(R/8)}},e.getBestVersionForData=function(O,k){let A;const z=o.from(k,o.M);if(Array.isArray(O)){if(O.length>1)return w(O,z);if(O.length===0)return 1;A=O[0]}else A=O;return v(A.mode,A.getLength(),z)},e.getEncodedBits=function(O){if(!m.isValid(O)||O<7)throw new Error("Invalid QR Code version");let k=O<<12;for(;s.getBCHDigit(k)-g>=0;)k^=f<<s.getBCHDigit(k)-g;return O<<12|k}})(Xh)),Xh}var ef={},iv;function u3(){if(iv)return ef;iv=1;const e=Qr(),s=1335,l=21522,o=e.getBCHDigit(s);return ef.getEncodedBits=function(m,f){const g=m.bit<<3|f;let v=g<<10;for(;e.getBCHDigit(v)-o>=0;)v^=s<<e.getBCHDigit(v)-o;return(g<<10|v)^l},ef}var tf={},nf,rv;function d3(){if(rv)return nf;rv=1;const e=Vr();function s(l){this.mode=e.NUMERIC,this.data=l.toString()}return s.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(o){let d,m,f;for(d=0;d+3<=this.data.length;d+=3)m=this.data.substr(d,3),f=parseInt(m,10),o.put(f,10);const g=this.data.length-d;g>0&&(m=this.data.substr(d),f=parseInt(m,10),o.put(f,g*3+1))},nf=s,nf}var af,lv;function m3(){if(lv)return af;lv=1;const e=Vr(),s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function l(o){this.mode=e.ALPHANUMERIC,this.data=o}return l.getBitsLength=function(d){return 11*Math.floor(d/2)+6*(d%2)},l.prototype.getLength=function(){return this.data.length},l.prototype.getBitsLength=function(){return l.getBitsLength(this.data.length)},l.prototype.write=function(d){let m;for(m=0;m+2<=this.data.length;m+=2){let f=s.indexOf(this.data[m])*45;f+=s.indexOf(this.data[m+1]),d.put(f,11)}this.data.length%2&&d.put(s.indexOf(this.data[m]),6)},af=l,af}var sf,ov;function h3(){if(ov)return sf;ov=1;const e=Vr();function s(l){this.mode=e.BYTE,typeof l=="string"?this.data=new TextEncoder().encode(l):this.data=new Uint8Array(l)}return s.getBitsLength=function(o){return o*8},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(l){for(let o=0,d=this.data.length;o<d;o++)l.put(this.data[o],8)},sf=s,sf}var rf,cv;function f3(){if(cv)return rf;cv=1;const e=Vr(),s=Qr();function l(o){this.mode=e.KANJI,this.data=o}return l.getBitsLength=function(d){return d*13},l.prototype.getLength=function(){return this.data.length},l.prototype.getBitsLength=function(){return l.getBitsLength(this.data.length)},l.prototype.write=function(o){let d;for(d=0;d<this.data.length;d++){let m=s.toSJIS(this.data[d]);if(m>=33088&&m<=40956)m-=33088;else if(m>=57408&&m<=60351)m-=49472;else throw new Error("Invalid SJIS character: "+this.data[d]+`
Make sure your charset is UTF-8`);m=(m>>>8&255)*192+(m&255),o.put(m,13)}},rf=l,rf}var lf={exports:{}},uv;function p3(){return uv||(uv=1,(function(e){var s={single_source_shortest_paths:function(l,o,d){var m={},f={};f[o]=0;var g=s.PriorityQueue.make();g.push(o,0);for(var v,_,S,w,T,O,k,A,z;!g.empty();){v=g.pop(),_=v.value,w=v.cost,T=l[_]||{};for(S in T)T.hasOwnProperty(S)&&(O=T[S],k=w+O,A=f[S],z=typeof f[S]>"u",(z||A>k)&&(f[S]=k,g.push(S,k),m[S]=_))}if(typeof d<"u"&&typeof f[d]>"u"){var U=["Could not find a path from ",o," to ",d,"."].join("");throw new Error(U)}return m},extract_shortest_path_from_predecessor_list:function(l,o){for(var d=[],m=o;m;)d.push(m),l[m],m=l[m];return d.reverse(),d},find_path:function(l,o,d){var m=s.single_source_shortest_paths(l,o,d);return s.extract_shortest_path_from_predecessor_list(m,d)},PriorityQueue:{make:function(l){var o=s.PriorityQueue,d={},m;l=l||{};for(m in o)o.hasOwnProperty(m)&&(d[m]=o[m]);return d.queue=[],d.sorter=l.sorter||o.default_sorter,d},default_sorter:function(l,o){return l.cost-o.cost},push:function(l,o){var d={value:l,cost:o};this.queue.push(d),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=s})(lf)),lf.exports}var dv;function x3(){return dv||(dv=1,(function(e){const s=Vr(),l=d3(),o=m3(),d=h3(),m=f3(),f=E_(),g=Qr(),v=p3();function _(U){return unescape(encodeURIComponent(U)).length}function S(U,I,R){const K=[];let V;for(;(V=U.exec(R))!==null;)K.push({data:V[0],index:V.index,mode:I,length:V[0].length});return K}function w(U){const I=S(f.NUMERIC,s.NUMERIC,U),R=S(f.ALPHANUMERIC,s.ALPHANUMERIC,U);let K,V;return g.isKanjiModeEnabled()?(K=S(f.BYTE,s.BYTE,U),V=S(f.KANJI,s.KANJI,U)):(K=S(f.BYTE_KANJI,s.BYTE,U),V=[]),I.concat(R,K,V).sort(function(q,Y){return q.index-Y.index}).map(function(q){return{data:q.data,mode:q.mode,length:q.length}})}function T(U,I){switch(I){case s.NUMERIC:return l.getBitsLength(U);case s.ALPHANUMERIC:return o.getBitsLength(U);case s.KANJI:return m.getBitsLength(U);case s.BYTE:return d.getBitsLength(U)}}function O(U){return U.reduce(function(I,R){const K=I.length-1>=0?I[I.length-1]:null;return K&&K.mode===R.mode?(I[I.length-1].data+=R.data,I):(I.push(R),I)},[])}function k(U){const I=[];for(let R=0;R<U.length;R++){const K=U[R];switch(K.mode){case s.NUMERIC:I.push([K,{data:K.data,mode:s.ALPHANUMERIC,length:K.length},{data:K.data,mode:s.BYTE,length:K.length}]);break;case s.ALPHANUMERIC:I.push([K,{data:K.data,mode:s.BYTE,length:K.length}]);break;case s.KANJI:I.push([K,{data:K.data,mode:s.BYTE,length:_(K.data)}]);break;case s.BYTE:I.push([{data:K.data,mode:s.BYTE,length:_(K.data)}])}}return I}function A(U,I){const R={},K={start:{}};let V=["start"];for(let ee=0;ee<U.length;ee++){const q=U[ee],Y=[];for(let $=0;$<q.length;$++){const ie=q[$],fe=""+ee+$;Y.push(fe),R[fe]={node:ie,lastCount:0},K[fe]={};for(let ue=0;ue<V.length;ue++){const je=V[ue];R[je]&&R[je].node.mode===ie.mode?(K[je][fe]=T(R[je].lastCount+ie.length,ie.mode)-T(R[je].lastCount,ie.mode),R[je].lastCount+=ie.length):(R[je]&&(R[je].lastCount=ie.length),K[je][fe]=T(ie.length,ie.mode)+4+s.getCharCountIndicator(ie.mode,I))}}V=Y}for(let ee=0;ee<V.length;ee++)K[V[ee]].end=0;return{map:K,table:R}}function z(U,I){let R;const K=s.getBestModeForData(U);if(R=s.from(I,K),R!==s.BYTE&&R.bit<K.bit)throw new Error('"'+U+'" cannot be encoded with mode '+s.toString(R)+`.
 Suggested mode is: `+s.toString(K));switch(R===s.KANJI&&!g.isKanjiModeEnabled()&&(R=s.BYTE),R){case s.NUMERIC:return new l(U);case s.ALPHANUMERIC:return new o(U);case s.KANJI:return new m(U);case s.BYTE:return new d(U)}}e.fromArray=function(I){return I.reduce(function(R,K){return typeof K=="string"?R.push(z(K,null)):K.data&&R.push(z(K.data,K.mode)),R},[])},e.fromString=function(I,R){const K=w(I,g.isKanjiModeEnabled()),V=k(K),ee=A(V,R),q=v.find_path(ee.map,"start","end"),Y=[];for(let $=1;$<q.length-1;$++)Y.push(ee.table[q[$]].node);return e.fromArray(O(Y))},e.rawSplit=function(I){return e.fromArray(w(I,g.isKanjiModeEnabled()))}})(tf)),tf}var mv;function g3(){if(mv)return qh;mv=1;const e=Qr(),s=gp(),l=t3(),o=n3(),d=a3(),m=s3(),f=i3(),g=S_(),v=o3(),_=c3(),S=u3(),w=Vr(),T=x3();function O(ee,q){const Y=ee.size,$=m.getPositions(q);for(let ie=0;ie<$.length;ie++){const fe=$[ie][0],ue=$[ie][1];for(let je=-1;je<=7;je++)if(!(fe+je<=-1||Y<=fe+je))for(let X=-1;X<=7;X++)ue+X<=-1||Y<=ue+X||(je>=0&&je<=6&&(X===0||X===6)||X>=0&&X<=6&&(je===0||je===6)||je>=2&&je<=4&&X>=2&&X<=4?ee.set(fe+je,ue+X,!0,!0):ee.set(fe+je,ue+X,!1,!0))}}function k(ee){const q=ee.size;for(let Y=8;Y<q-8;Y++){const $=Y%2===0;ee.set(Y,6,$,!0),ee.set(6,Y,$,!0)}}function A(ee,q){const Y=d.getPositions(q);for(let $=0;$<Y.length;$++){const ie=Y[$][0],fe=Y[$][1];for(let ue=-2;ue<=2;ue++)for(let je=-2;je<=2;je++)ue===-2||ue===2||je===-2||je===2||ue===0&&je===0?ee.set(ie+ue,fe+je,!0,!0):ee.set(ie+ue,fe+je,!1,!0)}}function z(ee,q){const Y=ee.size,$=_.getEncodedBits(q);let ie,fe,ue;for(let je=0;je<18;je++)ie=Math.floor(je/3),fe=je%3+Y-8-3,ue=($>>je&1)===1,ee.set(ie,fe,ue,!0),ee.set(fe,ie,ue,!0)}function U(ee,q,Y){const $=ee.size,ie=S.getEncodedBits(q,Y);let fe,ue;for(fe=0;fe<15;fe++)ue=(ie>>fe&1)===1,fe<6?ee.set(fe,8,ue,!0):fe<8?ee.set(fe+1,8,ue,!0):ee.set($-15+fe,8,ue,!0),fe<8?ee.set(8,$-fe-1,ue,!0):fe<9?ee.set(8,15-fe-1+1,ue,!0):ee.set(8,15-fe-1,ue,!0);ee.set($-8,8,1,!0)}function I(ee,q){const Y=ee.size;let $=-1,ie=Y-1,fe=7,ue=0;for(let je=Y-1;je>0;je-=2)for(je===6&&je--;;){for(let X=0;X<2;X++)if(!ee.isReserved(ie,je-X)){let oe=!1;ue<q.length&&(oe=(q[ue]>>>fe&1)===1),ee.set(ie,je-X,oe),fe--,fe===-1&&(ue++,fe=7)}if(ie+=$,ie<0||Y<=ie){ie-=$,$=-$;break}}}function R(ee,q,Y){const $=new l;Y.forEach(function(X){$.put(X.mode.bit,4),$.put(X.getLength(),w.getCharCountIndicator(X.mode,ee)),X.write($)});const ie=e.getSymbolTotalCodewords(ee),fe=g.getTotalCodewordsCount(ee,q),ue=(ie-fe)*8;for($.getLengthInBits()+4<=ue&&$.put(0,4);$.getLengthInBits()%8!==0;)$.putBit(0);const je=(ue-$.getLengthInBits())/8;for(let X=0;X<je;X++)$.put(X%2?17:236,8);return K($,ee,q)}function K(ee,q,Y){const $=e.getSymbolTotalCodewords(q),ie=g.getTotalCodewordsCount(q,Y),fe=$-ie,ue=g.getBlocksCount(q,Y),je=$%ue,X=ue-je,oe=Math.floor($/ue),Z=Math.floor(fe/ue),M=Z+1,ne=oe-Z,Se=new v(ne);let be=0;const D=new Array(ue),te=new Array(ue);let P=0;const ce=new Uint8Array(ee.buffer);for(let pe=0;pe<ue;pe++){const Ke=pe<X?Z:M;D[pe]=ce.slice(be,be+Ke),te[pe]=Se.encode(D[pe]),be+=Ke,P=Math.max(P,Ke)}const de=new Uint8Array($);let Ee=0,De,Ge;for(De=0;De<P;De++)for(Ge=0;Ge<ue;Ge++)De<D[Ge].length&&(de[Ee++]=D[Ge][De]);for(De=0;De<ne;De++)for(Ge=0;Ge<ue;Ge++)de[Ee++]=te[Ge][De];return de}function V(ee,q,Y,$){let ie;if(Array.isArray(ee))ie=T.fromArray(ee);else if(typeof ee=="string"){let oe=q;if(!oe){const Z=T.rawSplit(ee);oe=_.getBestVersionForData(Z,Y)}ie=T.fromString(ee,oe||40)}else throw new Error("Invalid data");const fe=_.getBestVersionForData(ie,Y);if(!fe)throw new Error("The amount of data is too big to be stored in a QR Code");if(!q)q=fe;else if(q<fe)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+fe+`.
`);const ue=R(q,Y,ie),je=e.getSymbolSize(q),X=new o(je);return O(X,q),k(X),A(X,q),U(X,Y,0),q>=7&&z(X,q),I(X,ue),isNaN($)&&($=f.getBestMask(X,U.bind(null,X,Y))),f.applyMask($,X),U(X,Y,$),{modules:X,version:q,errorCorrectionLevel:Y,maskPattern:$,segments:ie}}return qh.create=function(q,Y){if(typeof q>"u"||q==="")throw new Error("No input text");let $=s.M,ie,fe;return typeof Y<"u"&&($=s.from(Y.errorCorrectionLevel,s.M),ie=_.from(Y.version),fe=f.from(Y.maskPattern),Y.toSJISFunc&&e.setToSJISFunction(Y.toSJISFunc)),V(q,ie,$,fe)},qh}var of={},cf={},hv;function k_(){return hv||(hv=1,(function(e){function s(l){if(typeof l=="number"&&(l=l.toString()),typeof l!="string")throw new Error("Color should be defined as hex string");let o=l.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+l);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(m){return[m,m]}))),o.length===6&&o.push("F","F");const d=parseInt(o.join(""),16);return{r:d>>24&255,g:d>>16&255,b:d>>8&255,a:d&255,hex:"#"+o.slice(0,6).join("")}}e.getOptions=function(o){o||(o={}),o.color||(o.color={});const d=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,m=o.width&&o.width>=21?o.width:void 0,f=o.scale||4;return{width:m,scale:m?4:f,margin:d,color:{dark:s(o.color.dark||"#000000ff"),light:s(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},e.getScale=function(o,d){return d.width&&d.width>=o+d.margin*2?d.width/(o+d.margin*2):d.scale},e.getImageWidth=function(o,d){const m=e.getScale(o,d);return Math.floor((o+d.margin*2)*m)},e.qrToImageData=function(o,d,m){const f=d.modules.size,g=d.modules.data,v=e.getScale(f,m),_=Math.floor((f+m.margin*2)*v),S=m.margin*v,w=[m.color.light,m.color.dark];for(let T=0;T<_;T++)for(let O=0;O<_;O++){let k=(T*_+O)*4,A=m.color.light;if(T>=S&&O>=S&&T<_-S&&O<_-S){const z=Math.floor((T-S)/v),U=Math.floor((O-S)/v);A=w[g[z*f+U]?1:0]}o[k++]=A.r,o[k++]=A.g,o[k++]=A.b,o[k]=A.a}}})(cf)),cf}var fv;function y3(){return fv||(fv=1,(function(e){const s=k_();function l(d,m,f){d.clearRect(0,0,m.width,m.height),m.style||(m.style={}),m.height=f,m.width=f,m.style.height=f+"px",m.style.width=f+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(m,f,g){let v=g,_=f;typeof v>"u"&&(!f||!f.getContext)&&(v=f,f=void 0),f||(_=o()),v=s.getOptions(v);const S=s.getImageWidth(m.modules.size,v),w=_.getContext("2d"),T=w.createImageData(S,S);return s.qrToImageData(T.data,m,v),l(w,_,S),w.putImageData(T,0,0),_},e.renderToDataURL=function(m,f,g){let v=g;typeof v>"u"&&(!f||!f.getContext)&&(v=f,f=void 0),v||(v={});const _=e.render(m,f,v),S=v.type||"image/png",w=v.rendererOpts||{};return _.toDataURL(S,w.quality)}})(of)),of}var uf={},pv;function v3(){if(pv)return uf;pv=1;const e=k_();function s(d,m){const f=d.a/255,g=m+'="'+d.hex+'"';return f<1?g+" "+m+'-opacity="'+f.toFixed(2).slice(1)+'"':g}function l(d,m,f){let g=d+m;return typeof f<"u"&&(g+=" "+f),g}function o(d,m,f){let g="",v=0,_=!1,S=0;for(let w=0;w<d.length;w++){const T=Math.floor(w%m),O=Math.floor(w/m);!T&&!_&&(_=!0),d[w]?(S++,w>0&&T>0&&d[w-1]||(g+=_?l("M",T+f,.5+O+f):l("m",v,0),v=0,_=!1),T+1<m&&d[w+1]||(g+=l("h",S),S=0)):v++}return g}return uf.render=function(m,f,g){const v=e.getOptions(f),_=m.modules.size,S=m.modules.data,w=_+v.margin*2,T=v.color.light.a?"<path "+s(v.color.light,"fill")+' d="M0 0h'+w+"v"+w+'H0z"/>':"",O="<path "+s(v.color.dark,"stroke")+' d="'+o(S,_,v.margin)+'"/>',k='viewBox="0 0 '+w+" "+w+'"',z='<svg xmlns="http://www.w3.org/2000/svg" '+(v.width?'width="'+v.width+'" height="'+v.width+'" ':"")+k+' shape-rendering="crispEdges">'+T+O+`</svg>
`;return typeof g=="function"&&g(null,z),z},uf}var xv;function b3(){if(xv)return Ll;xv=1;const e=e3(),s=g3(),l=y3(),o=v3();function d(m,f,g,v,_){const S=[].slice.call(arguments,1),w=S.length,T=typeof S[w-1]=="function";if(!T&&!e())throw new Error("Callback required as last argument");if(T){if(w<2)throw new Error("Too few arguments provided");w===2?(_=g,g=f,f=v=void 0):w===3&&(f.getContext&&typeof _>"u"?(_=v,v=void 0):(_=v,v=g,g=f,f=void 0))}else{if(w<1)throw new Error("Too few arguments provided");return w===1?(g=f,f=v=void 0):w===2&&!f.getContext&&(v=g,g=f,f=void 0),new Promise(function(O,k){try{const A=s.create(g,v);O(m(A,f,v))}catch(A){k(A)}})}try{const O=s.create(g,v);_(null,m(O,f,v))}catch(O){_(O)}}return Ll.create=s.create,Ll.toCanvas=d.bind(null,l.render),Ll.toDataURL=d.bind(null,l.renderToDataURL),Ll.toString=d.bind(null,function(m,f,g){return o.render(m,g)}),Ll}var _3=b3();const Bf=xd(_3),yp=[{key:"regions",label:"Bolgeler"},{key:"departments",label:"Departmanlar"},{key:"employees",label:"Calisanlar"},{key:"devices",label:"Cihazlar"},{key:"work_rules",label:"Mesai Kurallari"},{key:"attendance_events",label:"Yoklama Kayitlari"},{key:"leaves",label:"Izinler"},{key:"reports",label:"Raporlar"},{key:"compliance",label:"Uyumluluk"},{key:"schedule",label:"Planlama"},{key:"manual_overrides",label:"Manuel Duzeltme"},{key:"audit",label:"Denetim Kayitlari"},{key:"admin_users",label:"Admin Kullanicilari"}];function tc(){return Object.fromEntries(yp.map(e=>[e.key,{read:!1,write:!1}]))}function N3(e){const s=tc();return e&&yp.forEach(({key:l})=>{const o=e[l];o&&(s[l]={read:!!(o.read||o.write),write:!!o.write})}),s}function gv({value:e,disabled:s=!1,onChange:l}){const o=(d,m,f)=>{const v={...e[d]??{read:!1,write:!1}};m==="read"?(v.read=f,f||(v.write=!1)):(v.write=f,f&&(v.read=!0)),l({...e,[d]:v})};return n.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2",children:"Modul"}),n.jsx("th",{className:"px-3 py-2",children:"Goruntule"}),n.jsx("th",{className:"px-3 py-2",children:"Duzenle"})]})}),n.jsx("tbody",{children:yp.map(d=>{const m=e[d.key]??{read:!1,write:!1};return n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-3 py-2",children:d.label}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:m.read,disabled:s,onChange:f=>o(d.key,"read",f.target.checked)})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:m.write,disabled:s,onChange:f=>o(d.key,"write",f.target.checked)})})]},d.key)})})]})})}function yv(){return{username:"",full_name:"",password:"",is_active:!0,is_super_admin:!1,permissions:tc()}}function df(e){return e?new Date(e).toLocaleString("tr-TR"):"-"}function j3(e){const s=(e??"").trim();return s?s.length<=80?s:`${s.slice(0,80)}...`:"-"}function S3(e){const s=e.trim();return s?s.length<=60?s:`${s.slice(0,30)}...${s.slice(-22)}`:"-"}function w3(){const e=la(),{pushToast:s}=oa(),{hasPermission:l,isSuperAdmin:o,user:d}=Yl(),m=l("admin_users"),f=l("admin_users","write"),[g,v]=b.useState(yv()),[_,S]=b.useState(null),[w,T]=b.useState(""),[O,k]=b.useState(""),[A,z]=b.useState(""),[U,I]=b.useState(!0),[R,K]=b.useState(!1),[V,ee]=b.useState(tc()),[q,Y]=b.useState(null),[$,ie]=b.useState(null),[fe,ue]=b.useState(null),[je,X]=b.useState(""),[oe,Z]=b.useState(""),[M,ne]=b.useState(null),[Se,be]=b.useState([]),[D,te]=b.useState(null),P=Ze({queryKey:["admin-users"],queryFn:r_,enabled:m}),ce=Ze({queryKey:["admin-user-mfa-status",$?.id],queryFn:()=>HC($.id),enabled:!!$}),de=Ze({queryKey:["admin-user-claim-detail",q?.id],queryFn:()=>PC(q.id),enabled:!!q}),Ee=Xe({mutationFn:({adminUserId:se,claimId:Ie,nextActive:_t})=>IC(se,Ie,{is_active:_t}),onSuccess:(se,Ie)=>{s({variant:"success",title:Ie.nextActive?"Claim aktif edildi":"Claim pasife alindi",description:Ie.nextActive?"Admin cihazi yeniden aktif edildi.":"Admin cihazi manuel olarak pasife alindi."}),e.invalidateQueries({queryKey:["admin-user-claim-detail",Ie.adminUserId]}),e.invalidateQueries({queryKey:["admin-users"]})},onError:se=>{const Ie=He(se,"Claim durumu guncellenemedi.");s({variant:"error",title:"Claim guncelleme hatasi",description:Ie.message})}}),De=Xe({mutationFn:FC,onSuccess:()=>{s({variant:"success",title:"Admin kullanici olusturuldu",description:"Yeni admin hesabi kaydedildi."}),v(yv()),e.invalidateQueries({queryKey:["admin-users"]})},onError:se=>{const Ie=He(se,"Admin kullanici olusturulamadi.");s({variant:"error",title:"Kayit basarisiz",description:Ie.message})}}),Ge=Xe({mutationFn:({userId:se,payload:Ie})=>qC(se,Ie),onSuccess:()=>{s({variant:"success",title:"Admin kullanici guncellendi",description:"Kullanici yetkileri guncellendi."}),S(null),z(""),e.invalidateQueries({queryKey:["admin-users"]})},onError:se=>{const Ie=He(se,"Admin kullanici guncellenemedi.");s({variant:"error",title:"Guncelleme basarisiz",description:Ie.message})}}),pe=Xe({mutationFn:ZC,onSuccess:()=>{s({variant:"success",title:"Admin kullanici silindi",description:"Kullanici kaydi sistemden kaldirildi."}),e.invalidateQueries({queryKey:["admin-users"]})},onError:se=>{const Ie=He(se,"Admin kullanici silinemedi.");s({variant:"error",title:"Silme basarisiz",description:Ie.message})}}),Ke=Xe({mutationFn:se=>KC(se),onSuccess:se=>{ue(se),X(""),be([]),te(null),ce.refetch(),s({variant:"success",title:"MFA kurulumu baslatildi",description:"QR kodu taratip 6 haneli kodu onaylayin."})},onError:se=>{const Ie=He(se,"MFA kurulumu baslatilamadi.");s({variant:"error",title:"MFA kurulum hatasi",description:Ie.message})}}),_e=Xe({mutationFn:({adminUserId:se,code:Ie})=>GC(se,{code:Ie}),onSuccess:se=>{be(se.recovery_codes),te(se.recovery_code_expires_at),ue(null),X(""),e.invalidateQueries({queryKey:["admin-users"]}),ce.refetch(),s({variant:"success",title:"MFA aktif edildi",description:"Recovery kodlari olusturuldu."})},onError:se=>{const Ie=He(se,"MFA kodu dogrulanamadi.");s({variant:"error",title:"MFA onay hatasi",description:Ie.message})}}),lt=Xe({mutationFn:({adminUserId:se,currentPassword:Ie})=>QC(se,{current_password:Ie}),onSuccess:se=>{be(se.recovery_codes),te(se.recovery_code_expires_at),Z(""),ce.refetch(),s({variant:"success",title:"Recovery kodlari yenilendi",description:"Eski kodlar pasif edildi."})},onError:se=>{const Ie=He(se,"Recovery kodlari yenilenemedi.");s({variant:"error",title:"Yenileme hatasi",description:Ie.message})}}),dt=Xe({mutationFn:({adminUserId:se,currentPassword:Ie})=>VC(se,{current_password:Ie}),onSuccess:()=>{ue(null),X(""),ne(null),be([]),te(null),Z(""),e.invalidateQueries({queryKey:["admin-users"]}),ce.refetch(),s({variant:"success",title:"MFA sifirlandi",description:"Kullanici tekrar MFA kurabilir."})},onError:se=>{const Ie=He(se,"MFA sifirlanamadi.");s({variant:"error",title:"Sifirlama hatasi",description:Ie.message})}});b.useEffect(()=>{if(!fe?.otpauth_uri){ne(null);return}let se=!1;return Bf.toDataURL(fe.otpauth_uri,{margin:1,width:220}).then(Ie=>{se||ne(Ie)}).catch(()=>{se||ne(null)}),()=>{se=!0}},[fe]);const ze=b.useMemo(()=>[...P.data??[]].sort((Ie,_t)=>Ie.username.localeCompare(_t.username)),[P.data]),ot=ce.data;if(!m)return n.jsx(wt,{message:"Bu alani goruntuleme yetkiniz yok."});if(P.isLoading)return n.jsx(Gt,{label:"Admin kullanicilar yukleniyor..."});if(P.isError)return n.jsx(wt,{message:"Admin kullanici listesi alinamadi."});const bt=se=>{if(se.preventDefault(),!!f){if(!o){s({variant:"info",title:"Yetki siniri",description:"Sadece super admin yeni admin kullanici olusturabilir."});return}if(g.password.length<8){s({variant:"error",title:"Kayit basarisiz",description:"Sifre alani en az 8 karakter olmali."});return}De.mutate({username:g.username.trim(),full_name:g.full_name.trim()||null,password:g.password,is_active:g.is_active,is_super_admin:g.is_super_admin,permissions:g.is_super_admin?tc():g.permissions})}},It=se=>{S(se),T(se.username),k(se.full_name??""),z(""),I(se.is_active),K(se.is_super_admin),ee(N3(se.permissions))},Bt=se=>{Y(se)},rn=()=>{Y(null)},ae=se=>{ie(se),ue(null),X(""),Z(""),ne(null),be([]),te(null)},ke=()=>{ie(null),ue(null),X(""),Z(""),ne(null),be([]),te(null)},Be=se=>{if(se.preventDefault(),!(!_||!f)){if(A.trim()&&A.trim().length<8){s({variant:"error",title:"Guncelleme basarisiz",description:"Yeni sifre en az 8 karakter olmali."});return}Ge.mutate({userId:_.id,payload:{username:w.trim(),full_name:O.trim()||null,password:A.trim()?A:void 0,is_active:U,is_super_admin:R,permissions:R?tc():V}})}},at=se=>{se.preventDefault(),!(!$||!je.trim())&&_e.mutate({adminUserId:$.id,code:je.trim()})};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"Admin Kullanici ve Yetki Yonetimi",description:"Belirli modullere erisebilen read-only veya tam yetkili admin hesaplari olusturun."}),n.jsxs(Le,{children:[n.jsx("h4",{className:"mb-3 text-base font-semibold text-slate-900",children:"Yeni Admin Kullanici"}),n.jsxs("p",{className:"mb-3 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:["Sistem super admin hesabi: ",n.jsx("strong",{children:"admin"})," (env). Bu hesap her zaman tam yetkilidir."]}),o?null:n.jsx("p",{className:"mb-3 rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-sm text-amber-800",children:"Sadece super admin hesaplari yeni admin olusturabilir ve yetki duzenleyebilir."}),n.jsxs("form",{onSubmit:bt,className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Kullanici Adi",n.jsx("input",{value:g.username,onChange:se=>v(Ie=>({...Ie,username:se.target.value})),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"ik_readonly"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ad Soyad",n.jsx("input",{value:g.full_name,onChange:se=>v(Ie=>({...Ie,full_name:se.target.value})),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"IK Operasyon"})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Sifre",n.jsx("input",{type:"password",value:g.password,onChange:se=>v(Ie=>({...Ie,password:se.target.value})),disabled:!f||!o,minLength:8,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"En az 8 karakter"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-700",children:[n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:g.is_active,disabled:!f||!o,onChange:se=>v(Ie=>({...Ie,is_active:se.target.checked}))}),"Aktif"]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:g.is_super_admin,disabled:!f||!o,onChange:se=>v(Ie=>({...Ie,is_super_admin:se.target.checked}))}),"Super Admin"]})]}),g.is_super_admin?n.jsx("p",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:"Super admin secili oldugu icin tum modullerde tam yetki verilecektir."}):n.jsx(gv,{value:g.permissions,disabled:!f||!o,onChange:se=>v(Ie=>({...Ie,permissions:se}))}),n.jsx("button",{type:"submit",disabled:!f||!o||De.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:De.isPending?"Kaydediliyor...":"Kullanici Olustur"})]})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"mb-3 text-base font-semibold text-slate-900",children:"Mevcut Admin Kullanicilar"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"ID"}),n.jsx("th",{className:"py-2",children:"Kullanici"}),n.jsx("th",{className:"py-2",children:"Ad Soyad"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Rol"}),n.jsx("th",{className:"py-2",children:"Bagli Cihaz"}),n.jsx("th",{className:"py-2",children:"MFA"}),n.jsx("th",{className:"py-2",children:"Islem"})]})}),n.jsx("tbody",{children:ze.map(se=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:se.id}),n.jsx("td",{className:"py-2 font-medium text-slate-900",children:se.username}),n.jsx("td",{className:"py-2",children:se.full_name??"-"}),n.jsx("td",{className:"py-2",children:n.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${se.is_active?"bg-emerald-100 text-emerald-800":"bg-rose-100 text-rose-800"}`,children:se.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2",children:se.is_super_admin?"Super Admin":"Yetkili Admin"}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"text-xs text-slate-700",children:[n.jsx("span",{className:"font-semibold text-emerald-700",children:se.claim_active_total??0})," aktif /"," ",n.jsx("span",{className:"font-semibold",children:se.claim_total??0})," toplam"]})}),n.jsx("td",{className:"py-2",children:n.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${se.mfa_enabled?"bg-emerald-100 text-emerald-800":se.mfa_secret_configured?"bg-amber-100 text-amber-800":"bg-slate-100 text-slate-700"}`,children:se.mfa_enabled?"Aktif":se.mfa_secret_configured?"Kurulum Bekliyor":"Kapali"})}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Bt(se),className:"rounded-lg border border-emerald-300 px-3 py-1 text-xs font-medium text-emerald-700 hover:bg-emerald-50",children:"Detay"}),n.jsx("button",{type:"button",disabled:!(o||(d?.admin_user_id??0)===se.id),onClick:()=>ae(se),className:"rounded-lg border border-brand-200 px-3 py-1 text-xs font-medium text-brand-700 hover:bg-brand-50 disabled:opacity-50",children:"MFA"}),n.jsx("button",{type:"button",disabled:!f||!o,onClick:()=>It(se),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50",children:"Duzenle"}),n.jsx("button",{type:"button",disabled:!f||!o||pe.isPending,onClick:()=>{window.confirm(`${se.username} kullanicisini silmek istediginize emin misiniz?`)&&pe.mutate(se.id)},className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50 disabled:opacity-50",children:"Sil"})]})})]},se.id))})]})}),ze.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Kayitli admin kullanici bulunamadi."}):null]}),n.jsx(er,{open:!!q,title:q?`Admin Detay: ${q.username}`:"Admin Detay",onClose:rn,children:q?n.jsxs("div",{className:"space-y-4",children:[de.isLoading?n.jsx("p",{className:"text-sm text-slate-500",children:"Detay yukleniyor..."}):null,de.isError?n.jsx(wt,{message:"Admin claim detayi alinamadi."}):null,de.data?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm",children:["Toplam claim: ",n.jsx("strong",{children:de.data.claim_total})]}),n.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",children:["Aktif claim: ",n.jsx("strong",{children:de.data.claim_active_total})]}),n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:["Pasif claim: ",n.jsx("strong",{children:de.data.claim_inactive_total})]}),n.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 px-3 py-2 text-sm text-blue-800",children:["Benzersiz cihaz: ",n.jsx("strong",{children:new Set(de.data.claims.map(se=>se.endpoint_fingerprint)).size})]})]}),n.jsxs("section",{children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Bagli Cihaz / Claim Listesi"}),n.jsxs("div",{className:"mt-2 max-h-60 overflow-auto rounded-lg border border-slate-200",children:[n.jsxs("table",{className:"min-w-full text-left text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-50 uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2",children:"ID"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Fingerprint"}),n.jsx("th",{className:"px-2 py-2",children:"Son Gorulme"}),n.jsx("th",{className:"px-2 py-2",children:"Hata"}),n.jsx("th",{className:"px-2 py-2",children:"Tarayici"}),n.jsx("th",{className:"px-2 py-2",children:"Endpoint"}),n.jsx("th",{className:"px-2 py-2",children:"Islem"})]})}),n.jsx("tbody",{children:de.data.claims.map(se=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-2 py-2",children:se.id}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("span",{className:`rounded-full px-2 py-1 text-[11px] font-semibold ${se.is_active?"bg-emerald-100 text-emerald-800":"bg-rose-100 text-rose-800"}`,children:se.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"px-2 py-2 font-mono text-[11px]",children:se.endpoint_fingerprint}),n.jsx("td",{className:"px-2 py-2",children:df(se.last_seen_at)}),n.jsx("td",{className:"px-2 py-2",children:se.last_error?.trim()?se.last_error:"-"}),n.jsx("td",{className:"px-2 py-2",title:se.user_agent??"-",children:j3(se.user_agent)}),n.jsx("td",{className:"px-2 py-2 font-mono text-[11px]",title:se.endpoint,children:S3(se.endpoint)}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("button",{type:"button",disabled:!f||!o||Ee.isPending||!q,onClick:()=>{if(!q)return;if(!se.is_active){Ee.mutate({adminUserId:q.id,claimId:se.id,nextActive:!0});return}window.confirm("Bu admin claim pasife alinsin mi?")&&Ee.mutate({adminUserId:q.id,claimId:se.id,nextActive:!1})},className:`rounded-lg border px-2 py-1 text-[11px] font-semibold disabled:opacity-50 ${se.is_active?"border-rose-300 text-rose-700 hover:bg-rose-50":"border-emerald-300 text-emerald-700 hover:bg-emerald-50"}`,children:se.is_active?"Pasife Al":"Aktif Et"})})]},se.id))})]}),de.data.claims.length===0?n.jsx("p",{className:"px-2 py-2 text-sm text-slate-500",children:"Bu kullanici icin claim kaydi yok."}):null]})]}),n.jsxs("section",{children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Olusturulan Claim Davetleri"}),n.jsxs("div",{className:"mt-2 max-h-40 overflow-auto rounded-lg border border-slate-200",children:[n.jsxs("table",{className:"min-w-full text-left text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-50 uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2",children:"ID"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Deneme"}),n.jsx("th",{className:"px-2 py-2",children:"Bitis"}),n.jsx("th",{className:"px-2 py-2",children:"Kullanan"})]})}),n.jsx("tbody",{children:de.data.created_invites.map(se=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-2 py-2",children:se.id}),n.jsx("td",{className:"px-2 py-2",children:se.status}),n.jsxs("td",{className:"px-2 py-2",children:[se.attempt_count,"/",se.max_attempts]}),n.jsx("td",{className:"px-2 py-2",children:df(se.expires_at)}),n.jsx("td",{className:"px-2 py-2",children:se.used_by_username??"-"})]},se.id))})]}),de.data.created_invites.length===0?n.jsx("p",{className:"px-2 py-2 text-sm text-slate-500",children:"Kayit yok."}):null]})]}),n.jsxs("section",{children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Kullandigi Claim Davetleri"}),n.jsxs("div",{className:"mt-2 max-h-40 overflow-auto rounded-lg border border-slate-200",children:[n.jsxs("table",{className:"min-w-full text-left text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-50 uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2",children:"ID"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Olusturan"}),n.jsx("th",{className:"px-2 py-2",children:"Kullanilan Zaman"})]})}),n.jsx("tbody",{children:de.data.used_invites.map(se=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-2 py-2",children:se.id}),n.jsx("td",{className:"px-2 py-2",children:se.status}),n.jsx("td",{className:"px-2 py-2",children:se.created_by_username}),n.jsx("td",{className:"px-2 py-2",children:df(se.used_at)})]},se.id))})]}),de.data.used_invites.length===0?n.jsx("p",{className:"px-2 py-2 text-sm text-slate-500",children:"Kayit yok."}):null]})]})]}):null]}):null}),n.jsx(er,{open:!!_,title:"Admin Kullanici Duzenle",onClose:()=>{S(null),z("")},children:_?n.jsxs("form",{onSubmit:Be,className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Kullanici Adi",n.jsx("input",{value:w,onChange:se=>T(se.target.value),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ad Soyad",n.jsx("input",{value:O,onChange:se=>k(se.target.value),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Yeni Sifre (bos birakilirsa degismez)",n.jsx("input",{type:"password",value:A,onChange:se=>z(se.target.value),disabled:!f||!o,minLength:8,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Opsiyonel"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-700",children:[n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:U,disabled:!f||!o,onChange:se=>I(se.target.checked)}),"Aktif"]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:R,disabled:!f||!o,onChange:se=>K(se.target.checked)}),"Super Admin"]})]}),R?n.jsx("p",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:"Super admin secili oldugu icin tum modullerde tam yetki verilecektir."}):n.jsx(gv,{value:V,disabled:!f||!o,onChange:ee}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{S(null),z("")},className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50",children:"Vazgec"}),n.jsx("button",{type:"submit",disabled:!f||!o||Ge.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Ge.isPending?"Kaydediliyor...":"Guncelle"})]})]}):null}),n.jsx(er,{open:!!$,title:$?`MFA Yonetimi: ${$.username}`:"MFA Yonetimi",onClose:ke,children:$?n.jsxs("div",{className:"space-y-4",children:[ce.isLoading?n.jsx("p",{className:"text-sm text-slate-500",children:"MFA durumu yukleniyor..."}):null,ot?n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-3 text-sm text-slate-700",children:[n.jsxs("p",{children:["Durum:"," ",n.jsx("strong",{children:ot.mfa_enabled?"MFA aktif":ot.has_secret?"Kurulum bekliyor":"Kapali"})]}),n.jsxs("p",{children:["Aktif recovery kodu: ",ot.recovery_code_active_count]}),n.jsxs("p",{children:["Son guncelleme:"," ",ot.updated_at?new Date(ot.updated_at).toLocaleString("tr-TR"):"-"]}),n.jsxs("p",{children:["Kod son gecerlilik:"," ",ot.recovery_code_expires_at?new Date(ot.recovery_code_expires_at).toLocaleDateString("tr-TR"):"-"]})]}):null,n.jsx("div",{className:"flex flex-wrap gap-2",children:n.jsx("button",{type:"button",disabled:Ke.isPending,onClick:()=>Ke.mutate($.id),className:"rounded-lg border border-brand-300 px-3 py-2 text-xs font-semibold text-brand-700 hover:bg-brand-50 disabled:opacity-60",children:Ke.isPending?"Baslatiliyor...":"Kurulumu Baslat / Yenile"})}),fe?n.jsxs("form",{onSubmit:at,className:"space-y-3 rounded-lg border border-brand-100 bg-brand-50/40 px-3 py-3",children:[n.jsx("p",{className:"text-sm font-medium text-brand-900",children:"1) Authenticator ile QR kodu tarat"}),M?n.jsx("img",{src:M,alt:"MFA QR",className:"h-44 w-44 rounded-lg border border-brand-200 bg-white p-2"}):n.jsx("p",{className:"text-xs text-slate-600",children:"QR olusturulamadi. Asagidaki anahtari manuel girin."}),n.jsxs("p",{className:"text-xs text-slate-700",children:["Secret: ",n.jsx("code",{children:fe.secret_key})]}),n.jsx("p",{className:"text-xs text-slate-600 break-all",children:fe.otpauth_uri}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["2) Uretilen 6 haneli kod",n.jsx("input",{value:je,onChange:se=>X(se.target.value),inputMode:"numeric",pattern:"[0-9]*",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"123456"})]}),n.jsx("button",{type:"submit",disabled:_e.isPending||!je.trim(),className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:_e.isPending?"Onaylaniyor...":"MFA Kurulumunu Onayla"})]}):null,n.jsxs("div",{className:"space-y-2 rounded-lg border border-slate-200 px-3 py-3",children:[n.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Kritik Islemler (Sizin sifreniz gerekli)"}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["Mevcut sifreniz",n.jsx("input",{type:"password",value:oe,onChange:se=>Z(se.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Sizin admin sifreniz"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",disabled:lt.isPending||!oe.trim()||!ot?.mfa_enabled,onClick:()=>{oe.trim()&&lt.mutate({adminUserId:$.id,currentPassword:oe})},className:"rounded-lg border border-emerald-300 px-3 py-2 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:lt.isPending?"Yenileniyor...":"Recovery Kodlarini Yenile"}),n.jsx("button",{type:"button",disabled:dt.isPending||!oe.trim(),onClick:()=>{!window.confirm(`${$.username} icin MFA sifirlansin mi?`)||!oe.trim()||dt.mutate({adminUserId:$.id,currentPassword:oe})},className:"rounded-lg border border-rose-300 px-3 py-2 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:dt.isPending?"Sifirlaniyor...":"MFA Sifirla"})]})]}),Se.length>0?n.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-3 text-sm text-amber-900",children:[n.jsx("p",{className:"font-semibold",children:"Recovery kodlari (tek seferlik gosterim)"}),n.jsxs("p",{className:"mt-1 text-xs",children:["Gecerlilik:"," ",D?new Date(D).toLocaleDateString("tr-TR"):"-"]}),n.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:Se.map(se=>n.jsx("code",{className:"rounded bg-white px-2 py-1 text-slate-900",children:se},se))})]}):null]}):null})]})}function vv({label:e,value:s,onCopy:l}){return n.jsxs("label",{className:"block text-sm text-slate-700",children:[e,n.jsxs("div",{className:"mt-1 flex items-stretch gap-2",children:[n.jsx("input",{readOnly:!0,value:s,className:"w-full rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm text-slate-700"}),n.jsx("button",{type:"button",onClick:()=>l(s),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:"Kopyala"})]})]})}function E3(e){return e==="first"?{radius:10,color:"#7c3aed",fillColor:"#7c3aed",fillOpacity:.85,weight:2}:e==="recent"?{radius:7,color:"#1d4ed8",fillColor:"#bfdbfe",fillOpacity:.9,weight:2}:e==="checkin"?{radius:8,color:"#15803d",fillColor:"#15803d",fillOpacity:.85,weight:2}:e==="checkout"?{radius:11,color:"#be123c",fillColor:"#ffffff",fillOpacity:0,weight:3}:{radius:9,color:"#0f6a8c",fillColor:"#0f6a8c",fillOpacity:.9,weight:2}}function k3({markers:e,focusedMarkerId:s=null}){const l=b.useRef(null),o=b.useRef(null),d=b.useRef(null),m=b.useRef(new Map);return b.useEffect(()=>{if(!l.current||o.current)return;const f=e[0]?.lat??41.015137,g=e[0]?.lon??28.97953,v=Da.map(l.current,{center:[f,g],zoom:14,zoomControl:!0});return o.current=v,Da.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap katki saglayanlar"}).addTo(v),d.current=Da.layerGroup().addTo(v),()=>{o.current&&(o.current.remove(),o.current=null),d.current=null}},[e]),b.useEffect(()=>{if(!o.current||!d.current)return;const f=o.current,g=d.current;if(g.clearLayers(),m.current.clear(),!e.length)return;const v=[],_=new Map;for(const w of e){const T=`${w.lat.toFixed(6)}:${w.lon.toFixed(6)}`;_.set(T,(_.get(T)??0)+1)}const S=new Map;for(const w of e){const T=`${w.lat.toFixed(6)}:${w.lon.toFixed(6)}`,O=_.get(T)??1,k=S.get(T)??0;S.set(T,k+1);let A=w.lat,z=w.lon;if(O>1){const R=2*Math.PI*k/O,K=12e-5;A=w.lat+Math.sin(R)*K,z=w.lon+Math.cos(R)*K}const U=E3(w.kind),I=Da.circleMarker([A,z],U).bindPopup(`${w.label}<br/>${w.lat.toFixed(6)}, ${w.lon.toFixed(6)}`).addTo(g);m.current.set(w.id,I),v.push([A,z])}if(v.length===1){f.setView(v[0],16,{animate:!0});return}f.fitBounds(Da.latLngBounds(v),{padding:[24,24],maxZoom:17,animate:!0})},[e]),b.useEffect(()=>{if(!s||!o.current)return;const f=m.current.get(s);if(!f)return;const g=f.getLatLng();o.current.setView(g,Math.max(o.current.getZoom(),16),{animate:!0}),f.openPopup()},[s,e]),n.jsx("div",{ref:l,className:"h-72 w-full rounded-lg border border-slate-300 bg-slate-100","aria-label":"Calisan konum haritasi"})}const T3=$a({home_lat:qn().min(-90),home_lon:qn().min(-180),radius_m:qn().int().positive().max(2e3)}),C3=$a({expires_in_minutes:qn().int().positive().max(1440)});function Oa(e){if(!e)return"-";const s=new Date(e);return Number.isNaN(s.getTime())?e:s.toLocaleString("tr-TR",{timeZone:"Europe/Istanbul"})}function A3(e){return e==="OK"?"Tamam":e==="INCOMPLETE"?"Eksik":e==="LEAVE"?"Izinli":"Tatilde"}function M3(e){const s=new Date(`${e}T00:00:00`);return Number.isNaN(s.getTime())?"-":new Intl.DateTimeFormat("tr-TR",{timeZone:"Europe/Istanbul",weekday:"short"}).format(s)}function z3(e){return e.status==="INCOMPLETE"?"bg-rose-50/70":e.flags.length>0?"bg-amber-50/45":e.status==="LEAVE"||e.status==="OFF"?"bg-slate-50/70":""}function Qu(e,s){return e===null||s===null?"-":`${e.toFixed(6)}, ${s.toFixed(6)}`}function O3(e){return e.length?e.map(s=>`${Va(s).label} (${s})`).join(", "):"-"}const D3=new Intl.DateTimeFormat("en-CA",{timeZone:"Europe/Istanbul",year:"numeric",month:"2-digit",day:"2-digit"});function Xi(e){if(!e)return null;const s=new Date(e);return Number.isNaN(s.getTime())?null:D3.format(s)}function R3(e){return e.in_lat!==null&&e.in_lon!==null||e.out_lat!==null&&e.out_lon!==null}function mf(e){return`recent-${e.ts_utc}-${e.device_id}-${e.event_type}-${e.lat.toFixed(6)}-${e.lon.toFixed(6)}`}const L3=[10,20,35,50];function P3(){const e=jS(),s=Kl(),l=la(),{pushToast:o}=oa(),d=new Date,m=Number(e.id),f=Number.isFinite(m)&&sessionStorage.getItem("employee-detail-origin")==="employees"&&sessionStorage.getItem("employee-detail-id")===String(m),[g,v]=b.useState("41.0"),[_,S]=b.useState("29.0"),[w,T]=b.useState("120"),[O,k]=b.useState(null),[A,z]=b.useState(""),[U,I]=b.useState(""),[R,K]=b.useState(""),[V,ee]=b.useState(String(d.getFullYear())),[q,Y]=b.useState(String(d.getMonth()+1)),[$,ie]=b.useState(null),[fe,ue]=b.useState(null),[je,X]=b.useState(""),[oe,Z]=b.useState("all"),[M,ne]=b.useState("all"),[Se,be]=b.useState("all"),[D,te]=b.useState(""),[P,ce]=b.useState(""),[de,Ee]=b.useState(1),[De,Ge]=b.useState(20),[pe,Ke]=b.useState({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),[_e,lt]=b.useState(!1),[dt,ze]=b.useState("30"),[ot,bt]=b.useState(null),[It,Bt]=b.useState(null),[rn,ae]=b.useState(null),ke=Ze({queryKey:["employee-detail",m],queryFn:()=>WC(m),enabled:Number.isFinite(m)}),Be=ke.data?.employee,at=Ze({queryKey:["departments","employee-detail-edit"],queryFn:()=>fi(),enabled:Number.isFinite(m)}),se=Ze({queryKey:["department-shifts",Be?.department_id],queryFn:()=>pc(Be?.department_id?{department_id:Be.department_id,active_only:!1}:void 0),enabled:!!Be?.department_id}),Ie=Number(V),_t=Number(q),Dt=Number.isFinite(Ie)&&Number.isFinite(_t)&&_t>=1&&_t<=12,Rt=Ze({queryKey:["employee-monthly",m,Ie,_t],queryFn:()=>rc({employee_id:m,year:Ie,month:_t}),enabled:Number.isFinite(m)&&Dt}),ft=Ze({queryKey:["employee-monthly-current",m,d.getFullYear(),d.getMonth()+1],queryFn:()=>rc({employee_id:m,year:d.getFullYear(),month:d.getMonth()+1}),enabled:Number.isFinite(m)}),Ut=Xe({mutationFn:F=>aA(m,F),onSuccess:()=>{k(null),o({variant:"success",title:"Ev konumu guncellendi",description:`Calisan #${m} icin konum kaydedildi.`}),l.invalidateQueries({queryKey:["employee-detail",m]})},onError:F=>{const Ue=He(F,"Konum kaydedilemedi.").message;k(Ue),o({variant:"error",title:"Konum kaydedilemedi",description:Ue})}}),Ne=Xe({mutationFn:F=>l_(m,{is_active:F}),onSuccess:F=>{o({variant:"success",title:F.is_active?"Calisan aktife alindi":"Calisan arsive alindi",description:`${F.full_name} icin durum guncellendi.`}),l.invalidateQueries({queryKey:["employees"]}),l.invalidateQueries({queryKey:["employee-detail",m]})},onError:F=>{o({variant:"error",title:"Durum guncellenemedi",description:He(F,"Islem basarisiz.").message})}}),Je=Xe({mutationFn:F=>eA(m,F),onSuccess:F=>{o({variant:"success",title:"Calisan bilgileri guncellendi",description:`${F.full_name} icin profil bilgileri kaydedildi.`}),l.invalidateQueries({queryKey:["employees"]}),l.invalidateQueries({queryKey:["employee-detail",m]}),l.invalidateQueries({queryKey:["employee-monthly"]}),l.invalidateQueries({queryKey:["department-shifts",F.department_id]})},onError:F=>{o({variant:"error",title:"Calisan bilgileri guncellenemedi",description:He(F,"Islem basarisiz.").message})}}),nt=Xe({mutationFn:F=>tA(m,{shift_id:F}),onSuccess:F=>{o({variant:"success",title:"Vardiya atamasi guncellendi",description:`${F.full_name} icin vardiya kaydedildi.`}),l.invalidateQueries({queryKey:["employees"]}),l.invalidateQueries({queryKey:["employee-detail",m]}),l.invalidateQueries({queryKey:["employee-monthly"]})},onError:F=>{o({variant:"error",title:"Vardiya atamasi basarisiz",description:He(F,"Islem basarisiz.").message})}}),Nt=Xe({mutationFn:g_,onSuccess:F=>{bt(null),Bt(F.token),ae(F.invite_url),o({variant:"success",title:"Cihaz daveti olusturuldu",description:`Calisan #${m} icin davet hazir.`}),l.invalidateQueries({queryKey:["employee-detail",m]})},onError:F=>{const Ue=He(F,"Cihaz daveti olusturulamadi.").message;bt(Ue),o({variant:"error",title:"Davet olusturulamadi",description:Ue})}});b.useEffect(()=>{ke.data?.home_location&&(v(String(ke.data.home_location.home_lat)),S(String(ke.data.home_location.home_lon)),T(String(ke.data.home_location.radius_m)))},[ke.data?.home_location]),b.useEffect(()=>{Be&&z(Be.shift_id?String(Be.shift_id):"")},[Be]),b.useEffect(()=>{Be&&(I(Be.full_name),K(Be.department_id?String(Be.department_id):""))},[Be]),b.useEffect(()=>{Number.isFinite(m)&&(f||s("/employees",{replace:!0}))},[m,f,s]);const Ft=async F=>{try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(F);else{const Ue=document.createElement("textarea");Ue.value=F,document.body.appendChild(Ue),Ue.select(),document.execCommand("copy"),document.body.removeChild(Ue)}o({variant:"success",title:"Kopyalandi",description:"Deger panoya kopyalandi."})}catch{o({variant:"error",title:"Kopyalanamadi",description:"Tarayici kopyalama islemini engelledi."})}},jt=()=>{bt(null),Bt(null),ae(null),ze("30"),lt(!0)},fn=F=>{F.preventDefault(),bt(null);const Ue=C3.safeParse({expires_in_minutes:dt});if(!Ue.success){const ut=Ue.error.issues[0]?.message??"Sure alanini kontrol edin.";bt(ut),o({variant:"error",title:"Form hatasi",description:ut});return}Nt.mutate({employee_id:m,expires_in_minutes:Ue.data.expires_in_minutes})},Jn=F=>{F.preventDefault(),k(null);const Ue=T3.safeParse({home_lat:g,home_lon:_,radius_m:w});if(!Ue.success){const ut=Ue.error.issues[0]?.message??"Konum alanlarini kontrol edin.";k(ut),o({variant:"error",title:"Form hatasi",description:ut});return}Ut.mutate(Ue.data)},ln=F=>{F.preventDefault();const Ue=U.trim();if(!Ue){o({variant:"error",title:"Form hatasi",description:"Ad Soyad alani bos birakilamaz."});return}const ut=R?Number(R):null;if(R&&(ut===null||!Number.isFinite(ut)||ut<=0)){o({variant:"error",title:"Form hatasi",description:"Departman secimi gecersiz."});return}Je.mutate({full_name:Ue,department_id:ut})},xt=Rt.data?.days??[],Vt=b.useMemo(()=>xp(xt),[xt]),Tn=b.useMemo(()=>xt.filter(F=>F.flags.length>0).length,[xt]),Rn=b.useMemo(()=>xt.length?`%${Math.round((Rt.data?.totals.incomplete_days??0)/xt.length*100)}`:"%0",[Rt.data?.totals.incomplete_days,xt.length]),Cn=ke.data?.ip_summary??[],Lt=ke.data?.recent_locations??[],va=b.useMemo(()=>Array.from(new Set(Lt.map(F=>F.device_id))).filter(F=>Number.isFinite(F)).sort((F,Ue)=>F-Ue),[Lt]),An=b.useMemo(()=>{const F=je.trim().toLowerCase();return Lt.filter(Ue=>{const ut=Xi(Ue.ts_utc);return D&&ut&&ut<D||P&&ut&&ut>P||oe!=="all"&&Ue.event_type!==oe||M!=="all"&&Ue.location_status!==M||Se!=="all"&&String(Ue.device_id)!==Se?!1:F?[Oa(Ue.ts_utc),ut??"",Ue.event_type,Ue.location_status,String(Ue.device_id),Qu(Ue.lat,Ue.lon)].join(" ").toLowerCase().includes(F):!0})},[D,P,Se,oe,je,M,Lt]);b.useEffect(()=>{Ee(1)},[je,oe,M,Se,D,P,De]);const Hn=b.useMemo(()=>An.length?Math.max(1,Math.ceil(An.length/De)):1,[An.length,De]);b.useEffect(()=>{de<=Hn||Ee(Hn)},[de,Hn]);const Mn=b.useMemo(()=>{const F=(de-1)*De;return An.slice(F,F+De)},[An,de,De]),W=b.useMemo(()=>{if(!An.length)return{start:0,end:0};const F=(de-1)*De+1,Ue=Math.min(de*De,An.length);return{start:F,end:Ue}},[An.length,de,De]),Ve=b.useMemo(()=>{for(const F of Lt){const Ue=Xi(F.ts_utc);if(Ue)return Ue}for(let F=xt.length-1;F>=0;F-=1)if(R3(xt[F]))return xt[F].date;return null},[xt,Lt]);b.useEffect(()=>{$||!Ve||ie(Ve)},[Ve,$]),b.useEffect(()=>{if(!$)return;const F=xt.some(ut=>ut.date===$),Ue=Lt.some(ut=>Xi(ut.ts_utc)===$);!F&&!Ue&&(ie(null),ue(null))},[xt,Lt,$]);const zt=b.useMemo(()=>xt.find(F=>F.date===$)??null,[xt,$]),ba=b.useMemo(()=>$?Lt.filter(F=>Xi(F.ts_utc)===$):[],[Lt,$]),Ot=b.useMemo(()=>{const F=[],Ue=ke.data?.latest_location??null,ut=ke.data?.first_location??null,Ln=Ue&&$?Xi(Ue.ts_utc)===$:!1,zn=ut&&$?Xi(ut.ts_utc)===$:!1;zt&&(zt.in_lat!==null&&zt.in_lon!==null&&F.push({id:`${zt.date}-in`,lat:zt.in_lat,lon:zt.in_lon,label:`${zt.date} - Mesai Baslangici`,kind:"checkin"}),zt.out_lat!==null&&zt.out_lon!==null&&F.push({id:`${zt.date}-out`,lat:zt.out_lat,lon:zt.out_lon,label:`${zt.date} - Mesai Bitisi`,kind:"checkout"})),Ue&&Ln&&F.push({id:"latest",lat:Ue.lat,lon:Ue.lon,label:`Son bildirilen konum - ${Oa(Ue.ts_utc)}`,kind:"latest"}),ut&&zn&&F.push({id:"first",lat:ut.lat,lon:ut.lon,label:`Ilk konum kaydi - ${Oa(ut.ts_utc)}`,kind:"first"});for(const B of ba){const Fe=Ln&&Ue!==null&&Ue.ts_utc===B.ts_utc&&Ue.device_id===B.device_id,St=zn&&ut!==null&&ut.ts_utc===B.ts_utc&&ut.device_id===B.device_id;Fe||St||F.push({id:mf(B),lat:B.lat,lon:B.lon,label:`${B.event_type} - ${Oa(B.ts_utc)}`,kind:"recent"})}return F},[ke.data?.first_location,ke.data?.latest_location,ba,$,zt]),Oe=b.useMemo(()=>Ot.filter(F=>pe[F.kind]),[Ot,pe]),pn=b.useMemo(()=>({checkin:Ot.some(F=>F.kind==="checkin"),checkout:Ot.some(F=>F.kind==="checkout"),first:Ot.some(F=>F.kind==="first"),recent:Ot.some(F=>F.kind==="recent"),latest:Ot.some(F=>F.kind==="latest")}),[Ot]);b.useEffect(()=>{Ot.length&&(Oe.length||Ke({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}))},[Oe.length,Ot.length]),b.useEffect(()=>{if(!fe)return;Ot.some(Ue=>Ue.id===fe)||ue(null)},[Ot,fe]);const ca=F=>{if(!Ot.some(zn=>zn.kind===F)){o({variant:"info",title:"Bu tipte konum yok",description:"Secili kayitta bu lejant turune ait konum bulunamadi."});return}const ut=Object.values(pe).filter(Boolean).length;if(pe[F]&&ut===1){Ke({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0});return}Ke({checkin:F==="checkin",checkout:F==="checkout",first:F==="first",recent:F==="recent",latest:F==="latest"});const Ln=Ot.find(zn=>zn.kind===F);Ln&&ue(Ln.id)},Wn=()=>{Ke({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),ue(null)},Yt=(F,Ue)=>{const ut=F.in_lat!==null&&F.in_lon!==null,Ln=F.out_lat!==null&&F.out_lon!==null;if(!(Ue==="in"?ut:Ln)){o({variant:"info",title:"Konum bulunamadi",description:`${F.date} icin secilen konum kaydi yok.`});return}ie(F.date),Ke({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),ue(Ue==="in"?`${F.date}-in`:`${F.date}-out`)},it=F=>{const Ue=Xi(F.ts_utc);if(!Ue){o({variant:"info",title:"Konum zamani okunamadi",description:"Secilen konum kaydi icin gun bilgisi hesaplanamadi."});return}ie(Ue),Ke({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),ue(mf(F))},ea=b.useMemo(()=>`${ke.data?.devices.length??0} cihaz`,[ke.data?.devices.length]);return Number.isFinite(m)?f?ke.isLoading?n.jsx(Gt,{}):ke.isError||!Be?n.jsx(wt,{message:"Calisan kaydi bulunamadi."}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:`Calisan Detayi #${Be.id}`,description:`${Be.full_name} icin puantaj, cihaz, aktivite ve konum bilgileri`,action:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{const F=!Be.is_active;window.confirm(F?`${Be.full_name} arsivden cikarilsin mi?`:`${Be.full_name} arsivlensin mi?`)&&Ne.mutate(F)},disabled:Ne.isPending,className:`rounded-lg px-4 py-2 text-sm font-semibold text-white ${Be.is_active?"bg-rose-600 hover:bg-rose-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:Be.is_active?"Arsivle":"Arsivden Cikar"}),n.jsx("button",{type:"button",onClick:jt,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Cihaz Baglama Linki Olustur"})]})}),n.jsx(Le,{children:n.jsxs("div",{className:"grid gap-3 md:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Calisan"}),n.jsx("p",{className:"text-base font-semibold text-slate-900",children:Be.full_name}),n.jsxs("p",{className:"text-xs text-slate-500",children:["ID: ",Be.id]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Durum"}),n.jsx(nr,{value:Be.is_active?"Aktif":"Pasif"}),n.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Bolge: ",Be.region_name??"-"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Departman ID: ",Be.department_id??"-"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Son employee portal aktivitesi"}),n.jsx("p",{className:"text-sm font-medium text-slate-800",children:Oa(ke.data?.last_portal_seen_utc)}),n.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Cihaz sayisi: ",ea]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Bu ay yasal fazla mesai"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx(qe,{minutes:ft.data?.totals.legal_overtime_minutes??0})}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Plan ustu: ",n.jsx(qe,{minutes:ft.data?.totals.plan_overtime_minutes??0})]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[d.getFullYear(),"-",String(d.getMonth()+1).padStart(2,"0")]})]})]})}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Calisan Bilgileri"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ad Soyad ve departman bilgisini bu alandan guncelleyebilirsiniz."}),n.jsxs("form",{onSubmit:ln,className:"mt-3 grid gap-3 md:grid-cols-3 md:items-end",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Ad Soyad",n.jsx("input",{value:U,onChange:F=>I(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Calisan adi soyadi"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:R,onChange:F=>K(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",disabled:at.isLoading,children:[n.jsx("option",{value:"",children:"Atanmamis"}),(at.data??[]).map(F=>n.jsx("option",{value:F.id,children:F.name},F.id))]})]}),n.jsx("button",{type:"submit",disabled:Je.isPending||at.isLoading,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-700 disabled:opacity-60",children:Je.isPending?"Kaydediliyor...":"Bilgileri Kaydet"})]}),at.isError?n.jsx("p",{className:"mt-2 text-xs text-amber-700",children:"Departman listesi alinamadi. Lutfen tekrar deneyin."}):null]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Vardiya Atamasi"}),n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-[1fr_auto] md:items-end",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya",n.jsxs("select",{value:A,onChange:F=>z(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",disabled:!Be.department_id||se.isLoading,children:[n.jsx("option",{value:"",children:"Atanmamis"}),(se.data??[]).map(F=>n.jsxs("option",{value:F.id,children:[F.name," (",F.start_time_local,"-",F.end_time_local,")"]},F.id))]})]}),n.jsx("button",{type:"button",disabled:nt.isPending||!Be.department_id,onClick:()=>{const F=A?Number(A):null;nt.mutate(F)},className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-700 disabled:opacity-60",children:nt.isPending?"Kaydediliyor...":"Vardiya Ata"})]})]}),n.jsxs(Le,{children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Aylik Puantaj"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Aydan aya puantaj ve secili ay fazla mesai durumunu inceleyin."})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("label",{className:"text-xs text-slate-600",children:["Yil",n.jsx("input",{type:"number",value:V,onChange:F=>ee(F.target.value),className:"mt-1 w-28 rounded-lg border border-slate-300 px-2 py-1 text-sm"})]}),n.jsxs("label",{className:"text-xs text-slate-600",children:["Ay",n.jsx("input",{type:"number",min:1,max:12,value:q,onChange:F=>Y(F.target.value),className:"mt-1 w-20 rounded-lg border border-slate-300 px-2 py-1 text-sm"})]})]})]}),Dt?Rt.isLoading?n.jsx(Gt,{}):Rt.isError?n.jsx(wt,{message:He(Rt.error,"Aylik puantaj alinamadi.").message}):n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-3 xl:grid-cols-7",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay net calisma"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx(qe,{minutes:Rt.data?.totals.worked_minutes??0})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay plan ustu sure"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx(qe,{minutes:Rt.data?.totals.plan_overtime_minutes??0})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[Vt.planOvertimeDayCount," gun"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay yasal fazla sure"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx(qe,{minutes:Rt.data?.totals.legal_extra_work_minutes??0})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay yasal fazla mesai"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx(qe,{minutes:Rt.data?.totals.legal_overtime_minutes??0})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[Vt.overtimeDayCount," gun fazla mesai"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Eksik gun"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:Rt.data?.totals.incomplete_days??0})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Calisilan gun"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:Vt.workedDayCount}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Hafta ici: ",Vt.weekdayWorkedDayCount," gun"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Pazar mesaisi"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[Vt.sundayWorkedDayCount," gun"]}),n.jsx("p",{className:"text-xs text-slate-500",children:n.jsx(qe,{minutes:Vt.sundayWorkedMinutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Ozel gun mesaisi"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[Vt.specialWorkedDayCount," gun"]}),n.jsx("p",{className:"text-xs text-slate-500",children:n.jsx(qe,{minutes:Vt.specialWorkedMinutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Bayrakli gun"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:Tn}),n.jsx("p",{className:"text-xs text-slate-500",children:"Riskli veya kontrol gerektiren satir sayisi"})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Eksik gun orani"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:Rn}),n.jsxs("p",{className:"text-xs text-slate-500",children:[Rt.data?.totals.incomplete_days??0," / ",xt.length," gun"]})]})]}),n.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:"Ayni tabloda giris-cikis saatleri, konum koordinatlari ve bayraklar birlikte gosterilir. Satir renklendirmesi: kirmizi = eksik gun, amber = bayrakli gun, gri = izin/tatil."}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[1240px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Tarih"}),n.jsx("th",{className:"py-2",children:"Gun"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Gun Tipi"}),n.jsx("th",{className:"py-2",children:"Giris"}),n.jsx("th",{className:"py-2",children:"Cikis"}),n.jsx("th",{className:"py-2",children:"Giris Konum (lat/lon)"}),n.jsx("th",{className:"py-2",children:"Cikis Konum (lat/lon)"}),n.jsx("th",{className:"py-2",children:"Net Sure"}),n.jsx("th",{className:"py-2",children:"Plan Ustu"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Sure"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"}),n.jsx("th",{className:"py-2",children:"Bayraklar"})]})}),n.jsx("tbody",{children:xt.map(F=>{const Ue=z3(F);return n.jsxs("tr",{className:`border-t border-slate-100 ${Ue}`,children:[n.jsx("td",{className:"py-2 font-medium text-slate-800",children:F.date}),n.jsx("td",{className:"py-2 text-xs uppercase text-slate-600",children:M3(F.date)}),n.jsx("td",{className:"py-2",children:A3(F.status)}),n.jsx("td",{className:"py-2",children:Ad(F).label}),n.jsx("td",{className:"py-2",children:Oa(F.in)}),n.jsx("td",{className:"py-2",children:Oa(F.out)}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-mono text-xs",children:Qu(F.in_lat,F.in_lon)}),F.in_lat!==null&&F.in_lon!==null?n.jsx("button",{type:"button",className:"rounded-md border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",onClick:()=>Yt(F,"in"),title:"Mesai baslangic konumunu haritada goster",children:"Harita"}):null]})}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-mono text-xs",children:Qu(F.out_lat,F.out_lon)}),F.out_lat!==null&&F.out_lon!==null?n.jsx("button",{type:"button",className:"rounded-md border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",onClick:()=>Yt(F,"out"),title:"Mesai bitis konumunu haritada goster",children:"Harita"}):null]})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:F.worked_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:F.plan_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:F.legal_extra_work_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:F.legal_overtime_minutes})}),n.jsx("td",{className:"py-2 text-xs text-slate-600",children:O3(F.flags)})]},F.date)})})]})})]}):n.jsx("p",{className:"mt-3 text-sm text-amber-700",children:"Yil/ay degeri gecersiz."})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Kayitli Cihazlar ve IP Bilgisi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Cihazlar, son attendance zamani ve son gorulen IP bilgisi."}),n.jsx("div",{className:"mt-3 list-scroll-area",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Cihaz ID"}),n.jsx("th",{className:"py-2",children:"Parmak Izi"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Olusma"}),n.jsx("th",{className:"py-2",children:"Son Attendance"}),n.jsx("th",{className:"py-2",children:"Son Gorulen IP"}),n.jsx("th",{className:"py-2",children:"Son Islem Zamani"})]})}),n.jsx("tbody",{children:(ke.data?.devices??[]).map(F=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:F.id}),n.jsx("td",{className:"py-2 font-mono text-xs",children:F.device_fingerprint}),n.jsx("td",{className:"py-2",children:n.jsx(nr,{value:F.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2",children:Oa(F.created_at)}),n.jsx("td",{className:"py-2",children:Oa(F.last_attendance_ts_utc)}),n.jsx("td",{className:"py-2",children:F.last_seen_ip??"-"}),n.jsx("td",{className:"py-2",children:Oa(F.last_seen_at_utc)})]},F.id))})]})})]}),n.jsxs("div",{className:"grid gap-4 lg:grid-cols-2 lg:items-start",children:[n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Employee Portal Aktivite Akisi"}),n.jsx("div",{className:"mt-3 list-scroll-area rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Zaman"}),n.jsx("th",{className:"py-2",children:"Islem"}),n.jsx("th",{className:"py-2",children:"IP"}),n.jsx("th",{className:"py-2",children:"User Agent"})]})}),n.jsx("tbody",{children:(ke.data?.recent_activity??[]).map((F,Ue)=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:Oa(F.ts_utc)}),n.jsx("td",{className:"py-2",children:F.action}),n.jsx("td",{className:"py-2",children:F.ip??"-"}),n.jsx("td",{className:"py-2 max-w-[280px] truncate",title:F.user_agent??"-",children:F.user_agent??"-"})]},`${F.ts_utc}-${Ue}`))})]})})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Cihaz IP Ozeti"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"IP, son gorulme zamani ve son bilinen konum bilgisi."}),n.jsx("div",{className:"mt-3 list-scroll-area rounded-lg border border-slate-200",children:Cn.length?n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"IP"}),n.jsx("th",{className:"py-2",children:"Son gorulme"}),n.jsx("th",{className:"py-2",children:"Aksiyon"}),n.jsx("th",{className:"py-2",children:"Son konum (lat/lon)"}),n.jsx("th",{className:"py-2",children:"Konum zamani"})]})}),n.jsx("tbody",{children:Cn.map(F=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2 font-mono text-xs",children:F.ip}),n.jsx("td",{className:"py-2",children:Oa(F.last_seen_at_utc)}),n.jsx("td",{className:"py-2",children:F.last_action}),n.jsx("td",{className:"py-2",children:F.last_lat!==null&&F.last_lon!==null?`${F.last_lat.toFixed(6)}, ${F.last_lon.toFixed(6)}`:"-"}),n.jsx("td",{className:"py-2",children:F.last_location_ts_utc?Oa(F.last_location_ts_utc):"-"})]},F.ip))})]}):n.jsx("div",{className:"p-3 text-sm text-slate-500",children:"IP kaydi bulunamadi."})})]})]}),n.jsxs(Le,{children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Konum Haritasi"}),$&&Ve&&$!==Ve?n.jsx("button",{type:"button",onClick:()=>{ie(Ve),Ke({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),ue(null)},className:"rounded-md border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Son gune don"}):null]}),zt?n.jsxs("p",{className:"mt-2 text-sm text-slate-700",children:["Harita secimi: ",n.jsx("span",{className:"font-semibold",children:zt.date})," gununun giris/cikis konumlari"]}):$?n.jsxs("p",{className:"mt-2 text-sm text-slate-700",children:["Harita secimi: ",n.jsx("span",{className:"font-semibold",children:$})," gununun konum kayitlari"]}):n.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Calisan icin konum verisi henuz yok."}),Oe.length?n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsx(k3,{markers:Oe,focusedMarkerId:fe}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-700",children:[n.jsxs("button",{type:"button",onClick:()=>ca("first"),disabled:!pn.first,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${pe.first?"border-violet-300 bg-violet-50 text-violet-800":"border-slate-300 bg-white text-slate-500"} ${pn.first?"":"cursor-not-allowed opacity-45"}`,title:"Yalnizca ilk konum noktasini goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-violet-600"}),"Ilk konum"]}),n.jsxs("button",{type:"button",onClick:()=>ca("recent"),disabled:!pn.recent,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${pe.recent?"border-blue-300 bg-blue-50 text-blue-800":"border-slate-300 bg-white text-slate-500"} ${pn.recent?"":"cursor-not-allowed opacity-45"}`,title:"Diger konum noktalarini goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-600"}),"Diger konumlar"]}),n.jsxs("button",{type:"button",onClick:()=>ca("checkin"),disabled:!pn.checkin,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${pe.checkin?"border-emerald-300 bg-emerald-50 text-emerald-800":"border-slate-300 bg-white text-slate-500"} ${pn.checkin?"":"cursor-not-allowed opacity-45"}`,title:"Yalnizca mesai baslangici noktalarini goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-600"}),"Mesai baslangici"]}),n.jsxs("button",{type:"button",onClick:()=>ca("checkout"),disabled:!pn.checkout,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${pe.checkout?"border-rose-300 bg-rose-50 text-rose-800":"border-slate-300 bg-white text-slate-500"} ${pn.checkout?"":"cursor-not-allowed opacity-45"}`,title:"Yalnizca mesai bitisi noktalarini goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-600"}),"Mesai bitisi"]}),n.jsxs("button",{type:"button",onClick:()=>ca("latest"),disabled:!pn.latest,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${pe.latest?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-white text-slate-500"} ${pn.latest?"":"cursor-not-allowed opacity-45"}`,title:"Yalnizca son bildirilen konumu goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-sky-700"}),"Son bildirilen konum"]}),n.jsx("button",{type:"button",onClick:Wn,className:"ml-1 rounded-md border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",children:"Tumunu goster"})]})]}):n.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Secili filtrede gosterilecek konum noktasi yok."}),n.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200",children:[n.jsxs("div",{className:"border-b border-slate-200 px-3 py-2",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Konum Gecmisi (satira tiklayinca haritada odaklar)"}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-7",children:[n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500 md:col-span-2",children:["Ara",n.jsx("input",{value:je,onChange:F=>X(F.target.value),placeholder:"Tarih, koordinat, cihaz, durum...",className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800"})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Tip",n.jsxs("select",{value:oe,onChange:F=>Z(F.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800",children:[n.jsx("option",{value:"all",children:"Tum tipler"}),n.jsx("option",{value:"IN",children:"IN"}),n.jsx("option",{value:"OUT",children:"OUT"})]})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Durum",n.jsxs("select",{value:M,onChange:F=>ne(F.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800",children:[n.jsx("option",{value:"all",children:"Tum durumlar"}),n.jsx("option",{value:"VERIFIED_HOME",children:"VERIFIED_HOME"}),n.jsx("option",{value:"UNVERIFIED_LOCATION",children:"UNVERIFIED_LOCATION"}),n.jsx("option",{value:"NO_LOCATION",children:"NO_LOCATION"})]})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Cihaz",n.jsxs("select",{value:Se,onChange:F=>be(F.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800",children:[n.jsx("option",{value:"all",children:"Tum cihazlar"}),va.map(F=>n.jsxs("option",{value:String(F),children:["#",F]},F))]})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Baslangic Tarihi",n.jsx("input",{type:"date",value:D,onChange:F=>te(F.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800"})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Bitis Tarihi",n.jsx("input",{type:"date",value:P,min:D||void 0,onChange:F=>ce(F.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800"})]})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("p",{className:"text-[11px] text-slate-500",children:["Gosterilen satir: ",W.start,"-",W.end," /"," ",An.length]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Sayfa basi",n.jsx("select",{value:De,onChange:F=>Ge(Number(F.target.value)),className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-800",children:L3.map(F=>n.jsx("option",{value:F,children:F},F))})]})]})]}),An.length?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"list-scroll-area-compact",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2 pl-3",children:"Zaman"}),n.jsx("th",{className:"py-2",children:"Gun"}),n.jsx("th",{className:"py-2",children:"Tip"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Cihaz"}),n.jsx("th",{className:"py-2 pr-3",children:"Koordinat"})]})}),n.jsx("tbody",{children:Mn.map((F,Ue)=>{const ut=mf(F),Ln=Xi(F.ts_utc)??"-",zn=fe===ut;return n.jsxs("tr",{className:`border-t border-slate-100 transition-colors ${zn?"bg-sky-100/60":"cursor-pointer hover:bg-sky-50/70"}`,role:"button",tabIndex:0,onClick:()=>it(F),onKeyDown:B=>{(B.key==="Enter"||B.key===" ")&&(B.preventDefault(),it(F))},title:"Haritada bu konumu odakla",children:[n.jsx("td",{className:"py-2 pl-3",children:Oa(F.ts_utc)}),n.jsx("td",{className:"py-2 font-mono text-xs text-slate-600",children:Ln}),n.jsx("td",{className:"py-2",children:F.event_type}),n.jsx("td",{className:"py-2",children:F.location_status}),n.jsxs("td",{className:"py-2",children:["#",F.device_id]}),n.jsx("td",{className:"py-2 pr-3",children:Qu(F.lat,F.lon)})]},`${ut}-${Ue}`)})})]})}),n.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 px-3 py-2",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Sayfa ",de," / ",Hn]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Ee(F=>Math.max(1,F-1)),disabled:de<=1,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Onceki"}),n.jsx("button",{type:"button",onClick:()=>Ee(F=>Math.min(Hn,F+1)),disabled:de>=Hn,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Sonraki"})]})]})]}):n.jsx("div",{className:"p-3 text-sm text-slate-500",children:"Filtreye uygun konum gecmisi bulunamadi."})]})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Ev Konumu"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Check-in konum dogrulamasi icin enlem, boylam ve yaricap metre bilgisini girin."}),ke.data?.home_location?null:n.jsx("p",{className:"mt-2 text-sm text-amber-700",children:"Kayitli konum bulunamadi. Ilk kaydi olusturabilirsiniz."}),n.jsxs("form",{onSubmit:Jn,className:"mt-4 grid gap-3 md:grid-cols-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Ev Enlem (Lat)",n.jsx("input",{value:g,onChange:F=>v(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ev Boylam (Lon)",n.jsx("input",{value:_,onChange:F=>S(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yaricap (metre)",n.jsx("input",{value:w,onChange:F=>T(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsx("div",{className:"md:col-span-3",children:n.jsx("button",{type:"submit",disabled:Ut.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Ut.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Kaydediliyor..."]}):ke.data?.home_location?"Konumu Guncelle":"Konumu Kaydet"})})]}),O?n.jsx("p",{className:"form-validation",children:O}):null]}),n.jsxs(er,{open:_e,title:"Cihaz Baglama Linki Olustur",onClose:()=>lt(!1),children:[n.jsxs("form",{onSubmit:fn,className:"space-y-4",children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Gecerlilik Suresi (dakika)",n.jsx("input",{value:dt,onChange:F=>ze(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsx("button",{type:"submit",disabled:Nt.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Nt.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Olusturuluyor..."]}):"Daveti Uret"})]}),n.jsx("p",{className:"mt-3 text-xs text-slate-500",children:"Bu linki calisana iletin. Calisan linki acinca cihazini otomatik olarak hesabina baglayabilir."}),ot?n.jsx("p",{className:"form-validation",children:ot}):null,It&&rn?n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsx(vv,{label:"Token",value:It,onCopy:Ft}),n.jsx(vv,{label:"Baglanti Linki (invite_url)",value:rn,onCopy:Ft})]}):null]})]}):n.jsx(Gt,{}):n.jsx(wt,{message:"Gecersiz calisan id degeri."})}const I3={NORMAL:"Normal",IZINLI:"Izinli",RESMI_TATIL:"Resmi Tatil",CALISMADI:"Calismadi"},B3={SHIFT:"Vardiya",WEEKLY:"Haftalik Kural",WORK_RULE:"Temel Kural"},Vu={AUTO:"Otomatik (Oncelik: Vardiya > Haftalik > Temel)",SHIFT:"Vardiya",WEEKLY:"Haftalik Kural",WORK_RULE:"Temel Kural"},xc="Europe/Istanbul";function hf(e){const s=[];e.status==="INCOMPLETE"&&s.push("EKSIK_GUN");for(const l of e.flags)s.push(l);return s}function U3(e){return e.length===0?void 0:`Supheli nedenleri:
${e.map((l,o)=>{const d=Va(l);return`${o+1}. ${d.label}: ${d.description}`}).join(`
`)}`}function bv(e){if(!e)return"";const s=new Date(e);return Number.isNaN(s.getTime())?"":new Intl.DateTimeFormat("tr-TR",{timeZone:xc,hour:"2-digit",minute:"2-digit",hour12:!1}).format(s)}function _v(e){if(!e)return"-";const s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat("tr-TR",{timeZone:xc,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(s)}function Nv(e){if(!e)return"-";const s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat("tr-TR",{timeZone:xc,hour:"2-digit",minute:"2-digit",hour12:!1}).format(s)}function F3(e){const s=new Date(`${e}T00:00:00`);return Number.isNaN(s.getTime())?"-":new Intl.DateTimeFormat("tr-TR",{timeZone:xc,weekday:"short"}).format(s)}function q3(e,s){return e.status==="INCOMPLETE"?"bg-rose-50/70":s?"bg-amber-50/55":e.status==="LEAVE"||e.status==="OFF"?"bg-slate-50/70":""}function jv(e){if(!e)return{status:"NORMAL",reason:""};const s=(e.note??"").trim(),l=s.match(/^\[MANUAL_STATUS:(NORMAL|IZINLI|RESMI_TATIL|CALISMADI)\]\s*/i);return l?{status:l[1].toUpperCase(),reason:s.replace(l[0],"").trim()}:e.is_absent?{status:"CALISMADI",reason:s}:{status:"NORMAL",reason:s}}function Z3(e,s){const l=s.trim();if(e==="NORMAL")return l||null;const o=`[MANUAL_STATUS:${e}]`;return l?`${o} ${l}`:o}function H3(){const e=la(),{pushToast:s}=oa(),l=new Date,o={employeeId:"",year:String(l.getFullYear()),month:String(l.getMonth()+1)},[d,m]=b.useState(o),[f,g]=b.useState(o),[v,_]=b.useState(!1),[S,w]=b.useState(null),[T,O]=b.useState(!1),[k,A]=b.useState(!1),[z,U]=b.useState(""),[I,R]=b.useState(""),[K,V]=b.useState(""),[ee,q]=b.useState(""),[Y,$]=b.useState("NORMAL"),[ie,fe]=b.useState("AUTO"),[ue,je]=b.useState(""),[X,oe]=b.useState(null),[Z,M]=b.useState(null),ne=Ze({queryKey:["employees","all"],queryFn:()=>Ts({status:"all"})}),Se=Number(f.employeeId),be=Number(f.year),D=Number(f.month),te=Number.isFinite(Se)&&Se>0&&Number.isFinite(be)&&be>0&&Number.isFinite(D)&&D>=1&&D<=12,P=Ze({queryKey:["employee-monthly",Se,be,D],queryFn:()=>rc({employee_id:Se,year:be,month:D}),enabled:te}),ce=Ze({queryKey:["manual-overrides",Se,be,D],queryFn:()=>QA(Se,be,D),enabled:te}),de=Xe({mutationFn:({employeeId:Ne,dayDate:Je,inTime:nt,outTime:Nt,status:Ft,ruleSource:jt,ruleShiftId:fn,reason:Jn})=>{const ln=Ft!=="NORMAL";return GA(Ne,{day_date:Je,in_time:ln?null:nt||null,out_time:ln?null:Nt||null,is_absent:ln,rule_source_override:jt,rule_shift_id_override:jt==="SHIFT"&&fn?Number(fn):null,note:Z3(Ft,Jn)})},onSuccess:()=>{s({variant:"success",title:"Manuel duzeltme kaydedildi",description:"Gunluk puantaj kaydi guncellendi."}),A(!1),M(null),je(""),e.invalidateQueries({queryKey:["employee-monthly"]}),e.invalidateQueries({queryKey:["manual-overrides"]})},onError:Ne=>{s({variant:"error",title:"Duzeltme kaydedilemedi",description:He(Ne,"Islem basarisiz.").message})}}),Ee=Xe({mutationFn:VA,onSuccess:()=>{s({variant:"success",title:"Manuel duzeltme kaldirildi",description:"Secili gun icin manuel override silindi."}),A(!1),M(null),e.invalidateQueries({queryKey:["employee-monthly"]}),e.invalidateQueries({queryKey:["manual-overrides"]})},onError:Ne=>{s({variant:"error",title:"Silme islemi basarisiz",description:He(Ne,"Islem basarisiz.").message})}}),De=b.useMemo(()=>ne.data?.find(Ne=>Ne.id===Se),[ne.data,Se]),Ge=De?.full_name,pe=Ze({queryKey:["monthly-manual-shifts",De?.department_id],queryFn:()=>pc(De?.department_id?{department_id:De.department_id,active_only:!1}:void 0),enabled:!!De?.department_id}),Ke=b.useMemo(()=>{const Ne=new Map;for(const Je of ce.data??[])Ne.set(Je.day_date,Je);return Ne},[ce.data]),_e=P.data?.days??[],lt=b.useMemo(()=>_e.reduce((Ne,Je)=>Ne+(Je.missing_minutes??0),0),[_e]),dt=b.useMemo(()=>_e.filter(Ne=>!(v&&hf(Ne).length===0||S&&!Ne.flags.includes(S))),[_e,S,v]),ze=b.useMemo(()=>_e.filter(Ne=>hf(Ne).length>0).length,[_e]),ot=b.useMemo(()=>_e.filter(Ne=>Ne.legal_overtime_minutes>0).length,[_e]),bt=b.useMemo(()=>_e.filter(Ne=>Ne.status==="LEAVE").length,[_e]),It=b.useMemo(()=>_e.filter(Ne=>Ne.status==="OFF").length,[_e]),Bt=b.useMemo(()=>_e.filter(Ne=>Ne.status==="OK"||Ne.status==="INCOMPLETE").length,[_e]),rn=b.useMemo(()=>_e.length?`%${Math.round(ze/_e.length*100)}`:"%0",[_e.length,ze]),ae=b.useMemo(()=>`${f.year}-${String(f.month).padStart(2,"0")}`,[f.month,f.year]),ke=b.useMemo(()=>{const Ne=["SHIFT_WEEKLY_RULE_OVERRIDE","NEEDS_SHIFT_REVIEW","MISSING_IN","MISSING_OUT","UNDERWORKED"],Je=new Map;for(const nt of Ne)Je.set(nt,0);for(const nt of _e)for(const Nt of Ne)nt.flags.includes(Nt)&&Je.set(Nt,(Je.get(Nt)??0)+1);return Ne.map(nt=>({code:nt,count:Je.get(nt)??0}))},[_e]),Be=b.useMemo(()=>{const Ne=[];return f.employeeId&&Ne.push(`Calisan: ${f.employeeId}`),Ne.push(`Yil: ${f.year}`),Ne.push(`Ay: ${f.month}`),v&&Ne.push("Sadece supheli gunler"),S&&Ne.push(`Cakisma: ${Va(S).label}`),Ne},[f,S,v]),at=()=>g({...d}),se=()=>{m(o),g(o),_(!1),w(null)},Ie=async()=>{if(!te){s({variant:"error",title:"Filtre hatasi",description:"Excel indirmek icin calisan, yil ve ay secin."});return}try{O(!0);const Ne=await JA({employee_id:Se,year:be,month:D}),Je=window.URL.createObjectURL(Ne),nt=document.createElement("a");nt.href=Je,nt.download=`puantaj-employee-${Se}-${be}-${String(D).padStart(2,"0")}.xlsx`,document.body.appendChild(nt),nt.click(),nt.remove(),window.URL.revokeObjectURL(Je)}catch(Ne){s({variant:"error",title:"Excel indirilemedi",description:He(Ne,"Dosya olusturulamadi.").message})}finally{O(!1)}},_t=Ne=>{const Je=Ke.get(Ne.date),nt=jv(Je);U(Ne.date),oe(Je?.id??null),$(nt.status),q(nt.reason),R(Je?bv(Je.in_ts):""),V(Je?bv(Je.out_ts):""),fe(Je?.rule_source_override??"AUTO"),je(Je?.rule_shift_id_override?String(Je.rule_shift_id_override):Ne.shift_id?String(Ne.shift_id):""),M(null),A(!0)},Dt=()=>{if(!te||_e.length===0){s({variant:"error",title:"Rapor verisi yok",description:"Once calisan, yil ve ay secip raporu yukleyin."});return}_t(_e[0])},Rt=()=>{if(M(null),!z)return M("Duzeltme icin tarih secmelisiniz."),!1;if(Y==="NORMAL"){if(!I&&!K)return M("Normal gun icin en az bir saat bilgisi girin."),!1;if(I&&K&&K<I)return M("Cikis saati giris saatinden kucuk olamaz."),!1}return ie==="SHIFT"&&!ue?(M("Vardiya kurali icin bir vardiya secmelisiniz."),!1):!0},ft=Ne=>{Ne.preventDefault(),te&&Rt()&&de.mutate({employeeId:Se,dayDate:z,inTime:I,outTime:K,status:Y,ruleSource:ie,ruleShiftId:ue,reason:ee})};if(ne.isLoading)return n.jsx(Gt,{});if(ne.isError)return n.jsx(wt,{message:"Calisan listesi alinamadi."});const Ut=ne.data??[];return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"Aylik Calisan Puantaj Raporu",description:"Gunluk giris/cikis ve fazla mesai bilgilerini inceleyin, HR icin manuel duzeltme yapin.",action:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:Dt,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Manuel Duzeltme"}),n.jsx("button",{type:"button",onClick:()=>{Ie()},disabled:T,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:T?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner inline-spinner-dark","aria-hidden":"true"}),"Hazirlaniyor..."]}):"Excel Indir"}),n.jsx(us,{to:"/reports/excel-export",className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Gelismis Export"})]})}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-4",children:[n.jsx(hs,{label:"Calisan",employees:Ut,value:d.employeeId,onChange:Ne=>m(Je=>({...Je,employeeId:Ne})),emptyLabel:"Seciniz",helperText:"Calisan adini veya ID bilgisini yazabilirsiniz.",className:"md:col-span-2"}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yil",n.jsx("input",{type:"number",value:d.year,onChange:Ne=>m(Je=>({...Je,year:Ne.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",n.jsx("input",{type:"number",value:d.month,onChange:Ne=>m(Je=>({...Je,month:Ne.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),n.jsx("div",{className:"mt-3",children:n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:v,onChange:Ne=>_(Ne.target.checked)}),"Sadece supheli gunleri goster"]})}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:at,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),n.jsx("button",{type:"button",onClick:se,className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Be.map(Ne=>n.jsx("span",{className:"inline-flex rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:Ne},Ne))})]}),te?null:n.jsx(wt,{message:"Rapor icin calisan, yil ve ay secmelisiniz."}),P.isLoading?n.jsx(Gt,{}):null,P.isError?n.jsx(wt,{message:He(P.error,"Aylik rapor alinamadi.").message}):null,P.data?n.jsxs(n.Fragment,{children:[n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Toplamlar"}),n.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["alan: ",Ge??`#${P.data.employee_id}`," | Dnem: ",ae]}),n.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-5",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"lenen Gn"}),n.jsx("p",{className:"text-lg font-semibold",children:Bt}),n.jsxs("p",{className:"text-xs text-slate-500",children:["zin: ",bt," | Tatil: ",It]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"pheli Oran"}),n.jsx("p",{className:"text-lg font-semibold",children:rn}),n.jsxs("p",{className:"text-xs text-slate-500",children:[ze," / ",_e.length," gn"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Filtrelenen Gn"}),n.jsx("p",{className:"text-lg font-semibold",children:dt.length}),n.jsx("p",{className:"text-xs text-slate-500",children:S?`akma: ${Va(S).label}`:"Tm gnler"})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Vardiya Kayna"}),n.jsx("p",{className:"text-lg font-semibold",children:"SHIFT > WEEKLY > WORK_RULE"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Otomatik ncelik zinciri"})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Saat Dilimi"}),n.jsx("p",{className:"text-lg font-semibold",children:xc}),n.jsx("p",{className:"text-xs text-slate-500",children:"Tm saatler yerel zamanda gsterilir"})]})]}),n.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-7",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam alma"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx(qe,{minutes:P.data.totals.worked_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Plan st Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx(qe,{minutes:P.data.totals.plan_overtime_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yasal Fazla Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx(qe,{minutes:P.data.totals.legal_extra_work_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yasal Fazla Mesai"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx(qe,{minutes:P.data.totals.legal_overtime_minutes})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[ot," gn"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Eksik Gn"}),n.jsx("p",{className:"text-lg font-semibold",children:P.data.totals.incomplete_days})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"pheli Gn"}),n.jsx("p",{className:"text-lg font-semibold",children:ze})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Eksik Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx(qe,{minutes:lt})})]})]})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Compliance (TR Is Kanunu)"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Net Calisma"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx(qe,{minutes:P.data.worked_minutes_net})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yillik Fazla Mesai Kullanim"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx(qe,{minutes:P.data.annual_overtime_used_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yillik Kalan Fazla Mesai"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx(qe,{minutes:P.data.annual_overtime_remaining_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yillik Limit Durumu"}),n.jsx("p",{className:`text-sm font-semibold ${P.data.annual_overtime_cap_exceeded?"text-rose-700":"text-emerald-700"}`,children:P.data.annual_overtime_cap_exceeded?"Limit Asildi":"Limit Icinde"})]})]}),n.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Flag aciklamalari"}),n.jsx("ul",{className:"mt-2 space-y-1 text-xs text-slate-600",children:xM().map(Ne=>n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",title:Va(Ne).description,children:Va(Ne).label})," ","(",Ne,"): ",Va(Ne).description]},Ne))})]})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Cakisma Analizi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Vardiya, haftalik kural ve event siralamasi arasinda tutarsiz gorunen gunlerin ozeti."}),S?n.jsx("button",{type:"button",onClick:()=>w(null),className:"mt-2 rounded-lg border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 hover:bg-slate-100",children:"Cakisma filtresini temizle"}):null,n.jsx("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:ke.map(Ne=>n.jsxs("button",{type:"button",onClick:()=>{w(Je=>Je===Ne.code?null:Ne.code),_(!0)},className:`rounded-lg border px-3 py-2 text-left transition ${S===Ne.code?"border-brand-500 bg-brand-50":"border-slate-200 bg-slate-50 hover:border-slate-300"}`,children:[n.jsx("p",{className:"text-xs text-slate-500",title:Va(Ne.code).description,children:Va(Ne.code).label}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:Ne.count})]},Ne.code))})]}),dt.length===0?n.jsx(Le,{children:n.jsx("p",{className:"text-sm text-slate-600",children:"Secilen filtreye uygun gunluk kayit bulunamadi."})}):n.jsxs(Le,{children:[n.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Gsterilen satr: ",dt.length," / ",_e.length]}),n.jsx("p",{className:"text-xs text-slate-500",children:"pucu: satra gre renk tonu kayt riskini gsterir (krmz: eksik, amber: pheli)."})]}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[1220px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Tarih"}),n.jsx("th",{className:"py-2",children:"Gn"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Giris"}),n.jsx("th",{className:"py-2",children:"Cikis"}),n.jsx("th",{className:"py-2",children:"Calisma"}),n.jsx("th",{className:"py-2",children:"Plan Ustu"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Sure"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"}),n.jsx("th",{className:"py-2",children:"Eksik Sure"}),n.jsx("th",{className:"py-2",children:"Kural Kaynagi"}),n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Izin"}),n.jsx("th",{className:"py-2",children:"Supheli Neden"}),n.jsx("th",{className:"py-2",children:"Aksiyon"})]})}),n.jsx("tbody",{children:dt.map(Ne=>{const Je=hf(Ne),nt=Je.length>0,Nt=U3(Je),Ft=Ke.get(Ne.date),jt=jv(Ft),fn=Ne.flags.includes("MANUAL_OVERRIDE")||Ne.flags.includes("MANUAL_EVENT")||!!Ft,Jn=jt.status!=="NORMAL",ln=q3(Ne,nt);return n.jsxs("tr",{className:`border-t border-slate-100 ${ln}`,children:[n.jsx("td",{className:"py-2 font-medium text-slate-800",children:Ne.date}),n.jsx("td",{className:"py-2 text-xs uppercase text-slate-600",children:F3(Ne.date)}),n.jsxs("td",{className:"py-2",children:[n.jsx(nr,{value:Ne.status}),fn?n.jsx("span",{className:"ml-2 inline-flex rounded-full bg-indigo-100 px-2 py-1 text-[11px] font-semibold text-indigo-700",children:"MANUEL"}):null,Jn?n.jsx("span",{className:"ml-2 inline-flex rounded-full bg-cyan-100 px-2 py-1 text-[11px] font-semibold text-cyan-700",children:I3[jt.status]}):null,n.jsx("span",{className:"ml-2",children:n.jsx(__,{suspicious:nt,tooltip:Nt})})]}),n.jsx("td",{className:"py-2",title:Ne.in??void 0,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:_v(Ne.in)}),n.jsx("span",{className:"text-[11px] text-slate-500",children:Nv(Ne.in)})]})}),n.jsx("td",{className:"py-2",title:Ne.out??void 0,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:_v(Ne.out)}),n.jsx("span",{className:"text-[11px] text-slate-500",children:Nv(Ne.out)})]})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:Ne.worked_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:Ne.plan_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:Ne.legal_extra_work_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:Ne.legal_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:Ne.missing_minutes??0})}),n.jsx("td",{className:"py-2",children:n.jsx("span",{className:"inline-flex rounded-full bg-slate-100 px-2 py-1 text-[11px] font-semibold text-slate-700",title:`Oncelik: Vardiya > Haftalik > Temel | Plan: ${Ne.applied_planned_minutes} dk | Mola: ${Ne.applied_break_minutes} dk`,children:B3[Ne.rule_source]})}),n.jsx("td",{className:"py-2",children:Ne.shift_name??"-"}),n.jsx("td",{className:"py-2",children:Ne.leave_type??"-"}),n.jsx("td",{className:"py-2",children:n.jsx(N_,{reasons:Je})}),n.jsx("td",{className:"py-2",children:n.jsx("button",{type:"button",onClick:()=>_t(Ne),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Manuel Duzelt"})})]},Ne.date)})})]})})]})]}):null,n.jsx(er,{open:k,title:z?`${z} - Manuel Duzeltme`:"Manuel Duzeltme",onClose:()=>A(!1),placement:"right",maxWidthClass:"max-w-2xl",children:n.jsxs("form",{onSubmit:ft,className:"space-y-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Tarih",n.jsx("input",{type:"date",value:z,onChange:Ne=>U(Ne.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gun Durumu",n.jsxs("select",{value:Y,onChange:Ne=>$(Ne.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"NORMAL",children:"Normal"}),n.jsx("option",{value:"IZINLI",children:"Izinli"}),n.jsx("option",{value:"RESMI_TATIL",children:"Resmi Tatil"}),n.jsx("option",{value:"CALISMADI",children:"Calismadi"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Kural Kaynagi",n.jsxs("select",{value:ie,onChange:Ne=>{const Je=Ne.target.value;fe(Je),Je!=="SHIFT"&&je("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"AUTO",children:Vu.AUTO}),n.jsx("option",{value:"SHIFT",children:Vu.SHIFT}),n.jsx("option",{value:"WEEKLY",children:Vu.WEEKLY}),n.jsx("option",{value:"WORK_RULE",children:Vu.WORK_RULE})]})]}),ie==="SHIFT"?n.jsxs("label",{className:"text-sm text-slate-700",children:["Kural Vardiyasi",n.jsxs("select",{value:ue,onChange:Ne=>je(Ne.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Vardiya seciniz"}),(pe.data??[]).map(Ne=>n.jsxs("option",{value:Ne.id,children:[Ne.name," (",Ne.start_time_local," - ",Ne.end_time_local,")"]},Ne.id))]})]}):null,n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Giris Saati",n.jsx("input",{type:"time",value:I,onChange:Ne=>R(Ne.target.value),disabled:Y!=="NORMAL",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Cikis Saati",n.jsx("input",{type:"time",value:K,onChange:Ne=>V(Ne.target.value),disabled:Y!=="NORMAL",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),Y==="NORMAL"?n.jsx("p",{className:"text-xs text-slate-500",children:"Uyari: Cikis saati giris saatinden kucuk olamaz."}):n.jsx("p",{className:"text-xs text-slate-500",children:"Bu secim gunu calisilmadi olarak isaretler; giris/cikis saatleri devre disi kalir."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gerekce / Not (opsiyonel)",n.jsx("input",{type:"text",value:ee,onChange:Ne=>q(Ne.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Saglik raporu / Sistem arizasi"})]}),Z?n.jsx("p",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-xs font-medium text-amber-800",children:Z}):null,n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"submit",disabled:de.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:de.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Kaydediliyor..."]}):"Kaydet"}),X?n.jsx("button",{type:"button",onClick:()=>Ee.mutate(X),disabled:Ee.isPending,className:"btn-danger rounded-lg bg-rose-600 px-4 py-2 text-sm font-semibold text-white hover:bg-rose-700 disabled:opacity-60",children:Ee.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Siliniyor..."]}):"Manuel Kaydi Sil"}):null]})]})})]})}const K3=$a({full_name:ia().min(2,"Ad soyad en az 2 karakter olmali."),region_id:dd([qn().int().positive(),kf()]),department_id:dd([qn().int().positive(),kf()]),is_active:Sd()}),G3=[20,35,50,100];function Q3(){const e=la(),{pushToast:s}=oa(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState(!0),[S,w]=b.useState(""),[T,O]=b.useState(!1),[k,A]=b.useState(!1),[z,U]=b.useState(""),[I,R]=b.useState(""),[K,V]=b.useState(35),[ee,q]=b.useState(1),[Y,$]=b.useState(null),ie=Ze({queryKey:["employees",k,z,I],queryFn:()=>Ts({...k?{include_inactive:!0}:{},...z?{region_id:Number(z)}:{},...I?{department_id:Number(I)}:{}})}),fe=Ze({queryKey:["departments"],queryFn:fi}),ue=Ze({queryKey:["regions","employees-page"],queryFn:()=>Vl({include_inactive:!0})}),je=Xe({mutationFn:JC,onSuccess:pe=>{o(""),m(""),g(""),_(!0),$(null),O(!1),s({variant:"success",title:"Calisan olusturuldu",description:`${pe.full_name} basariyla eklendi.`}),e.invalidateQueries({queryKey:["employees"]})},onError:pe=>{const Ke=He(pe,"Calisan olusturulamadi.").message;$(Ke),s({variant:"error",title:"Calisan olusturulamadi",description:Ke})}}),X=Xe({mutationFn:({employeeId:pe,nextStatus:Ke})=>l_(pe,{is_active:Ke}),onSuccess:pe=>{s({variant:"success",title:pe.is_active?"Calisan arsivden cikarildi":"Calisan arsivlendi",description:`${pe.full_name} icin durum guncellendi.`}),e.invalidateQueries({queryKey:["employees"]})},onError:pe=>{const Ke=He(pe,"Calisan durumu guncellenemedi.").message;s({variant:"error",title:"Islem basarisiz",description:Ke})}}),oe=pe=>{pe.preventDefault(),$(null);const Ke=d.trim()===""?null:Number(d),_e=f.trim()===""?null:Number(f),lt=K3.safeParse({full_name:l,region_id:Ke,department_id:_e,is_active:v});if(!lt.success){const dt=lt.error.issues[0]?.message??"Calisan formunu kontrol edin.";$(dt),s({variant:"error",title:"Form hatasi",description:dt});return}je.mutate(lt.data)},Z=ie.data??[],M=fe.data??[],ne=ue.data??[],Se=new Map(M.map(pe=>[pe.id,pe.name])),be=new Map(ne.map(pe=>[pe.id,pe.name])),D=b.useMemo(()=>{const pe=d?Number(d):null;return pe?M.filter(Ke=>Ke.region_id===pe):M},[M,d]),te=b.useMemo(()=>{const pe=z?Number(z):null;return pe?M.filter(Ke=>Ke.region_id===pe):M},[M,z]),P=b.useMemo(()=>{const pe=S.trim().toLowerCase();return pe?Z.filter(Ke=>Ke.full_name.toLowerCase().includes(pe)):Z},[Z,S]),ce=Math.max(1,Math.ceil(P.length/K)),de=(ee-1)*K,Ee=b.useMemo(()=>P.slice(de,de+K),[P,de,K]),De=P.length===0?0:de+1,Ge=P.length===0?0:Math.min(de+K,P.length);return b.useEffect(()=>{q(1)},[S,k,z,I,K]),b.useEffect(()=>{q(pe=>Math.min(pe,ce))},[ce]),ie.isLoading||fe.isLoading||ue.isLoading?n.jsx(Gt,{}):ie.isError||fe.isError||ue.isError?n.jsx(wt,{message:"Calisan verileri alinamadi."}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"Calisanlar",description:"Calisan kayitlarini bolge ve departman bazli yonetin.",action:n.jsx("button",{type:"button",onClick:()=>O(pe=>!pe),className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Yeni Calisan"})}),T?n.jsxs(Le,{children:[n.jsxs("form",{onSubmit:oe,className:"grid gap-3 md:grid-cols-5",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Ad Soyad",n.jsx("input",{value:l,onChange:pe=>o(pe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Ada Lovelace"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge",n.jsxs("select",{value:d,onChange:pe=>{m(pe.target.value),g("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Atanmamis"}),ne.map(pe=>n.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:f,onChange:pe=>g(pe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Atanmamis"}),D.map(pe=>n.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]}),n.jsxs("label",{className:"flex items-center gap-2 pt-7 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:v,onChange:pe=>_(pe.target.checked)}),"Aktif"]}),n.jsxs("div",{className:"flex gap-2 md:col-span-5",children:[n.jsx("button",{type:"submit",disabled:je.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:je.isPending?"Kaydediliyor...":"Kaydet"}),n.jsx("button",{type:"button",onClick:()=>{O(!1),$(null)},className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),Y?n.jsx("div",{className:"form-validation",children:Y}):null]}):null,n.jsxs(Le,{children:[n.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-5",children:[n.jsx(mi,{value:S,onChange:w,placeholder:"Calisan adina gore ara..."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge filtresi",n.jsxs("select",{value:z,onChange:pe=>{U(pe.target.value),R("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tum bolgeler"}),ne.map(pe=>n.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman filtresi",n.jsxs("select",{value:I,onChange:pe=>R(pe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tum departmanlar"}),te.map(pe=>n.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:k,onChange:pe=>A(pe.target.checked)}),"Arsivdekileri goster"]})]}),n.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2 text-xs text-slate-600",children:[n.jsxs("p",{children:["Gosterilen satir: ",De,"-",Ge," / ",P.length]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:["Sayfa basi",n.jsx("select",{value:K,onChange:pe=>V(Number(pe.target.value)),className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-800",children:G3.map(pe=>n.jsx("option",{value:pe,children:pe},pe))})]})]}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Calisan ID"}),n.jsx("th",{className:"py-2",children:"Ad Soyad"}),n.jsx("th",{className:"py-2",children:"Bolge"}),n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Islem"})]})}),n.jsx("tbody",{children:Ee.map(pe=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:pe.id}),n.jsx("td",{className:"py-2",children:pe.full_name}),n.jsx("td",{className:"py-2",children:pe.region_name??(pe.region_id?be.get(pe.region_id):"-")??"-"}),n.jsx("td",{className:"py-2",children:pe.department_id?Se.get(pe.department_id):"-"}),n.jsx("td",{className:"py-2",children:n.jsx(nr,{value:pe.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(us,{to:`/employees/${pe.id}`,onClick:()=>{sessionStorage.setItem("employee-detail-origin","employees"),sessionStorage.setItem("employee-detail-id",String(pe.id))},className:"employee-action-btn employee-action-edit",children:"Duzenle"}),n.jsx("button",{type:"button",disabled:X.isPending,onClick:()=>{const Ke=!pe.is_active;window.confirm(Ke?`${pe.full_name} arsivden cikarilsin mi?`:`${pe.full_name} arsivlensin mi?`)&&X.mutate({employeeId:pe.id,nextStatus:Ke})},className:`employee-action-btn ${pe.is_active?"employee-action-archive":"employee-action-restore"}`,children:pe.is_active?"Arsivle":"Arsivden Cikar"})]})})]},pe.id))})]})}),n.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Sayfa ",ee," / ",ce]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>q(pe=>Math.max(1,pe-1)),disabled:ee<=1,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Onceki"}),n.jsx("button",{type:"button",onClick:()=>q(pe=>Math.min(ce,pe+1)),disabled:ee>=ce,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Sonraki"})]})]}),P.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Arama kriterine uygun calisan bulunamadi."}):null]})]})}const V3=$a({employee_id:qn().int().positive(),start_date:ia().min(1),end_date:ia().min(1),type:Cf(["ANNUAL","SICK","UNPAID","EXCUSE","PUBLIC_HOLIDAY"]),status:Cf(["APPROVED","PENDING","REJECTED"]).default("APPROVED"),note:ia().trim().optional()}).refine(e=>e.end_date>=e.start_date,{message:"Biti tarihi balang tarihinden kk olamaz.",path:["end_date"]});function Y3(){const e=la(),{pushToast:s}=oa(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState("ANNUAL"),[S,w]=b.useState("APPROVED"),[T,O]=b.useState(""),[k,A]=b.useState(null),[z,U]=b.useState(""),[I,R]=b.useState(String(new Date().getFullYear())),[K,V]=b.useState(String(new Date().getMonth()+1)),ee=Ze({queryKey:["employees"],queryFn:()=>Ts({include_inactive:!0,status:"all"})}),q=b.useMemo(()=>{const oe=Number(z),Z=Number(I),M=Number(K);return{employee_id:Number.isFinite(oe)&&oe>0?oe:void 0,year:Number.isFinite(Z)&&Z>0?Z:void 0,month:Number.isFinite(M)&&M>0?M:void 0}},[z,I,K]),Y=Ze({queryKey:["leaves",q.employee_id??"all",q.year??"all",q.month??"all"],queryFn:()=>x_(q)}),$=Xe({mutationFn:ZA,onSuccess:oe=>{m(""),g(""),_("ANNUAL"),w("APPROVED"),O(""),A(null),s({variant:"success",title:"zin kayd oluturuldu",description:`zin #${oe.id} kaydedildi.`}),e.invalidateQueries({queryKey:["leaves"]})},onError:oe=>{const Z=He(oe,"zin kayd oluturulamad.");A(Z.message),s({variant:"error",title:"zin oluturulamad",description:Z.message})}}),ie=Xe({mutationFn:HA,onSuccess:(oe,Z)=>{s({variant:"success",title:"zin kayd silindi",description:`zin #${Z} silindi.`}),e.invalidateQueries({queryKey:["leaves"]})},onError:oe=>{const Z=He(oe,"zin silinemedi.");s({variant:"error",title:"zin silinemedi",description:Z.message})}}),fe=oe=>{oe.preventDefault(),A(null);const Z=V3.safeParse({employee_id:l,start_date:d,end_date:f,type:v,status:S,note:T});if(!Z.success){const M=Z.error.issues[0]?.message??"zin formunu kontrol edin.";A(M),s({variant:"error",title:"Form hatas",description:M});return}$.mutate({...Z.data,note:Z.data.note||null})};if(ee.isLoading)return n.jsx(Gt,{});if(ee.isError)return n.jsx(wt,{message:"alan listesi alnamad."});const ue=ee.data??[],je=Y.data??[],X=new Map(ue.map(oe=>[oe.id,oe.full_name]));return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"zin Kaytlar",description:"Yllk izin, rapor ve mazeret kaytlarn ynetin."}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Yeni zin Kayd"}),n.jsxs("form",{onSubmit:fe,className:"mt-4 grid gap-3 md:grid-cols-3",children:[n.jsx(hs,{label:"alan",employees:ue,value:l,onChange:o,emptyLabel:"Seiniz",helperText:"Ad-soyad veya ID ile arayn."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang Tarihi",n.jsx("input",{type:"date",value:d,onChange:oe=>m(oe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti Tarihi",n.jsx("input",{type:"date",value:f,onChange:oe=>g(oe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["zin Tipi",n.jsxs("select",{value:v,onChange:oe=>_(oe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"ANNUAL",children:"YILLIK ZN"}),n.jsx("option",{value:"SICK",children:"RAPOR / HASTALIK"}),n.jsx("option",{value:"UNPAID",children:"CRETSZ ZN"}),n.jsx("option",{value:"EXCUSE",children:"MAZERET ZN"}),n.jsx("option",{value:"PUBLIC_HOLIDAY",children:"RESM TATL"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Onay Durumu",n.jsxs("select",{value:S,onChange:oe=>w(oe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"APPROVED",children:"ONAYLI"}),n.jsx("option",{value:"PENDING",children:"BEKLEMEDE"}),n.jsx("option",{value:"REJECTED",children:"REDDEDLD"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-3",children:["Aklama Notu",n.jsx("textarea",{value:T,onChange:oe=>O(oe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",rows:3})]}),n.jsx("div",{className:"md:col-span-3",children:n.jsx("button",{type:"submit",disabled:$.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:$.isPending?"Kaydediliyor...":"zin Kaydn Olutur"})})]}),k?n.jsx("div",{className:"form-validation",children:k}):null]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"zin Listesi Filtreleri"}),n.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-3",children:[n.jsx(hs,{label:"alan",employees:ue,value:z,onChange:U,emptyLabel:"Tm",helperText:"alana gre filtreleyin."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yl",n.jsx("input",{value:I,onChange:oe=>R(oe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",n.jsx("input",{value:K,onChange:oe=>V(oe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]})]}),Y.isLoading?n.jsx(Gt,{}):null,Y.isError?n.jsx(wt,{message:"zin listesi alnamad."}):null,!Y.isLoading&&!Y.isError?n.jsxs(Le,{children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"zin ID"}),n.jsx("th",{className:"py-2",children:"alan"}),n.jsx("th",{className:"py-2",children:"zin Tipi"}),n.jsx("th",{className:"py-2",children:"Tarih Aral"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"lem"})]})}),n.jsx("tbody",{children:je.map(oe=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:oe.id}),n.jsx("td",{className:"py-2",children:X.get(oe.employee_id)??oe.employee_id}),n.jsx("td",{className:"py-2",children:oe.type}),n.jsxs("td",{className:"py-2",children:[oe.start_date," - ",oe.end_date]}),n.jsx("td",{className:"py-2",children:n.jsx(nr,{value:oe.status})}),n.jsx("td",{className:"py-2",children:n.jsx("button",{type:"button",onClick:()=>ie.mutate(oe.id),className:"btn-danger rounded-lg border border-rose-300 px-3 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50",children:"Sil"})})]},oe.id))})]})}),je.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"zin kayd bulunamad."}):null]}):null]})}const $3=$a({username:ia().min(1,"Kullanici adi gerekli."),password:ia().min(1,"Sifre gerekli."),mfaCode:ia().optional(),mfaRecoveryCode:ia().optional()});function X3(e){return e.code==="INVALID_CREDENTIALS"?"Giris bilgileri hatali":e.code==="MFA_REQUIRED"?"MFA kodu gerekli":e.code==="INVALID_MFA_CODE"?"MFA kodu gecersiz":e.code==="MFA_SETUP_REQUIRED"?"MFA kurulumu gerekli":e.code==="TOO_MANY_ATTEMPTS"?"Cok fazla deneme":e.code==="INTERNAL_ERROR"?"Sunucu hatasi":"Giris basarisiz"}function J3(){const e=Kl(),s=ps(),{login:l}=Yl(),[o,d]=b.useState("admin"),[m,f]=b.useState(""),[g,v]=b.useState(""),[_,S]=b.useState(""),[w,T]=b.useState(null),[O,k]=b.useState(!1),A=b.useMemo(()=>{const U=s.state?.from,I=new URLSearchParams(s.search).get("redirect");return U??I??"/dashboard"},[s.search,s.state]),z=async U=>{U.preventDefault(),T(null);const I=$3.safeParse({username:o,password:m,mfaCode:g,mfaRecoveryCode:_});if(!I.success){T({message:I.error.issues[0]?.message??"Form alanlarini kontrol et."});return}k(!0);try{await l(I.data.username,I.data.password,I.data.mfaCode,I.data.mfaRecoveryCode),e(A,{replace:!0})}catch(R){T(He(R,"Giris basarisiz."))}finally{k(!1)}};return n.jsx("div",{className:"admin-auth-screen flex min-h-screen items-center justify-center px-4",children:n.jsxs("div",{className:"admin-auth-card w-full max-w-md rounded-2xl border border-slate-200 bg-white p-8 shadow-panel",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Admin Giris"}),n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Puantaj yonetim paneline giris yap."}),n.jsxs("form",{onSubmit:z,className:"mt-6 space-y-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Kullanici Adi"}),n.jsx("input",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:o,onChange:U=>d(U.target.value)})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Sifre"}),n.jsx("input",{type:"password",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:m,onChange:U=>f(U.target.value)})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"MFA Kodu (gerekliyse)"}),n.jsx("input",{inputMode:"numeric",pattern:"[0-9]*",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:g,onChange:U=>v(U.target.value),placeholder:"6 haneli kod"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Recovery Kodu (MFA yoksa)"}),n.jsx("input",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:_,onChange:U=>S(U.target.value),placeholder:"Ornek: ABCDE-FGHIJ"})]}),w?n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[n.jsx("p",{className:"font-semibold",children:X3(w)}),n.jsx("p",{className:"mt-1",children:w.message}),w.requestId?n.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",w.requestId]}):null]}):null,n.jsx("button",{type:"submit",disabled:O,className:"btn-animated w-full rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:O?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Giris yapiliyor..."]}):"Giris Yap"})]}),n.jsxs("p",{className:"admin-auth-signature mt-5 text-center text-xs tracking-wide text-slate-500",children:[ds.signatureText," | BUILD: ",ds.buildVersion]})]})})}const W3=[{to:"/employees",label:"alan Ynetimi",description:"Personel kart, ariv ve profil ynetimi.",code:"CMD-EMP"},{to:"/attendance-events",label:"Puantaj Kaytlar",description:"Giri-k olaylar ve manuel dzeltme.",code:"CMD-ATT"},{to:"/devices",label:"Cihaz Kontrol",description:"Cihaz aktivasyonu ve eriim denetimi.",code:"CMD-DEV"},{to:"/notifications",label:"Bildirim Merkezi",description:"Toplu/tekli push ve teslimat loglar.",code:"CMD-NOT"},{to:"/reports/employee-monthly",label:"Aylk alan Raporu",description:"alma ve fazla mesai analizi.",code:"CMD-RPT"},{to:"/audit-logs",label:"Sistem Loglar",description:"z kayd ve gvenlik denetimi.",code:"CMD-AUD"}];function Yu(e){return e?new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"short"}).format(new Date(e)):"-"}function ez(e){const s=new Date(e);return Number.isNaN(s.getTime())?"":s.toLocaleDateString("sv-SE",{timeZone:"Europe/Istanbul"})}function tz(e){const s=new Date(`${e}T00:00:00Z`);return Number.isNaN(s.getTime())?"Hafta i":s.getUTCDay()===0?"Pazar":"Hafta i"}function nz(e){return e==="NOT_STARTED"?"Balamad":e==="IN_PROGRESS"?"Mesai Devam Ediyor":"Mesai Tamamland"}function az(){const{pushToast:e}=oa(),s=new Date,[l,o]=b.useState("Ynetim Konsolu Bildirimi"),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState("bulk"),[S,w]=b.useState(""),[T,O]=b.useState([]),[k,A]=b.useState(""),[z,U]=b.useState(String(s.getFullYear())),[I,R]=b.useState(String(s.getMonth()+1)),K=Ze({queryKey:["employees","management-console"],queryFn:()=>Ts({status:"all",include_inactive:!0}),refetchInterval:3e4}),V=Ze({queryKey:["devices","management-console"],queryFn:f_,refetchInterval:3e4}),ee=Ze({queryKey:["attendance-events","management-console"],queryFn:()=>fp({limit:20}),refetchInterval:2e4}),q=Ze({queryKey:["employee-device-overview","management-console"],queryFn:()=>If({limit:12,device_limit:2,include_inactive:!1}),refetchInterval:2e4}),Y=Ze({queryKey:["dashboard-employee-snapshot","management-console",k],queryFn:()=>p_({employee_id:Number(k)}),enabled:!!k,staleTime:15e3}),$=Number(z),ie=Number(I),fe=Number.isInteger($)&&Number.isInteger(ie)&&ie>=1&&ie<=12,ue=Ze({queryKey:["management-console-control-monthly",k,$,ie],queryFn:()=>rc({employee_id:Number(k),year:$,month:ie}),enabled:!!k&&fe,staleTime:15e3}),je=Xe({mutationFn:h_,onSuccess:_e=>{e({variant:"success",title:"Bildirim gnderildi",description:`Hedef: ${_e.total_targets} / Gnderilen: ${_e.sent}`}),m(""),v==="single"&&(O([]),w(""))},onError:_e=>{const lt=He(_e,"Bildirim gnderimi baarsz.");e({variant:"error",title:"Gnderim baarsz",description:lt.message})}}),X=K.data??[],oe=V.data??[],Z=ee.data??[],M=q.data??[],ne=ue.data?.days??[],Se=b.useMemo(()=>xp(ne),[ne]),be=b.useMemo(()=>new Map(X.map(_e=>[_e.id,_e])),[X]),D=b.useMemo(()=>X.filter(_e=>_e.is_active).length,[X]),te=b.useMemo(()=>oe.filter(_e=>_e.is_active).length,[oe]),P=b.useMemo(()=>Z.filter(_e=>_e.location_status==="VERIFIED_HOME").length,[Z]),ce=b.useMemo(()=>X.find(_e=>String(_e.id)===S)??null,[X,S]),de=b.useMemo(()=>new Map(ne.map(_e=>[_e.date,_e])),[ne]),Ee=Number(k),De=b.useMemo(()=>Z.slice(0,14).map(_e=>{const lt=ez(_e.ts_utc),dt=_e.employee_id===Ee&&lt?de.get(lt):void 0;return{event:_e,dayTypeLabel:dt?Ad(dt).label:tz(lt),workedMinutes:dt?.worked_minutes??null,planOvertimeMinutes:dt?.plan_overtime_minutes??null,legalOvertimeMinutes:dt?.legal_overtime_minutes??null}}),[Z,Ee,de]),Ge=()=>{const _e=Number(S);if(!Number.isInteger(_e)||_e<=0){e({variant:"error",title:"Hedef eklenemedi",description:"nce alan sein."});return}if(T.includes(_e)){e({variant:"info",title:"Hedef zaten eklendi",description:`#${_e} listede var.`});return}O(lt=>[...lt,_e]),w("")},pe=_e=>{O(lt=>lt.filter(dt=>dt!==_e))},Ke=_e=>{if(_e.preventDefault(),!l.trim()||!d.trim()||!f.trim()){e({variant:"error",title:"Eksik alan",description:"Balk, mesaj ve ynetici ifresi zorunludur."});return}if(v==="single"&&T.length===0){e({variant:"error",title:"Hedef seilmedi",description:"Tekli bildirim iin en az bir alan sein."});return}je.mutate({title:l.trim(),message:d.trim(),password:f.trim(),target:"employees",employee_ids:v==="single"?T:void 0})};return K.isLoading||V.isLoading||ee.isLoading||q.isLoading?n.jsx(Gt,{label:"Ynetim konsolu ykleniyor..."}):K.isError||V.isError||ee.isError||q.isError?n.jsx(wt,{message:"Ynetim konsolu verileri alnamad."}):n.jsxs("div",{className:"management-console-screen space-y-4",children:[n.jsx(Zn,{title:"Ynetim Konsolu",description:"Tek merkezden bildirim, puantaj, konum ve cihaz operasyonlarn disiplinli akla ynetin."}),n.jsxs("div",{className:"management-console-kpi-grid",children:[n.jsxs(Le,{className:"management-console-kpi-card",children:[n.jsx("p",{className:"management-console-kpi-label",children:"Toplam alan"}),n.jsx("p",{className:"management-console-kpi-value",children:X.length}),n.jsxs("p",{className:"management-console-kpi-meta",children:["Aktif: ",D]})]}),n.jsxs(Le,{className:"management-console-kpi-card",children:[n.jsx("p",{className:"management-console-kpi-label",children:"Toplam Cihaz"}),n.jsx("p",{className:"management-console-kpi-value",children:oe.length}),n.jsxs("p",{className:"management-console-kpi-meta",children:["Aktif: ",te]})]}),n.jsxs(Le,{className:"management-console-kpi-card",children:[n.jsx("p",{className:"management-console-kpi-label",children:"Canl Olay Ak"}),n.jsx("p",{className:"management-console-kpi-value",children:Z.length}),n.jsxs("p",{className:"management-console-kpi-meta",children:["Dorulanm konum: ",P]})]}),n.jsxs(Le,{className:"management-console-kpi-card",children:[n.jsx("p",{className:"management-console-kpi-label",children:"Cihaz Grnm Satr"}),n.jsx("p",{className:"management-console-kpi-value",children:M.length}),n.jsxs("p",{className:"management-console-kpi-meta",children:["Son yenileme: ",Yu(new Date().toISOString())]})]})]}),n.jsxs(Le,{className:"management-console-panel",children:[n.jsx("h4",{className:"management-console-title",children:"Komut Merkezi"}),n.jsx("p",{className:"management-console-subtitle",children:"Dank ekranlar arasnda dolamak yerine kritik ynetim modllerine tek panelden eriin."}),n.jsx("div",{className:"management-console-command-grid",children:W3.map(_e=>n.jsxs(us,{to:_e.to,className:"management-console-command-card",children:[n.jsx("span",{className:"management-console-command-code",children:_e.code}),n.jsx("p",{className:"management-console-command-label",children:_e.label}),n.jsx("p",{className:"management-console-command-desc",children:_e.description})]},_e.to))})]}),n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[1.06fr_1.35fr]",children:[n.jsxs(Le,{className:"management-console-panel",children:[n.jsx("h4",{className:"management-console-title",children:"Bildirim Terminali"}),n.jsx("p",{className:"management-console-subtitle",children:"Toplu veya tekli bildirim gnderimini ayn terminalden yrtn."}),n.jsxs("form",{className:"management-console-terminal mt-3 space-y-3",onSubmit:Ke,children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"text-sm",children:[n.jsx("span",{className:"management-console-field-label",children:"Gnderim Modu"}),n.jsxs("select",{value:v,onChange:_e=>_(_e.target.value),className:"management-console-input mt-1",children:[n.jsx("option",{value:"bulk",children:"Toplu (Tm alanlar)"}),n.jsx("option",{value:"single",children:"Tekli (Seili alanlar)"})]})]}),n.jsxs("label",{className:"text-sm",children:[n.jsx("span",{className:"management-console-field-label",children:"Ynetici ifresi"}),n.jsx("input",{type:"password",value:f,onChange:_e=>g(_e.target.value),className:"management-console-input mt-1",placeholder:"ifre"})]})]}),n.jsxs("label",{className:"text-sm",children:[n.jsx("span",{className:"management-console-field-label",children:"Balk"}),n.jsx("input",{value:l,onChange:_e=>o(_e.target.value),className:"management-console-input mt-1",placeholder:"Bildirim bal"})]}),n.jsxs("label",{className:"text-sm",children:[n.jsx("span",{className:"management-console-field-label",children:"Mesaj"}),n.jsx("textarea",{rows:4,value:d,onChange:_e=>m(_e.target.value),className:"management-console-input mt-1",placeholder:"Mesaj ierii"})]}),v==="single"?n.jsxs("div",{className:"space-y-2",children:[n.jsx(hs,{label:"Hedef alan",employees:X,value:S,onChange:w,helperText:"alan seip listeye ekleyin."}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("button",{type:"button",onClick:Ge,className:"management-console-action-button",children:"Hedefe Ekle"}),ce?n.jsxs("span",{className:"management-console-inline-note",children:["Seili: #",ce.id," - ",ce.full_name]}):null]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:T.length===0?n.jsx("span",{className:"management-console-inline-note",children:"Henz hedef alan eklenmedi."}):T.map(_e=>n.jsxs("button",{type:"button",onClick:()=>pe(_e),className:"management-console-chip",children:["#",_e," - ",be.get(_e)?.full_name??"alan"," "]},_e))})]}):n.jsx("p",{className:"management-console-inline-note",children:"Toplu mod: Aktif/Pasif ayrm olmadan tm alanlara gnderilir."}),n.jsx("button",{type:"submit",disabled:je.isPending,className:"management-console-send-button",children:je.isPending?"Gnderiliyor...":"Bildirimi Gnder"})]})]}),n.jsxs(Le,{className:"management-console-panel",children:[n.jsx("h4",{className:"management-console-title",children:"alan Kontrol Odas"}),n.jsx("p",{className:"management-console-subtitle",children:"Tek alan iin puantaj, konum ve cihaz metriklerini anlk izleyin."}),n.jsxs("div",{className:"management-console-terminal mt-3 space-y-3",children:[n.jsx(hs,{label:"Kontrol edilecek alan",employees:X,value:k,onChange:A,helperText:"Seildiinde puantaj ve konum panelleri otomatik gncellenir."}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("label",{className:"text-sm",children:[n.jsx("span",{className:"management-console-field-label",children:"Yl"}),n.jsx("input",{type:"number",value:z,onChange:_e=>U(_e.target.value),className:"management-console-input mt-1"})]}),n.jsxs("label",{className:"text-sm",children:[n.jsx("span",{className:"management-console-field-label",children:"Ay"}),n.jsx("input",{type:"number",min:1,max:12,value:I,onChange:_e=>R(_e.target.value),className:"management-console-input mt-1"})]})]}),k?null:n.jsx("p",{className:"management-console-inline-note",children:"alan seildiinde canl zet burada grnr."}),k&&!fe?n.jsx("p",{className:"management-console-inline-note",children:"Yl/ay deeri geersiz."}):null,k&&Y.isLoading?n.jsx(Gt,{label:"Canl zet ykleniyor..."}):null,k&&Y.isError?n.jsx(wt,{message:"alan zeti alnamad."}):null,Y.data?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"management-console-strip",children:[n.jsx("span",{className:"management-console-strip-tag",children:"Durum"}),n.jsx("span",{children:nz(Y.data.today_status)})]}),n.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[n.jsxs("div",{className:"management-console-block",children:[n.jsx("p",{className:"management-console-block-title",children:"Bu Ay"}),n.jsxs("p",{children:["Net alma: ",n.jsx(qe,{minutes:Y.data.current_month.worked_minutes})]}),n.jsxs("p",{children:["Plan Ustu Sure: ",n.jsx(qe,{minutes:Y.data.current_month.plan_overtime_minutes})]}),n.jsxs("p",{children:["Yasal Fazla Sure: ",n.jsx(qe,{minutes:Y.data.current_month.extra_work_minutes})]}),n.jsxs("p",{children:["Yasal Fazla Mesai: ",n.jsx(qe,{minutes:Y.data.current_month.overtime_minutes})]})]}),n.jsxs("div",{className:"management-console-block",children:[n.jsx("p",{className:"management-console-block-title",children:"nceki Ay"}),n.jsxs("p",{children:["Net alma: ",n.jsx(qe,{minutes:Y.data.previous_month.worked_minutes})]}),n.jsxs("p",{children:["Plan Ustu Sure: ",n.jsx(qe,{minutes:Y.data.previous_month.plan_overtime_minutes})]}),n.jsxs("p",{children:["Yasal Fazla Sure: ",n.jsx(qe,{minutes:Y.data.previous_month.extra_work_minutes})]}),n.jsxs("p",{children:["Yasal Fazla Mesai: ",n.jsx(qe,{minutes:Y.data.previous_month.overtime_minutes})]})]})]}),ue.isLoading?n.jsx(Gt,{label:"Aylk puantaj ykleniyor..."}):null,ue.isError?n.jsx(wt,{message:"Aylk puantaj alnamad."}):null,ue.data?n.jsxs("div",{className:"grid gap-2 sm:grid-cols-3",children:[n.jsxs("div",{className:"management-console-block",children:[n.jsx("p",{className:"management-console-block-title",children:"allan Gn"}),n.jsxs("p",{children:[Se.workedDayCount," gn"]}),n.jsxs("p",{children:["Hafta i: ",Se.weekdayWorkedDayCount]})]}),n.jsxs("div",{className:"management-console-block",children:[n.jsx("p",{className:"management-console-block-title",children:"Pazar Mesaisi"}),n.jsxs("p",{children:[Se.sundayWorkedDayCount," gn"]}),n.jsx("p",{children:n.jsx(qe,{minutes:Se.sundayWorkedMinutes})})]}),n.jsxs("div",{className:"management-console-block",children:[n.jsx("p",{className:"management-console-block-title",children:"zel Gn Mesaisi"}),n.jsxs("p",{children:[Se.specialWorkedDayCount," gn"]}),n.jsx("p",{children:n.jsx(qe,{minutes:Se.specialWorkedMinutes})})]})]}):null,n.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[n.jsxs("div",{className:"management-console-block",children:[n.jsx("p",{className:"management-console-block-title",children:"Son Puantaj"}),Y.data.last_event?n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:["Tip: ",Y.data.last_event.event_type]}),n.jsxs("p",{children:["Zaman: ",Yu(Y.data.last_event.ts_utc)]}),n.jsxs("p",{children:["Konum Durumu: ",Y.data.last_event.location_status]})]}):n.jsx("p",{children:"Kayt bulunmuyor."})]}),n.jsxs("div",{className:"management-console-block",children:[n.jsx("p",{className:"management-console-block-title",children:"Son Konum"}),Y.data.latest_location?n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:["Koordinat: ",Y.data.latest_location.lat.toFixed(6),", ",Y.data.latest_location.lon.toFixed(6)]}),n.jsxs("p",{children:["Doruluk: ",Y.data.latest_location.accuracy_m??"-"," m"]}),n.jsxs("p",{children:["Zaman: ",Yu(Y.data.latest_location.ts_utc)]})]}):n.jsx("p",{children:"Konum verisi yok."})]})]}),n.jsxs("div",{className:"management-console-strip",children:[n.jsx("span",{className:"management-console-strip-tag",children:"Cihaz"}),n.jsxs("span",{children:["Aktif ",Y.data.active_devices," / Toplam ",Y.data.total_devices]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(us,{to:`/employees/${Y.data.employee.id}`,className:"management-console-action-button",children:"alan Detayn A"}),n.jsx(us,{to:"/attendance-events",className:"management-console-action-button",children:"Puantaj Olaylarna Git"}),n.jsx(us,{to:"/devices",className:"management-console-action-button",children:"Cihaz Paneline Git"})]})]}):null]})]})]}),n.jsxs("div",{className:"grid gap-4 xl:grid-cols-2",children:[n.jsxs(Le,{className:"management-console-panel",children:[n.jsx("h4",{className:"management-console-title",children:"Cihaz Eriim Ak"}),n.jsx("p",{className:"management-console-subtitle",children:"alan baznda cihaz younluu ve aktif cihaz oran."}),n.jsx("div",{className:"management-console-table-wrap list-scroll-area mt-3",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"alan"}),n.jsx("th",{children:"Departman"}),n.jsx("th",{children:"Aktif/Toplam"}),n.jsx("th",{children:"lem"})]})}),n.jsx("tbody",{children:M.slice(0,10).map(_e=>n.jsxs("tr",{children:[n.jsxs("td",{className:"py-2",children:["#",_e.employee_id," - ",_e.employee_name]}),n.jsx("td",{children:_e.department_name??"-"}),n.jsxs("td",{children:[_e.active_devices,"/",_e.total_devices]}),n.jsx("td",{children:n.jsx(us,{className:"management-console-link",to:`/employees/${_e.employee_id}`,children:"Detay"})})]},_e.employee_id))})]})})]}),n.jsxs(Le,{className:"management-console-panel",children:[n.jsx("h4",{className:"management-console-title",children:"Canl Puantaj Kayd"}),n.jsx("p",{className:"management-console-subtitle",children:"Son giri-k olaylar ile gn tipi, gnlk alma, plan st sre ve yasal fazla mesai grnm."}),n.jsx("div",{className:"management-console-table-wrap list-scroll-area mt-3",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Zaman"}),n.jsx("th",{children:"alan"}),n.jsx("th",{children:"Gn Tipi"}),n.jsx("th",{children:"Tip"}),n.jsx("th",{children:"Konum"}),n.jsx("th",{children:"Gnlk alma"}),n.jsx("th",{children:"Plan st"}),n.jsx("th",{children:"Yasal FM"})]})}),n.jsx("tbody",{children:De.map(_e=>n.jsxs("tr",{children:[n.jsx("td",{className:"py-2",children:Yu(_e.event.ts_utc)}),n.jsxs("td",{children:["#",_e.event.employee_id," - ",be.get(_e.event.employee_id)?.full_name??"alan"]}),n.jsx("td",{children:_e.dayTypeLabel}),n.jsx("td",{children:_e.event.type}),n.jsx("td",{children:_e.event.location_status}),n.jsx("td",{children:_e.workedMinutes===null?"-":n.jsx(qe,{minutes:_e.workedMinutes})}),n.jsx("td",{children:_e.planOvertimeMinutes===null?"-":n.jsx(qe,{minutes:_e.planOvertimeMinutes})}),n.jsx("td",{children:_e.legalOvertimeMinutes===null?"-":n.jsx(qe,{minutes:_e.legalOvertimeMinutes})})]},_e.event.id))})]})})]})]})]})}function sz(){return n.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",children:n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm",children:[n.jsx("p",{className:"text-4xl font-bold text-slate-900",children:"404"}),n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Sayfa bulunamadi."}),n.jsx(us,{to:"/dashboard",className:"mt-5 inline-block rounded-lg bg-brand-600 px-4 py-2 text-sm text-white hover:bg-brand-700",children:"Dashboard'a dn"}),n.jsx("p",{className:"mt-5 text-center text-xs tracking-wide text-slate-500",children:ds.signatureText})]})})}function Sv(e,s){const l=URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=s,document.body.appendChild(o),o.click(),o.remove(),URL.revokeObjectURL(l)}function iz(){const{pushToast:e}=oa(),s=new Date,[l,o]=b.useState("employee"),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState(""),[S,w]=b.useState(String(s.getFullYear())),[T,O]=b.useState(String(s.getMonth()+1)),[k,A]=b.useState(""),[z,U]=b.useState(""),[I,R]=b.useState(!0),[K,V]=b.useState(!1),[ee,q]=b.useState(""),[Y,$]=b.useState(""),[ie,fe]=b.useState("consolidated"),[ue,je]=b.useState(""),[X,oe]=b.useState(""),[Z,M]=b.useState(""),ne=Ze({queryKey:["employees","all"],queryFn:()=>Ts({status:"all",include_inactive:!0})}),Se=Ze({queryKey:["departments"],queryFn:fi}),be=Ze({queryKey:["regions","all","for-export"],queryFn:()=>Vl({include_inactive:!0})}),D=Xe({mutationFn:XA,onSuccess:ze=>{Sv(ze,`puantaj-${l}-${Date.now()}.xlsx`),e({variant:"success",title:"Excel indirildi",description:"Puantaj Excel dosyas baaryla indirildi."})},onError:ze=>{e({variant:"error",title:"Da aktarma baarsz",description:He(ze,"Excel dosyas retilemedi.").message})}}),te=Xe({mutationFn:tM,onSuccess:ze=>{Sv(ze,`puantaj-range-${ie}-${Date.now()}.xlsx`),e({variant:"success",title:"Aralkl Excel indirildi",description:"Tarih aral da aktarma dosyas indirildi."})},onError:ze=>{e({variant:"error",title:"Tarih aral da aktarma baarsz",description:He(ze,"Excel dosyas retilemedi.").message})}}),P=b.useMemo(()=>{const ze=Number(S),ot=Number(T),bt=Number(d),It=Number(f),Bt=Number(v);return l==="employee"?!bt||!ze||!ot?null:{mode:l,employee_id:bt,year:ze,month:ot}:l==="department"?!It||!ze||!ot?null:{mode:l,department_id:It,year:ze,month:ot,include_daily_sheet:I,include_inactive:K}:l==="all"?!ze||!ot?null:{mode:l,year:ze,month:ot,region_id:Bt||void 0,include_daily_sheet:I,include_inactive:K}:!k||!z?null:{mode:l,start_date:k,end_date:z,employee_id:bt||void 0,department_id:It||void 0,region_id:Bt||void 0,include_inactive:K}},[l,d,f,v,S,T,k,z,I,K]),ce=b.useMemo(()=>{const ze=Number(Z),ot=Number(ue),bt=Number(X);return!ee||!Y?null:{start_date:ee,end_date:Y,mode:ie,employee_id:ze>0?ze:void 0,department_id:ot>0?ot:void 0,region_id:bt>0?bt:void 0}},[ee,Y,ie,Z,ue,X]),de=()=>{if(!P){e({variant:"error",title:"Eksik filtre",description:"Setiiniz da aktarma tipine gre gerekli alanlar doldurun."});return}D.mutate(P)},Ee=()=>{if(!ce){e({variant:"error",title:"Eksik tarih aral filtresi",description:"Balang, biti ve gerekli filtreleri doldurun."});return}te.mutate(ce)};if(ne.isLoading||Se.isLoading||be.isLoading)return n.jsx(Gt,{});if(ne.isError||Se.isError||be.isError)return n.jsx(wt,{message:"alan/departman/blge bilgileri alnamad."});const De=ne.data??[],Ge=Se.data??[],pe=be.data??[],Ke=v?Number(v):null,_e=X?Number(X):null,lt=Ke&&Number.isFinite(Ke)?Ge.filter(ze=>ze.region_id===Ke):Ge,dt=_e&&Number.isFinite(_e)?Ge.filter(ze=>ze.region_id===_e):Ge;return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"Puantaj Excel Da Aktar",description:"Mevcut endpoint veya tarih aral endpointi ile Excel da aktarm yapn."}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Mevcut Export Endpointi"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Da aktarma tipi",n.jsxs("select",{value:l,onChange:ze=>o(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"employee",children:"alan Bazl"}),n.jsx("option",{value:"department",children:"Departman Bazl"}),n.jsx("option",{value:"all",children:"Tm alanlar (Aylk)"}),n.jsx("option",{value:"date_range",children:"Tarih Aral (Mevcut)"})]})]}),(l==="employee"||l==="date_range")&&n.jsx(hs,{label:"alan",employees:De,value:d,onChange:m,emptyLabel:"Seiniz",helperText:"Ad-soyad veya ID ile arayn."}),(l==="department"||l==="date_range")&&n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:f,onChange:ze=>g(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seiniz"}),lt.map(ze=>n.jsxs("option",{value:ze.id,children:["#",ze.id," - ",ze.name]},ze.id))]})]}),(l==="all"||l==="date_range")&&n.jsxs("label",{className:"text-sm text-slate-700",children:["Blge (opsiyonel)",n.jsxs("select",{value:v,onChange:ze=>{_(ze.target.value),g("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tm"}),pe.map(ze=>n.jsxs("option",{value:ze.id,children:["#",ze.id," - ",ze.name]},ze.id))]})]}),(l==="employee"||l==="department"||l==="all")&&n.jsxs(n.Fragment,{children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Yl",n.jsx("input",{type:"number",value:S,onChange:ze=>w(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",n.jsx("input",{type:"number",value:T,onChange:ze=>O(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),l==="date_range"&&n.jsxs(n.Fragment,{children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang Tarihi",n.jsx("input",{type:"date",value:k,onChange:ze=>A(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti Tarihi",n.jsx("input",{type:"date",value:z,onChange:ze=>U(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]})]}),(l==="department"||l==="all")&&n.jsxs("label",{className:"mt-3 inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:I,onChange:ze=>R(ze.target.checked)}),"Gnlk sheetleri de ekle"]}),n.jsxs("label",{className:"mt-3 inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:K,onChange:ze=>V(ze.target.checked)}),"Arivdeki alanlar dahil et"]}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{type:"button",onClick:de,disabled:D.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:D.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Hazrlanyor..."]}):"Excel ndir"})})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Tarih Aral (Yeni Endpoint)"}),n.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Endpoint: ",n.jsx("code",{children:"/api/admin/export/puantaj-range.xlsx"})]}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang Tarihi",n.jsx("input",{type:"date",value:ee,onChange:ze=>q(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti Tarihi",n.jsx("input",{type:"date",value:Y,onChange:ze=>$(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Sheet modu",n.jsxs("select",{value:ie,onChange:ze=>fe(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"consolidated",children:"Tek Konsolide Sheet"}),n.jsx("option",{value:"employee_sheets",children:"alan Bazl Sheet"}),n.jsx("option",{value:"department_sheets",children:"Departman Bazl Sheet"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman (opsiyonel)",n.jsxs("select",{value:ue,onChange:ze=>je(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tm"}),dt.map(ze=>n.jsxs("option",{value:ze.id,children:["#",ze.id," - ",ze.name]},ze.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Blge (opsiyonel)",n.jsxs("select",{value:X,onChange:ze=>{oe(ze.target.value),je("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tm"}),pe.map(ze=>n.jsxs("option",{value:ze.id,children:["#",ze.id," - ",ze.name]},ze.id))]})]}),n.jsx(hs,{label:"alan (opsiyonel)",employees:De,value:Z,onChange:M,emptyLabel:"Tm",helperText:"stee bal alan filtresi.",className:"md:col-span-2"})]}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{type:"button",onClick:Ee,disabled:te.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:te.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Hazrlanyor..."]}):"Tarih Aral Excel ndir"})})]})]})}const rz=[41.0082,28.9784];function Ji(e){return e.toFixed(6)}function lz({lat:e,lon:s,radiusM:l,onSelect:o}){const d=b.useRef(null),m=b.useRef(null),f=b.useRef(null),g=b.useRef(null),[v,_]=b.useState(!1),[S,w]=b.useState(""),[T,O]=b.useState(!1),[k,A]=b.useState(null),[z,U]=b.useState(null),I=b.useMemo(()=>e!==null&&s!==null?[e,s]:rz,[e,s]);b.useEffect(()=>{if(!(!d.current||m.current)){try{const V=Da.map(d.current,{center:I,zoom:e!==null&&s!==null?17:12,zoomControl:!0});m.current=V,Da.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap katkida bulunanlar"}).addTo(V);const ee=Da.circleMarker(I,{radius:8,color:"#0f6a8c",fillColor:"#0f6a8c",fillOpacity:.85,weight:2}).addTo(V);f.current=ee;const q=Da.circle(I,{radius:Number.isFinite(l)&&l>0?l:75,color:"#0f6a8c",fillColor:"#0f6a8c",fillOpacity:.14,weight:2}).addTo(V);g.current=q,V.on("click",Y=>{const $=Y.latlng.lat,ie=Y.latlng.lng;o($,ie),U(`Haritadan secildi: ${Ji($)}, ${Ji(ie)}`)}),_(!0),A(null)}catch{A("Harita yuklenemedi. Lutfen tekrar deneyin."),_(!1)}return()=>{m.current&&(m.current.remove(),m.current=null),f.current=null,g.current=null,_(!1)}}},[I,e,s,o,l]),b.useEffect(()=>{if(!m.current||!f.current||!g.current)return;const V=m.current,ee=f.current,q=g.current;if(e!==null&&s!==null){const $=[e,s];ee.setLatLng($),q.setLatLng($),V.panTo($,{animate:!0})}const Y=Number.isFinite(l)&&l>0?l:75;q.setRadius(Y)},[e,s,l]);const R=b.useCallback(async()=>{if(!v||!m.current)return;const V=S.trim();if(!V){U("Lutfen adres veya lokasyon adi girin.");return}O(!0);try{const ee=new URL("https://nominatim.openstreetmap.org/search");ee.searchParams.set("q",V),ee.searchParams.set("format","json"),ee.searchParams.set("limit","1"),ee.searchParams.set("addressdetails","1"),ee.searchParams.set("accept-language","tr");const q=await fetch(ee.toString(),{headers:{Accept:"application/json"}});if(!q.ok)throw new Error("search_failed");const Y=await q.json();if(!Array.isArray(Y)||Y.length===0){U("Adres bulunamadi. Daha net bir sorgu deneyin.");return}const $=Y[0],ie=Number($.lat),fe=Number($.lon);if(!Number.isFinite(ie)||!Number.isFinite(fe)){U("Adres koordinata cevrilemedi.");return}o(ie,fe),m.current.setView([ie,fe],17,{animate:!0}),U(`Adres bulundu: ${Ji(ie)}, ${Ji(fe)}${$.display_name?` (${$.display_name})`:""}`)}catch{U("Adres aramasi gecici olarak kullanilamiyor. Lutfen tekrar deneyin.")}finally{O(!1)}},[v,o,S]),K=b.useCallback(()=>{if(!navigator.geolocation){U("Tarayiciniz konum API destegi vermiyor.");return}navigator.geolocation.getCurrentPosition(V=>{const ee=V.coords.latitude,q=V.coords.longitude;o(ee,q),U(`Mevcut konum alindi: ${Ji(ee)}, ${Ji(q)}`)},()=>{U("Konum alinamadi. Konum iznini kontrol edin.")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[o]);return n.jsxs("div",{className:"rounded-lg border border-brand-200 bg-brand-50/40 p-3",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-700",children:"Harita Nokta Secici (Ucretsiz)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-600",children:"OpenStreetMap uzerinden haritaya tiklayarak veya adres arayarak lat/lon alanlarini otomatik doldurabilirsiniz."}),k?n.jsx("div",{className:"mt-3 rounded-md border border-rose-300 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:k}):n.jsx("div",{className:"mt-3 rounded-md border border-emerald-300 bg-emerald-50 px-3 py-2 text-xs text-emerald-800",children:"API key gerektirmez. OpenStreetMap/Nominatim kullanilir."}),n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-[1fr_auto_auto]",children:[n.jsx("input",{value:S,onChange:V=>w(V.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Adres / isyeri / bolge adi ara",disabled:!v}),n.jsx("button",{type:"button",onClick:()=>{R()},disabled:!v||T,className:"rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-white disabled:opacity-60",children:T?"Araniyor...":"Ara"}),n.jsx("button",{type:"button",onClick:K,disabled:!v,className:"rounded-lg border border-brand-300 px-3 py-2 text-sm font-semibold text-brand-700 hover:bg-brand-50 disabled:opacity-60",children:"Konumum"})]}),n.jsx("div",{ref:d,className:"mt-3 h-64 w-full rounded-lg border border-slate-300 bg-slate-100","aria-label":"OpenStreetMap qr point picker"}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-xs text-slate-600",children:[n.jsxs("span",{className:"rounded-md bg-white px-2 py-1",children:["Lat: ",e!==null?Ji(e):"-"]}),n.jsxs("span",{className:"rounded-md bg-white px-2 py-1",children:["Lon: ",s!==null?Ji(s):"-"]}),n.jsxs("span",{className:"rounded-md bg-white px-2 py-1",children:["Radius: ",l,"m"]})]}),z?n.jsx("p",{className:"mt-2 rounded-md border border-slate-200 bg-white px-2 py-1 text-xs text-slate-600",children:z}):null]})}const $u={name:"",codeValue:"",codeType:"BOTH",isActive:!0},Xu={name:"",lat:"",lon:"",radiusM:"75",isActive:!0},oz={regionCode:"IST",locationCode:"MERKEZ",serialNo:"1"};function wv(e){return e==="CHECKIN"?"CHECKIN (Giris)":e==="CHECKOUT"?"CHECKOUT (Cikis)":"BOTH (Duruma gore)"}function Ev(e,s){return e.trim().toUpperCase().replace(/[^A-Z0-9]+/g,"-").replace(/^-+|-+$/g,"")||s}function cz(e){return e==="CHECKIN"?"IN":e==="CHECKOUT"?"OUT":"BOTH"}function uz(){const e=la(),{pushToast:s}=oa(),[l,o]=b.useState(null),[d,m]=b.useState(null),[f,g]=b.useState(null),[v,_]=b.useState(""),[S,w]=b.useState(""),[T,O]=b.useState(""),[k,A]=b.useState($u),[z,U]=b.useState(oz),[I,R]=b.useState(Xu),[K,V]=b.useState([]),[ee,q]=b.useState(null),Y=Ze({queryKey:["qr-codes"],queryFn:()=>rA()}),$=Ze({queryKey:["qr-points"],queryFn:()=>dA()}),ie=Xe({mutationFn:lA,onSuccess:ae=>{s({variant:"success",title:"QR kod olusturuldu",description:`Kod ID: ${ae.id}`}),A($u),o(ae.id),e.invalidateQueries({queryKey:["qr-codes"]})},onError:ae=>{s({variant:"error",title:"QR kod olusturulamadi",description:He(ae,"Islem basarisiz.").message})}}),fe=Xe({mutationFn:({codeId:ae,payload:ke})=>oA(ae,ke),onSuccess:ae=>{s({variant:"success",title:"QR kod guncellendi",description:`Kod ID: ${ae.id}`}),m(null),A($u),e.invalidateQueries({queryKey:["qr-codes"]})},onError:ae=>{s({variant:"error",title:"QR kod guncellenemedi",description:He(ae,"Islem basarisiz.").message})}}),ue=Xe({mutationFn:({codeId:ae,pointIds:ke})=>cA(ae,{point_ids:ke}),onSuccess:()=>{s({variant:"success",title:"Nokta atamasi guncellendi",description:"Secili noktalari QR koda baglandi."}),V([]),e.invalidateQueries({queryKey:["qr-codes"]}),e.invalidateQueries({queryKey:["qr-points"]})},onError:ae=>{s({variant:"error",title:"Atama basarisiz",description:He(ae,"Nokta atamasi yapilamadi.").message})}}),je=Xe({mutationFn:({codeId:ae,pointId:ke})=>uA(ae,ke),onSuccess:()=>{s({variant:"success",title:"Nokta baglantisi kaldirildi",description:"Secili nokta bu QR koddan ayrildi."}),e.invalidateQueries({queryKey:["qr-codes"]}),e.invalidateQueries({queryKey:["qr-points"]})},onError:ae=>{s({variant:"error",title:"Islem basarisiz",description:He(ae,"Nokta kaldirilamadi.").message})}}),X=Xe({mutationFn:mA,onSuccess:ae=>{s({variant:"success",title:"QR nokta olusturuldu",description:`Nokta ID: ${ae.id}`}),R(Xu),e.invalidateQueries({queryKey:["qr-points"]})},onError:ae=>{s({variant:"error",title:"QR nokta olusturulamadi",description:He(ae,"Islem basarisiz.").message})}}),oe=Xe({mutationFn:({pointId:ae,payload:ke})=>hA(ae,ke),onSuccess:()=>{s({variant:"success",title:"QR nokta guncellendi",description:"Nokta bilgileri kaydedildi."}),g(null),R(Xu),e.invalidateQueries({queryKey:["qr-points"]})},onError:ae=>{s({variant:"error",title:"QR nokta guncellenemedi",description:He(ae,"Islem basarisiz.").message})}}),Z=Xe({mutationFn:fA,onSuccess:()=>{s({variant:"success",title:"QR nokta pasife alindi",description:"Nokta aktif listeden cikarildi."}),e.invalidateQueries({queryKey:["qr-points"]}),e.invalidateQueries({queryKey:["qr-codes"]})},onError:ae=>{s({variant:"error",title:"Islem basarisiz",description:He(ae,"Nokta pasife alinamadi.").message})}}),M=Y.data??[],ne=$.data??[];b.useEffect(()=>{l===null&&M.length>0&&o(M[0].id),l!==null&&!M.some(ae=>ae.id===l)&&o(M.length>0?M[0].id:null)},[M,l]);const Se=b.useMemo(()=>M.find(ae=>ae.id===l)??null,[M,l]);b.useEffect(()=>{if(!Se){q(null);return}let ae=!1;return Bf.toDataURL(Se.code_value,{errorCorrectionLevel:"M",margin:2,width:360}).then(ke=>{ae||q(ke)}).catch(()=>{ae||q(null)}),()=>{ae=!0}},[Se?.id,Se?.code_value]);const be=b.useMemo(()=>{const ae=new Map;for(const ke of ne)ae.set(ke.id,ke);return ae},[ne]),D=b.useMemo(()=>Se?Se.point_ids.map(ae=>be.get(ae)??null).filter(ae=>ae!==null):[],[Se,be]),te=b.useMemo(()=>{const ae=v.trim().toLowerCase();return ae?M.filter(ke=>String(ke.id).includes(ae)||(ke.name??"").toLowerCase().includes(ae)||ke.code_value.toLowerCase().includes(ae)):M},[M,v]),P=b.useMemo(()=>{const ae=S.trim().toLowerCase();return ae?ne.filter(ke=>String(ke.id).includes(ae)||ke.name.toLowerCase().includes(ae)||String(ke.department_id??"").includes(ae)||String(ke.region_id??"").includes(ae)):ne},[ne,S]),ce=b.useMemo(()=>{const ae=ne.filter(Be=>Be.is_active),ke=T.trim().toLowerCase();return ke?ae.filter(Be=>String(Be.id).includes(ke)||Be.name.toLowerCase().includes(ke)||String(Be.department_id??"").includes(ke)||String(Be.region_id??"").includes(ke)):ae},[ne,T]),de=b.useMemo(()=>{const ae=M.filter(at=>at.is_active).length,ke=ne.filter(at=>at.is_active).length,Be=M.filter(at=>at.point_ids.length===0).length;return{codeCount:M.length,activeCodes:ae,pointCount:ne.length,activePoints:ke,codesWithoutPoint:Be}},[M,ne]),Ee=b.useMemo(()=>{const ae=Number(I.lat);return Number.isFinite(ae)?ae:null},[I.lat]),De=b.useMemo(()=>{const ae=Number(I.lon);return Number.isFinite(ae)?ae:null},[I.lon]),Ge=b.useMemo(()=>{const ae=Number(I.radiusM);return Number.isFinite(ae)&&ae>0?ae:75},[I.radiusM]),pe=ae=>{V(ke=>ke.includes(ae)?ke.filter(Be=>Be!==ae):[...ke,ae])},Ke=ae=>{m(ae.id),A({name:ae.name??"",codeValue:ae.code_value,codeType:ae.code_type,isActive:ae.is_active})},_e=()=>{m(null),A($u)},lt=()=>{const ae=Ev(z.regionCode,"GEN"),ke=Ev(z.locationCode,"LOKASYON"),Be=Number(z.serialNo),at=Number.isFinite(Be)&&Be>0?Math.floor(Be):1,se=cz(k.codeType),Ie=`PF-${ae}-${ke}-${se}-${String(at).padStart(6,"0")}`;A(_t=>({..._t,codeValue:Ie}))},dt=ae=>{g(ae.id),R({name:ae.name,lat:String(ae.lat),lon:String(ae.lon),radiusM:String(ae.radius_m),isActive:ae.is_active})},ze=()=>{g(null),R(Xu)},ot=ae=>{ae.preventDefault();const ke=k.codeValue.trim();if(!ke){s({variant:"error",title:"Kod degeri zorunlu",description:"QR kod degerini bos birakamazsiniz."});return}const Be={name:k.name.trim()||null,code_value:ke,code_type:k.codeType,is_active:k.isActive};if(d===null){ie.mutate(Be);return}fe.mutate({codeId:d,payload:Be})},bt=ae=>{ae.preventDefault();const ke=I.name.trim(),Be=Number(I.lat),at=Number(I.lon),se=Number(I.radiusM);if(!ke){s({variant:"error",title:"Nokta adi zorunlu",description:"Lutfen bir nokta adi girin."});return}if(!Number.isFinite(Be)||!Number.isFinite(at)||!Number.isFinite(se)||se<=0){s({variant:"error",title:"Gecersiz konum",description:"Lat/Lon/radius alanlarini kontrol edin."});return}const Ie={name:ke,lat:Be,lon:at,radius_m:se,is_active:I.isActive};if(f===null){X.mutate(Ie);return}oe.mutate({pointId:f,payload:Ie})},It=()=>{if(!Se){s({variant:"error",title:"QR kod seciniz",description:"Nokta atamak icin once bir QR kod secin."});return}if(K.length===0){s({variant:"error",title:"Nokta seciniz",description:"Atama icin en az bir nokta secin."});return}ue.mutate({codeId:Se.id,pointIds:K})},Bt=async ae=>{try{await navigator.clipboard.writeText(ae),s({variant:"success",title:"Kopyalandi",description:"QR kod degeri panoya kopyalandi."})}catch{s({variant:"error",title:"Kopyalama basarisiz",description:"Lutfen manuel olarak kopyalayin."})}},rn=async ae=>{try{const ke=await Bf.toDataURL(ae.code_value,{errorCorrectionLevel:"M",margin:2,width:900}),Be=document.createElement("a");Be.href=ke,Be.download=`qr-kod-${ae.id}.png`,document.body.appendChild(Be),Be.click(),document.body.removeChild(Be),s({variant:"success",title:"PNG indirildi",description:`QR kod #${ae.id} dosyasi indirildi.`})}catch{s({variant:"error",title:"Indirme basarisiz",description:"QR kod PNG olusturulamadi."})}};return Y.isLoading||$.isLoading?n.jsx(Gt,{}):Y.isError||$.isError?n.jsx(Le,{children:n.jsx("p",{className:"text-sm text-rose-700",children:"QR kod veya nokta listesi yuklenemedi."})}):n.jsxs("div",{className:"mx-auto w-full max-w-[1320px] space-y-4",children:[n.jsx(Zn,{title:"QR Kod Yonetimi",description:"Konuma bagli giris/cikis icin QR kod ve QR nokta yonetimi. Sirayla nokta olustur, kod olustur, nokta ata, sonra indir."}),n.jsx(Le,{className:"min-w-0",children:n.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1.45fr)_minmax(260px,0.95fr)]",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Nasil Calisir?"}),n.jsxs("ol",{className:"mt-2 space-y-1 text-sm text-slate-700",children:[n.jsx("li",{children:"1) Once QR nokta olustur (ad + lat/lon + radius)."}),n.jsx("li",{children:"2) Sonra QR kod olustur (benzersiz code_value + tip)."}),n.jsx("li",{children:"3) QR koda bir veya birden fazla aktif nokta ata."}),n.jsx("li",{children:"4) Calisan sadece atanmis nokta icindeyse okutma basarili olur."})]}),n.jsx("div",{className:"mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:"Onemli: Noktasi olmayan QR kod okutulamaz. Pasif nokta ya da pasif QR kod da kullanilamaz."})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm sm:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Kod"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:de.codeCount}),n.jsxs("p",{className:"text-xs text-emerald-700",children:["Aktif: ",de.activeCodes]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Nokta"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:de.pointCount}),n.jsxs("p",{className:"text-xs text-emerald-700",children:["Aktif: ",de.activePoints]})]}),n.jsxs("div",{className:"col-span-2 rounded-lg border border-rose-200 bg-rose-50 p-3",children:[n.jsx("p",{className:"text-xs text-rose-700",children:"Noktasi Atanmamis Kod"}),n.jsx("p",{className:"text-lg font-semibold text-rose-800",children:de.codesWithoutPoint}),n.jsx("p",{className:"text-xs text-rose-700",children:"Bu kodlar okutuldugunda sistem izin vermez."})]})]})]})}),n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]",children:[n.jsxs(Le,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:d===null?"2) QR Kod Olustur":`2) QR Kod Duzenle (#${d})`}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Code value benzersiz olmalidir. Asagidaki anlamli format yardimcisini kullanabilirsiniz."}),n.jsxs("form",{className:"mt-3 space-y-3",onSubmit:ot,children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Kod adi (opsiyonel)",n.jsx("input",{value:k.name,onChange:ae=>A(ke=>({...ke,name:ae.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Merkez Giris"})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Anlamli Format Yardimcisi"}),n.jsxs("div",{className:"mt-2 grid gap-2 sm:grid-cols-2 xl:grid-cols-4",children:[n.jsx("input",{value:z.regionCode,onChange:ae=>U(ke=>({...ke,regionCode:ae.target.value})),className:"rounded-lg border border-slate-300 px-2 py-2 text-sm",placeholder:"Bolge (IST)"}),n.jsx("input",{value:z.locationCode,onChange:ae=>U(ke=>({...ke,locationCode:ae.target.value})),className:"rounded-lg border border-slate-300 px-2 py-2 text-sm",placeholder:"Lokasyon (MERKEZ)"}),n.jsx("input",{type:"number",min:1,value:z.serialNo,onChange:ae=>U(ke=>({...ke,serialNo:ae.target.value})),className:"rounded-lg border border-slate-300 px-2 py-2 text-sm",placeholder:"Seri No"}),n.jsx("button",{type:"button",onClick:lt,className:"rounded-lg border border-brand-300 bg-white px-3 py-2 text-sm font-semibold text-brand-700 hover:bg-brand-50",children:"Deger Uret"})]}),n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Ornek: PF-IST-MERKEZ-IN-000001 / PF-ANK-SUBE1-BOTH-000014"})]}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["code_value",n.jsx("input",{value:k.codeValue,onChange:ae=>A(ke=>({...ke,codeValue:ae.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: IN|HQ-1"})]}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["Kod tipi",n.jsxs("select",{value:k.codeType,onChange:ae=>A(ke=>({...ke,codeType:ae.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"CHECKIN",children:"CHECKIN"}),n.jsx("option",{value:"CHECKOUT",children:"CHECKOUT"}),n.jsx("option",{value:"BOTH",children:"BOTH"})]}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"CHECKIN: sadece giris, CHECKOUT: sadece cikis, BOTH: sistem bugunku duruma gore secer."})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:k.isActive,onChange:ae=>A(ke=>({...ke,isActive:ae.target.checked}))}),"Aktif"]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"submit",disabled:ie.isPending||fe.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:d===null?"Olustur":"Guncelle"}),d!==null?n.jsx("button",{type:"button",onClick:_e,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Iptal"}):null]})]})]}),n.jsxs(Le,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"QR Kod Listesi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Detay ve nokta atama islemleri icin bir QR kod secin."}),n.jsx("div",{className:"mt-3",children:n.jsx(mi,{value:v,onChange:_,placeholder:"Kod adi / degeri / ID ara"})}),n.jsx("div",{className:"mt-3 max-h-80 overflow-auto overscroll-contain rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-[980px] text-left text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2",children:"ID"}),n.jsx("th",{className:"px-3 py-2",children:"Kod"}),n.jsx("th",{className:"px-3 py-2",children:"Tip"}),n.jsx("th",{className:"px-3 py-2",children:"Durum"}),n.jsx("th",{className:"px-3 py-2",children:"Nokta"}),n.jsx("th",{className:"px-3 py-2",children:"Aksiyon"})]})}),n.jsxs("tbody",{children:[te.map(ae=>n.jsxs("tr",{className:`border-t border-slate-100 ${l===ae.id?"bg-brand-50/60":""}`,children:[n.jsx("td",{className:"px-3 py-2",children:ae.id}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("button",{type:"button",onClick:()=>o(ae.id),className:"font-medium text-brand-700 hover:underline",children:ae.name||"-"}),n.jsx("div",{className:"max-w-[340px] break-all text-xs text-slate-500",children:ae.code_value})]}),n.jsx("td",{className:"px-3 py-2",children:wv(ae.code_type)}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-semibold ${ae.is_active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:ae.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"px-3 py-2",children:ae.point_ids.length}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.jsx("button",{type:"button",onClick:()=>Ke(ae),className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"}),n.jsx("button",{type:"button",onClick:()=>{rn(ae)},className:"rounded-md border border-brand-300 px-2 py-1 text-xs font-medium text-brand-700 hover:bg-brand-50",children:"PNG"})]})})]},ae.id)),te.length===0?n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4 text-sm text-slate-500",colSpan:6,children:"Arama kriterine uygun QR kod bulunamadi."})}):null]})]})})]})]}),n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]",children:[n.jsxs(Le,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:Se?`3) QR Kod Detay (#${Se.id})`:"3) QR Kod Detay"}),Se?n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 text-sm text-slate-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Ad:"})," ",Se.name||"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Kod degeri:"})," ",Se.code_value]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Tip:"})," ",wv(Se.code_type)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Durum:"})," ",Se.is_active?"Aktif":"Pasif"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Atanan nokta sayisi:"})," ",Se.point_ids.length]})]}),Se.point_ids.length===0?n.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 p-3 text-xs text-rose-800",children:"Bu QR kodda nokta atamasi yok. Okutma yapildiginda sistem izin vermez."}):null,n.jsxs("div",{className:"rounded-lg border border-brand-200 bg-brand-50/60 p-3",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-700",children:"QR Onizleme"}),n.jsx("p",{className:"mt-1 break-all text-xs text-slate-700",children:Se.code_value}),ee?n.jsxs("div",{className:"mt-3 flex flex-col items-start gap-3",children:[n.jsx("img",{src:ee,alt:`QR Kod ${Se.id}`,className:"h-52 w-52 rounded-lg border border-brand-200 bg-white p-2"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{rn(Se)},className:"rounded-md bg-brand-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-brand-700",children:"PNG Indir"}),n.jsx("button",{type:"button",onClick:()=>{Bt(Se.code_value)},className:"rounded-md border border-slate-300 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-white",children:"Kodu Kopyala"})]})]}):n.jsx("p",{className:"mt-2 text-xs text-rose-700",children:"QR onizleme olusturulamadi."})]}),n.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:"Bu QR kod, sadece bu koda atanmis aktif konum noktalarinin radius alaninda okutuldugunda gecerli olur. Diger konumlarda sistem isleme izin vermez."}),n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Atanmis Noktalar"}),D.length===0?n.jsx("p",{className:"text-sm text-slate-600",children:"Bu QR kod icin henuz nokta atanmis degil."}):n.jsx("div",{className:"space-y-2",children:D.map(ae=>n.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-slate-200 px-3 py-2 text-sm",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-slate-800",children:["#",ae.id," - ",ae.name]}),n.jsxs("p",{className:"text-xs text-slate-500",children:["lat/lon: ",ae.lat,", ",ae.lon," | radius: ",ae.radius_m,"m"]})]}),n.jsx("button",{type:"button",onClick:()=>je.mutate({codeId:Se.id,pointId:ae.id}),className:"rounded-md border border-rose-300 px-2 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50",children:"Kaldir"})]},ae.id))})]}):n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Detay gormek icin listeden bir QR kod secin."})]}),n.jsxs(Le,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"4) Nokta Ata (Coklu Secim)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Arama ile nokta secip tek islemde birden fazla noktayi QR koda baglayabilirsiniz."}),n.jsx("div",{className:"mt-3",children:n.jsx(mi,{value:T,onChange:O,placeholder:"Nokta adi / ID ara"})}),n.jsx("div",{className:"mt-3 max-h-56 overflow-auto overscroll-contain rounded-lg border border-slate-200 p-2",children:ce.length===0?n.jsx("p",{className:"px-2 py-1 text-sm text-slate-600",children:"Aktif nokta bulunamadi."}):n.jsx("div",{className:"space-y-1",children:ce.map(ae=>n.jsxs("label",{className:"flex items-center gap-2 rounded-md px-2 py-1 text-sm text-slate-700 hover:bg-slate-50",children:[n.jsx("input",{type:"checkbox",checked:K.includes(ae.id),onChange:()=>pe(ae.id)}),n.jsxs("span",{children:["#",ae.id," - ",ae.name," (",ae.radius_m,"m)"]})]},ae.id))})}),n.jsxs("div",{className:"mt-3 flex items-center justify-between gap-3",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Secilen nokta: ",K.length]}),n.jsx("button",{type:"button",onClick:It,disabled:ue.isPending||Se===null,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:"Secilenleri Ata"})]})]})]}),n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]",children:[n.jsxs(Le,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:f===null?"1) QR Nokta Olustur":`1) QR Nokta Duzenle (#${f})`}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"QR noktasi okutmanin izinli oldugu fiziksel konumu temsil eder."}),n.jsxs("form",{className:"mt-3 space-y-3",onSubmit:bt,children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Nokta adi",n.jsx("input",{value:I.name,onChange:ae=>R(ke=>({...ke,name:ae.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Merkez Ofis Kapi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ornek: Istanbul Merkez Kapi, Ankara Sube Giris."})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Lat",n.jsx("input",{type:"number",step:"any",value:I.lat,onChange:ae=>R(ke=>({...ke,lat:ae.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["Lon",n.jsx("input",{type:"number",step:"any",value:I.lon,onChange:ae=>R(ke=>({...ke,lon:ae.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),n.jsx(lz,{lat:Ee,lon:De,radiusM:Ge,onSelect:(ae,ke)=>R(Be=>({...Be,lat:String(ae),lon:String(ke)}))}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["Radius (m)",n.jsx("input",{type:"number",min:1,value:I.radiusM,onChange:ae=>R(ke=>({...ke,radiusM:ae.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Oneri: bina ici 50-80m, acik alan 80-150m."})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:I.isActive,onChange:ae=>R(ke=>({...ke,isActive:ae.target.checked}))}),"Aktif"]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"submit",disabled:X.isPending||oe.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:f===null?"Olustur":"Guncelle"}),f!==null?n.jsx("button",{type:"button",onClick:ze,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Iptal"}):null]})]})]}),n.jsxs(Le,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"5) QR Nokta Listesi"}),n.jsx("div",{className:"mt-3",children:n.jsx(mi,{value:S,onChange:w,placeholder:"Nokta adi / ID ara"})}),n.jsx("div",{className:"mt-3 max-h-96 overflow-auto overscroll-contain rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-[920px] text-left text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2",children:"ID"}),n.jsx("th",{className:"px-3 py-2",children:"Nokta"}),n.jsx("th",{className:"px-3 py-2",children:"Konum"}),n.jsx("th",{className:"px-3 py-2",children:"Durum"}),n.jsx("th",{className:"px-3 py-2",children:"Aksiyon"})]})}),n.jsxs("tbody",{children:[P.map(ae=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-3 py-2",children:ae.id}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("p",{className:"font-medium text-slate-800",children:ae.name}),n.jsxs("p",{className:"text-xs text-slate-500",children:["radius: ",ae.radius_m,"m"]})]}),n.jsxs("td",{className:"px-3 py-2 text-xs text-slate-600",children:[ae.lat,", ",ae.lon]}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-semibold ${ae.is_active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:ae.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.jsx("button",{type:"button",onClick:()=>dt(ae),className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"}),ae.is_active?n.jsx("button",{type:"button",onClick:()=>Z.mutate(ae.id),className:"rounded-md border border-rose-300 px-2 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50",children:"Pasife Al"}):null]})})]},ae.id)),P.length===0?n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4 text-sm text-slate-500",colSpan:5,children:"Arama kriterine uygun nokta bulunamadi."})}):null]})]})})]})]})]})}const kv=[{value:0,label:"Pazartesi"},{value:1,label:"Sal"},{value:2,label:"aramba"},{value:3,label:"Perembe"},{value:4,label:"Cuma"},{value:5,label:"Cumartesi"},{value:6,label:"Pazar"}];function dz(){const e=la(),{pushToast:s}=oa(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState({}),[S,w]=b.useState(""),[T,O]=b.useState("09:00"),[k,A]=b.useState("17:30"),[z,U]=b.useState("60"),[I,R]=b.useState(!0),[K,V]=b.useState(null),ee=Ze({queryKey:["departments"],queryFn:fi}),q=Ze({queryKey:["employees","all-for-quick-setup"],queryFn:()=>Ts({include_inactive:!0,status:"all"})}),Y=Ze({queryKey:["department-weekly-rules"],queryFn:()=>o_()}),$=Ze({queryKey:["department-shifts"],queryFn:()=>pc({active_only:!1})}),ie=l?Number(l):null,fe=Xe({mutationFn:({employeeId:P,departmentId:ce})=>nA(P,{department_id:ce}),onSuccess:P=>{s({variant:"success",title:"Departman atamas gncellendi",description:`${P.full_name} iin departman kayd gncellendi.`}),e.invalidateQueries({queryKey:["employees"]}),e.invalidateQueries({queryKey:["employee-device-overview"]})},onError:P=>{s({variant:"error",title:"Departman gncellenemedi",description:He(P,"lem baarsz.").message})}}),ue=Xe({mutationFn:c_,onSuccess:()=>{s({variant:"success",title:"Haftalk kural kaydedildi",description:"Seilen gn iin plan gncellendi."}),e.invalidateQueries({queryKey:["department-weekly-rules"]})},onError:P=>{s({variant:"error",title:"Haftalk kural kaydedilemedi",description:He(P,"lem baarsz.").message})}}),je=Xe({mutationFn:fd,onSuccess:()=>{s({variant:"success",title:"Vardiya kaydedildi",description:"Departman vardiyas eklendi/gncellendi."}),w(""),O("09:00"),A("17:30"),U("60"),R(!0),V(null),e.invalidateQueries({queryKey:["department-shifts"]})},onError:P=>{s({variant:"error",title:"Vardiya kaydedilemedi",description:He(P,"lem baarsz.").message})}}),X=Xe({mutationFn:u_,onSuccess:()=>{s({variant:"success",title:"Vardiya pasife alnd",description:"Vardiya kayd pasif duruma getirildi."}),K!==null&&(V(null),w(""),O("09:00"),A("17:30"),U("60"),R(!0)),e.invalidateQueries({queryKey:["department-shifts"]})},onError:P=>{s({variant:"error",title:"Vardiya pasife alnamad",description:He(P,"lem baarsz.").message})}}),oe=Xe({mutationFn:({shift:P,nextActive:ce})=>fd({id:P.id,department_id:P.department_id,name:P.name,start_time_local:P.start_time_local,end_time_local:P.end_time_local,break_minutes:P.break_minutes,is_active:ce}),onSuccess:(P,ce)=>{s({variant:"success",title:ce.nextActive?"Vardiya aktif edildi":"Vardiya pasife alnd",description:ce.nextActive?"Vardiya tekrar kullanma ald.":"Vardiya pasif duruma getirildi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:P=>{s({variant:"error",title:"Vardiya durumu gncellenemedi",description:He(P,"lem baarsz.").message})}}),Z=ee.data??[],M=q.data??[],ne=Y.data??[],Se=$.data??[],be=b.useMemo(()=>new Map(Z.map(P=>[P.id,P.name])),[Z]),D=b.useMemo(()=>ie?Se.filter(P=>P.department_id===ie):[],[ie,Se]),te=b.useMemo(()=>M.find(P=>String(P.id)===d),[M,d]);return b.useEffect(()=>{if(!ie){_({});return}const P=new Map(ne.filter(de=>de.department_id===ie).map(de=>[de.weekday,de])),ce={};for(const de of kv){const Ee=P.get(de.value);ce[de.value]={is_workday:Ee?.is_workday??!0,planned_minutes:String(Ee?.planned_minutes??540),break_minutes:String(Ee?.break_minutes??60)}}_(ce)},[ie,ne]),ee.isLoading||q.isLoading||Y.isLoading||$.isLoading?n.jsx(Gt,{}):ee.isError||q.isError||Y.isError||$.isError?n.jsx(wt,{message:"Hzl ayarlar verileri alnamad."}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"Hzl Ayarlar",description:"Sadece gerekli kurulum admlar: alan-departman atamas, haftalk gn kurallar ve vardiyalar."}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"1) alan - Departman Atamas"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"alan adn veya ID bilgisini yazarak personeli bulun, departmann hzlca gncelleyin."}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3",children:[n.jsx(hs,{label:"alan",employees:M,value:d,onChange:P=>{m(P);const ce=M.find(de=>String(de.id)===P);g(ce?.department_id?String(ce.department_id):"")},helperText:"Ad-soyad veya personel ID ile arayn.",className:"md:col-span-2"}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yeni departman",n.jsxs("select",{value:f,onChange:P=>g(P.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Atanmam"}),Z.map(P=>n.jsx("option",{value:P.id,children:P.name},P.id))]})]})]}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-3 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[n.jsxs("div",{children:[n.jsxs("p",{children:["Seili alan:"," ",te?`#${te.id} - ${te.full_name}`:"-"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Mevcut departman:"," ",te?.department_id?be.get(te.department_id)??"-":"Atanmam"]})]}),n.jsx("button",{type:"button",disabled:!te||fe.isPending,onClick:()=>{te&&fe.mutate({employeeId:te.id,departmentId:f?Number(f):null})},className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Departman Kaydet"})]})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"2) Departman Haftalk Gn Kurallar"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Her gn iin alma gn, planlanan dakika ve mola dakikasn belirleyin."}),n.jsx("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:l,onChange:P=>o(P.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seiniz"}),Z.map(P=>n.jsx("option",{value:P.id,children:P.name},P.id))]})]})}),ie?n.jsx("div",{className:"mt-4 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Gn"}),n.jsx("th",{className:"py-2",children:"alma Gn"}),n.jsx("th",{className:"py-2",children:"Planlanan Dakika"}),n.jsx("th",{className:"py-2",children:"Mola Dakika"}),n.jsx("th",{className:"py-2 text-right",children:"lem"})]})}),n.jsx("tbody",{children:kv.map(P=>{const ce=v[P.value]??{is_workday:!0,planned_minutes:"540",break_minutes:"60"};return n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:P.label}),n.jsx("td",{className:"py-2",children:n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:ce.is_workday,onChange:de=>_(Ee=>({...Ee,[P.value]:{...ce,is_workday:de.target.checked}}))}),"alma gn"]})}),n.jsx("td",{className:"py-2",children:n.jsx("input",{value:ce.planned_minutes,onChange:de=>_(Ee=>({...Ee,[P.value]:{...ce,planned_minutes:de.target.value}})),className:"w-full rounded-lg border border-slate-300 px-3 py-2"})}),n.jsx("td",{className:"py-2",children:n.jsx("input",{value:ce.break_minutes,onChange:de=>_(Ee=>({...Ee,[P.value]:{...ce,break_minutes:de.target.value}})),className:"w-full rounded-lg border border-slate-300 px-3 py-2"})}),n.jsx("td",{className:"py-2 text-right",children:n.jsx("button",{type:"button",disabled:ue.isPending,onClick:()=>{const de=Number(ce.planned_minutes),Ee=Number(ce.break_minutes);if(!Number.isFinite(de)||de<0){s({variant:"error",title:"Geersiz planlanan dakika",description:`${P.label} iin say giriniz.`});return}if(!Number.isFinite(Ee)||Ee<0){s({variant:"error",title:"Geersiz mola dakikas",description:`${P.label} iin say giriniz.`});return}ue.mutate({department_id:ie,weekday:P.value,is_workday:ce.is_workday,planned_minutes:Math.trunc(de),break_minutes:Math.trunc(Ee)})},className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Kaydet"})})]},P.value)})})]})}):n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Haftalk kural dzenlemek iin departman sein."})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"3) Departman Vardiyalar"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Bir departman iin birden fazla vardiya tanmlayabilirsiniz (r. 10:00-18:00 ve 14:00-22:00)."}),ie?n.jsxs(n.Fragment,{children:[n.jsxs("form",{className:"mt-3 grid gap-3 md:grid-cols-5",onSubmit:P=>{if(P.preventDefault(),!S.trim()){s({variant:"error",title:"Vardiya ad zorunlu",description:"Ltfen vardiya ad girin."});return}const ce=Number(z);if(!Number.isFinite(ce)||ce<0){s({variant:"error",title:"Geersiz mola dakikas",description:"Mola dakikasn say olarak girin."});return}je.mutate({id:K??void 0,department_id:ie,name:S.trim(),start_time_local:T,end_time_local:k,break_minutes:Math.trunc(ce),is_active:I})},children:[K?n.jsxs("div",{className:"md:col-span-5 rounded-lg border border-brand-200 bg-brand-50 px-3 py-2 text-xs font-medium text-brand-700",children:["Dzenleme modu: #",K]}):null,n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya ad",n.jsx("input",{value:S,onChange:P=>w(P.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"rn: Sabah 10-18"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang",n.jsx("input",{type:"time",value:T,onChange:P=>O(P.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti",n.jsx("input",{type:"time",value:k,onChange:P=>A(P.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola dakika",n.jsx("input",{value:z,onChange:P=>U(P.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("div",{className:"flex items-end gap-3 pb-1",children:[n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:I,onChange:P=>R(P.target.checked)}),"Aktif"]}),n.jsx("button",{type:"submit",disabled:je.isPending,className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:je.isPending?"Kaydediliyor...":K?"Vardiya Gncelle":"Vardiya Kaydet"}),K?n.jsx("button",{type:"button",onClick:()=>{V(null),w(""),O("09:00"),A("17:30"),U("60"),R(!0)},className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Vazge"}):null]})]}),n.jsx("div",{className:"mt-4 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Saat Aral"}),n.jsx("th",{className:"py-2",children:"Mola"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2 text-right",children:"Aksiyon"})]})}),n.jsx("tbody",{children:D.map(P=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:P.name}),n.jsxs("td",{className:"py-2",children:[P.start_time_local," - ",P.end_time_local]}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:P.break_minutes})}),n.jsx("td",{className:"py-2",children:P.is_active?"Aktif":"Pasif"}),n.jsx("td",{className:"py-2 text-right",children:n.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{V(P.id),w(P.name),O(P.start_time_local),A(P.end_time_local),U(String(P.break_minutes)),R(P.is_active)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Dzenle"}),P.is_active?n.jsx("button",{type:"button",disabled:X.isPending||oe.isPending,onClick:()=>{window.confirm("Bu vardiya pasife alnsn m?")&&X.mutate(P.id)},className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:"Pasife Al"}):n.jsx("button",{type:"button",disabled:oe.isPending||X.isPending,onClick:()=>oe.mutate({shift:P,nextActive:!0}),className:"rounded-lg border border-emerald-300 px-3 py-1 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:"Aktif Et"})]})})]},P.id))})]})}),D.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Seilen departman iin vardiya bulunmuyor."}):null]}):n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Vardiya dzenlemek iin departman sein."})]})]})}const Tv=$a({name:ia().min(2,"Bolge adi en az 2 karakter olmali.").max(255),is_active:Sd()});function Cv(e){return un.isAxiosError(e)&&e.response?.status===409?"Bu bolge adi zaten mevcut. Farkli bir ad girin.":He(e,"Bolge islemi basarisiz.").message}function mz(){const e=la(),{pushToast:s}=oa(),[l,o]=b.useState(""),[d,m]=b.useState(!0),[f,g]=b.useState(""),[v,_]=b.useState(!0),[S,w]=b.useState(null),[T,O]=b.useState(""),[k,A]=b.useState(!0),[z,U]=b.useState(null),I=Ze({queryKey:["regions",v],queryFn:()=>Vl({include_inactive:v})}),R=Xe({mutationFn:BC,onSuccess:Y=>{o(""),m(!0),U(null),s({variant:"success",title:"Bolge olusturuldu",description:`${Y.name} basariyla eklendi.`}),e.invalidateQueries({queryKey:["regions"]})},onError:Y=>{const $=Cv(Y);U($),s({variant:"error",title:"Bolge olusturulamadi",description:$})}}),K=Xe({mutationFn:({regionId:Y,payload:$})=>UC(Y,$),onSuccess:Y=>{U(null),w(null),O(""),A(!0),s({variant:"success",title:"Bolge guncellendi",description:`${Y.name} guncellendi.`}),e.invalidateQueries({queryKey:["regions"]})},onError:Y=>{const $=Cv(Y);U($),s({variant:"error",title:"Bolge guncellenemedi",description:$})}}),V=Y=>{Y.preventDefault(),U(null);const $=Tv.safeParse({name:l,is_active:d});if(!$.success){const ie=$.error.issues[0]?.message??"Bolge formunu kontrol edin.";U(ie);return}R.mutate($.data)},ee=Y=>{if(Y.preventDefault(),U(null),!S)return;const $=Tv.safeParse({name:T,is_active:k});if(!$.success){const ie=$.error.issues[0]?.message??"Bolge formunu kontrol edin.";U(ie);return}K.mutate({regionId:S,payload:$.data})},q=b.useMemo(()=>{const Y=I.data??[],$=f.trim().toLowerCase();return $?Y.filter(ie=>ie.name.toLowerCase().includes($)):Y},[I.data,f]);return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"Bolgeler",description:"Sube/sehir bazli yonetim icin bolge kayitlarini yonetin."}),n.jsxs(Le,{children:[n.jsxs("form",{onSubmit:V,className:"grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Bolge adi",n.jsx("input",{value:l,onChange:Y=>o(Y.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Istanbul Avrupa"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:d,onChange:Y=>m(Y.target.checked)}),"Aktif"]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"submit",disabled:R.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:R.isPending?"Kaydediliyor...":"Bolge Ekle"})})]}),z?n.jsx("p",{className:"form-validation mt-2",children:z}):null]}),S?n.jsxs(Le,{children:[n.jsxs("form",{onSubmit:ee,className:"grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Bolge adi",n.jsx("input",{value:T,onChange:Y=>O(Y.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:k,onChange:Y=>A(Y.target.checked)}),"Aktif"]}),n.jsxs("div",{className:"flex items-end gap-2",children:[n.jsx("button",{type:"submit",disabled:K.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:K.isPending?"Guncelleniyor...":"Kaydet"}),n.jsx("button",{type:"button",onClick:()=>{w(null),O(""),A(!0),U(null)},className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),z?n.jsx("p",{className:"form-validation mt-2",children:z}):null]}):null,I.isLoading?n.jsx(Gt,{}):null,I.isError?n.jsx(wt,{message:"Bolge listesi alinamadi."}):null,!I.isLoading&&!I.isError?n.jsxs(Le,{children:[n.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-3 md:items-end",children:[n.jsx(mi,{value:f,onChange:g,placeholder:"Bolge adina gore ara..."}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:v,onChange:Y=>_(Y.target.checked)}),"Pasif bolgeleri goster"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Bolge ID"}),n.jsx("th",{className:"py-2",children:"Bolge Adi"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Islem"})]})}),n.jsx("tbody",{children:q.map(Y=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:Y.id}),n.jsx("td",{className:"py-2",children:Y.name}),n.jsx("td",{className:"py-2",children:n.jsx(nr,{value:Y.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2",children:n.jsx("button",{type:"button",onClick:()=>{w(Y.id),O(Y.name),A(Y.is_active),U(null)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"})})]},Y.id))})]})}),q.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Arama kriterine uygun bolge bulunamadi."}):null]}):null]})}function Ir(e){return new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"medium"}).format(new Date(e))}function hz(e){return e==="SENT"?"bg-emerald-100 text-emerald-700":e==="FAILED"?"bg-rose-100 text-rose-700":e==="CANCELED"?"bg-slate-200 text-slate-700":e==="SENDING"?"bg-amber-100 text-amber-700":"bg-sky-100 text-sky-700"}function fz(e){return e==="SENT"?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}function Av(e){return e==="admins"?"ADMIN":e==="employees"?"CALISAN":e==="both"?"HER IKISI":e.toUpperCase()}function pz(e){return e==="DAILY_REPORT_JOB_MISSING"?"Job olusmamis":e==="DAILY_REPORT_ARCHIVE_MISSING"?"Arsiv olusmamis":e==="DAILY_REPORT_JOB_STUCK"?"Job takilmis":e==="DAILY_REPORT_JOB_FAILED"?"Job hatali":e==="DAILY_REPORT_DELIVERY_EMPTY"?"Teslimat bos":e==="DAILY_REPORT_TARGET_ZERO"?"Hedef 0":e==="DAILY_REPORT_ARCHIVE_MISMATCH"?"Arsiv eslesmiyor":e==="DAILY_REPORT_HEALTH_QUERY_FAILED"?"Health sorgusu hatali":e}function xz(e){return e?(e.alarms??[]).length>0?"border-rose-200 bg-rose-50 text-rose-800":!e.job_exists||!e.archive_exists?"border-amber-200 bg-amber-50 text-amber-800":e.status==="SENT"&&e.delivery_succeeded?"border-emerald-200 bg-emerald-50 text-emerald-800":e.status==="FAILED"?"border-rose-200 bg-rose-50 text-rose-800":"border-sky-200 bg-sky-50 text-sky-800":"border-slate-200 bg-slate-50 text-slate-700"}function gz(e,s){const l=window.URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=s,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l)}const os=35,T_="pf_admin_push_vapid_public_key";async function yz(e){if(!("serviceWorker"in navigator)||!("PushManager"in window))throw new Error("Bu tarayici push bildirimlerini desteklemiyor.");if((Notification.permission==="granted"?"granted":await Notification.requestPermission())!=="granted")throw new Error("Bildirim izni verilmedi.");const o=await navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"});let d=await o.pushManager.getSubscription();const m=window.localStorage.getItem(T_);if(d&&m&&m!==e){try{await d.unsubscribe()}catch{}d=null}return d||(d=await o.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pp(e)})),d}function vz(){const e=la(),{pushToast:s}=oa(),{user:l}=Yl(),[o,d]=vd(),[m,f]=b.useState("Puantaj Bildirimi"),[g,v]=b.useState(""),[_,S]=b.useState(""),[w,T]=b.useState("employees"),[O,k]=b.useState(15),[A,z]=b.useState(""),[U,I]=b.useState(1),[R,K]=b.useState(1),[V,ee]=b.useState(""),[q,Y]=b.useState(""),[$,ie]=b.useState([]),[fe,ue]=b.useState([]),[je,X]=b.useState(null),[oe,Z]=b.useState(!1),[M,ne]=b.useState(""),[Se,be]=b.useState(""),[D,te]=b.useState(""),[P,ce]=b.useState(1),[de,Ee]=b.useState(""),[De,Ge]=b.useState(null),[pe,Ke]=b.useState(""),[_e,lt]=b.useState(""),[dt,ze]=b.useState("Puantaj test email bildirimi"),[ot,bt]=b.useState("Bu mesaj admin bildirim email testidir."),It=Ze({queryKey:["employees","notify"],queryFn:()=>Ts({status:"active"})}),Bt=Ze({queryKey:["admin-users","notify"],queryFn:r_}),rn=Ze({queryKey:["admin-push-config"],queryFn:Pf}),ae=Ze({queryKey:["admin-daily-report-health"],queryFn:EA,refetchInterval:3e4,retry:!1}),ke=Ze({queryKey:["admin-notification-email-targets"],queryFn:kA,retry:!1}),Be=Ze({queryKey:["admin-push-self-check"],queryFn:AA,refetchInterval:15e3,retry:!1}),at=Ze({queryKey:["notification-jobs",A,U],queryFn:()=>bA({status:A||void 0,offset:(U-1)*os,limit:os}),refetchInterval:1e4}),se=Ze({queryKey:["notification-delivery-logs",R],queryFn:()=>_A({offset:(R-1)*os,limit:os}),refetchInterval:15e3}),Ie=Ze({queryKey:["notify-subs-emp"],queryFn:()=>jA({}),refetchInterval:15e3}),_t=Ze({queryKey:["notify-subs-admin"],queryFn:()=>SA({}),refetchInterval:15e3}),Dt=Ze({queryKey:["daily-archives",M,Se,D,P],queryFn:()=>DA({offset:(P-1)*os,limit:os,start_date:M||void 0,end_date:Se||void 0,employee_query:D.trim()||void 0})}),Rt=b.useMemo(()=>{const Q=V.trim().toLowerCase();return Q?(It.data??[]).filter(Ye=>`${Ye.id} ${Ye.full_name}`.toLowerCase().includes(Q)):It.data??[]},[It.data,V]),ft=b.useMemo(()=>{const Q=q.trim().toLowerCase();return Q?(Bt.data??[]).filter(Ye=>`${Ye.id} ${Ye.username}`.toLowerCase().includes(Q)):Bt.data??[]},[Bt.data,q]),Ut=b.useMemo(()=>{const Q=de.trim().toLowerCase(),Ye=se.data?.items??[];return Q?Ye.filter(Pt=>[Pt.recipient_name??"",String(Pt.recipient_id??""),String(Pt.device_id??""),Pt.ip??"",Pt.status,Pt.target,Pt.title??"",Pt.sender_admin].join(" ").toLowerCase().includes(Q)):Ye},[se.data,de]),Ne=b.useMemo(()=>Ut.filter(Q=>Q.status==="SENT").length,[Ut]),Je=b.useMemo(()=>Ut.filter(Q=>Q.status==="FAILED").length,[Ut]),nt=b.useMemo(()=>Ut.find(Q=>Q.audit_id===De)??null,[Ut,De]),Nt=at.data?.items??[],Ft=at.data?.total??0,jt=Math.max(1,Math.ceil(Ft/os)),fn=Ft===0?0:(U-1)*os+1,Jn=Nt.length===0?0:fn+Nt.length-1,ln=se.data?.total??0,xt=Math.max(1,Math.ceil(ln/os)),Vt=ln===0?0:(R-1)*os+1,Tn=Ut.length===0?0:Vt+Ut.length-1,Rn=Dt.data?.items??[],Cn=Dt.data?.total??0,Lt=Math.max(1,Math.ceil(Cn/os)),va=Cn===0?0:(P-1)*os+1,An=Rn.length===0?0:va+Rn.length-1,Hn=(_t.data??[]).length,Mn=Hn>0,W=(l?.username??"").trim().toLowerCase(),Ve=typeof l?.admin_user_id=="number"&&l.admin_user_id>0?l.admin_user_id:null,zt=b.useMemo(()=>{const Q=_t.data??[];let Ye=0,Pt=0,_a=0;for(const Cs of Q){const As=Ve!==null&&Cs.admin_user_id===Ve,vt=W.length>0&&(Cs.admin_username||"").trim().toLowerCase()===W;As&&(Ye+=1),vt&&(Pt+=1),(As||vt)&&(_a+=1)}return{total:_a,byId:Ye,byUsername:Pt}},[_t.data,Ve,W]),ba=Be.data,Oe=ba?.self_check_ok!==!1?ba:void 0,pn=Oe?.active_claims_for_actor??zt.total,ca=Oe?.active_claims_for_actor_by_id??zt.byId,Wn=Oe?.active_claims_for_actor_by_username??zt.byUsername,Yt=pn>0,it=ae.data,ea=it?.alarms?.length??0,F=it?.status??(it?.job_exists?"BILINMIYOR":"YOK"),Ue=ea===0&&!!it?.job_exists&&!!it?.archive_exists&&it?.status==="SENT"&&!!it?.delivery_succeeded,ut=ke.data?.active_recipients??[],Ln=ke.data?.active_count??0;b.useEffect(()=>{ke.data&&Ke(Q=>Q.trim().length>0?Q:ut.join(`
`))},[ke.data,ut]);const zn=Xe({mutationFn:zA,onSuccess:Q=>{X(Q),s({variant:"success",title:"Davet hazir",description:"Link admin cihaza gonderildi."}),navigator.clipboard.writeText(Q.invite_url)},onError:Q=>s({variant:"error",title:"Davet hatasi",description:He(Q,"Davet olusturulamadi").message})}),B=Xe({mutationFn:MA,onSuccess:Q=>{Q.total_targets<=0||Q.sent<=0?s({variant:"error",title:"Self-test basarisiz",description:`Hedef: ${Q.total_targets} | Gonderilen: ${Q.sent} | Hata: ${Q.failed}`}):s({variant:"success",title:"Self-test bildirimi gonderildi",description:`Hedef: ${Q.total_targets} | Gonderilen: ${Q.sent}`}),e.invalidateQueries({queryKey:["admin-push-self-check"]}),e.invalidateQueries({queryKey:["notification-delivery-logs"]})},onError:Q=>{const Ye=He(Q,"Self-test bildirimi gonderilemedi.");s({variant:"error",title:"Self-test hatasi",description:Ye.message})}}),Fe=Xe({mutationFn:async()=>{const Q=await Pf();if(!Q.enabled||!Q.vapid_public_key)throw new Error("Push bildirim servisi yapilandirilmamis.");const Ye=await yz(Q.vapid_public_key),Pt=await m_({subscription:Ye.toJSON(),send_test:!0});return window.localStorage.setItem(T_,Q.vapid_public_key),Pt},onSuccess:Q=>{s({variant:Q.test_push_ok?"success":"error",title:Q.test_push_ok?"Heal tamamlandi":"Heal tamamlandi ama test hatali",description:Q.test_push_ok?`Abonelik yenilendi (#${Q.subscription_id}) ve test bildirimi gonderildi.`:`Abonelik yenilendi (#${Q.subscription_id}) ancak test bildirimi hatali.`}),e.invalidateQueries({queryKey:["admin-push-self-check"]}),e.invalidateQueries({queryKey:["notify-subs-admin"]}),e.invalidateQueries({queryKey:["notification-delivery-logs"]})},onError:Q=>{if(Q instanceof Error&&!("response"in Q)){s({variant:"error",title:"Heal hatasi",description:Q.message});return}const Ye=He(Q,"Cihaz heal islemi basarisiz oldu.");s({variant:"error",title:"Heal hatasi",description:Ye.message})}}),St=Xe({mutationFn:async()=>{const Q=Array.from(new Set(pe.split(/[\n,;]+/g).map(Ye=>Ye.trim().toLowerCase()).filter(Ye=>Ye.length>0)));return TA({emails:Q})},onSuccess:Q=>{Ke((Q.active_recipients??[]).join(`
`)),s({variant:"success",title:"Mail alicilari guncellendi",description:`Aktif alici: ${Q.active_count}`}),e.invalidateQueries({queryKey:["admin-notification-email-targets"]})},onError:Q=>{const Ye=He(Q,"Mail alicilari kaydedilemedi.");s({variant:"error",title:"Kayit hatasi",description:Ye.message})}}),Pn=Xe({mutationFn:async()=>{const Q=_e.trim();return CA({recipients:Q?[Q]:void 0,subject:dt.trim()||void 0,message:ot.trim()||void 0})},onSuccess:Q=>{if(!Q.ok){s({variant:"error",title:"Test mail gonderilemedi",description:`${Q.error??Q.mode} | Alici: ${Q.recipients.join(", ")||"-"}`});return}s({variant:"success",title:"Test mail gonderildi",description:`Alici: ${Q.recipients.join(", ")} | Sent: ${Q.sent}`})},onError:Q=>{const Ye=He(Q,"Test mail gonderilemedi.");s({variant:"error",title:"Test mail hatasi",description:Ye.message})}}),Ia=Xe({mutationFn:h_,onSuccess:(Q,Ye)=>{const Pt=Ye.target==="admins"||Ye.target==="both";Q.total_targets<=0?s({variant:"error",title:"Bildirim gonderilemedi",description:"Hedef 0. Aktif abonelik yok; once cihaz claim edin."}):Q.sent<=0?s({variant:"error",title:"Bildirim gonderilemedi",description:`Hedef: ${Q.total_targets} / Gonderilen: ${Q.sent} / Hata: ${Q.failed}`}):(s({variant:"success",title:"Bildirim gonderildi",description:`Hedef: ${Q.total_targets} / Gonderilen: ${Q.sent}`}),Pt&&!Yt&&s({variant:"error",title:"Bu hesapta claim eksik",description:"Admin hedefli gonderim yapildi ancak bu hesapta aktif claim olmadigi icin sana dusmeyebilir."})),Pt&&Q.admin_target_missing&&s({variant:"error",title:"Admin hedefi 0",description:"Calisan bildirimi gitmis olabilir ama admin hedefinde aktif abonelik yok. Admin claim zorunlu."}),e.invalidateQueries({queryKey:["notification-jobs"]}),e.invalidateQueries({queryKey:["notification-delivery-logs"]}),e.invalidateQueries({queryKey:["admin-push-self-check"]})},onError:Q=>s({variant:"error",title:"Gonderim hatasi",description:He(Q,"Bildirim gonderilemedi").message})}),dn=Xe({mutationFn:NA,onSuccess:()=>{e.invalidateQueries({queryKey:["notification-jobs"]})}}),gs=Xe({mutationFn:LA,onSuccess:(Q,Ye)=>{const Pt=(Dt.data?.items??[]).find(_a=>_a.id===Ye);gz(Q,Pt?.file_name??`arsiv-${Ye}.xlsx`)}}),ir=Xe({mutationFn:Q=>UA(Q),onSuccess:Q=>{Q.total_targets<=0||Q.sent<=0?s({variant:"error",title:"Arsiv bildirimi gonderilemedi",description:`Hedef: ${Q.total_targets} | Gonderilen: ${Q.sent} | Hata: ${Q.failed}. Aktif admin cihazi claim edilmeli.`}):(s({variant:"success",title:"Arsiv bildirimi gonderildi",description:`Hedef: ${Q.total_targets} | Gonderilen: ${Q.sent} | Hata: ${Q.failed}`}),Yt||s({variant:"error",title:"Bu hesapta claim eksik",description:"Bildirim gitti ama bu admin hesabinda aktif cihaz claim olmadigi icin sana dusmeyebilir."})),e.invalidateQueries({queryKey:["notification-jobs"]}),e.invalidateQueries({queryKey:["admin-daily-report-health"]})},onError:Q=>{const Ye=He(Q,"Arsiv bildirimi gonderilemedi.");Ye.code==="ADMIN_PUSH_SUBSCRIPTION_REQUIRED"?s({variant:"error",title:"Admin hedefi 0",description:"Aktif admin push aboneligi yok. Once admin cihazini claim edip tekrar deneyin."}):s({variant:"error",title:"Arsiv bildirimi basarisiz",description:Ye.message}),e.invalidateQueries({queryKey:["admin-daily-report-health"]})}});return b.useEffect(()=>{if(oe)return;const Q=o.get("archive_id");if(!Q)return;const Ye=Number(Q);if(!Number.isInteger(Ye)||Ye<=0){Z(!0);return}if(!(Dt.data?.items??[]).find(Cs=>Cs.id===Ye))return;Z(!0),gs.mutate(Ye);const _a=new URLSearchParams(o);_a.delete("archive_id"),d(_a,{replace:!0})},[oe,Dt.data,gs,o,d]),b.useEffect(()=>{I(1)},[A]),b.useEffect(()=>{at.data&&I(Q=>Q<1?1:Q>jt?jt:Q)},[at.data,jt]),b.useEffect(()=>{K(1)},[de]),b.useEffect(()=>{se.data&&K(Q=>Q<1?1:Q>xt?xt:Q)},[se.data,xt]),b.useEffect(()=>{ce(1)},[M,Se,D]),b.useEffect(()=>{if(Ut.length===0){Ge(null);return}(De===null||!Ut.some(Q=>Q.audit_id===De))&&Ge(Ut[0].audit_id)},[Ut,De]),b.useEffect(()=>{Dt.data&&ce(Q=>Q<1?1:Q>Lt?Lt:Q)},[Dt.data,Lt]),n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"Bildirim Merkezi",description:"Push, claim daveti, job yonetimi ve gunluk Excel arsivi."}),n.jsxs(Le,{children:[n.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Admin davet suresi (dk)",n.jsx("input",{type:"number",min:1,max:1440,value:O,onChange:Q=>k(Number(Q.target.value||15)),className:"mt-1 w-40 rounded border border-slate-300 px-3 py-2"})]}),n.jsx("button",{type:"button",onClick:()=>zn.mutate({expires_in_minutes:O}),className:"rounded bg-brand-600 px-4 py-2 text-sm font-semibold text-white",children:"Admin cihaz claim linki uret"}),n.jsxs("span",{className:"text-xs text-slate-500",children:["Push: ",rn.data?.enabled?"Aktif":"Pasif"]})]}),n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Link otomatik kopyalanir. Guvenlik icin kisa sure onerilir (ornegin 10-30 dk). Ekran: /admin-panel/device-claim?token=..."}),je?n.jsxs("div",{className:"mt-2 rounded border border-emerald-200 bg-emerald-50 p-2 text-xs text-emerald-800",children:[n.jsxs("p",{children:["Token: ",je.token]}),n.jsxs("p",{className:"break-all",children:["Link: ",je.invite_url]}),n.jsxs("p",{children:["Bitis: ",Ir(je.expires_at)]})]}):null]}),n.jsx(Le,{children:n.jsxs("form",{className:"space-y-3",onSubmit:Q=>{Q.preventDefault(),Ia.mutate({title:m.trim(),message:g.trim(),password:_.trim(),target:w,employee_ids:w!=="admins"&&$.length>0?$:void 0,admin_user_ids:w!=="employees"&&fe.length>0?fe:void 0})},children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Manuel Push Gonder"}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[n.jsx("input",{value:m,onChange:Q=>f(Q.target.value),className:"rounded border border-slate-300 px-3 py-2",placeholder:"Baslik"}),n.jsx("input",{type:"password",value:_,onChange:Q=>S(Q.target.value),className:"rounded border border-slate-300 px-3 py-2",placeholder:"Admin sifresi"}),n.jsxs("select",{value:w,onChange:Q=>T(Q.target.value),className:"rounded border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"employees",children:"Calisanlara"}),n.jsx("option",{value:"admins",children:"Adminlere"}),n.jsx("option",{value:"both",children:"Her ikisine"})]})]}),n.jsx("textarea",{value:g,onChange:Q=>v(Q.target.value),rows:3,className:"w-full rounded border border-slate-300 px-3 py-2",placeholder:"Mesaj"}),w!=="admins"?n.jsxs("div",{children:[n.jsx(mi,{value:V,onChange:ee,placeholder:"Calisan filtrele..."}),n.jsx("div",{className:"mt-2 max-h-36 overflow-y-auto rounded border border-slate-200 p-2 text-sm",children:Rt.map(Q=>n.jsxs("label",{className:"flex items-center justify-between py-1",children:[n.jsxs("span",{children:["#",Q.id," - ",Q.full_name]}),n.jsx("input",{type:"checkbox",checked:$.includes(Q.id),onChange:()=>ie(Ye=>Ye.includes(Q.id)?Ye.filter(Pt=>Pt!==Q.id):[...Ye,Q.id])})]},Q.id))})]}):null,w!=="employees"?n.jsxs("div",{children:[n.jsx(mi,{value:q,onChange:Y,placeholder:"Admin filtrele..."}),n.jsx("div",{className:"mt-2 max-h-36 overflow-y-auto rounded border border-slate-200 p-2 text-sm",children:ft.map(Q=>n.jsxs("label",{className:"flex items-center justify-between py-1",children:[n.jsxs("span",{children:["#",Q.id," - ",Q.username]}),n.jsx("input",{type:"checkbox",checked:fe.includes(Q.id),onChange:()=>ue(Ye=>Ye.includes(Q.id)?Ye.filter(Pt=>Pt!==Q.id):[...Ye,Q.id])})]},Q.id))})]}):null,n.jsx("button",{type:"submit",className:"rounded bg-brand-600 px-4 py-2 text-sm font-semibold text-white",children:"Bildirimi gonder"})]})}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Bildirim Isleri"}),n.jsxs("div",{className:"mb-2 mt-2 flex gap-2",children:[n.jsxs("select",{value:A,onChange:Q=>z(Q.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"Tumu"}),n.jsx("option",{value:"PENDING",children:"PENDING"}),n.jsx("option",{value:"SENDING",children:"SENDING"}),n.jsx("option",{value:"SENT",children:"SENT"}),n.jsx("option",{value:"FAILED",children:"FAILED"}),n.jsx("option",{value:"CANCELED",children:"CANCELED"})]}),n.jsx("button",{type:"button",onClick:()=>{at.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Yenile"})]}),at.isLoading?n.jsx(Gt,{label:"Yukleniyor..."}):null,at.isError?n.jsx(wt,{message:"Job listesi alinamadi."}):null,!at.isLoading&&!at.isError?n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:[n.jsxs("span",{children:["Gosterilen satir: ",fn,"-",Jn," / ",Ft]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>I(Q=>Math.max(1,Q-1)),disabled:U<=1,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Onceki"}),n.jsxs("span",{children:["Sayfa ",U," / ",jt]}),n.jsx("button",{type:"button",onClick:()=>I(Q=>Math.min(jt,Q+1)),disabled:U>=jt,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}):null,n.jsx("div",{className:"mt-2 max-h-[420px] overflow-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"sticky top-0 bg-white",children:n.jsxs("tr",{className:"text-xs uppercase text-slate-500",children:[n.jsx("th",{className:"px-2 py-2",children:"Sira"}),n.jsx("th",{className:"px-2 py-2",children:"ID"}),n.jsx("th",{className:"px-2 py-2",children:"Tur"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Planlanan"}),n.jsx("th",{className:"px-2 py-2",children:"Islem"})]})}),n.jsx("tbody",{children:Nt.map((Q,Ye)=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-2 py-2 text-slate-500",children:fn+Ye}),n.jsx("td",{className:"px-2 py-2",children:Q.id}),n.jsx("td",{className:"px-2 py-2",children:Q.job_type}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("span",{className:`rounded px-2 py-1 text-xs ${hz(Q.status)}`,children:Q.status})}),n.jsx("td",{className:"px-2 py-2",children:Ir(Q.scheduled_at_utc)}),n.jsx("td",{className:"px-2 py-2",children:Q.status==="PENDING"||Q.status==="SENDING"?n.jsx("button",{type:"button",className:"rounded border border-rose-300 px-2 py-1 text-xs text-rose-700",onClick:()=>dn.mutate(Q.id),children:"Iptal"}):"-"})]},Q.id))})]})}),!at.isLoading&&!at.isError&&Ft===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Filtreye uygun bildirim isi bulunamadi."}):null]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Abonelik Ozeti"}),n.jsxs("div",{className:"grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Calisan abonelik: ",(Ie.data??[]).length]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Admin abonelik: ",(_t.data??[]).length]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Arsiv dosyasi: ",Cn]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Teslimat log satiri: ",ln]})]}),Mn?null:n.jsx("p",{className:"mt-2 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:'Aktif admin push aboneligi yok. "Admin cihaz claim linki uret" adimini tamamlamadan bildirim gonderilemez.'})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Admin Push Self-Check"}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Login admin: ",n.jsx("strong",{children:l?.username??"-"})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Login admin ID: ",n.jsx("strong",{children:l?.admin_user_id??"-"})]}),n.jsxs("div",{className:`rounded border p-3 text-sm ${Yt?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-rose-200 bg-rose-50 text-rose-800"}`,children:["Bu hesap claim: ",n.jsx("strong",{children:pn})," (id:",ca," / user:",Wn,")"]}),n.jsxs("div",{className:`rounded border p-3 text-sm ${Oe?.push_enabled??rn.data?.enabled?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-rose-200 bg-rose-50 text-rose-800"}`,children:["Push config:"," ",n.jsx("strong",{children:Oe?.push_enabled??rn.data?.enabled?"Aktif":"Pasif"})]})]}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Toplam aktif admin claim: ",n.jsx("strong",{children:Oe?.active_total_subscriptions??Hn})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Son claim gorulme:"," ",n.jsx("strong",{children:Oe?.latest_claim_seen_at?Ir(Oe.latest_claim_seen_at):"-"})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Claim saglik:"," ",n.jsxs("strong",{children:["saglikli ",Oe?.active_claims_healthy??0," / ","hatali ",Oe?.active_claims_with_error??0," / ","stale ",Oe?.active_claims_stale??0]})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>B.mutate(),disabled:B.isPending||Fe.isPending,className:"rounded border border-brand-300 px-3 py-2 text-sm text-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:B.isPending?"Self-test gonderiliyor...":"Kendime test bildirimi gonder"}),n.jsx("button",{type:"button",onClick:()=>Fe.mutate(),disabled:Fe.isPending||B.isPending,className:"rounded border border-emerald-300 px-3 py-2 text-sm text-emerald-700 disabled:cursor-not-allowed disabled:opacity-60",children:Fe.isPending?"Heal calisiyor...":"Bu cihazi heal et"})]})})]}),n.jsxs("div",{className:"mt-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:["Son self-test:"," ",n.jsx("strong",{children:Oe?.last_self_test_at?Ir(Oe.last_self_test_at):"-"})," | ","Durum:"," ",n.jsx("strong",{children:Oe?.last_self_test_success===null?"-":Oe?.last_self_test_success?"BASARILI":"HATALI"})," | ","Hedef:"," ",n.jsx("strong",{children:Oe?.last_self_test_total_targets??"-"})," | ","Gonderilen:"," ",n.jsx("strong",{children:Oe?.last_self_test_sent??"-"})," | ","Hata:"," ",n.jsx("strong",{children:Oe?.last_self_test_failed??"-"})]}),Be.isError?n.jsx("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:"Self-check verisi alinamadi. Fallback olarak abonelik listesi kullaniliyor."}):null,Be.data?.self_check_ok===!1?n.jsxs("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:["Self-check degradasyona dustu: ",Be.data.self_check_error||"bilinmeyen hata",". Fallback olarak abonelik listesi kullaniliyor."]}):null,Yt?null:n.jsx("p",{className:"mt-2 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:"Bu admin hesabinda aktif cihaz claim gorunmuyor. Bildirim almak icin telefonda claim linkini acip izin adimini tamamla."}),Oe?.latest_claim_error?n.jsxs("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:["Son claim hatasi: ",Oe.latest_claim_error]}):null]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Mail Bildirim Ayarlari"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Gece gunluk Excel arsiv job'unda mail gonderimi best-effort calisir; push teslimati onceliklidir."}),n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-3",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Aktif mail alicisi: ",n.jsx("strong",{children:Ln})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Son health email: ",n.jsx("strong",{children:it?.email_sent??0})]}),n.jsx("button",{type:"button",onClick:()=>{ke.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Mail listesini yenile"})]}),ke.isError?n.jsx("p",{className:"mt-2 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:"Mail hedefleri yuklenemedi."}):null,Ln<=0?n.jsx("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:"Aktif mail alicisi yok. Mail kanali devre disi kalir, push bildirimi calismaya devam eder."}):null,n.jsxs("label",{className:"mt-3 block text-xs text-slate-600",children:["Alici listesi (satir satir veya virgul ile)",n.jsx("textarea",{value:pe,onChange:Q=>Ke(Q.target.value),rows:5,placeholder:`ornek@domain.com
destek@domain.com`,className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>St.mutate(),disabled:St.isPending,className:"rounded border border-brand-300 bg-brand-50 px-3 py-2 text-sm text-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:St.isPending?"Kaydediliyor...":"Mail alicilarini kaydet"}),n.jsx("button",{type:"button",onClick:()=>Ke(ut.join(`
`)),className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Listeyi geri al"})]}),n.jsxs("div",{className:"mt-4 rounded border border-slate-200 bg-slate-50 p-3",children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Test mail gonder"}),n.jsx("p",{className:"mt-1 text-xs text-slate-600",children:"Alici bos birakilirsa kayitli tum aktif adreslere test mail gonderilir."}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-3",children:[n.jsxs("label",{className:"text-xs text-slate-600",children:["Test alici (opsiyonel)",n.jsx("input",{value:_e,onChange:Q=>lt(Q.target.value),placeholder:"tekbir@adres.com",className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsxs("label",{className:"text-xs text-slate-600 md:col-span-2",children:["Konu",n.jsx("input",{value:dt,onChange:Q=>ze(Q.target.value),className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]})]}),n.jsxs("label",{className:"mt-2 block text-xs text-slate-600",children:["Mesaj",n.jsx("textarea",{value:ot,onChange:Q=>bt(Q.target.value),rows:3,className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsx("button",{type:"button",onClick:()=>Pn.mutate(),disabled:Pn.isPending,className:"mt-2 rounded border border-slate-300 px-3 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-60",children:Pn.isPending?"Test gonderiliyor...":"Test mail gonder"})]})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Bildirim Teslimat Logu"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Kime gitti / gitmedi, isim-ID, cihaz, IP ve hata bilgisini izleyin."}),n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Toplam satir: ",ln]}),n.jsxs("div",{className:"rounded border border-emerald-200 bg-emerald-50 p-3 text-sm text-emerald-800",children:["Gonderildi: ",Ne]}),n.jsxs("div",{className:"rounded border border-rose-200 bg-rose-50 p-3 text-sm text-rose-800",children:["Gonderilemedi: ",Je]}),n.jsx("button",{type:"button",onClick:()=>{se.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Logu yenile"})]}),n.jsx("div",{className:"mt-3",children:n.jsx(mi,{value:de,onChange:Ee,placeholder:"Isim, ID, cihaz, IP, baslik, durum ara..."})}),!se.isLoading&&!se.isError?n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:[n.jsxs("span",{children:["Gosterilen satir: ",Vt,"-",Tn," / ",ln]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>K(Q=>Math.max(1,Q-1)),disabled:R<=1,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Onceki"}),n.jsxs("span",{children:["Sayfa ",R," / ",xt]}),n.jsx("button",{type:"button",onClick:()=>K(Q=>Math.min(xt,Q+1)),disabled:R>=xt,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}):null,se.isLoading?n.jsx(Gt,{label:"Teslimat logu yukleniyor..."}):null,se.isError?n.jsx(wt,{message:"Teslimat logu alinamadi."}):null,!se.isLoading&&!se.isError?n.jsxs("div",{className:"mt-3 grid gap-4 xl:grid-cols-[minmax(0,1fr)_360px]",children:[n.jsxs("section",{className:"overflow-hidden rounded-xl border border-slate-900 bg-[#09131d] text-slate-200 shadow-inner",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-slate-700 bg-slate-900/70 px-3 py-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-rose-400"}),n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-amber-300"}),n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-emerald-400"}),n.jsx("span",{className:"ml-2 text-xs font-semibold text-slate-300",children:"delivery-terminal"})]}),n.jsxs("span",{className:"text-[11px] text-slate-400",children:[Vt,"-",Tn," / ",ln]})]}),n.jsxs("div",{className:"max-h-[520px] overflow-auto",children:[n.jsxs("table",{className:"min-w-full table-fixed text-left text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-900/95 text-[11px] uppercase text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"w-36 px-2 py-2",children:"Zaman"}),n.jsx("th",{className:"w-24 px-2 py-2",children:"Durum"}),n.jsx("th",{className:"w-24 px-2 py-2",children:"Hedef"}),n.jsx("th",{className:"w-56 px-2 py-2",children:"Kisi"}),n.jsx("th",{className:"w-20 px-2 py-2",children:"Cihaz"}),n.jsx("th",{className:"w-36 px-2 py-2",children:"IP"}),n.jsx("th",{className:"w-48 px-2 py-2",children:"Baslik"}),n.jsx("th",{className:"w-64 px-2 py-2",children:"Hata"})]})}),n.jsx("tbody",{children:Ut.map((Q,Ye)=>{const Pt=Q.audit_id===De;return n.jsxs("tr",{onClick:()=>Ge(Q.audit_id),className:`cursor-pointer border-t border-slate-800 ${Pt?"bg-cyan-900/35":"hover:bg-slate-800/55"}`,children:[n.jsx("td",{className:"px-2 py-2 text-slate-300",children:Ir(Q.sent_at_utc)}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("span",{className:`rounded px-2 py-0.5 text-[11px] font-semibold ${fz(Q.status)}`,children:Q.status})}),n.jsx("td",{className:"px-2 py-2 text-slate-300",children:Av(Q.target)}),n.jsxs("td",{className:"px-2 py-2 text-slate-300 truncate",title:`#${Q.recipient_id??"-"} - ${Q.recipient_name??"-"}`,children:["#",Q.recipient_id??"-"," - ",Q.recipient_name??"-"]}),n.jsx("td",{className:"px-2 py-2 text-slate-300",children:Q.device_id??"-"}),n.jsx("td",{className:"px-2 py-2 text-slate-300 truncate",title:Q.ip??"-",children:Q.ip??"-"}),n.jsx("td",{className:"px-2 py-2 text-slate-300 truncate",title:Q.title??"-",children:Q.title??"-"}),n.jsx("td",{className:"px-2 py-2 text-slate-300 truncate",title:Q.error??"-",children:Q.error??"-"})]},`${Q.audit_id}-${Q.recipient_type}-${Q.recipient_id??0}-${Q.device_id??0}-${Ye}`)})})]}),Ut.length===0?n.jsx("p",{className:"px-3 py-3 text-sm text-amber-300",children:"Filtreye uygun teslimat kaydi bulunamadi."}):null]})]}),n.jsxs("aside",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Secili teslimat detayi"}),nt===null?n.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Listeden bir kayit secin."}):n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-2 text-sm text-slate-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Zaman:"})," ",Ir(nt.sent_at_utc)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Durum:"})," ",nt.status]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Hedef tipi:"})," ",nt.recipient_type==="employee"?"CALISAN":"ADMIN"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Hedef:"})," ",Av(nt.target)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Kisi:"})," #",nt.recipient_id??"-"," -"," ",nt.recipient_name??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Cihaz:"})," ",nt.device_id??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"IP:"})," ",nt.ip??"-"]}),n.jsxs("p",{className:"break-words",children:[n.jsx("span",{className:"font-semibold",children:"Baslik:"})," ",nt.title??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Gonderen:"})," ",nt.sender_admin]}),n.jsxs("p",{className:"break-all",children:[n.jsx("span",{className:"font-semibold",children:"Endpoint:"})," ",nt.endpoint??"-"]}),n.jsxs("p",{className:"break-all",children:[n.jsx("span",{className:"font-semibold",children:"Hata:"})," ",nt.error??"-"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-xs font-semibold text-slate-600",children:"JSON detay"}),n.jsx("pre",{className:"max-h-64 overflow-auto rounded-lg bg-slate-900 p-2 text-[11px] text-slate-100",children:JSON.stringify(nt,null,2)})]})]})]})]}):null]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Gunluk Excel Arsivi"}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:`rounded border p-3 text-sm ${xz(it)}`,children:["Gece job durumu: ",n.jsx("strong",{children:F}),n.jsxs("div",{className:"mt-1 text-xs",children:["Alarm: ",n.jsx("strong",{children:ea})]})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Rapor tarihi: ",n.jsx("strong",{children:it?.report_date??"-"}),n.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Son kontrol: ",it?.evaluated_at_utc?Ir(it.evaluated_at_utc):"-"]})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Teslimat: ",n.jsx("strong",{children:it?.push_sent??0})," / ",it?.push_total_targets??0,n.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Push hata: ",it?.push_failed??0," | Email: ",it?.email_sent??0]})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Arsiv: ",n.jsx("strong",{children:it?.archive_exists?`#${it.archive_id}`:"YOK"}),n.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Calisan: ",it?.archive_employee_count??0," | Boyut: ",((it?.archive_file_size_bytes??0)/1024).toFixed(1)," KB"]})]})]}),ae.isError?n.jsx("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:"Gece 00:00 job health verisi alinamadi."}):null,!ae.isError&&it?n.jsx("div",{className:"mt-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:ea>0?n.jsx("div",{className:"flex flex-wrap gap-1",children:it.alarms.map(Q=>n.jsx("span",{className:"rounded border border-rose-300 bg-rose-100 px-2 py-0.5 text-rose-800",children:pz(Q)},Q))}):n.jsx("span",{className:"text-emerald-700",children:"Alarm yok. Gece arsiv job durumu saglikli."})}):null,it?.target_zero?n.jsx("p",{className:"mt-2 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:"Gece job hedefi 0 gorunuyor. Push claim veya mail alici listesi bos olabilir."}):null,it?.last_error?n.jsxs("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:["Son job hatasi: ",it.last_error]}):null,it&&Ue?n.jsx("p",{className:"mt-2 rounded border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-800",children:"Gece 00:00 job olustu, teslimat yapildi ve alarm bulunmuyor."}):null,n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-4",children:[n.jsxs("label",{className:"text-xs text-slate-600",children:["Baslangic",n.jsx("input",{type:"date",value:M,onChange:Q=>ne(Q.target.value),className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsxs("label",{className:"text-xs text-slate-600",children:["Bitis",n.jsx("input",{type:"date",value:Se,onChange:Q=>be(Q.target.value),className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsxs("label",{className:"text-xs text-slate-600",children:["Calisan icerigi",n.jsx("input",{value:D,onChange:Q=>te(Q.target.value),placeholder:"ad veya ID",className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>{Dt.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Arsivi yenile"})})]}),Dt.isLoading?n.jsx(Gt,{label:"Arsiv yukleniyor..."}):null,Dt.isError?n.jsx(wt,{message:"Arsiv listesi alinamadi."}):null,!Dt.isLoading&&!Dt.isError?n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:[n.jsxs("span",{children:["Gosterilen satir: ",va,"-",An," / ",Cn]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>ce(Q=>Math.max(1,Q-1)),disabled:P<=1,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Onceki"}),n.jsxs("span",{children:["Sayfa ",P," / ",Lt]}),n.jsx("button",{type:"button",onClick:()=>ce(Q=>Math.min(Lt,Q+1)),disabled:P>=Lt,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}):null,n.jsx("div",{className:"mt-2 max-h-[520px] overflow-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"sticky top-0 bg-white",children:n.jsxs("tr",{className:"text-xs uppercase text-slate-500",children:[n.jsx("th",{className:"px-2 py-2",children:"Sira"}),n.jsx("th",{className:"px-2 py-2",children:"ID"}),n.jsx("th",{className:"px-2 py-2",children:"Tarih"}),n.jsx("th",{className:"px-2 py-2",children:"Dosya"}),n.jsx("th",{className:"px-2 py-2",children:"Calisan"}),n.jsx("th",{className:"px-2 py-2",children:"Boyut"}),n.jsx("th",{className:"px-2 py-2",children:"Islem"})]})}),n.jsx("tbody",{children:Rn.map((Q,Ye)=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-2 py-2 text-slate-500",children:va+Ye}),n.jsx("td",{className:"px-2 py-2",children:Q.id}),n.jsx("td",{className:"px-2 py-2",children:Q.report_date}),n.jsx("td",{className:"px-2 py-2",children:Q.file_name}),n.jsx("td",{className:"px-2 py-2",children:Q.employee_count}),n.jsxs("td",{className:"px-2 py-2",children:[(Q.file_size_bytes/1024).toFixed(1)," KB"]}),n.jsx("td",{className:"px-2 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",className:"rounded border border-brand-300 px-2 py-1 text-xs text-brand-700",onClick:()=>gs.mutate(Q.id),children:"Excel indir"}),n.jsx("button",{type:"button",className:"rounded border border-slate-300 px-2 py-1 text-xs text-slate-700",title:Mn?void 0:"Aktif admin push aboneligi yok",onClick:()=>ir.mutate(Q.id),disabled:ir.isPending||!Mn,children:"Adminlere bildir"})]})})]},Q.id))})]})}),!Dt.isLoading&&!Dt.isError&&Cn===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Filtreye uygun arsiv kaydi bulunamadi."}):null]})]})}const Pl={action:"",entityType:"",entityId:"",success:"all"},pd=35,bz=[{value:"",label:"Tum aksiyonlar"},{value:"ADMIN_LOGIN_SUCCESS",label:"Admin giris basarili"},{value:"ADMIN_LOGIN_FAIL",label:"Admin giris basarisiz"},{value:"ADMIN_REFRESH",label:"Admin token yeniledi"},{value:"ADMIN_LOGOUT",label:"Admin cikis yapti"},{value:"ATTENDANCE_EVENT_CREATED",label:"Yoklama kaydi olusturuldu"},{value:"DEVICE_INVITE_CREATED",label:"Cihaz daveti olusturuldu"},{value:"DEVICE_CLAIMED",label:"Cihaz eslestirildi"},{value:"LEAVE_CREATED",label:"Izin olusturuldu"},{value:"LEAVE_DELETED",label:"Izin silindi"}],_z={ADMIN_LOGIN_SUCCESS:"Admin giris basarili",ADMIN_LOGIN_FAIL:"Admin giris basarisiz",ADMIN_REFRESH:"Admin token yeniledi",ADMIN_LOGOUT:"Admin cikis yapti",ATTENDANCE_EVENT_CREATED:"Yoklama kaydi olusturuldu",DEVICE_INVITE_CREATED:"Cihaz daveti olusturuldu",DEVICE_CLAIMED:"Cihaz eslestirildi",LEAVE_CREATED:"Izin olusturuldu",LEAVE_DELETED:"Izin silindi"};function Nz(e){return new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"medium"}).format(new Date(e))}function jz(e){return new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(e))}function Sz(e){return e?"Basarili":"Hata"}function wz(e){const s=Object.entries(e);return s.length===0?"-":s.slice(0,3).map(([l,o])=>`${l}: ${String(o)}`).join(" | ")}function Ez(e){return _z[e]??e}function kz(e,s){const l=Number.isInteger(s)&&s>0?s:1;return{action:e.action||void 0,entity_type:e.entityType||void 0,entity_id:e.entityId||void 0,success:e.success==="all"?void 0:e.success==="success",offset:(l-1)*pd,limit:pd}}function Tz(e){const s=`${e.actor_type}:${e.actor_id}`,l=e.entity_type?`${e.entity_type}${e.entity_id?`#${e.entity_id}`:""}`:"-",o=e.ip??"-";return`[${jz(e.ts_utc)}] ${e.action} actor=${s} entity=${l} ip=${o}`}function Cz(e){return e==="success"?"text-emerald-300":e==="warning"?"text-amber-300":e==="error"?"text-rose-300":"text-cyan-300"}function Az(){const[e,s]=b.useState(Pl),[l,o]=b.useState(Pl),[d,m]=b.useState(1),[f,g]=b.useState(""),[v,_]=b.useState(!0),[S,w]=b.useState(""),[T,O]=b.useState(null),[k,A]=b.useState([{id:1,level:"info",text:'Log terminali hazir. Yardim icin "help" yazin.'}]),z=b.useRef(2),U=b.useRef(null),I=b.useMemo(()=>kz(l,d),[l,d]),R=Ze({queryKey:["audit-logs",I],queryFn:()=>d_(I),refetchInterval:v?8e3:!1,refetchIntervalInBackground:!0}),K=R.data?.items??[],V=R.data?.total??0,ee=Math.max(1,Math.ceil(V/pd)),q=V===0?0:(d-1)*pd+1,Y=K.length===0?0:q+K.length-1,$=b.useMemo(()=>{if(!f.trim())return K;const M=f.trim().toLowerCase();return K.filter(ne=>[ne.action,ne.actor_type,ne.actor_id,ne.entity_type??"",ne.entity_id??"",ne.ip??"",ne.user_agent??"",JSON.stringify(ne.details)].join(" ").toLowerCase().includes(M))},[K,f]),ie=b.useMemo(()=>{if(T!==null){const M=$.find(ne=>ne.id===T);if(M)return M}return $[0]??null},[T,$]),fe=b.useMemo(()=>{const M=K.filter(be=>!be.success).length,ne=K.filter(be=>be.action.startsWith("ADMIN_LOGIN")).length,Se=K.filter(be=>be.action==="ATTENDANCE_EVENT_CREATED").length;return{total:V,failed:M,loginEvents:ne,attendanceEvents:Se}},[K,V]);b.useEffect(()=>{!ie&&T!==null&&O(null)},[ie,T]),b.useEffect(()=>{R.data&&m(M=>M<1?1:M>ee?ee:M)},[R.data,ee]),b.useEffect(()=>{!v||U.current===null||(U.current.scrollTop=U.current.scrollHeight)},[v,$,k]);const ue=(M,ne)=>{A(Se=>{const be=[...Se,{id:z.current,level:M,text:ne}];return z.current+=1,be.slice(-120)})},je=M=>{M.preventDefault(),o({...e}),m(1),ue("success","Filtreler uygulandi.")},X=()=>{s(Pl),o(Pl),m(1),g(""),ue("info","Filtreler temizlendi.")},oe=M=>{const ne=M.trim();if(!ne)return;ue("info",`$ ${ne}`);const[Se,...be]=ne.split(/\s+/),D=Se.toLowerCase(),te=ne.slice(Se.length).trim();if(D==="help"||D==="yardim"){ue("info","Komutlar: help, clear, apply, reset, refresh, follow on|off, status all|success|failed, action <AKSIYON>, search <METIN>, page <N>");return}if(D==="clear"||D==="temizle"){A([]),z.current=1,ue("success","Terminal cikti gecmisi temizlendi.");return}if(D==="apply"||D==="uygula"){o({...e}),m(1),ue("success","Taslak filtreler uygulandi.");return}if(D==="reset"||D==="sifirla"){s(Pl),o(Pl),m(1),g(""),ue("warning","Filtreler sifirlandi.");return}if(D==="refresh"||D==="yenile"){R.refetch(),ue("success","Log verisi yeniden cekiliyor.");return}if(D==="follow"||D==="takip"){const P=be[0]?.toLowerCase();if(P==="on"||P==="ac"){_(!0),ue("success","Canli takip acildi.");return}if(P==="off"||P==="kapat"){_(!1),ue("warning","Canli takip kapatildi.");return}ue("error","Kullanim: follow on|off");return}if(D==="status"||D==="durum"){const P=be[0]?.toLowerCase();let ce=null;if((P==="all"||P==="tum")&&(ce="all"),(P==="success"||P==="ok"||P==="basarili")&&(ce="success"),(P==="failed"||P==="error"||P==="hata")&&(ce="failed"),ce===null){ue("error","Kullanim: status all|success|failed");return}s(de=>({...de,success:ce})),o(de=>({...de,success:ce})),m(1),ue("success",`Durum filtresi guncellendi: ${ce}`);return}if(D==="action"||D==="aksiyon"){if(!te){ue("error","Kullanim: action <AKSIYON_KODU>");return}s(P=>({...P,action:te})),o(P=>({...P,action:te})),m(1),ue("success",`Aksiyon filtresi guncellendi: ${te}`);return}if(D==="search"||D==="ara"){g(te),ue("success",te?`Metin aramasi uygulandi: "${te}"`:"Metin aramasi temizlendi.");return}if(D==="page"||D==="sayfa"){const P=Number(be[0]);if(!Number.isFinite(P)||P<=0){ue("error","Kullanim: page <1-n>");return}const ce=Math.max(Math.trunc(P),1);m(ce),ue("success",`Sayfa guncellendi: ${ce}`);return}ue("error",`Bilinmeyen komut: ${D}. Yardim icin "help" yazin.`)},Z=M=>{M.preventDefault(),oe(S),w("")};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"Sistem Loglari",description:"Program hareketleri, hata kayitlari, giris/cikis ve yoklama islemlerini terminal gorunumunde izleyin."}),n.jsxs(Le,{children:[n.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam log"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:fe.total})]}),n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-rose-700",children:"Hata logu"}),n.jsx("p",{className:"text-sm font-semibold text-rose-800",children:fe.failed})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Login olaylari"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:fe.loginEvents})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yoklama eventleri"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:fe.attendanceEvents})]})]}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{const M=!v;_(M),ue("info",M?"Canli takip acildi.":"Canli takip kapatildi.")},className:`rounded-lg px-3 py-1.5 text-xs font-semibold ${v?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-700"}`,children:v?"Canli takip: Acik":"Canli takip: Kapali"}),n.jsx("button",{type:"button",onClick:()=>{R.refetch(),ue("success","Log listesi manuel yenilendi.")},className:"rounded-lg border border-slate-300 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Yenile"}),n.jsx("button",{type:"button",onClick:X,className:"rounded-lg border border-slate-300 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Filtreleri temizle"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[n.jsxs("span",{children:["Gosterilen satir: ",q,"-",Y," / ",V]}),n.jsx("button",{type:"button",onClick:()=>m(M=>Math.max(1,M-1)),disabled:d<=1,className:"rounded border border-slate-300 px-2 py-1 disabled:cursor-not-allowed disabled:opacity-50",children:"Onceki"}),n.jsxs("span",{children:["Sayfa ",d," / ",ee]}),n.jsx("button",{type:"button",onClick:()=>m(M=>Math.min(ee,M+1)),disabled:d>=ee,className:"rounded border border-slate-300 px-2 py-1 disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),n.jsxs("form",{className:"mt-3 space-y-3",onSubmit:je,children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Aksiyon",n.jsx("select",{value:e.action,onChange:M=>s(ne=>({...ne,action:M.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:bz.map(M=>n.jsx("option",{value:M.value,children:M.label},M.label))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Varlik turu",n.jsx("input",{type:"text",value:e.entityType,onChange:M=>s(ne=>({...ne,entityType:M.target.value})),placeholder:"attendance_event / leave",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Varlik ID",n.jsx("input",{type:"text",value:e.entityId,onChange:M=>s(ne=>({...ne,entityId:M.target.value})),placeholder:"Orn: 42",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Durum",n.jsxs("select",{value:e.success,onChange:M=>s(ne=>({...ne,success:M.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"all",children:"Tumu"}),n.jsx("option",{value:"success",children:"Basarili"}),n.jsx("option",{value:"failed",children:"Hata"})]})]})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-[1fr_auto_auto]",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Metin ara",n.jsx("input",{type:"text",value:f,onChange:M=>g(M.target.value),placeholder:"Aksiyon, kullanici, IP, detay...",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsx("button",{type:"submit",className:"btn-primary self-end rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),n.jsx("button",{type:"button",onClick:X,className:"btn-secondary self-end rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]})]})]}),n.jsxs(Le,{children:[R.isLoading?n.jsx(Gt,{label:"Log kayitlari yukleniyor..."}):null,R.isError?n.jsx(wt,{message:He(R.error,"Log kayitlari alinamadi.").message}):null,!R.isLoading&&!R.isError?n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_360px]",children:[n.jsxs("section",{className:"overflow-hidden rounded-xl border border-slate-900 bg-[#09131d] text-slate-200 shadow-inner",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-slate-700 bg-slate-900/70 px-3 py-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-rose-400"}),n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-amber-300"}),n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-emerald-400"}),n.jsx("span",{className:"ml-2 text-xs font-semibold text-slate-300",children:"audit-terminal"})]}),n.jsxs("span",{className:"text-[11px] text-slate-400",children:[v?"FOLLOW MODE":"MANUAL MODE","  ",q,"-",Y," / ",V]})]}),n.jsx("form",{onSubmit:Z,className:"border-b border-slate-700 bg-slate-900/50 p-2",children:n.jsxs("label",{className:"flex items-center gap-2 text-xs font-mono text-emerald-300",children:[n.jsx("span",{children:"admin@audit:~$"}),n.jsx("input",{value:S,onChange:M=>w(M.target.value),placeholder:"help, follow on, status failed, action ATTENDANCE_EVENT_CREATED, search duplicate, page 2...",className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1.5 font-mono text-xs text-slate-100 placeholder:text-slate-500 focus:border-cyan-400"})]})}),n.jsxs("div",{ref:U,className:"h-[520px] overflow-y-auto px-3 py-2 font-mono text-xs",children:[k.map(M=>n.jsx("p",{className:`leading-6 ${Cz(M.level)}`,children:M.text},M.id)),$.map(M=>{const ne=ie?.id===M.id;return n.jsxs("button",{type:"button",onClick:()=>O(M.id),className:`mt-1 block w-full rounded px-2 py-1 text-left leading-6 ${ne?"bg-cyan-900/40 ring-1 ring-cyan-500/40":"hover:bg-slate-800/60"}`,children:[n.jsx("span",{className:M.success?"text-emerald-300":"text-rose-300",children:M.success?"[OK]":"[ERR]"})," ",n.jsx("span",{className:"text-slate-200",children:Tz(M)})]},M.id)}),$.length===0?n.jsx("p",{className:"mt-2 text-amber-300",children:"Filtreye uygun log kaydi bulunamadi."}):null]})]}),n.jsxs("aside",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Secili log detayi"}),ie===null?n.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Listeden bir kayit secin."}):n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Aksiyon"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:Ez(ie.action)}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:ie.action})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-2 text-sm text-slate-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Zaman:"})," ",Nz(ie.ts_utc)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Aktor:"})," ",ie.actor_type,":",ie.actor_id]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Durum:"})," ",Sz(ie.success)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Varlik:"})," ",ie.entity_type??"-",ie.entity_id?` #${ie.entity_id}`:""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"IP:"})," ",ie.ip??"-"]}),n.jsxs("p",{className:"break-all",children:[n.jsx("span",{className:"font-semibold",children:"User Agent:"})," ",ie.user_agent??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Detay ozeti:"})," ",wz(ie.details)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-xs font-semibold text-slate-600",children:"JSON detay"}),n.jsx("pre",{className:"max-h-64 overflow-auto rounded-lg bg-slate-900 p-2 text-[11px] text-slate-100",children:JSON.stringify(ie.details,null,2)})]})]})]})]}):null]})]})}const Mz=$a({department_id:qn().int().positive(),daily_minutes_planned:qn().int().nonnegative(),break_minutes:qn().int().nonnegative(),grace_minutes:qn().int().nonnegative()}),zz=$a({department_id:qn().int().positive(),weekday:qn().int().min(0).max(6),is_workday:Sd(),planned_minutes:qn().int().nonnegative(),break_minutes:qn().int().nonnegative()}),Oz=$a({department_id:qn().int().positive(),name:ia().min(1).max(100),start_time_local:ia().regex(/^\d{2}:\d{2}$/),end_time_local:ia().regex(/^\d{2}:\d{2}$/),break_minutes:qn().int().nonnegative(),is_active:Sd()}),Mv=[{value:0,label:"Pazartesi"},{value:1,label:"Sali"},{value:2,label:"Carsamba"},{value:3,label:"Persembe"},{value:4,label:"Cuma"},{value:5,label:"Cumartesi"},{value:6,label:"Pazar"}],Dz=[{value:"DEPARTMENT",label:"Tum departman"},{value:"DEPARTMENT_EXCEPT_EMPLOYEE",label:"Departman (calisan haric)"},{value:"ONLY_EMPLOYEE",label:"Sadece secili calisan"}],Rz={DEPARTMENT:"Departman geneli",DEPARTMENT_EXCEPT_EMPLOYEE:"Departman (haric)",ONLY_EMPLOYEE:"Sadece calisan"};function ff(e){const s=e.trim();if(!s)return null;const l=Number(s);return!Number.isFinite(l)||l<0?null:Math.trunc(l)}function Lz(e,s){const l=e.target_employee_ids&&e.target_employee_ids.length>0?e.target_employee_ids:e.target_employee_id?[e.target_employee_id]:[];return{id:e.id,department_id:e.department_id,target_type:e.target_type,target_employee_id:l.length>0?l[0]:null,target_employee_ids:l,shift_id:e.shift_id,daily_minutes_planned:e.daily_minutes_planned,break_minutes:e.break_minutes,grace_minutes:e.grace_minutes,start_date:e.start_date,end_date:e.end_date,is_locked:e.is_locked,is_active:s,note:e.note}}function Pz(){const e=la(),{pushToast:s}=oa(),[l,o]=b.useState(""),[d,m]=b.useState("540"),[f,g]=b.useState("60"),[v,_]=b.useState("5"),[S,w]=b.useState(""),[T,O]=b.useState("0"),[k,A]=b.useState(!0),[z,U]=b.useState("540"),[I,R]=b.useState("60"),[K,V]=b.useState(""),[ee,q]=b.useState(""),[Y,$]=b.useState("10:00"),[ie,fe]=b.useState("18:00"),[ue,je]=b.useState("60"),[X,oe]=b.useState(!0),[Z,M]=b.useState(null),[ne,Se]=b.useState(null),[be,D]=b.useState(""),[te,P]=b.useState("DEPARTMENT"),[ce,de]=b.useState([]),[Ee,De]=b.useState(""),[Ge,pe]=b.useState(""),[Ke,_e]=b.useState(""),[lt,dt]=b.useState(""),[ze,ot]=b.useState(""),[bt,It]=b.useState(new Date().toISOString().slice(0,10)),[Bt,rn]=b.useState(new Date().toISOString().slice(0,10)),[ae,ke]=b.useState(!1),[Be,at]=b.useState(!0),[se,Ie]=b.useState(""),[_t,Dt]=b.useState(!0),[Rt,ft]=b.useState(null),Ut=Ze({queryKey:["departments"],queryFn:fi}),Ne=Ze({queryKey:["employees","all"],queryFn:()=>Ts({status:"all"})}),Je=Ze({queryKey:["work-rules"],queryFn:sA}),nt=Ze({queryKey:["department-weekly-rules"],queryFn:()=>o_()}),Nt=Ze({queryKey:["department-shifts"],queryFn:()=>pc()}),Ft=Ze({queryKey:["schedule-plans","all"],queryFn:()=>pA({active_only:!1})}),jt=Xe({mutationFn:iA,onSuccess:()=>{ft(null),s({variant:"success",title:"Mesai kurali kaydedildi",description:"Departman mesai kurali kaydedildi."}),e.invalidateQueries({queryKey:["work-rules"]})},onError:B=>{const Fe=He(B,"Mesai kurali kaydedilemedi.");ft(Fe.message),s({variant:"error",title:"Mesai kurali kaydedilemedi",description:Fe.message})}}),fn=Xe({mutationFn:c_,onSuccess:()=>{ft(null),s({variant:"success",title:"Haftalik plan kaydedildi",description:"Secilen gun icin departman plani guncellendi."}),e.invalidateQueries({queryKey:["department-weekly-rules"]})},onError:B=>{const Fe=He(B,"Haftalik plan kaydedilemedi.");ft(Fe.message),s({variant:"error",title:"Haftalik plan kaydedilemedi",description:Fe.message})}}),Jn=Xe({mutationFn:fd,onSuccess:()=>{ft(null),M(null),q(""),$("10:00"),fe("18:00"),je("60"),oe(!0),s({variant:"success",title:"Vardiya kaydedildi",description:"Departman vardiyasi guncellendi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:B=>{const Fe=He(B,"Vardiya kaydedilemedi.");ft(Fe.message),s({variant:"error",title:"Vardiya kaydedilemedi",description:Fe.message})}}),ln=Xe({mutationFn:u_,onSuccess:()=>{ft(null),Z!==null&&(M(null),q(""),$("10:00"),fe("18:00"),je("60"),oe(!0)),s({variant:"success",title:"Vardiya pasife alindi",description:"Vardiya kaydi pasif duruma getirildi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:B=>{const Fe=He(B,"Vardiya pasife alinamadi.");ft(Fe.message),s({variant:"error",title:"Vardiya pasife alinamadi",description:Fe.message})}}),xt=Xe({mutationFn:({shift:B,nextActive:Fe})=>fd({id:B.id,department_id:B.department_id,name:B.name,start_time_local:B.start_time_local,end_time_local:B.end_time_local,break_minutes:B.break_minutes,is_active:Fe}),onSuccess:(B,Fe)=>{ft(null),s({variant:"success",title:Fe.nextActive?"Vardiya aktif edildi":"Vardiya pasife alindi",description:Fe.nextActive?"Vardiya tekrar kullanilabilir duruma getirildi.":"Vardiya kaydi pasif duruma getirildi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:B=>{const Fe=He(B,"Vardiya durumu guncellenemedi.");ft(Fe.message),s({variant:"error",title:"Vardiya durumu guncellenemedi",description:Fe.message})}}),Vt=Xe({mutationFn:w0,onSuccess:()=>{ft(null),s({variant:"success",title:"Planlama kaydedildi",description:"Departman/calisan plani kaydedildi."}),e.invalidateQueries({queryKey:["schedule-plans"]}),Se(null),de([]),pe(""),_e(""),dt(""),ot(""),ke(!1),at(!0),Ie("")},onError:B=>{const Fe=He(B,"Planlama kaydedilemedi.");ft(Fe.message),s({variant:"error",title:"Planlama kaydedilemedi",description:Fe.message})}}),Tn=Xe({mutationFn:xA,onSuccess:()=>{ft(null),s({variant:"success",title:"Planlama iptal edildi",description:"Plan pasife alindi."}),e.invalidateQueries({queryKey:["schedule-plans"]})},onError:B=>{const Fe=He(B,"Planlama iptal edilemedi.");ft(Fe.message),s({variant:"error",title:"Planlama iptal edilemedi",description:Fe.message})}}),Rn=Xe({mutationFn:B=>w0(Lz(B,!0)),onSuccess:()=>{ft(null),s({variant:"success",title:"Planlama aktif edildi",description:"Plan tekrar aktif olarak kaydedildi."}),e.invalidateQueries({queryKey:["schedule-plans"]})},onError:B=>{const Fe=He(B,"Plan aktif edilemedi.");ft(Fe.message),s({variant:"error",title:"Plan aktif edilemedi",description:Fe.message})}}),Cn=b.useMemo(()=>{const B=Number(d),Fe=Number(f),St=Number(v);return{daily:ad(B),breakValue:ad(Fe),grace:ad(St)}},[d,f,v]);if(Ut.isLoading||Ne.isLoading||Je.isLoading||nt.isLoading||Nt.isLoading||Ft.isLoading)return n.jsx(Gt,{});if(Ut.isError||Ne.isError||Je.isError||nt.isError||Nt.isError||Ft.isError)return n.jsx(wt,{message:"Mesai kurali verileri alinamadi."});const Lt=Ut.data??[],va=Ne.data??[],An=Je.data??[],Hn=nt.data??[],Mn=Nt.data??[],W=Ft.data??[],Ve=new Map(Lt.map(B=>[B.id,B.name])),zt=new Map(va.map(B=>[B.id,B.full_name])),ba=new Map(Mn.map(B=>[B.id,B.name])),Ot=W.filter(B=>_t||B.is_active),Oe=Number(be),pn=Number.isFinite(Oe)?Mn.filter(B=>B.department_id===Oe):[],ca=Number.isFinite(Oe)?va.filter(B=>B.department_id===Oe):[],Wn=Ee.trim()?ca.filter(B=>{const Fe=Ee.trim().toLowerCase();return B.full_name.toLowerCase().includes(Fe)||String(B.id).includes(Fe.replace("#",""))}):ca,Yt=()=>{Se(null),P("DEPARTMENT"),de([]),De(""),pe(""),_e(""),dt(""),ot(""),It(new Date().toISOString().slice(0,10)),rn(new Date().toISOString().slice(0,10)),ke(!1),at(!0),Ie("")},it=B=>{const Fe=B.target_employee_ids&&B.target_employee_ids.length>0?B.target_employee_ids:B.target_employee_id?[B.target_employee_id]:[];Se(B.id),D(String(B.department_id)),P(B.target_type),de(Fe),De(""),pe(B.shift_id?String(B.shift_id):""),_e(B.daily_minutes_planned!==null?String(B.daily_minutes_planned):""),dt(B.break_minutes!==null?String(B.break_minutes):""),ot(B.grace_minutes!==null?String(B.grace_minutes):""),It(B.start_date),rn(B.end_date),ke(B.is_locked),at(B.is_active),Ie(B.note??"")},ea=B=>{B.preventDefault(),ft(null);const Fe=Mz.safeParse({department_id:l,daily_minutes_planned:d,break_minutes:f,grace_minutes:v});if(!Fe.success){const St=Fe.error.issues[0]?.message??"Mesai kurali formunu kontrol edin.";ft(St),s({variant:"error",title:"Form hatasi",description:St});return}jt.mutate(Fe.data)},F=B=>{B.preventDefault(),ft(null);const Fe=zz.safeParse({department_id:S,weekday:T,is_workday:k,planned_minutes:z,break_minutes:I});if(!Fe.success){const St=Fe.error.issues[0]?.message??"Haftalik plan formunu kontrol edin.";ft(St),s({variant:"error",title:"Form hatasi",description:St});return}fn.mutate(Fe.data)},Ue=B=>{B.preventDefault(),ft(null);const Fe=Oz.safeParse({department_id:K,name:ee.trim(),start_time_local:Y,end_time_local:ie,break_minutes:ue,is_active:X});if(!Fe.success){const St=Fe.error.issues[0]?.message??"Vardiya formunu kontrol edin.";ft(St),s({variant:"error",title:"Form hatasi",description:St});return}Jn.mutate({id:Z??void 0,...Fe.data})},ut=B=>{M(B.id),V(String(B.department_id)),q(B.name),$(B.start_time_local),fe(B.end_time_local),je(String(B.break_minutes)),oe(B.is_active),ft(null)},Ln=()=>{M(null),q(""),$("10:00"),fe("18:00"),je("60"),oe(!0),ft(null)},zn=B=>{B.preventDefault(),ft(null);const Fe=Number(be);if(!Number.isFinite(Fe)||Fe<=0){ft("Planlama icin departman secmelisiniz.");return}if(!bt||!Bt){ft("Baslangic ve bitis tarihi zorunludur.");return}if(bt>Bt){ft("Baslangic tarihi bitis tarihinden buyuk olamaz.");return}const St=te==="DEPARTMENT"?[]:[...ce];if(te!=="DEPARTMENT"&&St.length===0){ft("Secilen hedef tipi icin en az bir calisan secmelisiniz.");return}const Pn=Ge?Number(Ge):null,Ia=ff(Ke),dn=ff(lt),gs=ff(ze);if(!Pn&&Ia===null&&dn===null&&gs===null){ft("En az bir plan degeri girmelisiniz (vardiya veya dakika alanlari).");return}Vt.mutate({id:ne??void 0,department_id:Fe,target_type:te,target_employee_id:St.length>0?St[0]:null,target_employee_ids:St,shift_id:Pn,daily_minutes_planned:Ia,break_minutes:dn,grace_minutes:gs,start_date:bt,end_date:Bt,is_locked:ae,is_active:Be,note:se.trim()||null})};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Zn,{title:"Mesai Kurallari",description:"Departman bazinda gunluk plan, haftalik gun davranisi ve coklu vardiya tanimlarini yonetin."}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Temel Departman Kurali"}),n.jsxs("form",{onSubmit:ea,className:"mt-3 grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:l,onChange:B=>o(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),Lt.map(B=>n.jsx("option",{value:B.id,children:B.name},B.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Planlanan Gunluk Dakika",n.jsx("input",{value:d,onChange:B=>m(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakikasi",n.jsx("input",{value:f,onChange:B=>g(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gecikme Toleransi (Dakika)",n.jsx("input",{value:v,onChange:B=>_(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("div",{className:"md:col-span-4 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:["Onizleme: Planlanan ",Cn.daily," | Mola ",Cn.breakValue," | Tolerans ",Cn.grace]}),n.jsx("div",{className:"md:col-span-4",children:n.jsx("button",{type:"submit",disabled:jt.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:jt.isPending?"Kaydediliyor...":"Kurali Kaydet"})})]})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Haftalik Gun Plani"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ornek: Cumartesi 5 saat, Pazar calisma yok gibi farkli gun davranislarini buradan tanimlayin."}),n.jsxs("form",{onSubmit:F,className:"mt-3 grid gap-3 md:grid-cols-5",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:S,onChange:B=>w(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),Lt.map(B=>n.jsx("option",{value:B.id,children:B.name},B.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gun",n.jsx("select",{value:T,onChange:B=>O(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:Mv.map(B=>n.jsx("option",{value:B.value,children:B.label},B.value))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Planlanan Dakika",n.jsx("input",{value:z,onChange:B=>U(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakikasi",n.jsx("input",{value:I,onChange:B=>R(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:k,onChange:B=>A(B.target.checked)}),"Calisma Gunu"]}),n.jsx("div",{className:"md:col-span-5",children:n.jsx("button",{type:"submit",disabled:fn.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:fn.isPending?"Kaydediliyor...":"Gunu Kaydet"})})]}),n.jsx("div",{className:"mt-4 list-scroll-area",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Gun"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Planlanan Sure"}),n.jsx("th",{className:"py-2",children:"Mola"})]})}),n.jsx("tbody",{children:Hn.map(B=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:Ve.get(B.department_id)??B.department_id}),n.jsx("td",{className:"py-2",children:Mv.find(Fe=>Fe.value===B.weekday)?.label??B.weekday}),n.jsx("td",{className:"py-2",children:B.is_workday?"Calisma":"Off"}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:B.planned_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:B.break_minutes})})]},B.id))})]})})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Departman Vardiyalari"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ornek: Stant icin 10:00-18:00 ve 14:00-22:00 vardiyalarini ayri ayri tanimlayabilirsiniz."}),Z?n.jsxs("p",{className:"mt-2 text-xs font-medium text-brand-700",children:["Duzenleme modu: #",Z]}):null,n.jsxs("form",{onSubmit:Ue,className:"mt-3 grid gap-3 md:grid-cols-6",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:K,onChange:B=>V(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),Lt.map(B=>n.jsx("option",{value:B.id,children:B.name},B.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya Adi",n.jsx("input",{value:ee,onChange:B=>q(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Sabah 10-18"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Baslangic",n.jsx("input",{type:"time",value:Y,onChange:B=>$(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bitis",n.jsx("input",{type:"time",value:ie,onChange:B=>fe(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakikasi",n.jsx("input",{value:ue,onChange:B=>je(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:X,onChange:B=>oe(B.target.checked)}),"Aktif"]}),n.jsx("div",{className:"md:col-span-6",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("button",{type:"submit",disabled:Jn.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Jn.isPending?"Kaydediliyor...":Z?"Vardiya Guncelle":"Vardiya Kaydet"}),Z?n.jsx("button",{type:"button",onClick:Ln,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100",children:"Vazgec"}):null]})})]}),n.jsx("div",{className:"mt-4 list-scroll-area",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Saat"}),n.jsx("th",{className:"py-2",children:"Mola"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2 text-right",children:"Aksiyon"})]})}),n.jsx("tbody",{children:Mn.map(B=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:Ve.get(B.department_id)??B.department_id}),n.jsx("td",{className:"py-2",children:B.name}),n.jsxs("td",{className:"py-2",children:[B.start_time_local," - ",B.end_time_local]}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:B.break_minutes})}),n.jsx("td",{className:"py-2",children:B.is_active?"Aktif":"Pasif"}),n.jsx("td",{className:"py-2 text-right",children:n.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>ut(B),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Duzenle"}),B.is_active?n.jsx("button",{type:"button",disabled:ln.isPending||xt.isPending,onClick:()=>{window.confirm("Bu vardiya pasife alinsin mi?")&&ln.mutate(B.id)},className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:"Pasife Al"}):n.jsx("button",{type:"button",disabled:xt.isPending||ln.isPending,onClick:()=>xt.mutate({shift:B,nextActive:!0}),className:"rounded-lg border border-emerald-300 px-3 py-1 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:"Aktif Et"})]})})]},B.id))})]})})]}),n.jsxs(Le,{children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Ileri Planlama (Departman/Calisan)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Gelecek tarihli vardiya ve sure kurali tanimlayin. Planlar duzenlenebilir, iptal edilebilir, tekrar aktif edilebilir."})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:_t,onChange:B=>Dt(B.target.checked)}),"Pasif planlari goster"]})]}),n.jsxs("form",{onSubmit:zn,className:"mt-4 grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:be,onChange:B=>{D(B.target.value),de([]),pe("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),Lt.map(B=>n.jsx("option",{value:B.id,children:B.name},B.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Hedef Tipi",n.jsx("select",{value:te,onChange:B=>{const Fe=B.target.value;P(Fe),Fe==="DEPARTMENT"&&de([])},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:Dz.map(B=>n.jsx("option",{value:B.value,children:B.label},B.value))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Calisanlar (gerekliyse)",n.jsx("input",{type:"text",value:Ee,onChange:B=>De(B.target.value),disabled:te==="DEPARTMENT",placeholder:"Calisan adi veya ID ile ara...",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 disabled:bg-slate-100"}),n.jsx("select",{multiple:!0,value:ce.map(String),onChange:B=>{const Fe=Array.from(B.target.selectedOptions).map(St=>Number(St.value));de(Fe.filter(St=>Number.isFinite(St)&&St>0))},disabled:te==="DEPARTMENT",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 disabled:bg-slate-100",children:Wn.map(B=>n.jsxs("option",{value:B.id,children:["#",B.id," - ",B.full_name]},B.id))}),n.jsx("span",{className:"mt-1 block text-xs text-slate-500",children:"Ctrl/Cmd ile birden fazla calisan secilebilir. Binlerce kayitta once arama yapin."})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya (opsiyonel)",n.jsxs("select",{value:Ge,onChange:B=>pe(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),pn.map(B=>n.jsxs("option",{value:B.id,children:[B.name," (",B.start_time_local," - ",B.end_time_local,")"]},B.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gunluk Dakika (ops.)",n.jsx("input",{value:Ke,onChange:B=>_e(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakika (ops.)",n.jsx("input",{value:lt,onChange:B=>dt(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Tolerans Dakika (ops.)",n.jsx("input",{value:ze,onChange:B=>ot(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Baslangic Tarihi",n.jsx("input",{type:"date",value:bt,onChange:B=>It(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bitis Tarihi",n.jsx("input",{type:"date",value:Bt,onChange:B=>rn(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:ae,onChange:B=>ke(B.target.checked)}),"Vardiya kilitli"]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:Be,onChange:B=>at(B.target.checked)}),"Aktif"]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Not",n.jsx("input",{value:se,onChange:B=>Ie(B.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("div",{className:"md:col-span-4 flex flex-wrap gap-2",children:[n.jsx("button",{type:"submit",disabled:Vt.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Vt.isPending?"Kaydediliyor...":ne?"Plani Guncelle":"Plan Olustur"}),n.jsx("button",{type:"button",onClick:Yt,className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Formu Temizle"})]})]}),n.jsx("div",{className:"mt-4 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Hedef"}),n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Plan/Mola"}),n.jsx("th",{className:"py-2",children:"Tarih Araligi"}),n.jsx("th",{className:"py-2",children:"Kilit"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Aksiyon"})]})}),n.jsx("tbody",{children:Ot.map(B=>{const St=(B.target_employee_ids&&B.target_employee_ids.length>0?B.target_employee_ids:B.target_employee_id?[B.target_employee_id]:[]).map(Pn=>zt.get(Pn)??`#${Pn}`);return n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:Ve.get(B.department_id)??B.department_id}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:Rz[B.target_type]}),St.length>0?n.jsx("span",{className:"text-xs text-slate-500",children:St.join(", ")}):null]})}),n.jsx("td",{className:"py-2",children:B.shift_id?ba.get(B.shift_id)??`#${B.shift_id}`:"-"}),n.jsxs("td",{className:"py-2 text-xs text-slate-700",children:[n.jsxs("div",{children:["Plan: ",B.daily_minutes_planned!==null?`${B.daily_minutes_planned} dk`:"-"]}),n.jsxs("div",{children:["Mola: ",B.break_minutes!==null?`${B.break_minutes} dk`:"-"]}),n.jsxs("div",{children:["Tolerans: ",B.grace_minutes!==null?`${B.grace_minutes} dk`:"-"]})]}),n.jsxs("td",{className:"py-2",children:[B.start_date," - ",B.end_date]}),n.jsx("td",{className:"py-2",children:B.is_locked?"Kilitli":"Serbest"}),n.jsx("td",{className:"py-2",children:B.is_active?"Aktif":"Pasif"}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>it(B),className:"rounded-lg border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:"Duzenle"}),B.is_active?n.jsx("button",{type:"button",onClick:()=>Tn.mutate(B.id),disabled:Tn.isPending,className:"rounded-lg border border-rose-300 px-2 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:"Iptal Et"}):n.jsx("button",{type:"button",onClick:()=>Rn.mutate(B),disabled:Rn.isPending,className:"rounded-lg border border-emerald-300 px-2 py-1 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:"Aktif Et"})]})})]},B.id)})})]})})]}),n.jsxs(Le,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Mevcut Temel Kurallar"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Planlanan Gunluk Sure"}),n.jsx("th",{className:"py-2",children:"Mola Suresi"}),n.jsx("th",{className:"py-2",children:"Tolerans"})]})}),n.jsx("tbody",{children:An.map(B=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:Ve.get(B.department_id)??B.department_id}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:B.daily_minutes_planned})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:B.break_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx(qe,{minutes:B.grace_minutes})})]},B.id))})]})})]}),Rt?n.jsx("p",{className:"form-validation",children:Rt}):null]})}function Iz(){return n.jsxs(IS,{children:[n.jsx(Xt,{element:n.jsx(cM,{}),children:n.jsx(Xt,{path:"/login",element:n.jsx(J3,{})})}),n.jsx(Xt,{path:"/device-claim",element:n.jsx(dM,{})}),n.jsx(Xt,{path:"/archive-download",element:n.jsx(YM,{})}),n.jsx(Xt,{path:"/attendance-extra-checkin-approval",element:n.jsx(WM,{})}),n.jsx(Xt,{element:n.jsx(oM,{}),children:n.jsxs(Xt,{element:n.jsx(lM,{}),children:[n.jsx(Xt,{path:"/",element:n.jsx(Xf,{to:"/dashboard",replace:!0})}),n.jsx(Xt,{path:"/management-console",element:n.jsx(az,{})}),n.jsx(Xt,{path:"/control-room",element:n.jsx(KM,{})}),n.jsx(Xt,{path:"/dashboard",element:n.jsx(zM,{})}),n.jsx(Xt,{path:"/regions",element:n.jsx(mz,{})}),n.jsx(Xt,{path:"/departments",element:n.jsx(RM,{})}),n.jsx(Xt,{path:"/employees",element:n.jsx(Q3,{})}),n.jsx(Xt,{path:"/employees/:id",element:n.jsx(P3,{})}),n.jsx(Xt,{path:"/quick-setup",element:n.jsx(dz,{})}),n.jsx(Xt,{path:"/work-rules",element:n.jsx(Pz,{})}),n.jsx(Xt,{path:"/attendance-events",element:n.jsx(CM,{})}),n.jsx(Xt,{path:"/devices",element:n.jsx(PM,{})}),n.jsx(Xt,{path:"/compliance-settings",element:n.jsx(IM,{})}),n.jsx(Xt,{path:"/leaves",element:n.jsx(Y3,{})}),n.jsx(Xt,{path:"/qr-kodlar",element:n.jsx(uz,{})}),n.jsx(Xt,{path:"/reports/employee-monthly",element:n.jsx(H3,{})}),n.jsx(Xt,{path:"/reports/department-summary",element:n.jsx(DM,{})}),n.jsx(Xt,{path:"/reports/excel-export",element:n.jsx(iz,{})}),n.jsx(Xt,{path:"/notifications",element:n.jsx(vz,{})}),n.jsx(Xt,{path:"/audit-logs",element:n.jsx(Az,{})}),n.jsx(Xt,{path:"/admin-users",element:n.jsx(w3,{})})]})}),n.jsx(Xt,{path:"*",element:n.jsx(sz,{})})]})}const Bz=new Ej({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});nj.createRoot(document.getElementById("root")).render(n.jsx(VN.StrictMode,{children:n.jsx(kj,{client:Bz,children:n.jsx(cw,{basename:"/admin-panel/",children:n.jsx(vM,{children:n.jsx(nM,{children:n.jsx(Iz,{})})})})})}));typeof window<"u"&&"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"}).catch(()=>{})});
