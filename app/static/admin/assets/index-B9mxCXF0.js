(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const f of m.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function l(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(d){if(d.ep)return;d.ep=!0;const m=l(d);fetch(d.href,m)}})();function Ed(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ah={exports:{}},Yo={};var Ey;function uj(){if(Ey)return Yo;Ey=1;var e=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function l(o,d,m){var f=null;if(m!==void 0&&(f=""+m),d.key!==void 0&&(f=""+d.key),"key"in d){m={};for(var g in d)g!=="key"&&(m[g]=d[g])}else m=d;return d=m.ref,{$$typeof:e,type:o,key:f,ref:d!==void 0?d:null,props:m}}return Yo.Fragment=s,Yo.jsx=l,Yo.jsxs=l,Yo}var Ty;function dj(){return Ty||(Ty=1,Ah.exports=uj()),Ah.exports}var n=dj(),Mh={exports:{}},mt={};var Cy;function mj(){if(Cy)return mt;Cy=1;var e=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),k=Symbol.iterator;function O(D){return D===null||typeof D!="object"?null:(D=k&&D[k]||D["@@iterator"],typeof D=="function"?D:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,R={};function B(D,ae,F){this.props=D,this.context=ae,this.refs=R,this.updater=F||T}B.prototype.isReactComponent={},B.prototype.setState=function(D,ae){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,ae,"setState")},B.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function A(){}A.prototype=B.prototype;function z(D,ae,F){this.props=D,this.context=ae,this.refs=R,this.updater=F||T}var Z=z.prototype=new A;Z.constructor=z,E(Z,B.prototype),Z.isPureReactComponent=!0;var I=Array.isArray;function V(){}var H={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function X(D,ae,F){var me=F.ref;return{$$typeof:e,type:D,key:ae,ref:me!==void 0?me:null,props:F}}function P(D,ae){return X(D.type,ae,D.props)}function te(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function oe(D){var ae={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(F){return ae[F]})}var je=/\/+/g;function ue(D,ae){return typeof D=="object"&&D!==null&&D.key!=null?oe(""+D.key):ae.toString(36)}function ce(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(V,V):(D.status="pending",D.then(function(ae){D.status==="pending"&&(D.status="fulfilled",D.value=ae)},function(ae){D.status==="pending"&&(D.status="rejected",D.reason=ae)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Q(D,ae,F,me,de){var Ee=typeof D;(Ee==="undefined"||Ee==="boolean")&&(D=null);var Oe=!1;if(D===null)Oe=!0;else switch(Ee){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(D.$$typeof){case e:case s:Oe=!0;break;case S:return Oe=D._init,Q(Oe(D._payload),ae,F,me,de)}}if(Oe)return de=de(D),Oe=me===""?"."+ue(D,0):me,I(de)?(F="",Oe!=null&&(F=Oe.replace(je,"$&/")+"/"),Q(de,ae,F,"",function(Ve){return Ve})):de!=null&&(te(de)&&(de=P(de,F+(de.key==null||D&&D.key===de.key?"":(""+de.key).replace(je,"$&/")+"/")+Oe)),ae.push(de)),1;Oe=0;var Qe=me===""?".":me+":";if(I(D))for(var pe=0;pe<D.length;pe++)me=D[pe],Ee=Qe+ue(me,pe),Oe+=Q(me,ae,F,Ee,de);else if(pe=O(D),typeof pe=="function")for(D=pe.call(D),pe=0;!(me=D.next()).done;)me=me.value,Ee=Qe+ue(me,pe++),Oe+=Q(me,ae,F,Ee,de);else if(Ee==="object"){if(typeof D.then=="function")return Q(ce(D),ae,F,me,de);throw ae=String(D),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function $(D,ae,F){if(D==null)return D;var me=[],de=0;return Q(D,me,"","",function(Ee){return ae.call(F,Ee,de++)}),me}function ie(D){if(D._status===-1){var ae=D._result;ae=ae(),ae.then(function(F){(D._status===0||D._status===-1)&&(D._status=1,D._result=F)},function(F){(D._status===0||D._status===-1)&&(D._status=2,D._result=F)}),D._status===-1&&(D._status=0,D._result=ae)}if(D._status===1)return D._result.default;throw D._result}var Ae=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},_e={map:$,forEach:function(D,ae,F){$(D,function(){ae.apply(this,arguments)},F)},count:function(D){var ae=0;return $(D,function(){ae++}),ae},toArray:function(D){return $(D,function(ae){return ae})||[]},only:function(D){if(!te(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return mt.Activity=w,mt.Children=_e,mt.Component=B,mt.Fragment=l,mt.Profiler=d,mt.PureComponent=z,mt.StrictMode=o,mt.Suspense=v,mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,mt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return H.H.useMemoCache(D)}},mt.cache=function(D){return function(){return D.apply(null,arguments)}},mt.cacheSignal=function(){return null},mt.cloneElement=function(D,ae,F){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var me=E({},D.props),de=D.key;if(ae!=null)for(Ee in ae.key!==void 0&&(de=""+ae.key),ae)!ee.call(ae,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&ae.ref===void 0||(me[Ee]=ae[Ee]);var Ee=arguments.length-2;if(Ee===1)me.children=F;else if(1<Ee){for(var Oe=Array(Ee),Qe=0;Qe<Ee;Qe++)Oe[Qe]=arguments[Qe+2];me.children=Oe}return X(D.type,de,me)},mt.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:m,_context:D},D},mt.createElement=function(D,ae,F){var me,de={},Ee=null;if(ae!=null)for(me in ae.key!==void 0&&(Ee=""+ae.key),ae)ee.call(ae,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(de[me]=ae[me]);var Oe=arguments.length-2;if(Oe===1)de.children=F;else if(1<Oe){for(var Qe=Array(Oe),pe=0;pe<Oe;pe++)Qe[pe]=arguments[pe+2];de.children=Qe}if(D&&D.defaultProps)for(me in Oe=D.defaultProps,Oe)de[me]===void 0&&(de[me]=Oe[me]);return X(D,Ee,de)},mt.createRef=function(){return{current:null}},mt.forwardRef=function(D){return{$$typeof:g,render:D}},mt.isValidElement=te,mt.lazy=function(D){return{$$typeof:S,_payload:{_status:-1,_result:D},_init:ie}},mt.memo=function(D,ae){return{$$typeof:_,type:D,compare:ae===void 0?null:ae}},mt.startTransition=function(D){var ae=H.T,F={};H.T=F;try{var me=D(),de=H.S;de!==null&&de(F,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(V,Ae)}catch(Ee){Ae(Ee)}finally{ae!==null&&F.types!==null&&(ae.types=F.types),H.T=ae}},mt.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},mt.use=function(D){return H.H.use(D)},mt.useActionState=function(D,ae,F){return H.H.useActionState(D,ae,F)},mt.useCallback=function(D,ae){return H.H.useCallback(D,ae)},mt.useContext=function(D){return H.H.useContext(D)},mt.useDebugValue=function(){},mt.useDeferredValue=function(D,ae){return H.H.useDeferredValue(D,ae)},mt.useEffect=function(D,ae){return H.H.useEffect(D,ae)},mt.useEffectEvent=function(D){return H.H.useEffectEvent(D)},mt.useId=function(){return H.H.useId()},mt.useImperativeHandle=function(D,ae,F){return H.H.useImperativeHandle(D,ae,F)},mt.useInsertionEffect=function(D,ae){return H.H.useInsertionEffect(D,ae)},mt.useLayoutEffect=function(D,ae){return H.H.useLayoutEffect(D,ae)},mt.useMemo=function(D,ae){return H.H.useMemo(D,ae)},mt.useOptimistic=function(D,ae){return H.H.useOptimistic(D,ae)},mt.useReducer=function(D,ae,F){return H.H.useReducer(D,ae,F)},mt.useRef=function(D){return H.H.useRef(D)},mt.useState=function(D){return H.H.useState(D)},mt.useSyncExternalStore=function(D,ae,F){return H.H.useSyncExternalStore(D,ae,F)},mt.useTransition=function(){return H.H.useTransition()},mt.version="19.2.4",mt}var Ay;function ep(){return Ay||(Ay=1,Mh.exports=mj()),Mh.exports}var b=ep();const hj=Ed(b);var zh={exports:{}},Jo={},Oh={exports:{}},Rh={};var My;function fj(){return My||(My=1,(function(e){function s(Q,$){var ie=Q.length;Q.push($);e:for(;0<ie;){var Ae=ie-1>>>1,_e=Q[Ae];if(0<d(_e,$))Q[Ae]=$,Q[ie]=_e,ie=Ae;else break e}}function l(Q){return Q.length===0?null:Q[0]}function o(Q){if(Q.length===0)return null;var $=Q[0],ie=Q.pop();if(ie!==$){Q[0]=ie;e:for(var Ae=0,_e=Q.length,D=_e>>>1;Ae<D;){var ae=2*(Ae+1)-1,F=Q[ae],me=ae+1,de=Q[me];if(0>d(F,ie))me<_e&&0>d(de,F)?(Q[Ae]=de,Q[me]=ie,Ae=me):(Q[Ae]=F,Q[ae]=ie,Ae=ae);else if(me<_e&&0>d(de,ie))Q[Ae]=de,Q[me]=ie,Ae=me;else break e}}return $}function d(Q,$){var ie=Q.sortIndex-$.sortIndex;return ie!==0?ie:Q.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;e.unstable_now=function(){return m.now()}}else{var f=Date,g=f.now();e.unstable_now=function(){return f.now()-g}}var v=[],_=[],S=1,w=null,k=3,O=!1,T=!1,E=!1,R=!1,B=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function Z(Q){for(var $=l(_);$!==null;){if($.callback===null)o(_);else if($.startTime<=Q)o(_),$.sortIndex=$.expirationTime,s(v,$);else break;$=l(_)}}function I(Q){if(E=!1,Z(Q),!T)if(l(v)!==null)T=!0,V||(V=!0,oe());else{var $=l(_);$!==null&&ce(I,$.startTime-Q)}}var V=!1,H=-1,ee=5,X=-1;function P(){return R?!0:!(e.unstable_now()-X<ee)}function te(){if(R=!1,V){var Q=e.unstable_now();X=Q;var $=!0;try{e:{T=!1,E&&(E=!1,A(H),H=-1),O=!0;var ie=k;try{t:{for(Z(Q),w=l(v);w!==null&&!(w.expirationTime>Q&&P());){var Ae=w.callback;if(typeof Ae=="function"){w.callback=null,k=w.priorityLevel;var _e=Ae(w.expirationTime<=Q);if(Q=e.unstable_now(),typeof _e=="function"){w.callback=_e,Z(Q),$=!0;break t}w===l(v)&&o(v),Z(Q)}else o(v);w=l(v)}if(w!==null)$=!0;else{var D=l(_);D!==null&&ce(I,D.startTime-Q),$=!1}}break e}finally{w=null,k=ie,O=!1}$=void 0}}finally{$?oe():V=!1}}}var oe;if(typeof z=="function")oe=function(){z(te)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,ue=je.port2;je.port1.onmessage=te,oe=function(){ue.postMessage(null)}}else oe=function(){B(te,0)};function ce(Q,$){H=B(function(){Q(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_next=function(Q){switch(k){case 1:case 2:case 3:var $=3;break;default:$=k}var ie=k;k=$;try{return Q()}finally{k=ie}},e.unstable_requestPaint=function(){R=!0},e.unstable_runWithPriority=function(Q,$){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ie=k;k=Q;try{return $()}finally{k=ie}},e.unstable_scheduleCallback=function(Q,$,ie){var Ae=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Ae+ie:Ae):ie=Ae,Q){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ie+_e,Q={id:S++,callback:$,priorityLevel:Q,startTime:ie,expirationTime:_e,sortIndex:-1},ie>Ae?(Q.sortIndex=ie,s(_,Q),l(v)===null&&Q===l(_)&&(E?(A(H),H=-1):E=!0,ce(I,ie-Ae))):(Q.sortIndex=_e,s(v,Q),T||O||(T=!0,V||(V=!0,oe()))),Q},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(Q){var $=k;return function(){var ie=k;k=$;try{return Q.apply(this,arguments)}finally{k=ie}}}})(Rh)),Rh}var zy;function pj(){return zy||(zy=1,Oh.exports=fj()),Oh.exports}var Dh={exports:{}},xa={};var Oy;function xj(){if(Oy)return xa;Oy=1;var e=ep();function s(v){var _="https://react.dev/errors/"+v;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var o={d:{f:l,r:function(){throw Error(s(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},d=Symbol.for("react.portal");function m(v,_,S){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:w==null?null:""+w,children:v,containerInfo:_,implementation:S}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,_){if(v==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return xa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,xa.createPortal=function(v,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(s(299));return m(v,_,null,S)},xa.flushSync=function(v){var _=f.T,S=o.p;try{if(f.T=null,o.p=2,v)return v()}finally{f.T=_,o.p=S,o.d.f()}},xa.preconnect=function(v,_){typeof v=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,o.d.C(v,_))},xa.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},xa.preinit=function(v,_){if(typeof v=="string"&&_&&typeof _.as=="string"){var S=_.as,w=g(S,_.crossOrigin),k=typeof _.integrity=="string"?_.integrity:void 0,O=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?o.d.S(v,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:w,integrity:k,fetchPriority:O}):S==="script"&&o.d.X(v,{crossOrigin:w,integrity:k,fetchPriority:O,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},xa.preinitModule=function(v,_){if(typeof v=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=g(_.as,_.crossOrigin);o.d.M(v,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&o.d.M(v)},xa.preload=function(v,_){if(typeof v=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,w=g(S,_.crossOrigin);o.d.L(v,S,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},xa.preloadModule=function(v,_){if(typeof v=="string")if(_){var S=g(_.as,_.crossOrigin);o.d.m(v,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else o.d.m(v)},xa.requestFormReset=function(v){o.d.r(v)},xa.unstable_batchedUpdates=function(v,_){return v(_)},xa.useFormState=function(v,_,S){return f.H.useFormState(v,_,S)},xa.useFormStatus=function(){return f.H.useHostTransitionStatus()},xa.version="19.2.4",xa}var Ry;function Uv(){if(Ry)return Dh.exports;Ry=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(s){console.error(s)}}return e(),Dh.exports=xj(),Dh.exports}var Dy;function gj(){if(Dy)return Jo;Dy=1;var e=pj(),s=ep(),l=Uv();function o(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var a=t,r=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(r=a.return),t=a.return;while(t)}return a.tag===3?r:null}function f(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function v(t){if(m(t)!==t)throw Error(o(188))}function _(t){var a=t.alternate;if(!a){if(a=m(t),a===null)throw Error(o(188));return a!==t?null:t}for(var r=t,u=a;;){var p=r.return;if(p===null)break;var x=p.alternate;if(x===null){if(u=p.return,u!==null){r=u;continue}break}if(p.child===x.child){for(x=p.child;x;){if(x===r)return v(p),t;if(x===u)return v(p),a;x=x.sibling}throw Error(o(188))}if(r.return!==u.return)r=p,u=x;else{for(var j=!1,M=p.child;M;){if(M===r){j=!0,r=p,u=x;break}if(M===u){j=!0,u=p,r=x;break}M=M.sibling}if(!j){for(M=x.child;M;){if(M===r){j=!0,r=x,u=p;break}if(M===u){j=!0,u=x,r=p;break}M=M.sibling}if(!j)throw Error(o(189))}}if(r.alternate!==u)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?t:a}function S(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=S(t),a!==null)return a;t=t.sibling}return null}var w=Object.assign,k=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),z=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function oe(t){return t===null||typeof t!="object"?null:(t=te&&t[te]||t["@@iterator"],typeof t=="function"?t:null)}var je=Symbol.for("react.client.reference");function ue(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===je?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case E:return"Fragment";case B:return"Profiler";case R:return"StrictMode";case I:return"Suspense";case V:return"SuspenseList";case X:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case T:return"Portal";case z:return t.displayName||"Context";case A:return(t._context.displayName||"Context")+".Consumer";case Z:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case H:return a=t.displayName||null,a!==null?a:ue(t.type)||"Memo";case ee:a=t._payload,t=t._init;try{return ue(t(a))}catch{}}return null}var ce=Array.isArray,Q=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},Ae=[],_e=-1;function D(t){return{current:t}}function ae(t){0>_e||(t.current=Ae[_e],Ae[_e]=null,_e--)}function F(t,a){_e++,Ae[_e]=t.current,t.current=a}var me=D(null),de=D(null),Ee=D(null),Oe=D(null);function Qe(t,a){switch(F(Ee,a),F(de,t),F(me,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Yg(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Yg(a),t=Jg(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ae(me),F(me,t)}function pe(){ae(me),ae(de),ae(Ee)}function Ve(t){t.memoizedState!==null&&F(Oe,t);var a=me.current,r=Jg(a,t.type);a!==r&&(F(de,t),F(me,r))}function Ye(t){de.current===t&&(ae(me),ae(de)),Oe.current===t&&(ae(Oe),Go._currentValue=ie)}var Ot,ft;function ze(t){if(Ot===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);Ot=a&&a[1]||"",ft=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ot+t+ft}var at=!1;function pt(t,a){if(!t||at)return"";at=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(ye){var ge=ye}Reflect.construct(t,[],Ce)}else{try{Ce.call()}catch(ye){ge=ye}t.call(Ce.prototype)}}else{try{throw Error()}catch(ye){ge=ye}(Ce=t())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(ye){if(ye&&ge&&typeof ye.stack=="string")return[ye.stack,ge.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=u.DetermineComponentFrameRoot(),j=x[0],M=x[1];if(j&&M){var Y=j.split(`
`),fe=M.split(`
`);for(p=u=0;u<Y.length&&!Y[u].includes("DetermineComponentFrameRoot");)u++;for(;p<fe.length&&!fe[p].includes("DetermineComponentFrameRoot");)p++;if(u===Y.length||p===fe.length)for(u=Y.length-1,p=fe.length-1;1<=u&&0<=p&&Y[u]!==fe[p];)p--;for(;1<=u&&0<=p;u--,p--)if(Y[u]!==fe[p]){if(u!==1||p!==1)do if(u--,p--,0>p||Y[u]!==fe[p]){var Ne=`
`+Y[u].replace(" at new "," at ");return t.displayName&&Ne.includes("<anonymous>")&&(Ne=Ne.replace("<anonymous>",t.displayName)),Ne}while(1<=u&&0<=p);break}}}finally{at=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?ze(r):""}function Rt(t,a){switch(t.tag){case 26:case 27:case 5:return ze(t.type);case 16:return ze("Lazy");case 13:return t.child!==a&&a!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return pt(t.type,!1);case 11:return pt(t.type.render,!1);case 1:return pt(t.type,!0);case 31:return ze("Activity");default:return""}}function It(t){try{var a="",r=null;do a+=Rt(t,r),r=t,t=t.return;while(t);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Qt=Object.prototype.hasOwnProperty,ne=e.unstable_scheduleCallback,Se=e.unstable_cancelCallback,Pe=e.unstable_shouldYield,Tt=e.unstable_requestPaint,se=e.unstable_now,He=e.unstable_getCurrentPriorityLevel,_t=e.unstable_ImmediatePriority,pn=e.unstable_UserBlockingPriority,Lt=e.unstable_NormalPriority,rt=e.unstable_LowPriority,Gn=e.unstable_IdlePriority,be=e.log,et=e.unstable_setDisableYieldValue,lt=null,Nt=null;function Vt(t){if(typeof be=="function"&&et(t),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(lt,t)}catch{}}var Dt=Math.clz32?Math.clz32:Pt,Xt=Math.log,Bn=Math.LN2;function Pt(t){return t>>>=0,t===0?32:31-(Xt(t)/Bn|0)|0}var ut=256,dn=262144,jn=4194304;function We(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function kn(t,a,r){var u=t.pendingLanes;if(u===0)return 0;var p=0,x=t.suspendedLanes,j=t.pingedLanes;t=t.warmLanes;var M=u&134217727;return M!==0?(u=M&~x,u!==0?p=We(u):(j&=M,j!==0?p=We(j):r||(r=M&~t,r!==0&&(p=We(r))))):(M=u&~x,M!==0?p=We(M):j!==0?p=We(j):r||(r=u&~t,r!==0&&(p=We(r)))),p===0?0:a!==0&&a!==p&&(a&x)===0&&(x=p&-p,r=a&-a,x>=r||x===32&&(r&4194048)!==0)?a:p}function gt(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Wa(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dn(){var t=jn;return jn<<=1,(jn&62914560)===0&&(jn=4194304),t}function Kt(t){for(var a=[],r=0;31>r;r++)a.push(t);return a}function $n(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function es(t,a,r,u,p,x){var j=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var M=t.entanglements,Y=t.expirationTimes,fe=t.hiddenUpdates;for(r=j&~r;0<r;){var Ne=31-Dt(r),Ce=1<<Ne;M[Ne]=0,Y[Ne]=-1;var ge=fe[Ne];if(ge!==null)for(fe[Ne]=null,Ne=0;Ne<ge.length;Ne++){var ye=ge[Ne];ye!==null&&(ye.lane&=-536870913)}r&=~Ce}u!==0&&J(t,u,0),x!==0&&p===0&&t.tag!==0&&(t.suspendedLanes|=x&~(j&~a))}function J(t,a,r){t.pendingLanes|=a,t.suspendedLanes&=~a;var u=31-Dt(a);t.entangledLanes|=a,t.entanglements[u]=t.entanglements[u]|1073741824|r&261930}function qe(t,a){var r=t.entangledLanes|=a;for(t=t.entanglements;r;){var u=31-Dt(r),p=1<<u;p&a|t[u]&a&&(t[u]|=a),r&=~p}}function xn(t,a){var r=a&-a;return r=(r&42)!==0?1:ht(r),(r&(t.suspendedLanes|a))!==0?0:r}function ht(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ue(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function sn(){var t=$.p;return t!==0?t:(t=window.event,t===void 0?32:by(t.type))}function yn(t,a){var r=$.p;try{return $.p=t,a()}finally{$.p=r}}var En=Math.random().toString(36).slice(2),Wt="__reactFiber$"+En,hn="__reactProps$"+En,sa="__reactContainer$"+En,K="__reactEvents$"+En,De="__reactListeners$"+En,dt="__reactHandles$"+En,Qn="__reactResources$"+En,Tn="__reactMarker$"+En;function q(t){delete t[Wt],delete t[hn],delete t[K],delete t[De],delete t[dt]}function Ze(t){var a=t[Wt];if(a)return a;for(var r=t.parentNode;r;){if(a=r[sa]||r[Wt]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(t=sy(t);t!==null;){if(r=t[Wt])return r;t=sy(t)}return a}t=r,r=t.parentNode}return null}function St(t){if(t=t[Wt]||t[sa]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Un(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(o(33))}function Sa(t){var a=t[Qn];return a||(a=t[Qn]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function vn(t){t[Tn]=!0}var rn=new Set,mr={};function bs(t,a){ts(t,a),ts(t+"Capture",a)}function ts(t,a){for(mr[t]=a,t=0;t<a.length;t++)rn.add(a[t])}var ns=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bt={},Ws={};function ei(t){return Qt.call(Ws,t)?!0:Qt.call(Bt,t)?!1:ns.test(t)?Ws[t]=!0:(Bt[t]=!0,!1)}function jt(t,a,r){if(ei(a))if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+r)}}function Ut(t,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+r)}}function ia(t,a,r,u){if(u===null)t.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(a,r,""+u)}}function Ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wa(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function zs(t,a,r){var u=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,x=u.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return p.call(this)},set:function(j){r=""+j,x.call(this,j)}}),Object.defineProperty(t,a,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(j){r=""+j},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function ot(t){if(!t._valueTracker){var a=wa(t)?"checked":"value";t._valueTracker=zs(t,a,""+t[a])}}function ln(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var r=a.getValue(),u="";return t&&(u=wa(t)?t.checked?"true":"false":t.value),t=u,t!==r?(a.setValue(t),!0):!1}function Os(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Si=/[\n"\\]/g;function en(t){return t.replace(Si,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ti(t,a,r,u,p,x,j,M){t.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?t.type=j:t.removeAttribute("type"),a!=null?j==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Ln(a)):t.value!==""+Ln(a)&&(t.value=""+Ln(a)):j!=="submit"&&j!=="reset"||t.removeAttribute("value"),a!=null?U(t,j,Ln(a)):r!=null?U(t,j,Ln(r)):u!=null&&t.removeAttribute("value"),p==null&&x!=null&&(t.defaultChecked=!!x),p!=null&&(t.checked=p&&typeof p!="function"&&typeof p!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?t.name=""+Ln(M):t.removeAttribute("name")}function Rs(t,a,r,u,p,x,j,M){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.type=x),a!=null||r!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){ot(t);return}r=r!=null?""+Ln(r):"",a=a!=null?""+Ln(a):r,M||a===t.value||(t.value=a),t.defaultValue=a}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=M?t.checked:!!u,t.defaultChecked=!!u,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(t.name=j),ot(t)}function U(t,a,r){a==="number"&&Os(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Re(t,a,r,u){if(t=t.options,a){a={};for(var p=0;p<r.length;p++)a["$"+r[p]]=!0;for(r=0;r<t.length;r++)p=a.hasOwnProperty("$"+t[r].value),t[r].selected!==p&&(t[r].selected=p),p&&u&&(t[r].defaultSelected=!0)}else{for(r=""+Ln(r),a=null,p=0;p<t.length;p++){if(t[p].value===r){t[p].selected=!0,u&&(t[p].defaultSelected=!0);return}a!==null||t[p].disabled||(a=t[p])}a!==null&&(a.selected=!0)}}function yt(t,a,r){if(a!=null&&(a=""+Ln(a),a!==t.value&&(t.value=a),r==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=r!=null?""+Ln(r):""}function ra(t,a,r,u){if(a==null){if(u!=null){if(r!=null)throw Error(o(92));if(ce(u)){if(1<u.length)throw Error(o(93));u=u[0]}r=u}r==null&&(r=""),a=r}r=Ln(a),t.defaultValue=r,u=t.textContent,u===r&&u!==""&&u!==null&&(t.value=u),ot(t)}function la(t,a){if(a){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=a;return}}t.textContent=a}var wi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _s(t,a,r){var u=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":u?t.setProperty(a,r):typeof r!="number"||r===0||wi.has(a)?a==="float"?t.cssFloat=r:t[a]=(""+r).trim():t[a]=r+"px"}function nl(t,a,r){if(a!=null&&typeof a!="object")throw Error(o(62));if(t=t.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var p in a)u=a[p],a.hasOwnProperty(p)&&r[p]!==u&&_s(t,p,u)}else for(var x in a)a.hasOwnProperty(x)&&_s(t,x,a[x])}function hr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var al=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),no=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ki(t){return no.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ka(){}var sl=null;function fr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ei=null,it=null;function Fa(t){var a=St(t);if(a&&(t=a.stateNode)){var r=t[hn]||null;e:switch(t=a.stateNode,a.type){case"input":if(ti(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+en(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var u=r[a];if(u!==t&&u.form===t.form){var p=u[hn]||null;if(!p)throw Error(o(90));ti(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<r.length;a++)u=r[a],u.form===t.form&&ln(u)}break e;case"textarea":yt(t,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&Re(t,!!r.multiple,a,!1)}}}var Yt=!1;function ao(t,a,r){if(Yt)return t(a,r);Yt=!0;try{var u=t(a);return u}finally{if(Yt=!1,(Ei!==null||it!==null)&&(vu(),Ei&&(a=Ei,t=it,it=Ei=null,Fa(a),t)))for(a=0;a<t.length;a++)Fa(t[a])}}function ni(t,a){var r=t.stateNode;if(r===null)return null;var u=r[hn]||null;if(u===null)return null;r=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(o(231,a,typeof r));return r}var qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pr=!1;if(qa)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){pr=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{pr=!1}var as=null,ai=null,Cn=null;function Ds(){if(Cn)return Cn;var t,a=ai,r=a.length,u,p="value"in as?as.value:as.textContent,x=p.length;for(t=0;t<r&&a[t]===p[t];t++);var j=r-t;for(u=1;u<=j&&a[r-u]===p[x-u];u++);return Cn=p.slice(t,1<u?1-u:void 0)}function xr(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function gr(){return!0}function Sc(){return!1}function oa(t){function a(r,u,p,x,j){this._reactName=r,this._targetInst=p,this.type=u,this.nativeEvent=x,this.target=j,this.currentTarget=null;for(var M in t)t.hasOwnProperty(M)&&(r=t[M],this[M]=r?r(x):x[M]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?gr:Sc,this.isPropagationStopped=Sc,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=gr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=gr)},persist:function(){},isPersistent:gr}),a}var Ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},il=oa(Ns),Ti=w({},Ns,{view:0,detail:0}),Ct=oa(Ti),so,va,js,yr=w({},Ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==js&&(js&&t.type==="mousemove"?(so=t.screenX-js.screenX,va=t.screenY-js.screenY):va=so=0,js=t),so)},movementY:function(t){return"movementY"in t?t.movementY:va}}),wc=oa(yr),io=w({},yr,{dataTransfer:0}),Ud=oa(io),kc=w({},Ti,{relatedTarget:0}),ro=oa(kc),Fd=w({},Ns,{animationName:0,elapsedTime:0,pseudoElement:0}),lo=oa(Fd),qd=w({},Ns,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ss=oa(qd),Zd=w({},Ns,{data:0}),oo=oa(Zd),Ls={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function co(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=Tc[t])?!!a[t]:!1}function uo(){return co}var Cc=w({},Ti,{key:function(t){if(t.key){var a=Ls[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=xr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ec[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uo,charCode:function(t){return t.type==="keypress"?xr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ac=oa(Cc),Hd=w({},yr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mc=oa(Hd),mo=w({},Ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uo}),Kd=oa(mo),zc=w({},Ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oc=oa(zc),rl=w({},yr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),si=oa(rl),Gd=w({},Ns,{newState:0,oldState:0}),vr=oa(Gd),Ea=[9,13,27,32],ll=qa&&"CompositionEvent"in window,Ci=null;qa&&"documentMode"in document&&(Ci=document.documentMode);var $d=qa&&"TextEvent"in window&&!Ci,ol=qa&&(!ll||Ci&&8<Ci&&11>=Ci),cl=" ",Rc=!1;function Dc(t,a){switch(t){case"keyup":return Ea.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ho(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ai=!1;function Ha(t,a){switch(t){case"compositionend":return ho(a);case"keypress":return a.which!==32?null:(Rc=!0,cl);case"textInput":return t=a.data,t===cl&&Rc?null:t;default:return null}}function Mi(t,a){if(Ai)return t==="compositionend"||!ll&&Dc(t,a)?(t=Ds(),Cn=ai=as=null,Ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ol&&a.locale!=="ko"?null:a.data;default:return null}}var Qd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function is(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!Qd[t.type]:a==="textarea"}function Lc(t,a,r,u){Ei?it?it.push(u):it=[u]:Ei=u,a=ku(a,"onChange"),0<a.length&&(r=new il("onChange","change",null,r,u),t.push({event:r,listeners:a}))}var rs=null,br=null;function _r(t){Hg(t,0)}function Nr(t){var a=Un(t);if(ln(a))return t}function jr(t,a){if(t==="change")return a}var Pc=!1;if(qa){var ls;if(qa){var zi="oninput"in document;if(!zi){var Ic=document.createElement("div");Ic.setAttribute("oninput","return;"),zi=typeof Ic.oninput=="function"}ls=zi}else ls=!1;Pc=ls&&(!document.documentMode||9<document.documentMode)}function ul(){rs&&(rs.detachEvent("onpropertychange",Bc),br=rs=null)}function Bc(t){if(t.propertyName==="value"&&Nr(br)){var a=[];Lc(a,br,t,fr(t)),ao(_r,a)}}function Ss(t,a,r){t==="focusin"?(ul(),rs=a,br=r,rs.attachEvent("onpropertychange",Bc)):t==="focusout"&&ul()}function Vd(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nr(br)}function Oi(t,a){if(t==="click")return Nr(a)}function Yd(t,a){if(t==="input"||t==="change")return Nr(a)}function ws(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var ea=typeof Object.is=="function"?Object.is:ws;function Ri(t,a){if(ea(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var r=Object.keys(t),u=Object.keys(a);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var p=r[u];if(!Qt.call(a,p)||!ea(t[p],a[p]))return!1}return!0}function dl(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sr(t,a){var r=dl(t);t=0;for(var u;r;){if(r.nodeType===3){if(u=t+r.textContent.length,t<=a&&u>=a)return{node:r,offset:a-t};t=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dl(r)}}function ml(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?ml(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function wr(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=Os(t.document);a instanceof t.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)t=a.contentWindow;else break;a=Os(t.document)}return a}function Ps(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var hl=qa&&"documentMode"in document&&11>=document.documentMode,Is=null,fl=null,kr=null,Di=!1;function Uc(t,a,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Di||Is==null||Is!==Os(u)||(u=Is,"selectionStart"in u&&Ps(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),kr&&Ri(kr,u)||(kr=u,u=ku(fl,"onSelect"),0<u.length&&(a=new il("onSelect","select",null,a,r),t.push({event:a,listeners:u}),a.target=Is)))}function Bs(t,a){var r={};return r[t.toLowerCase()]=a.toLowerCase(),r["Webkit"+t]="webkit"+a,r["Moz"+t]="moz"+a,r}var Li={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},pl={},Fc={};qa&&(Fc=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function ta(t){if(pl[t])return pl[t];if(!Li[t])return t;var a=Li[t],r;for(r in a)if(a.hasOwnProperty(r)&&r in Fc)return pl[t]=a[r];return t}var Er=ta("animationend"),qc=ta("animationiteration"),Tr=ta("animationstart"),Jd=ta("transitionrun"),Zc=ta("transitionstart"),Xd=ta("transitioncancel"),Pi=ta("transitionend"),Hc=new Map,Us="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Us.push("scrollEnd");function Ta(t,a){Hc.set(t,a),bs(a,[t])}var Cr=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ca=[],fa=0,xl=0;function Ar(){for(var t=fa,a=xl=fa=0;a<t;){var r=Ca[a];Ca[a++]=null;var u=Ca[a];Ca[a++]=null;var p=Ca[a];Ca[a++]=null;var x=Ca[a];if(Ca[a++]=null,u!==null&&p!==null){var j=u.pending;j===null?p.next=p:(p.next=j.next,j.next=p),u.pending=p}x!==0&&Ii(r,p,x)}}function Fs(t,a,r,u){Ca[fa++]=t,Ca[fa++]=a,Ca[fa++]=r,Ca[fa++]=u,xl|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function fo(t,a,r,u){return Fs(t,a,r,u),Mr(t)}function os(t,a){return Fs(t,null,null,a),Mr(t)}function Ii(t,a,r){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r);for(var p=!1,x=t.return;x!==null;)x.childLanes|=r,u=x.alternate,u!==null&&(u.childLanes|=r),x.tag===22&&(t=x.stateNode,t===null||t._visibility&1||(p=!0)),t=x,x=x.return;return t.tag===3?(x=t.stateNode,p&&a!==null&&(p=31-Dt(r),t=x.hiddenUpdates,u=t[p],u===null?t[p]=[a]:u.push(a),a.lane=r|536870912),x):null}function Mr(t){if(50<Bo)throw Bo=0,eh=null,Error(o(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var ii={};function Wd(t,a,r,u){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pa(t,a,r,u){return new Wd(t,a,r,u)}function gl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cs(t,a){var r=t.alternate;return r===null?(r=pa(t.tag,a,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=a,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,a=t.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function po(t,a){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,a=r.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function zr(t,a,r,u,p,x){var j=0;if(u=t,typeof t=="function")gl(t)&&(j=1);else if(typeof t=="string")j=XN(t,r,me.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case X:return t=pa(31,r,a,p),t.elementType=X,t.lanes=x,t;case E:return ri(r.children,p,x,a);case R:j=8,p|=24;break;case B:return t=pa(12,r,a,p|2),t.elementType=B,t.lanes=x,t;case I:return t=pa(13,r,a,p),t.elementType=I,t.lanes=x,t;case V:return t=pa(19,r,a,p),t.elementType=V,t.lanes=x,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z:j=10;break e;case A:j=9;break e;case Z:j=11;break e;case H:j=14;break e;case ee:j=16,u=null;break e}j=29,r=Error(o(130,t===null?"null":typeof t,"")),u=null}return a=pa(j,r,a,p),a.elementType=t,a.type=u,a.lanes=x,a}function ri(t,a,r,u){return t=pa(7,t,u,a),t.lanes=r,t}function yl(t,a,r){return t=pa(6,t,null,a),t.lanes=r,t}function xo(t){var a=pa(18,null,null,0);return a.stateNode=t,a}function go(t,a,r){return a=pa(4,t.children!==null?t.children:[],t.key,a),a.lanes=r,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var i=new WeakMap;function c(t,a){if(typeof t=="object"&&t!==null){var r=i.get(t);return r!==void 0?r:(a={value:t,source:a,stack:It(a)},i.set(t,a),a)}return{value:t,source:a,stack:It(a)}}var h=[],y=0,N=null,C=0,G=[],le=0,xe=null,Te=1,Le="";function Xe(t,a){h[y++]=C,h[y++]=N,N=t,C=a}function vt(t,a,r){G[le++]=Te,G[le++]=Le,G[le++]=xe,xe=t;var u=Te;t=Le;var p=32-Dt(u)-1;u&=~(1<<p),r+=1;var x=32-Dt(a)+p;if(30<x){var j=p-p%5;x=(u&(1<<j)-1).toString(32),u>>=j,p-=j,Te=1<<32-Dt(a)+p|r<<p|u,Le=x+t}else Te=1<<x|r<<p|u,Le=t}function Vn(t){t.return!==null&&(Xe(t,1),vt(t,1,0))}function An(t){for(;t===N;)N=h[--y],h[y]=null,C=h[--y],h[y]=null;for(;t===xe;)xe=G[--le],G[le]=null,Le=G[--le],G[le]=null,Te=G[--le],G[le]=null}function ba(t,a){G[le++]=Te,G[le++]=Le,G[le++]=xe,Te=a.id,Le=a.overflow,xe=t}var Ft=null,qt=null,wt=!1,qs=null,Aa=!1,vl=Error(o(519));function Zs(t){var a=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Or(c(a,t)),vl}function yo(t){var a=t.stateNode,r=t.type,u=t.memoizedProps;switch(a[Wt]=t,a[hn]=u,r){case"dialog":Et("cancel",a),Et("close",a);break;case"iframe":case"object":case"embed":Et("load",a);break;case"video":case"audio":for(r=0;r<Fo.length;r++)Et(Fo[r],a);break;case"source":Et("error",a);break;case"img":case"image":case"link":Et("error",a),Et("load",a);break;case"details":Et("toggle",a);break;case"input":Et("invalid",a),Rs(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Et("invalid",a);break;case"textarea":Et("invalid",a),ra(a,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||u.suppressHydrationWarning===!0||Qg(a.textContent,r)?(u.popover!=null&&(Et("beforetoggle",a),Et("toggle",a)),u.onScroll!=null&&Et("scroll",a),u.onScrollEnd!=null&&Et("scrollend",a),u.onClick!=null&&(a.onclick=ka),a=!0):a=!1,a||Zs(t,!0)}function Sn(t){for(Ft=t.return;Ft;)switch(Ft.tag){case 5:case 31:case 13:Aa=!1;return;case 27:case 3:Aa=!0;return;default:Ft=Ft.return}}function ks(t){if(t!==Ft)return!1;if(!wt)return Sn(t),wt=!0,!1;var a=t.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||ph(t.type,t.memoizedProps)),r=!r),r&&qt&&Zs(t),Sn(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));qt=ay(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));qt=ay(t)}else a===27?(a=qt,Xi(t.type)?(t=bh,bh=null,qt=t):qt=a):qt=Ft?ds(t.stateNode.nextSibling):null;return!0}function li(){qt=Ft=null,wt=!1}function vo(){var t=qs;return t!==null&&(Ra===null?Ra=t:Ra.push.apply(Ra,t),qs=null),t}function Or(t){qs===null?qs=[t]:qs.push(t)}var Rr=D(null),Hs=null,Es=null;function Bi(t,a,r){F(Rr,a._currentValue),a._currentValue=r}function oi(t){t._currentValue=Rr.current,ae(Rr)}function em(t,a,r){for(;t!==null;){var u=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),t===r)break;t=t.return}}function tm(t,a,r,u){var p=t.child;for(p!==null&&(p.return=t);p!==null;){var x=p.dependencies;if(x!==null){var j=p.child;x=x.firstContext;e:for(;x!==null;){var M=x;x=p;for(var Y=0;Y<a.length;Y++)if(M.context===a[Y]){x.lanes|=r,M=x.alternate,M!==null&&(M.lanes|=r),em(x.return,r,t),u||(j=null);break e}x=M.next}}else if(p.tag===18){if(j=p.return,j===null)throw Error(o(341));j.lanes|=r,x=j.alternate,x!==null&&(x.lanes|=r),em(j,r,t),j=null}else j=p.child;if(j!==null)j.return=p;else for(j=p;j!==null;){if(j===t){j=null;break}if(p=j.sibling,p!==null){p.return=j.return,j=p;break}j=j.return}p=j}}function bl(t,a,r,u){t=null;for(var p=a,x=!1;p!==null;){if(!x){if((p.flags&524288)!==0)x=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var j=p.alternate;if(j===null)throw Error(o(387));if(j=j.memoizedProps,j!==null){var M=p.type;ea(p.pendingProps.value,j.value)||(t!==null?t.push(M):t=[M])}}else if(p===Oe.current){if(j=p.alternate,j===null)throw Error(o(387));j.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(t!==null?t.push(Go):t=[Go])}p=p.return}t!==null&&tm(a,t,r,u),a.flags|=262144}function Kc(t){for(t=t.firstContext;t!==null;){if(!ea(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Dr(t){Hs=t,Es=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ca(t){return Op(Hs,t)}function Gc(t,a){return Hs===null&&Dr(t),Op(t,a)}function Op(t,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},Es===null){if(t===null)throw Error(o(308));Es=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Es=Es.next=a;return r}var Q_=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(r,u){t.push(u)}};this.abort=function(){a.aborted=!0,t.forEach(function(r){return r()})}},V_=e.unstable_scheduleCallback,Y_=e.unstable_NormalPriority,Fn={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nm(){return{controller:new Q_,data:new Map,refCount:0}}function bo(t){t.refCount--,t.refCount===0&&V_(Y_,function(){t.controller.abort()})}var _o=null,am=0,_l=0,Nl=null;function J_(t,a){if(_o===null){var r=_o=[];am=0,_l=rh(),Nl={status:"pending",value:void 0,then:function(u){r.push(u)}}}return am++,a.then(Rp,Rp),a}function Rp(){if(--am===0&&_o!==null){Nl!==null&&(Nl.status="fulfilled");var t=_o;_o=null,_l=0,Nl=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function X_(t,a){var r=[],u={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return t.then(function(){u.status="fulfilled",u.value=a;for(var p=0;p<r.length;p++)(0,r[p])(a)},function(p){for(u.status="rejected",u.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),u}var Dp=Q.S;Q.S=function(t,a){yg=se(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&J_(t,a),Dp!==null&&Dp(t,a)};var Lr=D(null);function sm(){var t=Lr.current;return t!==null?t:mn.pooledCache}function $c(t,a){a===null?F(Lr,Lr.current):F(Lr,a.pool)}function Lp(){var t=sm();return t===null?null:{parent:Fn._currentValue,pool:t}}var jl=Error(o(460)),im=Error(o(474)),Qc=Error(o(542)),Vc={then:function(){}};function Pp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ip(t,a,r){switch(r=t[r],r===void 0?t.push(a):r!==a&&(a.then(ka,ka),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Up(t),t;default:if(typeof a.status=="string")a.then(ka,ka);else{if(t=mn,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=a,t.status="pending",t.then(function(u){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=u}},function(u){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Up(t),t}throw Ir=a,jl}}function Pr(t){try{var a=t._init;return a(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Ir=r,jl):r}}var Ir=null;function Bp(){if(Ir===null)throw Error(o(459));var t=Ir;return Ir=null,t}function Up(t){if(t===jl||t===Qc)throw Error(o(483))}var Sl=null,No=0;function Yc(t){var a=No;return No+=1,Sl===null&&(Sl=[]),Ip(Sl,t,a)}function jo(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Jc(t,a){throw a.$$typeof===k?Error(o(525)):(t=Object.prototype.toString.call(a),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Fp(t){function a(re,W){if(t){var he=re.deletions;he===null?(re.deletions=[W],re.flags|=16):he.push(W)}}function r(re,W){if(!t)return null;for(;W!==null;)a(re,W),W=W.sibling;return null}function u(re){for(var W=new Map;re!==null;)re.key!==null?W.set(re.key,re):W.set(re.index,re),re=re.sibling;return W}function p(re,W){return re=cs(re,W),re.index=0,re.sibling=null,re}function x(re,W,he){return re.index=he,t?(he=re.alternate,he!==null?(he=he.index,he<W?(re.flags|=67108866,W):he):(re.flags|=67108866,W)):(re.flags|=1048576,W)}function j(re){return t&&re.alternate===null&&(re.flags|=67108866),re}function M(re,W,he,we){return W===null||W.tag!==6?(W=yl(he,re.mode,we),W.return=re,W):(W=p(W,he),W.return=re,W)}function Y(re,W,he,we){var tt=he.type;return tt===E?Ne(re,W,he.props.children,we,he.key):W!==null&&(W.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===ee&&Pr(tt)===W.type)?(W=p(W,he.props),jo(W,he),W.return=re,W):(W=zr(he.type,he.key,he.props,null,re.mode,we),jo(W,he),W.return=re,W)}function fe(re,W,he,we){return W===null||W.tag!==4||W.stateNode.containerInfo!==he.containerInfo||W.stateNode.implementation!==he.implementation?(W=go(he,re.mode,we),W.return=re,W):(W=p(W,he.children||[]),W.return=re,W)}function Ne(re,W,he,we,tt){return W===null||W.tag!==7?(W=ri(he,re.mode,we,tt),W.return=re,W):(W=p(W,he),W.return=re,W)}function Ce(re,W,he){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=yl(""+W,re.mode,he),W.return=re,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case O:return he=zr(W.type,W.key,W.props,null,re.mode,he),jo(he,W),he.return=re,he;case T:return W=go(W,re.mode,he),W.return=re,W;case ee:return W=Pr(W),Ce(re,W,he)}if(ce(W)||oe(W))return W=ri(W,re.mode,he,null),W.return=re,W;if(typeof W.then=="function")return Ce(re,Yc(W),he);if(W.$$typeof===z)return Ce(re,Gc(re,W),he);Jc(re,W)}return null}function ge(re,W,he,we){var tt=W!==null?W.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return tt!==null?null:M(re,W,""+he,we);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case O:return he.key===tt?Y(re,W,he,we):null;case T:return he.key===tt?fe(re,W,he,we):null;case ee:return he=Pr(he),ge(re,W,he,we)}if(ce(he)||oe(he))return tt!==null?null:Ne(re,W,he,we,null);if(typeof he.then=="function")return ge(re,W,Yc(he),we);if(he.$$typeof===z)return ge(re,W,Gc(re,he),we);Jc(re,he)}return null}function ye(re,W,he,we,tt){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return re=re.get(he)||null,M(W,re,""+we,tt);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case O:return re=re.get(we.key===null?he:we.key)||null,Y(W,re,we,tt);case T:return re=re.get(we.key===null?he:we.key)||null,fe(W,re,we,tt);case ee:return we=Pr(we),ye(re,W,he,we,tt)}if(ce(we)||oe(we))return re=re.get(he)||null,Ne(W,re,we,tt,null);if(typeof we.then=="function")return ye(re,W,he,Yc(we),tt);if(we.$$typeof===z)return ye(re,W,he,Gc(W,we),tt);Jc(W,we)}return null}function Ke(re,W,he,we){for(var tt=null,Zt=null,Je=W,bt=W=0,Mt=null;Je!==null&&bt<he.length;bt++){Je.index>bt?(Mt=Je,Je=null):Mt=Je.sibling;var Ht=ge(re,Je,he[bt],we);if(Ht===null){Je===null&&(Je=Mt);break}t&&Je&&Ht.alternate===null&&a(re,Je),W=x(Ht,W,bt),Zt===null?tt=Ht:Zt.sibling=Ht,Zt=Ht,Je=Mt}if(bt===he.length)return r(re,Je),wt&&Xe(re,bt),tt;if(Je===null){for(;bt<he.length;bt++)Je=Ce(re,he[bt],we),Je!==null&&(W=x(Je,W,bt),Zt===null?tt=Je:Zt.sibling=Je,Zt=Je);return wt&&Xe(re,bt),tt}for(Je=u(Je);bt<he.length;bt++)Mt=ye(Je,re,bt,he[bt],we),Mt!==null&&(t&&Mt.alternate!==null&&Je.delete(Mt.key===null?bt:Mt.key),W=x(Mt,W,bt),Zt===null?tt=Mt:Zt.sibling=Mt,Zt=Mt);return t&&Je.forEach(function(ar){return a(re,ar)}),wt&&Xe(re,bt),tt}function st(re,W,he,we){if(he==null)throw Error(o(151));for(var tt=null,Zt=null,Je=W,bt=W=0,Mt=null,Ht=he.next();Je!==null&&!Ht.done;bt++,Ht=he.next()){Je.index>bt?(Mt=Je,Je=null):Mt=Je.sibling;var ar=ge(re,Je,Ht.value,we);if(ar===null){Je===null&&(Je=Mt);break}t&&Je&&ar.alternate===null&&a(re,Je),W=x(ar,W,bt),Zt===null?tt=ar:Zt.sibling=ar,Zt=ar,Je=Mt}if(Ht.done)return r(re,Je),wt&&Xe(re,bt),tt;if(Je===null){for(;!Ht.done;bt++,Ht=he.next())Ht=Ce(re,Ht.value,we),Ht!==null&&(W=x(Ht,W,bt),Zt===null?tt=Ht:Zt.sibling=Ht,Zt=Ht);return wt&&Xe(re,bt),tt}for(Je=u(Je);!Ht.done;bt++,Ht=he.next())Ht=ye(Je,re,bt,Ht.value,we),Ht!==null&&(t&&Ht.alternate!==null&&Je.delete(Ht.key===null?bt:Ht.key),W=x(Ht,W,bt),Zt===null?tt=Ht:Zt.sibling=Ht,Zt=Ht);return t&&Je.forEach(function(cj){return a(re,cj)}),wt&&Xe(re,bt),tt}function un(re,W,he,we){if(typeof he=="object"&&he!==null&&he.type===E&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case O:e:{for(var tt=he.key;W!==null;){if(W.key===tt){if(tt=he.type,tt===E){if(W.tag===7){r(re,W.sibling),we=p(W,he.props.children),we.return=re,re=we;break e}}else if(W.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===ee&&Pr(tt)===W.type){r(re,W.sibling),we=p(W,he.props),jo(we,he),we.return=re,re=we;break e}r(re,W);break}else a(re,W);W=W.sibling}he.type===E?(we=ri(he.props.children,re.mode,we,he.key),we.return=re,re=we):(we=zr(he.type,he.key,he.props,null,re.mode,we),jo(we,he),we.return=re,re=we)}return j(re);case T:e:{for(tt=he.key;W!==null;){if(W.key===tt)if(W.tag===4&&W.stateNode.containerInfo===he.containerInfo&&W.stateNode.implementation===he.implementation){r(re,W.sibling),we=p(W,he.children||[]),we.return=re,re=we;break e}else{r(re,W);break}else a(re,W);W=W.sibling}we=go(he,re.mode,we),we.return=re,re=we}return j(re);case ee:return he=Pr(he),un(re,W,he,we)}if(ce(he))return Ke(re,W,he,we);if(oe(he)){if(tt=oe(he),typeof tt!="function")throw Error(o(150));return he=tt.call(he),st(re,W,he,we)}if(typeof he.then=="function")return un(re,W,Yc(he),we);if(he.$$typeof===z)return un(re,W,Gc(re,he),we);Jc(re,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,W!==null&&W.tag===6?(r(re,W.sibling),we=p(W,he),we.return=re,re=we):(r(re,W),we=yl(he,re.mode,we),we.return=re,re=we),j(re)):r(re,W)}return function(re,W,he,we){try{No=0;var tt=un(re,W,he,we);return Sl=null,tt}catch(Je){if(Je===jl||Je===Qc)throw Je;var Zt=pa(29,Je,null,re.mode);return Zt.lanes=we,Zt.return=re,Zt}}}var Br=Fp(!0),qp=Fp(!1),Ui=!1;function rm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lm(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Fi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function qi(t,a,r){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Gt&2)!==0){var p=u.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),u.pending=a,a=Mr(t),Ii(t,null,r),a}return Fs(t,u,a,r),Mr(t)}function So(t,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var u=a.lanes;u&=t.pendingLanes,r|=u,a.lanes=r,qe(t,r)}}function om(t,a){var r=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var p=null,x=null;if(r=r.firstBaseUpdate,r!==null){do{var j={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};x===null?p=x=j:x=x.next=j,r=r.next}while(r!==null);x===null?p=x=a:x=x.next=a}else p=x=a;r={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:x,shared:u.shared,callbacks:u.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=a:t.next=a,r.lastBaseUpdate=a}var cm=!1;function wo(){if(cm){var t=Nl;if(t!==null)throw t}}function ko(t,a,r,u){cm=!1;var p=t.updateQueue;Ui=!1;var x=p.firstBaseUpdate,j=p.lastBaseUpdate,M=p.shared.pending;if(M!==null){p.shared.pending=null;var Y=M,fe=Y.next;Y.next=null,j===null?x=fe:j.next=fe,j=Y;var Ne=t.alternate;Ne!==null&&(Ne=Ne.updateQueue,M=Ne.lastBaseUpdate,M!==j&&(M===null?Ne.firstBaseUpdate=fe:M.next=fe,Ne.lastBaseUpdate=Y))}if(x!==null){var Ce=p.baseState;j=0,Ne=fe=Y=null,M=x;do{var ge=M.lane&-536870913,ye=ge!==M.lane;if(ye?(At&ge)===ge:(u&ge)===ge){ge!==0&&ge===_l&&(cm=!0),Ne!==null&&(Ne=Ne.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Ke=t,st=M;ge=a;var un=r;switch(st.tag){case 1:if(Ke=st.payload,typeof Ke=="function"){Ce=Ke.call(un,Ce,ge);break e}Ce=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=st.payload,ge=typeof Ke=="function"?Ke.call(un,Ce,ge):Ke,ge==null)break e;Ce=w({},Ce,ge);break e;case 2:Ui=!0}}ge=M.callback,ge!==null&&(t.flags|=64,ye&&(t.flags|=8192),ye=p.callbacks,ye===null?p.callbacks=[ge]:ye.push(ge))}else ye={lane:ge,tag:M.tag,payload:M.payload,callback:M.callback,next:null},Ne===null?(fe=Ne=ye,Y=Ce):Ne=Ne.next=ye,j|=ge;if(M=M.next,M===null){if(M=p.shared.pending,M===null)break;ye=M,M=ye.next,ye.next=null,p.lastBaseUpdate=ye,p.shared.pending=null}}while(!0);Ne===null&&(Y=Ce),p.baseState=Y,p.firstBaseUpdate=fe,p.lastBaseUpdate=Ne,x===null&&(p.shared.lanes=0),$i|=j,t.lanes=j,t.memoizedState=Ce}}function Zp(t,a){if(typeof t!="function")throw Error(o(191,t));t.call(a)}function Hp(t,a){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Zp(r[t],a)}var wl=D(null),Xc=D(0);function Kp(t,a){t=gi,F(Xc,t),F(wl,a),gi=t|a.baseLanes}function um(){F(Xc,gi),F(wl,wl.current)}function dm(){gi=Xc.current,ae(wl),ae(Xc)}var Ka=D(null),us=null;function Zi(t){var a=t.alternate;F(Pn,Pn.current&1),F(Ka,t),us===null&&(a===null||wl.current!==null||a.memoizedState!==null)&&(us=t)}function mm(t){F(Pn,Pn.current),F(Ka,t),us===null&&(us=t)}function Gp(t){t.tag===22?(F(Pn,Pn.current),F(Ka,t),us===null&&(us=t)):Hi()}function Hi(){F(Pn,Pn.current),F(Ka,Ka.current)}function Ga(t){ae(Ka),us===t&&(us=null),ae(Pn)}var Pn=D(0);function Wc(t){for(var a=t;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||yh(r)||vh(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ci=0,xt=null,on=null,qn=null,eu=!1,kl=!1,Ur=!1,tu=0,Eo=0,El=null,W_=0;function Mn(){throw Error(o(321))}function hm(t,a){if(a===null)return!1;for(var r=0;r<a.length&&r<t.length;r++)if(!ea(t[r],a[r]))return!1;return!0}function fm(t,a,r,u,p,x){return ci=x,xt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Q.H=t===null||t.memoizedState===null?Cx:Cm,Ur=!1,x=r(u,p),Ur=!1,kl&&(x=Qp(a,r,u,p)),$p(t),x}function $p(t){Q.H=Ao;var a=on!==null&&on.next!==null;if(ci=0,qn=on=xt=null,eu=!1,Eo=0,El=null,a)throw Error(o(300));t===null||Zn||(t=t.dependencies,t!==null&&Kc(t)&&(Zn=!0))}function Qp(t,a,r,u){xt=t;var p=0;do{if(kl&&(El=null),Eo=0,kl=!1,25<=p)throw Error(o(301));if(p+=1,qn=on=null,t.updateQueue!=null){var x=t.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}Q.H=Ax,x=a(r,u)}while(kl);return x}function eN(){var t=Q.H,a=t.useState()[0];return a=typeof a.then=="function"?To(a):a,t=t.useState()[0],(on!==null?on.memoizedState:null)!==t&&(xt.flags|=1024),a}function pm(){var t=tu!==0;return tu=0,t}function xm(t,a,r){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~r}function gm(t){if(eu){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}eu=!1}ci=0,qn=on=xt=null,kl=!1,Eo=tu=0,El=null}function _a(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?xt.memoizedState=qn=t:qn=qn.next=t,qn}function In(){if(on===null){var t=xt.alternate;t=t!==null?t.memoizedState:null}else t=on.next;var a=qn===null?xt.memoizedState:qn.next;if(a!==null)qn=a,on=t;else{if(t===null)throw xt.alternate===null?Error(o(467)):Error(o(310));on=t,t={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},qn===null?xt.memoizedState=qn=t:qn=qn.next=t}return qn}function nu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function To(t){var a=Eo;return Eo+=1,El===null&&(El=[]),t=Ip(El,t,a),a=xt,(qn===null?a.memoizedState:qn.next)===null&&(a=a.alternate,Q.H=a===null||a.memoizedState===null?Cx:Cm),t}function au(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return To(t);if(t.$$typeof===z)return ca(t)}throw Error(o(438,String(t)))}function ym(t){var a=null,r=xt.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var u=xt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=nu(),xt.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(t),u=0;u<t;u++)r[u]=P;return a.index++,r}function ui(t,a){return typeof a=="function"?a(t):a}function su(t){var a=In();return vm(a,on,t)}function vm(t,a,r){var u=t.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=r;var p=t.baseQueue,x=u.pending;if(x!==null){if(p!==null){var j=p.next;p.next=x.next,x.next=j}a.baseQueue=p=x,u.pending=null}if(x=t.baseState,p===null)t.memoizedState=x;else{a=p.next;var M=j=null,Y=null,fe=a,Ne=!1;do{var Ce=fe.lane&-536870913;if(Ce!==fe.lane?(At&Ce)===Ce:(ci&Ce)===Ce){var ge=fe.revertLane;if(ge===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),Ce===_l&&(Ne=!0);else if((ci&ge)===ge){fe=fe.next,ge===_l&&(Ne=!0);continue}else Ce={lane:0,revertLane:fe.revertLane,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},Y===null?(M=Y=Ce,j=x):Y=Y.next=Ce,xt.lanes|=ge,$i|=ge;Ce=fe.action,Ur&&r(x,Ce),x=fe.hasEagerState?fe.eagerState:r(x,Ce)}else ge={lane:Ce,revertLane:fe.revertLane,gesture:fe.gesture,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},Y===null?(M=Y=ge,j=x):Y=Y.next=ge,xt.lanes|=Ce,$i|=Ce;fe=fe.next}while(fe!==null&&fe!==a);if(Y===null?j=x:Y.next=M,!ea(x,t.memoizedState)&&(Zn=!0,Ne&&(r=Nl,r!==null)))throw r;t.memoizedState=x,t.baseState=j,t.baseQueue=Y,u.lastRenderedState=x}return p===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function bm(t){var a=In(),r=a.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=t;var u=r.dispatch,p=r.pending,x=a.memoizedState;if(p!==null){r.pending=null;var j=p=p.next;do x=t(x,j.action),j=j.next;while(j!==p);ea(x,a.memoizedState)||(Zn=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),r.lastRenderedState=x}return[x,u]}function Vp(t,a,r){var u=xt,p=In(),x=wt;if(x){if(r===void 0)throw Error(o(407));r=r()}else r=a();var j=!ea((on||p).memoizedState,r);if(j&&(p.memoizedState=r,Zn=!0),p=p.queue,jm(Xp.bind(null,u,p,t),[t]),p.getSnapshot!==a||j||qn!==null&&qn.memoizedState.tag&1){if(u.flags|=2048,Tl(9,{destroy:void 0},Jp.bind(null,u,p,r,a),null),mn===null)throw Error(o(349));x||(ci&127)!==0||Yp(u,a,r)}return r}function Yp(t,a,r){t.flags|=16384,t={getSnapshot:a,value:r},a=xt.updateQueue,a===null?(a=nu(),xt.updateQueue=a,a.stores=[t]):(r=a.stores,r===null?a.stores=[t]:r.push(t))}function Jp(t,a,r,u){a.value=r,a.getSnapshot=u,Wp(a)&&ex(t)}function Xp(t,a,r){return r(function(){Wp(a)&&ex(t)})}function Wp(t){var a=t.getSnapshot;t=t.value;try{var r=a();return!ea(t,r)}catch{return!0}}function ex(t){var a=os(t,2);a!==null&&Da(a,t,2)}function _m(t){var a=_a();if(typeof t=="function"){var r=t;if(t=r(),Ur){Vt(!0);try{r()}finally{Vt(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:t},a}function tx(t,a,r,u){return t.baseState=r,vm(t,on,typeof u=="function"?u:ui)}function tN(t,a,r,u,p){if(lu(t))throw Error(o(485));if(t=a.action,t!==null){var x={payload:p,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){x.listeners.push(j)}};Q.T!==null?r(!0):x.isTransition=!1,u(x),r=a.pending,r===null?(x.next=a.pending=x,nx(a,x)):(x.next=r.next,a.pending=r.next=x)}}function nx(t,a){var r=a.action,u=a.payload,p=t.state;if(a.isTransition){var x=Q.T,j={};Q.T=j;try{var M=r(p,u),Y=Q.S;Y!==null&&Y(j,M),ax(t,a,M)}catch(fe){Nm(t,a,fe)}finally{x!==null&&j.types!==null&&(x.types=j.types),Q.T=x}}else try{x=r(p,u),ax(t,a,x)}catch(fe){Nm(t,a,fe)}}function ax(t,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){sx(t,a,u)},function(u){return Nm(t,a,u)}):sx(t,a,r)}function sx(t,a,r){a.status="fulfilled",a.value=r,ix(a),t.state=r,a=t.pending,a!==null&&(r=a.next,r===a?t.pending=null:(r=r.next,a.next=r,nx(t,r)))}function Nm(t,a,r){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=r,ix(a),a=a.next;while(a!==u)}t.action=null}function ix(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function rx(t,a){return a}function lx(t,a){if(wt){var r=mn.formState;if(r!==null){e:{var u=xt;if(wt){if(qt){t:{for(var p=qt,x=Aa;p.nodeType!==8;){if(!x){p=null;break t}if(p=ds(p.nextSibling),p===null){p=null;break t}}x=p.data,p=x==="F!"||x==="F"?p:null}if(p){qt=ds(p.nextSibling),u=p.data==="F!";break e}}Zs(u)}u=!1}u&&(a=r[0])}}return r=_a(),r.memoizedState=r.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rx,lastRenderedState:a},r.queue=u,r=kx.bind(null,xt,u),u.dispatch=r,u=_m(!1),x=Tm.bind(null,xt,!1,u.queue),u=_a(),p={state:a,dispatch:null,action:t,pending:null},u.queue=p,r=tN.bind(null,xt,p,x,r),p.dispatch=r,u.memoizedState=t,[a,r,!1]}function ox(t){var a=In();return cx(a,on,t)}function cx(t,a,r){if(a=vm(t,a,rx)[0],t=su(ui)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=To(a)}catch(j){throw j===jl?Qc:j}else u=a;a=In();var p=a.queue,x=p.dispatch;return r!==a.memoizedState&&(xt.flags|=2048,Tl(9,{destroy:void 0},nN.bind(null,p,r),null)),[u,x,t]}function nN(t,a){t.action=a}function ux(t){var a=In(),r=on;if(r!==null)return cx(a,r,t);In(),a=a.memoizedState,r=In();var u=r.queue.dispatch;return r.memoizedState=t,[a,u,!1]}function Tl(t,a,r,u){return t={tag:t,create:r,deps:u,inst:a,next:null},a=xt.updateQueue,a===null&&(a=nu(),xt.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=t.next=t:(u=r.next,r.next=t,t.next=u,a.lastEffect=t),t}function dx(){return In().memoizedState}function iu(t,a,r,u){var p=_a();xt.flags|=t,p.memoizedState=Tl(1|a,{destroy:void 0},r,u===void 0?null:u)}function ru(t,a,r,u){var p=In();u=u===void 0?null:u;var x=p.memoizedState.inst;on!==null&&u!==null&&hm(u,on.memoizedState.deps)?p.memoizedState=Tl(a,x,r,u):(xt.flags|=t,p.memoizedState=Tl(1|a,x,r,u))}function mx(t,a){iu(8390656,8,t,a)}function jm(t,a){ru(2048,8,t,a)}function aN(t){xt.flags|=4;var a=xt.updateQueue;if(a===null)a=nu(),xt.updateQueue=a,a.events=[t];else{var r=a.events;r===null?a.events=[t]:r.push(t)}}function hx(t){var a=In().memoizedState;return aN({ref:a,nextImpl:t}),function(){if((Gt&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}function fx(t,a){return ru(4,2,t,a)}function px(t,a){return ru(4,4,t,a)}function xx(t,a){if(typeof a=="function"){t=t();var r=a(t);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function gx(t,a,r){r=r!=null?r.concat([t]):null,ru(4,4,xx.bind(null,a,t),r)}function Sm(){}function yx(t,a){var r=In();a=a===void 0?null:a;var u=r.memoizedState;return a!==null&&hm(a,u[1])?u[0]:(r.memoizedState=[t,a],t)}function vx(t,a){var r=In();a=a===void 0?null:a;var u=r.memoizedState;if(a!==null&&hm(a,u[1]))return u[0];if(u=t(),Ur){Vt(!0);try{t()}finally{Vt(!1)}}return r.memoizedState=[u,a],u}function wm(t,a,r){return r===void 0||(ci&1073741824)!==0&&(At&261930)===0?t.memoizedState=a:(t.memoizedState=r,t=bg(),xt.lanes|=t,$i|=t,r)}function bx(t,a,r,u){return ea(r,a)?r:wl.current!==null?(t=wm(t,r,u),ea(t,a)||(Zn=!0),t):(ci&42)===0||(ci&1073741824)!==0&&(At&261930)===0?(Zn=!0,t.memoizedState=r):(t=bg(),xt.lanes|=t,$i|=t,a)}function _x(t,a,r,u,p){var x=$.p;$.p=x!==0&&8>x?x:8;var j=Q.T,M={};Q.T=M,Tm(t,!1,a,r);try{var Y=p(),fe=Q.S;if(fe!==null&&fe(M,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var Ne=X_(Y,u);Co(t,a,Ne,Va(t))}else Co(t,a,u,Va(t))}catch(Ce){Co(t,a,{then:function(){},status:"rejected",reason:Ce},Va())}finally{$.p=x,j!==null&&M.types!==null&&(j.types=M.types),Q.T=j}}function sN(){}function km(t,a,r,u){if(t.tag!==5)throw Error(o(476));var p=Nx(t).queue;_x(t,p,a,ie,r===null?sN:function(){return jx(t),r(u)})}function Nx(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:ie},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:r},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function jx(t){var a=Nx(t);a.next===null&&(a=t.alternate.memoizedState),Co(t,a.next.queue,{},Va())}function Em(){return ca(Go)}function Sx(){return In().memoizedState}function wx(){return In().memoizedState}function iN(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var r=Va();t=Fi(r);var u=qi(a,t,r);u!==null&&(Da(u,a,r),So(u,a,r)),a={cache:nm()},t.payload=a;return}a=a.return}}function rN(t,a,r){var u=Va();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},lu(t)?Ex(a,r):(r=fo(t,a,r,u),r!==null&&(Da(r,t,u),Tx(r,a,u)))}function kx(t,a,r){var u=Va();Co(t,a,r,u)}function Co(t,a,r,u){var p={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(lu(t))Ex(a,p);else{var x=t.alternate;if(t.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var j=a.lastRenderedState,M=x(j,r);if(p.hasEagerState=!0,p.eagerState=M,ea(M,j))return Fs(t,a,p,0),mn===null&&Ar(),!1}catch{}if(r=fo(t,a,p,u),r!==null)return Da(r,t,u),Tx(r,a,u),!0}return!1}function Tm(t,a,r,u){if(u={lane:2,revertLane:rh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},lu(t)){if(a)throw Error(o(479))}else a=fo(t,r,u,2),a!==null&&Da(a,t,2)}function lu(t){var a=t.alternate;return t===xt||a!==null&&a===xt}function Ex(t,a){kl=eu=!0;var r=t.pending;r===null?a.next=a:(a.next=r.next,r.next=a),t.pending=a}function Tx(t,a,r){if((r&4194048)!==0){var u=a.lanes;u&=t.pendingLanes,r|=u,a.lanes=r,qe(t,r)}}var Ao={readContext:ca,use:au,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useLayoutEffect:Mn,useInsertionEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useSyncExternalStore:Mn,useId:Mn,useHostTransitionStatus:Mn,useFormState:Mn,useActionState:Mn,useOptimistic:Mn,useMemoCache:Mn,useCacheRefresh:Mn};Ao.useEffectEvent=Mn;var Cx={readContext:ca,use:au,useCallback:function(t,a){return _a().memoizedState=[t,a===void 0?null:a],t},useContext:ca,useEffect:mx,useImperativeHandle:function(t,a,r){r=r!=null?r.concat([t]):null,iu(4194308,4,xx.bind(null,a,t),r)},useLayoutEffect:function(t,a){return iu(4194308,4,t,a)},useInsertionEffect:function(t,a){iu(4,2,t,a)},useMemo:function(t,a){var r=_a();a=a===void 0?null:a;var u=t();if(Ur){Vt(!0);try{t()}finally{Vt(!1)}}return r.memoizedState=[u,a],u},useReducer:function(t,a,r){var u=_a();if(r!==void 0){var p=r(a);if(Ur){Vt(!0);try{r(a)}finally{Vt(!1)}}}else p=a;return u.memoizedState=u.baseState=p,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:p},u.queue=t,t=t.dispatch=rN.bind(null,xt,t),[u.memoizedState,t]},useRef:function(t){var a=_a();return t={current:t},a.memoizedState=t},useState:function(t){t=_m(t);var a=t.queue,r=kx.bind(null,xt,a);return a.dispatch=r,[t.memoizedState,r]},useDebugValue:Sm,useDeferredValue:function(t,a){var r=_a();return wm(r,t,a)},useTransition:function(){var t=_m(!1);return t=_x.bind(null,xt,t.queue,!0,!1),_a().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,r){var u=xt,p=_a();if(wt){if(r===void 0)throw Error(o(407));r=r()}else{if(r=a(),mn===null)throw Error(o(349));(At&127)!==0||Yp(u,a,r)}p.memoizedState=r;var x={value:r,getSnapshot:a};return p.queue=x,mx(Xp.bind(null,u,x,t),[t]),u.flags|=2048,Tl(9,{destroy:void 0},Jp.bind(null,u,x,r,a),null),r},useId:function(){var t=_a(),a=mn.identifierPrefix;if(wt){var r=Le,u=Te;r=(u&~(1<<32-Dt(u)-1)).toString(32)+r,a="_"+a+"R_"+r,r=tu++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=W_++,a="_"+a+"r_"+r.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Em,useFormState:lx,useActionState:lx,useOptimistic:function(t){var a=_a();a.memoizedState=a.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=Tm.bind(null,xt,!0,r),r.dispatch=a,[t,a]},useMemoCache:ym,useCacheRefresh:function(){return _a().memoizedState=iN.bind(null,xt)},useEffectEvent:function(t){var a=_a(),r={impl:t};return a.memoizedState=r,function(){if((Gt&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}},Cm={readContext:ca,use:au,useCallback:yx,useContext:ca,useEffect:jm,useImperativeHandle:gx,useInsertionEffect:fx,useLayoutEffect:px,useMemo:vx,useReducer:su,useRef:dx,useState:function(){return su(ui)},useDebugValue:Sm,useDeferredValue:function(t,a){var r=In();return bx(r,on.memoizedState,t,a)},useTransition:function(){var t=su(ui)[0],a=In().memoizedState;return[typeof t=="boolean"?t:To(t),a]},useSyncExternalStore:Vp,useId:Sx,useHostTransitionStatus:Em,useFormState:ox,useActionState:ox,useOptimistic:function(t,a){var r=In();return tx(r,on,t,a)},useMemoCache:ym,useCacheRefresh:wx};Cm.useEffectEvent=hx;var Ax={readContext:ca,use:au,useCallback:yx,useContext:ca,useEffect:jm,useImperativeHandle:gx,useInsertionEffect:fx,useLayoutEffect:px,useMemo:vx,useReducer:bm,useRef:dx,useState:function(){return bm(ui)},useDebugValue:Sm,useDeferredValue:function(t,a){var r=In();return on===null?wm(r,t,a):bx(r,on.memoizedState,t,a)},useTransition:function(){var t=bm(ui)[0],a=In().memoizedState;return[typeof t=="boolean"?t:To(t),a]},useSyncExternalStore:Vp,useId:Sx,useHostTransitionStatus:Em,useFormState:ux,useActionState:ux,useOptimistic:function(t,a){var r=In();return on!==null?tx(r,on,t,a):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:ym,useCacheRefresh:wx};Ax.useEffectEvent=hx;function Am(t,a,r,u){a=t.memoizedState,r=r(u,a),r=r==null?a:w({},a,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Mm={enqueueSetState:function(t,a,r){t=t._reactInternals;var u=Va(),p=Fi(u);p.payload=a,r!=null&&(p.callback=r),a=qi(t,p,u),a!==null&&(Da(a,t,u),So(a,t,u))},enqueueReplaceState:function(t,a,r){t=t._reactInternals;var u=Va(),p=Fi(u);p.tag=1,p.payload=a,r!=null&&(p.callback=r),a=qi(t,p,u),a!==null&&(Da(a,t,u),So(a,t,u))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var r=Va(),u=Fi(r);u.tag=2,a!=null&&(u.callback=a),a=qi(t,u,r),a!==null&&(Da(a,t,r),So(a,t,r))}};function Mx(t,a,r,u,p,x,j){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,x,j):a.prototype&&a.prototype.isPureReactComponent?!Ri(r,u)||!Ri(p,x):!0}function zx(t,a,r,u){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,u),a.state!==t&&Mm.enqueueReplaceState(a,a.state,null)}function Fr(t,a){var r=a;if("ref"in a){r={};for(var u in a)u!=="ref"&&(r[u]=a[u])}if(t=t.defaultProps){r===a&&(r=w({},r));for(var p in t)r[p]===void 0&&(r[p]=t[p])}return r}function Ox(t){Cr(t)}function Rx(t){console.error(t)}function Dx(t){Cr(t)}function ou(t,a){try{var r=t.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function Lx(t,a,r){try{var u=t.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function zm(t,a,r){return r=Fi(r),r.tag=3,r.payload={element:null},r.callback=function(){ou(t,a)},r}function Px(t){return t=Fi(t),t.tag=3,t}function Ix(t,a,r,u){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var x=u.value;t.payload=function(){return p(x)},t.callback=function(){Lx(a,r,u)}}var j=r.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(t.callback=function(){Lx(a,r,u),typeof p!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var M=u.stack;this.componentDidCatch(u.value,{componentStack:M!==null?M:""})})}function lN(t,a,r,u,p){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=r.alternate,a!==null&&bl(a,r,p,!0),r=Ka.current,r!==null){switch(r.tag){case 31:case 13:return us===null?bu():r.alternate===null&&zn===0&&(zn=3),r.flags&=-257,r.flags|=65536,r.lanes=p,u===Vc?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([u]):a.add(u),ah(t,u,p)),!1;case 22:return r.flags|=65536,u===Vc?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([u]):r.add(u)),ah(t,u,p)),!1}throw Error(o(435,r.tag))}return ah(t,u,p),bu(),!1}if(wt)return a=Ka.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,u!==vl&&(t=Error(o(422),{cause:u}),Or(c(t,r)))):(u!==vl&&(a=Error(o(423),{cause:u}),Or(c(a,r))),t=t.current.alternate,t.flags|=65536,p&=-p,t.lanes|=p,u=c(u,r),p=zm(t.stateNode,u,p),om(t,p),zn!==4&&(zn=2)),!1;var x=Error(o(520),{cause:u});if(x=c(x,r),Io===null?Io=[x]:Io.push(x),zn!==4&&(zn=2),a===null)return!0;u=c(u,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,t=p&-p,r.lanes|=t,t=zm(r.stateNode,u,t),om(r,t),!1;case 1:if(a=r.type,x=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Qi===null||!Qi.has(x))))return r.flags|=65536,p&=-p,r.lanes|=p,p=Px(p),Ix(p,t,r,u),om(r,p),!1}r=r.return}while(r!==null);return!1}var Om=Error(o(461)),Zn=!1;function ua(t,a,r,u){a.child=t===null?qp(a,null,r,u):Br(a,t.child,r,u)}function Bx(t,a,r,u,p){r=r.render;var x=a.ref;if("ref"in u){var j={};for(var M in u)M!=="ref"&&(j[M]=u[M])}else j=u;return Dr(a),u=fm(t,a,r,j,x,p),M=pm(),t!==null&&!Zn?(xm(t,a,p),di(t,a,p)):(wt&&M&&Vn(a),a.flags|=1,ua(t,a,u,p),a.child)}function Ux(t,a,r,u,p){if(t===null){var x=r.type;return typeof x=="function"&&!gl(x)&&x.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=x,Fx(t,a,x,u,p)):(t=zr(r.type,null,u,a,a.mode,p),t.ref=a.ref,t.return=a,a.child=t)}if(x=t.child,!Fm(t,p)){var j=x.memoizedProps;if(r=r.compare,r=r!==null?r:Ri,r(j,u)&&t.ref===a.ref)return di(t,a,p)}return a.flags|=1,t=cs(x,u),t.ref=a.ref,t.return=a,a.child=t}function Fx(t,a,r,u,p){if(t!==null){var x=t.memoizedProps;if(Ri(x,u)&&t.ref===a.ref)if(Zn=!1,a.pendingProps=u=x,Fm(t,p))(t.flags&131072)!==0&&(Zn=!0);else return a.lanes=t.lanes,di(t,a,p)}return Rm(t,a,r,u,p)}function qx(t,a,r,u){var p=u.children,x=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|r:r,t!==null){for(u=a.child=t.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~x}else u=0,a.child=null;return Zx(t,a,x,r,u)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&$c(a,x!==null?x.cachePool:null),x!==null?Kp(a,x):um(),Gp(a);else return u=a.lanes=536870912,Zx(t,a,x!==null?x.baseLanes|r:r,r,u)}else x!==null?($c(a,x.cachePool),Kp(a,x),Hi(),a.memoizedState=null):(t!==null&&$c(a,null),um(),Hi());return ua(t,a,p,r),a.child}function Mo(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Zx(t,a,r,u,p){var x=sm();return x=x===null?null:{parent:Fn._currentValue,pool:x},a.memoizedState={baseLanes:r,cachePool:x},t!==null&&$c(a,null),um(),Gp(a),t!==null&&bl(t,a,u,!0),a.childLanes=p,null}function cu(t,a){return a=du({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Hx(t,a,r){return Br(a,t.child,null,r),t=cu(a,a.pendingProps),t.flags|=2,Ga(a),a.memoizedState=null,t}function oN(t,a,r){var u=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(wt){if(u.mode==="hidden")return t=cu(a,u),a.lanes=536870912,Mo(null,t);if(mm(a),(t=qt)?(t=ny(t,Aa),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:xe!==null?{id:Te,overflow:Le}:null,retryLane:536870912,hydrationErrors:null},r=xo(t),r.return=a,a.child=r,Ft=a,qt=null)):t=null,t===null)throw Zs(a);return a.lanes=536870912,null}return cu(a,u)}var x=t.memoizedState;if(x!==null){var j=x.dehydrated;if(mm(a),p)if(a.flags&256)a.flags&=-257,a=Hx(t,a,r);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(o(558));else if(Zn||bl(t,a,r,!1),p=(r&t.childLanes)!==0,Zn||p){if(u=mn,u!==null&&(j=xn(u,r),j!==0&&j!==x.retryLane))throw x.retryLane=j,os(t,j),Da(u,t,j),Om;bu(),a=Hx(t,a,r)}else t=x.treeContext,qt=ds(j.nextSibling),Ft=a,wt=!0,qs=null,Aa=!1,t!==null&&ba(a,t),a=cu(a,u),a.flags|=4096;return a}return t=cs(t.child,{mode:u.mode,children:u.children}),t.ref=a.ref,a.child=t,t.return=a,t}function uu(t,a){var r=a.ref;if(r===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(t===null||t.ref!==r)&&(a.flags|=4194816)}}function Rm(t,a,r,u,p){return Dr(a),r=fm(t,a,r,u,void 0,p),u=pm(),t!==null&&!Zn?(xm(t,a,p),di(t,a,p)):(wt&&u&&Vn(a),a.flags|=1,ua(t,a,r,p),a.child)}function Kx(t,a,r,u,p,x){return Dr(a),a.updateQueue=null,r=Qp(a,u,r,p),$p(t),u=pm(),t!==null&&!Zn?(xm(t,a,x),di(t,a,x)):(wt&&u&&Vn(a),a.flags|=1,ua(t,a,r,x),a.child)}function Gx(t,a,r,u,p){if(Dr(a),a.stateNode===null){var x=ii,j=r.contextType;typeof j=="object"&&j!==null&&(x=ca(j)),x=new r(u,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Mm,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=u,x.state=a.memoizedState,x.refs={},rm(a),j=r.contextType,x.context=typeof j=="object"&&j!==null?ca(j):ii,x.state=a.memoizedState,j=r.getDerivedStateFromProps,typeof j=="function"&&(Am(a,r,j,u),x.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(j=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),j!==x.state&&Mm.enqueueReplaceState(x,x.state,null),ko(a,u,x,p),wo(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(t===null){x=a.stateNode;var M=a.memoizedProps,Y=Fr(r,M);x.props=Y;var fe=x.context,Ne=r.contextType;j=ii,typeof Ne=="object"&&Ne!==null&&(j=ca(Ne));var Ce=r.getDerivedStateFromProps;Ne=typeof Ce=="function"||typeof x.getSnapshotBeforeUpdate=="function",M=a.pendingProps!==M,Ne||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(M||fe!==j)&&zx(a,x,u,j),Ui=!1;var ge=a.memoizedState;x.state=ge,ko(a,u,x,p),wo(),fe=a.memoizedState,M||ge!==fe||Ui?(typeof Ce=="function"&&(Am(a,r,Ce,u),fe=a.memoizedState),(Y=Ui||Mx(a,r,Y,u,ge,fe,j))?(Ne||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=fe),x.props=u,x.state=fe,x.context=j,u=Y):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{x=a.stateNode,lm(t,a),j=a.memoizedProps,Ne=Fr(r,j),x.props=Ne,Ce=a.pendingProps,ge=x.context,fe=r.contextType,Y=ii,typeof fe=="object"&&fe!==null&&(Y=ca(fe)),M=r.getDerivedStateFromProps,(fe=typeof M=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(j!==Ce||ge!==Y)&&zx(a,x,u,Y),Ui=!1,ge=a.memoizedState,x.state=ge,ko(a,u,x,p),wo();var ye=a.memoizedState;j!==Ce||ge!==ye||Ui||t!==null&&t.dependencies!==null&&Kc(t.dependencies)?(typeof M=="function"&&(Am(a,r,M,u),ye=a.memoizedState),(Ne=Ui||Mx(a,r,Ne,u,ge,ye,Y)||t!==null&&t.dependencies!==null&&Kc(t.dependencies))?(fe||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(u,ye,Y),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(u,ye,Y)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=ye),x.props=u,x.state=ye,x.context=Y,u=Ne):(typeof x.componentDidUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=1024),u=!1)}return x=u,uu(t,a),u=(a.flags&128)!==0,x||u?(x=a.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,t!==null&&u?(a.child=Br(a,t.child,null,p),a.child=Br(a,null,r,p)):ua(t,a,r,p),a.memoizedState=x.state,t=a.child):t=di(t,a,p),t}function $x(t,a,r,u){return li(),a.flags|=256,ua(t,a,r,u),a.child}var Dm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lm(t){return{baseLanes:t,cachePool:Lp()}}function Pm(t,a,r){return t=t!==null?t.childLanes&~r:0,a&&(t|=Qa),t}function Qx(t,a,r){var u=a.pendingProps,p=!1,x=(a.flags&128)!==0,j;if((j=x)||(j=t!==null&&t.memoizedState===null?!1:(Pn.current&2)!==0),j&&(p=!0,a.flags&=-129),j=(a.flags&32)!==0,a.flags&=-33,t===null){if(wt){if(p?Zi(a):Hi(),(t=qt)?(t=ny(t,Aa),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:xe!==null?{id:Te,overflow:Le}:null,retryLane:536870912,hydrationErrors:null},r=xo(t),r.return=a,a.child=r,Ft=a,qt=null)):t=null,t===null)throw Zs(a);return vh(t)?a.lanes=32:a.lanes=536870912,null}var M=u.children;return u=u.fallback,p?(Hi(),p=a.mode,M=du({mode:"hidden",children:M},p),u=ri(u,p,r,null),M.return=a,u.return=a,M.sibling=u,a.child=M,u=a.child,u.memoizedState=Lm(r),u.childLanes=Pm(t,j,r),a.memoizedState=Dm,Mo(null,u)):(Zi(a),Im(a,M))}var Y=t.memoizedState;if(Y!==null&&(M=Y.dehydrated,M!==null)){if(x)a.flags&256?(Zi(a),a.flags&=-257,a=Bm(t,a,r)):a.memoizedState!==null?(Hi(),a.child=t.child,a.flags|=128,a=null):(Hi(),M=u.fallback,p=a.mode,u=du({mode:"visible",children:u.children},p),M=ri(M,p,r,null),M.flags|=2,u.return=a,M.return=a,u.sibling=M,a.child=u,Br(a,t.child,null,r),u=a.child,u.memoizedState=Lm(r),u.childLanes=Pm(t,j,r),a.memoizedState=Dm,a=Mo(null,u));else if(Zi(a),vh(M)){if(j=M.nextSibling&&M.nextSibling.dataset,j)var fe=j.dgst;j=fe,u=Error(o(419)),u.stack="",u.digest=j,Or({value:u,source:null,stack:null}),a=Bm(t,a,r)}else if(Zn||bl(t,a,r,!1),j=(r&t.childLanes)!==0,Zn||j){if(j=mn,j!==null&&(u=xn(j,r),u!==0&&u!==Y.retryLane))throw Y.retryLane=u,os(t,u),Da(j,t,u),Om;yh(M)||bu(),a=Bm(t,a,r)}else yh(M)?(a.flags|=192,a.child=t.child,a=null):(t=Y.treeContext,qt=ds(M.nextSibling),Ft=a,wt=!0,qs=null,Aa=!1,t!==null&&ba(a,t),a=Im(a,u.children),a.flags|=4096);return a}return p?(Hi(),M=u.fallback,p=a.mode,Y=t.child,fe=Y.sibling,u=cs(Y,{mode:"hidden",children:u.children}),u.subtreeFlags=Y.subtreeFlags&65011712,fe!==null?M=cs(fe,M):(M=ri(M,p,r,null),M.flags|=2),M.return=a,u.return=a,u.sibling=M,a.child=u,Mo(null,u),u=a.child,M=t.child.memoizedState,M===null?M=Lm(r):(p=M.cachePool,p!==null?(Y=Fn._currentValue,p=p.parent!==Y?{parent:Y,pool:Y}:p):p=Lp(),M={baseLanes:M.baseLanes|r,cachePool:p}),u.memoizedState=M,u.childLanes=Pm(t,j,r),a.memoizedState=Dm,Mo(t.child,u)):(Zi(a),r=t.child,t=r.sibling,r=cs(r,{mode:"visible",children:u.children}),r.return=a,r.sibling=null,t!==null&&(j=a.deletions,j===null?(a.deletions=[t],a.flags|=16):j.push(t)),a.child=r,a.memoizedState=null,r)}function Im(t,a){return a=du({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function du(t,a){return t=pa(22,t,null,a),t.lanes=0,t}function Bm(t,a,r){return Br(a,t.child,null,r),t=Im(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Vx(t,a,r){t.lanes|=a;var u=t.alternate;u!==null&&(u.lanes|=a),em(t.return,a,r)}function Um(t,a,r,u,p,x){var j=t.memoizedState;j===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:p,treeForkCount:x}:(j.isBackwards=a,j.rendering=null,j.renderingStartTime=0,j.last=u,j.tail=r,j.tailMode=p,j.treeForkCount=x)}function Yx(t,a,r){var u=a.pendingProps,p=u.revealOrder,x=u.tail;u=u.children;var j=Pn.current,M=(j&2)!==0;if(M?(j=j&1|2,a.flags|=128):j&=1,F(Pn,j),ua(t,a,u,r),u=wt?C:0,!M&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vx(t,r,a);else if(t.tag===19)Vx(t,r,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(p){case"forwards":for(r=a.child,p=null;r!==null;)t=r.alternate,t!==null&&Wc(t)===null&&(p=r),r=r.sibling;r=p,r===null?(p=a.child,a.child=null):(p=r.sibling,r.sibling=null),Um(a,!1,p,r,x,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=a.child,a.child=null;p!==null;){if(t=p.alternate,t!==null&&Wc(t)===null){a.child=p;break}t=p.sibling,p.sibling=r,r=p,p=t}Um(a,!0,r,null,x,u);break;case"together":Um(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function di(t,a,r){if(t!==null&&(a.dependencies=t.dependencies),$i|=a.lanes,(r&a.childLanes)===0)if(t!==null){if(bl(t,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(o(153));if(a.child!==null){for(t=a.child,r=cs(t,t.pendingProps),a.child=r,r.return=a;t.sibling!==null;)t=t.sibling,r=r.sibling=cs(t,t.pendingProps),r.return=a;r.sibling=null}return a.child}function Fm(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Kc(t)))}function cN(t,a,r){switch(a.tag){case 3:Qe(a,a.stateNode.containerInfo),Bi(a,Fn,t.memoizedState.cache),li();break;case 27:case 5:Ve(a);break;case 4:Qe(a,a.stateNode.containerInfo);break;case 10:Bi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,mm(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Zi(a),a.flags|=128,null):(r&a.child.childLanes)!==0?Qx(t,a,r):(Zi(a),t=di(t,a,r),t!==null?t.sibling:null);Zi(a);break;case 19:var p=(t.flags&128)!==0;if(u=(r&a.childLanes)!==0,u||(bl(t,a,r,!1),u=(r&a.childLanes)!==0),p){if(u)return Yx(t,a,r);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),F(Pn,Pn.current),u)break;return null;case 22:return a.lanes=0,qx(t,a,r,a.pendingProps);case 24:Bi(a,Fn,t.memoizedState.cache)}return di(t,a,r)}function Jx(t,a,r){if(t!==null)if(t.memoizedProps!==a.pendingProps)Zn=!0;else{if(!Fm(t,r)&&(a.flags&128)===0)return Zn=!1,cN(t,a,r);Zn=(t.flags&131072)!==0}else Zn=!1,wt&&(a.flags&1048576)!==0&&vt(a,C,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(t=Pr(a.elementType),a.type=t,typeof t=="function")gl(t)?(u=Fr(t,u),a.tag=1,a=Gx(null,a,t,u,r)):(a.tag=0,a=Rm(null,a,t,u,r));else{if(t!=null){var p=t.$$typeof;if(p===Z){a.tag=11,a=Bx(null,a,t,u,r);break e}else if(p===H){a.tag=14,a=Ux(null,a,t,u,r);break e}}throw a=ue(t)||t,Error(o(306,a,""))}}return a;case 0:return Rm(t,a,a.type,a.pendingProps,r);case 1:return u=a.type,p=Fr(u,a.pendingProps),Gx(t,a,u,p,r);case 3:e:{if(Qe(a,a.stateNode.containerInfo),t===null)throw Error(o(387));u=a.pendingProps;var x=a.memoizedState;p=x.element,lm(t,a),ko(a,u,null,r);var j=a.memoizedState;if(u=j.cache,Bi(a,Fn,u),u!==x.cache&&tm(a,[Fn],r,!0),wo(),u=j.element,x.isDehydrated)if(x={element:u,isDehydrated:!1,cache:j.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=$x(t,a,u,r);break e}else if(u!==p){p=c(Error(o(424)),a),Or(p),a=$x(t,a,u,r);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,qt=ds(t.firstChild),Ft=a,wt=!0,qs=null,Aa=!0,r=qp(a,null,u,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(li(),u===p){a=di(t,a,r);break e}ua(t,a,u,r)}a=a.child}return a;case 26:return uu(t,a),t===null?(r=oy(a.type,null,a.pendingProps,null))?a.memoizedState=r:wt||(r=a.type,t=a.pendingProps,u=Eu(Ee.current).createElement(r),u[Wt]=a,u[hn]=t,da(u,r,t),vn(u),a.stateNode=u):a.memoizedState=oy(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Ve(a),t===null&&wt&&(u=a.stateNode=iy(a.type,a.pendingProps,Ee.current),Ft=a,Aa=!0,p=qt,Xi(a.type)?(bh=p,qt=ds(u.firstChild)):qt=p),ua(t,a,a.pendingProps.children,r),uu(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&wt&&((p=u=qt)&&(u=BN(u,a.type,a.pendingProps,Aa),u!==null?(a.stateNode=u,Ft=a,qt=ds(u.firstChild),Aa=!1,p=!0):p=!1),p||Zs(a)),Ve(a),p=a.type,x=a.pendingProps,j=t!==null?t.memoizedProps:null,u=x.children,ph(p,x)?u=null:j!==null&&ph(p,j)&&(a.flags|=32),a.memoizedState!==null&&(p=fm(t,a,eN,null,null,r),Go._currentValue=p),uu(t,a),ua(t,a,u,r),a.child;case 6:return t===null&&wt&&((t=r=qt)&&(r=UN(r,a.pendingProps,Aa),r!==null?(a.stateNode=r,Ft=a,qt=null,t=!0):t=!1),t||Zs(a)),null;case 13:return Qx(t,a,r);case 4:return Qe(a,a.stateNode.containerInfo),u=a.pendingProps,t===null?a.child=Br(a,null,u,r):ua(t,a,u,r),a.child;case 11:return Bx(t,a,a.type,a.pendingProps,r);case 7:return ua(t,a,a.pendingProps,r),a.child;case 8:return ua(t,a,a.pendingProps.children,r),a.child;case 12:return ua(t,a,a.pendingProps.children,r),a.child;case 10:return u=a.pendingProps,Bi(a,a.type,u.value),ua(t,a,u.children,r),a.child;case 9:return p=a.type._context,u=a.pendingProps.children,Dr(a),p=ca(p),u=u(p),a.flags|=1,ua(t,a,u,r),a.child;case 14:return Ux(t,a,a.type,a.pendingProps,r);case 15:return Fx(t,a,a.type,a.pendingProps,r);case 19:return Yx(t,a,r);case 31:return oN(t,a,r);case 22:return qx(t,a,r,a.pendingProps);case 24:return Dr(a),u=ca(Fn),t===null?(p=sm(),p===null&&(p=mn,x=nm(),p.pooledCache=x,x.refCount++,x!==null&&(p.pooledCacheLanes|=r),p=x),a.memoizedState={parent:u,cache:p},rm(a),Bi(a,Fn,p)):((t.lanes&r)!==0&&(lm(t,a),ko(a,null,null,r),wo()),p=t.memoizedState,x=a.memoizedState,p.parent!==u?(p={parent:u,cache:u},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Bi(a,Fn,u)):(u=x.cache,Bi(a,Fn,u),u!==p.cache&&tm(a,[Fn],r,!0))),ua(t,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(o(156,a.tag))}function mi(t){t.flags|=4}function qm(t,a,r,u,p){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(p&335544128)===p)if(t.stateNode.complete)t.flags|=8192;else if(Sg())t.flags|=8192;else throw Ir=Vc,im}else t.flags&=-16777217}function Xx(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!hy(a))if(Sg())t.flags|=8192;else throw Ir=Vc,im}function mu(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Dn():536870912,t.lanes|=a,zl|=a)}function zo(t,a){if(!wt)switch(t.tailMode){case"hidden":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function gn(t){var a=t.alternate!==null&&t.alternate.child===t.child,r=0,u=0;if(a)for(var p=t.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=u,t.childLanes=r,a}function uN(t,a,r){var u=a.pendingProps;switch(An(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(a),null;case 1:return gn(a),null;case 3:return r=a.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),oi(Fn),pe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ks(a)?mi(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,vo())),gn(a),null;case 26:var p=a.type,x=a.memoizedState;return t===null?(mi(a),x!==null?(gn(a),Xx(a,x)):(gn(a),qm(a,p,null,u,r))):x?x!==t.memoizedState?(mi(a),gn(a),Xx(a,x)):(gn(a),a.flags&=-16777217):(t=t.memoizedProps,t!==u&&mi(a),gn(a),qm(a,p,t,u,r)),null;case 27:if(Ye(a),r=Ee.current,p=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==u&&mi(a);else{if(!u){if(a.stateNode===null)throw Error(o(166));return gn(a),null}t=me.current,ks(a)?yo(a):(t=iy(p,u,r),a.stateNode=t,mi(a))}return gn(a),null;case 5:if(Ye(a),p=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==u&&mi(a);else{if(!u){if(a.stateNode===null)throw Error(o(166));return gn(a),null}if(x=me.current,ks(a))yo(a);else{var j=Eu(Ee.current);switch(x){case 1:x=j.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:x=j.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":x=j.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":x=j.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":x=j.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof u.is=="string"?j.createElement("select",{is:u.is}):j.createElement("select"),u.multiple?x.multiple=!0:u.size&&(x.size=u.size);break;default:x=typeof u.is=="string"?j.createElement(p,{is:u.is}):j.createElement(p)}}x[Wt]=a,x[hn]=u;e:for(j=a.child;j!==null;){if(j.tag===5||j.tag===6)x.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===a)break e;for(;j.sibling===null;){if(j.return===null||j.return===a)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}a.stateNode=x;e:switch(da(x,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&mi(a)}}return gn(a),qm(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,r),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==u&&mi(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(o(166));if(t=Ee.current,ks(a)){if(t=a.stateNode,r=a.memoizedProps,u=null,p=Ft,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}t[Wt]=a,t=!!(t.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||Qg(t.nodeValue,r)),t||Zs(a,!0)}else t=Eu(t).createTextNode(u),t[Wt]=a,a.stateNode=t}return gn(a),null;case 31:if(r=a.memoizedState,t===null||t.memoizedState!==null){if(u=ks(a),r!==null){if(t===null){if(!u)throw Error(o(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[Wt]=a}else li(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;gn(a),t=!1}else r=vo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return a.flags&256?(Ga(a),a):(Ga(a),null);if((a.flags&128)!==0)throw Error(o(558))}return gn(a),null;case 13:if(u=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(p=ks(a),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(o(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));p[Wt]=a}else li(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;gn(a),p=!1}else p=vo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Ga(a),a):(Ga(a),null)}return Ga(a),(a.flags&128)!==0?(a.lanes=r,a):(r=u!==null,t=t!==null&&t.memoizedState!==null,r&&(u=a.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),x=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==p&&(u.flags|=2048)),r!==t&&r&&(a.child.flags|=8192),mu(a,a.updateQueue),gn(a),null);case 4:return pe(),t===null&&uh(a.stateNode.containerInfo),gn(a),null;case 10:return oi(a.type),gn(a),null;case 19:if(ae(Pn),u=a.memoizedState,u===null)return gn(a),null;if(p=(a.flags&128)!==0,x=u.rendering,x===null)if(p)zo(u,!1);else{if(zn!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(x=Wc(t),x!==null){for(a.flags|=128,zo(u,!1),t=x.updateQueue,a.updateQueue=t,mu(a,t),a.subtreeFlags=0,t=r,r=a.child;r!==null;)po(r,t),r=r.sibling;return F(Pn,Pn.current&1|2),wt&&Xe(a,u.treeForkCount),a.child}t=t.sibling}u.tail!==null&&se()>gu&&(a.flags|=128,p=!0,zo(u,!1),a.lanes=4194304)}else{if(!p)if(t=Wc(x),t!==null){if(a.flags|=128,p=!0,t=t.updateQueue,a.updateQueue=t,mu(a,t),zo(u,!0),u.tail===null&&u.tailMode==="hidden"&&!x.alternate&&!wt)return gn(a),null}else 2*se()-u.renderingStartTime>gu&&r!==536870912&&(a.flags|=128,p=!0,zo(u,!1),a.lanes=4194304);u.isBackwards?(x.sibling=a.child,a.child=x):(t=u.last,t!==null?t.sibling=x:a.child=x,u.last=x)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=se(),t.sibling=null,r=Pn.current,F(Pn,p?r&1|2:r&1),wt&&Xe(a,u.treeForkCount),t):(gn(a),null);case 22:case 23:return Ga(a),dm(),u=a.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(r&536870912)!==0&&(a.flags&128)===0&&(gn(a),a.subtreeFlags&6&&(a.flags|=8192)):gn(a),r=a.updateQueue,r!==null&&mu(a,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==r&&(a.flags|=2048),t!==null&&ae(Lr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),oi(Fn),gn(a),null;case 25:return null;case 30:return null}throw Error(o(156,a.tag))}function dN(t,a){switch(An(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return oi(Fn),pe(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Ye(a),null;case 31:if(a.memoizedState!==null){if(Ga(a),a.alternate===null)throw Error(o(340));li()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Ga(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(o(340));li()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return ae(Pn),null;case 4:return pe(),null;case 10:return oi(a.type),null;case 22:case 23:return Ga(a),dm(),t!==null&&ae(Lr),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return oi(Fn),null;case 25:return null;default:return null}}function Wx(t,a){switch(An(a),a.tag){case 3:oi(Fn),pe();break;case 26:case 27:case 5:Ye(a);break;case 4:pe();break;case 31:a.memoizedState!==null&&Ga(a);break;case 13:Ga(a);break;case 19:ae(Pn);break;case 10:oi(a.type);break;case 22:case 23:Ga(a),dm(),t!==null&&ae(Lr);break;case 24:oi(Fn)}}function Oo(t,a){try{var r=a.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var p=u.next;r=p;do{if((r.tag&t)===t){u=void 0;var x=r.create,j=r.inst;u=x(),j.destroy=u}r=r.next}while(r!==p)}}catch(M){nn(a,a.return,M)}}function Ki(t,a,r){try{var u=a.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var x=p.next;u=x;do{if((u.tag&t)===t){var j=u.inst,M=j.destroy;if(M!==void 0){j.destroy=void 0,p=a;var Y=r,fe=M;try{fe()}catch(Ne){nn(p,Y,Ne)}}}u=u.next}while(u!==x)}}catch(Ne){nn(a,a.return,Ne)}}function eg(t){var a=t.updateQueue;if(a!==null){var r=t.stateNode;try{Hp(a,r)}catch(u){nn(t,t.return,u)}}}function tg(t,a,r){r.props=Fr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(u){nn(t,a,u)}}function Ro(t,a){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof r=="function"?t.refCleanup=r(u):r.current=u}}catch(p){nn(t,a,p)}}function Ks(t,a){var r=t.ref,u=t.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(p){nn(t,a,p)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){nn(t,a,p)}else r.current=null}function ng(t){var a=t.type,r=t.memoizedProps,u=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(p){nn(t,t.return,p)}}function Zm(t,a,r){try{var u=t.stateNode;ON(u,t.type,r,a),u[hn]=a}catch(p){nn(t,t.return,p)}}function ag(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Xi(t.type)||t.tag===4}function Hm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ag(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Xi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Km(t,a,r){var u=t.tag;if(u===5||u===6)t=t.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(t),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=ka));else if(u!==4&&(u===27&&Xi(t.type)&&(r=t.stateNode,a=null),t=t.child,t!==null))for(Km(t,a,r),t=t.sibling;t!==null;)Km(t,a,r),t=t.sibling}function hu(t,a,r){var u=t.tag;if(u===5||u===6)t=t.stateNode,a?r.insertBefore(t,a):r.appendChild(t);else if(u!==4&&(u===27&&Xi(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(hu(t,a,r),t=t.sibling;t!==null;)hu(t,a,r),t=t.sibling}function sg(t){var a=t.stateNode,r=t.memoizedProps;try{for(var u=t.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);da(a,u,r),a[Wt]=t,a[hn]=r}catch(x){nn(t,t.return,x)}}var hi=!1,Hn=!1,Gm=!1,ig=typeof WeakSet=="function"?WeakSet:Set,na=null;function mN(t,a){if(t=t.containerInfo,hh=Ru,t=wr(t),Ps(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var p=u.anchorOffset,x=u.focusNode;u=u.focusOffset;try{r.nodeType,x.nodeType}catch{r=null;break e}var j=0,M=-1,Y=-1,fe=0,Ne=0,Ce=t,ge=null;t:for(;;){for(var ye;Ce!==r||p!==0&&Ce.nodeType!==3||(M=j+p),Ce!==x||u!==0&&Ce.nodeType!==3||(Y=j+u),Ce.nodeType===3&&(j+=Ce.nodeValue.length),(ye=Ce.firstChild)!==null;)ge=Ce,Ce=ye;for(;;){if(Ce===t)break t;if(ge===r&&++fe===p&&(M=j),ge===x&&++Ne===u&&(Y=j),(ye=Ce.nextSibling)!==null)break;Ce=ge,ge=Ce.parentNode}Ce=ye}r=M===-1||Y===-1?null:{start:M,end:Y}}else r=null}r=r||{start:0,end:0}}else r=null;for(fh={focusedElem:t,selectionRange:r},Ru=!1,na=a;na!==null;)if(a=na,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,na=t;else for(;na!==null;){switch(a=na,x=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)p=t[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&x!==null){t=void 0,r=a,p=x.memoizedProps,x=x.memoizedState,u=r.stateNode;try{var Ke=Fr(r.type,p);t=u.getSnapshotBeforeUpdate(Ke,x),u.__reactInternalSnapshotBeforeUpdate=t}catch(st){nn(r,r.return,st)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,r=t.nodeType,r===9)gh(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":gh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=a.sibling,t!==null){t.return=a.return,na=t;break}na=a.return}}function rg(t,a,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:pi(t,r),u&4&&Oo(5,r);break;case 1:if(pi(t,r),u&4)if(t=r.stateNode,a===null)try{t.componentDidMount()}catch(j){nn(r,r.return,j)}else{var p=Fr(r.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(p,a,t.__reactInternalSnapshotBeforeUpdate)}catch(j){nn(r,r.return,j)}}u&64&&eg(r),u&512&&Ro(r,r.return);break;case 3:if(pi(t,r),u&64&&(t=r.updateQueue,t!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{Hp(t,a)}catch(j){nn(r,r.return,j)}}break;case 27:a===null&&u&4&&sg(r);case 26:case 5:pi(t,r),a===null&&u&4&&ng(r),u&512&&Ro(r,r.return);break;case 12:pi(t,r);break;case 31:pi(t,r),u&4&&cg(t,r);break;case 13:pi(t,r),u&4&&ug(t,r),u&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=_N.bind(null,r),FN(t,r))));break;case 22:if(u=r.memoizedState!==null||hi,!u){a=a!==null&&a.memoizedState!==null||Hn,p=hi;var x=Hn;hi=u,(Hn=a)&&!x?xi(t,r,(r.subtreeFlags&8772)!==0):pi(t,r),hi=p,Hn=x}break;case 30:break;default:pi(t,r)}}function lg(t){var a=t.alternate;a!==null&&(t.alternate=null,lg(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&q(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var bn=null,Ma=!1;function fi(t,a,r){for(r=r.child;r!==null;)og(t,a,r),r=r.sibling}function og(t,a,r){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(lt,r)}catch{}switch(r.tag){case 26:Hn||Ks(r,a),fi(t,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Hn||Ks(r,a);var u=bn,p=Ma;Xi(r.type)&&(bn=r.stateNode,Ma=!1),fi(t,a,r),Zo(r.stateNode),bn=u,Ma=p;break;case 5:Hn||Ks(r,a);case 6:if(u=bn,p=Ma,bn=null,fi(t,a,r),bn=u,Ma=p,bn!==null)if(Ma)try{(bn.nodeType===9?bn.body:bn.nodeName==="HTML"?bn.ownerDocument.body:bn).removeChild(r.stateNode)}catch(x){nn(r,a,x)}else try{bn.removeChild(r.stateNode)}catch(x){nn(r,a,x)}break;case 18:bn!==null&&(Ma?(t=bn,ey(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Ul(t)):ey(bn,r.stateNode));break;case 4:u=bn,p=Ma,bn=r.stateNode.containerInfo,Ma=!0,fi(t,a,r),bn=u,Ma=p;break;case 0:case 11:case 14:case 15:Ki(2,r,a),Hn||Ki(4,r,a),fi(t,a,r);break;case 1:Hn||(Ks(r,a),u=r.stateNode,typeof u.componentWillUnmount=="function"&&tg(r,a,u)),fi(t,a,r);break;case 21:fi(t,a,r);break;case 22:Hn=(u=Hn)||r.memoizedState!==null,fi(t,a,r),Hn=u;break;default:fi(t,a,r)}}function cg(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ul(t)}catch(r){nn(a,a.return,r)}}}function ug(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ul(t)}catch(r){nn(a,a.return,r)}}function hN(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new ig),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new ig),a;default:throw Error(o(435,t.tag))}}function fu(t,a){var r=hN(t);a.forEach(function(u){if(!r.has(u)){r.add(u);var p=NN.bind(null,t,u);u.then(p,p)}})}function za(t,a){var r=a.deletions;if(r!==null)for(var u=0;u<r.length;u++){var p=r[u],x=t,j=a,M=j;e:for(;M!==null;){switch(M.tag){case 27:if(Xi(M.type)){bn=M.stateNode,Ma=!1;break e}break;case 5:bn=M.stateNode,Ma=!1;break e;case 3:case 4:bn=M.stateNode.containerInfo,Ma=!0;break e}M=M.return}if(bn===null)throw Error(o(160));og(x,j,p),bn=null,Ma=!1,x=p.alternate,x!==null&&(x.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)dg(a,t),a=a.sibling}var Ts=null;function dg(t,a){var r=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:za(a,t),Oa(t),u&4&&(Ki(3,t,t.return),Oo(3,t),Ki(5,t,t.return));break;case 1:za(a,t),Oa(t),u&512&&(Hn||r===null||Ks(r,r.return)),u&64&&hi&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var p=Ts;if(za(a,t),Oa(t),u&512&&(Hn||r===null||Ks(r,r.return)),u&4){var x=r!==null?r.memoizedState:null;if(u=t.memoizedState,r===null)if(u===null)if(t.stateNode===null){e:{u=t.type,r=t.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":x=p.getElementsByTagName("title")[0],(!x||x[Tn]||x[Wt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=p.createElement(u),p.head.insertBefore(x,p.querySelector("head > title"))),da(x,u,r),x[Wt]=t,vn(x),u=x;break e;case"link":var j=dy("link","href",p).get(u+(r.href||""));if(j){for(var M=0;M<j.length;M++)if(x=j[M],x.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&x.getAttribute("rel")===(r.rel==null?null:r.rel)&&x.getAttribute("title")===(r.title==null?null:r.title)&&x.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){j.splice(M,1);break t}}x=p.createElement(u),da(x,u,r),p.head.appendChild(x);break;case"meta":if(j=dy("meta","content",p).get(u+(r.content||""))){for(M=0;M<j.length;M++)if(x=j[M],x.getAttribute("content")===(r.content==null?null:""+r.content)&&x.getAttribute("name")===(r.name==null?null:r.name)&&x.getAttribute("property")===(r.property==null?null:r.property)&&x.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&x.getAttribute("charset")===(r.charSet==null?null:r.charSet)){j.splice(M,1);break t}}x=p.createElement(u),da(x,u,r),p.head.appendChild(x);break;default:throw Error(o(468,u))}x[Wt]=t,vn(x),u=x}t.stateNode=u}else my(p,t.type,t.stateNode);else t.stateNode=uy(p,u,t.memoizedProps);else x!==u?(x===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):x.count--,u===null?my(p,t.type,t.stateNode):uy(p,u,t.memoizedProps)):u===null&&t.stateNode!==null&&Zm(t,t.memoizedProps,r.memoizedProps)}break;case 27:za(a,t),Oa(t),u&512&&(Hn||r===null||Ks(r,r.return)),r!==null&&u&4&&Zm(t,t.memoizedProps,r.memoizedProps);break;case 5:if(za(a,t),Oa(t),u&512&&(Hn||r===null||Ks(r,r.return)),t.flags&32){p=t.stateNode;try{la(p,"")}catch(Ke){nn(t,t.return,Ke)}}u&4&&t.stateNode!=null&&(p=t.memoizedProps,Zm(t,p,r!==null?r.memoizedProps:p)),u&1024&&(Gm=!0);break;case 6:if(za(a,t),Oa(t),u&4){if(t.stateNode===null)throw Error(o(162));u=t.memoizedProps,r=t.stateNode;try{r.nodeValue=u}catch(Ke){nn(t,t.return,Ke)}}break;case 3:if(Au=null,p=Ts,Ts=Tu(a.containerInfo),za(a,t),Ts=p,Oa(t),u&4&&r!==null&&r.memoizedState.isDehydrated)try{Ul(a.containerInfo)}catch(Ke){nn(t,t.return,Ke)}Gm&&(Gm=!1,mg(t));break;case 4:u=Ts,Ts=Tu(t.stateNode.containerInfo),za(a,t),Oa(t),Ts=u;break;case 12:za(a,t),Oa(t);break;case 31:za(a,t),Oa(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,fu(t,u)));break;case 13:za(a,t),Oa(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(xu=se()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,fu(t,u)));break;case 22:p=t.memoizedState!==null;var Y=r!==null&&r.memoizedState!==null,fe=hi,Ne=Hn;if(hi=fe||p,Hn=Ne||Y,za(a,t),Hn=Ne,hi=fe,Oa(t),u&8192)e:for(a=t.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(r===null||Y||hi||Hn||qr(t)),r=null,a=t;;){if(a.tag===5||a.tag===26){if(r===null){Y=r=a;try{if(x=Y.stateNode,p)j=x.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{M=Y.stateNode;var Ce=Y.memoizedProps.style,ge=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;M.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(Ke){nn(Y,Y.return,Ke)}}}else if(a.tag===6){if(r===null){Y=a;try{Y.stateNode.nodeValue=p?"":Y.memoizedProps}catch(Ke){nn(Y,Y.return,Ke)}}}else if(a.tag===18){if(r===null){Y=a;try{var ye=Y.stateNode;p?ty(ye,!0):ty(Y.stateNode,!1)}catch(Ke){nn(Y,Y.return,Ke)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=t.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,fu(t,r))));break;case 19:za(a,t),Oa(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,fu(t,u)));break;case 30:break;case 21:break;default:za(a,t),Oa(t)}}function Oa(t){var a=t.flags;if(a&2){try{for(var r,u=t.return;u!==null;){if(ag(u)){r=u;break}u=u.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var p=r.stateNode,x=Hm(t);hu(t,x,p);break;case 5:var j=r.stateNode;r.flags&32&&(la(j,""),r.flags&=-33);var M=Hm(t);hu(t,M,j);break;case 3:case 4:var Y=r.stateNode.containerInfo,fe=Hm(t);Km(t,fe,Y);break;default:throw Error(o(161))}}catch(Ne){nn(t,t.return,Ne)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function mg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;mg(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function pi(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)rg(t,a.alternate,a),a=a.sibling}function qr(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Ki(4,a,a.return),qr(a);break;case 1:Ks(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&tg(a,a.return,r),qr(a);break;case 27:Zo(a.stateNode);case 26:case 5:Ks(a,a.return),qr(a);break;case 22:a.memoizedState===null&&qr(a);break;case 30:qr(a);break;default:qr(a)}t=t.sibling}}function xi(t,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,p=t,x=a,j=x.flags;switch(x.tag){case 0:case 11:case 15:xi(p,x,r),Oo(4,x);break;case 1:if(xi(p,x,r),u=x,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(fe){nn(u,u.return,fe)}if(u=x,p=u.updateQueue,p!==null){var M=u.stateNode;try{var Y=p.shared.hiddenCallbacks;if(Y!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Y.length;p++)Zp(Y[p],M)}catch(fe){nn(u,u.return,fe)}}r&&j&64&&eg(x),Ro(x,x.return);break;case 27:sg(x);case 26:case 5:xi(p,x,r),r&&u===null&&j&4&&ng(x),Ro(x,x.return);break;case 12:xi(p,x,r);break;case 31:xi(p,x,r),r&&j&4&&cg(p,x);break;case 13:xi(p,x,r),r&&j&4&&ug(p,x);break;case 22:x.memoizedState===null&&xi(p,x,r),Ro(x,x.return);break;case 30:break;default:xi(p,x,r)}a=a.sibling}}function $m(t,a){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&bo(r))}function Qm(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&bo(t))}function Cs(t,a,r,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)hg(t,a,r,u),a=a.sibling}function hg(t,a,r,u){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Cs(t,a,r,u),p&2048&&Oo(9,a);break;case 1:Cs(t,a,r,u);break;case 3:Cs(t,a,r,u),p&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&bo(t)));break;case 12:if(p&2048){Cs(t,a,r,u),t=a.stateNode;try{var x=a.memoizedProps,j=x.id,M=x.onPostCommit;typeof M=="function"&&M(j,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Y){nn(a,a.return,Y)}}else Cs(t,a,r,u);break;case 31:Cs(t,a,r,u);break;case 13:Cs(t,a,r,u);break;case 23:break;case 22:x=a.stateNode,j=a.alternate,a.memoizedState!==null?x._visibility&2?Cs(t,a,r,u):Do(t,a):x._visibility&2?Cs(t,a,r,u):(x._visibility|=2,Cl(t,a,r,u,(a.subtreeFlags&10256)!==0||!1)),p&2048&&$m(j,a);break;case 24:Cs(t,a,r,u),p&2048&&Qm(a.alternate,a);break;default:Cs(t,a,r,u)}}function Cl(t,a,r,u,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=t,j=a,M=r,Y=u,fe=j.flags;switch(j.tag){case 0:case 11:case 15:Cl(x,j,M,Y,p),Oo(8,j);break;case 23:break;case 22:var Ne=j.stateNode;j.memoizedState!==null?Ne._visibility&2?Cl(x,j,M,Y,p):Do(x,j):(Ne._visibility|=2,Cl(x,j,M,Y,p)),p&&fe&2048&&$m(j.alternate,j);break;case 24:Cl(x,j,M,Y,p),p&&fe&2048&&Qm(j.alternate,j);break;default:Cl(x,j,M,Y,p)}a=a.sibling}}function Do(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=t,u=a,p=u.flags;switch(u.tag){case 22:Do(r,u),p&2048&&$m(u.alternate,u);break;case 24:Do(r,u),p&2048&&Qm(u.alternate,u);break;default:Do(r,u)}a=a.sibling}}var Lo=8192;function Al(t,a,r){if(t.subtreeFlags&Lo)for(t=t.child;t!==null;)fg(t,a,r),t=t.sibling}function fg(t,a,r){switch(t.tag){case 26:Al(t,a,r),t.flags&Lo&&t.memoizedState!==null&&WN(r,Ts,t.memoizedState,t.memoizedProps);break;case 5:Al(t,a,r);break;case 3:case 4:var u=Ts;Ts=Tu(t.stateNode.containerInfo),Al(t,a,r),Ts=u;break;case 22:t.memoizedState===null&&(u=t.alternate,u!==null&&u.memoizedState!==null?(u=Lo,Lo=16777216,Al(t,a,r),Lo=u):Al(t,a,r));break;default:Al(t,a,r)}}function pg(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Po(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var u=a[r];na=u,gg(u,t)}pg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xg(t),t=t.sibling}function xg(t){switch(t.tag){case 0:case 11:case 15:Po(t),t.flags&2048&&Ki(9,t,t.return);break;case 3:Po(t);break;case 12:Po(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,pu(t)):Po(t);break;default:Po(t)}}function pu(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var u=a[r];na=u,gg(u,t)}pg(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Ki(8,a,a.return),pu(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,pu(a));break;default:pu(a)}t=t.sibling}}function gg(t,a){for(;na!==null;){var r=na;switch(r.tag){case 0:case 11:case 15:Ki(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:bo(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,na=u;else e:for(r=t;na!==null;){u=na;var p=u.sibling,x=u.return;if(lg(u),u===r){na=null;break e}if(p!==null){p.return=x,na=p;break e}na=x}}}var fN={getCacheForType:function(t){var a=ca(Fn),r=a.data.get(t);return r===void 0&&(r=t(),a.data.set(t,r)),r},cacheSignal:function(){return ca(Fn).controller.signal}},pN=typeof WeakMap=="function"?WeakMap:Map,Gt=0,mn=null,kt=null,At=0,tn=0,$a=null,Gi=!1,Ml=!1,Vm=!1,gi=0,zn=0,$i=0,Zr=0,Ym=0,Qa=0,zl=0,Io=null,Ra=null,Jm=!1,xu=0,yg=0,gu=1/0,yu=null,Qi=null,Yn=0,Vi=null,Ol=null,yi=0,Xm=0,Wm=null,vg=null,Bo=0,eh=null;function Va(){return(Gt&2)!==0&&At!==0?At&-At:Q.T!==null?rh():sn()}function bg(){if(Qa===0)if((At&536870912)===0||wt){var t=dn;dn<<=1,(dn&3932160)===0&&(dn=262144),Qa=t}else Qa=536870912;return t=Ka.current,t!==null&&(t.flags|=32),Qa}function Da(t,a,r){(t===mn&&(tn===2||tn===9)||t.cancelPendingCommit!==null)&&(Rl(t,0),Yi(t,At,Qa,!1)),$n(t,r),((Gt&2)===0||t!==mn)&&(t===mn&&((Gt&2)===0&&(Zr|=r),zn===4&&Yi(t,At,Qa,!1)),Gs(t))}function _g(t,a,r){if((Gt&6)!==0)throw Error(o(327));var u=!r&&(a&127)===0&&(a&t.expiredLanes)===0||gt(t,a),p=u?yN(t,a):nh(t,a,!0),x=u;do{if(p===0){Ml&&!u&&Yi(t,a,0,!1);break}else{if(r=t.current.alternate,x&&!xN(r)){p=nh(t,a,!1),x=!1;continue}if(p===2){if(x=a,t.errorRecoveryDisabledLanes&x)var j=0;else j=t.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){a=j;e:{var M=t;p=Io;var Y=M.current.memoizedState.isDehydrated;if(Y&&(Rl(M,j).flags|=256),j=nh(M,j,!1),j!==2){if(Vm&&!Y){M.errorRecoveryDisabledLanes|=x,Zr|=x,p=4;break e}x=Ra,Ra=p,x!==null&&(Ra===null?Ra=x:Ra.push.apply(Ra,x))}p=j}if(x=!1,p!==2)continue}}if(p===1){Rl(t,0),Yi(t,a,0,!0);break}e:{switch(u=t,x=p,x){case 0:case 1:throw Error(o(345));case 4:if((a&4194048)!==a)break;case 6:Yi(u,a,Qa,!Gi);break e;case 2:Ra=null;break;case 3:case 5:break;default:throw Error(o(329))}if((a&62914560)===a&&(p=xu+300-se(),10<p)){if(Yi(u,a,Qa,!Gi),kn(u,0,!0)!==0)break e;yi=a,u.timeoutHandle=Xg(Ng.bind(null,u,r,Ra,yu,Jm,a,Qa,Zr,zl,Gi,x,"Throttled",-0,0),p);break e}Ng(u,r,Ra,yu,Jm,a,Qa,Zr,zl,Gi,x,null,-0,0)}}break}while(!0);Gs(t)}function Ng(t,a,r,u,p,x,j,M,Y,fe,Ne,Ce,ge,ye){if(t.timeoutHandle=-1,Ce=a.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ka},fg(a,x,Ce);var Ke=(x&62914560)===x?xu-se():(x&4194048)===x?yg-se():0;if(Ke=ej(Ce,Ke),Ke!==null){yi=x,t.cancelPendingCommit=Ke(Ag.bind(null,t,a,x,r,u,p,j,M,Y,Ne,Ce,null,ge,ye)),Yi(t,x,j,!fe);return}}Ag(t,a,x,r,u,p,j,M,Y)}function xN(t){for(var a=t;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var p=r[u],x=p.getSnapshot;p=p.value;try{if(!ea(x(),p))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Yi(t,a,r,u){a&=~Ym,a&=~Zr,t.suspendedLanes|=a,t.pingedLanes&=~a,u&&(t.warmLanes|=a),u=t.expirationTimes;for(var p=a;0<p;){var x=31-Dt(p),j=1<<x;u[x]=-1,p&=~j}r!==0&&J(t,r,a)}function vu(){return(Gt&6)===0?(Uo(0),!1):!0}function th(){if(kt!==null){if(tn===0)var t=kt.return;else t=kt,Es=Hs=null,gm(t),Sl=null,No=0,t=kt;for(;t!==null;)Wx(t.alternate,t),t=t.return;kt=null}}function Rl(t,a){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,LN(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),yi=0,th(),mn=t,kt=r=cs(t.current,null),At=a,tn=0,$a=null,Gi=!1,Ml=gt(t,a),Vm=!1,zl=Qa=Ym=Zr=$i=zn=0,Ra=Io=null,Jm=!1,(a&8)!==0&&(a|=a&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=a;0<u;){var p=31-Dt(u),x=1<<p;a|=t[p],u&=~x}return gi=a,Ar(),r}function jg(t,a){xt=null,Q.H=Ao,a===jl||a===Qc?(a=Bp(),tn=3):a===im?(a=Bp(),tn=4):tn=a===Om?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,$a=a,kt===null&&(zn=1,ou(t,c(a,t.current)))}function Sg(){var t=Ka.current;return t===null?!0:(At&4194048)===At?us===null:(At&62914560)===At||(At&536870912)!==0?t===us:!1}function wg(){var t=Q.H;return Q.H=Ao,t===null?Ao:t}function kg(){var t=Q.A;return Q.A=fN,t}function bu(){zn=4,Gi||(At&4194048)!==At&&Ka.current!==null||(Ml=!0),($i&134217727)===0&&(Zr&134217727)===0||mn===null||Yi(mn,At,Qa,!1)}function nh(t,a,r){var u=Gt;Gt|=2;var p=wg(),x=kg();(mn!==t||At!==a)&&(yu=null,Rl(t,a)),a=!1;var j=zn;e:do try{if(tn!==0&&kt!==null){var M=kt,Y=$a;switch(tn){case 8:th(),j=6;break e;case 3:case 2:case 9:case 6:Ka.current===null&&(a=!0);var fe=tn;if(tn=0,$a=null,Dl(t,M,Y,fe),r&&Ml){j=0;break e}break;default:fe=tn,tn=0,$a=null,Dl(t,M,Y,fe)}}gN(),j=zn;break}catch(Ne){jg(t,Ne)}while(!0);return a&&t.shellSuspendCounter++,Es=Hs=null,Gt=u,Q.H=p,Q.A=x,kt===null&&(mn=null,At=0,Ar()),j}function gN(){for(;kt!==null;)Eg(kt)}function yN(t,a){var r=Gt;Gt|=2;var u=wg(),p=kg();mn!==t||At!==a?(yu=null,gu=se()+500,Rl(t,a)):Ml=gt(t,a);e:do try{if(tn!==0&&kt!==null){a=kt;var x=$a;t:switch(tn){case 1:tn=0,$a=null,Dl(t,a,x,1);break;case 2:case 9:if(Pp(x)){tn=0,$a=null,Tg(a);break}a=function(){tn!==2&&tn!==9||mn!==t||(tn=7),Gs(t)},x.then(a,a);break e;case 3:tn=7;break e;case 4:tn=5;break e;case 7:Pp(x)?(tn=0,$a=null,Tg(a)):(tn=0,$a=null,Dl(t,a,x,7));break;case 5:var j=null;switch(kt.tag){case 26:j=kt.memoizedState;case 5:case 27:var M=kt;if(j?hy(j):M.stateNode.complete){tn=0,$a=null;var Y=M.sibling;if(Y!==null)kt=Y;else{var fe=M.return;fe!==null?(kt=fe,_u(fe)):kt=null}break t}}tn=0,$a=null,Dl(t,a,x,5);break;case 6:tn=0,$a=null,Dl(t,a,x,6);break;case 8:th(),zn=6;break e;default:throw Error(o(462))}}vN();break}catch(Ne){jg(t,Ne)}while(!0);return Es=Hs=null,Q.H=u,Q.A=p,Gt=r,kt!==null?0:(mn=null,At=0,Ar(),zn)}function vN(){for(;kt!==null&&!Pe();)Eg(kt)}function Eg(t){var a=Jx(t.alternate,t,gi);t.memoizedProps=t.pendingProps,a===null?_u(t):kt=a}function Tg(t){var a=t,r=a.alternate;switch(a.tag){case 15:case 0:a=Kx(r,a,a.pendingProps,a.type,void 0,At);break;case 11:a=Kx(r,a,a.pendingProps,a.type.render,a.ref,At);break;case 5:gm(a);default:Wx(r,a),a=kt=po(a,gi),a=Jx(r,a,gi)}t.memoizedProps=t.pendingProps,a===null?_u(t):kt=a}function Dl(t,a,r,u){Es=Hs=null,gm(a),Sl=null,No=0;var p=a.return;try{if(lN(t,p,a,r,At)){zn=1,ou(t,c(r,t.current)),kt=null;return}}catch(x){if(p!==null)throw kt=p,x;zn=1,ou(t,c(r,t.current)),kt=null;return}a.flags&32768?(wt||u===1?t=!0:Ml||(At&536870912)!==0?t=!1:(Gi=t=!0,(u===2||u===9||u===3||u===6)&&(u=Ka.current,u!==null&&u.tag===13&&(u.flags|=16384))),Cg(a,t)):_u(a)}function _u(t){var a=t;do{if((a.flags&32768)!==0){Cg(a,Gi);return}t=a.return;var r=uN(a.alternate,a,gi);if(r!==null){kt=r;return}if(a=a.sibling,a!==null){kt=a;return}kt=a=t}while(a!==null);zn===0&&(zn=5)}function Cg(t,a){do{var r=dN(t.alternate,t);if(r!==null){r.flags&=32767,kt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(t=t.sibling,t!==null)){kt=t;return}kt=t=r}while(t!==null);zn=6,kt=null}function Ag(t,a,r,u,p,x,j,M,Y){t.cancelPendingCommit=null;do Nu();while(Yn!==0);if((Gt&6)!==0)throw Error(o(327));if(a!==null){if(a===t.current)throw Error(o(177));if(x=a.lanes|a.childLanes,x|=xl,es(t,r,x,j,M,Y),t===mn&&(kt=mn=null,At=0),Ol=a,Vi=t,yi=r,Xm=x,Wm=p,vg=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,jN(Lt,function(){return Dg(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,p=$.p,$.p=2,j=Gt,Gt|=4;try{mN(t,a,r)}finally{Gt=j,$.p=p,Q.T=u}}Yn=1,Mg(),zg(),Og()}}function Mg(){if(Yn===1){Yn=0;var t=Vi,a=Ol,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=Q.T,Q.T=null;var u=$.p;$.p=2;var p=Gt;Gt|=4;try{dg(a,t);var x=fh,j=wr(t.containerInfo),M=x.focusedElem,Y=x.selectionRange;if(j!==M&&M&&M.ownerDocument&&ml(M.ownerDocument.documentElement,M)){if(Y!==null&&Ps(M)){var fe=Y.start,Ne=Y.end;if(Ne===void 0&&(Ne=fe),"selectionStart"in M)M.selectionStart=fe,M.selectionEnd=Math.min(Ne,M.value.length);else{var Ce=M.ownerDocument||document,ge=Ce&&Ce.defaultView||window;if(ge.getSelection){var ye=ge.getSelection(),Ke=M.textContent.length,st=Math.min(Y.start,Ke),un=Y.end===void 0?st:Math.min(Y.end,Ke);!ye.extend&&st>un&&(j=un,un=st,st=j);var re=Sr(M,st),W=Sr(M,un);if(re&&W&&(ye.rangeCount!==1||ye.anchorNode!==re.node||ye.anchorOffset!==re.offset||ye.focusNode!==W.node||ye.focusOffset!==W.offset)){var he=Ce.createRange();he.setStart(re.node,re.offset),ye.removeAllRanges(),st>un?(ye.addRange(he),ye.extend(W.node,W.offset)):(he.setEnd(W.node,W.offset),ye.addRange(he))}}}}for(Ce=[],ye=M;ye=ye.parentNode;)ye.nodeType===1&&Ce.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<Ce.length;M++){var we=Ce[M];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}Ru=!!hh,fh=hh=null}finally{Gt=p,$.p=u,Q.T=r}}t.current=a,Yn=2}}function zg(){if(Yn===2){Yn=0;var t=Vi,a=Ol,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=Q.T,Q.T=null;var u=$.p;$.p=2;var p=Gt;Gt|=4;try{rg(t,a.alternate,a)}finally{Gt=p,$.p=u,Q.T=r}}Yn=3}}function Og(){if(Yn===4||Yn===3){Yn=0,Tt();var t=Vi,a=Ol,r=yi,u=vg;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Yn=5:(Yn=0,Ol=Vi=null,Rg(t,t.pendingLanes));var p=t.pendingLanes;if(p===0&&(Qi=null),Ue(r),a=a.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(lt,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=Q.T,p=$.p,$.p=2,Q.T=null;try{for(var x=t.onRecoverableError,j=0;j<u.length;j++){var M=u[j];x(M.value,{componentStack:M.stack})}}finally{Q.T=a,$.p=p}}(yi&3)!==0&&Nu(),Gs(t),p=t.pendingLanes,(r&261930)!==0&&(p&42)!==0?t===eh?Bo++:(Bo=0,eh=t):Bo=0,Uo(0)}}function Rg(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,bo(a)))}function Nu(){return Mg(),zg(),Og(),Dg()}function Dg(){if(Yn!==5)return!1;var t=Vi,a=Xm;Xm=0;var r=Ue(yi),u=Q.T,p=$.p;try{$.p=32>r?32:r,Q.T=null,r=Wm,Wm=null;var x=Vi,j=yi;if(Yn=0,Ol=Vi=null,yi=0,(Gt&6)!==0)throw Error(o(331));var M=Gt;if(Gt|=4,xg(x.current),hg(x,x.current,j,r),Gt=M,Uo(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(lt,x)}catch{}return!0}finally{$.p=p,Q.T=u,Rg(t,a)}}function Lg(t,a,r){a=c(r,a),a=zm(t.stateNode,a,2),t=qi(t,a,2),t!==null&&($n(t,2),Gs(t))}function nn(t,a,r){if(t.tag===3)Lg(t,t,r);else for(;a!==null;){if(a.tag===3){Lg(a,t,r);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Qi===null||!Qi.has(u))){t=c(r,t),r=Px(2),u=qi(a,r,2),u!==null&&(Ix(r,u,a,t),$n(u,2),Gs(u));break}}a=a.return}}function ah(t,a,r){var u=t.pingCache;if(u===null){u=t.pingCache=new pN;var p=new Set;u.set(a,p)}else p=u.get(a),p===void 0&&(p=new Set,u.set(a,p));p.has(r)||(Vm=!0,p.add(r),t=bN.bind(null,t,a,r),a.then(t,t))}function bN(t,a,r){var u=t.pingCache;u!==null&&u.delete(a),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,mn===t&&(At&r)===r&&(zn===4||zn===3&&(At&62914560)===At&&300>se()-xu?(Gt&2)===0&&Rl(t,0):Ym|=r,zl===At&&(zl=0)),Gs(t)}function Pg(t,a){a===0&&(a=Dn()),t=os(t,a),t!==null&&($n(t,a),Gs(t))}function _N(t){var a=t.memoizedState,r=0;a!==null&&(r=a.retryLane),Pg(t,r)}function NN(t,a){var r=0;switch(t.tag){case 31:case 13:var u=t.stateNode,p=t.memoizedState;p!==null&&(r=p.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(a),Pg(t,r)}function jN(t,a){return ne(t,a)}var ju=null,Ll=null,sh=!1,Su=!1,ih=!1,Ji=0;function Gs(t){t!==Ll&&t.next===null&&(Ll===null?ju=Ll=t:Ll=Ll.next=t),Su=!0,sh||(sh=!0,wN())}function Uo(t,a){if(!ih&&Su){ih=!0;do for(var r=!1,u=ju;u!==null;){if(t!==0){var p=u.pendingLanes;if(p===0)var x=0;else{var j=u.suspendedLanes,M=u.pingedLanes;x=(1<<31-Dt(42|t)+1)-1,x&=p&~(j&~M),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(r=!0,Fg(u,x))}else x=At,x=kn(u,u===mn?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(x&3)===0||gt(u,x)||(r=!0,Fg(u,x));u=u.next}while(r);ih=!1}}function SN(){Ig()}function Ig(){Su=sh=!1;var t=0;Ji!==0&&DN()&&(t=Ji);for(var a=se(),r=null,u=ju;u!==null;){var p=u.next,x=Bg(u,a);x===0?(u.next=null,r===null?ju=p:r.next=p,p===null&&(Ll=r)):(r=u,(t!==0||(x&3)!==0)&&(Su=!0)),u=p}Yn!==0&&Yn!==5||Uo(t),Ji!==0&&(Ji=0)}function Bg(t,a){for(var r=t.suspendedLanes,u=t.pingedLanes,p=t.expirationTimes,x=t.pendingLanes&-62914561;0<x;){var j=31-Dt(x),M=1<<j,Y=p[j];Y===-1?((M&r)===0||(M&u)!==0)&&(p[j]=Wa(M,a)):Y<=a&&(t.expiredLanes|=M),x&=~M}if(a=mn,r=At,r=kn(t,t===a?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,r===0||t===a&&(tn===2||tn===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&Se(u),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||gt(t,r)){if(a=r&-r,a===t.callbackPriority)return a;switch(u!==null&&Se(u),Ue(r)){case 2:case 8:r=pn;break;case 32:r=Lt;break;case 268435456:r=Gn;break;default:r=Lt}return u=Ug.bind(null,t),r=ne(r,u),t.callbackPriority=a,t.callbackNode=r,a}return u!==null&&u!==null&&Se(u),t.callbackPriority=2,t.callbackNode=null,2}function Ug(t,a){if(Yn!==0&&Yn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Nu()&&t.callbackNode!==r)return null;var u=At;return u=kn(t,t===mn?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(_g(t,u,a),Bg(t,se()),t.callbackNode!=null&&t.callbackNode===r?Ug.bind(null,t):null)}function Fg(t,a){if(Nu())return null;_g(t,a,!0)}function wN(){PN(function(){(Gt&6)!==0?ne(_t,SN):Ig()})}function rh(){if(Ji===0){var t=_l;t===0&&(t=ut,ut<<=1,(ut&261888)===0&&(ut=256)),Ji=t}return Ji}function qg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ki(""+t)}function Zg(t,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,t.id&&r.setAttribute("form",t.id),a.parentNode.insertBefore(r,a),t=new FormData(t),r.parentNode.removeChild(r),t}function kN(t,a,r,u,p){if(a==="submit"&&r&&r.stateNode===p){var x=qg((p[hn]||null).action),j=u.submitter;j&&(a=(a=j[hn]||null)?qg(a.formAction):j.getAttribute("formAction"),a!==null&&(x=a,j=null));var M=new il("action","action",null,u,p);t.push({event:M,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ji!==0){var Y=j?Zg(p,j):new FormData(p);km(r,{pending:!0,data:Y,method:p.method,action:x},null,Y)}}else typeof x=="function"&&(M.preventDefault(),Y=j?Zg(p,j):new FormData(p),km(r,{pending:!0,data:Y,method:p.method,action:x},x,Y))},currentTarget:p}]})}}for(var lh=0;lh<Us.length;lh++){var oh=Us[lh],EN=oh.toLowerCase(),TN=oh[0].toUpperCase()+oh.slice(1);Ta(EN,"on"+TN)}Ta(Er,"onAnimationEnd"),Ta(qc,"onAnimationIteration"),Ta(Tr,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(Jd,"onTransitionRun"),Ta(Zc,"onTransitionStart"),Ta(Xd,"onTransitionCancel"),Ta(Pi,"onTransitionEnd"),ts("onMouseEnter",["mouseout","mouseover"]),ts("onMouseLeave",["mouseout","mouseover"]),ts("onPointerEnter",["pointerout","pointerover"]),ts("onPointerLeave",["pointerout","pointerover"]),bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fo));function Hg(t,a){a=(a&4)!==0;for(var r=0;r<t.length;r++){var u=t[r],p=u.event;u=u.listeners;e:{var x=void 0;if(a)for(var j=u.length-1;0<=j;j--){var M=u[j],Y=M.instance,fe=M.currentTarget;if(M=M.listener,Y!==x&&p.isPropagationStopped())break e;x=M,p.currentTarget=fe;try{x(p)}catch(Ne){Cr(Ne)}p.currentTarget=null,x=Y}else for(j=0;j<u.length;j++){if(M=u[j],Y=M.instance,fe=M.currentTarget,M=M.listener,Y!==x&&p.isPropagationStopped())break e;x=M,p.currentTarget=fe;try{x(p)}catch(Ne){Cr(Ne)}p.currentTarget=null,x=Y}}}}function Et(t,a){var r=a[K];r===void 0&&(r=a[K]=new Set);var u=t+"__bubble";r.has(u)||(Kg(a,t,2,!1),r.add(u))}function ch(t,a,r){var u=0;a&&(u|=4),Kg(r,t,u,a)}var wu="_reactListening"+Math.random().toString(36).slice(2);function uh(t){if(!t[wu]){t[wu]=!0,rn.forEach(function(r){r!=="selectionchange"&&(CN.has(r)||ch(r,!1,t),ch(r,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[wu]||(a[wu]=!0,ch("selectionchange",!1,a))}}function Kg(t,a,r,u){switch(by(a)){case 2:var p=aj;break;case 8:p=sj;break;default:p=wh}r=p.bind(null,a,r,t),p=void 0,!pr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),u?p!==void 0?t.addEventListener(a,r,{capture:!0,passive:p}):t.addEventListener(a,r,!0):p!==void 0?t.addEventListener(a,r,{passive:p}):t.addEventListener(a,r,!1)}function dh(t,a,r,u,p){var x=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var j=u.tag;if(j===3||j===4){var M=u.stateNode.containerInfo;if(M===p)break;if(j===4)for(j=u.return;j!==null;){var Y=j.tag;if((Y===3||Y===4)&&j.stateNode.containerInfo===p)return;j=j.return}for(;M!==null;){if(j=Ze(M),j===null)return;if(Y=j.tag,Y===5||Y===6||Y===26||Y===27){u=x=j;continue e}M=M.parentNode}}u=u.return}ao(function(){var fe=x,Ne=fr(r),Ce=[];e:{var ge=Hc.get(t);if(ge!==void 0){var ye=il,Ke=t;switch(t){case"keypress":if(xr(r)===0)break e;case"keydown":case"keyup":ye=Ac;break;case"focusin":Ke="focus",ye=ro;break;case"focusout":Ke="blur",ye=ro;break;case"beforeblur":case"afterblur":ye=ro;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Ud;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Kd;break;case Er:case qc:case Tr:ye=lo;break;case Pi:ye=Oc;break;case"scroll":case"scrollend":ye=Ct;break;case"wheel":ye=si;break;case"copy":case"cut":case"paste":ye=ss;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=Mc;break;case"toggle":case"beforetoggle":ye=vr}var st=(a&4)!==0,un=!st&&(t==="scroll"||t==="scrollend"),re=st?ge!==null?ge+"Capture":null:ge;st=[];for(var W=fe,he;W!==null;){var we=W;if(he=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||he===null||re===null||(we=ni(W,re),we!=null&&st.push(qo(W,we,he))),un)break;W=W.return}0<st.length&&(ge=new ye(ge,Ke,null,r,Ne),Ce.push({event:ge,listeners:st}))}}if((a&7)===0){e:{if(ge=t==="mouseover"||t==="pointerover",ye=t==="mouseout"||t==="pointerout",ge&&r!==sl&&(Ke=r.relatedTarget||r.fromElement)&&(Ze(Ke)||Ke[sa]))break e;if((ye||ge)&&(ge=Ne.window===Ne?Ne:(ge=Ne.ownerDocument)?ge.defaultView||ge.parentWindow:window,ye?(Ke=r.relatedTarget||r.toElement,ye=fe,Ke=Ke?Ze(Ke):null,Ke!==null&&(un=m(Ke),st=Ke.tag,Ke!==un||st!==5&&st!==27&&st!==6)&&(Ke=null)):(ye=null,Ke=fe),ye!==Ke)){if(st=wc,we="onMouseLeave",re="onMouseEnter",W="mouse",(t==="pointerout"||t==="pointerover")&&(st=Mc,we="onPointerLeave",re="onPointerEnter",W="pointer"),un=ye==null?ge:Un(ye),he=Ke==null?ge:Un(Ke),ge=new st(we,W+"leave",ye,r,Ne),ge.target=un,ge.relatedTarget=he,we=null,Ze(Ne)===fe&&(st=new st(re,W+"enter",Ke,r,Ne),st.target=he,st.relatedTarget=un,we=st),un=we,ye&&Ke)t:{for(st=AN,re=ye,W=Ke,he=0,we=re;we;we=st(we))he++;we=0;for(var tt=W;tt;tt=st(tt))we++;for(;0<he-we;)re=st(re),he--;for(;0<we-he;)W=st(W),we--;for(;he--;){if(re===W||W!==null&&re===W.alternate){st=re;break t}re=st(re),W=st(W)}st=null}else st=null;ye!==null&&Gg(Ce,ge,ye,st,!1),Ke!==null&&un!==null&&Gg(Ce,un,Ke,st,!0)}}e:{if(ge=fe?Un(fe):window,ye=ge.nodeName&&ge.nodeName.toLowerCase(),ye==="select"||ye==="input"&&ge.type==="file")var Zt=jr;else if(is(ge))if(Pc)Zt=Yd;else{Zt=Vd;var Je=Ss}else ye=ge.nodeName,!ye||ye.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?fe&&hr(fe.elementType)&&(Zt=jr):Zt=Oi;if(Zt&&(Zt=Zt(t,fe))){Lc(Ce,Zt,r,Ne);break e}Je&&Je(t,ge,fe),t==="focusout"&&fe&&ge.type==="number"&&fe.memoizedProps.value!=null&&U(ge,"number",ge.value)}switch(Je=fe?Un(fe):window,t){case"focusin":(is(Je)||Je.contentEditable==="true")&&(Is=Je,fl=fe,kr=null);break;case"focusout":kr=fl=Is=null;break;case"mousedown":Di=!0;break;case"contextmenu":case"mouseup":case"dragend":Di=!1,Uc(Ce,r,Ne);break;case"selectionchange":if(hl)break;case"keydown":case"keyup":Uc(Ce,r,Ne)}var bt;if(ll)e:{switch(t){case"compositionstart":var Mt="onCompositionStart";break e;case"compositionend":Mt="onCompositionEnd";break e;case"compositionupdate":Mt="onCompositionUpdate";break e}Mt=void 0}else Ai?Dc(t,r)&&(Mt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Mt="onCompositionStart");Mt&&(ol&&r.locale!=="ko"&&(Ai||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&Ai&&(bt=Ds()):(as=Ne,ai="value"in as?as.value:as.textContent,Ai=!0)),Je=ku(fe,Mt),0<Je.length&&(Mt=new oo(Mt,t,null,r,Ne),Ce.push({event:Mt,listeners:Je}),bt?Mt.data=bt:(bt=ho(r),bt!==null&&(Mt.data=bt)))),(bt=$d?Ha(t,r):Mi(t,r))&&(Mt=ku(fe,"onBeforeInput"),0<Mt.length&&(Je=new oo("onBeforeInput","beforeinput",null,r,Ne),Ce.push({event:Je,listeners:Mt}),Je.data=bt)),kN(Ce,t,fe,r,Ne)}Hg(Ce,a)})}function qo(t,a,r){return{instance:t,listener:a,currentTarget:r}}function ku(t,a){for(var r=a+"Capture",u=[];t!==null;){var p=t,x=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||x===null||(p=ni(t,r),p!=null&&u.unshift(qo(t,p,x)),p=ni(t,a),p!=null&&u.push(qo(t,p,x))),t.tag===3)return u;t=t.return}return[]}function AN(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Gg(t,a,r,u,p){for(var x=a._reactName,j=[];r!==null&&r!==u;){var M=r,Y=M.alternate,fe=M.stateNode;if(M=M.tag,Y!==null&&Y===u)break;M!==5&&M!==26&&M!==27||fe===null||(Y=fe,p?(fe=ni(r,x),fe!=null&&j.unshift(qo(r,fe,Y))):p||(fe=ni(r,x),fe!=null&&j.push(qo(r,fe,Y)))),r=r.return}j.length!==0&&t.push({event:a,listeners:j})}var MN=/\r\n?/g,zN=/\u0000|\uFFFD/g;function $g(t){return(typeof t=="string"?t:""+t).replace(MN,`
`).replace(zN,"")}function Qg(t,a){return a=$g(a),$g(t)===a}function cn(t,a,r,u,p,x){switch(r){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||la(t,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&la(t,""+u);break;case"className":Ut(t,"class",u);break;case"tabIndex":Ut(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ut(t,r,u);break;case"style":nl(t,u,x);break;case"data":if(a!=="object"){Ut(t,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||r!=="href")){t.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(r);break}u=ki(""+u),t.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(r==="formAction"?(a!=="input"&&cn(t,a,"name",p.name,p,null),cn(t,a,"formEncType",p.formEncType,p,null),cn(t,a,"formMethod",p.formMethod,p,null),cn(t,a,"formTarget",p.formTarget,p,null)):(cn(t,a,"encType",p.encType,p,null),cn(t,a,"method",p.method,p,null),cn(t,a,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(r);break}u=ki(""+u),t.setAttribute(r,u);break;case"onClick":u!=null&&(t.onclick=ka);break;case"onScroll":u!=null&&Et("scroll",t);break;case"onScrollEnd":u!=null&&Et("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}r=ki(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,""+u):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":u===!0?t.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,u):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(r,u):t.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(r):t.setAttribute(r,u);break;case"popover":Et("beforetoggle",t),Et("toggle",t),jt(t,"popover",u);break;case"xlinkActuate":ia(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ia(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ia(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ia(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ia(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ia(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ia(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ia(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ia(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":jt(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=al.get(r)||r,jt(t,r,u))}}function mh(t,a,r,u,p,x){switch(r){case"style":nl(t,u,x);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"children":typeof u=="string"?la(t,u):(typeof u=="number"||typeof u=="bigint")&&la(t,""+u);break;case"onScroll":u!=null&&Et("scroll",t);break;case"onScrollEnd":u!=null&&Et("scrollend",t);break;case"onClick":u!=null&&(t.onclick=ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mr.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),a=r.slice(2,p?r.length-7:void 0),x=t[hn]||null,x=x!=null?x[r]:null,typeof x=="function"&&t.removeEventListener(a,x,p),typeof u=="function")){typeof x!="function"&&x!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(a,u,p);break e}r in t?t[r]=u:u===!0?t.setAttribute(r,""):jt(t,r,u)}}}function da(t,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",t),Et("load",t);var u=!1,p=!1,x;for(x in r)if(r.hasOwnProperty(x)){var j=r[x];if(j!=null)switch(x){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:cn(t,a,x,j,r,null)}}p&&cn(t,a,"srcSet",r.srcSet,r,null),u&&cn(t,a,"src",r.src,r,null);return;case"input":Et("invalid",t);var M=x=j=p=null,Y=null,fe=null;for(u in r)if(r.hasOwnProperty(u)){var Ne=r[u];if(Ne!=null)switch(u){case"name":p=Ne;break;case"type":j=Ne;break;case"checked":Y=Ne;break;case"defaultChecked":fe=Ne;break;case"value":x=Ne;break;case"defaultValue":M=Ne;break;case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(o(137,a));break;default:cn(t,a,u,Ne,r,null)}}Rs(t,x,M,Y,fe,j,p,!1);return;case"select":Et("invalid",t),u=j=x=null;for(p in r)if(r.hasOwnProperty(p)&&(M=r[p],M!=null))switch(p){case"value":x=M;break;case"defaultValue":j=M;break;case"multiple":u=M;default:cn(t,a,p,M,r,null)}a=x,r=j,t.multiple=!!u,a!=null?Re(t,!!u,a,!1):r!=null&&Re(t,!!u,r,!0);return;case"textarea":Et("invalid",t),x=p=u=null;for(j in r)if(r.hasOwnProperty(j)&&(M=r[j],M!=null))switch(j){case"value":u=M;break;case"defaultValue":p=M;break;case"children":x=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(o(91));break;default:cn(t,a,j,M,r,null)}ra(t,u,p,x);return;case"option":for(Y in r)r.hasOwnProperty(Y)&&(u=r[Y],u!=null)&&(Y==="selected"?t.selected=u&&typeof u!="function"&&typeof u!="symbol":cn(t,a,Y,u,r,null));return;case"dialog":Et("beforetoggle",t),Et("toggle",t),Et("cancel",t),Et("close",t);break;case"iframe":case"object":Et("load",t);break;case"video":case"audio":for(u=0;u<Fo.length;u++)Et(Fo[u],t);break;case"image":Et("error",t),Et("load",t);break;case"details":Et("toggle",t);break;case"embed":case"source":case"link":Et("error",t),Et("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in r)if(r.hasOwnProperty(fe)&&(u=r[fe],u!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:cn(t,a,fe,u,r,null)}return;default:if(hr(a)){for(Ne in r)r.hasOwnProperty(Ne)&&(u=r[Ne],u!==void 0&&mh(t,a,Ne,u,r,void 0));return}}for(M in r)r.hasOwnProperty(M)&&(u=r[M],u!=null&&cn(t,a,M,u,r,null))}function ON(t,a,r,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,x=null,j=null,M=null,Y=null,fe=null,Ne=null;for(ye in r){var Ce=r[ye];if(r.hasOwnProperty(ye)&&Ce!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":Y=Ce;default:u.hasOwnProperty(ye)||cn(t,a,ye,null,u,Ce)}}for(var ge in u){var ye=u[ge];if(Ce=r[ge],u.hasOwnProperty(ge)&&(ye!=null||Ce!=null))switch(ge){case"type":x=ye;break;case"name":p=ye;break;case"checked":fe=ye;break;case"defaultChecked":Ne=ye;break;case"value":j=ye;break;case"defaultValue":M=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(o(137,a));break;default:ye!==Ce&&cn(t,a,ge,ye,u,Ce)}}ti(t,j,M,Y,fe,Ne,x,p);return;case"select":ye=j=M=ge=null;for(x in r)if(Y=r[x],r.hasOwnProperty(x)&&Y!=null)switch(x){case"value":break;case"multiple":ye=Y;default:u.hasOwnProperty(x)||cn(t,a,x,null,u,Y)}for(p in u)if(x=u[p],Y=r[p],u.hasOwnProperty(p)&&(x!=null||Y!=null))switch(p){case"value":ge=x;break;case"defaultValue":M=x;break;case"multiple":j=x;default:x!==Y&&cn(t,a,p,x,u,Y)}a=M,r=j,u=ye,ge!=null?Re(t,!!r,ge,!1):!!u!=!!r&&(a!=null?Re(t,!!r,a,!0):Re(t,!!r,r?[]:"",!1));return;case"textarea":ye=ge=null;for(M in r)if(p=r[M],r.hasOwnProperty(M)&&p!=null&&!u.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:cn(t,a,M,null,u,p)}for(j in u)if(p=u[j],x=r[j],u.hasOwnProperty(j)&&(p!=null||x!=null))switch(j){case"value":ge=p;break;case"defaultValue":ye=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(o(91));break;default:p!==x&&cn(t,a,j,p,u,x)}yt(t,ge,ye);return;case"option":for(var Ke in r)ge=r[Ke],r.hasOwnProperty(Ke)&&ge!=null&&!u.hasOwnProperty(Ke)&&(Ke==="selected"?t.selected=!1:cn(t,a,Ke,null,u,ge));for(Y in u)ge=u[Y],ye=r[Y],u.hasOwnProperty(Y)&&ge!==ye&&(ge!=null||ye!=null)&&(Y==="selected"?t.selected=ge&&typeof ge!="function"&&typeof ge!="symbol":cn(t,a,Y,ge,u,ye));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in r)ge=r[st],r.hasOwnProperty(st)&&ge!=null&&!u.hasOwnProperty(st)&&cn(t,a,st,null,u,ge);for(fe in u)if(ge=u[fe],ye=r[fe],u.hasOwnProperty(fe)&&ge!==ye&&(ge!=null||ye!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(o(137,a));break;default:cn(t,a,fe,ge,u,ye)}return;default:if(hr(a)){for(var un in r)ge=r[un],r.hasOwnProperty(un)&&ge!==void 0&&!u.hasOwnProperty(un)&&mh(t,a,un,void 0,u,ge);for(Ne in u)ge=u[Ne],ye=r[Ne],!u.hasOwnProperty(Ne)||ge===ye||ge===void 0&&ye===void 0||mh(t,a,Ne,ge,u,ye);return}}for(var re in r)ge=r[re],r.hasOwnProperty(re)&&ge!=null&&!u.hasOwnProperty(re)&&cn(t,a,re,null,u,ge);for(Ce in u)ge=u[Ce],ye=r[Ce],!u.hasOwnProperty(Ce)||ge===ye||ge==null&&ye==null||cn(t,a,Ce,ge,u,ye)}function Vg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RN(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var p=r[u],x=p.transferSize,j=p.initiatorType,M=p.duration;if(x&&M&&Vg(j)){for(j=0,M=p.responseEnd,u+=1;u<r.length;u++){var Y=r[u],fe=Y.startTime;if(fe>M)break;var Ne=Y.transferSize,Ce=Y.initiatorType;Ne&&Vg(Ce)&&(Y=Y.responseEnd,j+=Ne*(Y<M?1:(M-fe)/(Y-fe)))}if(--u,a+=8*(x+j)/(p.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var hh=null,fh=null;function Eu(t){return t.nodeType===9?t:t.ownerDocument}function Yg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jg(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function ph(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var xh=null;function DN(){var t=window.event;return t&&t.type==="popstate"?t===xh?!1:(xh=t,!0):(xh=null,!1)}var Xg=typeof setTimeout=="function"?setTimeout:void 0,LN=typeof clearTimeout=="function"?clearTimeout:void 0,Wg=typeof Promise=="function"?Promise:void 0,PN=typeof queueMicrotask=="function"?queueMicrotask:typeof Wg<"u"?function(t){return Wg.resolve(null).then(t).catch(IN)}:Xg;function IN(t){setTimeout(function(){throw t})}function Xi(t){return t==="head"}function ey(t,a){var r=a,u=0;do{var p=r.nextSibling;if(t.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(u===0){t.removeChild(p),Ul(a);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")Zo(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Zo(r);for(var x=r.firstChild;x;){var j=x.nextSibling,M=x.nodeName;x[Tn]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&x.rel.toLowerCase()==="stylesheet"||r.removeChild(x),x=j}}else r==="body"&&Zo(t.ownerDocument.body);r=p}while(r);Ul(a)}function ty(t,a){var r=t;t=0;do{var u=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=u}while(r)}function gh(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":gh(r),q(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function BN(t,a,r,u){for(;t.nodeType===1;){var p=r;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[Tn])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(x=t.getAttribute("rel"),x==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(x!==p.rel||t.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||t.getAttribute("title")!==(p.title==null?null:p.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(x=t.getAttribute("src"),(x!==(p.src==null?null:p.src)||t.getAttribute("type")!==(p.type==null?null:p.type)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&x&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var x=p.name==null?null:""+p.name;if(p.type==="hidden"&&t.getAttribute("name")===x)return t}else return t;if(t=ds(t.nextSibling),t===null)break}return null}function UN(t,a,r){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=ds(t.nextSibling),t===null))return null;return t}function ny(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ds(t.nextSibling),t===null))return null;return t}function yh(t){return t.data==="$?"||t.data==="$~"}function vh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function FN(t,a){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||r.readyState!=="loading")a();else{var u=function(){a(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function ds(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var bh=null;function ay(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(a===0)return ds(t.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}t=t.nextSibling}return null}function sy(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return t;a--}else r!=="/$"&&r!=="/&"||a++}t=t.previousSibling}return null}function iy(t,a,r){switch(a=Eu(r),t){case"html":if(t=a.documentElement,!t)throw Error(o(452));return t;case"head":if(t=a.head,!t)throw Error(o(453));return t;case"body":if(t=a.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Zo(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);q(t)}var ms=new Map,ry=new Set;function Tu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var vi=$.d;$.d={f:qN,r:ZN,D:HN,C:KN,L:GN,m:$N,X:VN,S:QN,M:YN};function qN(){var t=vi.f(),a=vu();return t||a}function ZN(t){var a=St(t);a!==null&&a.tag===5&&a.type==="form"?jx(a):vi.r(t)}var Pl=typeof document>"u"?null:document;function ly(t,a,r){var u=Pl;if(u&&typeof a=="string"&&a){var p=en(a);p='link[rel="'+t+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),ry.has(p)||(ry.add(p),t={rel:t,crossOrigin:r,href:a},u.querySelector(p)===null&&(a=u.createElement("link"),da(a,"link",t),vn(a),u.head.appendChild(a)))}}function HN(t){vi.D(t),ly("dns-prefetch",t,null)}function KN(t,a){vi.C(t,a),ly("preconnect",t,a)}function GN(t,a,r){vi.L(t,a,r);var u=Pl;if(u&&t&&a){var p='link[rel="preload"][as="'+en(a)+'"]';a==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+en(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+en(r.imageSizes)+'"]')):p+='[href="'+en(t)+'"]';var x=p;switch(a){case"style":x=Il(t);break;case"script":x=Bl(t)}ms.has(x)||(t=w({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:t,as:a},r),ms.set(x,t),u.querySelector(p)!==null||a==="style"&&u.querySelector(Ho(x))||a==="script"&&u.querySelector(Ko(x))||(a=u.createElement("link"),da(a,"link",t),vn(a),u.head.appendChild(a)))}}function $N(t,a){vi.m(t,a);var r=Pl;if(r&&t){var u=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+en(u)+'"][href="'+en(t)+'"]',x=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Bl(t)}if(!ms.has(x)&&(t=w({rel:"modulepreload",href:t},a),ms.set(x,t),r.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ko(x)))return}u=r.createElement("link"),da(u,"link",t),vn(u),r.head.appendChild(u)}}}function QN(t,a,r){vi.S(t,a,r);var u=Pl;if(u&&t){var p=Sa(u).hoistableStyles,x=Il(t);a=a||"default";var j=p.get(x);if(!j){var M={loading:0,preload:null};if(j=u.querySelector(Ho(x)))M.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":a},r),(r=ms.get(x))&&_h(t,r);var Y=j=u.createElement("link");vn(Y),da(Y,"link",t),Y._p=new Promise(function(fe,Ne){Y.onload=fe,Y.onerror=Ne}),Y.addEventListener("load",function(){M.loading|=1}),Y.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Cu(j,a,u)}j={type:"stylesheet",instance:j,count:1,state:M},p.set(x,j)}}}function VN(t,a){vi.X(t,a);var r=Pl;if(r&&t){var u=Sa(r).hoistableScripts,p=Bl(t),x=u.get(p);x||(x=r.querySelector(Ko(p)),x||(t=w({src:t,async:!0},a),(a=ms.get(p))&&Nh(t,a),x=r.createElement("script"),vn(x),da(x,"link",t),r.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(p,x))}}function YN(t,a){vi.M(t,a);var r=Pl;if(r&&t){var u=Sa(r).hoistableScripts,p=Bl(t),x=u.get(p);x||(x=r.querySelector(Ko(p)),x||(t=w({src:t,async:!0,type:"module"},a),(a=ms.get(p))&&Nh(t,a),x=r.createElement("script"),vn(x),da(x,"link",t),r.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(p,x))}}function oy(t,a,r,u){var p=(p=Ee.current)?Tu(p):null;if(!p)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=Il(r.href),r=Sa(p).hoistableStyles,u=r.get(a),u||(u={type:"style",instance:null,count:0,state:null},r.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Il(r.href);var x=Sa(p).hoistableStyles,j=x.get(t);if(j||(p=p.ownerDocument||p,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(t,j),(x=p.querySelector(Ho(t)))&&!x._p&&(j.instance=x,j.state.loading=5),ms.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ms.set(t,r),x||JN(p,t,r,j.state))),a&&u===null)throw Error(o(528,""));return j}if(a&&u!==null)throw Error(o(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Bl(r),r=Sa(p).hoistableScripts,u=r.get(a),u||(u={type:"script",instance:null,count:0,state:null},r.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Il(t){return'href="'+en(t)+'"'}function Ho(t){return'link[rel="stylesheet"]['+t+"]"}function cy(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function JN(t,a,r,u){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=t.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),da(a,"link",r),vn(a),t.head.appendChild(a))}function Bl(t){return'[src="'+en(t)+'"]'}function Ko(t){return"script[async]"+t}function uy(t,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var u=t.querySelector('style[data-href~="'+en(r.href)+'"]');if(u)return a.instance=u,vn(u),u;var p=w({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),vn(u),da(u,"style",p),Cu(u,r.precedence,t),a.instance=u;case"stylesheet":p=Il(r.href);var x=t.querySelector(Ho(p));if(x)return a.state.loading|=4,a.instance=x,vn(x),x;u=cy(r),(p=ms.get(p))&&_h(u,p),x=(t.ownerDocument||t).createElement("link"),vn(x);var j=x;return j._p=new Promise(function(M,Y){j.onload=M,j.onerror=Y}),da(x,"link",u),a.state.loading|=4,Cu(x,r.precedence,t),a.instance=x;case"script":return x=Bl(r.src),(p=t.querySelector(Ko(x)))?(a.instance=p,vn(p),p):(u=r,(p=ms.get(x))&&(u=w({},r),Nh(u,p)),t=t.ownerDocument||t,p=t.createElement("script"),vn(p),da(p,"link",u),t.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(o(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Cu(u,r.precedence,t));return a.instance}function Cu(t,a,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,x=p,j=0;j<u.length;j++){var M=u[j];if(M.dataset.precedence===a)x=M;else if(x!==p)break}x?x.parentNode.insertBefore(t,x.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(t,a.firstChild))}function _h(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Nh(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Au=null;function dy(t,a,r){if(Au===null){var u=new Map,p=Au=new Map;p.set(r,u)}else p=Au,u=p.get(r),u||(u=new Map,p.set(r,u));if(u.has(t))return u;for(u.set(t,null),r=r.getElementsByTagName(t),p=0;p<r.length;p++){var x=r[p];if(!(x[Tn]||x[Wt]||t==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var j=x.getAttribute(a)||"";j=t+j;var M=u.get(j);M?M.push(x):u.set(j,[x])}}return u}function my(t,a,r){t=t.ownerDocument||t,t.head.insertBefore(r,a==="title"?t.querySelector("head > title"):null)}function XN(t,a,r){if(r===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function hy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function WN(t,a,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=Il(u.href),x=a.querySelector(Ho(p));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Mu.bind(t),a.then(t,t)),r.state.loading|=4,r.instance=x,vn(x);return}x=a.ownerDocument||a,u=cy(u),(p=ms.get(p))&&_h(u,p),x=x.createElement("link"),vn(x);var j=x;j._p=new Promise(function(M,Y){j.onload=M,j.onerror=Y}),da(x,"link",u),r.instance=x}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Mu.bind(t),a.addEventListener("load",r),a.addEventListener("error",r))}}var jh=0;function ej(t,a){return t.stylesheets&&t.count===0&&Ou(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var u=setTimeout(function(){if(t.stylesheets&&Ou(t,t.stylesheets),t.unsuspend){var x=t.unsuspend;t.unsuspend=null,x()}},6e4+a);0<t.imgBytes&&jh===0&&(jh=62500*RN());var p=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ou(t,t.stylesheets),t.unsuspend)){var x=t.unsuspend;t.unsuspend=null,x()}},(t.imgBytes>jh?50:800)+a);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Mu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ou(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var zu=null;function Ou(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,zu=new Map,a.forEach(tj,t),zu=null,Mu.call(t))}function tj(t,a){if(!(a.state.loading&4)){var r=zu.get(t);if(r)var u=r.get(null);else{r=new Map,zu.set(t,r);for(var p=t.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<p.length;x++){var j=p[x];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(r.set(j.dataset.precedence,j),u=j)}u&&r.set(null,u)}p=a.instance,j=p.getAttribute("data-precedence"),x=r.get(j)||u,x===u&&r.set(null,p),r.set(j,p),this.count++,u=Mu.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),x?x.parentNode.insertBefore(p,x.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(p,t.firstChild)),a.state.loading|=4}}var Go={$$typeof:z,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function nj(t,a,r,u,p,x,j,M,Y){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kt(0),this.hiddenUpdates=Kt(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=x,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function fy(t,a,r,u,p,x,j,M,Y,fe,Ne,Ce){return t=new nj(t,a,r,j,Y,fe,Ne,Ce,M),a=1,x===!0&&(a|=24),x=pa(3,null,null,a),t.current=x,x.stateNode=t,a=nm(),a.refCount++,t.pooledCache=a,a.refCount++,x.memoizedState={element:u,isDehydrated:r,cache:a},rm(x),t}function py(t){return t?(t=ii,t):ii}function xy(t,a,r,u,p,x){p=py(p),u.context===null?u.context=p:u.pendingContext=p,u=Fi(a),u.payload={element:r},x=x===void 0?null:x,x!==null&&(u.callback=x),r=qi(t,u,a),r!==null&&(Da(r,t,a),So(r,t,a))}function gy(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<a?r:a}}function Sh(t,a){gy(t,a),(t=t.alternate)&&gy(t,a)}function yy(t){if(t.tag===13||t.tag===31){var a=os(t,67108864);a!==null&&Da(a,t,67108864),Sh(t,67108864)}}function vy(t){if(t.tag===13||t.tag===31){var a=Va();a=ht(a);var r=os(t,a);r!==null&&Da(r,t,a),Sh(t,a)}}var Ru=!0;function aj(t,a,r,u){var p=Q.T;Q.T=null;var x=$.p;try{$.p=2,wh(t,a,r,u)}finally{$.p=x,Q.T=p}}function sj(t,a,r,u){var p=Q.T;Q.T=null;var x=$.p;try{$.p=8,wh(t,a,r,u)}finally{$.p=x,Q.T=p}}function wh(t,a,r,u){if(Ru){var p=kh(u);if(p===null)dh(t,a,u,Du,r),_y(t,u);else if(rj(p,t,a,r,u))u.stopPropagation();else if(_y(t,u),a&4&&-1<ij.indexOf(t)){for(;p!==null;){var x=St(p);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var j=We(x.pendingLanes);if(j!==0){var M=x;for(M.pendingLanes|=2,M.entangledLanes|=2;j;){var Y=1<<31-Dt(j);M.entanglements[1]|=Y,j&=~Y}Gs(x),(Gt&6)===0&&(gu=se()+500,Uo(0))}}break;case 31:case 13:M=os(x,2),M!==null&&Da(M,x,2),vu(),Sh(x,2)}if(x=kh(u),x===null&&dh(t,a,u,Du,r),x===p)break;p=x}p!==null&&u.stopPropagation()}else dh(t,a,u,null,r)}}function kh(t){return t=fr(t),Eh(t)}var Du=null;function Eh(t){if(Du=null,t=Ze(t),t!==null){var a=m(t);if(a===null)t=null;else{var r=a.tag;if(r===13){if(t=f(a),t!==null)return t;t=null}else if(r===31){if(t=g(a),t!==null)return t;t=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Du=t,null}function by(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case _t:return 2;case pn:return 8;case Lt:case rt:return 32;case Gn:return 268435456;default:return 32}default:return 32}}var Th=!1,Wi=null,er=null,tr=null,$o=new Map,Qo=new Map,nr=[],ij="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _y(t,a){switch(t){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":$o.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(a.pointerId)}}function Vo(t,a,r,u,p,x){return t===null||t.nativeEvent!==x?(t={blockedOn:a,domEventName:r,eventSystemFlags:u,nativeEvent:x,targetContainers:[p]},a!==null&&(a=St(a),a!==null&&yy(a)),t):(t.eventSystemFlags|=u,a=t.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),t)}function rj(t,a,r,u,p){switch(a){case"focusin":return Wi=Vo(Wi,t,a,r,u,p),!0;case"dragenter":return er=Vo(er,t,a,r,u,p),!0;case"mouseover":return tr=Vo(tr,t,a,r,u,p),!0;case"pointerover":var x=p.pointerId;return $o.set(x,Vo($o.get(x)||null,t,a,r,u,p)),!0;case"gotpointercapture":return x=p.pointerId,Qo.set(x,Vo(Qo.get(x)||null,t,a,r,u,p)),!0}return!1}function Ny(t){var a=Ze(t.target);if(a!==null){var r=m(a);if(r!==null){if(a=r.tag,a===13){if(a=f(r),a!==null){t.blockedOn=a,yn(t.priority,function(){vy(r)});return}}else if(a===31){if(a=g(r),a!==null){t.blockedOn=a,yn(t.priority,function(){vy(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lu(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var r=kh(t.nativeEvent);if(r===null){r=t.nativeEvent;var u=new r.constructor(r.type,r);sl=u,r.target.dispatchEvent(u),sl=null}else return a=St(r),a!==null&&yy(a),t.blockedOn=r,!1;a.shift()}return!0}function jy(t,a,r){Lu(t)&&r.delete(a)}function lj(){Th=!1,Wi!==null&&Lu(Wi)&&(Wi=null),er!==null&&Lu(er)&&(er=null),tr!==null&&Lu(tr)&&(tr=null),$o.forEach(jy),Qo.forEach(jy)}function Pu(t,a){t.blockedOn===a&&(t.blockedOn=null,Th||(Th=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lj)))}var Iu=null;function Sy(t){Iu!==t&&(Iu=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Iu===t&&(Iu=null);for(var a=0;a<t.length;a+=3){var r=t[a],u=t[a+1],p=t[a+2];if(typeof u!="function"){if(Eh(u||r)===null)continue;break}var x=St(r);x!==null&&(t.splice(a,3),a-=3,km(x,{pending:!0,data:p,method:r.method,action:u},u,p))}}))}function Ul(t){function a(Y){return Pu(Y,t)}Wi!==null&&Pu(Wi,t),er!==null&&Pu(er,t),tr!==null&&Pu(tr,t),$o.forEach(a),Qo.forEach(a);for(var r=0;r<nr.length;r++){var u=nr[r];u.blockedOn===t&&(u.blockedOn=null)}for(;0<nr.length&&(r=nr[0],r.blockedOn===null);)Ny(r),r.blockedOn===null&&nr.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var p=r[u],x=r[u+1],j=p[hn]||null;if(typeof x=="function")j||Sy(r);else if(j){var M=null;if(x&&x.hasAttribute("formAction")){if(p=x,j=x[hn]||null)M=j.formAction;else if(Eh(p)!==null)continue}else M=j.action;typeof M=="function"?r[u+1]=M:(r.splice(u,3),u-=3),Sy(r)}}}function wy(){function t(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(j){return p=j})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function Ch(t){this._internalRoot=t}Bu.prototype.render=Ch.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(o(409));var r=a.current,u=Va();xy(r,u,t,a,null,null)},Bu.prototype.unmount=Ch.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;xy(t.current,2,null,t,null,null),vu(),a[sa]=null}};function Bu(t){this._internalRoot=t}Bu.prototype.unstable_scheduleHydration=function(t){if(t){var a=sn();t={blockedOn:null,target:t,priority:a};for(var r=0;r<nr.length&&a!==0&&a<nr[r].priority;r++);nr.splice(r,0,t),r===0&&Ny(t)}};var ky=s.version;if(ky!=="19.2.4")throw Error(o(527,ky,"19.2.4"));$.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=_(a),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var oj={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uu.isDisabled&&Uu.supportsFiber)try{lt=Uu.inject(oj),Nt=Uu}catch{}}return Jo.createRoot=function(t,a){if(!d(t))throw Error(o(299));var r=!1,u="",p=Ox,x=Rx,j=Dx;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(j=a.onRecoverableError)),a=fy(t,1,!1,null,null,r,u,null,p,x,j,wy),t[sa]=a.current,uh(t),new Ch(a)},Jo.hydrateRoot=function(t,a,r){if(!d(t))throw Error(o(299));var u=!1,p="",x=Ox,j=Rx,M=Dx,Y=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(x=r.onUncaughtError),r.onCaughtError!==void 0&&(j=r.onCaughtError),r.onRecoverableError!==void 0&&(M=r.onRecoverableError),r.formState!==void 0&&(Y=r.formState)),a=fy(t,1,!0,a,r??null,u,p,Y,x,j,M,wy),a.context=py(null),r=a.current,u=Va(),u=ht(u),p=Fi(u),p.callback=null,qi(r,p,u),r=u,a.current.lanes=r,$n(a,r),Gs(a),t[sa]=a.current,uh(t),new Bu(a)},Jo.version="19.2.4",Jo}var Ly;function yj(){if(Ly)return zh.exports;Ly=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(s){console.error(s)}}return e(),zh.exports=gj(),zh.exports}var vj=yj();const bj=Ed(vj);var $l=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_j={setTimeout:(e,s)=>setTimeout(e,s),clearTimeout:e=>clearTimeout(e),setInterval:(e,s)=>setInterval(e,s),clearInterval:e=>clearInterval(e)},Nj=class{#e=_j;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,s){return this.#e.setTimeout(e,s)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,s){return this.#e.setInterval(e,s)}clearInterval(e){this.#e.clearInterval(e)}},Gr=new Nj;function jj(e){setTimeout(e,0)}var Vr=typeof window>"u"||"Deno"in globalThis;function ja(){}function Sj(e,s){return typeof e=="function"?e(s):e}function Tf(e){return typeof e=="number"&&e>=0&&e!==1/0}function Fv(e,s){return Math.max(e+(s||0)-Date.now(),0)}function lr(e,s){return typeof e=="function"?e(s):e}function fs(e,s){return typeof e=="function"?e(s):e}function Py(e,s){const{type:l="all",exact:o,fetchStatus:d,predicate:m,queryKey:f,stale:g}=e;if(f){if(o){if(s.queryHash!==tp(f,s.options))return!1}else if(!rc(s.queryKey,f))return!1}if(l!=="all"){const v=s.isActive();if(l==="active"&&!v||l==="inactive"&&v)return!1}return!(typeof g=="boolean"&&s.isStale()!==g||d&&d!==s.state.fetchStatus||m&&!m(s))}function Iy(e,s){const{exact:l,status:o,predicate:d,mutationKey:m}=e;if(m){if(!s.options.mutationKey)return!1;if(l){if(Yr(s.options.mutationKey)!==Yr(m))return!1}else if(!rc(s.options.mutationKey,m))return!1}return!(o&&s.state.status!==o||d&&!d(s))}function tp(e,s){return(s?.queryKeyHashFn||Yr)(e)}function Yr(e){return JSON.stringify(e,(s,l)=>Cf(l)?Object.keys(l).sort().reduce((o,d)=>(o[d]=l[d],o),{}):l)}function rc(e,s){return e===s?!0:typeof e!=typeof s?!1:e&&s&&typeof e=="object"&&typeof s=="object"?Object.keys(s).every(l=>rc(e[l],s[l])):!1}var wj=Object.prototype.hasOwnProperty;function qv(e,s,l=0){if(e===s)return e;if(l>500)return s;const o=By(e)&&By(s);if(!o&&!(Cf(e)&&Cf(s)))return s;const m=(o?e:Object.keys(e)).length,f=o?s:Object.keys(s),g=f.length,v=o?new Array(g):{};let _=0;for(let S=0;S<g;S++){const w=o?S:f[S],k=e[w],O=s[w];if(k===O){v[w]=k,(o?S<m:wj.call(e,w))&&_++;continue}if(k===null||O===null||typeof k!="object"||typeof O!="object"){v[w]=O;continue}const T=qv(k,O,l+1);v[w]=T,T===k&&_++}return m===g&&_===m?e:v}function md(e,s){if(!s||Object.keys(e).length!==Object.keys(s).length)return!1;for(const l in e)if(e[l]!==s[l])return!1;return!0}function By(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Cf(e){if(!Uy(e))return!1;const s=e.constructor;if(s===void 0)return!0;const l=s.prototype;return!(!Uy(l)||!l.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Uy(e){return Object.prototype.toString.call(e)==="[object Object]"}function kj(e){return new Promise(s=>{Gr.setTimeout(s,e)})}function Af(e,s,l){return typeof l.structuralSharing=="function"?l.structuralSharing(e,s):l.structuralSharing!==!1?qv(e,s):s}function Ej(e,s,l=0){const o=[...e,s];return l&&o.length>l?o.slice(1):o}function Tj(e,s,l=0){const o=[s,...e];return l&&o.length>l?o.slice(0,-1):o}var np=Symbol();function Zv(e,s){return!e.queryFn&&s?.initialPromise?()=>s.initialPromise:!e.queryFn||e.queryFn===np?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function ap(e,s){return typeof e=="function"?e(...s):!!e}function Cj(e,s,l){let o=!1,d;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(d??=s(),o||(o=!0,d.aborted?l():d.addEventListener("abort",l,{once:!0})),d)}),e}var Aj=class extends $l{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Vr&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},sp=new Aj;function Mf(){let e,s;const l=new Promise((d,m)=>{e=d,s=m});l.status="pending",l.catch(()=>{});function o(d){Object.assign(l,d),delete l.resolve,delete l.reject}return l.resolve=d=>{o({status:"fulfilled",value:d}),e(d)},l.reject=d=>{o({status:"rejected",reason:d}),s(d)},l}var Mj=jj;function zj(){let e=[],s=0,l=g=>{g()},o=g=>{g()},d=Mj;const m=g=>{s?e.push(g):d(()=>{l(g)})},f=()=>{const g=e;e=[],g.length&&d(()=>{o(()=>{g.forEach(v=>{l(v)})})})};return{batch:g=>{let v;s++;try{v=g()}finally{s--,s||f()}return v},batchCalls:g=>(...v)=>{m(()=>{g(...v)})},schedule:m,setNotifyFunction:g=>{l=g},setBatchNotifyFunction:g=>{o=g},setScheduler:g=>{d=g}}}var Jn=zj(),Oj=class extends $l{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Vr&&window.addEventListener){const s=()=>e(!0),l=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",l,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",l)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(l=>{l(e)}))}isOnline(){return this.#e}},hd=new Oj;function Rj(e){return Math.min(1e3*2**e,3e4)}function Hv(e){return(e??"online")==="online"?hd.isOnline():!0}var zf=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Kv(e){let s=!1,l=0,o;const d=Mf(),m=()=>d.status!=="pending",f=E=>{if(!m()){const R=new zf(E);k(R),e.onCancel?.(R)}},g=()=>{s=!0},v=()=>{s=!1},_=()=>sp.isFocused()&&(e.networkMode==="always"||hd.isOnline())&&e.canRun(),S=()=>Hv(e.networkMode)&&e.canRun(),w=E=>{m()||(o?.(),d.resolve(E))},k=E=>{m()||(o?.(),d.reject(E))},O=()=>new Promise(E=>{o=R=>{(m()||_())&&E(R)},e.onPause?.()}).then(()=>{o=void 0,m()||e.onContinue?.()}),T=()=>{if(m())return;let E;const R=l===0?e.initialPromise:void 0;try{E=R??e.fn()}catch(B){E=Promise.reject(B)}Promise.resolve(E).then(w).catch(B=>{if(m())return;const A=e.retry??(Vr?0:3),z=e.retryDelay??Rj,Z=typeof z=="function"?z(l,B):z,I=A===!0||typeof A=="number"&&l<A||typeof A=="function"&&A(l,B);if(s||!I){k(B);return}l++,e.onFail?.(l,B),kj(Z).then(()=>_()?void 0:O()).then(()=>{s?k(B):T()})})};return{promise:d,status:()=>d.status,cancel:f,continue:()=>(o?.(),d),cancelRetry:g,continueRetry:v,canStart:S,start:()=>(S()?T():O().then(T),d)}}var Gv=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Tf(this.gcTime)&&(this.#e=Gr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Vr?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Gr.clearTimeout(this.#e),this.#e=void 0)}},Dj=class extends Gv{#e;#t;#n;#s;#a;#r;#l;constructor(e){super(),this.#l=!1,this.#r=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=qy(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(e){if(this.options={...this.#r,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=qy(this.options);s.data!==void 0&&(this.setState(Fy(s.data,s.dataUpdatedAt)),this.#e=s)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,s){const l=Af(this.state.data,e,this.options);return this.#i({data:l,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),l}setState(e,s){this.#i({type:"setState",state:e,setStateOptions:s})}cancel(e){const s=this.#a?.promise;return this.#a?.cancel(e),s?s.then(ja).catch(ja):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>fs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===np||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>lr(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Fv(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(this.#a&&(this.#l?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,s){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(v=>v.options.queryFn);g&&this.setOptions(g.options)}const l=new AbortController,o=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(this.#l=!0,l.signal)})},d=()=>{const g=Zv(this.options,s),_=(()=>{const S={client:this.#s,queryKey:this.queryKey,meta:this.meta};return o(S),S})();return this.#l=!1,this.options.persister?this.options.persister(g,_,this):g(_)},f=(()=>{const g={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:d};return o(g),g})();this.options.behavior?.onFetch(f,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==f.fetchOptions?.meta)&&this.#i({type:"fetch",meta:f.fetchOptions?.meta}),this.#a=Kv({initialPromise:s?.initialPromise,fn:f.fetchFn,onCancel:g=>{g instanceof zf&&g.revert&&this.setState({...this.#t,fetchStatus:"idle"}),l.abort()},onFail:(g,v)=>{this.#i({type:"failed",failureCount:g,error:v})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0});try{const g=await this.#a.start();if(g===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(g),this.#n.config.onSuccess?.(g,this),this.#n.config.onSettled?.(g,this.state.error,this),g}catch(g){if(g instanceof zf){if(g.silent)return this.#a.promise;if(g.revert){if(this.state.data===void 0)throw g;return this.state.data}}throw this.#i({type:"error",error:g}),this.#n.config.onError?.(g,this),this.#n.config.onSettled?.(this.state.data,g,this),g}finally{this.scheduleGc()}}#i(e){const s=l=>{switch(e.type){case"failed":return{...l,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...l,fetchStatus:"paused"};case"continue":return{...l,fetchStatus:"fetching"};case"fetch":return{...l,...$v(l.data,this.options),fetchMeta:e.meta??null};case"success":const o={...l,...Fy(e.data,e.dataUpdatedAt),dataUpdateCount:l.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?o:void 0,o;case"error":const d=e.error;return{...l,error:d,errorUpdateCount:l.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:l.fetchFailureCount+1,fetchFailureReason:d,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...l,isInvalidated:!0};case"setState":return{...l,...e.state}}};this.state=s(this.state),Jn.batch(()=>{this.observers.forEach(l=>{l.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function $v(e,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Hv(s.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Fy(e,s){return{data:e,dataUpdatedAt:s??Date.now(),error:null,isInvalidated:!1,status:"success"}}function qy(e){const s=typeof e.initialData=="function"?e.initialData():e.initialData,l=s!==void 0,o=l?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:l?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:l?"success":"pending",fetchStatus:"idle"}}var Qv=class extends $l{constructor(e,s){super(),this.options=s,this.#e=e,this.#i=null,this.#l=Mf(),this.bindMethods(),this.setOptions(s)}#e;#t=void 0;#n=void 0;#s=void 0;#a;#r;#l;#i;#p;#m;#h;#c;#u;#o;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Zy(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Of(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Of(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#_(),this.#t.removeObserver(this)}setOptions(e){const s=this.options,l=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof fs(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),s._defaulted&&!md(this.options,s)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const o=this.hasListeners();o&&Hy(this.#t,l,this.options,s)&&this.#d(),this.updateResult(),o&&(this.#t!==l||fs(this.options.enabled,this.#t)!==fs(s.enabled,this.#t)||lr(this.options.staleTime,this.#t)!==lr(s.staleTime,this.#t))&&this.#x();const d=this.#g();o&&(this.#t!==l||fs(this.options.enabled,this.#t)!==fs(s.enabled,this.#t)||d!==this.#o)&&this.#y(d)}getOptimisticResult(e){const s=this.#e.getQueryCache().build(this.#e,e),l=this.createResult(s,e);return Pj(this,l)&&(this.#s=l,this.#r=this.options,this.#a=this.#t.state),l}getCurrentResult(){return this.#s}trackResult(e,s){return new Proxy(e,{get:(l,o)=>(this.trackProp(o),s?.(o),o==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#l.status==="pending"&&this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(l,o))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=this.#e.defaultQueryOptions(e),l=this.#e.getQueryCache().build(this.#e,s);return l.fetch().then(()=>this.createResult(l,s))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(e){this.#N();let s=this.#t.fetch(this.options,e);return e?.throwOnError||(s=s.catch(ja)),s}#x(){this.#b();const e=lr(this.options.staleTime,this.#t);if(Vr||this.#s.isStale||!Tf(e))return;const l=Fv(this.#s.dataUpdatedAt,e)+1;this.#c=Gr.setTimeout(()=>{this.#s.isStale||this.updateResult()},l)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#_(),this.#o=e,!(Vr||fs(this.options.enabled,this.#t)===!1||!Tf(this.#o)||this.#o===0)&&(this.#u=Gr.setInterval(()=>{(this.options.refetchIntervalInBackground||sp.isFocused())&&this.#d()},this.#o))}#v(){this.#x(),this.#y(this.#g())}#b(){this.#c&&(Gr.clearTimeout(this.#c),this.#c=void 0)}#_(){this.#u&&(Gr.clearInterval(this.#u),this.#u=void 0)}createResult(e,s){const l=this.#t,o=this.options,d=this.#s,m=this.#a,f=this.#r,v=e!==l?e.state:this.#n,{state:_}=e;let S={..._},w=!1,k;if(s._optimisticResults){const ee=this.hasListeners(),X=!ee&&Zy(e,s),P=ee&&Hy(e,l,s,o);(X||P)&&(S={...S,...$v(_.data,e.options)}),s._optimisticResults==="isRestoring"&&(S.fetchStatus="idle")}let{error:O,errorUpdatedAt:T,status:E}=S;k=S.data;let R=!1;if(s.placeholderData!==void 0&&k===void 0&&E==="pending"){let ee;d?.isPlaceholderData&&s.placeholderData===f?.placeholderData?(ee=d.data,R=!0):ee=typeof s.placeholderData=="function"?s.placeholderData(this.#h?.state.data,this.#h):s.placeholderData,ee!==void 0&&(E="success",k=Af(d?.data,ee,s),w=!0)}if(s.select&&k!==void 0&&!R)if(d&&k===m?.data&&s.select===this.#p)k=this.#m;else try{this.#p=s.select,k=s.select(k),k=Af(d?.data,k,s),this.#m=k,this.#i=null}catch(ee){this.#i=ee}this.#i&&(O=this.#i,k=this.#m,T=Date.now(),E="error");const B=S.fetchStatus==="fetching",A=E==="pending",z=E==="error",Z=A&&B,I=k!==void 0,H={status:E,fetchStatus:S.fetchStatus,isPending:A,isSuccess:E==="success",isError:z,isInitialLoading:Z,isLoading:Z,data:k,dataUpdatedAt:S.dataUpdatedAt,error:O,errorUpdatedAt:T,failureCount:S.fetchFailureCount,failureReason:S.fetchFailureReason,errorUpdateCount:S.errorUpdateCount,isFetched:S.dataUpdateCount>0||S.errorUpdateCount>0,isFetchedAfterMount:S.dataUpdateCount>v.dataUpdateCount||S.errorUpdateCount>v.errorUpdateCount,isFetching:B,isRefetching:B&&!A,isLoadingError:z&&!I,isPaused:S.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:z&&I,isStale:ip(e,s),refetch:this.refetch,promise:this.#l,isEnabled:fs(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const ee=H.data!==void 0,X=H.status==="error"&&!ee,P=je=>{X?je.reject(H.error):ee&&je.resolve(H.data)},te=()=>{const je=this.#l=H.promise=Mf();P(je)},oe=this.#l;switch(oe.status){case"pending":e.queryHash===l.queryHash&&P(oe);break;case"fulfilled":(X||H.data!==oe.value)&&te();break;case"rejected":(!X||H.error!==oe.reason)&&te();break}}return H}updateResult(){const e=this.#s,s=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#r=this.options,this.#a.data!==void 0&&(this.#h=this.#t),md(s,e))return;this.#s=s;const l=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,d=typeof o=="function"?o():o;if(d==="all"||!d&&!this.#f.size)return!0;const m=new Set(d??this.#f);return this.options.throwOnError&&m.add("error"),Object.keys(this.#s).some(f=>{const g=f;return this.#s[g]!==e[g]&&m.has(g)})};this.#j({listeners:l()})}#N(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const s=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(s?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#j(e){Jn.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Lj(e,s){return fs(s.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&s.retryOnMount===!1)}function Zy(e,s){return Lj(e,s)||e.state.data!==void 0&&Of(e,s,s.refetchOnMount)}function Of(e,s,l){if(fs(s.enabled,e)!==!1&&lr(s.staleTime,e)!=="static"){const o=typeof l=="function"?l(e):l;return o==="always"||o!==!1&&ip(e,s)}return!1}function Hy(e,s,l,o){return(e!==s||fs(o.enabled,e)===!1)&&(!l.suspense||e.state.status!=="error")&&ip(e,l)}function ip(e,s){return fs(s.enabled,e)!==!1&&e.isStaleByTime(lr(s.staleTime,e))}function Pj(e,s){return!md(e.getCurrentResult(),s)}function fd(e){return{onFetch:(s,l)=>{const o=s.options,d=s.fetchOptions?.meta?.fetchMore?.direction,m=s.state.data?.pages||[],f=s.state.data?.pageParams||[];let g={pages:[],pageParams:[]},v=0;const _=async()=>{let S=!1;const w=T=>{Cj(T,()=>s.signal,()=>S=!0)},k=Zv(s.options,s.fetchOptions),O=async(T,E,R)=>{if(S)return Promise.reject();if(E==null&&T.pages.length)return Promise.resolve(T);const A=(()=>{const V={client:s.client,queryKey:s.queryKey,pageParam:E,direction:R?"backward":"forward",meta:s.options.meta};return w(V),V})(),z=await k(A),{maxPages:Z}=s.options,I=R?Tj:Ej;return{pages:I(T.pages,z,Z),pageParams:I(T.pageParams,E,Z)}};if(d&&m.length){const T=d==="backward",E=T?Vv:Rf,R={pages:m,pageParams:f},B=E(o,R);g=await O(R,B,T)}else{const T=e??m.length;do{const E=v===0?f[0]??o.initialPageParam:Rf(o,g);if(v>0&&E==null)break;g=await O(g,E),v++}while(v<T)}return g};s.options.persister?s.fetchFn=()=>s.options.persister?.(_,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},l):s.fetchFn=_}}}function Rf(e,{pages:s,pageParams:l}){const o=s.length-1;return s.length>0?e.getNextPageParam(s[o],s,l[o],l):void 0}function Vv(e,{pages:s,pageParams:l}){return s.length>0?e.getPreviousPageParam?.(s[0],s,l[0],l):void 0}function Ij(e,s){return s?Rf(e,s)!=null:!1}function Bj(e,s){return!s||!e.getPreviousPageParam?!1:Vv(e,s)!=null}var Uj=class extends Qv{constructor(e,s){super(e,s)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:fd()})}getOptimisticResult(e){return e.behavior=fd(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,s){const{state:l}=e,o=super.createResult(e,s),{isFetching:d,isRefetching:m,isError:f,isRefetchError:g}=o,v=l.fetchMeta?.fetchMore?.direction,_=f&&v==="forward",S=d&&v==="forward",w=f&&v==="backward",k=d&&v==="backward";return{...o,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Ij(s,l.data),hasPreviousPage:Bj(s,l.data),isFetchNextPageError:_,isFetchingNextPage:S,isFetchPreviousPageError:w,isFetchingPreviousPage:k,isRefetchError:g&&!_&&!w,isRefetching:m&&!S&&!k}}},Fj=class extends Gv{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||Yv(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(s=>s!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const s=()=>{this.#a({type:"continue"})},l={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=Kv({fn:()=>this.options.mutationFn?this.options.mutationFn(e,l):Promise.reject(new Error("No mutationFn found")),onFail:(m,f)=>{this.#a({type:"failed",failureCount:m,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const o=this.state.status==="pending",d=!this.#s.canStart();try{if(o)s();else{this.#a({type:"pending",variables:e,isPaused:d}),this.#n.config.onMutate&&await this.#n.config.onMutate(e,this,l);const f=await this.options.onMutate?.(e,l);f!==this.state.context&&this.#a({type:"pending",context:f,variables:e,isPaused:d})}const m=await this.#s.start();return await this.#n.config.onSuccess?.(m,e,this.state.context,this,l),await this.options.onSuccess?.(m,e,this.state.context,l),await this.#n.config.onSettled?.(m,null,this.state.variables,this.state.context,this,l),await this.options.onSettled?.(m,null,e,this.state.context,l),this.#a({type:"success",data:m}),m}catch(m){try{await this.#n.config.onError?.(m,e,this.state.context,this,l)}catch(f){Promise.reject(f)}try{await this.options.onError?.(m,e,this.state.context,l)}catch(f){Promise.reject(f)}try{await this.#n.config.onSettled?.(void 0,m,this.state.variables,this.state.context,this,l)}catch(f){Promise.reject(f)}try{await this.options.onSettled?.(void 0,m,e,this.state.context,l)}catch(f){Promise.reject(f)}throw this.#a({type:"error",error:m}),m}finally{this.#n.runNext(this)}}#a(e){const s=l=>{switch(e.type){case"failed":return{...l,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...l,isPaused:!0};case"continue":return{...l,isPaused:!1};case"pending":return{...l,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...l,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...l,data:void 0,error:e.error,failureCount:l.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Jn.batch(()=>{this.#t.forEach(l=>{l.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function Yv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qj=class extends $l{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,s,l){const o=new Fj({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(s),state:l});return this.add(o),o}add(e){this.#e.add(e);const s=Fu(e);if(typeof s=="string"){const l=this.#t.get(s);l?l.push(e):this.#t.set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const s=Fu(e);if(typeof s=="string"){const l=this.#t.get(s);if(l)if(l.length>1){const o=l.indexOf(e);o!==-1&&l.splice(o,1)}else l[0]===e&&this.#t.delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=Fu(e);if(typeof s=="string"){const o=this.#t.get(s)?.find(d=>d.state.status==="pending");return!o||o===e}else return!0}runNext(e){const s=Fu(e);return typeof s=="string"?this.#t.get(s)?.find(o=>o!==e&&o.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Jn.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const s={exact:!0,...e};return this.getAll().find(l=>Iy(s,l))}findAll(e={}){return this.getAll().filter(s=>Iy(e,s))}notify(e){Jn.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return Jn.batch(()=>Promise.all(e.map(s=>s.continue().catch(ja))))}};function Fu(e){return e.options.scope?.id}var Zj=class extends $l{#e;#t=void 0;#n;#s;constructor(s,l){super(),this.#e=s,this.setOptions(l),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const l=this.options;this.options=this.#e.defaultMutationOptions(s),md(this.options,l)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),l?.mutationKey&&this.options.mutationKey&&Yr(l.mutationKey)!==Yr(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(s){this.#a(),this.#r(s)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#a(),this.#r()}mutate(s,l){return this.#s=l,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(s)}#a(){const s=this.#n?.state??Yv();this.#t={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#r(s){Jn.batch(()=>{if(this.#s&&this.hasListeners()){const l=this.#t.variables,o=this.#t.context,d={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(s?.type==="success"){try{this.#s.onSuccess?.(s.data,l,o,d)}catch(m){Promise.reject(m)}try{this.#s.onSettled?.(s.data,null,l,o,d)}catch(m){Promise.reject(m)}}else if(s?.type==="error"){try{this.#s.onError?.(s.error,l,o,d)}catch(m){Promise.reject(m)}try{this.#s.onSettled?.(void 0,s.error,l,o,d)}catch(m){Promise.reject(m)}}}this.listeners.forEach(l=>{l(this.#t)})})}},Hj=class extends $l{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,s,l){const o=s.queryKey,d=s.queryHash??tp(o,s);let m=this.get(d);return m||(m=new Dj({client:e,queryKey:o,queryHash:d,options:e.defaultQueryOptions(s),state:l,defaultOptions:e.getQueryDefaults(o)}),this.add(m)),m}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=this.#e.get(e.queryHash);s&&(e.destroy(),s===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Jn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const s={exact:!0,...e};return this.getAll().find(l=>Py(s,l))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(l=>Py(e,l)):s}notify(e){Jn.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){Jn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Jn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Kj=class{#e;#t;#n;#s;#a;#r;#l;#i;constructor(e={}){this.#e=e.queryCache||new Hj,this.#t=e.mutationCache||new qj,this.#n=e.defaultOptions||{},this.#s=new Map,this.#a=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#l=sp.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=hd.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#l?.(),this.#l=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const s=this.defaultQueryOptions({queryKey:e});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(e){const s=this.defaultQueryOptions(e),l=this.#e.build(this,s),o=l.state.data;return o===void 0?this.fetchQuery(e):(e.revalidateIfStale&&l.isStaleByTime(lr(s.staleTime,l))&&this.prefetchQuery(s),Promise.resolve(o))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:s,state:l})=>{const o=l.data;return[s,o]})}setQueryData(e,s,l){const o=this.defaultQueryOptions({queryKey:e}),m=this.#e.get(o.queryHash)?.state.data,f=Sj(s,m);if(f!==void 0)return this.#e.build(this,o).setData(f,{...l,manual:!0})}setQueriesData(e,s,l){return Jn.batch(()=>this.#e.findAll(e).map(({queryKey:o})=>[o,this.setQueryData(o,s,l)]))}getQueryState(e){const s=this.defaultQueryOptions({queryKey:e});return this.#e.get(s.queryHash)?.state}removeQueries(e){const s=this.#e;Jn.batch(()=>{s.findAll(e).forEach(l=>{s.remove(l)})})}resetQueries(e,s){const l=this.#e;return Jn.batch(()=>(l.findAll(e).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...e},s)))}cancelQueries(e,s={}){const l={revert:!0,...s},o=Jn.batch(()=>this.#e.findAll(e).map(d=>d.cancel(l)));return Promise.all(o).then(ja).catch(ja)}invalidateQueries(e,s={}){return Jn.batch(()=>(this.#e.findAll(e).forEach(l=>{l.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},s)))}refetchQueries(e,s={}){const l={...s,cancelRefetch:s.cancelRefetch??!0},o=Jn.batch(()=>this.#e.findAll(e).filter(d=>!d.isDisabled()&&!d.isStatic()).map(d=>{let m=d.fetch(void 0,l);return l.throwOnError||(m=m.catch(ja)),d.state.fetchStatus==="paused"?Promise.resolve():m}));return Promise.all(o).then(ja)}fetchQuery(e){const s=this.defaultQueryOptions(e);s.retry===void 0&&(s.retry=!1);const l=this.#e.build(this,s);return l.isStaleByTime(lr(s.staleTime,l))?l.fetch(s):Promise.resolve(l.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ja).catch(ja)}fetchInfiniteQuery(e){return e.behavior=fd(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ja).catch(ja)}ensureInfiniteQueryData(e){return e.behavior=fd(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return hd.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,s){this.#s.set(Yr(e),{queryKey:e,defaultOptions:s})}getQueryDefaults(e){const s=[...this.#s.values()],l={};return s.forEach(o=>{rc(e,o.queryKey)&&Object.assign(l,o.defaultOptions)}),l}setMutationDefaults(e,s){this.#a.set(Yr(e),{mutationKey:e,defaultOptions:s})}getMutationDefaults(e){const s=[...this.#a.values()],l={};return s.forEach(o=>{rc(e,o.mutationKey)&&Object.assign(l,o.defaultOptions)}),l}defaultQueryOptions(e){if(e._defaulted)return e;const s={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return s.queryHash||(s.queryHash=tp(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===np&&(s.enabled=!1),s}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Jv=b.createContext(void 0),Xn=e=>{const s=b.useContext(Jv);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},Gj=({client:e,children:s})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(Jv.Provider,{value:e,children:s})),Xv=b.createContext(!1),$j=()=>b.useContext(Xv);Xv.Provider;function Qj(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Vj=b.createContext(Qj()),Yj=()=>b.useContext(Vj),Jj=(e,s,l)=>{const o=l?.state.error&&typeof e.throwOnError=="function"?ap(e.throwOnError,[l.state.error,l]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||o)&&(s.isReset()||(e.retryOnMount=!1))},Xj=e=>{b.useEffect(()=>{e.clearReset()},[e])},Wj=({result:e,errorResetBoundary:s,throwOnError:l,query:o,suspense:d})=>e.isError&&!s.isReset()&&!e.isFetching&&o&&(d&&e.data===void 0||ap(l,[e.error,o])),eS=e=>{if(e.suspense){const l=d=>d==="static"?d:Math.max(d??1e3,1e3),o=e.staleTime;e.staleTime=typeof o=="function"?(...d)=>l(o(...d)):l(o),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},tS=(e,s)=>e.isLoading&&e.isFetching&&!s,nS=(e,s)=>e?.suspense&&s.isPending,Ky=(e,s,l)=>s.fetchOptimistic(e).catch(()=>{l.clearReset()});function Wv(e,s,l){const o=$j(),d=Yj(),m=Xn(),f=m.defaultQueryOptions(e);m.getDefaultOptions().queries?._experimental_beforeQuery?.(f);const g=m.getQueryCache().get(f.queryHash);f._optimisticResults=o?"isRestoring":"optimistic",eS(f),Jj(f,d,g),Xj(d);const v=!m.getQueryCache().get(f.queryHash),[_]=b.useState(()=>new s(m,f)),S=_.getOptimisticResult(f),w=!o&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(k=>{const O=w?_.subscribe(Jn.batchCalls(k)):ja;return _.updateResult(),O},[_,w]),()=>_.getCurrentResult(),()=>_.getCurrentResult()),b.useEffect(()=>{_.setOptions(f)},[f,_]),nS(f,S))throw Ky(f,_,d);if(Wj({result:S,errorResetBoundary:d,throwOnError:f.throwOnError,query:g,suspense:f.suspense}))throw S.error;return m.getDefaultOptions().queries?._experimental_afterQuery?.(f,S),f.experimental_prefetchInRender&&!Vr&&tS(S,o)&&(v?Ky(f,_,d):g?.promise)?.catch(ja).finally(()=>{_.updateResult()}),f.notifyOnChangeProps?S:_.trackResult(S)}function Fe(e,s){return Wv(e,Qv)}function Ge(e,s){const l=Xn(),[o]=b.useState(()=>new Zj(l,e));b.useEffect(()=>{o.setOptions(e)},[o,e]);const d=b.useSyncExternalStore(b.useCallback(f=>o.subscribe(Jn.batchCalls(f)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),m=b.useCallback((f,g)=>{o.mutate(f,g).catch(ja)},[o]);if(d.error&&ap(o.options.throwOnError,[d.error]))throw d.error;return{...d,mutate:m,mutateAsync:d.mutate}}function aS(e,s){return Wv(e,Uj)}var Gy="popstate";function sS(e={}){function s(o,d){let{pathname:m,search:f,hash:g}=o.location;return Df("",{pathname:m,search:f,hash:g},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function l(o,d){return typeof d=="string"?d:lc(d)}return rS(s,l,null,e)}function _n(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function xs(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function iS(){return Math.random().toString(36).substring(2,10)}function $y(e,s){return{usr:e.state,key:e.key,idx:s}}function Df(e,s,l=null,o){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof s=="string"?Ql(s):s,state:l,key:s&&s.key||o||iS()}}function lc({pathname:e="/",search:s="",hash:l=""}){return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),l&&l!=="#"&&(e+=l.charAt(0)==="#"?l:"#"+l),e}function Ql(e){let s={};if(e){let l=e.indexOf("#");l>=0&&(s.hash=e.substring(l),e=e.substring(0,l));let o=e.indexOf("?");o>=0&&(s.search=e.substring(o),e=e.substring(0,o)),e&&(s.pathname=e)}return s}function rS(e,s,l,o={}){let{window:d=document.defaultView,v5Compat:m=!1}=o,f=d.history,g="POP",v=null,_=S();_==null&&(_=0,f.replaceState({...f.state,idx:_},""));function S(){return(f.state||{idx:null}).idx}function w(){g="POP";let R=S(),B=R==null?null:R-_;_=R,v&&v({action:g,location:E.location,delta:B})}function k(R,B){g="PUSH";let A=Df(E.location,R,B);_=S()+1;let z=$y(A,_),Z=E.createHref(A);try{f.pushState(z,"",Z)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;d.location.assign(Z)}m&&v&&v({action:g,location:E.location,delta:1})}function O(R,B){g="REPLACE";let A=Df(E.location,R,B);_=S();let z=$y(A,_),Z=E.createHref(A);f.replaceState(z,"",Z),m&&v&&v({action:g,location:E.location,delta:0})}function T(R){return lS(R)}let E={get action(){return g},get location(){return e(d,f)},listen(R){if(v)throw new Error("A history only accepts one active listener");return d.addEventListener(Gy,w),v=R,()=>{d.removeEventListener(Gy,w),v=null}},createHref(R){return s(d,R)},createURL:T,encodeLocation(R){let B=T(R);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:k,replace:O,go(R){return f.go(R)}};return E}function lS(e,s=!1){let l="http://localhost";typeof window<"u"&&(l=window.location.origin!=="null"?window.location.origin:window.location.href),_n(l,"No window.location.(origin|href) available to create URL");let o=typeof e=="string"?e:lc(e);return o=o.replace(/ $/,"%20"),!s&&o.startsWith("//")&&(o=l+o),new URL(o,l)}function eb(e,s,l="/"){return oS(e,s,l,!1)}function oS(e,s,l,o){let d=typeof s=="string"?Ql(s):s,m=Ni(d.pathname||"/",l);if(m==null)return null;let f=tb(e);cS(f);let g=null;for(let v=0;g==null&&v<f.length;++v){let _=bS(m);g=yS(f[v],_,o)}return g}function tb(e,s=[],l=[],o="",d=!1){let m=(f,g,v=d,_)=>{let S={relativePath:_===void 0?f.path||"":_,caseSensitive:f.caseSensitive===!0,childrenIndex:g,route:f};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(o)&&v)return;_n(S.relativePath.startsWith(o),`Absolute route path "${S.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(o.length)}let w=bi([o,S.relativePath]),k=l.concat(S);f.children&&f.children.length>0&&(_n(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),tb(f.children,s,k,w,v)),!(f.path==null&&!f.index)&&s.push({path:w,score:xS(w,f.index),routesMeta:k})};return e.forEach((f,g)=>{if(f.path===""||!f.path?.includes("?"))m(f,g);else for(let v of nb(f.path))m(f,g,!0,v)}),s}function nb(e){let s=e.split("/");if(s.length===0)return[];let[l,...o]=s,d=l.endsWith("?"),m=l.replace(/\?$/,"");if(o.length===0)return d?[m,""]:[m];let f=nb(o.join("/")),g=[];return g.push(...f.map(v=>v===""?m:[m,v].join("/"))),d&&g.push(...f),g.map(v=>e.startsWith("/")&&v===""?"/":v)}function cS(e){e.sort((s,l)=>s.score!==l.score?l.score-s.score:gS(s.routesMeta.map(o=>o.childrenIndex),l.routesMeta.map(o=>o.childrenIndex)))}var uS=/^:[\w-]+$/,dS=3,mS=2,hS=1,fS=10,pS=-2,Qy=e=>e==="*";function xS(e,s){let l=e.split("/"),o=l.length;return l.some(Qy)&&(o+=pS),s&&(o+=mS),l.filter(d=>!Qy(d)).reduce((d,m)=>d+(uS.test(m)?dS:m===""?hS:fS),o)}function gS(e,s){return e.length===s.length&&e.slice(0,-1).every((o,d)=>o===s[d])?e[e.length-1]-s[s.length-1]:0}function yS(e,s,l=!1){let{routesMeta:o}=e,d={},m="/",f=[];for(let g=0;g<o.length;++g){let v=o[g],_=g===o.length-1,S=m==="/"?s:s.slice(m.length)||"/",w=pd({path:v.relativePath,caseSensitive:v.caseSensitive,end:_},S),k=v.route;if(!w&&_&&l&&!o[o.length-1].route.index&&(w=pd({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},S)),!w)return null;Object.assign(d,w.params),f.push({params:d,pathname:bi([m,w.pathname]),pathnameBase:SS(bi([m,w.pathnameBase])),route:k}),w.pathnameBase!=="/"&&(m=bi([m,w.pathnameBase]))}return f}function pd(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[l,o]=vS(e.path,e.caseSensitive,e.end),d=s.match(l);if(!d)return null;let m=d[0],f=m.replace(/(.)\/+$/,"$1"),g=d.slice(1);return{params:o.reduce((_,{paramName:S,isOptional:w},k)=>{if(S==="*"){let T=g[k]||"";f=m.slice(0,m.length-T.length).replace(/(.)\/+$/,"$1")}const O=g[k];return w&&!O?_[S]=void 0:_[S]=(O||"").replace(/%2F/g,"/"),_},{}),pathname:m,pathnameBase:f,pattern:e}}function vS(e,s=!1,l=!0){xs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let o=[],d="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,g,v)=>(o.push({paramName:g,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(o.push({paramName:"*"}),d+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?d+="\\/*$":e!==""&&e!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,s?void 0:"i"),o]}function bS(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return xs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),e}}function Ni(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let l=s.endsWith("/")?s.length-1:s.length,o=e.charAt(l);return o&&o!=="/"?null:e.slice(l)||"/"}var _S=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function NS(e,s="/"){let{pathname:l,search:o="",hash:d=""}=typeof e=="string"?Ql(e):e,m;return l?(l=l.replace(/\/\/+/g,"/"),l.startsWith("/")?m=Vy(l.substring(1),"/"):m=Vy(l,s)):m=s,{pathname:m,search:wS(o),hash:kS(d)}}function Vy(e,s){let l=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(d=>{d===".."?l.length>1&&l.pop():d!=="."&&l.push(d)}),l.length>1?l.join("/"):"/"}function Lh(e,s,l,o){return`Cannot include a '${e}' character in a manually specified \`to.${s}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${l}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jS(e){return e.filter((s,l)=>l===0||s.route.path&&s.route.path.length>0)}function rp(e){let s=jS(e);return s.map((l,o)=>o===s.length-1?l.pathname:l.pathnameBase)}function lp(e,s,l,o=!1){let d;typeof e=="string"?d=Ql(e):(d={...e},_n(!d.pathname||!d.pathname.includes("?"),Lh("?","pathname","search",d)),_n(!d.pathname||!d.pathname.includes("#"),Lh("#","pathname","hash",d)),_n(!d.search||!d.search.includes("#"),Lh("#","search","hash",d)));let m=e===""||d.pathname==="",f=m?"/":d.pathname,g;if(f==null)g=l;else{let w=s.length-1;if(!o&&f.startsWith("..")){let k=f.split("/");for(;k[0]==="..";)k.shift(),w-=1;d.pathname=k.join("/")}g=w>=0?s[w]:"/"}let v=NS(d,g),_=f&&f!=="/"&&f.endsWith("/"),S=(m||f===".")&&l.endsWith("/");return!v.pathname.endsWith("/")&&(_||S)&&(v.pathname+="/"),v}var bi=e=>e.join("/").replace(/\/\/+/g,"/"),SS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,kS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,ES=class{constructor(e,s,l,o=!1){this.status=e,this.statusText=s||"",this.internal=o,l instanceof Error?(this.data=l.toString(),this.error=l):this.data=l}};function TS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function CS(e){return e.map(s=>s.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ab=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sb(e,s){let l=e;if(typeof l!="string"||!_S.test(l))return{absoluteURL:void 0,isExternal:!1,to:l};let o=l,d=!1;if(ab)try{let m=new URL(window.location.href),f=l.startsWith("//")?new URL(m.protocol+l):new URL(l),g=Ni(f.pathname,s);f.origin===m.origin&&g!=null?l=g+f.search+f.hash:d=!0}catch{xs(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:d,to:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ib=["POST","PUT","PATCH","DELETE"];new Set(ib);var AS=["GET",...ib];new Set(AS);var Vl=b.createContext(null);Vl.displayName="DataRouter";var Td=b.createContext(null);Td.displayName="DataRouterState";var MS=b.createContext(!1),rb=b.createContext({isTransitioning:!1});rb.displayName="ViewTransition";var zS=b.createContext(new Map);zS.displayName="Fetchers";var OS=b.createContext(null);OS.displayName="Await";var Ja=b.createContext(null);Ja.displayName="Navigation";var mc=b.createContext(null);mc.displayName="Location";var gs=b.createContext({outlet:null,matches:[],isDataRoute:!1});gs.displayName="Route";var op=b.createContext(null);op.displayName="RouteError";var lb="REACT_ROUTER_ERROR",RS="REDIRECT",DS="ROUTE_ERROR_RESPONSE";function LS(e){if(e.startsWith(`${lb}:${RS}:{`))try{let s=JSON.parse(e.slice(28));if(typeof s=="object"&&s&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.location=="string"&&typeof s.reloadDocument=="boolean"&&typeof s.replace=="boolean")return s}catch{}}function PS(e){if(e.startsWith(`${lb}:${DS}:{`))try{let s=JSON.parse(e.slice(40));if(typeof s=="object"&&s&&typeof s.status=="number"&&typeof s.statusText=="string")return new ES(s.status,s.statusText,s.data)}catch{}}function IS(e,{relative:s}={}){_n(Yl(),"useHref() may be used only in the context of a <Router> component.");let{basename:l,navigator:o}=b.useContext(Ja),{hash:d,pathname:m,search:f}=hc(e,{relative:s}),g=m;return l!=="/"&&(g=m==="/"?l:bi([l,m])),o.createHref({pathname:g,search:f,hash:d})}function Yl(){return b.useContext(mc)!=null}function ys(){return _n(Yl(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(mc).location}var ob="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cb(e){b.useContext(Ja).static||b.useLayoutEffect(e)}function Jl(){let{isDataRoute:e}=b.useContext(gs);return e?ew():BS()}function BS(){_n(Yl(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(Vl),{basename:s,navigator:l}=b.useContext(Ja),{matches:o}=b.useContext(gs),{pathname:d}=ys(),m=JSON.stringify(rp(o)),f=b.useRef(!1);return cb(()=>{f.current=!0}),b.useCallback((v,_={})=>{if(xs(f.current,ob),!f.current)return;if(typeof v=="number"){l.go(v);return}let S=lp(v,JSON.parse(m),d,_.relative==="path");e==null&&s!=="/"&&(S.pathname=S.pathname==="/"?s:bi([s,S.pathname])),(_.replace?l.replace:l.push)(S,_.state,_)},[s,l,m,d,e])}var US=b.createContext(null);function FS(e){let s=b.useContext(gs).outlet;return b.useMemo(()=>s&&b.createElement(US.Provider,{value:e},s),[s,e])}function qS(){let{matches:e}=b.useContext(gs),s=e[e.length-1];return s?s.params:{}}function hc(e,{relative:s}={}){let{matches:l}=b.useContext(gs),{pathname:o}=ys(),d=JSON.stringify(rp(l));return b.useMemo(()=>lp(e,JSON.parse(d),o,s==="path"),[e,d,o,s])}function ZS(e,s){return ub(e,s)}function ub(e,s,l,o,d){_n(Yl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=b.useContext(Ja),{matches:f}=b.useContext(gs),g=f[f.length-1],v=g?g.params:{},_=g?g.pathname:"/",S=g?g.pathnameBase:"/",w=g&&g.route;{let A=w&&w.path||"";mb(_,!w||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let k=ys(),O;if(s){let A=typeof s=="string"?Ql(s):s;_n(S==="/"||A.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${A.pathname}" was given in the \`location\` prop.`),O=A}else O=k;let T=O.pathname||"/",E=T;if(S!=="/"){let A=S.replace(/^\//,"").split("/");E="/"+T.replace(/^\//,"").split("/").slice(A.length).join("/")}let R=eb(e,{pathname:E});xs(w||R!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),xs(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=QS(R&&R.map(A=>Object.assign({},A,{params:Object.assign({},v,A.params),pathname:bi([S,m.encodeLocation?m.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?S:bi([S,m.encodeLocation?m.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),f,l,o,d);return s&&B?b.createElement(mc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},B):B}function HS(){let e=WS(),s=TS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),l=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:o},m={padding:"2px 4px",backgroundColor:o},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:m},"ErrorBoundary")," or"," ",b.createElement("code",{style:m},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},s),l?b.createElement("pre",{style:d},l):null,f)}var KS=b.createElement(HS,null),db=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){this.props.onError?this.props.onError(e,s):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const l=PS(e.digest);l&&(e=l)}let s=e!==void 0?b.createElement(gs.Provider,{value:this.props.routeContext},b.createElement(op.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?b.createElement(GS,{error:e},s):s}};db.contextType=MS;var Ph=new WeakMap;function GS({children:e,error:s}){let{basename:l}=b.useContext(Ja);if(typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){let o=LS(s.digest);if(o){let d=Ph.get(s);if(d)throw d;let m=sb(o.location,l);if(ab&&!Ph.get(s))if(m.isExternal||o.reloadDocument)window.location.href=m.absoluteURL||m.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(m.to,{replace:o.replace}));throw Ph.set(s,f),f}return b.createElement("meta",{httpEquiv:"refresh",content:`0;url=${m.absoluteURL||m.to}`})}}return e}function $S({routeContext:e,match:s,children:l}){let o=b.useContext(Vl);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),b.createElement(gs.Provider,{value:e},l)}function QS(e,s=[],l=null,o=null,d=null){if(e==null){if(!l)return null;if(l.errors)e=l.matches;else if(s.length===0&&!l.initialized&&l.matches.length>0)e=l.matches;else return null}let m=e,f=l?.errors;if(f!=null){let S=m.findIndex(w=>w.route.id&&f?.[w.route.id]!==void 0);_n(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),m=m.slice(0,Math.min(m.length,S+1))}let g=!1,v=-1;if(l)for(let S=0;S<m.length;S++){let w=m[S];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(v=S),w.route.id){let{loaderData:k,errors:O}=l,T=w.route.loader&&!k.hasOwnProperty(w.route.id)&&(!O||O[w.route.id]===void 0);if(w.route.lazy||T){g=!0,v>=0?m=m.slice(0,v+1):m=[m[0]];break}}}let _=l&&o?(S,w)=>{o(S,{location:l.location,params:l.matches?.[0]?.params??{},unstable_pattern:CS(l.matches),errorInfo:w})}:void 0;return m.reduceRight((S,w,k)=>{let O,T=!1,E=null,R=null;l&&(O=f&&w.route.id?f[w.route.id]:void 0,E=w.route.errorElement||KS,g&&(v<0&&k===0?(mb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,R=null):v===k&&(T=!0,R=w.route.hydrateFallbackElement||null)));let B=s.concat(m.slice(0,k+1)),A=()=>{let z;return O?z=E:T?z=R:w.route.Component?z=b.createElement(w.route.Component,null):w.route.element?z=w.route.element:z=S,b.createElement($S,{match:w,routeContext:{outlet:S,matches:B,isDataRoute:l!=null},children:z})};return l&&(w.route.ErrorBoundary||w.route.errorElement||k===0)?b.createElement(db,{location:l.location,revalidation:l.revalidation,component:E,error:O,children:A(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:_}):A()},null)}function cp(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VS(e){let s=b.useContext(Vl);return _n(s,cp(e)),s}function YS(e){let s=b.useContext(Td);return _n(s,cp(e)),s}function JS(e){let s=b.useContext(gs);return _n(s,cp(e)),s}function up(e){let s=JS(e),l=s.matches[s.matches.length-1];return _n(l.route.id,`${e} can only be used on routes that contain a unique "id"`),l.route.id}function XS(){return up("useRouteId")}function WS(){let e=b.useContext(op),s=YS("useRouteError"),l=up("useRouteError");return e!==void 0?e:s.errors?.[l]}function ew(){let{router:e}=VS("useNavigate"),s=up("useNavigate"),l=b.useRef(!1);return cb(()=>{l.current=!0}),b.useCallback(async(d,m={})=>{xs(l.current,ob),l.current&&(typeof d=="number"?await e.navigate(d):await e.navigate(d,{fromRouteId:s,...m}))},[e,s])}var Yy={};function mb(e,s,l){!s&&!Yy[e]&&(Yy[e]=!0,xs(!1,l))}b.memo(tw);function tw({routes:e,future:s,state:l,onError:o}){return ub(e,void 0,l,o,s)}function xd({to:e,replace:s,state:l,relative:o}){_n(Yl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:d}=b.useContext(Ja);xs(!d,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:m}=b.useContext(gs),{pathname:f}=ys(),g=Jl(),v=lp(e,rp(m),f,o==="path"),_=JSON.stringify(v);return b.useEffect(()=>{g(JSON.parse(_),{replace:s,state:l,relative:o})},[g,_,o,s,l]),null}function dp(e){return FS(e.context)}function Jt(e){_n(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nw({basename:e="/",children:s=null,location:l,navigationType:o="POP",navigator:d,static:m=!1,unstable_useTransitions:f}){_n(!Yl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=e.replace(/^\/*/,"/"),v=b.useMemo(()=>({basename:g,navigator:d,static:m,unstable_useTransitions:f,future:{}}),[g,d,m,f]);typeof l=="string"&&(l=Ql(l));let{pathname:_="/",search:S="",hash:w="",state:k=null,key:O="default"}=l,T=b.useMemo(()=>{let E=Ni(_,g);return E==null?null:{location:{pathname:E,search:S,hash:w,state:k,key:O},navigationType:o}},[g,_,S,w,k,O,o]);return xs(T!=null,`<Router basename="${g}"> is not able to match the URL "${_}${S}${w}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:b.createElement(Ja.Provider,{value:v},b.createElement(mc.Provider,{children:s,value:T}))}function aw({children:e,location:s}){return ZS(Lf(e),s)}function Lf(e,s=[]){let l=[];return b.Children.forEach(e,(o,d)=>{if(!b.isValidElement(o))return;let m=[...s,d];if(o.type===b.Fragment){l.push.apply(l,Lf(o.props.children,m));return}_n(o.type===Jt,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_n(!o.props.index||!o.props.children,"An index route cannot have child routes.");let f={id:o.props.id||m.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(f.children=Lf(o.props.children,m)),l.push(f)}),l}var rd="get",ld="application/x-www-form-urlencoded";function Cd(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function sw(e){return Cd(e)&&e.tagName.toLowerCase()==="button"}function iw(e){return Cd(e)&&e.tagName.toLowerCase()==="form"}function rw(e){return Cd(e)&&e.tagName.toLowerCase()==="input"}function lw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ow(e,s){return e.button===0&&(!s||s==="_self")&&!lw(e)}function Pf(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((s,l)=>{let o=e[l];return s.concat(Array.isArray(o)?o.map(d=>[l,d]):[[l,o]])},[]))}function cw(e,s){let l=Pf(e);return s&&s.forEach((o,d)=>{l.has(d)||s.getAll(d).forEach(m=>{l.append(d,m)})}),l}var qu=null;function uw(){if(qu===null)try{new FormData(document.createElement("form"),0),qu=!1}catch{qu=!0}return qu}var dw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ih(e){return e!=null&&!dw.has(e)?(xs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ld}"`),null):e}function mw(e,s){let l,o,d,m,f;if(iw(e)){let g=e.getAttribute("action");o=g?Ni(g,s):null,l=e.getAttribute("method")||rd,d=Ih(e.getAttribute("enctype"))||ld,m=new FormData(e)}else if(sw(e)||rw(e)&&(e.type==="submit"||e.type==="image")){let g=e.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=e.getAttribute("formaction")||g.getAttribute("action");if(o=v?Ni(v,s):null,l=e.getAttribute("formmethod")||g.getAttribute("method")||rd,d=Ih(e.getAttribute("formenctype"))||Ih(g.getAttribute("enctype"))||ld,m=new FormData(g,e),!uw()){let{name:_,type:S,value:w}=e;if(S==="image"){let k=_?`${_}.`:"";m.append(`${k}x`,"0"),m.append(`${k}y`,"0")}else _&&m.append(_,w)}}else{if(Cd(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');l=rd,o=null,d=ld,f=e}return m&&d==="text/plain"&&(f=m,m=void 0),{action:o,method:l.toLowerCase(),encType:d,formData:m,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function mp(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function hw(e,s,l,o){let d=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return l?d.pathname.endsWith("/")?d.pathname=`${d.pathname}_.${o}`:d.pathname=`${d.pathname}.${o}`:d.pathname==="/"?d.pathname=`_root.${o}`:s&&Ni(d.pathname,s)==="/"?d.pathname=`${s.replace(/\/$/,"")}/_root.${o}`:d.pathname=`${d.pathname.replace(/\/$/,"")}.${o}`,d}async function fw(e,s){if(e.id in s)return s[e.id];try{let l=await import(e.module);return s[e.id]=l,l}catch(l){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(l),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function xw(e,s,l){let o=await Promise.all(e.map(async d=>{let m=s.routes[d.route.id];if(m){let f=await fw(m,l);return f.links?f.links():[]}return[]}));return bw(o.flat(1).filter(pw).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function Jy(e,s,l,o,d,m){let f=(v,_)=>l[_]?v.route.id!==l[_].route.id:!0,g=(v,_)=>l[_].pathname!==v.pathname||l[_].route.path?.endsWith("*")&&l[_].params["*"]!==v.params["*"];return m==="assets"?s.filter((v,_)=>f(v,_)||g(v,_)):m==="data"?s.filter((v,_)=>{let S=o.routes[v.route.id];if(!S||!S.hasLoader)return!1;if(f(v,_)||g(v,_))return!0;if(v.route.shouldRevalidate){let w=v.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:l[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function gw(e,s,{includeHydrateFallback:l}={}){return yw(e.map(o=>{let d=s.routes[o.route.id];if(!d)return[];let m=[d.module];return d.clientActionModule&&(m=m.concat(d.clientActionModule)),d.clientLoaderModule&&(m=m.concat(d.clientLoaderModule)),l&&d.hydrateFallbackModule&&(m=m.concat(d.hydrateFallbackModule)),d.imports&&(m=m.concat(d.imports)),m}).flat(1))}function yw(e){return[...new Set(e)]}function vw(e){let s={},l=Object.keys(e).sort();for(let o of l)s[o]=e[o];return s}function bw(e,s){let l=new Set;return new Set(s),e.reduce((o,d)=>{let m=JSON.stringify(vw(d));return l.has(m)||(l.add(m),o.push({key:m,link:d})),o},[])}function hb(){let e=b.useContext(Vl);return mp(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function _w(){let e=b.useContext(Td);return mp(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var hp=b.createContext(void 0);hp.displayName="FrameworkContext";function fb(){let e=b.useContext(hp);return mp(e,"You must render this element inside a <HydratedRouter> element"),e}function Nw(e,s){let l=b.useContext(hp),[o,d]=b.useState(!1),[m,f]=b.useState(!1),{onFocus:g,onBlur:v,onMouseEnter:_,onMouseLeave:S,onTouchStart:w}=s,k=b.useRef(null);b.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let E=B=>{B.forEach(A=>{f(A.isIntersecting)})},R=new IntersectionObserver(E,{threshold:.5});return k.current&&R.observe(k.current),()=>{R.disconnect()}}},[e]),b.useEffect(()=>{if(o){let E=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(E)}}},[o]);let O=()=>{d(!0)},T=()=>{d(!1),f(!1)};return l?e!=="intent"?[m,k,{}]:[m,k,{onFocus:Xo(g,O),onBlur:Xo(v,T),onMouseEnter:Xo(_,O),onMouseLeave:Xo(S,T),onTouchStart:Xo(w,O)}]:[!1,k,{}]}function Xo(e,s){return l=>{e&&e(l),l.defaultPrevented||s(l)}}function jw({page:e,...s}){let{router:l}=hb(),o=b.useMemo(()=>eb(l.routes,e,l.basename),[l.routes,e,l.basename]);return o?b.createElement(ww,{page:e,matches:o,...s}):null}function Sw(e){let{manifest:s,routeModules:l}=fb(),[o,d]=b.useState([]);return b.useEffect(()=>{let m=!1;return xw(e,s,l).then(f=>{m||d(f)}),()=>{m=!0}},[e,s,l]),o}function ww({page:e,matches:s,...l}){let o=ys(),{future:d,manifest:m,routeModules:f}=fb(),{basename:g}=hb(),{loaderData:v,matches:_}=_w(),S=b.useMemo(()=>Jy(e,s,_,m,o,"data"),[e,s,_,m,o]),w=b.useMemo(()=>Jy(e,s,_,m,o,"assets"),[e,s,_,m,o]),k=b.useMemo(()=>{if(e===o.pathname+o.search+o.hash)return[];let E=new Set,R=!1;if(s.forEach(A=>{let z=m.routes[A.route.id];!z||!z.hasLoader||(!S.some(Z=>Z.route.id===A.route.id)&&A.route.id in v&&f[A.route.id]?.shouldRevalidate||z.hasClientLoader?R=!0:E.add(A.route.id))}),E.size===0)return[];let B=hw(e,g,d.unstable_trailingSlashAwareDataRequests,"data");return R&&E.size>0&&B.searchParams.set("_routes",s.filter(A=>E.has(A.route.id)).map(A=>A.route.id).join(",")),[B.pathname+B.search]},[g,d.unstable_trailingSlashAwareDataRequests,v,o,m,S,s,e,f]),O=b.useMemo(()=>gw(w,m),[w,m]),T=Sw(w);return b.createElement(b.Fragment,null,k.map(E=>b.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...l})),O.map(E=>b.createElement("link",{key:E,rel:"modulepreload",href:E,...l})),T.map(({key:E,link:R})=>b.createElement("link",{key:E,nonce:l.nonce,...R,crossOrigin:R.crossOrigin??l.crossOrigin})))}function kw(...e){return s=>{e.forEach(l=>{typeof l=="function"?l(s):l!=null&&(l.current=s)})}}var Ew=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ew&&(window.__reactRouterVersion="7.13.0")}catch{}function Tw({basename:e,children:s,unstable_useTransitions:l,window:o}){let d=b.useRef();d.current==null&&(d.current=sS({window:o,v5Compat:!0}));let m=d.current,[f,g]=b.useState({action:m.action,location:m.location}),v=b.useCallback(_=>{l===!1?g(_):b.startTransition(()=>g(_))},[l]);return b.useLayoutEffect(()=>m.listen(v),[m,v]),b.createElement(nw,{basename:e,children:s,location:f.location,navigationType:f.action,navigator:m,unstable_useTransitions:l})}var pb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ys=b.forwardRef(function({onClick:s,discover:l="render",prefetch:o="none",relative:d,reloadDocument:m,replace:f,state:g,target:v,to:_,preventScrollReset:S,viewTransition:w,unstable_defaultShouldRevalidate:k,...O},T){let{basename:E,unstable_useTransitions:R}=b.useContext(Ja),B=typeof _=="string"&&pb.test(_),A=sb(_,E);_=A.to;let z=IS(_,{relative:d}),[Z,I,V]=Nw(o,O),H=Mw(_,{replace:f,state:g,target:v,preventScrollReset:S,relative:d,viewTransition:w,unstable_defaultShouldRevalidate:k,unstable_useTransitions:R});function ee(P){s&&s(P),P.defaultPrevented||H(P)}let X=b.createElement("a",{...O,...V,href:A.absoluteURL||z,onClick:A.isExternal||m?s:ee,ref:kw(T,I),target:v,"data-discover":!B&&l==="render"?"true":void 0});return Z&&!B?b.createElement(b.Fragment,null,X,b.createElement(jw,{page:z})):X});Ys.displayName="Link";var xb=b.forwardRef(function({"aria-current":s="page",caseSensitive:l=!1,className:o="",end:d=!1,style:m,to:f,viewTransition:g,children:v,..._},S){let w=hc(f,{relative:_.relative}),k=ys(),O=b.useContext(Td),{navigator:T,basename:E}=b.useContext(Ja),R=O!=null&&Lw(w)&&g===!0,B=T.encodeLocation?T.encodeLocation(w).pathname:w.pathname,A=k.pathname,z=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;l||(A=A.toLowerCase(),z=z?z.toLowerCase():null,B=B.toLowerCase()),z&&E&&(z=Ni(z,E)||z);const Z=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let I=A===B||!d&&A.startsWith(B)&&A.charAt(Z)==="/",V=z!=null&&(z===B||!d&&z.startsWith(B)&&z.charAt(B.length)==="/"),H={isActive:I,isPending:V,isTransitioning:R},ee=I?s:void 0,X;typeof o=="function"?X=o(H):X=[o,I?"active":null,V?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let P=typeof m=="function"?m(H):m;return b.createElement(Ys,{..._,"aria-current":ee,className:X,ref:S,style:P,to:f,viewTransition:g},typeof v=="function"?v(H):v)});xb.displayName="NavLink";var Cw=b.forwardRef(({discover:e="render",fetcherKey:s,navigate:l,reloadDocument:o,replace:d,state:m,method:f=rd,action:g,onSubmit:v,relative:_,preventScrollReset:S,viewTransition:w,unstable_defaultShouldRevalidate:k,...O},T)=>{let{unstable_useTransitions:E}=b.useContext(Ja),R=Rw(),B=Dw(g,{relative:_}),A=f.toLowerCase()==="get"?"get":"post",z=typeof g=="string"&&pb.test(g),Z=I=>{if(v&&v(I),I.defaultPrevented)return;I.preventDefault();let V=I.nativeEvent.submitter,H=V?.getAttribute("formmethod")||f,ee=()=>R(V||I.currentTarget,{fetcherKey:s,method:H,navigate:l,replace:d,state:m,relative:_,preventScrollReset:S,viewTransition:w,unstable_defaultShouldRevalidate:k});E&&l!==!1?b.startTransition(()=>ee()):ee()};return b.createElement("form",{ref:T,method:A,action:B,onSubmit:o?v:Z,...O,"data-discover":!z&&e==="render"?"true":void 0})});Cw.displayName="Form";function Aw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gb(e){let s=b.useContext(Vl);return _n(s,Aw(e)),s}function Mw(e,{target:s,replace:l,state:o,preventScrollReset:d,relative:m,viewTransition:f,unstable_defaultShouldRevalidate:g,unstable_useTransitions:v}={}){let _=Jl(),S=ys(),w=hc(e,{relative:m});return b.useCallback(k=>{if(ow(k,s)){k.preventDefault();let O=l!==void 0?l:lc(S)===lc(w),T=()=>_(e,{replace:O,state:o,preventScrollReset:d,relative:m,viewTransition:f,unstable_defaultShouldRevalidate:g});v?b.startTransition(()=>T()):T()}},[S,_,w,l,o,s,e,d,m,f,g,v])}function fc(e){xs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let s=b.useRef(Pf(e)),l=b.useRef(!1),o=ys(),d=b.useMemo(()=>cw(o.search,l.current?null:s.current),[o.search]),m=Jl(),f=b.useCallback((g,v)=>{const _=Pf(typeof g=="function"?g(new URLSearchParams(d)):g);l.current=!0,m("?"+_,v)},[m,d]);return[d,f]}var zw=0,Ow=()=>`__${String(++zw)}__`;function Rw(){let{router:e}=gb("useSubmit"),{basename:s}=b.useContext(Ja),l=XS(),o=e.fetch,d=e.navigate;return b.useCallback(async(m,f={})=>{let{action:g,method:v,encType:_,formData:S,body:w}=mw(m,s);if(f.navigate===!1){let k=f.fetcherKey||Ow();await o(k,l,f.action||g,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:S,body:w,formMethod:f.method||v,formEncType:f.encType||_,flushSync:f.flushSync})}else await d(f.action||g,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:S,body:w,formMethod:f.method||v,formEncType:f.encType||_,replace:f.replace,state:f.state,fromRouteId:l,flushSync:f.flushSync,viewTransition:f.viewTransition})},[o,d,s,l])}function Dw(e,{relative:s}={}){let{basename:l}=b.useContext(Ja),o=b.useContext(gs);_n(o,"useFormAction must be used inside a RouteContext");let[d]=o.matches.slice(-1),m={...hc(e||".",{relative:s})},f=ys();if(e==null){m.search=f.search;let g=new URLSearchParams(m.search),v=g.getAll("index");if(v.some(S=>S==="")){g.delete("index"),v.filter(w=>w).forEach(w=>g.append("index",w));let S=g.toString();m.search=S?`?${S}`:""}}return(!e||e===".")&&d.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),l!=="/"&&(m.pathname=m.pathname==="/"?l:bi([l,m.pathname])),lc(m)}function Lw(e,{relative:s}={}){let l=b.useContext(rb);_n(l!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=gb("useViewTransitionState"),d=hc(e,{relative:s});if(!l.isTransitioning)return!1;let m=Ni(l.currentLocation.pathname,o)||l.currentLocation.pathname,f=Ni(l.nextLocation.pathname,o)||l.nextLocation.pathname;return pd(d.pathname,f)!=null||pd(d.pathname,m)!=null}var Pw=Uv();function ke(e,s,l){function o(g,v){if(g._zod||Object.defineProperty(g,"_zod",{value:{def:v,constr:f,traits:new Set},enumerable:!1}),g._zod.traits.has(e))return;g._zod.traits.add(e),s(g,v);const _=f.prototype,S=Object.keys(_);for(let w=0;w<S.length;w++){const k=S[w];k in g||(g[k]=_[k].bind(g))}}const d=l?.Parent??Object;class m extends d{}Object.defineProperty(m,"name",{value:e});function f(g){var v;const _=l?.Parent?new m:this;o(_,g),(v=_._zod).deferred??(v.deferred=[]);for(const S of _._zod.deferred)S();return _}return Object.defineProperty(f,"init",{value:o}),Object.defineProperty(f,Symbol.hasInstance,{value:g=>l?.Parent&&g instanceof l.Parent?!0:g?._zod?.traits?.has(e)}),Object.defineProperty(f,"name",{value:e}),f}class Kl extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class yb extends Error{constructor(s){super(`Encountered unidirectional transform during encode: ${s}`),this.name="ZodEncodeError"}}const If={};function or(e){return e&&Object.assign(If,e),If}function vb(e){const s=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,d])=>s.indexOf(+o)===-1).map(([o,d])=>d)}function Bf(e,s){return typeof s=="bigint"?s.toString():s}function fp(e){return{get value(){{const s=e();return Object.defineProperty(this,"value",{value:s}),s}}}}function pp(e){return e==null}function xp(e){const s=e.startsWith("^")?1:0,l=e.endsWith("$")?e.length-1:e.length;return e.slice(s,l)}function Iw(e,s){const l=(e.toString().split(".")[1]||"").length,o=s.toString();let d=(o.split(".")[1]||"").length;if(d===0&&/\d?e-\d?/.test(o)){const v=o.match(/\d?e-(\d?)/);v?.[1]&&(d=Number.parseInt(v[1]))}const m=l>d?l:d,f=Number.parseInt(e.toFixed(m).replace(".","")),g=Number.parseInt(s.toFixed(m).replace(".",""));return f%g/10**m}const Xy=Symbol("evaluating");function an(e,s,l){let o;Object.defineProperty(e,s,{get(){if(o!==Xy)return o===void 0&&(o=Xy,o=l()),o},set(d){Object.defineProperty(e,s,{value:d})},configurable:!0})}function Wr(e,s,l){Object.defineProperty(e,s,{value:l,writable:!0,enumerable:!0,configurable:!0})}function ur(...e){const s={};for(const l of e){const o=Object.getOwnPropertyDescriptors(l);Object.assign(s,o)}return Object.defineProperties({},s)}function Wy(e){return JSON.stringify(e)}function Bw(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const bb="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function gd(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Uw=fp(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function oc(e){if(gd(e)===!1)return!1;const s=e.constructor;if(s===void 0||typeof s!="function")return!0;const l=s.prototype;return!(gd(l)===!1||Object.prototype.hasOwnProperty.call(l,"isPrototypeOf")===!1)}function _b(e){return oc(e)?{...e}:Array.isArray(e)?[...e]:e}const Fw=new Set(["string","number","symbol"]);function Ad(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function dr(e,s,l){const o=new e._zod.constr(s??e._zod.def);return(!s||l?.parent)&&(o._zod.parent=e),o}function nt(e){const s=e;if(!s)return{};if(typeof s=="string")return{error:()=>s};if(s?.message!==void 0){if(s?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");s.error=s.message}return delete s.message,typeof s.error=="string"?{...s,error:()=>s.error}:s}function qw(e){return Object.keys(e).filter(s=>e[s]._zod.optin==="optional"&&e[s]._zod.optout==="optional")}const Zw={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Hw(e,s){const l=e._zod.def,o=l.checks;if(o&&o.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const m=ur(e._zod.def,{get shape(){const f={};for(const g in s){if(!(g in l.shape))throw new Error(`Unrecognized key: "${g}"`);s[g]&&(f[g]=l.shape[g])}return Wr(this,"shape",f),f},checks:[]});return dr(e,m)}function Kw(e,s){const l=e._zod.def,o=l.checks;if(o&&o.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const m=ur(e._zod.def,{get shape(){const f={...e._zod.def.shape};for(const g in s){if(!(g in l.shape))throw new Error(`Unrecognized key: "${g}"`);s[g]&&delete f[g]}return Wr(this,"shape",f),f},checks:[]});return dr(e,m)}function Gw(e,s){if(!oc(s))throw new Error("Invalid input to extend: expected a plain object");const l=e._zod.def.checks;if(l&&l.length>0){const m=e._zod.def.shape;for(const f in s)if(Object.getOwnPropertyDescriptor(m,f)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const d=ur(e._zod.def,{get shape(){const m={...e._zod.def.shape,...s};return Wr(this,"shape",m),m}});return dr(e,d)}function $w(e,s){if(!oc(s))throw new Error("Invalid input to safeExtend: expected a plain object");const l=ur(e._zod.def,{get shape(){const o={...e._zod.def.shape,...s};return Wr(this,"shape",o),o}});return dr(e,l)}function Qw(e,s){const l=ur(e._zod.def,{get shape(){const o={...e._zod.def.shape,...s._zod.def.shape};return Wr(this,"shape",o),o},get catchall(){return s._zod.def.catchall},checks:[]});return dr(e,l)}function Vw(e,s,l){const d=s._zod.def.checks;if(d&&d.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const f=ur(s._zod.def,{get shape(){const g=s._zod.def.shape,v={...g};if(l)for(const _ in l){if(!(_ in g))throw new Error(`Unrecognized key: "${_}"`);l[_]&&(v[_]=e?new e({type:"optional",innerType:g[_]}):g[_])}else for(const _ in g)v[_]=e?new e({type:"optional",innerType:g[_]}):g[_];return Wr(this,"shape",v),v},checks:[]});return dr(s,f)}function Yw(e,s,l){const o=ur(s._zod.def,{get shape(){const d=s._zod.def.shape,m={...d};if(l)for(const f in l){if(!(f in m))throw new Error(`Unrecognized key: "${f}"`);l[f]&&(m[f]=new e({type:"nonoptional",innerType:d[f]}))}else for(const f in d)m[f]=new e({type:"nonoptional",innerType:d[f]});return Wr(this,"shape",m),m}});return dr(s,o)}function Zl(e,s=0){if(e.aborted===!0)return!0;for(let l=s;l<e.issues.length;l++)if(e.issues[l]?.continue!==!0)return!0;return!1}function Nb(e,s){return s.map(l=>{var o;return(o=l).path??(o.path=[]),l.path.unshift(e),l})}function Zu(e){return typeof e=="string"?e:e?.message}function Jr(e,s,l){const o={...e,path:e.path??[]};if(!e.message){const d=Zu(e.inst?._zod.def?.error?.(e))??Zu(s?.error?.(e))??Zu(l.customError?.(e))??Zu(l.localeError?.(e))??"Invalid input";o.message=d}return delete o.inst,delete o.continue,s?.reportInput||delete o.input,o}function gp(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function cc(...e){const[s,l,o]=e;return typeof s=="string"?{message:s,code:"custom",input:l,inst:o}:{...s}}const jb=(e,s)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:s,enumerable:!1}),e.message=JSON.stringify(s,Bf,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Sb=ke("$ZodError",jb),wb=ke("$ZodError",jb,{Parent:Error});function Jw(e,s=l=>l.message){const l={},o=[];for(const d of e.issues)d.path.length>0?(l[d.path[0]]=l[d.path[0]]||[],l[d.path[0]].push(s(d))):o.push(s(d));return{formErrors:o,fieldErrors:l}}function Xw(e,s=l=>l.message){const l={_errors:[]},o=d=>{for(const m of d.issues)if(m.code==="invalid_union"&&m.errors.length)m.errors.map(f=>o({issues:f}));else if(m.code==="invalid_key")o({issues:m.issues});else if(m.code==="invalid_element")o({issues:m.issues});else if(m.path.length===0)l._errors.push(s(m));else{let f=l,g=0;for(;g<m.path.length;){const v=m.path[g];g===m.path.length-1?(f[v]=f[v]||{_errors:[]},f[v]._errors.push(s(m))):f[v]=f[v]||{_errors:[]},f=f[v],g++}}};return o(e),l}const yp=e=>(s,l,o,d)=>{const m=o?Object.assign(o,{async:!1}):{async:!1},f=s._zod.run({value:l,issues:[]},m);if(f instanceof Promise)throw new Kl;if(f.issues.length){const g=new(d?.Err??e)(f.issues.map(v=>Jr(v,m,or())));throw bb(g,d?.callee),g}return f.value},vp=e=>async(s,l,o,d)=>{const m=o?Object.assign(o,{async:!0}):{async:!0};let f=s._zod.run({value:l,issues:[]},m);if(f instanceof Promise&&(f=await f),f.issues.length){const g=new(d?.Err??e)(f.issues.map(v=>Jr(v,m,or())));throw bb(g,d?.callee),g}return f.value},Md=e=>(s,l,o)=>{const d=o?{...o,async:!1}:{async:!1},m=s._zod.run({value:l,issues:[]},d);if(m instanceof Promise)throw new Kl;return m.issues.length?{success:!1,error:new(e??Sb)(m.issues.map(f=>Jr(f,d,or())))}:{success:!0,data:m.value}},Ww=Md(wb),zd=e=>async(s,l,o)=>{const d=o?Object.assign(o,{async:!0}):{async:!0};let m=s._zod.run({value:l,issues:[]},d);return m instanceof Promise&&(m=await m),m.issues.length?{success:!1,error:new e(m.issues.map(f=>Jr(f,d,or())))}:{success:!0,data:m.value}},e2=zd(wb),t2=e=>(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return yp(e)(s,l,d)},n2=e=>(s,l,o)=>yp(e)(s,l,o),a2=e=>async(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return vp(e)(s,l,d)},s2=e=>async(s,l,o)=>vp(e)(s,l,o),i2=e=>(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Md(e)(s,l,d)},r2=e=>(s,l,o)=>Md(e)(s,l,o),l2=e=>async(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return zd(e)(s,l,d)},o2=e=>async(s,l,o)=>zd(e)(s,l,o),c2=/^[cC][^\s-]{8,}$/,u2=/^[0-9a-z]+$/,d2=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,m2=/^[0-9a-vA-V]{20}$/,h2=/^[A-Za-z0-9]{27}$/,f2=/^[a-zA-Z0-9_-]{21}$/,p2=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,x2=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,e0=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,g2=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,y2="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function v2(){return new RegExp(y2,"u")}const b2=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_2=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,N2=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,j2=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,S2=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,kb=/^[A-Za-z0-9_-]*$/,w2=/^\+[1-9]\d{6,14}$/,Eb="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",k2=new RegExp(`^${Eb}$`);function Tb(e){const s="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${s}`:e.precision===0?`${s}:[0-5]\\d`:`${s}:[0-5]\\d\\.\\d{${e.precision}}`:`${s}(?::[0-5]\\d(?:\\.\\d+)?)?`}function E2(e){return new RegExp(`^${Tb(e)}$`)}function T2(e){const s=Tb({precision:e.precision}),l=["Z"];e.local&&l.push(""),e.offset&&l.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const o=`${s}(?:${l.join("|")})`;return new RegExp(`^${Eb}T(?:${o})$`)}const C2=e=>{const s=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${s}$`)},A2=/^-?\d+$/,M2=/^-?\d+(?:\.\d+)?$/,z2=/^(?:true|false)$/i,O2=/^null$/i,R2=/^[^A-Z]*$/,D2=/^[^a-z]*$/,Ua=ke("$ZodCheck",(e,s)=>{var l;e._zod??(e._zod={}),e._zod.def=s,(l=e._zod).onattach??(l.onattach=[])}),Cb={number:"number",bigint:"bigint",object:"date"},Ab=ke("$ZodCheckLessThan",(e,s)=>{Ua.init(e,s);const l=Cb[typeof s.value];e._zod.onattach.push(o=>{const d=o._zod.bag,m=(s.inclusive?d.maximum:d.exclusiveMaximum)??Number.POSITIVE_INFINITY;s.value<m&&(s.inclusive?d.maximum=s.value:d.exclusiveMaximum=s.value)}),e._zod.check=o=>{(s.inclusive?o.value<=s.value:o.value<s.value)||o.issues.push({origin:l,code:"too_big",maximum:typeof s.value=="object"?s.value.getTime():s.value,input:o.value,inclusive:s.inclusive,inst:e,continue:!s.abort})}}),Mb=ke("$ZodCheckGreaterThan",(e,s)=>{Ua.init(e,s);const l=Cb[typeof s.value];e._zod.onattach.push(o=>{const d=o._zod.bag,m=(s.inclusive?d.minimum:d.exclusiveMinimum)??Number.NEGATIVE_INFINITY;s.value>m&&(s.inclusive?d.minimum=s.value:d.exclusiveMinimum=s.value)}),e._zod.check=o=>{(s.inclusive?o.value>=s.value:o.value>s.value)||o.issues.push({origin:l,code:"too_small",minimum:typeof s.value=="object"?s.value.getTime():s.value,input:o.value,inclusive:s.inclusive,inst:e,continue:!s.abort})}}),L2=ke("$ZodCheckMultipleOf",(e,s)=>{Ua.init(e,s),e._zod.onattach.push(l=>{var o;(o=l._zod.bag).multipleOf??(o.multipleOf=s.value)}),e._zod.check=l=>{if(typeof l.value!=typeof s.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof l.value=="bigint"?l.value%s.value===BigInt(0):Iw(l.value,s.value)===0)||l.issues.push({origin:typeof l.value,code:"not_multiple_of",divisor:s.value,input:l.value,inst:e,continue:!s.abort})}}),P2=ke("$ZodCheckNumberFormat",(e,s)=>{Ua.init(e,s),s.format=s.format||"float64";const l=s.format?.includes("int"),o=l?"int":"number",[d,m]=Zw[s.format];e._zod.onattach.push(f=>{const g=f._zod.bag;g.format=s.format,g.minimum=d,g.maximum=m,l&&(g.pattern=A2)}),e._zod.check=f=>{const g=f.value;if(l){if(!Number.isInteger(g)){f.issues.push({expected:o,format:s.format,code:"invalid_type",continue:!1,input:g,inst:e});return}if(!Number.isSafeInteger(g)){g>0?f.issues.push({input:g,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,inclusive:!0,continue:!s.abort}):f.issues.push({input:g,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,inclusive:!0,continue:!s.abort});return}}g<d&&f.issues.push({origin:"number",input:g,code:"too_small",minimum:d,inclusive:!0,inst:e,continue:!s.abort}),g>m&&f.issues.push({origin:"number",input:g,code:"too_big",maximum:m,inclusive:!0,inst:e,continue:!s.abort})}}),I2=ke("$ZodCheckMaxLength",(e,s)=>{var l;Ua.init(e,s),(l=e._zod.def).when??(l.when=o=>{const d=o.value;return!pp(d)&&d.length!==void 0}),e._zod.onattach.push(o=>{const d=o._zod.bag.maximum??Number.POSITIVE_INFINITY;s.maximum<d&&(o._zod.bag.maximum=s.maximum)}),e._zod.check=o=>{const d=o.value;if(d.length<=s.maximum)return;const f=gp(d);o.issues.push({origin:f,code:"too_big",maximum:s.maximum,inclusive:!0,input:d,inst:e,continue:!s.abort})}}),B2=ke("$ZodCheckMinLength",(e,s)=>{var l;Ua.init(e,s),(l=e._zod.def).when??(l.when=o=>{const d=o.value;return!pp(d)&&d.length!==void 0}),e._zod.onattach.push(o=>{const d=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;s.minimum>d&&(o._zod.bag.minimum=s.minimum)}),e._zod.check=o=>{const d=o.value;if(d.length>=s.minimum)return;const f=gp(d);o.issues.push({origin:f,code:"too_small",minimum:s.minimum,inclusive:!0,input:d,inst:e,continue:!s.abort})}}),U2=ke("$ZodCheckLengthEquals",(e,s)=>{var l;Ua.init(e,s),(l=e._zod.def).when??(l.when=o=>{const d=o.value;return!pp(d)&&d.length!==void 0}),e._zod.onattach.push(o=>{const d=o._zod.bag;d.minimum=s.length,d.maximum=s.length,d.length=s.length}),e._zod.check=o=>{const d=o.value,m=d.length;if(m===s.length)return;const f=gp(d),g=m>s.length;o.issues.push({origin:f,...g?{code:"too_big",maximum:s.length}:{code:"too_small",minimum:s.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!s.abort})}}),Od=ke("$ZodCheckStringFormat",(e,s)=>{var l,o;Ua.init(e,s),e._zod.onattach.push(d=>{const m=d._zod.bag;m.format=s.format,s.pattern&&(m.patterns??(m.patterns=new Set),m.patterns.add(s.pattern))}),s.pattern?(l=e._zod).check??(l.check=d=>{s.pattern.lastIndex=0,!s.pattern.test(d.value)&&d.issues.push({origin:"string",code:"invalid_format",format:s.format,input:d.value,...s.pattern?{pattern:s.pattern.toString()}:{},inst:e,continue:!s.abort})}):(o=e._zod).check??(o.check=()=>{})}),F2=ke("$ZodCheckRegex",(e,s)=>{Od.init(e,s),e._zod.check=l=>{s.pattern.lastIndex=0,!s.pattern.test(l.value)&&l.issues.push({origin:"string",code:"invalid_format",format:"regex",input:l.value,pattern:s.pattern.toString(),inst:e,continue:!s.abort})}}),q2=ke("$ZodCheckLowerCase",(e,s)=>{s.pattern??(s.pattern=R2),Od.init(e,s)}),Z2=ke("$ZodCheckUpperCase",(e,s)=>{s.pattern??(s.pattern=D2),Od.init(e,s)}),H2=ke("$ZodCheckIncludes",(e,s)=>{Ua.init(e,s);const l=Ad(s.includes),o=new RegExp(typeof s.position=="number"?`^.{${s.position}}${l}`:l);s.pattern=o,e._zod.onattach.push(d=>{const m=d._zod.bag;m.patterns??(m.patterns=new Set),m.patterns.add(o)}),e._zod.check=d=>{d.value.includes(s.includes,s.position)||d.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:s.includes,input:d.value,inst:e,continue:!s.abort})}}),K2=ke("$ZodCheckStartsWith",(e,s)=>{Ua.init(e,s);const l=new RegExp(`^${Ad(s.prefix)}.*`);s.pattern??(s.pattern=l),e._zod.onattach.push(o=>{const d=o._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(l)}),e._zod.check=o=>{o.value.startsWith(s.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:s.prefix,input:o.value,inst:e,continue:!s.abort})}}),G2=ke("$ZodCheckEndsWith",(e,s)=>{Ua.init(e,s);const l=new RegExp(`.*${Ad(s.suffix)}$`);s.pattern??(s.pattern=l),e._zod.onattach.push(o=>{const d=o._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(l)}),e._zod.check=o=>{o.value.endsWith(s.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:s.suffix,input:o.value,inst:e,continue:!s.abort})}}),$2=ke("$ZodCheckOverwrite",(e,s)=>{Ua.init(e,s),e._zod.check=l=>{l.value=s.tx(l.value)}});class Q2{constructor(s=[]){this.content=[],this.indent=0,this&&(this.args=s)}indented(s){this.indent+=1,s(this),this.indent-=1}write(s){if(typeof s=="function"){s(this,{execution:"sync"}),s(this,{execution:"async"});return}const o=s.split(`
`).filter(f=>f),d=Math.min(...o.map(f=>f.length-f.trimStart().length)),m=o.map(f=>f.slice(d)).map(f=>" ".repeat(this.indent*2)+f);for(const f of m)this.content.push(f)}compile(){const s=Function,l=this?.args,d=[...(this?.content??[""]).map(m=>`  ${m}`)];return new s(...l,d.join(`
`))}}const V2={major:4,minor:3,patch:6},On=ke("$ZodType",(e,s)=>{var l;e??(e={}),e._zod.def=s,e._zod.bag=e._zod.bag||{},e._zod.version=V2;const o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(const d of o)for(const m of d._zod.onattach)m(e);if(o.length===0)(l=e._zod).deferred??(l.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const d=(f,g,v)=>{let _=Zl(f),S;for(const w of g){if(w._zod.def.when){if(!w._zod.def.when(f))continue}else if(_)continue;const k=f.issues.length,O=w._zod.check(f);if(O instanceof Promise&&v?.async===!1)throw new Kl;if(S||O instanceof Promise)S=(S??Promise.resolve()).then(async()=>{await O,f.issues.length!==k&&(_||(_=Zl(f,k)))});else{if(f.issues.length===k)continue;_||(_=Zl(f,k))}}return S?S.then(()=>f):f},m=(f,g,v)=>{if(Zl(f))return f.aborted=!0,f;const _=d(g,o,v);if(_ instanceof Promise){if(v.async===!1)throw new Kl;return _.then(S=>e._zod.parse(S,v))}return e._zod.parse(_,v)};e._zod.run=(f,g)=>{if(g.skipChecks)return e._zod.parse(f,g);if(g.direction==="backward"){const _=e._zod.parse({value:f.value,issues:[]},{...g,skipChecks:!0});return _ instanceof Promise?_.then(S=>m(S,f,g)):m(_,f,g)}const v=e._zod.parse(f,g);if(v instanceof Promise){if(g.async===!1)throw new Kl;return v.then(_=>d(_,o,g))}return d(v,o,g)}}an(e,"~standard",()=>({validate:d=>{try{const m=Ww(e,d);return m.success?{value:m.data}:{issues:m.error?.issues}}catch{return e2(e,d).then(f=>f.success?{value:f.data}:{issues:f.error?.issues})}},vendor:"zod",version:1}))}),bp=ke("$ZodString",(e,s)=>{On.init(e,s),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??C2(e._zod.bag),e._zod.parse=(l,o)=>{if(s.coerce)try{l.value=String(l.value)}catch{}return typeof l.value=="string"||l.issues.push({expected:"string",code:"invalid_type",input:l.value,inst:e}),l}}),Nn=ke("$ZodStringFormat",(e,s)=>{Od.init(e,s),bp.init(e,s)}),Y2=ke("$ZodGUID",(e,s)=>{s.pattern??(s.pattern=x2),Nn.init(e,s)}),J2=ke("$ZodUUID",(e,s)=>{if(s.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[s.version];if(o===void 0)throw new Error(`Invalid UUID version: "${s.version}"`);s.pattern??(s.pattern=e0(o))}else s.pattern??(s.pattern=e0());Nn.init(e,s)}),X2=ke("$ZodEmail",(e,s)=>{s.pattern??(s.pattern=g2),Nn.init(e,s)}),W2=ke("$ZodURL",(e,s)=>{Nn.init(e,s),e._zod.check=l=>{try{const o=l.value.trim(),d=new URL(o);s.hostname&&(s.hostname.lastIndex=0,s.hostname.test(d.hostname)||l.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:s.hostname.source,input:l.value,inst:e,continue:!s.abort})),s.protocol&&(s.protocol.lastIndex=0,s.protocol.test(d.protocol.endsWith(":")?d.protocol.slice(0,-1):d.protocol)||l.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:s.protocol.source,input:l.value,inst:e,continue:!s.abort})),s.normalize?l.value=d.href:l.value=o;return}catch{l.issues.push({code:"invalid_format",format:"url",input:l.value,inst:e,continue:!s.abort})}}}),ek=ke("$ZodEmoji",(e,s)=>{s.pattern??(s.pattern=v2()),Nn.init(e,s)}),tk=ke("$ZodNanoID",(e,s)=>{s.pattern??(s.pattern=f2),Nn.init(e,s)}),nk=ke("$ZodCUID",(e,s)=>{s.pattern??(s.pattern=c2),Nn.init(e,s)}),ak=ke("$ZodCUID2",(e,s)=>{s.pattern??(s.pattern=u2),Nn.init(e,s)}),sk=ke("$ZodULID",(e,s)=>{s.pattern??(s.pattern=d2),Nn.init(e,s)}),ik=ke("$ZodXID",(e,s)=>{s.pattern??(s.pattern=m2),Nn.init(e,s)}),rk=ke("$ZodKSUID",(e,s)=>{s.pattern??(s.pattern=h2),Nn.init(e,s)}),lk=ke("$ZodISODateTime",(e,s)=>{s.pattern??(s.pattern=T2(s)),Nn.init(e,s)}),ok=ke("$ZodISODate",(e,s)=>{s.pattern??(s.pattern=k2),Nn.init(e,s)}),ck=ke("$ZodISOTime",(e,s)=>{s.pattern??(s.pattern=E2(s)),Nn.init(e,s)}),uk=ke("$ZodISODuration",(e,s)=>{s.pattern??(s.pattern=p2),Nn.init(e,s)}),dk=ke("$ZodIPv4",(e,s)=>{s.pattern??(s.pattern=b2),Nn.init(e,s),e._zod.bag.format="ipv4"}),mk=ke("$ZodIPv6",(e,s)=>{s.pattern??(s.pattern=_2),Nn.init(e,s),e._zod.bag.format="ipv6",e._zod.check=l=>{try{new URL(`http://[${l.value}]`)}catch{l.issues.push({code:"invalid_format",format:"ipv6",input:l.value,inst:e,continue:!s.abort})}}}),hk=ke("$ZodCIDRv4",(e,s)=>{s.pattern??(s.pattern=N2),Nn.init(e,s)}),fk=ke("$ZodCIDRv6",(e,s)=>{s.pattern??(s.pattern=j2),Nn.init(e,s),e._zod.check=l=>{const o=l.value.split("/");try{if(o.length!==2)throw new Error;const[d,m]=o;if(!m)throw new Error;const f=Number(m);if(`${f}`!==m)throw new Error;if(f<0||f>128)throw new Error;new URL(`http://[${d}]`)}catch{l.issues.push({code:"invalid_format",format:"cidrv6",input:l.value,inst:e,continue:!s.abort})}}});function zb(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const pk=ke("$ZodBase64",(e,s)=>{s.pattern??(s.pattern=S2),Nn.init(e,s),e._zod.bag.contentEncoding="base64",e._zod.check=l=>{zb(l.value)||l.issues.push({code:"invalid_format",format:"base64",input:l.value,inst:e,continue:!s.abort})}});function xk(e){if(!kb.test(e))return!1;const s=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),l=s.padEnd(Math.ceil(s.length/4)*4,"=");return zb(l)}const gk=ke("$ZodBase64URL",(e,s)=>{s.pattern??(s.pattern=kb),Nn.init(e,s),e._zod.bag.contentEncoding="base64url",e._zod.check=l=>{xk(l.value)||l.issues.push({code:"invalid_format",format:"base64url",input:l.value,inst:e,continue:!s.abort})}}),yk=ke("$ZodE164",(e,s)=>{s.pattern??(s.pattern=w2),Nn.init(e,s)});function vk(e,s=null){try{const l=e.split(".");if(l.length!==3)return!1;const[o]=l;if(!o)return!1;const d=JSON.parse(atob(o));return!("typ"in d&&d?.typ!=="JWT"||!d.alg||s&&(!("alg"in d)||d.alg!==s))}catch{return!1}}const bk=ke("$ZodJWT",(e,s)=>{Nn.init(e,s),e._zod.check=l=>{vk(l.value,s.alg)||l.issues.push({code:"invalid_format",format:"jwt",input:l.value,inst:e,continue:!s.abort})}}),Ob=ke("$ZodNumber",(e,s)=>{On.init(e,s),e._zod.pattern=e._zod.bag.pattern??M2,e._zod.parse=(l,o)=>{if(s.coerce)try{l.value=Number(l.value)}catch{}const d=l.value;if(typeof d=="number"&&!Number.isNaN(d)&&Number.isFinite(d))return l;const m=typeof d=="number"?Number.isNaN(d)?"NaN":Number.isFinite(d)?void 0:"Infinity":void 0;return l.issues.push({expected:"number",code:"invalid_type",input:d,inst:e,...m?{received:m}:{}}),l}}),_k=ke("$ZodNumberFormat",(e,s)=>{P2.init(e,s),Ob.init(e,s)}),Nk=ke("$ZodBoolean",(e,s)=>{On.init(e,s),e._zod.pattern=z2,e._zod.parse=(l,o)=>{if(s.coerce)try{l.value=!!l.value}catch{}const d=l.value;return typeof d=="boolean"||l.issues.push({expected:"boolean",code:"invalid_type",input:d,inst:e}),l}}),jk=ke("$ZodNull",(e,s)=>{On.init(e,s),e._zod.pattern=O2,e._zod.values=new Set([null]),e._zod.parse=(l,o)=>{const d=l.value;return d===null||l.issues.push({expected:"null",code:"invalid_type",input:d,inst:e}),l}}),Sk=ke("$ZodUnknown",(e,s)=>{On.init(e,s),e._zod.parse=l=>l}),wk=ke("$ZodNever",(e,s)=>{On.init(e,s),e._zod.parse=(l,o)=>(l.issues.push({expected:"never",code:"invalid_type",input:l.value,inst:e}),l)});function t0(e,s,l){e.issues.length&&s.issues.push(...Nb(l,e.issues)),s.value[l]=e.value}const kk=ke("$ZodArray",(e,s)=>{On.init(e,s),e._zod.parse=(l,o)=>{const d=l.value;if(!Array.isArray(d))return l.issues.push({expected:"array",code:"invalid_type",input:d,inst:e}),l;l.value=Array(d.length);const m=[];for(let f=0;f<d.length;f++){const g=d[f],v=s.element._zod.run({value:g,issues:[]},o);v instanceof Promise?m.push(v.then(_=>t0(_,l,f))):t0(v,l,f)}return m.length?Promise.all(m).then(()=>l):l}});function yd(e,s,l,o,d){if(e.issues.length){if(d&&!(l in o))return;s.issues.push(...Nb(l,e.issues))}e.value===void 0?l in o&&(s.value[l]=void 0):s.value[l]=e.value}function Rb(e){const s=Object.keys(e.shape);for(const o of s)if(!e.shape?.[o]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${o}": expected a Zod schema`);const l=qw(e.shape);return{...e,keys:s,keySet:new Set(s),numKeys:s.length,optionalKeys:new Set(l)}}function Db(e,s,l,o,d,m){const f=[],g=d.keySet,v=d.catchall._zod,_=v.def.type,S=v.optout==="optional";for(const w in s){if(g.has(w))continue;if(_==="never"){f.push(w);continue}const k=v.run({value:s[w],issues:[]},o);k instanceof Promise?e.push(k.then(O=>yd(O,l,w,s,S))):yd(k,l,w,s,S)}return f.length&&l.issues.push({code:"unrecognized_keys",keys:f,input:s,inst:m}),e.length?Promise.all(e).then(()=>l):l}const Ek=ke("$ZodObject",(e,s)=>{if(On.init(e,s),!Object.getOwnPropertyDescriptor(s,"shape")?.get){const g=s.shape;Object.defineProperty(s,"shape",{get:()=>{const v={...g};return Object.defineProperty(s,"shape",{value:v}),v}})}const o=fp(()=>Rb(s));an(e._zod,"propValues",()=>{const g=s.shape,v={};for(const _ in g){const S=g[_]._zod;if(S.values){v[_]??(v[_]=new Set);for(const w of S.values)v[_].add(w)}}return v});const d=gd,m=s.catchall;let f;e._zod.parse=(g,v)=>{f??(f=o.value);const _=g.value;if(!d(_))return g.issues.push({expected:"object",code:"invalid_type",input:_,inst:e}),g;g.value={};const S=[],w=f.shape;for(const k of f.keys){const O=w[k],T=O._zod.optout==="optional",E=O._zod.run({value:_[k],issues:[]},v);E instanceof Promise?S.push(E.then(R=>yd(R,g,k,_,T))):yd(E,g,k,_,T)}return m?Db(S,_,g,v,o.value,e):S.length?Promise.all(S).then(()=>g):g}}),Tk=ke("$ZodObjectJIT",(e,s)=>{Ek.init(e,s);const l=e._zod.parse,o=fp(()=>Rb(s)),d=k=>{const O=new Q2(["shape","payload","ctx"]),T=o.value,E=z=>{const Z=Wy(z);return`shape[${Z}]._zod.run({ value: input[${Z}], issues: [] }, ctx)`};O.write("const input = payload.value;");const R=Object.create(null);let B=0;for(const z of T.keys)R[z]=`key_${B++}`;O.write("const newResult = {};");for(const z of T.keys){const Z=R[z],I=Wy(z),H=k[z]?._zod?.optout==="optional";O.write(`const ${Z} = ${E(z)};`),H?O.write(`
        if (${Z}.issues.length) {
          if (${I} in input) {
            payload.issues = payload.issues.concat(${Z}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${I}, ...iss.path] : [${I}]
            })));
          }
        }
        
        if (${Z}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${Z}.value;
        }
        
      `):O.write(`
        if (${Z}.issues.length) {
          payload.issues = payload.issues.concat(${Z}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${I}, ...iss.path] : [${I}]
          })));
        }
        
        if (${Z}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${Z}.value;
        }
        
      `)}O.write("payload.value = newResult;"),O.write("return payload;");const A=O.compile();return(z,Z)=>A(k,z,Z)};let m;const f=gd,g=!If.jitless,_=g&&Uw.value,S=s.catchall;let w;e._zod.parse=(k,O)=>{w??(w=o.value);const T=k.value;return f(T)?g&&_&&O?.async===!1&&O.jitless!==!0?(m||(m=d(s.shape)),k=m(k,O),S?Db([],T,k,O,w,e):k):l(k,O):(k.issues.push({expected:"object",code:"invalid_type",input:T,inst:e}),k)}});function n0(e,s,l,o){for(const m of e)if(m.issues.length===0)return s.value=m.value,s;const d=e.filter(m=>!Zl(m));return d.length===1?(s.value=d[0].value,d[0]):(s.issues.push({code:"invalid_union",input:s.value,inst:l,errors:e.map(m=>m.issues.map(f=>Jr(f,o,or())))}),s)}const Ck=ke("$ZodUnion",(e,s)=>{On.init(e,s),an(e._zod,"optin",()=>s.options.some(d=>d._zod.optin==="optional")?"optional":void 0),an(e._zod,"optout",()=>s.options.some(d=>d._zod.optout==="optional")?"optional":void 0),an(e._zod,"values",()=>{if(s.options.every(d=>d._zod.values))return new Set(s.options.flatMap(d=>Array.from(d._zod.values)))}),an(e._zod,"pattern",()=>{if(s.options.every(d=>d._zod.pattern)){const d=s.options.map(m=>m._zod.pattern);return new RegExp(`^(${d.map(m=>xp(m.source)).join("|")})$`)}});const l=s.options.length===1,o=s.options[0]._zod.run;e._zod.parse=(d,m)=>{if(l)return o(d,m);let f=!1;const g=[];for(const v of s.options){const _=v._zod.run({value:d.value,issues:[]},m);if(_ instanceof Promise)g.push(_),f=!0;else{if(_.issues.length===0)return _;g.push(_)}}return f?Promise.all(g).then(v=>n0(v,d,e,m)):n0(g,d,e,m)}}),Ak=ke("$ZodIntersection",(e,s)=>{On.init(e,s),e._zod.parse=(l,o)=>{const d=l.value,m=s.left._zod.run({value:d,issues:[]},o),f=s.right._zod.run({value:d,issues:[]},o);return m instanceof Promise||f instanceof Promise?Promise.all([m,f]).then(([v,_])=>a0(l,v,_)):a0(l,m,f)}});function Uf(e,s){if(e===s)return{valid:!0,data:e};if(e instanceof Date&&s instanceof Date&&+e==+s)return{valid:!0,data:e};if(oc(e)&&oc(s)){const l=Object.keys(s),o=Object.keys(e).filter(m=>l.indexOf(m)!==-1),d={...e,...s};for(const m of o){const f=Uf(e[m],s[m]);if(!f.valid)return{valid:!1,mergeErrorPath:[m,...f.mergeErrorPath]};d[m]=f.data}return{valid:!0,data:d}}if(Array.isArray(e)&&Array.isArray(s)){if(e.length!==s.length)return{valid:!1,mergeErrorPath:[]};const l=[];for(let o=0;o<e.length;o++){const d=e[o],m=s[o],f=Uf(d,m);if(!f.valid)return{valid:!1,mergeErrorPath:[o,...f.mergeErrorPath]};l.push(f.data)}return{valid:!0,data:l}}return{valid:!1,mergeErrorPath:[]}}function a0(e,s,l){const o=new Map;let d;for(const g of s.issues)if(g.code==="unrecognized_keys"){d??(d=g);for(const v of g.keys)o.has(v)||o.set(v,{}),o.get(v).l=!0}else e.issues.push(g);for(const g of l.issues)if(g.code==="unrecognized_keys")for(const v of g.keys)o.has(v)||o.set(v,{}),o.get(v).r=!0;else e.issues.push(g);const m=[...o].filter(([,g])=>g.l&&g.r).map(([g])=>g);if(m.length&&d&&e.issues.push({...d,keys:m}),Zl(e))return e;const f=Uf(s.value,l.value);if(!f.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(f.mergeErrorPath)}`);return e.value=f.data,e}const Mk=ke("$ZodEnum",(e,s)=>{On.init(e,s);const l=vb(s.entries),o=new Set(l);e._zod.values=o,e._zod.pattern=new RegExp(`^(${l.filter(d=>Fw.has(typeof d)).map(d=>typeof d=="string"?Ad(d):d.toString()).join("|")})$`),e._zod.parse=(d,m)=>{const f=d.value;return o.has(f)||d.issues.push({code:"invalid_value",values:l,input:f,inst:e}),d}}),zk=ke("$ZodTransform",(e,s)=>{On.init(e,s),e._zod.parse=(l,o)=>{if(o.direction==="backward")throw new yb(e.constructor.name);const d=s.transform(l.value,l);if(o.async)return(d instanceof Promise?d:Promise.resolve(d)).then(f=>(l.value=f,l));if(d instanceof Promise)throw new Kl;return l.value=d,l}});function s0(e,s){return e.issues.length&&s===void 0?{issues:[],value:void 0}:e}const Lb=ke("$ZodOptional",(e,s)=>{On.init(e,s),e._zod.optin="optional",e._zod.optout="optional",an(e._zod,"values",()=>s.innerType._zod.values?new Set([...s.innerType._zod.values,void 0]):void 0),an(e._zod,"pattern",()=>{const l=s.innerType._zod.pattern;return l?new RegExp(`^(${xp(l.source)})?$`):void 0}),e._zod.parse=(l,o)=>{if(s.innerType._zod.optin==="optional"){const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(m=>s0(m,l.value)):s0(d,l.value)}return l.value===void 0?l:s.innerType._zod.run(l,o)}}),Ok=ke("$ZodExactOptional",(e,s)=>{Lb.init(e,s),an(e._zod,"values",()=>s.innerType._zod.values),an(e._zod,"pattern",()=>s.innerType._zod.pattern),e._zod.parse=(l,o)=>s.innerType._zod.run(l,o)}),Rk=ke("$ZodNullable",(e,s)=>{On.init(e,s),an(e._zod,"optin",()=>s.innerType._zod.optin),an(e._zod,"optout",()=>s.innerType._zod.optout),an(e._zod,"pattern",()=>{const l=s.innerType._zod.pattern;return l?new RegExp(`^(${xp(l.source)}|null)$`):void 0}),an(e._zod,"values",()=>s.innerType._zod.values?new Set([...s.innerType._zod.values,null]):void 0),e._zod.parse=(l,o)=>l.value===null?l:s.innerType._zod.run(l,o)}),Dk=ke("$ZodDefault",(e,s)=>{On.init(e,s),e._zod.optin="optional",an(e._zod,"values",()=>s.innerType._zod.values),e._zod.parse=(l,o)=>{if(o.direction==="backward")return s.innerType._zod.run(l,o);if(l.value===void 0)return l.value=s.defaultValue,l;const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(m=>i0(m,s)):i0(d,s)}});function i0(e,s){return e.value===void 0&&(e.value=s.defaultValue),e}const Lk=ke("$ZodPrefault",(e,s)=>{On.init(e,s),e._zod.optin="optional",an(e._zod,"values",()=>s.innerType._zod.values),e._zod.parse=(l,o)=>(o.direction==="backward"||l.value===void 0&&(l.value=s.defaultValue),s.innerType._zod.run(l,o))}),Pk=ke("$ZodNonOptional",(e,s)=>{On.init(e,s),an(e._zod,"values",()=>{const l=s.innerType._zod.values;return l?new Set([...l].filter(o=>o!==void 0)):void 0}),e._zod.parse=(l,o)=>{const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(m=>r0(m,e)):r0(d,e)}});function r0(e,s){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:s}),e}const Ik=ke("$ZodCatch",(e,s)=>{On.init(e,s),an(e._zod,"optin",()=>s.innerType._zod.optin),an(e._zod,"optout",()=>s.innerType._zod.optout),an(e._zod,"values",()=>s.innerType._zod.values),e._zod.parse=(l,o)=>{if(o.direction==="backward")return s.innerType._zod.run(l,o);const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(m=>(l.value=m.value,m.issues.length&&(l.value=s.catchValue({...l,error:{issues:m.issues.map(f=>Jr(f,o,or()))},input:l.value}),l.issues=[]),l)):(l.value=d.value,d.issues.length&&(l.value=s.catchValue({...l,error:{issues:d.issues.map(m=>Jr(m,o,or()))},input:l.value}),l.issues=[]),l)}}),Bk=ke("$ZodPipe",(e,s)=>{On.init(e,s),an(e._zod,"values",()=>s.in._zod.values),an(e._zod,"optin",()=>s.in._zod.optin),an(e._zod,"optout",()=>s.out._zod.optout),an(e._zod,"propValues",()=>s.in._zod.propValues),e._zod.parse=(l,o)=>{if(o.direction==="backward"){const m=s.out._zod.run(l,o);return m instanceof Promise?m.then(f=>Hu(f,s.in,o)):Hu(m,s.in,o)}const d=s.in._zod.run(l,o);return d instanceof Promise?d.then(m=>Hu(m,s.out,o)):Hu(d,s.out,o)}});function Hu(e,s,l){return e.issues.length?(e.aborted=!0,e):s._zod.run({value:e.value,issues:e.issues},l)}const Uk=ke("$ZodReadonly",(e,s)=>{On.init(e,s),an(e._zod,"propValues",()=>s.innerType._zod.propValues),an(e._zod,"values",()=>s.innerType._zod.values),an(e._zod,"optin",()=>s.innerType?._zod?.optin),an(e._zod,"optout",()=>s.innerType?._zod?.optout),e._zod.parse=(l,o)=>{if(o.direction==="backward")return s.innerType._zod.run(l,o);const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(l0):l0(d)}});function l0(e){return e.value=Object.freeze(e.value),e}const Fk=ke("$ZodCustom",(e,s)=>{Ua.init(e,s),On.init(e,s),e._zod.parse=(l,o)=>l,e._zod.check=l=>{const o=l.value,d=s.fn(o);if(d instanceof Promise)return d.then(m=>o0(m,l,o,e));o0(d,l,o,e)}});function o0(e,s,l,o){if(!e){const d={code:"custom",input:l,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(d.params=o._zod.def.params),s.issues.push(cc(d))}}var c0;class qk{constructor(){this._map=new WeakMap,this._idmap=new Map}add(s,...l){const o=l[0];return this._map.set(s,o),o&&typeof o=="object"&&"id"in o&&this._idmap.set(o.id,s),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(s){const l=this._map.get(s);return l&&typeof l=="object"&&"id"in l&&this._idmap.delete(l.id),this._map.delete(s),this}get(s){const l=s._zod.parent;if(l){const o={...this.get(l)??{}};delete o.id;const d={...o,...this._map.get(s)};return Object.keys(d).length?d:void 0}return this._map.get(s)}has(s){return this._map.has(s)}}function Zk(){return new qk}(c0=globalThis).__zod_globalRegistry??(c0.__zod_globalRegistry=Zk());const nc=globalThis.__zod_globalRegistry;function Hk(e,s){return new e({type:"string",...nt(s)})}function Kk(e,s){return new e({type:"string",format:"email",check:"string_format",abort:!1,...nt(s)})}function u0(e,s){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...nt(s)})}function Gk(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...nt(s)})}function $k(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...nt(s)})}function Qk(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...nt(s)})}function Vk(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...nt(s)})}function Yk(e,s){return new e({type:"string",format:"url",check:"string_format",abort:!1,...nt(s)})}function Jk(e,s){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...nt(s)})}function Xk(e,s){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...nt(s)})}function Wk(e,s){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...nt(s)})}function eE(e,s){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...nt(s)})}function tE(e,s){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...nt(s)})}function nE(e,s){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...nt(s)})}function aE(e,s){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...nt(s)})}function sE(e,s){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...nt(s)})}function iE(e,s){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...nt(s)})}function rE(e,s){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...nt(s)})}function lE(e,s){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...nt(s)})}function oE(e,s){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...nt(s)})}function cE(e,s){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...nt(s)})}function uE(e,s){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...nt(s)})}function dE(e,s){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...nt(s)})}function mE(e,s){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...nt(s)})}function hE(e,s){return new e({type:"string",format:"date",check:"string_format",...nt(s)})}function fE(e,s){return new e({type:"string",format:"time",check:"string_format",precision:null,...nt(s)})}function pE(e,s){return new e({type:"string",format:"duration",check:"string_format",...nt(s)})}function xE(e,s){return new e({type:"number",coerce:!0,checks:[],...nt(s)})}function gE(e,s){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...nt(s)})}function yE(e,s){return new e({type:"boolean",...nt(s)})}function vE(e,s){return new e({type:"null",...nt(s)})}function bE(e){return new e({type:"unknown"})}function _E(e,s){return new e({type:"never",...nt(s)})}function d0(e,s){return new Ab({check:"less_than",...nt(s),value:e,inclusive:!1})}function Bh(e,s){return new Ab({check:"less_than",...nt(s),value:e,inclusive:!0})}function m0(e,s){return new Mb({check:"greater_than",...nt(s),value:e,inclusive:!1})}function Uh(e,s){return new Mb({check:"greater_than",...nt(s),value:e,inclusive:!0})}function h0(e,s){return new L2({check:"multiple_of",...nt(s),value:e})}function Pb(e,s){return new I2({check:"max_length",...nt(s),maximum:e})}function vd(e,s){return new B2({check:"min_length",...nt(s),minimum:e})}function Ib(e,s){return new U2({check:"length_equals",...nt(s),length:e})}function NE(e,s){return new F2({check:"string_format",format:"regex",...nt(s),pattern:e})}function jE(e){return new q2({check:"string_format",format:"lowercase",...nt(e)})}function SE(e){return new Z2({check:"string_format",format:"uppercase",...nt(e)})}function wE(e,s){return new H2({check:"string_format",format:"includes",...nt(s),includes:e})}function kE(e,s){return new K2({check:"string_format",format:"starts_with",...nt(s),prefix:e})}function EE(e,s){return new G2({check:"string_format",format:"ends_with",...nt(s),suffix:e})}function Xl(e){return new $2({check:"overwrite",tx:e})}function TE(e){return Xl(s=>s.normalize(e))}function CE(){return Xl(e=>e.trim())}function AE(){return Xl(e=>e.toLowerCase())}function ME(){return Xl(e=>e.toUpperCase())}function zE(){return Xl(e=>Bw(e))}function OE(e,s,l){return new e({type:"array",element:s,...nt(l)})}function RE(e,s,l){return new e({type:"custom",check:"custom",fn:s,...nt(l)})}function DE(e){const s=LE(l=>(l.addIssue=o=>{if(typeof o=="string")l.issues.push(cc(o,l.value,s._zod.def));else{const d=o;d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=l.value),d.inst??(d.inst=s),d.continue??(d.continue=!s._zod.def.abort),l.issues.push(cc(d))}},e(l.value,l)));return s}function LE(e,s){const l=new Ua({check:"custom",...nt(s)});return l._zod.check=e,l}function Bb(e){let s=e?.target??"draft-2020-12";return s==="draft-4"&&(s="draft-04"),s==="draft-7"&&(s="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??nc,target:s,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function ha(e,s,l={path:[],schemaPath:[]}){var o;const d=e._zod.def,m=s.seen.get(e);if(m)return m.count++,l.schemaPath.includes(e)&&(m.cycle=l.path),m.schema;const f={schema:{},count:1,cycle:void 0,path:l.path};s.seen.set(e,f);const g=e._zod.toJSONSchema?.();if(g)f.schema=g;else{const S={...l,schemaPath:[...l.schemaPath,e],path:l.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(s,f.schema,S);else{const k=f.schema,O=s.processors[d.type];if(!O)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${d.type}`);O(e,s,k,S)}const w=e._zod.parent;w&&(f.ref||(f.ref=w),ha(w,s,S),s.seen.get(w).isParent=!0)}const v=s.metadataRegistry.get(e);return v&&Object.assign(f.schema,v),s.io==="input"&&Na(e)&&(delete f.schema.examples,delete f.schema.default),s.io==="input"&&f.schema._prefault&&((o=f.schema).default??(o.default=f.schema._prefault)),delete f.schema._prefault,s.seen.get(e).schema}function Ub(e,s){const l=e.seen.get(s);if(!l)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=new Map;for(const f of e.seen.entries()){const g=e.metadataRegistry.get(f[0])?.id;if(g){const v=o.get(g);if(v&&v!==f[0])throw new Error(`Duplicate schema id "${g}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);o.set(g,f[0])}}const d=f=>{const g=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const w=e.external.registry.get(f[0])?.id,k=e.external.uri??(T=>T);if(w)return{ref:k(w)};const O=f[1].defId??f[1].schema.id??`schema${e.counter++}`;return f[1].defId=O,{defId:O,ref:`${k("__shared")}#/${g}/${O}`}}if(f[1]===l)return{ref:"#"};const _=`#/${g}/`,S=f[1].schema.id??`__schema${e.counter++}`;return{defId:S,ref:_+S}},m=f=>{if(f[1].schema.$ref)return;const g=f[1],{ref:v,defId:_}=d(f);g.def={...g.schema},_&&(g.defId=_);const S=g.schema;for(const w in S)delete S[w];S.$ref=v};if(e.cycles==="throw")for(const f of e.seen.entries()){const g=f[1];if(g.cycle)throw new Error(`Cycle detected: #/${g.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const f of e.seen.entries()){const g=f[1];if(s===f[0]){m(f);continue}if(e.external){const _=e.external.registry.get(f[0])?.id;if(s!==f[0]&&_){m(f);continue}}if(e.metadataRegistry.get(f[0])?.id){m(f);continue}if(g.cycle){m(f);continue}if(g.count>1&&e.reused==="ref"){m(f);continue}}}function Fb(e,s){const l=e.seen.get(s);if(!l)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=f=>{const g=e.seen.get(f);if(g.ref===null)return;const v=g.def??g.schema,_={...v},S=g.ref;if(g.ref=null,S){o(S);const k=e.seen.get(S),O=k.schema;if(O.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(v.allOf=v.allOf??[],v.allOf.push(O)):Object.assign(v,O),Object.assign(v,_),f._zod.parent===S)for(const E in v)E==="$ref"||E==="allOf"||E in _||delete v[E];if(O.$ref&&k.def)for(const E in v)E==="$ref"||E==="allOf"||E in k.def&&JSON.stringify(v[E])===JSON.stringify(k.def[E])&&delete v[E]}const w=f._zod.parent;if(w&&w!==S){o(w);const k=e.seen.get(w);if(k?.schema.$ref&&(v.$ref=k.schema.$ref,k.def))for(const O in v)O==="$ref"||O==="allOf"||O in k.def&&JSON.stringify(v[O])===JSON.stringify(k.def[O])&&delete v[O]}e.override({zodSchema:f,jsonSchema:v,path:g.path??[]})};for(const f of[...e.seen.entries()].reverse())o(f[0]);const d={};if(e.target==="draft-2020-12"?d.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?d.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?d.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const f=e.external.registry.get(s)?.id;if(!f)throw new Error("Schema is missing an `id` property");d.$id=e.external.uri(f)}Object.assign(d,l.def??l.schema);const m=e.external?.defs??{};for(const f of e.seen.entries()){const g=f[1];g.def&&g.defId&&(m[g.defId]=g.def)}e.external||Object.keys(m).length>0&&(e.target==="draft-2020-12"?d.$defs=m:d.definitions=m);try{const f=JSON.parse(JSON.stringify(d));return Object.defineProperty(f,"~standard",{value:{...s["~standard"],jsonSchema:{input:bd(s,"input",e.processors),output:bd(s,"output",e.processors)}},enumerable:!1,writable:!1}),f}catch{throw new Error("Error converting schema to JSON.")}}function Na(e,s){const l=s??{seen:new Set};if(l.seen.has(e))return!1;l.seen.add(e);const o=e._zod.def;if(o.type==="transform")return!0;if(o.type==="array")return Na(o.element,l);if(o.type==="set")return Na(o.valueType,l);if(o.type==="lazy")return Na(o.getter(),l);if(o.type==="promise"||o.type==="optional"||o.type==="nonoptional"||o.type==="nullable"||o.type==="readonly"||o.type==="default"||o.type==="prefault")return Na(o.innerType,l);if(o.type==="intersection")return Na(o.left,l)||Na(o.right,l);if(o.type==="record"||o.type==="map")return Na(o.keyType,l)||Na(o.valueType,l);if(o.type==="pipe")return Na(o.in,l)||Na(o.out,l);if(o.type==="object"){for(const d in o.shape)if(Na(o.shape[d],l))return!0;return!1}if(o.type==="union"){for(const d of o.options)if(Na(d,l))return!0;return!1}if(o.type==="tuple"){for(const d of o.items)if(Na(d,l))return!0;return!!(o.rest&&Na(o.rest,l))}return!1}const PE=(e,s={})=>l=>{const o=Bb({...l,processors:s});return ha(e,o),Ub(o,e),Fb(o,e)},bd=(e,s,l={})=>o=>{const{libraryOptions:d,target:m}=o??{},f=Bb({...d??{},target:m,io:s,processors:l});return ha(e,f),Ub(f,e),Fb(f,e)},IE={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},BE=(e,s,l,o)=>{const d=l;d.type="string";const{minimum:m,maximum:f,format:g,patterns:v,contentEncoding:_}=e._zod.bag;if(typeof m=="number"&&(d.minLength=m),typeof f=="number"&&(d.maxLength=f),g&&(d.format=IE[g]??g,d.format===""&&delete d.format,g==="time"&&delete d.format),_&&(d.contentEncoding=_),v&&v.size>0){const S=[...v];S.length===1?d.pattern=S[0].source:S.length>1&&(d.allOf=[...S.map(w=>({...s.target==="draft-07"||s.target==="draft-04"||s.target==="openapi-3.0"?{type:"string"}:{},pattern:w.source}))])}},UE=(e,s,l,o)=>{const d=l,{minimum:m,maximum:f,format:g,multipleOf:v,exclusiveMaximum:_,exclusiveMinimum:S}=e._zod.bag;typeof g=="string"&&g.includes("int")?d.type="integer":d.type="number",typeof S=="number"&&(s.target==="draft-04"||s.target==="openapi-3.0"?(d.minimum=S,d.exclusiveMinimum=!0):d.exclusiveMinimum=S),typeof m=="number"&&(d.minimum=m,typeof S=="number"&&s.target!=="draft-04"&&(S>=m?delete d.minimum:delete d.exclusiveMinimum)),typeof _=="number"&&(s.target==="draft-04"||s.target==="openapi-3.0"?(d.maximum=_,d.exclusiveMaximum=!0):d.exclusiveMaximum=_),typeof f=="number"&&(d.maximum=f,typeof _=="number"&&s.target!=="draft-04"&&(_<=f?delete d.maximum:delete d.exclusiveMaximum)),typeof v=="number"&&(d.multipleOf=v)},FE=(e,s,l,o)=>{l.type="boolean"},qE=(e,s,l,o)=>{s.target==="openapi-3.0"?(l.type="string",l.nullable=!0,l.enum=[null]):l.type="null"},ZE=(e,s,l,o)=>{l.not={}},HE=(e,s,l,o)=>{},KE=(e,s,l,o)=>{const d=e._zod.def,m=vb(d.entries);m.every(f=>typeof f=="number")&&(l.type="number"),m.every(f=>typeof f=="string")&&(l.type="string"),l.enum=m},GE=(e,s,l,o)=>{if(s.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},$E=(e,s,l,o)=>{if(s.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},QE=(e,s,l,o)=>{const d=l,m=e._zod.def,{minimum:f,maximum:g}=e._zod.bag;typeof f=="number"&&(d.minItems=f),typeof g=="number"&&(d.maxItems=g),d.type="array",d.items=ha(m.element,s,{...o,path:[...o.path,"items"]})},VE=(e,s,l,o)=>{const d=l,m=e._zod.def;d.type="object",d.properties={};const f=m.shape;for(const _ in f)d.properties[_]=ha(f[_],s,{...o,path:[...o.path,"properties",_]});const g=new Set(Object.keys(f)),v=new Set([...g].filter(_=>{const S=m.shape[_]._zod;return s.io==="input"?S.optin===void 0:S.optout===void 0}));v.size>0&&(d.required=Array.from(v)),m.catchall?._zod.def.type==="never"?d.additionalProperties=!1:m.catchall?m.catchall&&(d.additionalProperties=ha(m.catchall,s,{...o,path:[...o.path,"additionalProperties"]})):s.io==="output"&&(d.additionalProperties=!1)},YE=(e,s,l,o)=>{const d=e._zod.def,m=d.inclusive===!1,f=d.options.map((g,v)=>ha(g,s,{...o,path:[...o.path,m?"oneOf":"anyOf",v]}));m?l.oneOf=f:l.anyOf=f},JE=(e,s,l,o)=>{const d=e._zod.def,m=ha(d.left,s,{...o,path:[...o.path,"allOf",0]}),f=ha(d.right,s,{...o,path:[...o.path,"allOf",1]}),g=_=>"allOf"in _&&Object.keys(_).length===1,v=[...g(m)?m.allOf:[m],...g(f)?f.allOf:[f]];l.allOf=v},XE=(e,s,l,o)=>{const d=e._zod.def,m=ha(d.innerType,s,o),f=s.seen.get(e);s.target==="openapi-3.0"?(f.ref=d.innerType,l.nullable=!0):l.anyOf=[m,{type:"null"}]},WE=(e,s,l,o)=>{const d=e._zod.def;ha(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType},e1=(e,s,l,o)=>{const d=e._zod.def;ha(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType,l.default=JSON.parse(JSON.stringify(d.defaultValue))},t1=(e,s,l,o)=>{const d=e._zod.def;ha(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType,s.io==="input"&&(l._prefault=JSON.parse(JSON.stringify(d.defaultValue)))},n1=(e,s,l,o)=>{const d=e._zod.def;ha(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType;let f;try{f=d.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}l.default=f},a1=(e,s,l,o)=>{const d=e._zod.def,m=s.io==="input"?d.in._zod.def.type==="transform"?d.out:d.in:d.out;ha(m,s,o);const f=s.seen.get(e);f.ref=m},s1=(e,s,l,o)=>{const d=e._zod.def;ha(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType,l.readOnly=!0},qb=(e,s,l,o)=>{const d=e._zod.def;ha(d.innerType,s,o);const m=s.seen.get(e);m.ref=d.innerType},i1=ke("ZodISODateTime",(e,s)=>{lk.init(e,s),wn.init(e,s)});function r1(e){return mE(i1,e)}const l1=ke("ZodISODate",(e,s)=>{ok.init(e,s),wn.init(e,s)});function o1(e){return hE(l1,e)}const c1=ke("ZodISOTime",(e,s)=>{ck.init(e,s),wn.init(e,s)});function u1(e){return fE(c1,e)}const d1=ke("ZodISODuration",(e,s)=>{uk.init(e,s),wn.init(e,s)});function m1(e){return pE(d1,e)}const h1=(e,s)=>{Sb.init(e,s),e.name="ZodError",Object.defineProperties(e,{format:{value:l=>Xw(e,l)},flatten:{value:l=>Jw(e,l)},addIssue:{value:l=>{e.issues.push(l),e.message=JSON.stringify(e.issues,Bf,2)}},addIssues:{value:l=>{e.issues.push(...l),e.message=JSON.stringify(e.issues,Bf,2)}},isEmpty:{get(){return e.issues.length===0}}})},vs=ke("ZodError",h1,{Parent:Error}),f1=yp(vs),p1=vp(vs),x1=Md(vs),g1=zd(vs),y1=t2(vs),v1=n2(vs),b1=a2(vs),_1=s2(vs),N1=i2(vs),j1=r2(vs),S1=l2(vs),w1=o2(vs),Rn=ke("ZodType",(e,s)=>(On.init(e,s),Object.assign(e["~standard"],{jsonSchema:{input:bd(e,"input"),output:bd(e,"output")}}),e.toJSONSchema=PE(e,{}),e.def=s,e.type=s.type,Object.defineProperty(e,"_def",{value:s}),e.check=(...l)=>e.clone(ur(s,{checks:[...s.checks??[],...l.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]}),{parent:!0}),e.with=e.check,e.clone=(l,o)=>dr(e,l,o),e.brand=()=>e,e.register=((l,o)=>(l.add(e,o),e)),e.parse=(l,o)=>f1(e,l,o,{callee:e.parse}),e.safeParse=(l,o)=>x1(e,l,o),e.parseAsync=async(l,o)=>p1(e,l,o,{callee:e.parseAsync}),e.safeParseAsync=async(l,o)=>g1(e,l,o),e.spa=e.safeParseAsync,e.encode=(l,o)=>y1(e,l,o),e.decode=(l,o)=>v1(e,l,o),e.encodeAsync=async(l,o)=>b1(e,l,o),e.decodeAsync=async(l,o)=>_1(e,l,o),e.safeEncode=(l,o)=>N1(e,l,o),e.safeDecode=(l,o)=>j1(e,l,o),e.safeEncodeAsync=async(l,o)=>S1(e,l,o),e.safeDecodeAsync=async(l,o)=>w1(e,l,o),e.refine=(l,o)=>e.check(yT(l,o)),e.superRefine=l=>e.check(vT(l)),e.overwrite=l=>e.check(Xl(l)),e.optional=()=>g0(e),e.exactOptional=()=>iT(e),e.nullable=()=>y0(e),e.nullish=()=>g0(y0(e)),e.nonoptional=l=>dT(e,l),e.array=()=>J1(e),e.or=l=>_d([e,l]),e.and=l=>tT(e,l),e.transform=l=>v0(e,aT(l)),e.default=l=>oT(e,l),e.prefault=l=>uT(e,l),e.catch=l=>hT(e,l),e.pipe=l=>v0(e,l),e.readonly=()=>xT(e),e.describe=l=>{const o=e.clone();return nc.add(o,{description:l}),o},Object.defineProperty(e,"description",{get(){return nc.get(e)?.description},configurable:!0}),e.meta=(...l)=>{if(l.length===0)return nc.get(e);const o=e.clone();return nc.add(o,l[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=l=>l(e),e)),Zb=ke("_ZodString",(e,s)=>{bp.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(o,d,m)=>BE(e,o,d);const l=e._zod.bag;e.format=l.format??null,e.minLength=l.minimum??null,e.maxLength=l.maximum??null,e.regex=(...o)=>e.check(NE(...o)),e.includes=(...o)=>e.check(wE(...o)),e.startsWith=(...o)=>e.check(kE(...o)),e.endsWith=(...o)=>e.check(EE(...o)),e.min=(...o)=>e.check(vd(...o)),e.max=(...o)=>e.check(Pb(...o)),e.length=(...o)=>e.check(Ib(...o)),e.nonempty=(...o)=>e.check(vd(1,...o)),e.lowercase=o=>e.check(jE(o)),e.uppercase=o=>e.check(SE(o)),e.trim=()=>e.check(CE()),e.normalize=(...o)=>e.check(TE(...o)),e.toLowerCase=()=>e.check(AE()),e.toUpperCase=()=>e.check(ME()),e.slugify=()=>e.check(zE())}),k1=ke("ZodString",(e,s)=>{bp.init(e,s),Zb.init(e,s),e.email=l=>e.check(Kk(E1,l)),e.url=l=>e.check(Yk(T1,l)),e.jwt=l=>e.check(dE(Z1,l)),e.emoji=l=>e.check(Jk(C1,l)),e.guid=l=>e.check(u0(f0,l)),e.uuid=l=>e.check(Gk(Ku,l)),e.uuidv4=l=>e.check($k(Ku,l)),e.uuidv6=l=>e.check(Qk(Ku,l)),e.uuidv7=l=>e.check(Vk(Ku,l)),e.nanoid=l=>e.check(Xk(A1,l)),e.guid=l=>e.check(u0(f0,l)),e.cuid=l=>e.check(Wk(M1,l)),e.cuid2=l=>e.check(eE(z1,l)),e.ulid=l=>e.check(tE(O1,l)),e.base64=l=>e.check(oE(U1,l)),e.base64url=l=>e.check(cE(F1,l)),e.xid=l=>e.check(nE(R1,l)),e.ksuid=l=>e.check(aE(D1,l)),e.ipv4=l=>e.check(sE(L1,l)),e.ipv6=l=>e.check(iE(P1,l)),e.cidrv4=l=>e.check(rE(I1,l)),e.cidrv6=l=>e.check(lE(B1,l)),e.e164=l=>e.check(uE(q1,l)),e.datetime=l=>e.check(r1(l)),e.date=l=>e.check(o1(l)),e.time=l=>e.check(u1(l)),e.duration=l=>e.check(m1(l))});function ma(e){return Hk(k1,e)}const wn=ke("ZodStringFormat",(e,s)=>{Nn.init(e,s),Zb.init(e,s)}),E1=ke("ZodEmail",(e,s)=>{X2.init(e,s),wn.init(e,s)}),f0=ke("ZodGUID",(e,s)=>{Y2.init(e,s),wn.init(e,s)}),Ku=ke("ZodUUID",(e,s)=>{J2.init(e,s),wn.init(e,s)}),T1=ke("ZodURL",(e,s)=>{W2.init(e,s),wn.init(e,s)}),C1=ke("ZodEmoji",(e,s)=>{ek.init(e,s),wn.init(e,s)}),A1=ke("ZodNanoID",(e,s)=>{tk.init(e,s),wn.init(e,s)}),M1=ke("ZodCUID",(e,s)=>{nk.init(e,s),wn.init(e,s)}),z1=ke("ZodCUID2",(e,s)=>{ak.init(e,s),wn.init(e,s)}),O1=ke("ZodULID",(e,s)=>{sk.init(e,s),wn.init(e,s)}),R1=ke("ZodXID",(e,s)=>{ik.init(e,s),wn.init(e,s)}),D1=ke("ZodKSUID",(e,s)=>{rk.init(e,s),wn.init(e,s)}),L1=ke("ZodIPv4",(e,s)=>{dk.init(e,s),wn.init(e,s)}),P1=ke("ZodIPv6",(e,s)=>{mk.init(e,s),wn.init(e,s)}),I1=ke("ZodCIDRv4",(e,s)=>{hk.init(e,s),wn.init(e,s)}),B1=ke("ZodCIDRv6",(e,s)=>{fk.init(e,s),wn.init(e,s)}),U1=ke("ZodBase64",(e,s)=>{pk.init(e,s),wn.init(e,s)}),F1=ke("ZodBase64URL",(e,s)=>{gk.init(e,s),wn.init(e,s)}),q1=ke("ZodE164",(e,s)=>{yk.init(e,s),wn.init(e,s)}),Z1=ke("ZodJWT",(e,s)=>{bk.init(e,s),wn.init(e,s)}),Hb=ke("ZodNumber",(e,s)=>{Ob.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(o,d,m)=>UE(e,o,d),e.gt=(o,d)=>e.check(m0(o,d)),e.gte=(o,d)=>e.check(Uh(o,d)),e.min=(o,d)=>e.check(Uh(o,d)),e.lt=(o,d)=>e.check(d0(o,d)),e.lte=(o,d)=>e.check(Bh(o,d)),e.max=(o,d)=>e.check(Bh(o,d)),e.int=o=>e.check(p0(o)),e.safe=o=>e.check(p0(o)),e.positive=o=>e.check(m0(0,o)),e.nonnegative=o=>e.check(Uh(0,o)),e.negative=o=>e.check(d0(0,o)),e.nonpositive=o=>e.check(Bh(0,o)),e.multipleOf=(o,d)=>e.check(h0(o,d)),e.step=(o,d)=>e.check(h0(o,d)),e.finite=()=>e;const l=e._zod.bag;e.minValue=Math.max(l.minimum??Number.NEGATIVE_INFINITY,l.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(l.maximum??Number.POSITIVE_INFINITY,l.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(l.format??"").includes("int")||Number.isSafeInteger(l.multipleOf??.5),e.isFinite=!0,e.format=l.format??null}),H1=ke("ZodNumberFormat",(e,s)=>{_k.init(e,s),Hb.init(e,s)});function p0(e){return gE(H1,e)}const K1=ke("ZodBoolean",(e,s)=>{Nk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>FE(e,l,o)});function Rd(e){return yE(K1,e)}const G1=ke("ZodNull",(e,s)=>{jk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>qE(e,l,o)});function Ff(e){return vE(G1,e)}const $1=ke("ZodUnknown",(e,s)=>{Sk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>HE()});function x0(){return bE($1)}const Q1=ke("ZodNever",(e,s)=>{wk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>ZE(e,l,o)});function V1(e){return _E(Q1,e)}const Y1=ke("ZodArray",(e,s)=>{kk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>QE(e,l,o,d),e.element=s.element,e.min=(l,o)=>e.check(vd(l,o)),e.nonempty=l=>e.check(vd(1,l)),e.max=(l,o)=>e.check(Pb(l,o)),e.length=(l,o)=>e.check(Ib(l,o)),e.unwrap=()=>e.element});function J1(e,s){return OE(Y1,e,s)}const X1=ke("ZodObject",(e,s)=>{Tk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>VE(e,l,o,d),an(e,"shape",()=>s.shape),e.keyof=()=>Zf(Object.keys(e._zod.def.shape)),e.catchall=l=>e.clone({...e._zod.def,catchall:l}),e.passthrough=()=>e.clone({...e._zod.def,catchall:x0()}),e.loose=()=>e.clone({...e._zod.def,catchall:x0()}),e.strict=()=>e.clone({...e._zod.def,catchall:V1()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=l=>Gw(e,l),e.safeExtend=l=>$w(e,l),e.merge=l=>Qw(e,l),e.pick=l=>Hw(e,l),e.omit=l=>Kw(e,l),e.partial=(...l)=>Vw(Kb,e,l[0]),e.required=(...l)=>Yw(Gb,e,l[0])});function Xa(e,s){const l={type:"object",shape:e??{},...nt(s)};return new X1(l)}const W1=ke("ZodUnion",(e,s)=>{Ck.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>YE(e,l,o,d),e.options=s.options});function _d(e,s){return new W1({type:"union",options:e,...nt(s)})}const eT=ke("ZodIntersection",(e,s)=>{Ak.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>JE(e,l,o,d)});function tT(e,s){return new eT({type:"intersection",left:e,right:s})}const qf=ke("ZodEnum",(e,s)=>{Mk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(o,d,m)=>KE(e,o,d),e.enum=s.entries,e.options=Object.values(s.entries);const l=new Set(Object.keys(s.entries));e.extract=(o,d)=>{const m={};for(const f of o)if(l.has(f))m[f]=s.entries[f];else throw new Error(`Key ${f} not found in enum`);return new qf({...s,checks:[],...nt(d),entries:m})},e.exclude=(o,d)=>{const m={...s.entries};for(const f of o)if(l.has(f))delete m[f];else throw new Error(`Key ${f} not found in enum`);return new qf({...s,checks:[],...nt(d),entries:m})}});function Zf(e,s){const l=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new qf({type:"enum",entries:l,...nt(s)})}const nT=ke("ZodTransform",(e,s)=>{zk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>$E(e,l),e._zod.parse=(l,o)=>{if(o.direction==="backward")throw new yb(e.constructor.name);l.addIssue=m=>{if(typeof m=="string")l.issues.push(cc(m,l.value,s));else{const f=m;f.fatal&&(f.continue=!1),f.code??(f.code="custom"),f.input??(f.input=l.value),f.inst??(f.inst=e),l.issues.push(cc(f))}};const d=s.transform(l.value,l);return d instanceof Promise?d.then(m=>(l.value=m,l)):(l.value=d,l)}});function aT(e){return new nT({type:"transform",transform:e})}const Kb=ke("ZodOptional",(e,s)=>{Lb.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>qb(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function g0(e){return new Kb({type:"optional",innerType:e})}const sT=ke("ZodExactOptional",(e,s)=>{Ok.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>qb(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function iT(e){return new sT({type:"optional",innerType:e})}const rT=ke("ZodNullable",(e,s)=>{Rk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>XE(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function y0(e){return new rT({type:"nullable",innerType:e})}const lT=ke("ZodDefault",(e,s)=>{Dk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>e1(e,l,o,d),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function oT(e,s){return new lT({type:"default",innerType:e,get defaultValue(){return typeof s=="function"?s():_b(s)}})}const cT=ke("ZodPrefault",(e,s)=>{Lk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>t1(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function uT(e,s){return new cT({type:"prefault",innerType:e,get defaultValue(){return typeof s=="function"?s():_b(s)}})}const Gb=ke("ZodNonOptional",(e,s)=>{Pk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>WE(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function dT(e,s){return new Gb({type:"nonoptional",innerType:e,...nt(s)})}const mT=ke("ZodCatch",(e,s)=>{Ik.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>n1(e,l,o,d),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function hT(e,s){return new mT({type:"catch",innerType:e,catchValue:typeof s=="function"?s:()=>s})}const fT=ke("ZodPipe",(e,s)=>{Bk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>a1(e,l,o,d),e.in=s.in,e.out=s.out});function v0(e,s){return new fT({type:"pipe",in:e,out:s})}const pT=ke("ZodReadonly",(e,s)=>{Uk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>s1(e,l,o,d),e.unwrap=()=>e._zod.def.innerType});function xT(e){return new pT({type:"readonly",innerType:e})}const gT=ke("ZodCustom",(e,s)=>{Fk.init(e,s),Rn.init(e,s),e._zod.processJSONSchema=(l,o,d)=>GE(e,l)});function yT(e,s={}){return RE(gT,e,s)}function vT(e){return DE(e)}function Kn(e){return xE(Hb,e)}or({jitless:!0});function $b(e,s){return function(){return e.apply(s,arguments)}}const{toString:bT}=Object.prototype,{getPrototypeOf:_p}=Object,{iterator:Dd,toStringTag:Qb}=Symbol,Ld=(e=>s=>{const l=bT.call(s);return e[l]||(e[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),Ms=e=>(e=e.toLowerCase(),s=>Ld(s)===e),Pd=e=>s=>typeof s===e,{isArray:Wl}=Array,Gl=Pd("undefined");function pc(e){return e!==null&&!Gl(e)&&e.constructor!==null&&!Gl(e.constructor)&&Ia(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Vb=Ms("ArrayBuffer");function _T(e){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(e):s=e&&e.buffer&&Vb(e.buffer),s}const NT=Pd("string"),Ia=Pd("function"),Yb=Pd("number"),xc=e=>e!==null&&typeof e=="object",jT=e=>e===!0||e===!1,od=e=>{if(Ld(e)!=="object")return!1;const s=_p(e);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Qb in e)&&!(Dd in e)},ST=e=>{if(!xc(e)||pc(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},wT=Ms("Date"),kT=Ms("File"),ET=Ms("Blob"),TT=Ms("FileList"),CT=e=>xc(e)&&Ia(e.pipe),AT=e=>{let s;return e&&(typeof FormData=="function"&&e instanceof FormData||Ia(e.append)&&((s=Ld(e))==="formdata"||s==="object"&&Ia(e.toString)&&e.toString()==="[object FormData]"))},MT=Ms("URLSearchParams"),[zT,OT,RT,DT]=["ReadableStream","Request","Response","Headers"].map(Ms),LT=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function gc(e,s,{allOwnKeys:l=!1}={}){if(e===null||typeof e>"u")return;let o,d;if(typeof e!="object"&&(e=[e]),Wl(e))for(o=0,d=e.length;o<d;o++)s.call(null,e[o],o,e);else{if(pc(e))return;const m=l?Object.getOwnPropertyNames(e):Object.keys(e),f=m.length;let g;for(o=0;o<f;o++)g=m[o],s.call(null,e[g],g,e)}}function Jb(e,s){if(pc(e))return null;s=s.toLowerCase();const l=Object.keys(e);let o=l.length,d;for(;o-- >0;)if(d=l[o],s===d.toLowerCase())return d;return null}const $r=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Xb=e=>!Gl(e)&&e!==$r;function Hf(){const{caseless:e,skipUndefined:s}=Xb(this)&&this||{},l={},o=(d,m)=>{const f=e&&Jb(l,m)||m;od(l[f])&&od(d)?l[f]=Hf(l[f],d):od(d)?l[f]=Hf({},d):Wl(d)?l[f]=d.slice():(!s||!Gl(d))&&(l[f]=d)};for(let d=0,m=arguments.length;d<m;d++)arguments[d]&&gc(arguments[d],o);return l}const PT=(e,s,l,{allOwnKeys:o}={})=>(gc(s,(d,m)=>{l&&Ia(d)?Object.defineProperty(e,m,{value:$b(d,l),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,m,{value:d,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:o}),e),IT=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),BT=(e,s,l,o)=>{e.prototype=Object.create(s.prototype,o),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:s.prototype}),l&&Object.assign(e.prototype,l)},UT=(e,s,l,o)=>{let d,m,f;const g={};if(s=s||{},e==null)return s;do{for(d=Object.getOwnPropertyNames(e),m=d.length;m-- >0;)f=d[m],(!o||o(f,e,s))&&!g[f]&&(s[f]=e[f],g[f]=!0);e=l!==!1&&_p(e)}while(e&&(!l||l(e,s))&&e!==Object.prototype);return s},FT=(e,s,l)=>{e=String(e),(l===void 0||l>e.length)&&(l=e.length),l-=s.length;const o=e.indexOf(s,l);return o!==-1&&o===l},qT=e=>{if(!e)return null;if(Wl(e))return e;let s=e.length;if(!Yb(s))return null;const l=new Array(s);for(;s-- >0;)l[s]=e[s];return l},ZT=(e=>s=>e&&s instanceof e)(typeof Uint8Array<"u"&&_p(Uint8Array)),HT=(e,s)=>{const o=(e&&e[Dd]).call(e);let d;for(;(d=o.next())&&!d.done;){const m=d.value;s.call(e,m[0],m[1])}},KT=(e,s)=>{let l;const o=[];for(;(l=e.exec(s))!==null;)o.push(l);return o},GT=Ms("HTMLFormElement"),$T=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(l,o,d){return o.toUpperCase()+d}),b0=(({hasOwnProperty:e})=>(s,l)=>e.call(s,l))(Object.prototype),QT=Ms("RegExp"),Wb=(e,s)=>{const l=Object.getOwnPropertyDescriptors(e),o={};gc(l,(d,m)=>{let f;(f=s(d,m,e))!==!1&&(o[m]=f||d)}),Object.defineProperties(e,o)},VT=e=>{Wb(e,(s,l)=>{if(Ia(e)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const o=e[l];if(Ia(o)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},YT=(e,s)=>{const l={},o=d=>{d.forEach(m=>{l[m]=!0})};return Wl(e)?o(e):o(String(e).split(s)),l},JT=()=>{},XT=(e,s)=>e!=null&&Number.isFinite(e=+e)?e:s;function WT(e){return!!(e&&Ia(e.append)&&e[Qb]==="FormData"&&e[Dd])}const eC=e=>{const s=new Array(10),l=(o,d)=>{if(xc(o)){if(s.indexOf(o)>=0)return;if(pc(o))return o;if(!("toJSON"in o)){s[d]=o;const m=Wl(o)?[]:{};return gc(o,(f,g)=>{const v=l(f,d+1);!Gl(v)&&(m[g]=v)}),s[d]=void 0,m}}return o};return l(e,0)},tC=Ms("AsyncFunction"),nC=e=>e&&(xc(e)||Ia(e))&&Ia(e.then)&&Ia(e.catch),e_=((e,s)=>e?setImmediate:s?((l,o)=>($r.addEventListener("message",({source:d,data:m})=>{d===$r&&m===l&&o.length&&o.shift()()},!1),d=>{o.push(d),$r.postMessage(l,"*")}))(`axios@${Math.random()}`,[]):l=>setTimeout(l))(typeof setImmediate=="function",Ia($r.postMessage)),aC=typeof queueMicrotask<"u"?queueMicrotask.bind($r):typeof process<"u"&&process.nextTick||e_,sC=e=>e!=null&&Ia(e[Dd]),ve={isArray:Wl,isArrayBuffer:Vb,isBuffer:pc,isFormData:AT,isArrayBufferView:_T,isString:NT,isNumber:Yb,isBoolean:jT,isObject:xc,isPlainObject:od,isEmptyObject:ST,isReadableStream:zT,isRequest:OT,isResponse:RT,isHeaders:DT,isUndefined:Gl,isDate:wT,isFile:kT,isBlob:ET,isRegExp:QT,isFunction:Ia,isStream:CT,isURLSearchParams:MT,isTypedArray:ZT,isFileList:TT,forEach:gc,merge:Hf,extend:PT,trim:LT,stripBOM:IT,inherits:BT,toFlatObject:UT,kindOf:Ld,kindOfTest:Ms,endsWith:FT,toArray:qT,forEachEntry:HT,matchAll:KT,isHTMLForm:GT,hasOwnProperty:b0,hasOwnProp:b0,reduceDescriptors:Wb,freezeMethods:VT,toObjectSet:YT,toCamelCase:$T,noop:JT,toFiniteNumber:XT,findKey:Jb,global:$r,isContextDefined:Xb,isSpecCompliantForm:WT,toJSONObject:eC,isAsyncFn:tC,isThenable:nC,setImmediate:e_,asap:aC,isIterable:sC};let ct=class t_ extends Error{static from(s,l,o,d,m,f){const g=new t_(s.message,l||s.code,o,d,m);return g.cause=s,g.name=s.name,f&&Object.assign(g,f),g}constructor(s,l,o,d,m){super(s),this.name="AxiosError",this.isAxiosError=!0,l&&(this.code=l),o&&(this.config=o),d&&(this.request=d),m&&(this.response=m,this.status=m.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ve.toJSONObject(this.config),code:this.code,status:this.status}}};ct.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";ct.ERR_BAD_OPTION="ERR_BAD_OPTION";ct.ECONNABORTED="ECONNABORTED";ct.ETIMEDOUT="ETIMEDOUT";ct.ERR_NETWORK="ERR_NETWORK";ct.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";ct.ERR_DEPRECATED="ERR_DEPRECATED";ct.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";ct.ERR_BAD_REQUEST="ERR_BAD_REQUEST";ct.ERR_CANCELED="ERR_CANCELED";ct.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";ct.ERR_INVALID_URL="ERR_INVALID_URL";const iC=null;function Kf(e){return ve.isPlainObject(e)||ve.isArray(e)}function n_(e){return ve.endsWith(e,"[]")?e.slice(0,-2):e}function _0(e,s,l){return e?e.concat(s).map(function(d,m){return d=n_(d),!l&&m?"["+d+"]":d}).join(l?".":""):s}function rC(e){return ve.isArray(e)&&!e.some(Kf)}const lC=ve.toFlatObject(ve,{},null,function(s){return/^is[A-Z]/.test(s)});function Id(e,s,l){if(!ve.isObject(e))throw new TypeError("target must be an object");s=s||new FormData,l=ve.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,R){return!ve.isUndefined(R[E])});const o=l.metaTokens,d=l.visitor||S,m=l.dots,f=l.indexes,v=(l.Blob||typeof Blob<"u"&&Blob)&&ve.isSpecCompliantForm(s);if(!ve.isFunction(d))throw new TypeError("visitor must be a function");function _(T){if(T===null)return"";if(ve.isDate(T))return T.toISOString();if(ve.isBoolean(T))return T.toString();if(!v&&ve.isBlob(T))throw new ct("Blob is not supported. Use a Buffer instead.");return ve.isArrayBuffer(T)||ve.isTypedArray(T)?v&&typeof Blob=="function"?new Blob([T]):Buffer.from(T):T}function S(T,E,R){let B=T;if(T&&!R&&typeof T=="object"){if(ve.endsWith(E,"{}"))E=o?E:E.slice(0,-2),T=JSON.stringify(T);else if(ve.isArray(T)&&rC(T)||(ve.isFileList(T)||ve.endsWith(E,"[]"))&&(B=ve.toArray(T)))return E=n_(E),B.forEach(function(z,Z){!(ve.isUndefined(z)||z===null)&&s.append(f===!0?_0([E],Z,m):f===null?E:E+"[]",_(z))}),!1}return Kf(T)?!0:(s.append(_0(R,E,m),_(T)),!1)}const w=[],k=Object.assign(lC,{defaultVisitor:S,convertValue:_,isVisitable:Kf});function O(T,E){if(!ve.isUndefined(T)){if(w.indexOf(T)!==-1)throw Error("Circular reference detected in "+E.join("."));w.push(T),ve.forEach(T,function(B,A){(!(ve.isUndefined(B)||B===null)&&d.call(s,B,ve.isString(A)?A.trim():A,E,k))===!0&&O(B,E?E.concat(A):[A])}),w.pop()}}if(!ve.isObject(e))throw new TypeError("data must be an object");return O(e),s}function N0(e){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return s[o]})}function Np(e,s){this._pairs=[],e&&Id(e,this,s)}const a_=Np.prototype;a_.append=function(s,l){this._pairs.push([s,l])};a_.toString=function(s){const l=s?function(o){return s.call(this,o,N0)}:N0;return this._pairs.map(function(d){return l(d[0])+"="+l(d[1])},"").join("&")};function oC(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function s_(e,s,l){if(!s)return e;const o=l&&l.encode||oC,d=ve.isFunction(l)?{serialize:l}:l,m=d&&d.serialize;let f;if(m?f=m(s,d):f=ve.isURLSearchParams(s)?s.toString():new Np(s,d).toString(o),f){const g=e.indexOf("#");g!==-1&&(e=e.slice(0,g)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class j0{constructor(){this.handlers=[]}use(s,l,o){return this.handlers.push({fulfilled:s,rejected:l,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){ve.forEach(this.handlers,function(o){o!==null&&s(o)})}}const i_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cC=typeof URLSearchParams<"u"?URLSearchParams:Np,uC=typeof FormData<"u"?FormData:null,dC=typeof Blob<"u"?Blob:null,mC={isBrowser:!0,classes:{URLSearchParams:cC,FormData:uC,Blob:dC},protocols:["http","https","file","blob","url","data"]},jp=typeof window<"u"&&typeof document<"u",Gf=typeof navigator=="object"&&navigator||void 0,hC=jp&&(!Gf||["ReactNative","NativeScript","NS"].indexOf(Gf.product)<0),fC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",pC=jp&&window.location.href||"http://localhost",xC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:jp,hasStandardBrowserEnv:hC,hasStandardBrowserWebWorkerEnv:fC,navigator:Gf,origin:pC},Symbol.toStringTag,{value:"Module"})),ya={...xC,...mC};function gC(e,s){return Id(e,new ya.classes.URLSearchParams,{visitor:function(l,o,d,m){return ya.isNode&&ve.isBuffer(l)?(this.append(o,l.toString("base64")),!1):m.defaultVisitor.apply(this,arguments)},...s})}function yC(e){return ve.matchAll(/\w+|\[(\w*)]/g,e).map(s=>s[0]==="[]"?"":s[1]||s[0])}function vC(e){const s={},l=Object.keys(e);let o;const d=l.length;let m;for(o=0;o<d;o++)m=l[o],s[m]=e[m];return s}function r_(e){function s(l,o,d,m){let f=l[m++];if(f==="__proto__")return!0;const g=Number.isFinite(+f),v=m>=l.length;return f=!f&&ve.isArray(d)?d.length:f,v?(ve.hasOwnProp(d,f)?d[f]=[d[f],o]:d[f]=o,!g):((!d[f]||!ve.isObject(d[f]))&&(d[f]=[]),s(l,o,d[f],m)&&ve.isArray(d[f])&&(d[f]=vC(d[f])),!g)}if(ve.isFormData(e)&&ve.isFunction(e.entries)){const l={};return ve.forEachEntry(e,(o,d)=>{s(yC(o),d,l,0)}),l}return null}function bC(e,s,l){if(ve.isString(e))try{return(s||JSON.parse)(e),ve.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(l||JSON.stringify)(e)}const yc={transitional:i_,adapter:["xhr","http","fetch"],transformRequest:[function(s,l){const o=l.getContentType()||"",d=o.indexOf("application/json")>-1,m=ve.isObject(s);if(m&&ve.isHTMLForm(s)&&(s=new FormData(s)),ve.isFormData(s))return d?JSON.stringify(r_(s)):s;if(ve.isArrayBuffer(s)||ve.isBuffer(s)||ve.isStream(s)||ve.isFile(s)||ve.isBlob(s)||ve.isReadableStream(s))return s;if(ve.isArrayBufferView(s))return s.buffer;if(ve.isURLSearchParams(s))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let g;if(m){if(o.indexOf("application/x-www-form-urlencoded")>-1)return gC(s,this.formSerializer).toString();if((g=ve.isFileList(s))||o.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Id(g?{"files[]":s}:s,v&&new v,this.formSerializer)}}return m||d?(l.setContentType("application/json",!1),bC(s)):s}],transformResponse:[function(s){const l=this.transitional||yc.transitional,o=l&&l.forcedJSONParsing,d=this.responseType==="json";if(ve.isResponse(s)||ve.isReadableStream(s))return s;if(s&&ve.isString(s)&&(o&&!this.responseType||d)){const f=!(l&&l.silentJSONParsing)&&d;try{return JSON.parse(s,this.parseReviver)}catch(g){if(f)throw g.name==="SyntaxError"?ct.from(g,ct.ERR_BAD_RESPONSE,this,null,this.response):g}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ya.classes.FormData,Blob:ya.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ve.forEach(["delete","get","head","post","put","patch"],e=>{yc.headers[e]={}});const _C=ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),NC=e=>{const s={};let l,o,d;return e&&e.split(`
`).forEach(function(f){d=f.indexOf(":"),l=f.substring(0,d).trim().toLowerCase(),o=f.substring(d+1).trim(),!(!l||s[l]&&_C[l])&&(l==="set-cookie"?s[l]?s[l].push(o):s[l]=[o]:s[l]=s[l]?s[l]+", "+o:o)}),s},S0=Symbol("internals");function Wo(e){return e&&String(e).trim().toLowerCase()}function cd(e){return e===!1||e==null?e:ve.isArray(e)?e.map(cd):String(e)}function jC(e){const s=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=l.exec(e);)s[o[1]]=o[2];return s}const SC=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Fh(e,s,l,o,d){if(ve.isFunction(o))return o.call(this,s,l);if(d&&(s=l),!!ve.isString(s)){if(ve.isString(o))return s.indexOf(o)!==-1;if(ve.isRegExp(o))return o.test(s)}}function wC(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,l,o)=>l.toUpperCase()+o)}function kC(e,s){const l=ve.toCamelCase(" "+s);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+l,{value:function(d,m,f){return this[o].call(this,s,d,m,f)},configurable:!0})})}let Ba=class{constructor(s){s&&this.set(s)}set(s,l,o){const d=this;function m(g,v,_){const S=Wo(v);if(!S)throw new Error("header name must be a non-empty string");const w=ve.findKey(d,S);(!w||d[w]===void 0||_===!0||_===void 0&&d[w]!==!1)&&(d[w||v]=cd(g))}const f=(g,v)=>ve.forEach(g,(_,S)=>m(_,S,v));if(ve.isPlainObject(s)||s instanceof this.constructor)f(s,l);else if(ve.isString(s)&&(s=s.trim())&&!SC(s))f(NC(s),l);else if(ve.isObject(s)&&ve.isIterable(s)){let g={},v,_;for(const S of s){if(!ve.isArray(S))throw TypeError("Object iterator must return a key-value pair");g[_=S[0]]=(v=g[_])?ve.isArray(v)?[...v,S[1]]:[v,S[1]]:S[1]}f(g,l)}else s!=null&&m(l,s,o);return this}get(s,l){if(s=Wo(s),s){const o=ve.findKey(this,s);if(o){const d=this[o];if(!l)return d;if(l===!0)return jC(d);if(ve.isFunction(l))return l.call(this,d,o);if(ve.isRegExp(l))return l.exec(d);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,l){if(s=Wo(s),s){const o=ve.findKey(this,s);return!!(o&&this[o]!==void 0&&(!l||Fh(this,this[o],o,l)))}return!1}delete(s,l){const o=this;let d=!1;function m(f){if(f=Wo(f),f){const g=ve.findKey(o,f);g&&(!l||Fh(o,o[g],g,l))&&(delete o[g],d=!0)}}return ve.isArray(s)?s.forEach(m):m(s),d}clear(s){const l=Object.keys(this);let o=l.length,d=!1;for(;o--;){const m=l[o];(!s||Fh(this,this[m],m,s,!0))&&(delete this[m],d=!0)}return d}normalize(s){const l=this,o={};return ve.forEach(this,(d,m)=>{const f=ve.findKey(o,m);if(f){l[f]=cd(d),delete l[m];return}const g=s?wC(m):String(m).trim();g!==m&&delete l[m],l[g]=cd(d),o[g]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const l=Object.create(null);return ve.forEach(this,(o,d)=>{o!=null&&o!==!1&&(l[d]=s&&ve.isArray(o)?o.join(", "):o)}),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,l])=>s+": "+l).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...l){const o=new this(s);return l.forEach(d=>o.set(d)),o}static accessor(s){const o=(this[S0]=this[S0]={accessors:{}}).accessors,d=this.prototype;function m(f){const g=Wo(f);o[g]||(kC(d,f),o[g]=!0)}return ve.isArray(s)?s.forEach(m):m(s),this}};Ba.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ve.reduceDescriptors(Ba.prototype,({value:e},s)=>{let l=s[0].toUpperCase()+s.slice(1);return{get:()=>e,set(o){this[l]=o}}});ve.freezeMethods(Ba);function qh(e,s){const l=this||yc,o=s||l,d=Ba.from(o.headers);let m=o.data;return ve.forEach(e,function(g){m=g.call(l,m,d.normalize(),s?s.status:void 0)}),d.normalize(),m}function l_(e){return!!(e&&e.__CANCEL__)}let vc=class extends ct{constructor(s,l,o){super(s??"canceled",ct.ERR_CANCELED,l,o),this.name="CanceledError",this.__CANCEL__=!0}};function o_(e,s,l){const o=l.config.validateStatus;!l.status||!o||o(l.status)?e(l):s(new ct("Request failed with status code "+l.status,[ct.ERR_BAD_REQUEST,ct.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}function EC(e){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return s&&s[1]||""}function TC(e,s){e=e||10;const l=new Array(e),o=new Array(e);let d=0,m=0,f;return s=s!==void 0?s:1e3,function(v){const _=Date.now(),S=o[m];f||(f=_),l[d]=v,o[d]=_;let w=m,k=0;for(;w!==d;)k+=l[w++],w=w%e;if(d=(d+1)%e,d===m&&(m=(m+1)%e),_-f<s)return;const O=S&&_-S;return O?Math.round(k*1e3/O):void 0}}function CC(e,s){let l=0,o=1e3/s,d,m;const f=(_,S=Date.now())=>{l=S,d=null,m&&(clearTimeout(m),m=null),e(..._)};return[(..._)=>{const S=Date.now(),w=S-l;w>=o?f(_,S):(d=_,m||(m=setTimeout(()=>{m=null,f(d)},o-w)))},()=>d&&f(d)]}const Nd=(e,s,l=3)=>{let o=0;const d=TC(50,250);return CC(m=>{const f=m.loaded,g=m.lengthComputable?m.total:void 0,v=f-o,_=d(v),S=f<=g;o=f;const w={loaded:f,total:g,progress:g?f/g:void 0,bytes:v,rate:_||void 0,estimated:_&&g&&S?(g-f)/_:void 0,event:m,lengthComputable:g!=null,[s?"download":"upload"]:!0};e(w)},l)},w0=(e,s)=>{const l=e!=null;return[o=>s[0]({lengthComputable:l,total:e,loaded:o}),s[1]]},k0=e=>(...s)=>ve.asap(()=>e(...s)),AC=ya.hasStandardBrowserEnv?((e,s)=>l=>(l=new URL(l,ya.origin),e.protocol===l.protocol&&e.host===l.host&&(s||e.port===l.port)))(new URL(ya.origin),ya.navigator&&/(msie|trident)/i.test(ya.navigator.userAgent)):()=>!0,MC=ya.hasStandardBrowserEnv?{write(e,s,l,o,d,m,f){if(typeof document>"u")return;const g=[`${e}=${encodeURIComponent(s)}`];ve.isNumber(l)&&g.push(`expires=${new Date(l).toUTCString()}`),ve.isString(o)&&g.push(`path=${o}`),ve.isString(d)&&g.push(`domain=${d}`),m===!0&&g.push("secure"),ve.isString(f)&&g.push(`SameSite=${f}`),document.cookie=g.join("; ")},read(e){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function zC(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function OC(e,s){return s?e.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):e}function c_(e,s,l){let o=!zC(s);return e&&(o||l==!1)?OC(e,s):s}const E0=e=>e instanceof Ba?{...e}:e;function Xr(e,s){s=s||{};const l={};function o(_,S,w,k){return ve.isPlainObject(_)&&ve.isPlainObject(S)?ve.merge.call({caseless:k},_,S):ve.isPlainObject(S)?ve.merge({},S):ve.isArray(S)?S.slice():S}function d(_,S,w,k){if(ve.isUndefined(S)){if(!ve.isUndefined(_))return o(void 0,_,w,k)}else return o(_,S,w,k)}function m(_,S){if(!ve.isUndefined(S))return o(void 0,S)}function f(_,S){if(ve.isUndefined(S)){if(!ve.isUndefined(_))return o(void 0,_)}else return o(void 0,S)}function g(_,S,w){if(w in s)return o(_,S);if(w in e)return o(void 0,_)}const v={url:m,method:m,data:m,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:g,headers:(_,S,w)=>d(E0(_),E0(S),w,!0)};return ve.forEach(Object.keys({...e,...s}),function(S){const w=v[S]||d,k=w(e[S],s[S],S);ve.isUndefined(k)&&w!==g||(l[S]=k)}),l}const u_=e=>{const s=Xr({},e);let{data:l,withXSRFToken:o,xsrfHeaderName:d,xsrfCookieName:m,headers:f,auth:g}=s;if(s.headers=f=Ba.from(f),s.url=s_(c_(s.baseURL,s.url,s.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&f.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),ve.isFormData(l)){if(ya.hasStandardBrowserEnv||ya.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(ve.isFunction(l.getHeaders)){const v=l.getHeaders(),_=["content-type","content-length"];Object.entries(v).forEach(([S,w])=>{_.includes(S.toLowerCase())&&f.set(S,w)})}}if(ya.hasStandardBrowserEnv&&(o&&ve.isFunction(o)&&(o=o(s)),o||o!==!1&&AC(s.url))){const v=d&&m&&MC.read(m);v&&f.set(d,v)}return s},RC=typeof XMLHttpRequest<"u",DC=RC&&function(e){return new Promise(function(l,o){const d=u_(e);let m=d.data;const f=Ba.from(d.headers).normalize();let{responseType:g,onUploadProgress:v,onDownloadProgress:_}=d,S,w,k,O,T;function E(){O&&O(),T&&T(),d.cancelToken&&d.cancelToken.unsubscribe(S),d.signal&&d.signal.removeEventListener("abort",S)}let R=new XMLHttpRequest;R.open(d.method.toUpperCase(),d.url,!0),R.timeout=d.timeout;function B(){if(!R)return;const z=Ba.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),I={data:!g||g==="text"||g==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:z,config:e,request:R};o_(function(H){l(H),E()},function(H){o(H),E()},I),R=null}"onloadend"in R?R.onloadend=B:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(B)},R.onabort=function(){R&&(o(new ct("Request aborted",ct.ECONNABORTED,e,R)),R=null)},R.onerror=function(Z){const I=Z&&Z.message?Z.message:"Network Error",V=new ct(I,ct.ERR_NETWORK,e,R);V.event=Z||null,o(V),R=null},R.ontimeout=function(){let Z=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded";const I=d.transitional||i_;d.timeoutErrorMessage&&(Z=d.timeoutErrorMessage),o(new ct(Z,I.clarifyTimeoutError?ct.ETIMEDOUT:ct.ECONNABORTED,e,R)),R=null},m===void 0&&f.setContentType(null),"setRequestHeader"in R&&ve.forEach(f.toJSON(),function(Z,I){R.setRequestHeader(I,Z)}),ve.isUndefined(d.withCredentials)||(R.withCredentials=!!d.withCredentials),g&&g!=="json"&&(R.responseType=d.responseType),_&&([k,T]=Nd(_,!0),R.addEventListener("progress",k)),v&&R.upload&&([w,O]=Nd(v),R.upload.addEventListener("progress",w),R.upload.addEventListener("loadend",O)),(d.cancelToken||d.signal)&&(S=z=>{R&&(o(!z||z.type?new vc(null,e,R):z),R.abort(),R=null)},d.cancelToken&&d.cancelToken.subscribe(S),d.signal&&(d.signal.aborted?S():d.signal.addEventListener("abort",S)));const A=EC(d.url);if(A&&ya.protocols.indexOf(A)===-1){o(new ct("Unsupported protocol "+A+":",ct.ERR_BAD_REQUEST,e));return}R.send(m||null)})},LC=(e,s)=>{const{length:l}=e=e?e.filter(Boolean):[];if(s||l){let o=new AbortController,d;const m=function(_){if(!d){d=!0,g();const S=_ instanceof Error?_:this.reason;o.abort(S instanceof ct?S:new vc(S instanceof Error?S.message:S))}};let f=s&&setTimeout(()=>{f=null,m(new ct(`timeout of ${s}ms exceeded`,ct.ETIMEDOUT))},s);const g=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(_=>{_.unsubscribe?_.unsubscribe(m):_.removeEventListener("abort",m)}),e=null)};e.forEach(_=>_.addEventListener("abort",m));const{signal:v}=o;return v.unsubscribe=()=>ve.asap(g),v}},PC=function*(e,s){let l=e.byteLength;if(l<s){yield e;return}let o=0,d;for(;o<l;)d=o+s,yield e.slice(o,d),o=d},IC=async function*(e,s){for await(const l of BC(e))yield*PC(l,s)},BC=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const s=e.getReader();try{for(;;){const{done:l,value:o}=await s.read();if(l)break;yield o}}finally{await s.cancel()}},T0=(e,s,l,o)=>{const d=IC(e,s);let m=0,f,g=v=>{f||(f=!0,o&&o(v))};return new ReadableStream({async pull(v){try{const{done:_,value:S}=await d.next();if(_){g(),v.close();return}let w=S.byteLength;if(l){let k=m+=w;l(k)}v.enqueue(new Uint8Array(S))}catch(_){throw g(_),_}},cancel(v){return g(v),d.return()}},{highWaterMark:2})},C0=64*1024,{isFunction:Gu}=ve,UC=(({Request:e,Response:s})=>({Request:e,Response:s}))(ve.global),{ReadableStream:A0,TextEncoder:M0}=ve.global,z0=(e,...s)=>{try{return!!e(...s)}catch{return!1}},FC=e=>{e=ve.merge.call({skipUndefined:!0},UC,e);const{fetch:s,Request:l,Response:o}=e,d=s?Gu(s):typeof fetch=="function",m=Gu(l),f=Gu(o);if(!d)return!1;const g=d&&Gu(A0),v=d&&(typeof M0=="function"?(T=>E=>T.encode(E))(new M0):async T=>new Uint8Array(await new l(T).arrayBuffer())),_=m&&g&&z0(()=>{let T=!1;const E=new l(ya.origin,{body:new A0,method:"POST",get duplex(){return T=!0,"half"}}).headers.has("Content-Type");return T&&!E}),S=f&&g&&z0(()=>ve.isReadableStream(new o("").body)),w={stream:S&&(T=>T.body)};d&&["text","arrayBuffer","blob","formData","stream"].forEach(T=>{!w[T]&&(w[T]=(E,R)=>{let B=E&&E[T];if(B)return B.call(E);throw new ct(`Response type '${T}' is not supported`,ct.ERR_NOT_SUPPORT,R)})});const k=async T=>{if(T==null)return 0;if(ve.isBlob(T))return T.size;if(ve.isSpecCompliantForm(T))return(await new l(ya.origin,{method:"POST",body:T}).arrayBuffer()).byteLength;if(ve.isArrayBufferView(T)||ve.isArrayBuffer(T))return T.byteLength;if(ve.isURLSearchParams(T)&&(T=T+""),ve.isString(T))return(await v(T)).byteLength},O=async(T,E)=>{const R=ve.toFiniteNumber(T.getContentLength());return R??k(E)};return async T=>{let{url:E,method:R,data:B,signal:A,cancelToken:z,timeout:Z,onDownloadProgress:I,onUploadProgress:V,responseType:H,headers:ee,withCredentials:X="same-origin",fetchOptions:P}=u_(T),te=s||fetch;H=H?(H+"").toLowerCase():"text";let oe=LC([A,z&&z.toAbortSignal()],Z),je=null;const ue=oe&&oe.unsubscribe&&(()=>{oe.unsubscribe()});let ce;try{if(V&&_&&R!=="get"&&R!=="head"&&(ce=await O(ee,B))!==0){let D=new l(E,{method:"POST",body:B,duplex:"half"}),ae;if(ve.isFormData(B)&&(ae=D.headers.get("content-type"))&&ee.setContentType(ae),D.body){const[F,me]=w0(ce,Nd(k0(V)));B=T0(D.body,C0,F,me)}}ve.isString(X)||(X=X?"include":"omit");const Q=m&&"credentials"in l.prototype,$={...P,signal:oe,method:R.toUpperCase(),headers:ee.normalize().toJSON(),body:B,duplex:"half",credentials:Q?X:void 0};je=m&&new l(E,$);let ie=await(m?te(je,P):te(E,$));const Ae=S&&(H==="stream"||H==="response");if(S&&(I||Ae&&ue)){const D={};["status","statusText","headers"].forEach(de=>{D[de]=ie[de]});const ae=ve.toFiniteNumber(ie.headers.get("content-length")),[F,me]=I&&w0(ae,Nd(k0(I),!0))||[];ie=new o(T0(ie.body,C0,F,()=>{me&&me(),ue&&ue()}),D)}H=H||"text";let _e=await w[ve.findKey(w,H)||"text"](ie,T);return!Ae&&ue&&ue(),await new Promise((D,ae)=>{o_(D,ae,{data:_e,headers:Ba.from(ie.headers),status:ie.status,statusText:ie.statusText,config:T,request:je})})}catch(Q){throw ue&&ue(),Q&&Q.name==="TypeError"&&/Load failed|fetch/i.test(Q.message)?Object.assign(new ct("Network Error",ct.ERR_NETWORK,T,je),{cause:Q.cause||Q}):ct.from(Q,Q&&Q.code,T,je)}}},qC=new Map,d_=e=>{let s=e&&e.env||{};const{fetch:l,Request:o,Response:d}=s,m=[o,d,l];let f=m.length,g=f,v,_,S=qC;for(;g--;)v=m[g],_=S.get(v),_===void 0&&S.set(v,_=g?new Map:FC(s)),S=_;return _};d_();const Sp={http:iC,xhr:DC,fetch:{get:d_}};ve.forEach(Sp,(e,s)=>{if(e){try{Object.defineProperty(e,"name",{value:s})}catch{}Object.defineProperty(e,"adapterName",{value:s})}});const O0=e=>`- ${e}`,ZC=e=>ve.isFunction(e)||e===null||e===!1;function HC(e,s){e=ve.isArray(e)?e:[e];const{length:l}=e;let o,d;const m={};for(let f=0;f<l;f++){o=e[f];let g;if(d=o,!ZC(o)&&(d=Sp[(g=String(o)).toLowerCase()],d===void 0))throw new ct(`Unknown adapter '${g}'`);if(d&&(ve.isFunction(d)||(d=d.get(s))))break;m[g||"#"+f]=d}if(!d){const f=Object.entries(m).map(([v,_])=>`adapter ${v} `+(_===!1?"is not supported by the environment":"is not available in the build"));let g=l?f.length>1?`since :
`+f.map(O0).join(`
`):" "+O0(f[0]):"as no adapter specified";throw new ct("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return d}const m_={getAdapter:HC,adapters:Sp};function Zh(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new vc(null,e)}function R0(e){return Zh(e),e.headers=Ba.from(e.headers),e.data=qh.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),m_.getAdapter(e.adapter||yc.adapter,e)(e).then(function(o){return Zh(e),o.data=qh.call(e,e.transformResponse,o),o.headers=Ba.from(o.headers),o},function(o){return l_(o)||(Zh(e),o&&o.response&&(o.response.data=qh.call(e,e.transformResponse,o.response),o.response.headers=Ba.from(o.response.headers))),Promise.reject(o)})}const h_="1.13.4",Bd={};["object","boolean","number","function","string","symbol"].forEach((e,s)=>{Bd[e]=function(o){return typeof o===e||"a"+(s<1?"n ":" ")+e}});const D0={};Bd.transitional=function(s,l,o){function d(m,f){return"[Axios v"+h_+"] Transitional option '"+m+"'"+f+(o?". "+o:"")}return(m,f,g)=>{if(s===!1)throw new ct(d(f," has been removed"+(l?" in "+l:"")),ct.ERR_DEPRECATED);return l&&!D0[f]&&(D0[f]=!0,console.warn(d(f," has been deprecated since v"+l+" and will be removed in the near future"))),s?s(m,f,g):!0}};Bd.spelling=function(s){return(l,o)=>(console.warn(`${o} is likely a misspelling of ${s}`),!0)};function KC(e,s,l){if(typeof e!="object")throw new ct("options must be an object",ct.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let d=o.length;for(;d-- >0;){const m=o[d],f=s[m];if(f){const g=e[m],v=g===void 0||f(g,m,e);if(v!==!0)throw new ct("option "+m+" must be "+v,ct.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new ct("Unknown option "+m,ct.ERR_BAD_OPTION)}}const ud={assertOptions:KC,validators:Bd},$s=ud.validators;let Qr=class{constructor(s){this.defaults=s||{},this.interceptors={request:new j0,response:new j0}}async request(s,l){try{return await this._request(s,l)}catch(o){if(o instanceof Error){let d={};Error.captureStackTrace?Error.captureStackTrace(d):d=new Error;const m=d.stack?d.stack.replace(/^.+\n/,""):"";try{o.stack?m&&!String(o.stack).endsWith(m.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+m):o.stack=m}catch{}}throw o}}_request(s,l){typeof s=="string"?(l=l||{},l.url=s):l=s||{},l=Xr(this.defaults,l);const{transitional:o,paramsSerializer:d,headers:m}=l;o!==void 0&&ud.assertOptions(o,{silentJSONParsing:$s.transitional($s.boolean),forcedJSONParsing:$s.transitional($s.boolean),clarifyTimeoutError:$s.transitional($s.boolean)},!1),d!=null&&(ve.isFunction(d)?l.paramsSerializer={serialize:d}:ud.assertOptions(d,{encode:$s.function,serialize:$s.function},!0)),l.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?l.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:l.allowAbsoluteUrls=!0),ud.assertOptions(l,{baseUrl:$s.spelling("baseURL"),withXsrfToken:$s.spelling("withXSRFToken")},!0),l.method=(l.method||this.defaults.method||"get").toLowerCase();let f=m&&ve.merge(m.common,m[l.method]);m&&ve.forEach(["delete","get","head","post","put","patch","common"],T=>{delete m[T]}),l.headers=Ba.concat(f,m);const g=[];let v=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(l)===!1||(v=v&&E.synchronous,g.unshift(E.fulfilled,E.rejected))});const _=[];this.interceptors.response.forEach(function(E){_.push(E.fulfilled,E.rejected)});let S,w=0,k;if(!v){const T=[R0.bind(this),void 0];for(T.unshift(...g),T.push(..._),k=T.length,S=Promise.resolve(l);w<k;)S=S.then(T[w++],T[w++]);return S}k=g.length;let O=l;for(;w<k;){const T=g[w++],E=g[w++];try{O=T(O)}catch(R){E.call(this,R);break}}try{S=R0.call(this,O)}catch(T){return Promise.reject(T)}for(w=0,k=_.length;w<k;)S=S.then(_[w++],_[w++]);return S}getUri(s){s=Xr(this.defaults,s);const l=c_(s.baseURL,s.url,s.allowAbsoluteUrls);return s_(l,s.params,s.paramsSerializer)}};ve.forEach(["delete","get","head","options"],function(s){Qr.prototype[s]=function(l,o){return this.request(Xr(o||{},{method:s,url:l,data:(o||{}).data}))}});ve.forEach(["post","put","patch"],function(s){function l(o){return function(m,f,g){return this.request(Xr(g||{},{method:s,headers:o?{"Content-Type":"multipart/form-data"}:{},url:m,data:f}))}}Qr.prototype[s]=l(),Qr.prototype[s+"Form"]=l(!0)});let GC=class f_{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(m){l=m});const o=this;this.promise.then(d=>{if(!o._listeners)return;let m=o._listeners.length;for(;m-- >0;)o._listeners[m](d);o._listeners=null}),this.promise.then=d=>{let m;const f=new Promise(g=>{o.subscribe(g),m=g}).then(d);return f.cancel=function(){o.unsubscribe(m)},f},s(function(m,f,g){o.reason||(o.reason=new vc(m,f,g),l(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const l=this._listeners.indexOf(s);l!==-1&&this._listeners.splice(l,1)}toAbortSignal(){const s=new AbortController,l=o=>{s.abort(o)};return this.subscribe(l),s.signal.unsubscribe=()=>this.unsubscribe(l),s.signal}static source(){let s;return{token:new f_(function(d){s=d}),cancel:s}}};function $C(e){return function(l){return e.apply(null,l)}}function QC(e){return ve.isObject(e)&&e.isAxiosError===!0}const $f={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries($f).forEach(([e,s])=>{$f[s]=e});function p_(e){const s=new Qr(e),l=$b(Qr.prototype.request,s);return ve.extend(l,Qr.prototype,s,{allOwnKeys:!0}),ve.extend(l,s,null,{allOwnKeys:!0}),l.create=function(d){return p_(Xr(e,d))},l}const fn=p_(yc);fn.Axios=Qr;fn.CanceledError=vc;fn.CancelToken=GC;fn.isCancel=l_;fn.VERSION=h_;fn.toFormData=Id;fn.AxiosError=ct;fn.Cancel=fn.CanceledError;fn.all=function(s){return Promise.all(s)};fn.spread=$C;fn.isAxiosError=QC;fn.mergeConfig=Xr;fn.AxiosHeaders=Ba;fn.formToJSON=e=>r_(ve.isHTMLForm(e)?new FormData(e):e);fn.getAdapter=m_.getAdapter;fn.HttpStatusCode=$f;fn.default=fn;const{Axios:$O,AxiosError:QO,CanceledError:VO,isCancel:YO,CancelToken:JO,VERSION:XO,all:WO,Cancel:eR,isAxiosError:tR,spread:nR,toFormData:aR,AxiosHeaders:sR,HttpStatusCode:iR,formToJSON:rR,getAdapter:lR,mergeConfig:oR}=fn,wp="puantaj_access_token",jd="puantaj_refresh_token";function x_(){return localStorage.getItem(wp)}function Qf(){return localStorage.getItem(jd)}function Vf(e,s){if(localStorage.setItem(wp,e),s){localStorage.setItem(jd,s);return}localStorage.removeItem(jd)}function g_(){localStorage.removeItem(wp),localStorage.removeItem(jd)}function VC(e){try{const s=e.split(".")[1];if(!s)return null;const l=s.replace(/-/g,"+").replace(/_/g,"/"),o=l.padEnd(l.length+(4-l.length%4)%4,"=");return JSON.parse(atob(o))}catch{return null}}function YC(e){if(!e)return!1;const s=VC(e);if(!s?.exp)return!1;const l=Math.floor(Date.now()/1e3);return s.exp>l+10}const Yf="http://127.0.0.1:8000",JC=Yf.includes("127.0.0.1")||Yf.includes("localhost"),XC=typeof window<"u"&&window.location.hostname!=="127.0.0.1"&&window.location.hostname!=="localhost",kp=XC&&JC?window.location.origin:Yf,Hh="/admin-panel/",$u=Hh.endsWith("/")?Hh.slice(0,-1):Hh,Me=fn.create({baseURL:kp,headers:{"Content-Type":"application/json"}}),bc=fn.create({baseURL:kp,headers:{"Content-Type":"application/json"}});function L0(){if(g_(),typeof window>"u")return;const e=`${window.location.pathname}${window.location.search}`,s=$u&&e.startsWith($u)?e.slice($u.length)||"/":e;if(s==="/login"||s.startsWith("/login?")){window.dispatchEvent(new Event("auth:logout"));return}const l=`${$u}/login?redirect=${encodeURIComponent(s)}`;window.location.replace(l)}Me.interceptors.request.use(e=>{const s=x_();return s&&(e.headers.Authorization=`Bearer ${s}`),e});let Qu=null;async function WC(){const e=Qf();if(!e)return L0(),null;try{const s=await fn.post(`${kp}/api/admin/auth/refresh`,{refresh_token:e});return Vf(s.data.access_token,s.data.refresh_token??e),s.data.access_token}catch{return L0(),null}}Me.interceptors.response.use(e=>e,async e=>{const s=e.config;if(!s||e.response?.status!==401||s._retry)return Promise.reject(e);const o=s.url??"";if(o.includes("/api/admin/auth/login")||o.includes("/api/admin/auth/refresh")||o.includes("/api/admin/auth/logout"))return Promise.reject(e);s._retry=!0,Qu||(Qu=WC().finally(()=>{Qu=null}));const m=await Qu;return m?(s.headers.Authorization=`Bearer ${m}`,Me(s)):Promise.reject(e)});async function eA(e){return(await Me.post("/api/admin/auth/login",e)).data}async function tA(e){return(await Me.post("/api/admin/auth/refresh",e)).data}async function nA(e){return(await Me.post("/api/admin/auth/logout",e)).data}async function Kh(){return(await Me.get("/api/admin/auth/me")).data}async function y_(){return(await Me.get("/api/admin/admin-users")).data}async function aA(e){return(await Me.get(`/api/admin/admin-users/${e}/claim-detail`)).data}async function sA(e,s,l){return(await Me.patch(`/api/admin/admin-users/${e}/claims/${s}/active`,l)).data}async function eo(e){return(await Me.get("/api/admin/regions",{params:e})).data}async function iA(e){return(await Me.post("/api/admin/regions",e)).data}async function rA(e,s){return(await Me.patch(`/api/admin/regions/${e}`,s)).data}async function lA(e){return(await Me.post("/api/admin/admin-users",e)).data}async function oA(e,s){return(await Me.patch(`/api/admin/admin-users/${e}`,s)).data}async function cA(e){await Me.delete(`/api/admin/admin-users/${e}`)}async function uA(e){return(await Me.get(`/api/admin/admin-users/${e}/mfa`)).data}async function dA(e){return(await Me.post(`/api/admin/admin-users/${e}/mfa/setup/start`)).data}async function mA(e,s){return(await Me.post(`/api/admin/admin-users/${e}/mfa/setup/confirm`,s)).data}async function hA(e,s){return(await Me.post(`/api/admin/admin-users/${e}/mfa/recovery-codes/regenerate`,s)).data}async function fA(e,s){return(await Me.post(`/api/admin/admin-users/${e}/mfa/reset`,s)).data}async function ji(){return(await Me.get("/admin/departments")).data}async function pA(e){return(await Me.get("/admin/departments",{params:e})).data}async function xA(e){return(await Me.post("/admin/departments",e)).data}async function gA(e,s){return(await Me.patch(`/admin/departments/${e}`,s)).data}async function Xs(e={}){return(await Me.get("/admin/employees",{params:e})).data}async function yA(e){return(await Me.post("/admin/employees",e)).data}async function vA(e){return(await Me.get(`/api/admin/employees/${e}/detail`)).data}async function bA(e,s){return(await Me.patch(`/api/admin/employees/${e}`,s)).data}async function v_(e,s){return(await Me.patch(`/api/admin/employees/${e}/active`,s)).data}async function _A(e,s){return(await Me.patch(`/api/admin/employees/${e}/shift`,s)).data}async function NA(e,s){return(await Me.patch(`/api/admin/employees/${e}/department`,s)).data}async function jA(e,s){return(await Me.put(`/admin/employee-locations/${e}`,s)).data}async function SA(){return(await Me.get("/admin/work-rules")).data}async function wA(e){return(await Me.post("/admin/work-rules",e)).data}async function b_(e){return(await Me.get("/admin/department-weekly-rules",{params:e})).data}async function __(e){return(await Me.post("/admin/department-weekly-rules",e)).data}async function _c(e){return(await Me.get("/admin/department-shifts",{params:e})).data}async function Sd(e){return(await Me.post("/admin/department-shifts",e)).data}async function N_(e){return(await Me.delete(`/admin/department-shifts/${e}`)).data}async function kA(e={}){return(await Me.get("/api/admin/qr/codes",{params:e})).data}async function EA(e){return(await Me.post("/api/admin/qr/codes",e)).data}async function TA(e,s){return(await Me.patch(`/api/admin/qr/codes/${e}`,s)).data}async function CA(e,s){return(await Me.post(`/api/admin/qr/codes/${e}/points`,s)).data}async function AA(e,s){return(await Me.delete(`/api/admin/qr/codes/${e}/points/${s}`)).data}async function MA(e={}){return(await Me.get("/api/admin/qr/points",{params:e})).data}async function zA(e){return(await Me.post("/api/admin/qr/points",e)).data}async function OA(e,s){return(await Me.patch(`/api/admin/qr/points/${e}`,s)).data}async function RA(e){return(await Me.delete(`/api/admin/qr/points/${e}`)).data}async function P0(e){return(await Me.post("/api/admin/schedule-plans",e)).data}async function DA(e={}){return(await Me.get("/api/admin/schedule-plans",{params:e})).data}async function LA(e){return(await Me.delete(`/api/admin/schedule-plans/${e}`)).data}async function Nc(e={}){return(await Me.get("/admin/attendance-events",{params:e})).data}async function PA(e){return(await Me.post("/api/admin/attendance-events",e)).data}async function IA(e,s){return(await Me.patch(`/api/admin/attendance-events/${e}`,s)).data}async function BA(e,s=!1){return(await Me.delete(`/api/admin/attendance-events/${e}`,{params:{force:s}})).data}async function j_(e={}){return(await Me.get("/api/admin/audit-logs",{params:e})).data}async function Ep(e={}){return(await Me.get("/api/admin/notifications/jobs",{params:e})).data}async function UA(e={}){return(await Me.get("/api/admin/notifications/delivery-logs",{params:e})).data}async function FA(e){return(await Me.post(`/api/admin/notifications/jobs/${e}/cancel`)).data}async function qA(e,s){return(await Me.post(`/api/admin/notifications/jobs/${e}/note`,{admin_note:s})).data}async function ZA(e={}){return(await Me.get("/api/admin/notifications/subscriptions",{params:e})).data}async function HA(e={}){return(await Me.get("/api/admin/notifications/admin-subscriptions",{params:e})).data}async function Jf(){return(await Me.get("/api/admin/notifications/push/config")).data}async function KA(){return(await bc.get("/api/admin/notifications/push/config/public")).data}async function GA(){return(await Me.get("/api/admin/notifications/daily-report-health")).data}async function $A(){return(await Me.get("/api/admin/notifications/email-targets")).data}async function QA(e){return(await Me.put("/api/admin/notifications/email-targets",e)).data}async function VA(e={}){return(await Me.post("/api/admin/notifications/email-test",e)).data}async function YA(){return(await Me.get("/api/admin/notifications/admin-self-check")).data}async function JA(){return(await Me.post("/api/admin/notifications/admin-self-test")).data}async function XA(e){return(await Me.post("/api/admin/notifications/admin-device-invite",e)).data}async function WA(e){return(await bc.post("/api/admin/notifications/admin-device-claim/public",e)).data}async function S_(e){return(await Me.post("/api/admin/notifications/admin-device-heal",e)).data}async function e3(e){return(await Me.post("/api/admin/notifications/send",e)).data}async function t3(e){return(await Me.get("/api/admin/notifications/tasks",{params:e})).data}async function n3(e){return(await Me.post("/api/admin/notifications/tasks",e)).data}async function a3(e,s){return(await Me.patch(`/api/admin/notifications/tasks/${e}`,s)).data}async function s3(e){return(await Me.delete(`/api/admin/notifications/tasks/${e}`)).data}async function i3(e={}){return(await Me.get("/api/admin/daily-report-archives",{params:e})).data}function r3(e){if(!e)return null;const s=e.match(/filename\*=UTF-8''([^;]+)/i);if(s?.[1])try{return decodeURIComponent(s[1].trim())}catch{return s[1].trim()}const l=e.match(/filename="?([^";]+)"?/i);return l?.[1]?l[1].trim():null}async function l3(e){return(await Me.get(`/api/admin/daily-report-archives/${e}/download`,{responseType:"blob"})).data}async function o3(e,s){const l=await bc.post(`/api/admin/daily-report-archives/${e}/password-download`,s,{responseType:"blob"}),o=l.headers["content-disposition"];return{blob:l.data,file_name:r3(o)}}async function c3(e){return(await bc.get("/api/admin/attendance-extra-checkin-approval",{params:{token:e}})).data}async function u3(e){return(await bc.post("/api/admin/attendance-extra-checkin-approval/approve",e)).data}async function d3(e,s={}){return(await Me.post(`/api/admin/daily-report-archives/${e}/notify`,s)).data}async function m3(){return(await Me.get("/admin/devices")).data}async function I0(e={}){return(await Me.get("/api/admin/employee-device-overview",{params:e})).data}async function h3(e){return(await Me.get("/api/admin/dashboard/employee-snapshot",{params:e})).data}async function f3(e={}){return(await Me.get("/api/admin/control-room/overview",{params:e})).data}async function p3(e){return(await Me.get(`/api/admin/control-room/employees/${e}`)).data}async function x3(e){return(await Me.post("/api/admin/control-room/actions",e)).data}async function g3(e){return(await Me.post("/api/admin/control-room/risk-override",e)).data}async function y3(e){return(await Me.post("/api/admin/control-room/notes",e)).data}async function v3(e){return(await Me.post("/api/admin/control-room/filter-activity",e)).data}async function b3(e,s){return(await Me.patch(`/api/admin/devices/${e}/active`,s)).data}async function w_(e={}){return(await Me.get("/api/admin/leaves",{params:e})).data}async function _3(e){return(await Me.post("/api/admin/leaves",e)).data}async function N3(e){await Me.delete(`/api/admin/leaves/${e}`)}async function k_(e){return(await Me.post("/api/admin/device-invite",e)).data}async function uc(e){return(await Me.get("/api/admin/monthly/employee",{params:e})).data}async function j3(e){return(await Me.get("/api/admin/monthly/department-summary",{params:e})).data}async function S3(e,s){return(await Me.post("/api/admin/manual-overrides/day",s,{params:{employee_id:e}})).data}async function w3(e,s,l){return(await Me.get("/api/admin/manual-overrides/day",{params:{employee_id:e,year:s,month:l}})).data}async function k3(e){await Me.delete(`/api/admin/manual-overrides/day/${e}`)}async function E3(){return(await Me.get("/api/admin/compliance-settings")).data}async function T3(e){return(await Me.put("/api/admin/compliance-settings",e)).data}async function C3(e){return(await Me.get("/api/admin/exports/puantaj.xlsx",{params:e,responseType:"blob"})).data}async function A3(e){return(await Me.get("/api/admin/export/employee-monthly",{params:e,responseType:"blob"})).data}async function M3(e){return(await Me.get("/api/admin/export/department-monthly",{params:e,responseType:"blob"})).data}async function z3(e){return(await Me.get("/api/admin/export/all-monthly",{params:e,responseType:"blob"})).data}async function O3(e){return(await Me.get("/api/admin/export/puantaj-range.xlsx",{params:e,responseType:"blob"})).data}const ps={signatureText:"YABUJIN",signatureTagline:"Rainwater Systems",buildVersion:"dev"},E_=b.createContext(void 0);function R3({children:e}){const[s,l]=b.useState(null),[o,d]=b.useState(!0),m=b.useCallback(()=>{g_(),l(null)},[]),f=b.useCallback(async()=>{const w=Qf();if(!w)return m(),!1;try{const k=await tA({refresh_token:w});Vf(k.access_token,k.refresh_token??w);const O=await Kh();return l(O),!0}catch{return m(),!1}},[m]),g=b.useCallback(async()=>{const w=x_();if(!w){l(null),d(!1);return}if(YC(w)){try{const k=await Kh();l(k)}catch{await f()}finally{d(!1)}return}await f(),d(!1)},[f]);b.useEffect(()=>{g()},[g]),b.useEffect(()=>{const w=()=>{l(null)};return window.addEventListener("auth:logout",w),()=>{window.removeEventListener("auth:logout",w)}},[]);const v=b.useCallback(async(w,k,O,T)=>{const E=await eA({username:w,password:k,mfa_code:O?.trim()||void 0,mfa_recovery_code:T?.trim()||void 0});Vf(E.access_token,E.refresh_token);const R=await Kh();l(R)},[]),_=b.useCallback(async()=>{const w=Qf();if(w)try{await nA({refresh_token:w})}catch{}m()},[m]),S=b.useMemo(()=>({user:s,isAuthenticated:!!s,isBootstrapping:o,isSuperAdmin:!!s?.is_super_admin,login:v,logout:_,refreshSession:f,hasPermission:(w,k="read")=>{if(!s)return!1;if(s.is_super_admin)return!0;const O=s.permissions?.[w];return O?k==="write"?!!O.write:!!(O.read||O.write):!1}}),[s,o,v,_,f]);return n.jsx(E_.Provider,{value:S,children:e})}function to(){const e=b.useContext(E_);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function Tp(e){const s="=".repeat((4-e.length%4)%4),l=`${e}${s}`.replace(/-/g,"+").replace(/_/g,"/"),o=window.atob(l),d=new Uint8Array(o.length);for(let m=0;m<o.length;m+=1)d[m]=o.charCodeAt(m);return d}const D3=[{to:"/management-console",label:"Ana Panel"},{to:"/dashboard",label:"Genel Bak"},{to:"/regions",label:"Blgeler",permission:"regions"},{to:"/departments",label:"Departmanlar",permission:"departments"},{to:"/employees",label:"alanlar",permission:"employees"},{to:"/quick-setup",label:"Hzl Ayarlar",permission:"schedule"},{to:"/work-rules",label:"Mesai Kurallar",permission:"work_rules"},{to:"/attendance-events",label:"Yoklama Kaytlar",permission:"attendance_events"},{to:"/devices",label:"Cihazlar",permission:"devices"},{to:"/compliance-settings",label:"Uyumluluk Ayarlar",permission:"compliance"},{to:"/qr-kodlar",label:"QR Kodlar"},{to:"/leaves",label:"zinler",permission:"leaves"},{to:"/reports/employee-monthly",label:"Aylk alan Raporu",permission:"reports"},{to:"/reports/department-summary",label:"Departman zeti",permission:"reports"},{to:"/reports/excel-export",label:"Excel Da Aktar",permission:"reports"},{to:"/notifications",label:"Bildirimler",permission:"audit"},{to:"/audit-logs",label:"Sistem Loglar",permission:"audit"},{to:"/admin-users",label:"Admin Kullanclar",permission:"admin_users"}],L3={"/management-console":"Ana Panel","/control-room":"Ana Panel","/dashboard":"Genel Bak","/regions":"Blgeler","/departments":"Departmanlar","/employees":"alanlar","/quick-setup":"Hzl Ayarlar","/work-rules":"Mesai Kurallar","/attendance-events":"Yoklama Kaytlar","/devices":"Cihazlar","/compliance-settings":"Uyumluluk Ayarlar","/qr-kodlar":"QR Kodlar","/leaves":"zinler","/reports/employee-monthly":"Aylk alan Raporu","/reports/department-summary":"Departman zeti","/reports/excel-export":"Excel Da Aktar","/notifications":"Bildirimler","/audit-logs":"Sistem Loglar","/admin-users":"Admin Kullanclar"},B0="pf_admin_push_vapid_public_key",T_="pf_admin_push_auto_heal_ts",P3=600*1e3;async function I3(){if(!("serviceWorker"in navigator)||!("PushManager"in window)||Notification.permission!=="granted")return;const e=await Jf();if(!e.enabled||!e.vapid_public_key)return;const l=await navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"});let o=await l.pushManager.getSubscription();const d=window.localStorage.getItem(B0);if(o&&d&&d!==e.vapid_public_key){try{await o.unsubscribe()}catch{}o=null}o||(o=await l.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Tp(e.vapid_public_key)})),await S_({subscription:o.toJSON(),send_test:!1}),window.localStorage.setItem(B0,e.vapid_public_key),window.sessionStorage.setItem(T_,String(Date.now()))}function B3(){const e=ys(),{user:s,logout:l,hasPermission:o}=to(),d=b.useRef(null),m=b.useRef(null),f=b.useRef(!1),g=b.useRef(null),[v,_]=b.useState(!1),[S,w]=b.useState("erie geiliyor..."),k=o("audit","write"),O=D3.filter(Z=>!Z.permission||o(Z.permission)),T=L3[e.pathname]??(e.pathname.startsWith("/employees/")?"alan Detay":"Admin Panel"),E=()=>typeof window<"u"&&window.innerWidth<1024,R=()=>{g.current!==null&&(window.clearTimeout(g.current),g.current=null)},B=(Z,I)=>{w(I),_(!0),Z==="content"?m.current?.scrollIntoView({behavior:"smooth",block:"start"}):d.current?.scrollIntoView({behavior:"smooth",block:"start"}),R(),g.current=window.setTimeout(()=>{_(!1)},1200)},A=Z=>{if(E()){if(e.pathname===Z){window.requestAnimationFrame(()=>{B("content","erie geiliyor...")});return}w("erie geiliyor..."),_(!0),f.current=!0}},z=()=>{E()&&window.requestAnimationFrame(()=>{B("sidebar","Sidebar'a dnlyor...")})};return b.useEffect(()=>{E()&&window.scrollTo({top:0})},[]),b.useEffect(()=>{if(!k)return;const Z=window.sessionStorage.getItem(T_),I=Z?Number(Z):0;Number.isFinite(I)&&I>0&&Date.now()-I<P3||I3().catch(()=>{})},[k,s?.admin_user_id,s?.username]),b.useEffect(()=>{f.current&&(f.current=!1,window.requestAnimationFrame(()=>{B("content","erie geiliyor...")}))},[e.pathname]),b.useEffect(()=>()=>{R()},[]),n.jsxs("div",{className:"admin-shell min-h-screen bg-slate-100 lg:grid lg:grid-cols-[228px_minmax(0,1fr)]",children:[v?n.jsxs("div",{className:"mobile-nav-loader lg:hidden",role:"status","aria-live":"polite","aria-label":"Sayfa geii",children:[n.jsxs("div",{className:"mobile-nav-loader-logo","aria-hidden":"true",children:[n.jsx("div",{className:"mobile-nav-loader-halo"}),n.jsx("div",{className:"mobile-nav-loader-ring"}),n.jsx("div",{className:"mobile-nav-loader-spark"}),n.jsxs("div",{className:"mobile-nav-loader-core",children:[n.jsx("span",{className:"mobile-nav-loader-brand",children:"YABUJIN"}),n.jsx("span",{className:"mobile-nav-loader-sub",children:"CONTROL CORE"})]})]}),n.jsx("p",{className:"mobile-nav-loader-text",children:S})]}):null,n.jsxs("aside",{ref:d,className:"admin-sidebar flex flex-col px-3 py-6 text-slate-100 shadow-panel xl:px-4",children:[n.jsx("h1",{className:"px-2 text-xl font-bold tracking-tight",children:"Puantaj Admin"}),n.jsx("p",{className:"px-2 pt-1 text-xs text-slate-400",children:"FastAPI Ynetim Paneli"}),n.jsx("nav",{className:"mt-6 flex flex-col gap-1",children:O.map(Z=>n.jsx(xb,{to:Z.to,onClick:()=>A(Z.to),className:({isActive:I})=>`rounded-lg px-3 py-2 text-sm font-medium transition ${I?"bg-brand-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800/85 hover:text-white"}`,children:Z.label},Z.to))}),n.jsxs("div",{className:"admin-signature",children:[n.jsx("p",{className:"admin-signature-main",children:ps.signatureText}),n.jsx("p",{className:"admin-signature-sub",children:ps.signatureTagline})]})]}),n.jsxs("div",{ref:m,className:"flex min-h-screen min-w-0 flex-col",children:[n.jsx("header",{className:"admin-topbar border-b border-slate-200 bg-white/90 px-4 py-4 backdrop-blur sm:px-6",children:n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:T}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Oturum: ",s?.username??s?.sub??"admin"," / Rol: ",s?.role??"admin"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:z,className:"btn-animated rounded-lg border border-slate-300 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-100 lg:hidden",children:"Sidebar'a Git"}),n.jsx("button",{type:"button",onClick:()=>{l()},className:"btn-animated rounded-lg bg-slate-900 px-4 py-2 text-sm font-medium text-white hover:bg-slate-700",children:"k"})]})]})}),n.jsx("main",{className:"admin-main min-w-0 flex-1 p-4 sm:p-6",children:n.jsx(dp,{})}),n.jsxs("footer",{className:"admin-footer-signature px-6 pb-4 pt-1 text-center text-xs tracking-wide text-slate-500",children:[n.jsx("span",{className:"admin-footer-brand",children:ps.signatureText}),n.jsx("span",{className:"admin-footer-sub",children:ps.signatureTagline}),n.jsxs("span",{className:"admin-footer-build",children:["BUILD: ",ps.buildVersion]})]})]})]})}function U3(){const{isAuthenticated:e,isBootstrapping:s}=to(),l=ys();if(s)return n.jsx("div",{className:"flex min-h-screen items-center justify-center text-slate-600",children:"Oturum kontrol ediliyor..."});if(!e){const o=`${l.pathname}${l.search}`;return n.jsx(xd,{to:"/login",replace:!0,state:{from:o}})}return n.jsx(dp,{})}function F3(){const{isAuthenticated:e,isBootstrapping:s}=to();return s?n.jsx("div",{className:"flex min-h-screen items-center justify-center text-slate-600",children:"Ykleniyor..."}):e?n.jsx(xd,{to:"/dashboard",replace:!0}):n.jsx(dp,{})}const U0={INVALID_CREDENTIALS:"Kullanici adi veya sifre hatali.",TOO_MANY_ATTEMPTS:"Cok fazla deneme yaptiniz. Lutfen daha sonra tekrar deneyin.",INVALID_TOKEN:"Oturum gecersiz veya suresi dolmus. Lutfen tekrar giris yapin.",FORBIDDEN:"Bu islem icin yetkiniz yok.",INTERNAL_ERROR:"Sunucu hatasi olustu. Lutfen tekrar deneyin.",MFA_REQUIRED:"MFA kodu zorunlu. Authenticator kodunu girin.",INVALID_MFA_CODE:"MFA kodu gecersiz. Tekrar deneyin.",MFA_SETUP_REQUIRED:"Bu hesap icin MFA kurulumu tamamlanmamis.",MFA_SETUP_NOT_STARTED:"Once MFA kurulumunu baslatin.",MFA_NOT_ENABLED:"Bu hesapta MFA aktif degil.",ARCHIVE_DECRYPT_FAILED:"Arsiv dosyasi acilamadi. Sunucu anahtarini kontrol edin.",EXTRA_CHECKIN_APPROVAL_NOT_FOUND:"Ek giris onay talebi bulunamadi.",EXTRA_CHECKIN_APPROVAL_EXPIRED:"Ek giris onay talebinin suresi dolmus.",INVITE_ATTEMPTS_EXCEEDED:"Davet linkinin deneme limiti doldu. Yeni bir link uretin.",INVITE_CONTEXT_MISMATCH:"Davet linki ayni cihaz/tarayici baglaminda kullanilmalidir.",INVITE_RETRY_TOO_FAST:"Cok hizli deneme yaptiniz. Birkac saniye bekleyip tekrar deneyin.",INVITE_TTL_TOO_LONG:"Davet suresi izin verilen limiti asiyor.",ADMIN_PUSH_SUBSCRIPTION_REQUIRED:"Aktif admin push aboneligi yok. Once bir admin cihazi claim edilmelidir."};function Be(e,s){if(fn.isAxiosError(e)){const l=e.response?.data;if(typeof l=="string")return{message:l};const o=l?.error?.code,d=l?.error?.request_id,m=l?.error?.message;if(o&&U0[o])return{code:o,requestId:d,message:U0[o]};if(m)return{code:o,requestId:d,message:m};if(e.message)return{message:e.message}}return e instanceof Error&&e.message?{message:e.message}:{message:s}}function q3(e,s){return Be(e,s).message}const F0="pf_admin_push_vapid_public_key";function Z3(){const e=Jl(),[s]=fc(),l=b.useMemo(()=>s.get("token")?.trim()??"",[s]),[o,d]=b.useState("admin"),[m,f]=b.useState(""),[g,v]=b.useState(!1),[_,S]=b.useState(null),[w,k]=b.useState(null),[O,T]=b.useState(null),E=async R=>{if(R.preventDefault(),k(null),T(null),S(null),!l){k("Davet token bulunamad. Ltfen yeni balant isteyin.");return}const B=o.trim(),A=m.trim();if(!B||!A){k("Admin kullanc ad ve ifre zorunludur.");return}try{v(!0);const z=await KA();if(!z.enabled||!z.vapid_public_key){k("Push bildirim servisi yaplandrlmam.");return}if(!("serviceWorker"in navigator)||!("PushManager"in window)){k("Bu tarayc push bildirimlerini desteklemiyor.");return}if((Notification.permission==="granted"?"granted":await Notification.requestPermission())!=="granted"){k("Bildirim izni verilmedi. Cihaz balama tamamlanamad.");return}const V=await navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"});let H=await V.pushManager.getSubscription();const ee=window.localStorage.getItem(F0);if(H&&ee&&ee!==z.vapid_public_key){try{await H.unsubscribe()}catch{}H=null}H||(H=await V.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Tp(z.vapid_public_key)})),await WA({token:l,username:B,password:A,subscription:H.toJSON()}),window.localStorage.setItem(F0,z.vapid_public_key),S("Admin cihaz baaryla baland. Bildirimler bu cihaza gnderilecek."),window.setTimeout(()=>{e("/login",{replace:!0})},1e3)}catch(z){const Z=Be(z,"Cihaz balama ilemi baarsz oldu.");k(Z.message),T(Z.requestId??null)}finally{v(!1)}};return n.jsxs("div",{className:"mx-auto mt-10 w-full max-w-lg rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[n.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Admin Cihaz Balama"}),n.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Bu cihaz admin bildirimleri iin kaydetmek adna hesabnzla giri yapn."}),n.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:["Token: ",l||"Bulunamad"]}),n.jsxs("form",{className:"mt-4 space-y-3",onSubmit:E,children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Kullanc ad",n.jsx("input",{value:o,onChange:R=>d(R.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",autoComplete:"username"})]}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["ifre",n.jsx("input",{type:"password",value:m,onChange:R=>f(R.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",autoComplete:"current-password"})]}),w?n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:[n.jsx("p",{children:w}),O?n.jsxs("p",{className:"mt-1 text-xs",children:["request_id: ",O]}):null]}):null,_?n.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:_}):null,n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"submit",disabled:g,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:g?"Balanyor...":"Cihaz Bala"}),n.jsx(Ys,{to:"/login",className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Login ekran"})]})]})]})}function Vu(e){return`#${e.id} - ${e.full_name}`}function Js({label:e,employees:s,value:l,onChange:o,placeholder:d="alan ad veya ID yazn...",emptyLabel:m="Seiniz",helperText:f,disabled:g=!1,className:v=""}){const _=b.useMemo(()=>s.find(R=>String(R.id)===l),[s,l]),[S,w]=b.useState(_?Vu(_):""),[k,O]=b.useState(!1);b.useEffect(()=>{if(_){w(Vu(_));return}l||w("")},[_,l]);const T=b.useMemo(()=>{const R=S.trim().toLowerCase();return(R?s.filter(A=>{const z=A.full_name.toLowerCase().includes(R),Z=String(A.id).includes(R.replace("#",""));return z||Z}):s).slice(0,60)},[s,S]),E=R=>{o(String(R.id)),w(Vu(R)),O(!1)};return n.jsxs("div",{className:v,children:[n.jsxs("label",{className:"text-sm text-slate-700",children:[e,n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",value:S,disabled:g,onFocus:()=>O(!0),onChange:R=>{const B=R.target.value;w(B),O(!0),B.trim()||o("")},onBlur:()=>{window.setTimeout(()=>O(!1),120)},placeholder:d,className:"w-full rounded-lg border border-slate-300 px-3 py-2"}),n.jsx("button",{type:"button",disabled:g,onClick:()=>{o(""),w(""),O(!1)},className:"absolute right-2 top-1/2 -translate-y-1/2 rounded px-1 text-xs text-slate-500 hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-50",children:"Temizle"}),k?n.jsxs("div",{className:"absolute z-20 mt-1 max-h-72 w-full overflow-y-auto rounded-lg border border-slate-200 bg-white shadow-lg",children:[n.jsx("button",{type:"button",onMouseDown:R=>R.preventDefault(),onClick:()=>{o(""),w(""),O(!1)},className:"flex w-full items-center justify-between border-b border-slate-100 px-3 py-2 text-left text-sm text-slate-600 hover:bg-slate-50",children:n.jsx("span",{children:m})}),T.map(R=>n.jsxs("button",{type:"button",onMouseDown:B=>B.preventDefault(),onClick:()=>E(R),className:"flex w-full items-center justify-between px-3 py-2 text-left text-sm hover:bg-slate-50",children:[n.jsx("span",{children:Vu(R)}),R.is_active?null:n.jsx("span",{className:"rounded-full bg-amber-100 px-2 py-0.5 text-[11px] font-semibold text-amber-700",children:"Pasif"})]},R.id)),T.length===0?n.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"Sonu bulunamad."}):null]}):null]})]}),f?n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:f}):null]})}function zt({message:e}){return n.jsx("div",{className:"error-block admin-panel rounded-xl border border-rose-200 bg-rose-50 p-4 text-sm text-rose-700 shadow-sm",children:e})}function $t({label:e="Ykleniyor..."}){return n.jsxs("div",{className:"loading-block admin-panel rounded-xl border border-slate-200 bg-white p-8 text-center text-sm text-slate-600 shadow-sm",children:[n.jsx("span",{className:"loading-spinner","aria-hidden":"true"}),n.jsx("span",{children:e})]})}function H3(e){return Number.isFinite(e)?Math.max(0,Math.floor(e)):0}function C_(e){const s=H3(e),l=Math.floor(s/60),o=s%60;return{hours:l,minutes:o}}function K3(e){const{hours:s,minutes:l}=C_(e),o=String(s).padStart(2,"0"),d=String(l).padStart(2,"0");return`${o}:${d}`}function G3(e){const{hours:s,minutes:l}=C_(e);return s===0?`${l}dk`:`${s}s ${l}dk`}function dd(e){return`${K3(e)} (${G3(e)})`}function $e({minutes:e}){return n.jsx("span",{className:"whitespace-nowrap",children:dd(e)})}const $3='a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])';function _i({open:e,title:s,onClose:l,children:o,placement:d="center",maxWidthClass:m="max-w-xl",panelClassName:f=""}){const g=b.useId(),v=b.useRef(null),_=b.useRef(null);if(b.useEffect(()=>{if(!e)return;const w=document.body.style.overflow,k=document.body.style.paddingRight,O=document.activeElement instanceof HTMLElement?document.activeElement:null,T=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow="hidden",document.body.classList.add("mc-modal-open"),T>0&&(document.body.style.paddingRight=`${T}px`),v.current?.focus();const E=R=>{if(R.key==="Escape"){l();return}if(R.key!=="Tab"||!_.current)return;const B=[..._.current.querySelectorAll($3)].filter(I=>!I.hasAttribute("hidden")&&I.offsetParent!==null);if(!B.length){R.preventDefault();return}const A=B[0],z=B[B.length-1],Z=document.activeElement;if(R.shiftKey&&Z===A){R.preventDefault(),z.focus();return}!R.shiftKey&&Z===z&&(R.preventDefault(),A.focus())};return window.addEventListener("keydown",E),()=>{document.body.style.overflow=w,document.body.style.paddingRight=k,document.body.classList.remove("mc-modal-open"),window.removeEventListener("keydown",E),O?.focus()}},[l,e]),!e||typeof document>"u")return null;const S=d==="right";return Pw.createPortal(n.jsxs("div",{className:`mc-modal ${S?"is-right":"is-center"}`,role:"presentation",children:[n.jsx("button",{type:"button",className:"mc-modal__backdrop","aria-label":"Kapat",onClick:l}),n.jsxs("div",{ref:_,role:"dialog","aria-modal":"true","aria-labelledby":g,className:`mc-modal__panel ${m} ${f} ${S?"is-right":"is-center"} page-enter`,children:[n.jsxs("div",{className:"mc-modal__header",children:[n.jsx("div",{children:n.jsx("h4",{id:g,children:s})}),n.jsx("button",{ref:v,type:"button",onClick:l,className:"mc-button mc-button--ghost",children:"Kapat"})]}),n.jsx("div",{className:"mc-modal__body",children:o})]})]}),document.body)}function Wn({title:e,description:s,action:l}){return n.jsxs("div",{className:"mb-5 flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:e}),s?n.jsx("p",{className:"mt-1 text-sm text-slate-600",children:s}):null]}),l]})}function Ie({children:e,className:s=""}){return n.jsx("section",{className:`admin-panel min-w-0 rounded-xl border border-slate-200 bg-white p-5 shadow-sm ${s}`,children:e})}function A_({suspicious:e,label:s="Supheli",tooltip:l}){return e?n.jsx("span",{className:"status-badge status-badge-incomplete",title:l,children:s}):n.jsx("span",{className:"status-badge status-badge-neutral",children:"Normal"})}const Q3={DUPLICATE_EVENT:{label:"Mkerrer kayt",description:"Ayn gn iinde ayn tipte (IN/OUT) birden fazla kayt tespit edildi.",tone:"warning"},MANUAL_CHECKOUT:{label:"Manuel k",description:"k kayd alan tarafndan manuel butonla oluturuldu.",tone:"info"},NEEDS_SHIFT_REVIEW:{label:"Vardiya kontrol gerekli",description:"Otomatik atanan vardiya ile giri saati arasnda yksek fark var. K kontrol etmelidir.",tone:"warning"},SHIFT_WEEKLY_RULE_OVERRIDE:{label:"Vardiya-kural akmas",description:"Ayn gn iin haftalk gn kural ile vardiya sresi/mola bilgisi farkl. Hesaplamada vardiya kural nceliklendirildi.",tone:"warning"},CROSS_MIDNIGHT_CHECKOUT:{label:"Gece vardiyas k",description:"Giri bir gn, k ertesi gn alnm. Sistem k nceki gnn mesaisine balayarak hesaplad.",tone:"info"},RULE_SOURCE_MANUAL_OVERRIDE:{label:"Kural manuel seildi",description:"Bu gn iin kural kayna K tarafndan manuel olarak seildi.",tone:"info"},RULE_OVERRIDE_INVALID:{label:"Geersiz manuel kural",description:"Manuel seilen kural kayna o gn iin uygulanamad; sistem otomatik kurala dnd.",tone:"warning"},UNDERWORKED:{label:"Eksik alma",description:"Net alma sresi, o gn iin planlanan srenin altnda kald.",tone:"warning"},SECOND_CHECKIN_APPROVED:{label:"2. giri admin onay",description:"Gnlk maksimum vardiya dngs tamamlandktan sonra, ek giri kayd admin onay ile ald.",tone:"info"},LOCATION_NO_LOCATION:{label:"Konum yok",description:"Kayt srasnda konum bilgisi gnderilmedi veya alnamad.",tone:"warning"},LOCATION_UNVERIFIED:{label:"Ev d konum",description:"Kayt, tanml ev konumu yarap dnda alnd.",tone:"warning"},ADMIN_MANUAL_EVENT:{label:"Admin manuel kayt",description:"Kayt admin tarafndan manuel olarak eklenmi/dzenlenmi.",tone:"info"},EKSIK_GUN:{label:"Eksik gn",description:"Gn iinde giri veya k kayd eksik olduu iin gn tamamlanmam grnyor.",tone:"danger"},MISSING_IN:{label:"Giri eksik",description:"Bu gn iin giri (IN) kayd bulunamad.",tone:"danger"},MISSING_OUT:{label:"k eksik",description:"Bu gn iin k (OUT) kayd bulunamad.",tone:"danger"},OPEN_SHIFT_ACTIVE:{label:"Ak vardiya devam ediyor",description:"Gn iinde bir ktan sonra yeniden giri yapld ve son giri iin henz k kayd olumad.",tone:"warning"},DAILY_MAX_EXCEEDED:{label:"Gnlk sre ald",description:"Gnlk azami alma sresi (11 saat) ald.",tone:"danger"},MIN_BREAK_NOT_MET:{label:"Yasal mola yetersiz",description:"Tanml mola, yasal minimum mola sresinin altnda kald.",tone:"warning"},NIGHT_WORK_EXCEEDED:{label:"Gece alma snr ald",description:"Gece alma sresi yasal snrn zerinde grnyor.",tone:"danger"},ANNUAL_OVERTIME_CAP_EXCEEDED:{label:"Yllk fazla mesai limiti ald",description:"alann yllk fazla mesai limiti ald.",tone:"danger"}};function Ya(e){return Q3[e]??{label:e,description:`${e} bayra iin aklama tanml deil.`,tone:"neutral"}}function V3(){return["DAILY_MAX_EXCEEDED","MIN_BREAK_NOT_MET","NIGHT_WORK_EXCEEDED","ANNUAL_OVERTIME_CAP_EXCEEDED","SHIFT_WEEKLY_RULE_OVERRIDE","UNDERWORKED"]}function Y3(e){return e==="danger"||e==="warning"?"status-badge status-badge-incomplete":e==="info"?"status-badge status-badge-leave":"status-badge status-badge-neutral"}function M_({reasons:e}){return e.length===0?n.jsx("span",{className:"status-badge status-badge-neutral",children:"Sorun yok"}):n.jsx("div",{className:"flex flex-wrap gap-1",children:e.map(s=>n.jsx("span",{title:Ya(s).description,className:Y3(Ya(s).tone),children:Ya(s).label},s))})}const z_=b.createContext(void 0);function J3(e){return e==="success"?"border-emerald-200 bg-emerald-50 text-emerald-900":e==="error"?"border-rose-200 bg-rose-50 text-rose-900":"border-sky-200 bg-sky-50 text-sky-900"}function X3({children:e}){const[s,l]=b.useState([]),o=b.useCallback(f=>{l(g=>g.map(v=>v.id===f?{...v,isClosing:!0}:v)),window.setTimeout(()=>{l(g=>g.filter(v=>v.id!==f))},170)},[]),d=b.useCallback(f=>{const g=crypto.randomUUID(),v={id:g,title:f.title,description:f.description,durationMs:f.durationMs??3500,variant:f.variant??"info"};l(_=>[..._,v]),window.setTimeout(()=>{o(g)},v.durationMs)},[o]),m=b.useMemo(()=>({pushToast:d,removeToast:o}),[d,o]);return n.jsxs(z_.Provider,{value:m,children:[e,n.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 flex w-full max-w-sm flex-col gap-2",children:s.map(f=>n.jsx("div",{className:`toast-card pointer-events-auto rounded-lg border px-4 py-3 shadow-lg ${J3(f.variant)} ${f.isClosing?"is-leaving":""}`,role:"status",children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold",children:f.title}),f.description?n.jsx("p",{className:"mt-1 text-xs",children:f.description}):null]}),n.jsx("button",{type:"button",onClick:()=>o(f.id),className:"rounded px-2 py-1 text-xs font-medium opacity-80 hover:opacity-100",children:"Kapat"})]})},f.id))})]})}function aa(){const e=b.useContext(z_);return e||{pushToast:()=>{},removeToast:()=>{}}}function W3(e){const[s,l,o]=e.split("-"),d=Number(s),m=Number(l),f=Number(o);return!Number.isInteger(d)||!Number.isInteger(m)||!Number.isInteger(f)?new Date("invalid"):new Date(Date.UTC(d,m-1,f))}function eM(e){return e.leave_type==="PUBLIC_HOLIDAY"||e.flags.includes("PUBLIC_HOLIDAY")}function tM(e){return e.worked_minutes>0?!0:!!(e.in||e.out)}function Cp(e){if(eM(e))return{key:"SPECIAL",label:"zel Gn"};const s=W3(e.date);return!Number.isNaN(s.getTime())&&s.getUTCDay()===0?{key:"SUNDAY",label:"Pazar"}:{key:"WEEKDAY",label:"Hafta i"}}function O_(e){const s={workedMinutes:0,overtimeMinutes:0,planOvertimeMinutes:0,legalExtraWorkMinutes:0,workedDayCount:0,overtimeDayCount:0,planOvertimeDayCount:0,sundayWorkedDayCount:0,weekdayWorkedDayCount:0,specialWorkedDayCount:0,sundayWorkedMinutes:0,weekdayWorkedMinutes:0,specialWorkedMinutes:0};for(const l of e){const o=l.plan_overtime_minutes??l.overtime_minutes,d=l.legal_extra_work_minutes??0,m=l.legal_overtime_minutes??l.overtime_minutes;if(s.workedMinutes+=l.worked_minutes,s.planOvertimeMinutes+=o,s.legalExtraWorkMinutes+=d,s.overtimeMinutes+=m,tM(l)){s.workedDayCount+=1;const g=Cp(l);g.key==="SPECIAL"?(s.specialWorkedDayCount+=1,s.specialWorkedMinutes+=l.worked_minutes):g.key==="SUNDAY"?(s.sundayWorkedDayCount+=1,s.sundayWorkedMinutes+=l.worked_minutes):(s.weekdayWorkedDayCount+=1,s.weekdayWorkedMinutes+=l.worked_minutes)}o>0&&(s.planOvertimeDayCount+=1),m>0&&(s.overtimeDayCount+=1)}return s}const nM=[{value:"ALL",label:"Tm konum durumlar"},{value:"VERIFIED_HOME",label:"Evde onayl"},{value:"UNVERIFIED_LOCATION",label:"Ev d"},{value:"NO_LOCATION",label:"Konum yok"}],aM=[{value:"ALL",label:"Tm tipler"},{value:"IN",label:"IN (Giri)"},{value:"OUT",label:"OUT (k)"}],ec={employeeId:"",departmentId:"",dateFrom:"",dateTo:"",eventType:"ALL",locationStatus:"ALL",duplicatesOnly:!1,suspiciousOnly:!1,includeDeleted:!1,limit:"200"},sM="Europe/Istanbul",q0=[20,35,50,100];function ac(e,s){return e[s]===!0}function Z0(e){if(typeof e=="number"&&Number.isInteger(e)&&e>0)return e;if(typeof e=="string"){const s=Number(e.trim());if(Number.isInteger(s)&&s>0)return s}return null}function Yu(e){return new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"medium",timeZone:sM}).format(new Date(e))}function iM(e){const s=new Date(e);return new Date(s.getTime()-s.getTimezoneOffset()*6e4).toISOString().slice(0,16)}function rM(e){return e==="VERIFIED_HOME"?"Evde onayl":e==="UNVERIFIED_LOCATION"?"Ev d":"Konum yok"}function Gh(e){const s=[],l=e.flags.reason==="home_location_not_set";return ac(e.flags,"DUPLICATE_EVENT")&&s.push("DUPLICATE_EVENT"),ac(e.flags,"MANUAL_CHECKOUT")&&s.push("MANUAL_CHECKOUT"),ac(e.flags,"NEEDS_SHIFT_REVIEW")&&s.push("NEEDS_SHIFT_REVIEW"),e.location_status==="NO_LOCATION"&&s.push("LOCATION_NO_LOCATION"),e.location_status==="UNVERIFIED_LOCATION"&&!l&&s.push("LOCATION_UNVERIFIED"),(e.source==="MANUAL"||e.created_by_admin||ac(e.flags,"ADMIN_MANUAL"))&&s.push("ADMIN_MANUAL_EVENT"),s}function $h(e){const s=Number(e);return Number.isInteger(s)&&s>0?s:null}function lM(e){return e.length?e.map(s=>`${Ya(s).label} (${s})`).join(", "):"-"}function oM(){const e=Xn(),{pushToast:s}=aa(),[l]=fc(),[o,d]=b.useState(ec),[m,f]=b.useState(ec),[g,v]=b.useState(""),[_,S]=b.useState("IN"),[w,k]=b.useState(""),[O,T]=b.useState(""),[E,R]=b.useState(""),[B,A]=b.useState(!1),[z,Z]=b.useState(null),[I,V]=b.useState("IN"),[H,ee]=b.useState(""),[X,P]=b.useState(""),[te,oe]=b.useState(""),[je,ue]=b.useState(!1),[ce,Q]=b.useState(!1),[$,ie]=b.useState(null),[Ae,_e]=b.useState(!1),[D,ae]=b.useState(35),[F,me]=b.useState(1),[de,Ee]=b.useState(35),[Oe,Qe]=b.useState(1);b.useEffect(()=>{const J=l.get("employee_id")??"",qe=l.get("start_date")??"",xn=l.get("end_date")??"";if(!J&&!qe&&!xn)return;const ht={...ec,employeeId:J,dateFrom:qe,dateTo:xn||qe};d(ht),f(ht)},[l]);const pe=Fe({queryKey:["employees","all"],queryFn:()=>Xs({status:"all",include_inactive:!0})}),Ve=Fe({queryKey:["departments"],queryFn:ji}),Ye=Fe({queryKey:["department-shifts","all"],queryFn:()=>_c({active_only:!1})}),Ot=b.useMemo(()=>{const J=Number(m.employeeId),qe=Number(m.departmentId),xn=Number(m.limit);return{employee_id:J>0?J:void 0,department_id:qe>0?qe:void 0,start_date:m.dateFrom||void 0,end_date:m.dateTo||void 0,type:m.eventType==="ALL"?void 0:m.eventType,location_status:m.locationStatus==="ALL"?void 0:m.locationStatus,duplicates_only:m.duplicatesOnly||void 0,include_deleted:m.includeDeleted||void 0,limit:xn>0?xn:200}},[m]),ft=Fe({queryKey:["attendance-events",Ot],queryFn:()=>Nc(Ot)}),ze=(Oe-1)*de,at=Fe({queryKey:["audit-logs","attendance-events",Oe,de],queryFn:()=>j_({entity_type:"attendance_event",offset:ze,limit:de})}),pt=Number(m.employeeId),Rt=b.useMemo(()=>{const J=m.dateFrom||m.dateTo;if(!J)return new Date;const qe=new Date(`${J}T00:00:00`);return Number.isNaN(qe.getTime())?new Date:qe},[m.dateFrom,m.dateTo]),It=Fe({queryKey:["attendance-events-monthly-summary",pt,Rt.getFullYear(),Rt.getMonth()+1],queryFn:()=>uc({employee_id:pt,year:Rt.getFullYear(),month:Rt.getMonth()+1}),enabled:Number.isInteger(pt)&&pt>0,staleTime:15e3}),Qt=Ge({mutationFn:PA,onSuccess:()=>{s({variant:"success",title:"Manuel event kaydedildi",description:"Kayt baaryla oluturuldu."}),T(""),R(""),A(!1),e.invalidateQueries({queryKey:["attendance-events"]}),e.invalidateQueries({queryKey:["audit-logs"]})},onError:J=>{s({variant:"error",title:"Kayt oluturulamad",description:Be(J,"lem baarsz.").message})}}),ne=Ge({mutationFn:({eventId:J,payload:qe})=>IA(J,qe),onSuccess:()=>{s({variant:"success",title:"Event gncellendi",description:"Deiiklikler kaydedildi."}),Z(null),e.invalidateQueries({queryKey:["attendance-events"]}),e.invalidateQueries({queryKey:["audit-logs"]})},onError:J=>{s({variant:"error",title:"Event gncellenemedi",description:Be(J,"lem baarsz.").message})}}),Se=Ge({mutationFn:({eventId:J,force:qe})=>BA(J,qe),onSuccess:()=>{s({variant:"success",title:"Event soft silindi",description:"Kayt pasife alnd."}),ie(null),_e(!1),e.invalidateQueries({queryKey:["attendance-events"]}),e.invalidateQueries({queryKey:["audit-logs"]})},onError:J=>{s({variant:"error",title:"Silme baarsz",description:Be(J,"lem baarsz.").message})}}),Pe=pe.data??[],Tt=Ve.data??[],se=Ye.data??[],He=ft.data??[],_t=b.useMemo(()=>(It.data?.days??[]).filter(qe=>!(m.dateFrom&&qe.date<m.dateFrom||m.dateTo&&qe.date>m.dateTo)),[It.data?.days,m.dateFrom,m.dateTo]),pn=b.useMemo(()=>O_(_t),[_t]),Lt=Math.max(1,Math.ceil(_t.length/D)),rt=(F-1)*D,Gn=b.useMemo(()=>_t.slice(rt,rt+D),[_t,rt,D]),be=_t.length===0?0:rt+1,et=_t.length===0?0:Math.min(rt+D,_t.length),lt=b.useMemo(()=>new Map(Pe.map(J=>[J.id,J])),[Pe]),Nt=b.useMemo(()=>new Map(Pe.map(J=>[J.id,J.full_name])),[Pe]),Vt=b.useMemo(()=>new Map(Tt.map(J=>[J.id,J.name])),[Tt]),Dt=b.useMemo(()=>new Map(se.map(J=>[J.id,J])),[se]),Xt=b.useMemo(()=>lt.get(Number(g)),[lt,g]),Bn=b.useMemo(()=>Xt?.department_id?se.filter(J=>J.department_id===Xt.department_id):se,[Xt?.department_id,se]),Pt=b.useMemo(()=>{if(!z)return se;const J=lt.get(z.employee_id);return J?.department_id?se.filter(qe=>qe.department_id===J.department_id):se},[lt,z,se]),ut=b.useMemo(()=>m.suspiciousOnly?He.filter(J=>Gh(J).length>0):He,[He,m.suspiciousOnly]),dn=at.data?.items??[],jn=at.data?.total??dn.length,We=Math.max(1,Math.ceil(jn/de)),kn=jn===0?0:ze+1,gt=jn===0?0:Math.min(ze+dn.length,jn);b.useEffect(()=>{me(1)},[pt,m.dateFrom,m.dateTo,D]),b.useEffect(()=>{me(J=>Math.min(J,Lt))},[Lt]),b.useEffect(()=>{Qe(1)},[de]),b.useEffect(()=>{Qe(J=>Math.min(J,We))},[We]);const Wa=()=>f({...o}),Dn=()=>{d(ec),f(ec)},Kt=J=>{J.preventDefault();const qe=$h(g);if(!qe||!w){s({variant:"error",title:"Eksik alan",description:"alan ve tarih/saat zorunludur."});return}const xn=$h(E);Qt.mutate({employee_id:qe,type:_,ts_utc:new Date(w).toISOString(),note:O||void 0,shift_id:xn??void 0,allow_duplicate:B})},$n=J=>{Z(J),V(J.type),ee(iM(J.ts_utc)),P(J.note??""),ue(!1),Q(!1),oe(String(Z0(J.flags.SHIFT_ID)??""))},es=J=>{if(J.preventDefault(),!z||!H)return;const qe=$h(te);ne.mutate({eventId:z.id,payload:{type:I,ts_utc:new Date(H).toISOString(),note:X||null,shift_id:qe??void 0,allow_duplicate:je,force_edit:ce}})};return pe.isLoading||Ve.isLoading||Ye.isLoading?n.jsx($t,{}):pe.isError||Ve.isError||Ye.isError?n.jsx(zt,{message:"alan/departman/vardiya bilgileri alnamad."}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"Yoklama Kaytlar",description:"Manuel event ekleme, vardiya dzeltme, soft silme ve audit takibi."}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:[n.jsx(Js,{label:"alan",employees:Pe,value:o.employeeId,onChange:J=>d(qe=>({...qe,employeeId:J})),emptyLabel:"Tm",helperText:"Ad-soyad veya ID ile arayn."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:o.departmentId,onChange:J=>d(qe=>({...qe,departmentId:J.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tm"}),Tt.map(J=>n.jsxs("option",{value:J.id,children:["#",J.id," - ",J.name]},J.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang",n.jsx("input",{type:"date",value:o.dateFrom,onChange:J=>d(qe=>({...qe,dateFrom:J.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti",n.jsx("input",{type:"date",value:o.dateTo,onChange:J=>d(qe=>({...qe,dateTo:J.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Event tipi",n.jsx("select",{value:o.eventType,onChange:J=>d(qe=>({...qe,eventType:J.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:aM.map(J=>n.jsx("option",{value:J.value,children:J.label},J.value))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Konum",n.jsx("select",{value:o.locationStatus,onChange:J=>d(qe=>({...qe,locationStatus:J.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:nM.map(J=>n.jsx("option",{value:J.value,children:J.label},J.value))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Limit",n.jsx("input",{type:"number",value:o.limit,onChange:J=>d(qe=>({...qe,limit:J.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("div",{className:"flex flex-col justify-end gap-2 text-sm text-slate-700",children:[n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:o.duplicatesOnly,onChange:J=>d(qe=>({...qe,duplicatesOnly:J.target.checked}))}),"Sadece mkerrer"]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:o.suspiciousOnly,onChange:J=>d(qe=>({...qe,suspiciousOnly:J.target.checked}))}),"Sadece pheli"]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:o.includeDeleted,onChange:J=>d(qe=>({...qe,includeDeleted:J.target.checked}))}),"Silinenleri gster"]})]})]}),n.jsxs("div",{className:"mt-4 flex gap-2",children:[n.jsx("button",{type:"button",onClick:Wa,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),n.jsx("button",{type:"button",onClick:Dn,className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Manuel Event Ekle"}),n.jsxs("form",{onSubmit:Kt,className:"mt-3 grid gap-3 md:grid-cols-3",children:[n.jsx(Js,{label:"alan",employees:Pe,value:g,onChange:v,emptyLabel:"Seiniz",helperText:"Manuel kayt iin alan sein.",className:"md:col-span-2"}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Event tipi",n.jsxs("select",{value:_,onChange:J=>S(J.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"IN",children:"IN (Giri)"}),n.jsx("option",{value:"OUT",children:"OUT (k)"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Tarih/saat",n.jsx("input",{type:"datetime-local",value:w,onChange:J=>k(J.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya (opsiyonel)",n.jsxs("select",{value:E,onChange:J=>R(J.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Otomatik/bo"}),Bn.map(J=>n.jsxs("option",{value:J.id,children:["#",J.id," - ",J.name," (",J.start_time_local,"-",J.end_time_local,")"]},J.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-3",children:["Not",n.jsx("input",{type:"text",value:O,onChange:J=>T(J.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 md:col-span-3",children:[n.jsx("input",{type:"checkbox",checked:B,onChange:J=>A(J.target.checked)}),"Sra akyorsa duplicate olarak kaydet"]}),n.jsx("div",{className:"md:col-span-3",children:n.jsx("button",{type:"submit",disabled:Qt.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Qt.isPending?"Kaydediliyor...":"Manuel event kaydet"})})]})]}),n.jsxs(Ie,{children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Puantaj Analiz Ozeti"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Secili calisan icin saat bazli net calisma, fazla mesai ve gun tipi kirilimlari."})]}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Ay: ",Rt.getFullYear(),"-",String(Rt.getMonth()+1).padStart(2,"0")]})]}),pt?It.isLoading?n.jsx($t,{}):It.isError?n.jsx(zt,{message:Be(It.error,"Puantaj analiz ozeti alinamadi.").message}):n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-5",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Net calisma"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:n.jsx($e,{minutes:pn.workedMinutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Plan ustu sure"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:n.jsx($e,{minutes:pn.planOvertimeMinutes})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[pn.planOvertimeDayCount," gun"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yasal fazla mesai"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:n.jsx($e,{minutes:pn.overtimeMinutes})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[pn.overtimeDayCount," gun"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Calisilan gun"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:pn.workedDayCount}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Hafta ici: ",pn.weekdayWorkedDayCount]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Pazar / Ozel"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[pn.sundayWorkedDayCount," / ",pn.specialWorkedDayCount," gun"]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-600",children:[n.jsxs("p",{children:["Gosterilen satir: ",be,"-",et," / ",_t.length]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:["Sayfa basi",n.jsx("select",{value:D,onChange:J=>ae(Number(J.target.value)),className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-800",children:q0.map(J=>n.jsx("option",{value:J,children:J},J))})]})]}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"min-w-[1100px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Tarih"}),n.jsx("th",{className:"py-2",children:"Gun Tipi"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Giris"}),n.jsx("th",{className:"py-2",children:"Cikis"}),n.jsx("th",{className:"py-2",children:"Calisma"}),n.jsx("th",{className:"py-2",children:"Plan Ustu"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Sure"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"}),n.jsx("th",{className:"py-2",children:"Bayraklar"})]})}),n.jsx("tbody",{children:Gn.map(J=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:J.date}),n.jsx("td",{className:"py-2",children:Cp(J).label}),n.jsx("td",{className:"py-2",children:J.status}),n.jsx("td",{className:"py-2",children:J.in?Yu(J.in):"-"}),n.jsx("td",{className:"py-2",children:J.out?Yu(J.out):"-"}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:J.worked_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:J.plan_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:J.legal_extra_work_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:J.legal_overtime_minutes})}),n.jsx("td",{className:"py-2 text-xs text-slate-600",children:lM(J.flags)})]},J.date))})]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Sayfa ",F," / ",Lt]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>me(J=>Math.max(1,J-1)),disabled:F<=1,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Onceki"}),n.jsx("button",{type:"button",onClick:()=>me(J=>Math.min(Lt,J+1)),disabled:F>=Lt,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Sonraki"})]})]}),_t.length===0?n.jsx("p",{className:"text-sm text-slate-500",children:"Secili aralikta puantaj gun kaydi bulunamadi."}):null]}):n.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Analiz gormek icin filtrelerden bir calisan secin."})]}),n.jsxs(Ie,{children:[n.jsxs("div",{className:"mb-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam kayt"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ut.length})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"pheli kayt"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ut.filter(J=>Gh(J).length>0).length})]})]}),ft.isLoading?n.jsx($t,{}):null,ft.isError?n.jsx(zt,{message:Be(ft.error,"Yoklama kaytlar alnamad.").message}):null,!ft.isLoading&&!ft.isError?n.jsxs("div",{className:"max-h-[66vh] overflow-auto overscroll-contain",children:[n.jsxs("table",{className:"min-w-[1320px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"ID"}),n.jsx("th",{className:"py-2",children:"alan"}),n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Tip"}),n.jsx("th",{className:"py-2",children:"Kaynak"}),n.jsx("th",{className:"py-2",children:"Zaman"}),n.jsx("th",{className:"py-2",children:"Konum"}),n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Not"}),n.jsx("th",{className:"py-2",children:"Bayraklar"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Aksiyon"})]})}),n.jsx("tbody",{children:ut.map(J=>{const qe=Gh(J),xn=lt.get(J.employee_id),ht=xn?.department_id!=null?Vt.get(xn.department_id):"-",Ue=J.source==="MANUAL"||J.created_by_admin||ac(J.flags,"ADMIN_MANUAL"),sn=Z0(J.flags.SHIFT_ID),yn=typeof J.flags.SHIFT_NAME=="string"?J.flags.SHIFT_NAME:sn&&Dt.get(sn)?Dt.get(sn)?.name:null;return n.jsxs("tr",{className:`border-t border-slate-100 ${qe.length>0?"bg-amber-50/40":""}`,children:[n.jsx("td",{className:"py-2",children:J.id}),n.jsxs("td",{className:"py-2",children:["#",J.employee_id," - ",Nt.get(J.employee_id)??"-"]}),n.jsx("td",{className:"py-2",children:ht??"-"}),n.jsx("td",{className:"py-2",children:J.type}),n.jsxs("td",{className:"py-2",children:[Ue?n.jsx("span",{className:"inline-flex rounded-full bg-indigo-100 px-2 py-1 text-[11px] font-semibold text-indigo-700",children:"MANUEL"}):"CHAZ",J.deleted_at?n.jsx("span",{className:"ml-1 inline-flex rounded-full bg-rose-100 px-2 py-1 text-[11px] font-semibold text-rose-700",children:"SLND"}):null]}),n.jsx("td",{className:"py-2",children:Yu(J.ts_utc)}),n.jsx("td",{className:"py-2",children:rM(J.location_status)}),n.jsx("td",{className:"py-2",children:yn?n.jsxs("span",{children:[yn,sn?` (#${sn})`:""]}):sn?n.jsxs("span",{children:["#",sn]}):"-"}),n.jsx("td",{className:"py-2",children:J.note||"-"}),n.jsx("td",{className:"py-2",children:n.jsx(M_,{reasons:qe})}),n.jsx("td",{className:"py-2",children:n.jsx(A_,{suspicious:qe.length>0,label:"pheli"})}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>$n(J),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Dzenle"}),n.jsx("button",{type:"button",onClick:()=>ie(J),className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50",children:"Soft sil"})]})})]},J.id)})})]}),ut.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Filtreye uygun kayt bulunamad."}):null]}):null]}),n.jsxs(Ie,{children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Audit Log"}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-slate-600",children:["Sayfa basi",n.jsx("select",{value:de,onChange:J=>Ee(Number(J.target.value)),className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-800",children:q0.map(J=>n.jsx("option",{value:J,children:J},J))})]})]}),at.isLoading?n.jsx($t,{}):null,at.isError?n.jsx(zt,{message:Be(at.error,"Audit loglar alnamad.").message}):null,!at.isLoading&&!at.isError?n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("p",{className:"text-xs text-slate-600",children:["Gosterilen satir: ",kn,"-",gt," / ",jn]}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"min-w-[980px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Zaman"}),n.jsx("th",{className:"py-2",children:"Aksiyon"}),n.jsx("th",{className:"py-2",children:"Kullanc"}),n.jsx("th",{className:"py-2",children:"Entity"}),n.jsx("th",{className:"py-2",children:"Durum"})]})}),n.jsx("tbody",{children:dn.map(J=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:Yu(J.ts_utc)}),n.jsx("td",{className:"py-2",children:J.action}),n.jsxs("td",{className:"py-2",children:[J.actor_type,":",J.actor_id]}),n.jsxs("td",{className:"py-2",children:[J.entity_type??"-"," ",J.entity_id?`#${J.entity_id}`:""]}),n.jsx("td",{className:"py-2",children:J.success?"Baarl":"Hatal"})]},J.id))})]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Sayfa ",Oe," / ",We]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Qe(J=>Math.max(1,J-1)),disabled:Oe<=1,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Onceki"}),n.jsx("button",{type:"button",onClick:()=>Qe(J=>Math.min(We,J+1)),disabled:Oe>=We,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Sonraki"})]})]}),dn.length===0?n.jsx("p",{className:"text-sm text-slate-500",children:"Audit kaydi bulunamadi."}):null]}):null]}),n.jsx(_i,{open:z!==null,title:z?`Event #${z.id} dzenle`:"Event dzenle",onClose:()=>Z(null),children:n.jsxs("form",{onSubmit:es,className:"space-y-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Event tipi",n.jsxs("select",{value:I,onChange:J=>V(J.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"IN",children:"IN (Giri)"}),n.jsx("option",{value:"OUT",children:"OUT (k)"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Tarih/saat",n.jsx("input",{type:"datetime-local",value:H,onChange:J=>ee(J.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya (opsiyonel)",n.jsxs("select",{value:te,onChange:J=>oe(J.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Deitirme"}),Pt.map(J=>n.jsxs("option",{value:J.id,children:["#",J.id," - ",J.name," (",J.start_time_local,"-",J.end_time_local,")"]},J.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Not",n.jsx("input",{type:"text",value:X,onChange:J=>P(J.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:je,onChange:J=>ue(J.target.checked)})," Sra akyorsa duplicate olarak gncelle"]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:ce,onChange:J=>Q(J.target.checked)})," Manuel olmayan kaytlarda zorla dzenle"]}),n.jsx("button",{type:"submit",disabled:ne.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:ne.isPending?"Kaydediliyor...":"Kaydet"})]})}),n.jsx(_i,{open:$!==null,title:$?`Event #${$.id} soft sil`:"Event soft sil",onClose:()=>ie(null),children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm text-slate-700",children:"Kayt hard delete edilmez, soft delete olarak iaretlenir."}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:Ae,onChange:J=>_e(J.target.checked)})," Manuel olmayan kaytlarda zorla sil"]}),n.jsx("button",{type:"button",onClick:()=>$&&Se.mutate({eventId:$.id,force:Ae}),disabled:Se.isPending,className:"btn-danger rounded-lg bg-rose-600 px-4 py-2 text-sm font-semibold text-white hover:bg-rose-700 disabled:opacity-60",children:Se.isPending?"Siliniyor...":"Soft sil"})]})})]})}const cM=Xa({employee_id:Kn().int().positive(),expires_in_minutes:Kn().int().positive().max(1440)});function Ju(e){return e?new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"short"}).format(new Date(e)):"-"}function H0(e,s){return`${new Intl.DateTimeFormat("tr-TR",{month:"long"}).format(new Date(Date.UTC(e,s-1,1)))} ${e}`}function uM(e){return e==="FINISHED"?"status-badge status-badge-ok":e==="IN_PROGRESS"?"status-badge status-badge-pending":"status-badge status-badge-neutral"}function dM(){const e=Xn(),[s,l]=b.useState(""),[o,d]=b.useState("30"),[m,f]=b.useState(null),[g,v]=b.useState(null),_=Fe({queryKey:["departments"],queryFn:ji}),S=Fe({queryKey:["employees"],queryFn:()=>Xs({status:"active"})}),w=Fe({queryKey:["devices"],queryFn:m3}),k=Fe({queryKey:["leaves","dashboard"],queryFn:()=>w_({})}),O=Fe({queryKey:["attendance-events","dashboard"],queryFn:()=>Nc({limit:8})}),T=Fe({queryKey:["dashboard-employee-snapshot",s],queryFn:()=>h3({employee_id:Number(s)}),enabled:!!s,staleTime:2e4}),E=Ge({mutationFn:k_,onSuccess:H=>{f({token:H.token,invite_url:H.invite_url}),v(null),e.invalidateQueries({queryKey:["devices"]})},onError:H=>{v(q3(H,"Claim token olusturulamadi."))}}),R=()=>{f(null),v(null);const H=cM.safeParse({employee_id:s,expires_in_minutes:o});if(!H.success){v(H.error.issues[0]?.message??"Form alanlarini kontrol et.");return}E.mutate(H.data)},B=_.data??[],A=S.data??[],z=w.data??[],Z=k.data??[],I=O.data??[],V=b.useMemo(()=>A.find(H=>String(H.id)===s)??null,[A,s]);return _.isLoading||S.isLoading||w.isLoading||k.isLoading||O.isLoading?n.jsx($t,{}):_.isError||S.isError||w.isError||k.isError||O.isError?n.jsx(zt,{message:"Dashboard verileri alinamadi."}):n.jsxs("div",{className:"space-y-6",children:[n.jsx(Wn,{title:"Genel Bakis",description:"Calisan odakli claim token operasyonu ve anlik puantaj gorunumu."}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs(Ie,{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Departman"}),n.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:B.length})]}),n.jsxs(Ie,{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Calisan"}),n.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:A.length})]}),n.jsxs(Ie,{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Cihaz"}),n.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:z.length})]}),n.jsxs(Ie,{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Izin Kaydi"}),n.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:Z.length})]})]}),n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[1.05fr_1.3fr]",children:[n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Claim Token Uretimi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Calisan adi veya ID secip employee claim URL olustur."}),n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsx(Js,{label:"Calisan",employees:A,value:s,onChange:l,placeholder:"Calisan adi veya #ID",helperText:"Tek bir calisan secildiginde dashboard ozet kartlari otomatik dolar."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Token suresi (dakika)",n.jsx("input",{value:o,onChange:H=>d(H.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"30"})]})]}),V?n.jsxs("div",{className:"mt-3 rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:[n.jsxs("p",{children:["Secili: #",V.id," - ",V.full_name]}),n.jsxs("p",{children:["Departman: ",V.department_id??"-"]})]}):null,n.jsx("button",{type:"button",onClick:R,disabled:E.isPending||!s,className:"mt-4 rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:E.isPending?"Olusturuluyor...":"Claim Token Olustur"}),m?n.jsxs("div",{className:"mt-3 rounded-lg border border-emerald-200 bg-emerald-50 p-3 text-sm text-emerald-700",children:[n.jsxs("p",{className:"font-semibold",children:["Token: ",m.token]}),n.jsxs("p",{className:"mt-1 break-all",children:["URL: ",m.invite_url]})]}):null,g?n.jsx("div",{className:"form-validation",children:g}):null]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Calisan Canli Ozet"}),s?null:n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Bir calisan secildiginde bu ay/gecen ay mesai, cihaz ve konum bilgisi gorunur."}),s&&T.isLoading?n.jsx($t,{label:"Calisan ozeti yukleniyor..."}):null,s&&T.isError?n.jsx(zt,{message:"Calisan ozeti alinamadi."}):null,T.data?n.jsxs("div",{className:"mt-3 space-y-4 text-sm",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:uM(T.data.today_status),children:T.data.today_status}),n.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs text-slate-700",children:["Aktif cihaz: ",T.data.active_devices,"/",T.data.total_devices]}),n.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs text-slate-700",children:["Son guncelleme: ",Ju(T.data.generated_at_utc)]})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:H0(T.data.current_month.year,T.data.current_month.month)}),n.jsxs("p",{className:"mt-2 text-xs text-slate-600",children:["Toplam net sure: ",n.jsx($e,{minutes:T.data.current_month.worked_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Plan ustu sure: ",n.jsx($e,{minutes:T.data.current_month.plan_overtime_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla sure: ",n.jsx($e,{minutes:T.data.current_month.extra_work_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla mesai: ",n.jsx($e,{minutes:T.data.current_month.overtime_minutes})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:H0(T.data.previous_month.year,T.data.previous_month.month)}),n.jsxs("p",{className:"mt-2 text-xs text-slate-600",children:["Toplam net sure: ",n.jsx($e,{minutes:T.data.previous_month.worked_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Plan ustu sure: ",n.jsx($e,{minutes:T.data.previous_month.plan_overtime_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla sure: ",n.jsx($e,{minutes:T.data.previous_month.extra_work_minutes})]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Yasal fazla mesai: ",n.jsx($e,{minutes:T.data.previous_month.overtime_minutes})]})]})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Son Puantaj Olayi"}),T.data.last_event?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"mt-2 text-xs text-slate-700",children:["Tip: ",T.data.last_event.event_type]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-700",children:["Zaman: ",Ju(T.data.last_event.ts_utc)]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-700",children:["Konum: ",T.data.last_event.location_status]})]}):n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Kayit bulunamadi."})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Son Konum"}),T.data.latest_location?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"mt-2 text-xs text-slate-700",children:["Lat/Lon: ",T.data.latest_location.lat.toFixed(6),", ",T.data.latest_location.lon.toFixed(6)]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-700",children:["Zaman: ",Ju(T.data.latest_location.ts_utc)]})]}):n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Konum verisi yok."})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Cihazlar"}),T.data.devices.length===0?n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Cihaz kaydi bulunamadi."}):n.jsx("div",{className:"mt-2 space-y-1 text-xs text-slate-700",children:T.data.devices.slice(0,8).map(H=>n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded border border-slate-100 px-2 py-1",children:[n.jsxs("span",{children:["#",H.id," - ",H.device_fingerprint]}),n.jsx("span",{className:H.is_active?"status-badge status-badge-ok":"status-badge status-badge-danger",children:H.is_active?"AKTIF":"PASIF"})]},H.id))})]})]}):null]})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Son Attendance Eventleri"}),n.jsx("div",{className:"mt-4 list-scroll-area",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"ID"}),n.jsx("th",{className:"py-2",children:"Calisan"}),n.jsx("th",{className:"py-2",children:"Tip"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Zaman"})]})}),n.jsx("tbody",{children:I.map(H=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:H.id}),n.jsx("td",{className:"py-2",children:H.employee_id}),n.jsx("td",{className:"py-2",children:H.type}),n.jsx("td",{className:"py-2",children:H.location_status}),n.jsx("td",{className:"py-2",children:Ju(H.ts_utc)})]},H.id))})]})})]})]})}function mM(e,s){const l=window.URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=s,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l)}function hM(){const e=new Date,{pushToast:s}=aa(),l={year:String(e.getFullYear()),month:String(e.getMonth()+1),departmentId:"",includeInactive:!1},[o,d]=b.useState(l),[m,f]=b.useState(l),[g,v]=b.useState(!1),_=Fe({queryKey:["departments"],queryFn:ji}),S=Number(m.year),w=Number(m.month),k=Number(m.departmentId),O=Number.isFinite(S)&&S>0&&Number.isFinite(w)&&w>=1&&w<=12,T=Fe({queryKey:["department-summary",S,w,m.departmentId||"all",m.includeInactive?"with-inactive":"active-only"],queryFn:()=>j3({year:S,month:w,department_id:Number.isFinite(k)&&k>0?k:void 0,include_inactive:m.includeInactive}),enabled:O}),E=T.data??[],R=b.useMemo(()=>E.reduce((I,V)=>(I.worked+=V.worked_minutes,I.planOvertime+=V.plan_overtime_minutes,I.legalExtra+=V.legal_extra_work_minutes,I.legalOvertime+=V.legal_overtime_minutes,I.employeeCount+=V.employee_count,I),{worked:0,planOvertime:0,legalExtra:0,legalOvertime:0,employeeCount:0}),[E]),B=b.useMemo(()=>{const I=[`Yl: ${m.year}`,`Ay: ${m.month}`];if(m.departmentId){const V=_.data?.find(H=>H.id===Number(m.departmentId));I.push(`Departman: ${V?.name??m.departmentId}`)}return m.includeInactive&&I.push("Arivdekiler dahil"),I},[m,_.data]),A=()=>f({...o}),z=()=>{d(l),f(l)},Z=async()=>{if(!O){s({variant:"error",title:"Filtre hatas",description:"Excel indirmek iin geerli yl ve ay sein."});return}try{v(!0);const I=Number.isFinite(k)&&k>0?await M3({department_id:k,year:S,month:w,include_inactive:m.includeInactive}):await z3({year:S,month:w,include_inactive:m.includeInactive}),V=Number.isFinite(k)&&k>0?`department-${k}`:"all";mM(I,`puantaj-${V}-${S}-${String(w).padStart(2,"0")}.xlsx`)}catch(I){s({variant:"error",title:"Excel indirilemedi",description:Be(I,"Dosya oluturulamad.").message})}finally{v(!1)}};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"Departman Aylk zeti",description:"Departman baznda aylk toplam alma, plan st sre ve yasal fazla mesai deerlerini karlatrn.",action:n.jsx("button",{type:"button",onClick:()=>{Z()},disabled:g,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:g?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner inline-spinner-dark","aria-hidden":"true"}),"Hazrlanyor..."]}):"Excel ndir"})}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Yl",n.jsx("input",{type:"number",value:o.year,onChange:I=>d(V=>({...V,year:I.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",n.jsx("input",{type:"number",value:o.month,onChange:I=>d(V=>({...V,month:I.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Departman",n.jsxs("select",{value:o.departmentId,onChange:I=>d(V=>({...V,departmentId:I.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",disabled:_.isLoading,children:[n.jsx("option",{value:"",children:"Tm"}),(_.data??[]).map(I=>n.jsxs("option",{value:I.id,children:["#",I.id," - ",I.name]},I.id))]})]})]}),n.jsxs("label",{className:"mt-3 inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:o.includeInactive,onChange:I=>d(V=>({...V,includeInactive:I.target.checked}))}),"Arivdeki alanlar dahil et"]}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:A,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),n.jsx("button",{type:"button",onClick:z,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:B.map(I=>n.jsx("span",{className:"inline-flex rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:I},I))})]}),O?null:n.jsx(zt,{message:"Yl ve ay deerleri geersiz."}),T.isLoading?n.jsx($t,{}):null,T.isError?n.jsx(zt,{message:Be(T.error,"Departman zeti alnamad.").message}):null,!T.isLoading&&!T.isError?n.jsxs(n.Fragment,{children:[n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Toplamlar"}),n.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 xl:grid-cols-5",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam alma"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:R.worked})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Plan st Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:R.planOvertime})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Yasal Fazla Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:R.legalExtra})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Yasal Fazla Mesai"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:R.legalOvertime})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam alan Says"}),n.jsx("p",{className:"text-lg font-semibold",children:R.employeeCount})]})]})]}),E.length===0?n.jsx(Ie,{children:n.jsx("p",{className:"text-sm text-slate-600",children:"Seilen filtrede departman zeti bulunamad."})}):n.jsx(Ie,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"alan Says"}),n.jsx("th",{className:"py-2",children:"Toplam alma"}),n.jsx("th",{className:"py-2",children:"Plan st"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Sre"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"})]})}),n.jsx("tbody",{children:E.map(I=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsxs("td",{className:"py-2",children:["#",I.department_id," - ",I.department_name]}),n.jsx("td",{className:"py-2",children:I.employee_count}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:I.worked_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:I.plan_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:I.legal_extra_work_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:I.legal_overtime_minutes})})]},I.department_id))})]})})})]}):null]})}function As({value:e,onChange:s,placeholder:l="Isme gore ara..."}){return n.jsxs("label",{className:"block text-sm text-slate-700",children:["Ara",n.jsx("input",{value:e,onChange:o=>s(o.target.value),placeholder:l,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring"})]})}const K0=Xa({name:ma().min(2,"Departman adi en az 2 karakter olmali.").max(255),region_id:_d([Kn().int().positive(),Ff()])});function G0(e){if(fn.isAxiosError(e)&&e.response?.status===409)return"Bu departman adi zaten mevcut. Lutfen farkli bir ad girin.";const s=Be(e,"Departman olusturulamadi.");return s.message.toLowerCase().includes("department name already exists")?"Bu departman adi zaten mevcut. Lutfen farkli bir ad girin.":s.message}function fM(){const e=Xn(),{pushToast:s}=aa(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState(!1),[S,w]=b.useState(""),[k,O]=b.useState(null),[T,E]=b.useState(""),[R,B]=b.useState(""),[A,z]=b.useState(null),Z=Fe({queryKey:["departments",S],queryFn:()=>pA(S?{region_id:Number(S)}:void 0)}),I=Fe({queryKey:["regions","departments-page"],queryFn:()=>eo({include_inactive:!0})}),V=Ge({mutationFn:xA,onSuccess:ue=>{o(""),m(""),z(null),_(!1),s({variant:"success",title:"Departman olusturuldu",description:`${ue.name} basariyla eklendi.`}),e.invalidateQueries({queryKey:["departments"]})},onError:ue=>{const ce=G0(ue);z(ce),s({variant:"error",title:"Departman olusturulamadi",description:ce})}}),H=Ge({mutationFn:({departmentId:ue,name:ce,regionIdValue:Q})=>gA(ue,{name:ce,region_id:Q}),onSuccess:ue=>{z(null),O(null),E(""),B(""),s({variant:"success",title:"Departman guncellendi",description:`${ue.name} basariyla guncellendi.`}),e.invalidateQueries({queryKey:["departments"]})},onError:ue=>{const ce=G0(ue);z(ce),s({variant:"error",title:"Departman guncellenemedi",description:ce})}}),ee=ue=>{ue.preventDefault(),z(null);const ce=d.trim()===""?null:Number(d),Q=K0.safeParse({name:l,region_id:ce});if(!Q.success){const $=Q.error.issues[0]?.message??"Departman alanlarini kontrol edin.";z($),s({variant:"error",title:"Form hatasi",description:$});return}V.mutate({name:Q.data.name,region_id:Q.data.region_id})},X=ue=>{if(ue.preventDefault(),z(null),!k)return;const ce=R.trim()===""?null:Number(R),Q=K0.safeParse({name:T,region_id:ce});if(!Q.success){const $=Q.error.issues[0]?.message??"Departman alanlarini kontrol edin.";z($),s({variant:"error",title:"Form hatasi",description:$});return}H.mutate({departmentId:k,name:Q.data.name,regionIdValue:Q.data.region_id})},P=Z.data??[],te=I.data??[],oe=b.useMemo(()=>new Map(te.map(ue=>[ue.id,ue.name])),[te]),je=b.useMemo(()=>{const ue=f.trim().toLowerCase();return ue?P.filter(ce=>ce.name.toLowerCase().includes(ue)):P},[P,f]);return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"Departmanlar",description:"Departman kayitlarini bolge bazli olarak yonetin.",action:n.jsx("button",{type:"button",onClick:()=>_(ue=>!ue),className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Yeni Departman"})}),v?n.jsxs(Ie,{children:[n.jsxs("form",{onSubmit:ee,className:"grid gap-3 md:grid-cols-3 md:items-end",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Departman adi",n.jsx("input",{value:l,onChange:ue=>o(ue.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Insan Kaynaklari"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge",n.jsxs("select",{value:d,onChange:ue=>m(ue.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Bolge yok"}),te.map(ue=>n.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]}),n.jsxs("div",{className:"flex gap-2 md:col-span-3",children:[n.jsx("button",{type:"submit",disabled:V.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:V.isPending?"Kaydediliyor...":"Kaydet"}),n.jsx("button",{type:"button",onClick:()=>{_(!1),z(null)},className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),A?n.jsx("div",{className:"form-validation",children:A}):null]}):null,k?n.jsxs(Ie,{children:[n.jsxs("form",{onSubmit:X,className:"grid gap-3 md:grid-cols-3 md:items-end",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Departman adi",n.jsx("input",{value:T,onChange:ue=>E(ue.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge",n.jsxs("select",{value:R,onChange:ue=>B(ue.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Bolge yok"}),te.map(ue=>n.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]}),n.jsxs("div",{className:"flex gap-2 md:col-span-3",children:[n.jsx("button",{type:"submit",disabled:H.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:H.isPending?"Guncelleniyor...":"Guncelle"}),n.jsx("button",{type:"button",onClick:()=>{O(null),E(""),B(""),z(null)},className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),A?n.jsx("div",{className:"form-validation",children:A}):null]}):null,Z.isLoading||I.isLoading?n.jsx($t,{}):null,Z.isError||I.isError?n.jsx(zt,{message:"Departman verileri alinamadi."}):null,!Z.isLoading&&!Z.isError&&!I.isLoading&&!I.isError?n.jsxs(Ie,{children:[n.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-3",children:[n.jsx(As,{value:f,onChange:g,placeholder:"Departman adina gore ara..."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge filtresi",n.jsxs("select",{value:S,onChange:ue=>w(ue.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tum bolgeler"}),te.map(ue=>n.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman ID"}),n.jsx("th",{className:"py-2",children:"Departman Adi"}),n.jsx("th",{className:"py-2",children:"Bolge"}),n.jsx("th",{className:"py-2",children:"Islem"})]})}),n.jsx("tbody",{children:je.map(ue=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:ue.id}),n.jsx("td",{className:"py-2",children:ue.name}),n.jsx("td",{className:"py-2",children:ue.region_name??(ue.region_id?oe.get(ue.region_id):"-")??"-"}),n.jsx("td",{className:"py-2",children:n.jsx("button",{type:"button",onClick:()=>{O(ue.id),E(ue.name),B(ue.region_id?String(ue.region_id):""),z(null)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"})})]},ue.id))})]})}),je.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Arama kriterine uygun departman bulunamadi."}):null]}):null]})}function cr({value:e}){const s=e.toUpperCase();return s==="OK"||s==="AKTIF"||s==="APPROVED"?n.jsx("span",{className:"status-badge status-badge-ok",children:e}):s==="INCOMPLETE"?n.jsx("span",{className:"status-badge status-badge-incomplete",children:"INCOMPLETE"}):s==="LEAVE"?n.jsx("span",{className:"status-badge status-badge-leave",children:"LEAVE"}):s==="OFF"?n.jsx("span",{className:"status-badge status-badge-neutral",children:"OFF"}):s==="PENDING"?n.jsx("span",{className:"status-badge status-badge-pending",children:"PENDING"}):s==="REJECTED"||s==="PASIF"?n.jsx("span",{className:"status-badge status-badge-danger",children:e}):n.jsx("span",{className:"status-badge status-badge-neutral",children:e})}function Qh(e){return e?new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"short"}).format(new Date(e)):"-"}function pM(e){return e==="ACTIVE"?"Aktif":"Kullanildi/Suresi Doldu"}function xM(){const e=Xn(),{pushToast:s}=aa(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(!0),[v,_]=b.useState(""),[S,w]=b.useState(1),[k,O]=b.useState(50),[T,E]=b.useState(null),[R,B]=b.useState(null),A=l?Number(l):void 0,z=A?0:(S-1)*k,Z=Fe({queryKey:["employee-device-overview-summary",A??null,d,f,v,S,k],queryFn:()=>I0({employee_id:A,region_id:d?Number(d):void 0,include_inactive:f,q:v.trim()||void 0,offset:z,limit:A?1:k,device_limit:1})}),I=Fe({queryKey:["employee-device-overview-detail",T],enabled:T!==null,queryFn:()=>I0({employee_id:T??void 0,include_inactive:!0,include_recovery_secrets:!0,offset:0,limit:1,device_limit:100})}),V=Fe({queryKey:["employees","all-for-devices"],queryFn:()=>Xs({include_inactive:!0,status:"all"})}),H=Fe({queryKey:["regions","devices-page"],queryFn:()=>eo({include_inactive:!0})}),ee=Ge({mutationFn:({deviceId:ce,isActive:Q})=>b3(ce,{is_active:Q}),onSuccess:ce=>{s({variant:"success",title:ce.is_active?"Cihaz aktif edildi":"Cihaz pasife alnd",description:`Cihaz #${ce.id} durumu gncellendi.`}),e.invalidateQueries({queryKey:["employee-device-overview-summary"]}),e.invalidateQueries({queryKey:["employee-device-overview-detail"]})},onError:ce=>{s({variant:"error",title:"Cihaz durumu gncellenemedi",description:Be(ce,"lem baarsz.").message})}}),X=V.data??[],P=H.data??[],te=Z.data??[],oe=I.data?.[0],je=!A&&te.length===k,ue=!A&&S>1;return Z.isLoading||V.isLoading||H.isLoading?n.jsx($t,{}):Z.isError?n.jsx(zt,{message:Be(Z.error,"Cihaz verisi alnamad.").message}):V.isError?n.jsx(zt,{message:Be(V.error,"alan listesi alnamad.").message}):H.isError?n.jsx(zt,{message:Be(H.error,"Bolge listesi alinamadi.").message}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"Cihazlar ve Token Takibi",description:"Youn kullanm iin optimize edilmi liste grnm. Satrdan detay ap cihazlar ynetin."}),n.jsxs(Ie,{children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-5 md:items-end",children:[n.jsx(Js,{label:"alan filtresi",employees:X,value:l,onChange:ce=>{o(ce),w(1),E(null)},emptyLabel:"Tm",helperText:"Ad-soyad veya ID ile filtreleyin."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["zet arama",n.jsx("input",{type:"text",value:v,onChange:ce=>{_(ce.target.value),w(1),E(null)},placeholder:"alan ad veya ID",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Sayfa boyutu",n.jsxs("select",{value:k,onChange:ce=>{O(Number(ce.target.value)),w(1),E(null)},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge filtresi",n.jsxs("select",{value:d,onChange:ce=>{m(ce.target.value),w(1),E(null)},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tum bolgeler"}),P.map(ce=>n.jsx("option",{value:ce.id,children:ce.name},ce.id))]})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:f,onChange:ce=>{g(ce.target.checked),w(1),E(null)}}),"Pasif alanlar gster"]})]}),A?null:n.jsxs("div",{className:"mt-3 flex items-center justify-end gap-2",children:[n.jsx("button",{type:"button",disabled:!ue,onClick:()=>{w(ce=>Math.max(1,ce-1)),E(null)},className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"nceki"}),n.jsxs("span",{className:"text-xs text-slate-500",children:["Sayfa ",S]}),n.jsx("button",{type:"button",disabled:!je,onClick:()=>{w(ce=>ce+1),E(null)},className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}),n.jsxs(Ie,{children:[n.jsx("div",{className:"max-h-[68vh] overflow-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"sticky top-0 z-10 bg-white text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2",children:"alan"}),n.jsx("th",{className:"px-2 py-2",children:"Departman"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Cihaz"}),n.jsx("th",{className:"px-2 py-2",children:"Token"}),n.jsx("th",{className:"px-2 py-2 text-right",children:"lem"})]})}),n.jsx("tbody",{children:te.map(ce=>{const Q=T===ce.employee_id;return n.jsxs(b.Fragment,{children:[n.jsxs("tr",{className:"border-t border-slate-100 align-top hover:bg-slate-50/60",children:[n.jsx("td",{className:"px-2 py-2",children:n.jsxs("div",{className:"font-medium text-slate-900",children:["#",ce.employee_id," - ",ce.employee_name]})}),n.jsx("td",{className:"px-2 py-2 text-xs text-slate-600",children:ce.department_name??ce.department_id??"-"}),n.jsx("td",{className:"px-2 py-2",children:n.jsx(cr,{value:ce.is_employee_active?"Aktif":"Pasif"})}),n.jsxs("td",{className:"px-2 py-2 text-xs text-slate-700",children:[n.jsx("span",{className:"font-semibold",children:ce.active_devices})," aktif / ",ce.total_devices," toplam"]}),n.jsxs("td",{className:"px-2 py-2 text-xs text-slate-700",children:["K:",ce.token_used," B:",ce.token_pending," D:",ce.token_expired," T:",ce.token_total]}),n.jsx("td",{className:"px-2 py-2 text-right",children:n.jsx("button",{type:"button",onClick:()=>{E($=>$===ce.employee_id?null:ce.employee_id)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:Q?"Kapat":"Cihazlar Ynet"})})]}),Q?n.jsx("tr",{className:"border-t border-slate-100 bg-slate-50/70",children:n.jsx("td",{colSpan:6,className:"px-2 py-3",children:I.isLoading?n.jsx("p",{className:"text-xs text-slate-500",children:"Cihaz listesi ykleniyor..."}):I.isError?n.jsx("p",{className:"text-xs text-rose-700",children:"Cihaz detaylar alnamad."}):oe?n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full text-left text-xs",children:[n.jsx("thead",{className:"uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Cihaz ID"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Fingerprint"}),n.jsx("th",{className:"py-2",children:"Recovery"}),n.jsx("th",{className:"py-2",children:"Oluturulma"}),n.jsx("th",{className:"py-2 text-right",children:"lem"})]})}),n.jsx("tbody",{children:oe.devices.map($=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:$.id}),n.jsx("td",{className:"py-2",children:n.jsx(cr,{value:$.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2 font-mono",children:$.device_fingerprint}),n.jsx("td",{className:"py-2 text-[11px] text-slate-700",children:$.recovery_ready?n.jsxs("span",{className:"rounded-full bg-emerald-100 px-2 py-1 font-semibold text-emerald-700",children:["Hazir (",$.recovery_code_active_count,")"]}):n.jsx("span",{className:"rounded-full bg-amber-100 px-2 py-1 font-semibold text-amber-700",children:"Kurulu Degil"})}),n.jsx("td",{className:"py-2",children:Qh($.created_at)}),n.jsx("td",{className:"py-2 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>B($),className:"rounded-lg border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",children:"Detay"}),n.jsx("button",{type:"button",disabled:ee.isPending,onClick:()=>ee.mutate({deviceId:$.id,isActive:!$.is_active}),className:`rounded-lg px-2 py-1 text-[11px] font-semibold text-white ${$.is_active?"bg-rose-600 hover:bg-rose-700":"bg-emerald-600 hover:bg-emerald-700"} disabled:cursor-not-allowed disabled:opacity-60`,children:$.is_active?"Pasife Al":"Aktif Et"})]})})]},$.id))})]}),oe.has_more_devices?n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Bu alan iin daha fazla cihaz var. lk 100 cihaz gsteriliyor."}):null,oe.devices.length===0?n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Bu alana bal cihaz yok."}):null]}):n.jsx("p",{className:"text-xs text-slate-500",children:"Cihaz detay bulunamad."})})}):null]},ce.employee_id)})})]})}),te.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Seilen filtreye uygun alan veya cihaz kayd yok."}):null]}),n.jsx(_i,{open:R!==null,title:R?`Cihaz #${R.id} Recovery Detayi`:"Recovery Detayi",onClose:()=>B(null),children:R?n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Fingerprint"}),n.jsx("p",{className:"mt-1 break-all font-mono text-xs text-slate-800",children:R.device_fingerprint})]}),n.jsxs("div",{className:"grid gap-2 rounded-lg border border-slate-200 p-3 sm:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recovery Durumu"}),n.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:R.recovery_ready?"Hazir":"Kurulu Degil"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Aktif Kod"}),n.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:R.recovery_code_active_count})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"PIN Son Guncelleme"}),n.jsx("p",{className:"mt-1 text-slate-800",children:Qh(R.recovery_pin_updated_at)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Kod Son Gecerlilik"}),n.jsx("p",{className:"mt-1 text-slate-800",children:Qh(R.recovery_expires_at)})]})]}),n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-rose-700",children:"Recovery PIN"}),n.jsx("p",{className:"mt-1 font-mono text-lg font-semibold text-rose-900",children:R.recovery_pin_plain??"-"})]}),R.recovery_code_entries.length>0?n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recovery Kodlari"}),n.jsx("div",{className:"mt-2 space-y-2",children:R.recovery_code_entries.map(ce=>n.jsxs("div",{className:"flex items-center justify-between rounded border border-slate-200 px-3 py-2",children:[n.jsx("span",{className:"font-mono text-slate-900",children:ce.code}),n.jsx("span",{className:`rounded-full px-2 py-1 text-[11px] font-semibold ${ce.status==="ACTIVE"?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:pM(ce.status)})]},`${R.id}-${ce.code}`))})]}):n.jsx("p",{className:"text-xs text-slate-500",children:"Bu cihaz icin kayitli recovery kodu bulunamadi."})]}):null})]})}function gM(){const e=Xn(),{pushToast:s}=aa(),l=Fe({queryKey:["compliance-settings"],queryFn:E3}),[o,d]=b.useState({name:"TR_DEFAULT",weekly_normal_minutes_default:2700,daily_max_minutes:660,enforce_min_break_rules:!1,night_work_max_minutes_default:450,night_work_exceptions_note_enabled:!0,overtime_annual_cap_minutes:16200,overtime_premium:1.5,extra_work_premium:1.25,overtime_rounding_mode:"OFF"});b.useEffect(()=>{l.data&&d({name:l.data.name,weekly_normal_minutes_default:l.data.weekly_normal_minutes_default,daily_max_minutes:l.data.daily_max_minutes,enforce_min_break_rules:l.data.enforce_min_break_rules,night_work_max_minutes_default:l.data.night_work_max_minutes_default,night_work_exceptions_note_enabled:l.data.night_work_exceptions_note_enabled,overtime_annual_cap_minutes:l.data.overtime_annual_cap_minutes,overtime_premium:l.data.overtime_premium,extra_work_premium:l.data.extra_work_premium,overtime_rounding_mode:l.data.overtime_rounding_mode})},[l.data]);const m=Ge({mutationFn:T3,onSuccess:()=>{s({variant:"success",title:"Uyumluluk ayarlari guncellendi",description:"Yasal puantaj hesaplama parametreleri kaydedildi."}),e.invalidateQueries({queryKey:["compliance-settings"]}),e.invalidateQueries({queryKey:["employee-monthly"]})},onError:f=>{s({variant:"error",title:"Kayit hatasi",description:Be(f,"Ayarlar kaydedilemedi.").message})}});return l.isLoading?n.jsx($t,{}):l.isError?n.jsx(zt,{message:Be(l.error,"Uyumluluk ayarlari alinamadi.").message}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"Uyumluluk Ayarlar",description:"Turk is kanunu varsayimlarini yonetmek iin bu ayarlari kullanin."}),n.jsx(Ie,{children:n.jsxs("form",{className:"grid gap-3 md:grid-cols-2",onSubmit:f=>{f.preventDefault(),m.mutate(o)},children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Profil Adi",n.jsx("input",{value:o.name,onChange:f=>d(g=>({...g,name:f.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Haftalik Normal Sure (dk)",n.jsx("input",{type:"number",min:1,value:o.weekly_normal_minutes_default,onChange:f=>d(g=>({...g,weekly_normal_minutes_default:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gnlk Azami Sure (dk)",n.jsx("input",{type:"number",min:1,value:o.daily_max_minutes,onChange:f=>d(g=>({...g,daily_max_minutes:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gece Azami Sure (dk)",n.jsx("input",{type:"number",min:1,value:o.night_work_max_minutes_default,onChange:f=>d(g=>({...g,night_work_max_minutes_default:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yillik Fazla Mesai Limiti (dk)",n.jsx("input",{type:"number",min:1,value:o.overtime_annual_cap_minutes,onChange:f=>d(g=>({...g,overtime_annual_cap_minutes:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Fazla Mesai Carpani",n.jsx("input",{type:"number",min:1,step:"0.01",value:o.overtime_premium,onChange:f=>d(g=>({...g,overtime_premium:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ek Calisma Carpani",n.jsx("input",{type:"number",min:1,step:"0.01",value:o.extra_work_premium,onChange:f=>d(g=>({...g,extra_work_premium:Number(f.target.value)})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Fazla Mesai Yuvarlama",n.jsxs("select",{value:o.overtime_rounding_mode,onChange:f=>d(g=>({...g,overtime_rounding_mode:f.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"OFF",children:"OFF"}),n.jsx("option",{value:"REG_HALF_HOUR",children:"REG_HALF_HOUR"})]})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 md:col-span-2",children:[n.jsx("input",{type:"checkbox",checked:o.enforce_min_break_rules,onChange:f=>d(g=>({...g,enforce_min_break_rules:f.target.checked}))}),"Asgari mola kurallarini uygula (Is Kanunu madde 68)"]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 md:col-span-2",children:[n.jsx("input",{type:"checkbox",checked:o.night_work_exceptions_note_enabled,onChange:f=>d(g=>({...g,night_work_exceptions_note_enabled:f.target.checked}))}),"Gece calisma istisna notu bayragini aktif tut"]}),n.jsx("div",{className:"md:col-span-2",children:n.jsx("button",{type:"submit",disabled:m.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:m.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Kaydediliyor..."]}):"Ayarlar Kaydet"})})]})}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Hizli zet"}),n.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Haftalik normal sure"}),n.jsx("p",{className:"font-semibold",children:n.jsx($e,{minutes:o.weekly_normal_minutes_default})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Gnlk ust sinir"}),n.jsx("p",{className:"font-semibold",children:n.jsx($e,{minutes:o.daily_max_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yillik fazla mesai limiti"}),n.jsx("p",{className:"font-semibold",children:n.jsx($e,{minutes:o.overtime_annual_cap_minutes})})]})]})]})]})}const yM=Xa({username:ma().min(1,"Kullanici adi gerekli."),password:ma().min(1,"Sifre gerekli.")});function vM(e,s){const l=window.URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=s,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l)}function bM(e){return e.code==="INVALID_CREDENTIALS"?"Sifre dogrulanamadi":e.code==="TOO_MANY_ATTEMPTS"?"Cok fazla deneme":e.code==="INTERNAL_ERROR"?"Sunucu hatasi":"Indirme basarisiz"}function _M(){const[e]=fc(),[s,l]=b.useState("admin"),[o,d]=b.useState(""),[m,f]=b.useState(null),[g,v]=b.useState(null),[_,S]=b.useState(!1),w=b.useMemo(()=>{const O=e.get("archive_id");if(!O)return null;const T=Number(O);return!Number.isInteger(T)||T<=0?null:T},[e]),k=async O=>{if(O.preventDefault(),f(null),v(null),!w){f({message:"Gecerli bir arsiv kimligi bulunamadi."});return}const T=yM.safeParse({username:s,password:o});if(!T.success){f({message:T.error.issues[0]?.message??"Form alanlarini kontrol edin."});return}S(!0);try{const E=await o3(w,T.data),R=E.file_name??`arsiv-${w}.xlsx`;vM(E.blob,R),v("Indirme baslatildi. Dosya cihaziniza kaydedildi."),d("")}catch(E){f(Be(E,"Excel dosyasi indirilemedi."))}finally{S(!1)}};return n.jsx("div",{className:"admin-auth-screen flex min-h-screen items-center justify-center px-4",children:n.jsxs("div",{className:"admin-auth-card w-full max-w-md rounded-2xl border border-slate-200 bg-white p-8 shadow-panel",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Excel Arsiv Indirme"}),n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Admin sifreni dogrula, gunluk puantaj Excel dosyasi panel acmadan indirilsin."}),n.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Arsiv ID: ",w??"-"]}),n.jsxs("form",{onSubmit:k,className:"mt-6 space-y-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Kullanici Adi"}),n.jsx("input",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:s,onChange:O=>l(O.target.value)})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Sifre"}),n.jsx("input",{type:"password",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:o,onChange:O=>d(O.target.value)})]}),m?n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[n.jsx("p",{className:"font-semibold",children:bM(m)}),n.jsx("p",{className:"mt-1",children:m.message}),m.requestId?n.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",m.requestId]}):null]}):null,g?n.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-3 text-sm text-emerald-700",children:g}):null,n.jsx("button",{type:"submit",disabled:_||!w,className:"btn-animated w-full rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:_?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Dogrulaniyor..."]}):"Sifreyi dogrula ve indir"})]}),n.jsxs("p",{className:"admin-auth-signature mt-5 text-center text-xs tracking-wide text-slate-500",children:[ps.signatureText," | BUILD: ",ps.buildVersion]})]})})}const NM=Xa({username:ma().min(1,"Kullanici adi gerekli."),password:ma().min(1,"Sifre gerekli.")});function Vh(e){if(!e)return"-";const s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat("tr-TR",{timeZone:"Europe/Istanbul",dateStyle:"medium",timeStyle:"medium"}).format(s)}function jM(e){return e==="PENDING"?"Onay Bekliyor":e==="APPROVED"?"Onaylandi":e==="CONSUMED"?"Kullanildi":"Suresi Doldu"}function SM(e){return e==="PENDING"?"bg-amber-100 text-amber-800 border-amber-200":e==="APPROVED"?"bg-emerald-100 text-emerald-800 border-emerald-200":e==="CONSUMED"?"bg-cyan-100 text-cyan-800 border-cyan-200":"bg-rose-100 text-rose-800 border-rose-200"}function $0(e){return e.code==="INVALID_CREDENTIALS"?"Sifre dogrulanamadi":e.code==="TOO_MANY_ATTEMPTS"?"Cok fazla deneme":e.code==="EXTRA_CHECKIN_APPROVAL_EXPIRED"?"Talep suresi dolmus":e.code==="EXTRA_CHECKIN_APPROVAL_NOT_FOUND"?"Talep bulunamadi":"Onay islemi basarisiz"}function wM(){const[e]=fc(),s=b.useMemo(()=>e.get("token")?.trim()??"",[e]),[l,o]=b.useState(null),[d,m]=b.useState(!1),[f,g]=b.useState(null),[v,_]=b.useState(null),[S,w]=b.useState(null),[k,O]=b.useState("admin"),[T,E]=b.useState(""),[R,B]=b.useState(!1);b.useEffect(()=>{if(!s){g({message:"Onay tokeni bulunamadi."}),o(null);return}let z=!1;return(async()=>{m(!0),g(null);try{const I=await c3(s);z||o(I)}catch(I){z||(g(Be(I,"Onay talebi yuklenemedi.")),o(null))}finally{z||m(!1)}})(),()=>{z=!0}},[s]);const A=async z=>{if(z.preventDefault(),_(null),w(null),!l||l.status!=="PENDING")return;const Z=NM.safeParse({username:k,password:T});if(!Z.success){_({message:Z.error.issues[0]?.message??"Form alanlarini kontrol edin."});return}B(!0);try{const I=await u3({token:s,username:Z.data.username,password:Z.data.password});o(I.approval),E(""),w(I.already_processed?"Talep daha once islenmis. Calisan tekrar giris deneyebilir.":"Onay verildi. Calisan ikinci giris islemini tekrar deneyebilir.")}catch(I){_(Be(I,"Onay islemi tamamlanamadi."))}finally{B(!1)}};return n.jsx("div",{className:"admin-auth-screen flex min-h-screen items-center justify-center px-4",children:n.jsxs("div",{className:"admin-auth-card w-full max-w-2xl rounded-2xl border border-slate-200 bg-white p-8 shadow-panel",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Ek Giris Admin Onayi"}),n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Gunluk mesai tamamlama sonrasi ikinci giris denemesi icin sifre dogrulayarak onay verin."}),s?null:n.jsx("div",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:"Gecerli bir token olmadan onay islemi baslatilamaz."}),d?n.jsx("div",{className:"mt-4 rounded-lg border border-slate-200 bg-slate-50 px-3 py-3 text-sm text-slate-700",children:"Talep yukleniyor..."}):null,f?n.jsxs("div",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[n.jsx("p",{className:"font-semibold",children:$0(f)}),n.jsx("p",{className:"mt-1",children:f.message}),f.requestId?n.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",f.requestId]}):null]}):null,l?n.jsxs("section",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:["#",l.employee_id," - ",l.employee_name]}),n.jsx("span",{className:`inline-flex rounded-full border px-2 py-1 text-xs font-semibold ${SM(l.status)}`,children:jM(l.status)})]}),n.jsxs("div",{className:"mt-3 grid gap-2 text-xs text-slate-600 sm:grid-cols-2",children:[n.jsxs("p",{children:["Mesai gunu: ",l.local_day]}),n.jsxs("p",{children:["Istenen cihaz ID: ",l.device_id??"-"]}),n.jsxs("p",{children:["Talep zamani: ",Vh(l.requested_at)]}),n.jsxs("p",{children:["Son gecerlilik: ",Vh(l.expires_at)]}),n.jsxs("p",{children:["Onaylayan: ",l.approved_by_username??"-"]}),n.jsxs("p",{children:["Kullanilma zamani: ",Vh(l.consumed_at)]})]}),n.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Push dagitimi: hedef ",l.push_total_targets," | gonderilen ",l.push_sent," | hata ",l.push_failed]})]}):null,S?n.jsx("div",{className:"mt-4 rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-3 text-sm text-emerald-700",children:S}):null,l?.status==="PENDING"?n.jsxs("form",{onSubmit:A,className:"mt-5 space-y-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Kullanici Adi"}),n.jsx("input",{value:k,onChange:z=>O(z.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",autoComplete:"username"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Sifre (MFA gerektirmez)"}),n.jsx("input",{type:"password",value:T,onChange:z=>E(z.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",autoComplete:"current-password"})]}),v?n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[n.jsx("p",{className:"font-semibold",children:$0(v)}),n.jsx("p",{className:"mt-1",children:v.message}),v.requestId?n.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",v.requestId]}):null]}):null,n.jsx("button",{type:"submit",disabled:R,className:"btn-animated w-full rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:R?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Onay veriliyor..."]}):"Evet, 2. Girisi Onayla"})]}):null,n.jsxs("p",{className:"admin-auth-signature mt-5 text-center text-xs tracking-wide text-slate-500",children:[ps.signatureText," | BUILD: ",ps.buildVersion]})]})})}var Fl={},Yh,Q0;function kM(){return Q0||(Q0=1,Yh=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Yh}var Jh={},sr={},V0;function el(){if(V0)return sr;V0=1;let e;const s=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return sr.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},sr.getSymbolTotalCodewords=function(o){return s[o]},sr.getBCHDigit=function(l){let o=0;for(;l!==0;)o++,l>>>=1;return o},sr.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');e=o},sr.isKanjiModeEnabled=function(){return typeof e<"u"},sr.toSJIS=function(o){return e(o)},sr}var Xh={},Y0;function Ap(){return Y0||(Y0=1,(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function s(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+l)}}e.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},e.from=function(o,d){if(e.isValid(o))return o;try{return s(o)}catch{return d}}})(Xh)),Xh}var Wh,J0;function EM(){if(J0)return Wh;J0=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(s){const l=Math.floor(s/8);return(this.buffer[l]>>>7-s%8&1)===1},put:function(s,l){for(let o=0;o<l;o++)this.putBit((s>>>l-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(s){const l=Math.floor(this.length/8);this.buffer.length<=l&&this.buffer.push(0),s&&(this.buffer[l]|=128>>>this.length%8),this.length++}},Wh=e,Wh}var ef,X0;function TM(){if(X0)return ef;X0=1;function e(s){if(!s||s<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=s,this.data=new Uint8Array(s*s),this.reservedBit=new Uint8Array(s*s)}return e.prototype.set=function(s,l,o,d){const m=s*this.size+l;this.data[m]=o,d&&(this.reservedBit[m]=!0)},e.prototype.get=function(s,l){return this.data[s*this.size+l]},e.prototype.xor=function(s,l,o){this.data[s*this.size+l]^=o},e.prototype.isReserved=function(s,l){return this.reservedBit[s*this.size+l]},ef=e,ef}var tf={},W0;function CM(){return W0||(W0=1,(function(e){const s=el().getSymbolSize;e.getRowColCoords=function(o){if(o===1)return[];const d=Math.floor(o/7)+2,m=s(o),f=m===145?26:Math.ceil((m-13)/(2*d-2))*2,g=[m-7];for(let v=1;v<d-1;v++)g[v]=g[v-1]-f;return g.push(6),g.reverse()},e.getPositions=function(o){const d=[],m=e.getRowColCoords(o),f=m.length;for(let g=0;g<f;g++)for(let v=0;v<f;v++)g===0&&v===0||g===0&&v===f-1||g===f-1&&v===0||d.push([m[g],m[v]]);return d}})(tf)),tf}var nf={},ev;function AM(){if(ev)return nf;ev=1;const e=el().getSymbolSize,s=7;return nf.getPositions=function(o){const d=e(o);return[[0,0],[d-s,0],[0,d-s]]},nf}var af={},tv;function MM(){return tv||(tv=1,(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const s={N1:3,N2:3,N3:40,N4:10};e.isValid=function(d){return d!=null&&d!==""&&!isNaN(d)&&d>=0&&d<=7},e.from=function(d){return e.isValid(d)?parseInt(d,10):void 0},e.getPenaltyN1=function(d){const m=d.size;let f=0,g=0,v=0,_=null,S=null;for(let w=0;w<m;w++){g=v=0,_=S=null;for(let k=0;k<m;k++){let O=d.get(w,k);O===_?g++:(g>=5&&(f+=s.N1+(g-5)),_=O,g=1),O=d.get(k,w),O===S?v++:(v>=5&&(f+=s.N1+(v-5)),S=O,v=1)}g>=5&&(f+=s.N1+(g-5)),v>=5&&(f+=s.N1+(v-5))}return f},e.getPenaltyN2=function(d){const m=d.size;let f=0;for(let g=0;g<m-1;g++)for(let v=0;v<m-1;v++){const _=d.get(g,v)+d.get(g,v+1)+d.get(g+1,v)+d.get(g+1,v+1);(_===4||_===0)&&f++}return f*s.N2},e.getPenaltyN3=function(d){const m=d.size;let f=0,g=0,v=0;for(let _=0;_<m;_++){g=v=0;for(let S=0;S<m;S++)g=g<<1&2047|d.get(_,S),S>=10&&(g===1488||g===93)&&f++,v=v<<1&2047|d.get(S,_),S>=10&&(v===1488||v===93)&&f++}return f*s.N3},e.getPenaltyN4=function(d){let m=0;const f=d.data.length;for(let v=0;v<f;v++)m+=d.data[v];return Math.abs(Math.ceil(m*100/f/5)-10)*s.N4};function l(o,d,m){switch(o){case e.Patterns.PATTERN000:return(d+m)%2===0;case e.Patterns.PATTERN001:return d%2===0;case e.Patterns.PATTERN010:return m%3===0;case e.Patterns.PATTERN011:return(d+m)%3===0;case e.Patterns.PATTERN100:return(Math.floor(d/2)+Math.floor(m/3))%2===0;case e.Patterns.PATTERN101:return d*m%2+d*m%3===0;case e.Patterns.PATTERN110:return(d*m%2+d*m%3)%2===0;case e.Patterns.PATTERN111:return(d*m%3+(d+m)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}e.applyMask=function(d,m){const f=m.size;for(let g=0;g<f;g++)for(let v=0;v<f;v++)m.isReserved(v,g)||m.xor(v,g,l(d,v,g))},e.getBestMask=function(d,m){const f=Object.keys(e.Patterns).length;let g=0,v=1/0;for(let _=0;_<f;_++){m(_),e.applyMask(_,d);const S=e.getPenaltyN1(d)+e.getPenaltyN2(d)+e.getPenaltyN3(d)+e.getPenaltyN4(d);e.applyMask(_,d),S<v&&(v=S,g=_)}return g}})(af)),af}var Xu={},nv;function R_(){if(nv)return Xu;nv=1;const e=Ap(),s=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],l=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Xu.getBlocksCount=function(d,m){switch(m){case e.L:return s[(d-1)*4+0];case e.M:return s[(d-1)*4+1];case e.Q:return s[(d-1)*4+2];case e.H:return s[(d-1)*4+3];default:return}},Xu.getTotalCodewordsCount=function(d,m){switch(m){case e.L:return l[(d-1)*4+0];case e.M:return l[(d-1)*4+1];case e.Q:return l[(d-1)*4+2];case e.H:return l[(d-1)*4+3];default:return}},Xu}var sf={},tc={},av;function zM(){if(av)return tc;av=1;const e=new Uint8Array(512),s=new Uint8Array(256);return(function(){let o=1;for(let d=0;d<255;d++)e[d]=o,s[o]=d,o<<=1,o&256&&(o^=285);for(let d=255;d<512;d++)e[d]=e[d-255]})(),tc.log=function(o){if(o<1)throw new Error("log("+o+")");return s[o]},tc.exp=function(o){return e[o]},tc.mul=function(o,d){return o===0||d===0?0:e[s[o]+s[d]]},tc}var sv;function OM(){return sv||(sv=1,(function(e){const s=zM();e.mul=function(o,d){const m=new Uint8Array(o.length+d.length-1);for(let f=0;f<o.length;f++)for(let g=0;g<d.length;g++)m[f+g]^=s.mul(o[f],d[g]);return m},e.mod=function(o,d){let m=new Uint8Array(o);for(;m.length-d.length>=0;){const f=m[0];for(let v=0;v<d.length;v++)m[v]^=s.mul(d[v],f);let g=0;for(;g<m.length&&m[g]===0;)g++;m=m.slice(g)}return m},e.generateECPolynomial=function(o){let d=new Uint8Array([1]);for(let m=0;m<o;m++)d=e.mul(d,new Uint8Array([1,s.exp(m)]));return d}})(sf)),sf}var rf,iv;function RM(){if(iv)return rf;iv=1;const e=OM();function s(l){this.genPoly=void 0,this.degree=l,this.degree&&this.initialize(this.degree)}return s.prototype.initialize=function(o){this.degree=o,this.genPoly=e.generateECPolynomial(this.degree)},s.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const d=new Uint8Array(o.length+this.degree);d.set(o);const m=e.mod(d,this.genPoly),f=this.degree-m.length;if(f>0){const g=new Uint8Array(this.degree);return g.set(m,f),g}return m},rf=s,rf}var lf={},of={},cf={},rv;function D_(){return rv||(rv=1,cf.isValid=function(s){return!isNaN(s)&&s>=1&&s<=40}),cf}var Qs={},lv;function L_(){if(lv)return Qs;lv=1;const e="[0-9]+",s="[A-Z $%*+\\-./:]+";let l="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";l=l.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+l+`)(?:.|[\r
]))+`;Qs.KANJI=new RegExp(l,"g"),Qs.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Qs.BYTE=new RegExp(o,"g"),Qs.NUMERIC=new RegExp(e,"g"),Qs.ALPHANUMERIC=new RegExp(s,"g");const d=new RegExp("^"+l+"$"),m=new RegExp("^"+e+"$"),f=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Qs.testKanji=function(v){return d.test(v)},Qs.testNumeric=function(v){return m.test(v)},Qs.testAlphanumeric=function(v){return f.test(v)},Qs}var ov;function tl(){return ov||(ov=1,(function(e){const s=D_(),l=L_();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(m,f){if(!m.ccBits)throw new Error("Invalid mode: "+m);if(!s.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?m.ccBits[0]:f<27?m.ccBits[1]:m.ccBits[2]},e.getBestModeForData=function(m){return l.testNumeric(m)?e.NUMERIC:l.testAlphanumeric(m)?e.ALPHANUMERIC:l.testKanji(m)?e.KANJI:e.BYTE},e.toString=function(m){if(m&&m.id)return m.id;throw new Error("Invalid mode")},e.isValid=function(m){return m&&m.bit&&m.ccBits};function o(d){if(typeof d!="string")throw new Error("Param is not a string");switch(d.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+d)}}e.from=function(m,f){if(e.isValid(m))return m;try{return o(m)}catch{return f}}})(of)),of}var cv;function DM(){return cv||(cv=1,(function(e){const s=el(),l=R_(),o=Ap(),d=tl(),m=D_(),f=7973,g=s.getBCHDigit(f);function v(k,O,T){for(let E=1;E<=40;E++)if(O<=e.getCapacity(E,T,k))return E}function _(k,O){return d.getCharCountIndicator(k,O)+4}function S(k,O){let T=0;return k.forEach(function(E){const R=_(E.mode,O);T+=R+E.getBitsLength()}),T}function w(k,O){for(let T=1;T<=40;T++)if(S(k,T)<=e.getCapacity(T,O,d.MIXED))return T}e.from=function(O,T){return m.isValid(O)?parseInt(O,10):T},e.getCapacity=function(O,T,E){if(!m.isValid(O))throw new Error("Invalid QR Code version");typeof E>"u"&&(E=d.BYTE);const R=s.getSymbolTotalCodewords(O),B=l.getTotalCodewordsCount(O,T),A=(R-B)*8;if(E===d.MIXED)return A;const z=A-_(E,O);switch(E){case d.NUMERIC:return Math.floor(z/10*3);case d.ALPHANUMERIC:return Math.floor(z/11*2);case d.KANJI:return Math.floor(z/13);case d.BYTE:default:return Math.floor(z/8)}},e.getBestVersionForData=function(O,T){let E;const R=o.from(T,o.M);if(Array.isArray(O)){if(O.length>1)return w(O,R);if(O.length===0)return 1;E=O[0]}else E=O;return v(E.mode,E.getLength(),R)},e.getEncodedBits=function(O){if(!m.isValid(O)||O<7)throw new Error("Invalid QR Code version");let T=O<<12;for(;s.getBCHDigit(T)-g>=0;)T^=f<<s.getBCHDigit(T)-g;return O<<12|T}})(lf)),lf}var uf={},uv;function LM(){if(uv)return uf;uv=1;const e=el(),s=1335,l=21522,o=e.getBCHDigit(s);return uf.getEncodedBits=function(m,f){const g=m.bit<<3|f;let v=g<<10;for(;e.getBCHDigit(v)-o>=0;)v^=s<<e.getBCHDigit(v)-o;return(g<<10|v)^l},uf}var df={},mf,dv;function PM(){if(dv)return mf;dv=1;const e=tl();function s(l){this.mode=e.NUMERIC,this.data=l.toString()}return s.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(o){let d,m,f;for(d=0;d+3<=this.data.length;d+=3)m=this.data.substr(d,3),f=parseInt(m,10),o.put(f,10);const g=this.data.length-d;g>0&&(m=this.data.substr(d),f=parseInt(m,10),o.put(f,g*3+1))},mf=s,mf}var hf,mv;function IM(){if(mv)return hf;mv=1;const e=tl(),s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function l(o){this.mode=e.ALPHANUMERIC,this.data=o}return l.getBitsLength=function(d){return 11*Math.floor(d/2)+6*(d%2)},l.prototype.getLength=function(){return this.data.length},l.prototype.getBitsLength=function(){return l.getBitsLength(this.data.length)},l.prototype.write=function(d){let m;for(m=0;m+2<=this.data.length;m+=2){let f=s.indexOf(this.data[m])*45;f+=s.indexOf(this.data[m+1]),d.put(f,11)}this.data.length%2&&d.put(s.indexOf(this.data[m]),6)},hf=l,hf}var ff,hv;function BM(){if(hv)return ff;hv=1;const e=tl();function s(l){this.mode=e.BYTE,typeof l=="string"?this.data=new TextEncoder().encode(l):this.data=new Uint8Array(l)}return s.getBitsLength=function(o){return o*8},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(l){for(let o=0,d=this.data.length;o<d;o++)l.put(this.data[o],8)},ff=s,ff}var pf,fv;function UM(){if(fv)return pf;fv=1;const e=tl(),s=el();function l(o){this.mode=e.KANJI,this.data=o}return l.getBitsLength=function(d){return d*13},l.prototype.getLength=function(){return this.data.length},l.prototype.getBitsLength=function(){return l.getBitsLength(this.data.length)},l.prototype.write=function(o){let d;for(d=0;d<this.data.length;d++){let m=s.toSJIS(this.data[d]);if(m>=33088&&m<=40956)m-=33088;else if(m>=57408&&m<=60351)m-=49472;else throw new Error("Invalid SJIS character: "+this.data[d]+`
Make sure your charset is UTF-8`);m=(m>>>8&255)*192+(m&255),o.put(m,13)}},pf=l,pf}var xf={exports:{}},pv;function FM(){return pv||(pv=1,(function(e){var s={single_source_shortest_paths:function(l,o,d){var m={},f={};f[o]=0;var g=s.PriorityQueue.make();g.push(o,0);for(var v,_,S,w,k,O,T,E,R;!g.empty();){v=g.pop(),_=v.value,w=v.cost,k=l[_]||{};for(S in k)k.hasOwnProperty(S)&&(O=k[S],T=w+O,E=f[S],R=typeof f[S]>"u",(R||E>T)&&(f[S]=T,g.push(S,T),m[S]=_))}if(typeof d<"u"&&typeof f[d]>"u"){var B=["Could not find a path from ",o," to ",d,"."].join("");throw new Error(B)}return m},extract_shortest_path_from_predecessor_list:function(l,o){for(var d=[],m=o;m;)d.push(m),l[m],m=l[m];return d.reverse(),d},find_path:function(l,o,d){var m=s.single_source_shortest_paths(l,o,d);return s.extract_shortest_path_from_predecessor_list(m,d)},PriorityQueue:{make:function(l){var o=s.PriorityQueue,d={},m;l=l||{};for(m in o)o.hasOwnProperty(m)&&(d[m]=o[m]);return d.queue=[],d.sorter=l.sorter||o.default_sorter,d},default_sorter:function(l,o){return l.cost-o.cost},push:function(l,o){var d={value:l,cost:o};this.queue.push(d),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=s})(xf)),xf.exports}var xv;function qM(){return xv||(xv=1,(function(e){const s=tl(),l=PM(),o=IM(),d=BM(),m=UM(),f=L_(),g=el(),v=FM();function _(B){return unescape(encodeURIComponent(B)).length}function S(B,A,z){const Z=[];let I;for(;(I=B.exec(z))!==null;)Z.push({data:I[0],index:I.index,mode:A,length:I[0].length});return Z}function w(B){const A=S(f.NUMERIC,s.NUMERIC,B),z=S(f.ALPHANUMERIC,s.ALPHANUMERIC,B);let Z,I;return g.isKanjiModeEnabled()?(Z=S(f.BYTE,s.BYTE,B),I=S(f.KANJI,s.KANJI,B)):(Z=S(f.BYTE_KANJI,s.BYTE,B),I=[]),A.concat(z,Z,I).sort(function(H,ee){return H.index-ee.index}).map(function(H){return{data:H.data,mode:H.mode,length:H.length}})}function k(B,A){switch(A){case s.NUMERIC:return l.getBitsLength(B);case s.ALPHANUMERIC:return o.getBitsLength(B);case s.KANJI:return m.getBitsLength(B);case s.BYTE:return d.getBitsLength(B)}}function O(B){return B.reduce(function(A,z){const Z=A.length-1>=0?A[A.length-1]:null;return Z&&Z.mode===z.mode?(A[A.length-1].data+=z.data,A):(A.push(z),A)},[])}function T(B){const A=[];for(let z=0;z<B.length;z++){const Z=B[z];switch(Z.mode){case s.NUMERIC:A.push([Z,{data:Z.data,mode:s.ALPHANUMERIC,length:Z.length},{data:Z.data,mode:s.BYTE,length:Z.length}]);break;case s.ALPHANUMERIC:A.push([Z,{data:Z.data,mode:s.BYTE,length:Z.length}]);break;case s.KANJI:A.push([Z,{data:Z.data,mode:s.BYTE,length:_(Z.data)}]);break;case s.BYTE:A.push([{data:Z.data,mode:s.BYTE,length:_(Z.data)}])}}return A}function E(B,A){const z={},Z={start:{}};let I=["start"];for(let V=0;V<B.length;V++){const H=B[V],ee=[];for(let X=0;X<H.length;X++){const P=H[X],te=""+V+X;ee.push(te),z[te]={node:P,lastCount:0},Z[te]={};for(let oe=0;oe<I.length;oe++){const je=I[oe];z[je]&&z[je].node.mode===P.mode?(Z[je][te]=k(z[je].lastCount+P.length,P.mode)-k(z[je].lastCount,P.mode),z[je].lastCount+=P.length):(z[je]&&(z[je].lastCount=P.length),Z[je][te]=k(P.length,P.mode)+4+s.getCharCountIndicator(P.mode,A))}}I=ee}for(let V=0;V<I.length;V++)Z[I[V]].end=0;return{map:Z,table:z}}function R(B,A){let z;const Z=s.getBestModeForData(B);if(z=s.from(A,Z),z!==s.BYTE&&z.bit<Z.bit)throw new Error('"'+B+'" cannot be encoded with mode '+s.toString(z)+`.
 Suggested mode is: `+s.toString(Z));switch(z===s.KANJI&&!g.isKanjiModeEnabled()&&(z=s.BYTE),z){case s.NUMERIC:return new l(B);case s.ALPHANUMERIC:return new o(B);case s.KANJI:return new m(B);case s.BYTE:return new d(B)}}e.fromArray=function(A){return A.reduce(function(z,Z){return typeof Z=="string"?z.push(R(Z,null)):Z.data&&z.push(R(Z.data,Z.mode)),z},[])},e.fromString=function(A,z){const Z=w(A,g.isKanjiModeEnabled()),I=T(Z),V=E(I,z),H=v.find_path(V.map,"start","end"),ee=[];for(let X=1;X<H.length-1;X++)ee.push(V.table[H[X]].node);return e.fromArray(O(ee))},e.rawSplit=function(A){return e.fromArray(w(A,g.isKanjiModeEnabled()))}})(df)),df}var gv;function ZM(){if(gv)return Jh;gv=1;const e=el(),s=Ap(),l=EM(),o=TM(),d=CM(),m=AM(),f=MM(),g=R_(),v=RM(),_=DM(),S=LM(),w=tl(),k=qM();function O(V,H){const ee=V.size,X=m.getPositions(H);for(let P=0;P<X.length;P++){const te=X[P][0],oe=X[P][1];for(let je=-1;je<=7;je++)if(!(te+je<=-1||ee<=te+je))for(let ue=-1;ue<=7;ue++)oe+ue<=-1||ee<=oe+ue||(je>=0&&je<=6&&(ue===0||ue===6)||ue>=0&&ue<=6&&(je===0||je===6)||je>=2&&je<=4&&ue>=2&&ue<=4?V.set(te+je,oe+ue,!0,!0):V.set(te+je,oe+ue,!1,!0))}}function T(V){const H=V.size;for(let ee=8;ee<H-8;ee++){const X=ee%2===0;V.set(ee,6,X,!0),V.set(6,ee,X,!0)}}function E(V,H){const ee=d.getPositions(H);for(let X=0;X<ee.length;X++){const P=ee[X][0],te=ee[X][1];for(let oe=-2;oe<=2;oe++)for(let je=-2;je<=2;je++)oe===-2||oe===2||je===-2||je===2||oe===0&&je===0?V.set(P+oe,te+je,!0,!0):V.set(P+oe,te+je,!1,!0)}}function R(V,H){const ee=V.size,X=_.getEncodedBits(H);let P,te,oe;for(let je=0;je<18;je++)P=Math.floor(je/3),te=je%3+ee-8-3,oe=(X>>je&1)===1,V.set(P,te,oe,!0),V.set(te,P,oe,!0)}function B(V,H,ee){const X=V.size,P=S.getEncodedBits(H,ee);let te,oe;for(te=0;te<15;te++)oe=(P>>te&1)===1,te<6?V.set(te,8,oe,!0):te<8?V.set(te+1,8,oe,!0):V.set(X-15+te,8,oe,!0),te<8?V.set(8,X-te-1,oe,!0):te<9?V.set(8,15-te-1+1,oe,!0):V.set(8,15-te-1,oe,!0);V.set(X-8,8,1,!0)}function A(V,H){const ee=V.size;let X=-1,P=ee-1,te=7,oe=0;for(let je=ee-1;je>0;je-=2)for(je===6&&je--;;){for(let ue=0;ue<2;ue++)if(!V.isReserved(P,je-ue)){let ce=!1;oe<H.length&&(ce=(H[oe]>>>te&1)===1),V.set(P,je-ue,ce),te--,te===-1&&(oe++,te=7)}if(P+=X,P<0||ee<=P){P-=X,X=-X;break}}}function z(V,H,ee){const X=new l;ee.forEach(function(ue){X.put(ue.mode.bit,4),X.put(ue.getLength(),w.getCharCountIndicator(ue.mode,V)),ue.write(X)});const P=e.getSymbolTotalCodewords(V),te=g.getTotalCodewordsCount(V,H),oe=(P-te)*8;for(X.getLengthInBits()+4<=oe&&X.put(0,4);X.getLengthInBits()%8!==0;)X.putBit(0);const je=(oe-X.getLengthInBits())/8;for(let ue=0;ue<je;ue++)X.put(ue%2?17:236,8);return Z(X,V,H)}function Z(V,H,ee){const X=e.getSymbolTotalCodewords(H),P=g.getTotalCodewordsCount(H,ee),te=X-P,oe=g.getBlocksCount(H,ee),je=X%oe,ue=oe-je,ce=Math.floor(X/oe),Q=Math.floor(te/oe),$=Q+1,ie=ce-Q,Ae=new v(ie);let _e=0;const D=new Array(oe),ae=new Array(oe);let F=0;const me=new Uint8Array(V.buffer);for(let pe=0;pe<oe;pe++){const Ve=pe<ue?Q:$;D[pe]=me.slice(_e,_e+Ve),ae[pe]=Ae.encode(D[pe]),_e+=Ve,F=Math.max(F,Ve)}const de=new Uint8Array(X);let Ee=0,Oe,Qe;for(Oe=0;Oe<F;Oe++)for(Qe=0;Qe<oe;Qe++)Oe<D[Qe].length&&(de[Ee++]=D[Qe][Oe]);for(Oe=0;Oe<ie;Oe++)for(Qe=0;Qe<oe;Qe++)de[Ee++]=ae[Qe][Oe];return de}function I(V,H,ee,X){let P;if(Array.isArray(V))P=k.fromArray(V);else if(typeof V=="string"){let ce=H;if(!ce){const Q=k.rawSplit(V);ce=_.getBestVersionForData(Q,ee)}P=k.fromString(V,ce||40)}else throw new Error("Invalid data");const te=_.getBestVersionForData(P,ee);if(!te)throw new Error("The amount of data is too big to be stored in a QR Code");if(!H)H=te;else if(H<te)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+te+`.
`);const oe=z(H,ee,P),je=e.getSymbolSize(H),ue=new o(je);return O(ue,H),T(ue),E(ue,H),B(ue,ee,0),H>=7&&R(ue,H),A(ue,oe),isNaN(X)&&(X=f.getBestMask(ue,B.bind(null,ue,ee))),f.applyMask(X,ue),B(ue,ee,X),{modules:ue,version:H,errorCorrectionLevel:ee,maskPattern:X,segments:P}}return Jh.create=function(H,ee){if(typeof H>"u"||H==="")throw new Error("No input text");let X=s.M,P,te;return typeof ee<"u"&&(X=s.from(ee.errorCorrectionLevel,s.M),P=_.from(ee.version),te=f.from(ee.maskPattern),ee.toSJISFunc&&e.setToSJISFunction(ee.toSJISFunc)),I(H,P,X,te)},Jh}var gf={},yf={},yv;function P_(){return yv||(yv=1,(function(e){function s(l){if(typeof l=="number"&&(l=l.toString()),typeof l!="string")throw new Error("Color should be defined as hex string");let o=l.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+l);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(m){return[m,m]}))),o.length===6&&o.push("F","F");const d=parseInt(o.join(""),16);return{r:d>>24&255,g:d>>16&255,b:d>>8&255,a:d&255,hex:"#"+o.slice(0,6).join("")}}e.getOptions=function(o){o||(o={}),o.color||(o.color={});const d=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,m=o.width&&o.width>=21?o.width:void 0,f=o.scale||4;return{width:m,scale:m?4:f,margin:d,color:{dark:s(o.color.dark||"#000000ff"),light:s(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},e.getScale=function(o,d){return d.width&&d.width>=o+d.margin*2?d.width/(o+d.margin*2):d.scale},e.getImageWidth=function(o,d){const m=e.getScale(o,d);return Math.floor((o+d.margin*2)*m)},e.qrToImageData=function(o,d,m){const f=d.modules.size,g=d.modules.data,v=e.getScale(f,m),_=Math.floor((f+m.margin*2)*v),S=m.margin*v,w=[m.color.light,m.color.dark];for(let k=0;k<_;k++)for(let O=0;O<_;O++){let T=(k*_+O)*4,E=m.color.light;if(k>=S&&O>=S&&k<_-S&&O<_-S){const R=Math.floor((k-S)/v),B=Math.floor((O-S)/v);E=w[g[R*f+B]?1:0]}o[T++]=E.r,o[T++]=E.g,o[T++]=E.b,o[T]=E.a}}})(yf)),yf}var vv;function HM(){return vv||(vv=1,(function(e){const s=P_();function l(d,m,f){d.clearRect(0,0,m.width,m.height),m.style||(m.style={}),m.height=f,m.width=f,m.style.height=f+"px",m.style.width=f+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(m,f,g){let v=g,_=f;typeof v>"u"&&(!f||!f.getContext)&&(v=f,f=void 0),f||(_=o()),v=s.getOptions(v);const S=s.getImageWidth(m.modules.size,v),w=_.getContext("2d"),k=w.createImageData(S,S);return s.qrToImageData(k.data,m,v),l(w,_,S),w.putImageData(k,0,0),_},e.renderToDataURL=function(m,f,g){let v=g;typeof v>"u"&&(!f||!f.getContext)&&(v=f,f=void 0),v||(v={});const _=e.render(m,f,v),S=v.type||"image/png",w=v.rendererOpts||{};return _.toDataURL(S,w.quality)}})(gf)),gf}var vf={},bv;function KM(){if(bv)return vf;bv=1;const e=P_();function s(d,m){const f=d.a/255,g=m+'="'+d.hex+'"';return f<1?g+" "+m+'-opacity="'+f.toFixed(2).slice(1)+'"':g}function l(d,m,f){let g=d+m;return typeof f<"u"&&(g+=" "+f),g}function o(d,m,f){let g="",v=0,_=!1,S=0;for(let w=0;w<d.length;w++){const k=Math.floor(w%m),O=Math.floor(w/m);!k&&!_&&(_=!0),d[w]?(S++,w>0&&k>0&&d[w-1]||(g+=_?l("M",k+f,.5+O+f):l("m",v,0),v=0,_=!1),k+1<m&&d[w+1]||(g+=l("h",S),S=0)):v++}return g}return vf.render=function(m,f,g){const v=e.getOptions(f),_=m.modules.size,S=m.modules.data,w=_+v.margin*2,k=v.color.light.a?"<path "+s(v.color.light,"fill")+' d="M0 0h'+w+"v"+w+'H0z"/>':"",O="<path "+s(v.color.dark,"stroke")+' d="'+o(S,_,v.margin)+'"/>',T='viewBox="0 0 '+w+" "+w+'"',R='<svg xmlns="http://www.w3.org/2000/svg" '+(v.width?'width="'+v.width+'" height="'+v.width+'" ':"")+T+' shape-rendering="crispEdges">'+k+O+`</svg>
`;return typeof g=="function"&&g(null,R),R},vf}var _v;function GM(){if(_v)return Fl;_v=1;const e=kM(),s=ZM(),l=HM(),o=KM();function d(m,f,g,v,_){const S=[].slice.call(arguments,1),w=S.length,k=typeof S[w-1]=="function";if(!k&&!e())throw new Error("Callback required as last argument");if(k){if(w<2)throw new Error("Too few arguments provided");w===2?(_=g,g=f,f=v=void 0):w===3&&(f.getContext&&typeof _>"u"?(_=v,v=void 0):(_=v,v=g,g=f,f=void 0))}else{if(w<1)throw new Error("Too few arguments provided");return w===1?(g=f,f=v=void 0):w===2&&!f.getContext&&(v=g,g=f,f=void 0),new Promise(function(O,T){try{const E=s.create(g,v);O(m(E,f,v))}catch(E){T(E)}})}try{const O=s.create(g,v);_(null,m(O,f,v))}catch(O){_(O)}}return Fl.create=s.create,Fl.toCanvas=d.bind(null,l.render),Fl.toDataURL=d.bind(null,l.renderToDataURL),Fl.toString=d.bind(null,function(m,f,g){return o.render(m,g)}),Fl}var $M=GM();const Xf=Ed($M),Mp=[{key:"regions",label:"Bolgeler"},{key:"departments",label:"Departmanlar"},{key:"employees",label:"Calisanlar"},{key:"devices",label:"Cihazlar"},{key:"work_rules",label:"Mesai Kurallari"},{key:"attendance_events",label:"Yoklama Kayitlari"},{key:"leaves",label:"Izinler"},{key:"reports",label:"Raporlar"},{key:"compliance",label:"Uyumluluk"},{key:"schedule",label:"Planlama"},{key:"manual_overrides",label:"Manuel Duzeltme"},{key:"audit",label:"Denetim Kayitlari"},{key:"admin_users",label:"Admin Kullanicilari"}];function ic(){return Object.fromEntries(Mp.map(e=>[e.key,{read:!1,write:!1}]))}function QM(e){const s=ic();return e&&Mp.forEach(({key:l})=>{const o=e[l];o&&(s[l]={read:!!(o.read||o.write),write:!!o.write})}),s}function Nv({value:e,disabled:s=!1,onChange:l}){const o=(d,m,f)=>{const v={...e[d]??{read:!1,write:!1}};m==="read"?(v.read=f,f||(v.write=!1)):(v.write=f,f&&(v.read=!0)),l({...e,[d]:v})};return n.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2",children:"Modul"}),n.jsx("th",{className:"px-3 py-2",children:"Goruntule"}),n.jsx("th",{className:"px-3 py-2",children:"Duzenle"})]})}),n.jsx("tbody",{children:Mp.map(d=>{const m=e[d.key]??{read:!1,write:!1};return n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-3 py-2",children:d.label}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:m.read,disabled:s,onChange:f=>o(d.key,"read",f.target.checked)})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:m.write,disabled:s,onChange:f=>o(d.key,"write",f.target.checked)})})]},d.key)})})]})})}function jv(){return{username:"",full_name:"",password:"",is_active:!0,is_super_admin:!1,permissions:ic()}}function bf(e){return e?new Date(e).toLocaleString("tr-TR"):"-"}function VM(e){const s=(e??"").trim();return s?s.length<=80?s:`${s.slice(0,80)}...`:"-"}function YM(e){const s=e.trim();return s?s.length<=60?s:`${s.slice(0,30)}...${s.slice(-22)}`:"-"}function JM(){const e=Xn(),{pushToast:s}=aa(),{hasPermission:l,isSuperAdmin:o,user:d}=to(),m=l("admin_users"),f=l("admin_users","write"),[g,v]=b.useState(jv()),[_,S]=b.useState(null),[w,k]=b.useState(""),[O,T]=b.useState(""),[E,R]=b.useState(""),[B,A]=b.useState(!0),[z,Z]=b.useState(!1),[I,V]=b.useState(ic()),[H,ee]=b.useState(null),[X,P]=b.useState(null),[te,oe]=b.useState(null),[je,ue]=b.useState(""),[ce,Q]=b.useState(""),[$,ie]=b.useState(null),[Ae,_e]=b.useState([]),[D,ae]=b.useState(null),F=Fe({queryKey:["admin-users"],queryFn:y_,enabled:m}),me=Fe({queryKey:["admin-user-mfa-status",X?.id],queryFn:()=>uA(X.id),enabled:!!X}),de=Fe({queryKey:["admin-user-claim-detail",H?.id],queryFn:()=>aA(H.id),enabled:!!H}),Ee=Ge({mutationFn:({adminUserId:se,claimId:He,nextActive:_t})=>sA(se,He,{is_active:_t}),onSuccess:(se,He)=>{s({variant:"success",title:He.nextActive?"Claim aktif edildi":"Claim pasife alindi",description:He.nextActive?"Admin cihazi yeniden aktif edildi.":"Admin cihazi manuel olarak pasife alindi."}),e.invalidateQueries({queryKey:["admin-user-claim-detail",He.adminUserId]}),e.invalidateQueries({queryKey:["admin-users"]})},onError:se=>{const He=Be(se,"Claim durumu guncellenemedi.");s({variant:"error",title:"Claim guncelleme hatasi",description:He.message})}}),Oe=Ge({mutationFn:lA,onSuccess:()=>{s({variant:"success",title:"Admin kullanici olusturuldu",description:"Yeni admin hesabi kaydedildi."}),v(jv()),e.invalidateQueries({queryKey:["admin-users"]})},onError:se=>{const He=Be(se,"Admin kullanici olusturulamadi.");s({variant:"error",title:"Kayit basarisiz",description:He.message})}}),Qe=Ge({mutationFn:({userId:se,payload:He})=>oA(se,He),onSuccess:()=>{s({variant:"success",title:"Admin kullanici guncellendi",description:"Kullanici yetkileri guncellendi."}),S(null),R(""),e.invalidateQueries({queryKey:["admin-users"]})},onError:se=>{const He=Be(se,"Admin kullanici guncellenemedi.");s({variant:"error",title:"Guncelleme basarisiz",description:He.message})}}),pe=Ge({mutationFn:cA,onSuccess:()=>{s({variant:"success",title:"Admin kullanici silindi",description:"Kullanici kaydi sistemden kaldirildi."}),e.invalidateQueries({queryKey:["admin-users"]})},onError:se=>{const He=Be(se,"Admin kullanici silinemedi.");s({variant:"error",title:"Silme basarisiz",description:He.message})}}),Ve=Ge({mutationFn:se=>dA(se),onSuccess:se=>{oe(se),ue(""),_e([]),ae(null),me.refetch(),s({variant:"success",title:"MFA kurulumu baslatildi",description:"QR kodu taratip 6 haneli kodu onaylayin."})},onError:se=>{const He=Be(se,"MFA kurulumu baslatilamadi.");s({variant:"error",title:"MFA kurulum hatasi",description:He.message})}}),Ye=Ge({mutationFn:({adminUserId:se,code:He})=>mA(se,{code:He}),onSuccess:se=>{_e(se.recovery_codes),ae(se.recovery_code_expires_at),oe(null),ue(""),e.invalidateQueries({queryKey:["admin-users"]}),me.refetch(),s({variant:"success",title:"MFA aktif edildi",description:"Recovery kodlari olusturuldu."})},onError:se=>{const He=Be(se,"MFA kodu dogrulanamadi.");s({variant:"error",title:"MFA onay hatasi",description:He.message})}}),Ot=Ge({mutationFn:({adminUserId:se,currentPassword:He})=>hA(se,{current_password:He}),onSuccess:se=>{_e(se.recovery_codes),ae(se.recovery_code_expires_at),Q(""),me.refetch(),s({variant:"success",title:"Recovery kodlari yenilendi",description:"Eski kodlar pasif edildi."})},onError:se=>{const He=Be(se,"Recovery kodlari yenilenemedi.");s({variant:"error",title:"Yenileme hatasi",description:He.message})}}),ft=Ge({mutationFn:({adminUserId:se,currentPassword:He})=>fA(se,{current_password:He}),onSuccess:()=>{oe(null),ue(""),ie(null),_e([]),ae(null),Q(""),e.invalidateQueries({queryKey:["admin-users"]}),me.refetch(),s({variant:"success",title:"MFA sifirlandi",description:"Kullanici tekrar MFA kurabilir."})},onError:se=>{const He=Be(se,"MFA sifirlanamadi.");s({variant:"error",title:"Sifirlama hatasi",description:He.message})}});b.useEffect(()=>{if(!te?.otpauth_uri){ie(null);return}let se=!1;return Xf.toDataURL(te.otpauth_uri,{margin:1,width:220}).then(He=>{se||ie(He)}).catch(()=>{se||ie(null)}),()=>{se=!0}},[te]);const ze=b.useMemo(()=>[...F.data??[]].sort((He,_t)=>He.username.localeCompare(_t.username)),[F.data]),at=me.data;if(!m)return n.jsx(zt,{message:"Bu alani goruntuleme yetkiniz yok."});if(F.isLoading)return n.jsx($t,{label:"Admin kullanicilar yukleniyor..."});if(F.isError)return n.jsx(zt,{message:"Admin kullanici listesi alinamadi."});const pt=se=>{if(se.preventDefault(),!!f){if(!o){s({variant:"info",title:"Yetki siniri",description:"Sadece super admin yeni admin kullanici olusturabilir."});return}if(g.password.length<8){s({variant:"error",title:"Kayit basarisiz",description:"Sifre alani en az 8 karakter olmali."});return}Oe.mutate({username:g.username.trim(),full_name:g.full_name.trim()||null,password:g.password,is_active:g.is_active,is_super_admin:g.is_super_admin,permissions:g.is_super_admin?ic():g.permissions})}},Rt=se=>{S(se),k(se.username),T(se.full_name??""),R(""),A(se.is_active),Z(se.is_super_admin),V(QM(se.permissions))},It=se=>{ee(se)},Qt=()=>{ee(null)},ne=se=>{P(se),oe(null),ue(""),Q(""),ie(null),_e([]),ae(null)},Se=()=>{P(null),oe(null),ue(""),Q(""),ie(null),_e([]),ae(null)},Pe=se=>{if(se.preventDefault(),!(!_||!f)){if(E.trim()&&E.trim().length<8){s({variant:"error",title:"Guncelleme basarisiz",description:"Yeni sifre en az 8 karakter olmali."});return}Qe.mutate({userId:_.id,payload:{username:w.trim(),full_name:O.trim()||null,password:E.trim()?E:void 0,is_active:B,is_super_admin:z,permissions:z?ic():I}})}},Tt=se=>{se.preventDefault(),!(!X||!je.trim())&&Ye.mutate({adminUserId:X.id,code:je.trim()})};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"Admin Kullanici ve Yetki Yonetimi",description:"Belirli modullere erisebilen read-only veya tam yetkili admin hesaplari olusturun."}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"mb-3 text-base font-semibold text-slate-900",children:"Yeni Admin Kullanici"}),n.jsxs("p",{className:"mb-3 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:["Sistem super admin hesabi: ",n.jsx("strong",{children:"admin"})," (env). Bu hesap her zaman tam yetkilidir."]}),o?null:n.jsx("p",{className:"mb-3 rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-sm text-amber-800",children:"Sadece super admin hesaplari yeni admin olusturabilir ve yetki duzenleyebilir."}),n.jsxs("form",{onSubmit:pt,className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Kullanici Adi",n.jsx("input",{value:g.username,onChange:se=>v(He=>({...He,username:se.target.value})),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"ik_readonly"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ad Soyad",n.jsx("input",{value:g.full_name,onChange:se=>v(He=>({...He,full_name:se.target.value})),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"IK Operasyon"})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Sifre",n.jsx("input",{type:"password",value:g.password,onChange:se=>v(He=>({...He,password:se.target.value})),disabled:!f||!o,minLength:8,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"En az 8 karakter"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-700",children:[n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:g.is_active,disabled:!f||!o,onChange:se=>v(He=>({...He,is_active:se.target.checked}))}),"Aktif"]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:g.is_super_admin,disabled:!f||!o,onChange:se=>v(He=>({...He,is_super_admin:se.target.checked}))}),"Super Admin"]})]}),g.is_super_admin?n.jsx("p",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:"Super admin secili oldugu icin tum modullerde tam yetki verilecektir."}):n.jsx(Nv,{value:g.permissions,disabled:!f||!o,onChange:se=>v(He=>({...He,permissions:se}))}),n.jsx("button",{type:"submit",disabled:!f||!o||Oe.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Oe.isPending?"Kaydediliyor...":"Kullanici Olustur"})]})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"mb-3 text-base font-semibold text-slate-900",children:"Mevcut Admin Kullanicilar"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"ID"}),n.jsx("th",{className:"py-2",children:"Kullanici"}),n.jsx("th",{className:"py-2",children:"Ad Soyad"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Rol"}),n.jsx("th",{className:"py-2",children:"Bagli Cihaz"}),n.jsx("th",{className:"py-2",children:"MFA"}),n.jsx("th",{className:"py-2",children:"Islem"})]})}),n.jsx("tbody",{children:ze.map(se=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:se.id}),n.jsx("td",{className:"py-2 font-medium text-slate-900",children:se.username}),n.jsx("td",{className:"py-2",children:se.full_name??"-"}),n.jsx("td",{className:"py-2",children:n.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${se.is_active?"bg-emerald-100 text-emerald-800":"bg-rose-100 text-rose-800"}`,children:se.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2",children:se.is_super_admin?"Super Admin":"Yetkili Admin"}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"text-xs text-slate-700",children:[n.jsx("span",{className:"font-semibold text-emerald-700",children:se.claim_active_total??0})," aktif /"," ",n.jsx("span",{className:"font-semibold",children:se.claim_total??0})," toplam"]})}),n.jsx("td",{className:"py-2",children:n.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${se.mfa_enabled?"bg-emerald-100 text-emerald-800":se.mfa_secret_configured?"bg-amber-100 text-amber-800":"bg-slate-100 text-slate-700"}`,children:se.mfa_enabled?"Aktif":se.mfa_secret_configured?"Kurulum Bekliyor":"Kapali"})}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>It(se),className:"rounded-lg border border-emerald-300 px-3 py-1 text-xs font-medium text-emerald-700 hover:bg-emerald-50",children:"Detay"}),n.jsx("button",{type:"button",disabled:!(o||(d?.admin_user_id??0)===se.id),onClick:()=>ne(se),className:"rounded-lg border border-brand-200 px-3 py-1 text-xs font-medium text-brand-700 hover:bg-brand-50 disabled:opacity-50",children:"MFA"}),n.jsx("button",{type:"button",disabled:!f||!o,onClick:()=>Rt(se),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50",children:"Duzenle"}),n.jsx("button",{type:"button",disabled:!f||!o||pe.isPending,onClick:()=>{window.confirm(`${se.username} kullanicisini silmek istediginize emin misiniz?`)&&pe.mutate(se.id)},className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50 disabled:opacity-50",children:"Sil"})]})})]},se.id))})]})}),ze.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Kayitli admin kullanici bulunamadi."}):null]}),n.jsx(_i,{open:!!H,title:H?`Admin Detay: ${H.username}`:"Admin Detay",onClose:Qt,children:H?n.jsxs("div",{className:"space-y-4",children:[de.isLoading?n.jsx("p",{className:"text-sm text-slate-500",children:"Detay yukleniyor..."}):null,de.isError?n.jsx(zt,{message:"Admin claim detayi alinamadi."}):null,de.data?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm",children:["Toplam claim: ",n.jsx("strong",{children:de.data.claim_total})]}),n.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",children:["Aktif claim: ",n.jsx("strong",{children:de.data.claim_active_total})]}),n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:["Pasif claim: ",n.jsx("strong",{children:de.data.claim_inactive_total})]}),n.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 px-3 py-2 text-sm text-blue-800",children:["Benzersiz cihaz: ",n.jsx("strong",{children:new Set(de.data.claims.map(se=>se.endpoint_fingerprint)).size})]})]}),n.jsxs("section",{children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Bagli Cihaz / Claim Listesi"}),n.jsxs("div",{className:"mt-2 max-h-60 overflow-auto rounded-lg border border-slate-200",children:[n.jsxs("table",{className:"min-w-full text-left text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-50 uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2",children:"ID"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Fingerprint"}),n.jsx("th",{className:"px-2 py-2",children:"Son Gorulme"}),n.jsx("th",{className:"px-2 py-2",children:"Hata"}),n.jsx("th",{className:"px-2 py-2",children:"Tarayici"}),n.jsx("th",{className:"px-2 py-2",children:"Endpoint"}),n.jsx("th",{className:"px-2 py-2",children:"Islem"})]})}),n.jsx("tbody",{children:de.data.claims.map(se=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-2 py-2",children:se.id}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("span",{className:`rounded-full px-2 py-1 text-[11px] font-semibold ${se.is_active?"bg-emerald-100 text-emerald-800":"bg-rose-100 text-rose-800"}`,children:se.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"px-2 py-2 font-mono text-[11px]",children:se.endpoint_fingerprint}),n.jsx("td",{className:"px-2 py-2",children:bf(se.last_seen_at)}),n.jsx("td",{className:"px-2 py-2",children:se.last_error?.trim()?se.last_error:"-"}),n.jsx("td",{className:"px-2 py-2",title:se.user_agent??"-",children:VM(se.user_agent)}),n.jsx("td",{className:"px-2 py-2 font-mono text-[11px]",title:se.endpoint,children:YM(se.endpoint)}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("button",{type:"button",disabled:!f||!o||Ee.isPending||!H,onClick:()=>{if(!H)return;if(!se.is_active){Ee.mutate({adminUserId:H.id,claimId:se.id,nextActive:!0});return}window.confirm("Bu admin claim pasife alinsin mi?")&&Ee.mutate({adminUserId:H.id,claimId:se.id,nextActive:!1})},className:`rounded-lg border px-2 py-1 text-[11px] font-semibold disabled:opacity-50 ${se.is_active?"border-rose-300 text-rose-700 hover:bg-rose-50":"border-emerald-300 text-emerald-700 hover:bg-emerald-50"}`,children:se.is_active?"Pasife Al":"Aktif Et"})})]},se.id))})]}),de.data.claims.length===0?n.jsx("p",{className:"px-2 py-2 text-sm text-slate-500",children:"Bu kullanici icin claim kaydi yok."}):null]})]}),n.jsxs("section",{children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Olusturulan Claim Davetleri"}),n.jsxs("div",{className:"mt-2 max-h-40 overflow-auto rounded-lg border border-slate-200",children:[n.jsxs("table",{className:"min-w-full text-left text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-50 uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2",children:"ID"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Deneme"}),n.jsx("th",{className:"px-2 py-2",children:"Bitis"}),n.jsx("th",{className:"px-2 py-2",children:"Kullanan"})]})}),n.jsx("tbody",{children:de.data.created_invites.map(se=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-2 py-2",children:se.id}),n.jsx("td",{className:"px-2 py-2",children:se.status}),n.jsxs("td",{className:"px-2 py-2",children:[se.attempt_count,"/",se.max_attempts]}),n.jsx("td",{className:"px-2 py-2",children:bf(se.expires_at)}),n.jsx("td",{className:"px-2 py-2",children:se.used_by_username??"-"})]},se.id))})]}),de.data.created_invites.length===0?n.jsx("p",{className:"px-2 py-2 text-sm text-slate-500",children:"Kayit yok."}):null]})]}),n.jsxs("section",{children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Kullandigi Claim Davetleri"}),n.jsxs("div",{className:"mt-2 max-h-40 overflow-auto rounded-lg border border-slate-200",children:[n.jsxs("table",{className:"min-w-full text-left text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-50 uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2",children:"ID"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Olusturan"}),n.jsx("th",{className:"px-2 py-2",children:"Kullanilan Zaman"})]})}),n.jsx("tbody",{children:de.data.used_invites.map(se=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-2 py-2",children:se.id}),n.jsx("td",{className:"px-2 py-2",children:se.status}),n.jsx("td",{className:"px-2 py-2",children:se.created_by_username}),n.jsx("td",{className:"px-2 py-2",children:bf(se.used_at)})]},se.id))})]}),de.data.used_invites.length===0?n.jsx("p",{className:"px-2 py-2 text-sm text-slate-500",children:"Kayit yok."}):null]})]})]}):null]}):null}),n.jsx(_i,{open:!!_,title:"Admin Kullanici Duzenle",onClose:()=>{S(null),R("")},children:_?n.jsxs("form",{onSubmit:Pe,className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Kullanici Adi",n.jsx("input",{value:w,onChange:se=>k(se.target.value),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ad Soyad",n.jsx("input",{value:O,onChange:se=>T(se.target.value),disabled:!f||!o,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Yeni Sifre (bos birakilirsa degismez)",n.jsx("input",{type:"password",value:E,onChange:se=>R(se.target.value),disabled:!f||!o,minLength:8,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Opsiyonel"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-700",children:[n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:B,disabled:!f||!o,onChange:se=>A(se.target.checked)}),"Aktif"]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:z,disabled:!f||!o,onChange:se=>Z(se.target.checked)}),"Super Admin"]})]}),z?n.jsx("p",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:"Super admin secili oldugu icin tum modullerde tam yetki verilecektir."}):n.jsx(Nv,{value:I,disabled:!f||!o,onChange:V}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{S(null),R("")},className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50",children:"Vazgec"}),n.jsx("button",{type:"submit",disabled:!f||!o||Qe.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Qe.isPending?"Kaydediliyor...":"Guncelle"})]})]}):null}),n.jsx(_i,{open:!!X,title:X?`MFA Yonetimi: ${X.username}`:"MFA Yonetimi",onClose:Se,children:X?n.jsxs("div",{className:"space-y-4",children:[me.isLoading?n.jsx("p",{className:"text-sm text-slate-500",children:"MFA durumu yukleniyor..."}):null,at?n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-3 text-sm text-slate-700",children:[n.jsxs("p",{children:["Durum:"," ",n.jsx("strong",{children:at.mfa_enabled?"MFA aktif":at.has_secret?"Kurulum bekliyor":"Kapali"})]}),n.jsxs("p",{children:["Aktif recovery kodu: ",at.recovery_code_active_count]}),n.jsxs("p",{children:["Son guncelleme:"," ",at.updated_at?new Date(at.updated_at).toLocaleString("tr-TR"):"-"]}),n.jsxs("p",{children:["Kod son gecerlilik:"," ",at.recovery_code_expires_at?new Date(at.recovery_code_expires_at).toLocaleDateString("tr-TR"):"-"]})]}):null,n.jsx("div",{className:"flex flex-wrap gap-2",children:n.jsx("button",{type:"button",disabled:Ve.isPending,onClick:()=>Ve.mutate(X.id),className:"rounded-lg border border-brand-300 px-3 py-2 text-xs font-semibold text-brand-700 hover:bg-brand-50 disabled:opacity-60",children:Ve.isPending?"Baslatiliyor...":"Kurulumu Baslat / Yenile"})}),te?n.jsxs("form",{onSubmit:Tt,className:"space-y-3 rounded-lg border border-brand-100 bg-brand-50/40 px-3 py-3",children:[n.jsx("p",{className:"text-sm font-medium text-brand-900",children:"1) Authenticator ile QR kodu tarat"}),$?n.jsx("img",{src:$,alt:"MFA QR",className:"h-44 w-44 rounded-lg border border-brand-200 bg-white p-2"}):n.jsx("p",{className:"text-xs text-slate-600",children:"QR olusturulamadi. Asagidaki anahtari manuel girin."}),n.jsxs("p",{className:"text-xs text-slate-700",children:["Secret: ",n.jsx("code",{children:te.secret_key})]}),n.jsx("p",{className:"text-xs text-slate-600 break-all",children:te.otpauth_uri}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["2) Uretilen 6 haneli kod",n.jsx("input",{value:je,onChange:se=>ue(se.target.value),inputMode:"numeric",pattern:"[0-9]*",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"123456"})]}),n.jsx("button",{type:"submit",disabled:Ye.isPending||!je.trim(),className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Ye.isPending?"Onaylaniyor...":"MFA Kurulumunu Onayla"})]}):null,n.jsxs("div",{className:"space-y-2 rounded-lg border border-slate-200 px-3 py-3",children:[n.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Kritik Islemler (Sizin sifreniz gerekli)"}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["Mevcut sifreniz",n.jsx("input",{type:"password",value:ce,onChange:se=>Q(se.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Sizin admin sifreniz"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",disabled:Ot.isPending||!ce.trim()||!at?.mfa_enabled,onClick:()=>{ce.trim()&&Ot.mutate({adminUserId:X.id,currentPassword:ce})},className:"rounded-lg border border-emerald-300 px-3 py-2 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:Ot.isPending?"Yenileniyor...":"Recovery Kodlarini Yenile"}),n.jsx("button",{type:"button",disabled:ft.isPending||!ce.trim(),onClick:()=>{!window.confirm(`${X.username} icin MFA sifirlansin mi?`)||!ce.trim()||ft.mutate({adminUserId:X.id,currentPassword:ce})},className:"rounded-lg border border-rose-300 px-3 py-2 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:ft.isPending?"Sifirlaniyor...":"MFA Sifirla"})]})]}),Ae.length>0?n.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-3 text-sm text-amber-900",children:[n.jsx("p",{className:"font-semibold",children:"Recovery kodlari (tek seferlik gosterim)"}),n.jsxs("p",{className:"mt-1 text-xs",children:["Gecerlilik:"," ",D?new Date(D).toLocaleDateString("tr-TR"):"-"]}),n.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:Ae.map(se=>n.jsx("code",{className:"rounded bg-white px-2 py-1 text-slate-900",children:se},se))})]}):null]}):null})]})}function Sv({label:e,value:s,onCopy:l}){return n.jsxs("label",{className:"block text-sm text-slate-700",children:[e,n.jsxs("div",{className:"mt-1 flex items-stretch gap-2",children:[n.jsx("input",{readOnly:!0,value:s,className:"w-full rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm text-slate-700"}),n.jsx("button",{type:"button",onClick:()=>l(s),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:"Kopyala"})]})]})}var sc={exports:{}};var XM=sc.exports,wv;function WM(){return wv||(wv=1,(function(e,s){(function(l,o){o(s)})(XM,(function(l){var o="1.9.4";function d(i){var c,h,y,N;for(h=1,y=arguments.length;h<y;h++){N=arguments[h];for(c in N)i[c]=N[c]}return i}var m=Object.create||(function(){function i(){}return function(c){return i.prototype=c,new i}})();function f(i,c){var h=Array.prototype.slice;if(i.bind)return i.bind.apply(i,h.call(arguments,1));var y=h.call(arguments,2);return function(){return i.apply(c,y.length?y.concat(h.call(arguments)):arguments)}}var g=0;function v(i){return"_leaflet_id"in i||(i._leaflet_id=++g),i._leaflet_id}function _(i,c,h){var y,N,C,G;return G=function(){y=!1,N&&(C.apply(h,N),N=!1)},C=function(){y?N=arguments:(i.apply(h,arguments),setTimeout(G,c),y=!0)},C}function S(i,c,h){var y=c[1],N=c[0],C=y-N;return i===y&&h?i:((i-N)%C+C)%C+N}function w(){return!1}function k(i,c){if(c===!1)return i;var h=Math.pow(10,c===void 0?6:c);return Math.round(i*h)/h}function O(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function T(i){return O(i).split(/\s+/)}function E(i,c){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?m(i.options):{});for(var h in c)i.options[h]=c[h];return i.options}function R(i,c,h){var y=[];for(var N in i)y.push(encodeURIComponent(h?N.toUpperCase():N)+"="+encodeURIComponent(i[N]));return(!c||c.indexOf("?")===-1?"?":"&")+y.join("&")}var B=/\{ *([\w_ -]+) *\}/g;function A(i,c){return i.replace(B,function(h,y){var N=c[y];if(N===void 0)throw new Error("No value provided for variable "+h);return typeof N=="function"&&(N=N(c)),N})}var z=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function Z(i,c){for(var h=0;h<i.length;h++)if(i[h]===c)return h;return-1}var I="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function V(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var H=0;function ee(i){var c=+new Date,h=Math.max(0,16-(c-H));return H=c+h,window.setTimeout(i,h)}var X=window.requestAnimationFrame||V("RequestAnimationFrame")||ee,P=window.cancelAnimationFrame||V("CancelAnimationFrame")||V("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function te(i,c,h){if(h&&X===ee)i.call(c);else return X.call(window,f(i,c))}function oe(i){i&&P.call(window,i)}var je={__proto__:null,extend:d,create:m,bind:f,get lastId(){return g},stamp:v,throttle:_,wrapNum:S,falseFn:w,formatNum:k,trim:O,splitWords:T,setOptions:E,getParamString:R,template:A,isArray:z,indexOf:Z,emptyImageUrl:I,requestFn:X,cancelFn:P,requestAnimFrame:te,cancelAnimFrame:oe};function ue(){}ue.extend=function(i){var c=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=c.__super__=this.prototype,y=m(h);y.constructor=c,c.prototype=y;for(var N in this)Object.prototype.hasOwnProperty.call(this,N)&&N!=="prototype"&&N!=="__super__"&&(c[N]=this[N]);return i.statics&&d(c,i.statics),i.includes&&(ce(i.includes),d.apply(null,[y].concat(i.includes))),d(y,i),delete y.statics,delete y.includes,y.options&&(y.options=h.options?m(h.options):{},d(y.options,i.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,G=y._initHooks.length;C<G;C++)y._initHooks[C].call(this)}},c},ue.include=function(i){var c=this.prototype.options;return d(this.prototype,i),i.options&&(this.prototype.options=c,this.mergeOptions(i.options)),this},ue.mergeOptions=function(i){return d(this.prototype.options,i),this},ue.addInitHook=function(i){var c=Array.prototype.slice.call(arguments,1),h=typeof i=="function"?i:function(){this[i].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function ce(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=z(i)?i:[i];for(var c=0;c<i.length;c++)i[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Q={on:function(i,c,h){if(typeof i=="object")for(var y in i)this._on(y,i[y],c);else{i=T(i);for(var N=0,C=i.length;N<C;N++)this._on(i[N],c,h)}return this},off:function(i,c,h){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var y in i)this._off(y,i[y],c);else{i=T(i);for(var N=arguments.length===1,C=0,G=i.length;C<G;C++)N?this._off(i[C]):this._off(i[C],c,h)}return this},_on:function(i,c,h,y){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(i,c,h)===!1){h===this&&(h=void 0);var N={fn:c,ctx:h};y&&(N.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(N)}},_off:function(i,c,h){var y,N,C;if(this._events&&(y=this._events[i],!!y)){if(arguments.length===1){if(this._firingCount)for(N=0,C=y.length;N<C;N++)y[N].fn=w;delete this._events[i];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var G=this._listens(i,c,h);if(G!==!1){var le=y[G];this._firingCount&&(le.fn=w,this._events[i]=y=y.slice()),y.splice(G,1)}}},fire:function(i,c,h){if(!this.listens(i,h))return this;var y=d({},c,{type:i,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var N=this._events[i];if(N){this._firingCount=this._firingCount+1||1;for(var C=0,G=N.length;C<G;C++){var le=N[C],xe=le.fn;le.once&&this.off(i,xe,le.ctx),xe.call(le.ctx||this,y)}this._firingCount--}}return h&&this._propagateEvent(y),this},listens:function(i,c,h,y){typeof i!="string"&&console.warn('"string" type argument expected');var N=c;typeof c!="function"&&(y=!!c,N=void 0,h=void 0);var C=this._events&&this._events[i];if(C&&C.length&&this._listens(i,N,h)!==!1)return!0;if(y){for(var G in this._eventParents)if(this._eventParents[G].listens(i,c,h,y))return!0}return!1},_listens:function(i,c,h){if(!this._events)return!1;var y=this._events[i]||[];if(!c)return!!y.length;h===this&&(h=void 0);for(var N=0,C=y.length;N<C;N++)if(y[N].fn===c&&y[N].ctx===h)return N;return!1},once:function(i,c,h){if(typeof i=="object")for(var y in i)this._on(y,i[y],c,!0);else{i=T(i);for(var N=0,C=i.length;N<C;N++)this._on(i[N],c,h,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[v(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[v(i)],this},_propagateEvent:function(i){for(var c in this._eventParents)this._eventParents[c].fire(i.type,d({layer:i.target,propagatedFrom:i.target},i),!0)}};Q.addEventListener=Q.on,Q.removeEventListener=Q.clearAllEventListeners=Q.off,Q.addOneTimeEventListener=Q.once,Q.fireEvent=Q.fire,Q.hasEventListeners=Q.listens;var $=ue.extend(Q);function ie(i,c,h){this.x=h?Math.round(i):i,this.y=h?Math.round(c):c}var Ae=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(i){return this.clone()._add(_e(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(_e(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new ie(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new ie(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ae(this.x),this.y=Ae(this.y),this},distanceTo:function(i){i=_e(i);var c=i.x-this.x,h=i.y-this.y;return Math.sqrt(c*c+h*h)},equals:function(i){return i=_e(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=_e(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+k(this.x)+", "+k(this.y)+")"}};function _e(i,c,h){return i instanceof ie?i:z(i)?new ie(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new ie(i.x,i.y):new ie(i,c,h)}function D(i,c){if(i)for(var h=c?[i,c]:i,y=0,N=h.length;y<N;y++)this.extend(h[y])}D.prototype={extend:function(i){var c,h;if(!i)return this;if(i instanceof ie||typeof i[0]=="number"||"x"in i)c=h=_e(i);else if(i=ae(i),c=i.min,h=i.max,!c||!h)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=h.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(i){return _e((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return _e(this.min.x,this.max.y)},getTopRight:function(){return _e(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var c,h;return typeof i[0]=="number"||i instanceof ie?i=_e(i):i=ae(i),i instanceof D?(c=i.min,h=i.max):c=h=i,c.x>=this.min.x&&h.x<=this.max.x&&c.y>=this.min.y&&h.y<=this.max.y},intersects:function(i){i=ae(i);var c=this.min,h=this.max,y=i.min,N=i.max,C=N.x>=c.x&&y.x<=h.x,G=N.y>=c.y&&y.y<=h.y;return C&&G},overlaps:function(i){i=ae(i);var c=this.min,h=this.max,y=i.min,N=i.max,C=N.x>c.x&&y.x<h.x,G=N.y>c.y&&y.y<h.y;return C&&G},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var c=this.min,h=this.max,y=Math.abs(c.x-h.x)*i,N=Math.abs(c.y-h.y)*i;return ae(_e(c.x-y,c.y-N),_e(h.x+y,h.y+N))},equals:function(i){return i?(i=ae(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function ae(i,c){return!i||i instanceof D?i:new D(i,c)}function F(i,c){if(i)for(var h=c?[i,c]:i,y=0,N=h.length;y<N;y++)this.extend(h[y])}F.prototype={extend:function(i){var c=this._southWest,h=this._northEast,y,N;if(i instanceof de)y=i,N=i;else if(i instanceof F){if(y=i._southWest,N=i._northEast,!y||!N)return this}else return i?this.extend(Ee(i)||me(i)):this;return!c&&!h?(this._southWest=new de(y.lat,y.lng),this._northEast=new de(N.lat,N.lng)):(c.lat=Math.min(y.lat,c.lat),c.lng=Math.min(y.lng,c.lng),h.lat=Math.max(N.lat,h.lat),h.lng=Math.max(N.lng,h.lng)),this},pad:function(i){var c=this._southWest,h=this._northEast,y=Math.abs(c.lat-h.lat)*i,N=Math.abs(c.lng-h.lng)*i;return new F(new de(c.lat-y,c.lng-N),new de(h.lat+y,h.lng+N))},getCenter:function(){return new de((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new de(this.getNorth(),this.getWest())},getSouthEast:function(){return new de(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof de||"lat"in i?i=Ee(i):i=me(i);var c=this._southWest,h=this._northEast,y,N;return i instanceof F?(y=i.getSouthWest(),N=i.getNorthEast()):y=N=i,y.lat>=c.lat&&N.lat<=h.lat&&y.lng>=c.lng&&N.lng<=h.lng},intersects:function(i){i=me(i);var c=this._southWest,h=this._northEast,y=i.getSouthWest(),N=i.getNorthEast(),C=N.lat>=c.lat&&y.lat<=h.lat,G=N.lng>=c.lng&&y.lng<=h.lng;return C&&G},overlaps:function(i){i=me(i);var c=this._southWest,h=this._northEast,y=i.getSouthWest(),N=i.getNorthEast(),C=N.lat>c.lat&&y.lat<h.lat,G=N.lng>c.lng&&y.lng<h.lng;return C&&G},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,c){return i?(i=me(i),this._southWest.equals(i.getSouthWest(),c)&&this._northEast.equals(i.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function me(i,c){return i instanceof F?i:new F(i,c)}function de(i,c,h){if(isNaN(i)||isNaN(c))throw new Error("Invalid LatLng object: ("+i+", "+c+")");this.lat=+i,this.lng=+c,h!==void 0&&(this.alt=+h)}de.prototype={equals:function(i,c){if(!i)return!1;i=Ee(i);var h=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return h<=(c===void 0?1e-9:c)},toString:function(i){return"LatLng("+k(this.lat,i)+", "+k(this.lng,i)+")"},distanceTo:function(i){return Qe.distance(this,Ee(i))},wrap:function(){return Qe.wrapLatLng(this)},toBounds:function(i){var c=180*i/40075017,h=c/Math.cos(Math.PI/180*this.lat);return me([this.lat-c,this.lng-h],[this.lat+c,this.lng+h])},clone:function(){return new de(this.lat,this.lng,this.alt)}};function Ee(i,c,h){return i instanceof de?i:z(i)&&typeof i[0]!="object"?i.length===3?new de(i[0],i[1],i[2]):i.length===2?new de(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new de(i.lat,"lng"in i?i.lng:i.lon,i.alt):c===void 0?null:new de(i,c,h)}var Oe={latLngToPoint:function(i,c){var h=this.projection.project(i),y=this.scale(c);return this.transformation._transform(h,y)},pointToLatLng:function(i,c){var h=this.scale(c),y=this.transformation.untransform(i,h);return this.projection.unproject(y)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var c=this.projection.bounds,h=this.scale(i),y=this.transformation.transform(c.min,h),N=this.transformation.transform(c.max,h);return new D(y,N)},infinite:!1,wrapLatLng:function(i){var c=this.wrapLng?S(i.lng,this.wrapLng,!0):i.lng,h=this.wrapLat?S(i.lat,this.wrapLat,!0):i.lat,y=i.alt;return new de(h,c,y)},wrapLatLngBounds:function(i){var c=i.getCenter(),h=this.wrapLatLng(c),y=c.lat-h.lat,N=c.lng-h.lng;if(y===0&&N===0)return i;var C=i.getSouthWest(),G=i.getNorthEast(),le=new de(C.lat-y,C.lng-N),xe=new de(G.lat-y,G.lng-N);return new F(le,xe)}},Qe=d({},Oe,{wrapLng:[-180,180],R:6371e3,distance:function(i,c){var h=Math.PI/180,y=i.lat*h,N=c.lat*h,C=Math.sin((c.lat-i.lat)*h/2),G=Math.sin((c.lng-i.lng)*h/2),le=C*C+Math.cos(y)*Math.cos(N)*G*G,xe=2*Math.atan2(Math.sqrt(le),Math.sqrt(1-le));return this.R*xe}}),pe=6378137,Ve={R:pe,MAX_LATITUDE:85.0511287798,project:function(i){var c=Math.PI/180,h=this.MAX_LATITUDE,y=Math.max(Math.min(h,i.lat),-h),N=Math.sin(y*c);return new ie(this.R*i.lng*c,this.R*Math.log((1+N)/(1-N))/2)},unproject:function(i){var c=180/Math.PI;return new de((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*c,i.x*c/this.R)},bounds:(function(){var i=pe*Math.PI;return new D([-i,-i],[i,i])})()};function Ye(i,c,h,y){if(z(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=c,this._c=h,this._d=y}Ye.prototype={transform:function(i,c){return this._transform(i.clone(),c)},_transform:function(i,c){return c=c||1,i.x=c*(this._a*i.x+this._b),i.y=c*(this._c*i.y+this._d),i},untransform:function(i,c){return c=c||1,new ie((i.x/c-this._b)/this._a,(i.y/c-this._d)/this._c)}};function Ot(i,c,h,y){return new Ye(i,c,h,y)}var ft=d({},Qe,{code:"EPSG:3857",projection:Ve,transformation:(function(){var i=.5/(Math.PI*Ve.R);return Ot(i,.5,-i,.5)})()}),ze=d({},ft,{code:"EPSG:900913"});function at(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function pt(i,c){var h="",y,N,C,G,le,xe;for(y=0,C=i.length;y<C;y++){for(le=i[y],N=0,G=le.length;N<G;N++)xe=le[N],h+=(N?"L":"M")+xe.x+" "+xe.y;h+=c?Ue.svg?"z":"x":""}return h||"M0 0"}var Rt=document.documentElement.style,It="ActiveXObject"in window,Qt=It&&!document.addEventListener,ne="msLaunchUri"in navigator&&!("documentMode"in document),Se=ht("webkit"),Pe=ht("android"),Tt=ht("android 2")||ht("android 3"),se=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),He=Pe&&ht("Google")&&se<537&&!("AudioNode"in window),_t=!!window.opera,pn=!ne&&ht("chrome"),Lt=ht("gecko")&&!Se&&!_t&&!It,rt=!pn&&ht("safari"),Gn=ht("phantom"),be="OTransition"in Rt,et=navigator.platform.indexOf("Win")===0,lt=It&&"transition"in Rt,Nt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Tt,Vt="MozPerspective"in Rt,Dt=!window.L_DISABLE_3D&&(lt||Nt||Vt)&&!be&&!Gn,Xt=typeof orientation<"u"||ht("mobile"),Bn=Xt&&Se,Pt=Xt&&Nt,ut=!window.PointerEvent&&window.MSPointerEvent,dn=!!(window.PointerEvent||ut),jn="ontouchstart"in window||!!window.TouchEvent,We=!window.L_NO_TOUCH&&(jn||dn),kn=Xt&&_t,gt=Xt&&Lt,Wa=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Dn=(function(){var i=!1;try{var c=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",w,c),window.removeEventListener("testPassiveEventSupport",w,c)}catch{}return i})(),Kt=(function(){return!!document.createElement("canvas").getContext})(),$n=!!(document.createElementNS&&at("svg").createSVGRect),es=!!$n&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),J=!$n&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var c=i.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}})(),qe=navigator.platform.indexOf("Mac")===0,xn=navigator.platform.indexOf("Linux")===0;function ht(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Ue={ie:It,ielt9:Qt,edge:ne,webkit:Se,android:Pe,android23:Tt,androidStock:He,opera:_t,chrome:pn,gecko:Lt,safari:rt,phantom:Gn,opera12:be,win:et,ie3d:lt,webkit3d:Nt,gecko3d:Vt,any3d:Dt,mobile:Xt,mobileWebkit:Bn,mobileWebkit3d:Pt,msPointer:ut,pointer:dn,touch:We,touchNative:jn,mobileOpera:kn,mobileGecko:gt,retina:Wa,passiveEvents:Dn,canvas:Kt,svg:$n,vml:J,inlineSvg:es,mac:qe,linux:xn},sn=Ue.msPointer?"MSPointerDown":"pointerdown",yn=Ue.msPointer?"MSPointerMove":"pointermove",En=Ue.msPointer?"MSPointerUp":"pointerup",Wt=Ue.msPointer?"MSPointerCancel":"pointercancel",hn={touchstart:sn,touchmove:yn,touchend:En,touchcancel:Wt},sa={touchstart:Sa,touchmove:Un,touchend:Un,touchcancel:Un},K={},De=!1;function dt(i,c,h){return c==="touchstart"&&St(),sa[c]?(h=sa[c].bind(this,h),i.addEventListener(hn[c],h,!1),h):(console.warn("wrong event specified:",c),w)}function Qn(i,c,h){if(!hn[c]){console.warn("wrong event specified:",c);return}i.removeEventListener(hn[c],h,!1)}function Tn(i){K[i.pointerId]=i}function q(i){K[i.pointerId]&&(K[i.pointerId]=i)}function Ze(i){delete K[i.pointerId]}function St(){De||(document.addEventListener(sn,Tn,!0),document.addEventListener(yn,q,!0),document.addEventListener(En,Ze,!0),document.addEventListener(Wt,Ze,!0),De=!0)}function Un(i,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var h in K)c.touches.push(K[h]);c.changedTouches=[c],i(c)}}function Sa(i,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Cn(c),Un(i,c)}function vn(i){var c={},h,y;for(y in i)h=i[y],c[y]=h&&h.bind?h.bind(i):h;return i=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var rn=200;function mr(i,c){i.addEventListener("dblclick",c);var h=0,y;function N(C){if(C.detail!==1){y=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var G=xr(C);if(!(G.some(function(xe){return xe instanceof HTMLLabelElement&&xe.attributes.for})&&!G.some(function(xe){return xe instanceof HTMLInputElement||xe instanceof HTMLSelectElement}))){var le=Date.now();le-h<=rn?(y++,y===2&&c(vn(C))):y=1,h=le}}}return i.addEventListener("click",N),{dblclick:c,simDblclick:N}}function bs(i,c){i.removeEventListener("dblclick",c.dblclick),i.removeEventListener("click",c.simDblclick)}var ts=Rs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ns=Rs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Bt=ns==="webkitTransition"||ns==="OTransition"?ns+"End":"transitionend";function Ws(i){return typeof i=="string"?document.getElementById(i):i}function ei(i,c){var h=i.style[c]||i.currentStyle&&i.currentStyle[c];if((!h||h==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(i,null);h=y?y[c]:null}return h==="auto"?null:h}function jt(i,c,h){var y=document.createElement(i);return y.className=c||"",h&&h.appendChild(y),y}function Ut(i){var c=i.parentNode;c&&c.removeChild(i)}function ia(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Ln(i){var c=i.parentNode;c&&c.lastChild!==i&&c.appendChild(i)}function wa(i){var c=i.parentNode;c&&c.firstChild!==i&&c.insertBefore(i,c.firstChild)}function zs(i,c){if(i.classList!==void 0)return i.classList.contains(c);var h=Si(i);return h.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(h)}function ot(i,c){if(i.classList!==void 0)for(var h=T(c),y=0,N=h.length;y<N;y++)i.classList.add(h[y]);else if(!zs(i,c)){var C=Si(i);Os(i,(C?C+" ":"")+c)}}function ln(i,c){i.classList!==void 0?i.classList.remove(c):Os(i,O((" "+Si(i)+" ").replace(" "+c+" "," ")))}function Os(i,c){i.className.baseVal===void 0?i.className=c:i.className.baseVal=c}function Si(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function en(i,c){"opacity"in i.style?i.style.opacity=c:"filter"in i.style&&ti(i,c)}function ti(i,c){var h=!1,y="DXImageTransform.Microsoft.Alpha";try{h=i.filters.item(y)}catch{if(c===1)return}c=Math.round(c*100),h?(h.Enabled=c!==100,h.Opacity=c):i.style.filter+=" progid:"+y+"(opacity="+c+")"}function Rs(i){for(var c=document.documentElement.style,h=0;h<i.length;h++)if(i[h]in c)return i[h];return!1}function U(i,c,h){var y=c||new ie(0,0);i.style[ts]=(Ue.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(h?" scale("+h+")":"")}function Re(i,c){i._leaflet_pos=c,Ue.any3d?U(i,c):(i.style.left=c.x+"px",i.style.top=c.y+"px")}function yt(i){return i._leaflet_pos||new ie(0,0)}var ra,la,wi;if("onselectstart"in document)ra=function(){it(window,"selectstart",Cn)},la=function(){Yt(window,"selectstart",Cn)};else{var _s=Rs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ra=function(){if(_s){var i=document.documentElement.style;wi=i[_s],i[_s]="none"}},la=function(){_s&&(document.documentElement.style[_s]=wi,wi=void 0)}}function nl(){it(window,"dragstart",Cn)}function hr(){Yt(window,"dragstart",Cn)}var al,no;function ki(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(ka(),al=i,no=i.style.outlineStyle,i.style.outlineStyle="none",it(window,"keydown",ka))}function ka(){al&&(al.style.outlineStyle=no,al=void 0,no=void 0,Yt(window,"keydown",ka))}function sl(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function fr(i){var c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}var Ei={__proto__:null,TRANSFORM:ts,TRANSITION:ns,TRANSITION_END:Bt,get:Ws,getStyle:ei,create:jt,remove:Ut,empty:ia,toFront:Ln,toBack:wa,hasClass:zs,addClass:ot,removeClass:ln,setClass:Os,getClass:Si,setOpacity:en,testProp:Rs,setTransform:U,setPosition:Re,getPosition:yt,get disableTextSelection(){return ra},get enableTextSelection(){return la},disableImageDrag:nl,enableImageDrag:hr,preventOutline:ki,restoreOutline:ka,getSizedParentNode:sl,getScale:fr};function it(i,c,h,y){if(c&&typeof c=="object")for(var N in c)qa(i,N,c[N],h);else{c=T(c);for(var C=0,G=c.length;C<G;C++)qa(i,c[C],h,y)}return this}var Fa="_leaflet_events";function Yt(i,c,h,y){if(arguments.length===1)ao(i),delete i[Fa];else if(c&&typeof c=="object")for(var N in c)pr(i,N,c[N],h);else if(c=T(c),arguments.length===2)ao(i,function(le){return Z(c,le)!==-1});else for(var C=0,G=c.length;C<G;C++)pr(i,c[C],h,y);return this}function ao(i,c){for(var h in i[Fa]){var y=h.split(/\d/)[0];(!c||c(y))&&pr(i,y,null,null,h)}}var ni={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function qa(i,c,h,y){var N=c+v(h)+(y?"_"+v(y):"");if(i[Fa]&&i[Fa][N])return this;var C=function(le){return h.call(y||i,le||window.event)},G=C;!Ue.touchNative&&Ue.pointer&&c.indexOf("touch")===0?C=dt(i,c,C):Ue.touch&&c==="dblclick"?C=mr(i,C):"addEventListener"in i?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?i.addEventListener(ni[c]||c,C,Ue.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(C=function(le){le=le||window.event,Ns(i,le)&&G(le)},i.addEventListener(ni[c],C,!1)):i.addEventListener(c,G,!1):i.attachEvent("on"+c,C),i[Fa]=i[Fa]||{},i[Fa][N]=C}function pr(i,c,h,y,N){N=N||c+v(h)+(y?"_"+v(y):"");var C=i[Fa]&&i[Fa][N];if(!C)return this;!Ue.touchNative&&Ue.pointer&&c.indexOf("touch")===0?Qn(i,c,C):Ue.touch&&c==="dblclick"?bs(i,C):"removeEventListener"in i?i.removeEventListener(ni[c]||c,C,!1):i.detachEvent("on"+c,C),i[Fa][N]=null}function Za(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function as(i){return qa(i,"wheel",Za),this}function ai(i){return it(i,"mousedown touchstart dblclick contextmenu",Za),i._leaflet_disable_click=!0,this}function Cn(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Ds(i){return Cn(i),Za(i),this}function xr(i){if(i.composedPath)return i.composedPath();for(var c=[],h=i.target;h;)c.push(h),h=h.parentNode;return c}function gr(i,c){if(!c)return new ie(i.clientX,i.clientY);var h=fr(c),y=h.boundingClientRect;return new ie((i.clientX-y.left)/h.x-c.clientLeft,(i.clientY-y.top)/h.y-c.clientTop)}var Sc=Ue.linux&&Ue.chrome?window.devicePixelRatio:Ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function oa(i){return Ue.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Sc:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Ns(i,c){var h=c.relatedTarget;if(!h)return!0;try{for(;h&&h!==i;)h=h.parentNode}catch{return!1}return h!==i}var il={__proto__:null,on:it,off:Yt,stopPropagation:Za,disableScrollPropagation:as,disableClickPropagation:ai,preventDefault:Cn,stop:Ds,getPropagationPath:xr,getMousePosition:gr,getWheelDelta:oa,isExternalTarget:Ns,addListener:it,removeListener:Yt},Ti=$.extend({run:function(i,c,h,y){this.stop(),this._el=i,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=yt(i),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=te(this._animate,this),this._step()},_step:function(i){var c=+new Date-this._startTime,h=this._duration*1e3;c<h?this._runFrame(this._easeOut(c/h),i):(this._runFrame(1),this._complete())},_runFrame:function(i,c){var h=this._startPos.add(this._offset.multiplyBy(i));c&&h._round(),Re(this._el,h),this.fire("step")},_complete:function(){oe(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Ct=$.extend({options:{crs:ft,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,c){c=E(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(Ee(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ns&&Ue.any3d&&!Ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),it(this._proxy,Bt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,c,h){if(c=c===void 0?this._zoom:this._limitZoom(c),i=this._limitCenter(Ee(i),c,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=d({animate:h.animate},h.zoom),h.pan=d({animate:h.animate,duration:h.duration},h.pan));var y=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,c,h.zoom):this._tryAnimatedPan(i,h.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(i,c,h.pan&&h.pan.noMoveStart),this},setZoom:function(i,c){return this._loaded?this.setView(this.getCenter(),i,{zoom:c}):(this._zoom=i,this)},zoomIn:function(i,c){return i=i||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,c)},zoomOut:function(i,c){return i=i||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,c)},setZoomAround:function(i,c,h){var y=this.getZoomScale(c),N=this.getSize().divideBy(2),C=i instanceof ie?i:this.latLngToContainerPoint(i),G=C.subtract(N).multiplyBy(1-1/y),le=this.containerPointToLatLng(N.add(G));return this.setView(le,c,{zoom:h})},_getBoundsCenterZoom:function(i,c){c=c||{},i=i.getBounds?i.getBounds():me(i);var h=_e(c.paddingTopLeft||c.padding||[0,0]),y=_e(c.paddingBottomRight||c.padding||[0,0]),N=this.getBoundsZoom(i,!1,h.add(y));if(N=typeof c.maxZoom=="number"?Math.min(c.maxZoom,N):N,N===1/0)return{center:i.getCenter(),zoom:N};var C=y.subtract(h).divideBy(2),G=this.project(i.getSouthWest(),N),le=this.project(i.getNorthEast(),N),xe=this.unproject(G.add(le).divideBy(2).add(C),N);return{center:xe,zoom:N}},fitBounds:function(i,c){if(i=me(i),!i.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(i,c);return this.setView(h.center,h.zoom,c)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,c){return this.setView(i,this._zoom,{pan:c})},panBy:function(i,c){if(i=_e(i).round(),c=c||{},!i.x&&!i.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ti,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){ot(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,h,c.duration||.25,c.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,c,h){if(h=h||{},h.animate===!1||!Ue.any3d)return this.setView(i,c,h);this._stop();var y=this.project(this.getCenter()),N=this.project(i),C=this.getSize(),G=this._zoom;i=Ee(i),c=c===void 0?G:c;var le=Math.max(C.x,C.y),xe=le*this.getZoomScale(G,c),Te=N.distanceTo(y)||1,Le=1.42,Xe=Le*Le;function vt(Sn){var ks=Sn?-1:1,li=Sn?xe:le,vo=xe*xe-le*le+ks*Xe*Xe*Te*Te,Or=2*li*Xe*Te,Rr=vo/Or,Hs=Math.sqrt(Rr*Rr+1)-Rr,Es=Hs<1e-9?-18:Math.log(Hs);return Es}function Vn(Sn){return(Math.exp(Sn)-Math.exp(-Sn))/2}function An(Sn){return(Math.exp(Sn)+Math.exp(-Sn))/2}function ba(Sn){return Vn(Sn)/An(Sn)}var Ft=vt(0);function qt(Sn){return le*(An(Ft)/An(Ft+Le*Sn))}function wt(Sn){return le*(An(Ft)*ba(Ft+Le*Sn)-Vn(Ft))/Xe}function qs(Sn){return 1-Math.pow(1-Sn,1.5)}var Aa=Date.now(),vl=(vt(1)-Ft)/Le,Zs=h.duration?1e3*h.duration:1e3*vl*.8;function yo(){var Sn=(Date.now()-Aa)/Zs,ks=qs(Sn)*vl;Sn<=1?(this._flyToFrame=te(yo,this),this._move(this.unproject(y.add(N.subtract(y).multiplyBy(wt(ks)/Te)),G),this.getScaleZoom(le/qt(ks),G),{flyTo:!0})):this._move(i,c)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),yo.call(this),this},flyToBounds:function(i,c){var h=this._getBoundsCenterZoom(i,c);return this.flyTo(h.center,h.zoom,c)},setMaxBounds:function(i){return i=me(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var c=this.options.minZoom;return this.options.minZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var c=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,c){this._enforcingBounds=!0;var h=this.getCenter(),y=this._limitCenter(h,this._zoom,me(i));return h.equals(y)||this.panTo(y,c),this._enforcingBounds=!1,this},panInside:function(i,c){c=c||{};var h=_e(c.paddingTopLeft||c.padding||[0,0]),y=_e(c.paddingBottomRight||c.padding||[0,0]),N=this.project(this.getCenter()),C=this.project(i),G=this.getPixelBounds(),le=ae([G.min.add(h),G.max.subtract(y)]),xe=le.getSize();if(!le.contains(C)){this._enforcingBounds=!0;var Te=C.subtract(le.getCenter()),Le=le.extend(C).getSize().subtract(xe);N.x+=Te.x<0?-Le.x:Le.x,N.y+=Te.y<0?-Le.y:Le.y,this.panTo(this.unproject(N),c),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=d({animate:!1,pan:!0},i===!0?{animate:!0}:i);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),y=c.divideBy(2).round(),N=h.divideBy(2).round(),C=y.subtract(N);return!C.x&&!C.y?this:(i.animate&&i.pan?this.panBy(C):(i.pan&&this._rawPanBy(C),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=d({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=f(this._handleGeolocationResponse,this),h=f(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,h,i):navigator.geolocation.getCurrentPosition(c,h,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var c=i.code,h=i.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var c=i.coords.latitude,h=i.coords.longitude,y=new de(c,h),N=y.toBounds(i.coords.accuracy*2),C=this._locateOptions;if(C.setView){var G=this.getBoundsZoom(N);this.setView(y,C.maxZoom?Math.min(G,C.maxZoom):G)}var le={latlng:y,bounds:N,timestamp:i.timestamp};for(var xe in i.coords)typeof i.coords[xe]=="number"&&(le[xe]=i.coords[xe]);this.fire("locationfound",le)}},addHandler:function(i,c){if(!c)return this;var h=this[i]=new c(this);return this._handlers.push(h),this.options[i]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ut(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(oe(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Ut(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,c){var h="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),y=jt("div",h,c||this._mapPane);return i&&(this._panes[i]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),c=this.unproject(i.getBottomLeft()),h=this.unproject(i.getTopRight());return new F(c,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,c,h){i=me(i),h=_e(h||[0,0]);var y=this.getZoom()||0,N=this.getMinZoom(),C=this.getMaxZoom(),G=i.getNorthWest(),le=i.getSouthEast(),xe=this.getSize().subtract(h),Te=ae(this.project(le,y),this.project(G,y)).getSize(),Le=Ue.any3d?this.options.zoomSnap:1,Xe=xe.x/Te.x,vt=xe.y/Te.y,Vn=c?Math.max(Xe,vt):Math.min(Xe,vt);return y=this.getScaleZoom(Vn,y),Le&&(y=Math.round(y/(Le/100))*(Le/100),y=c?Math.ceil(y/Le)*Le:Math.floor(y/Le)*Le),Math.max(N,Math.min(C,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,c){var h=this._getTopLeftPoint(i,c);return new D(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,c){var h=this.options.crs;return c=c===void 0?this._zoom:c,h.scale(i)/h.scale(c)},getScaleZoom:function(i,c){var h=this.options.crs;c=c===void 0?this._zoom:c;var y=h.zoom(i*h.scale(c));return isNaN(y)?1/0:y},project:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(Ee(i),c)},unproject:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(_e(i),c)},layerPointToLatLng:function(i){var c=_e(i).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(i){var c=this.project(Ee(i))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(Ee(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(me(i))},distance:function(i,c){return this.options.crs.distance(Ee(i),Ee(c))},containerPointToLayerPoint:function(i){return _e(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return _e(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var c=this.containerPointToLayerPoint(_e(i));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ee(i)))},mouseEventToContainerPoint:function(i){return gr(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var c=this._container=Ws(i);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");it(c,"scroll",this._onScroll,this),this._containerId=v(c)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ue.any3d,ot(i,"leaflet-container"+(Ue.touch?" leaflet-touch":"")+(Ue.retina?" leaflet-retina":"")+(Ue.ielt9?" leaflet-oldie":"")+(Ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=ei(i,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Re(this._mapPane,new ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ot(i.markerPane,"leaflet-zoom-hide"),ot(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,c,h){Re(this._mapPane,new ie(0,0));var y=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var N=this._zoom!==c;this._moveStart(N,h)._move(i,c)._moveEnd(N),this.fire("viewreset"),y&&this.fire("load")},_moveStart:function(i,c){return i&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(i,c,h,y){c===void 0&&(c=this._zoom);var N=this._zoom!==c;return this._zoom=c,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),y?h&&h.pinch&&this.fire("zoom",h):((N||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return oe(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Re(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[v(this._container)]=this;var c=i?Yt:it;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Ue.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){oe(this._resizeRequest),this._resizeRequest=te(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,c){for(var h=[],y,N=c==="mouseout"||c==="mouseover",C=i.target||i.srcElement,G=!1;C;){if(y=this._targets[v(C)],y&&(c==="click"||c==="preclick")&&this._draggableMoved(y)){G=!0;break}if(y&&y.listens(c,!0)&&(N&&!Ns(C,i)||(h.push(y),N))||C===this._container)break;C=C.parentNode}return!h.length&&!G&&!N&&this.listens(c,!0)&&(h=[this]),h},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var c=i.target||i.srcElement;if(!(!this._loaded||c._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(c))){var h=i.type;h==="mousedown"&&ki(c),this._fireDOMEvent(i,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,c,h){if(i.type==="click"){var y=d({},i);y.type="preclick",this._fireDOMEvent(y,y.type,h)}var N=this._findEventTargets(i,c);if(h){for(var C=[],G=0;G<h.length;G++)h[G].listens(c,!0)&&C.push(h[G]);N=C.concat(N)}if(N.length){c==="contextmenu"&&Cn(i);var le=N[0],xe={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Te=le.getLatLng&&(!le._radius||le._radius<=10);xe.containerPoint=Te?this.latLngToContainerPoint(le.getLatLng()):this.mouseEventToContainerPoint(i),xe.layerPoint=this.containerPointToLayerPoint(xe.containerPoint),xe.latlng=Te?le.getLatLng():this.layerPointToLatLng(xe.layerPoint)}for(G=0;G<N.length;G++)if(N[G].fire(c,xe,!0),xe.originalEvent._stopped||N[G].options.bubblingMouseEvents===!1&&Z(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,c=this._handlers.length;i<c;i++)this._handlers[i].disable()},whenReady:function(i,c){return this._loaded?i.call(c||this,{target:this}):this.on("load",i,c),this},_getMapPanePos:function(){return yt(this._mapPane)||new ie(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,c){var h=i&&c!==void 0?this._getNewPixelOrigin(i,c):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,c){var h=this.getSize()._divideBy(2);return this.project(i,c)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,c,h){var y=this._getNewPixelOrigin(h,c);return this.project(i,c)._subtract(y)},_latLngBoundsToNewLayerBounds:function(i,c,h){var y=this._getNewPixelOrigin(h,c);return ae([this.project(i.getSouthWest(),c)._subtract(y),this.project(i.getNorthWest(),c)._subtract(y),this.project(i.getSouthEast(),c)._subtract(y),this.project(i.getNorthEast(),c)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,c,h){if(!h)return i;var y=this.project(i,c),N=this.getSize().divideBy(2),C=new D(y.subtract(N),y.add(N)),G=this._getBoundsOffset(C,h,c);return Math.abs(G.x)<=1&&Math.abs(G.y)<=1?i:this.unproject(y.add(G),c)},_limitOffset:function(i,c){if(!c)return i;var h=this.getPixelBounds(),y=new D(h.min.add(i),h.max.add(i));return i.add(this._getBoundsOffset(y,c))},_getBoundsOffset:function(i,c,h){var y=ae(this.project(c.getNorthEast(),h),this.project(c.getSouthWest(),h)),N=y.min.subtract(i.min),C=y.max.subtract(i.max),G=this._rebound(N.x,-C.x),le=this._rebound(N.y,-C.y);return new ie(G,le)},_rebound:function(i,c){return i+c>0?Math.round(i-c)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(c))},_limitZoom:function(i){var c=this.getMinZoom(),h=this.getMaxZoom(),y=Ue.any3d?this.options.zoomSnap:1;return y&&(i=Math.round(i/y)*y),Math.max(c,Math.min(h,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ln(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,c){var h=this._getCenterOffset(i)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,c),!0)},_createAnimProxy:function(){var i=this._proxy=jt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(c){var h=ts,y=this._proxy.style[h];U(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),y===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ut(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),c=this.getZoom();U(this._proxy,this.project(i,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,c,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(c),N=this._getCenterOffset(i)._divideBy(1-1/y);return h.animate!==!0&&!this.getSize().contains(N)?!1:(te(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(i,c,!0)},this),!0)},_animateZoom:function(i,c,h,y){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=c,ot(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:c,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ln(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function so(i,c){return new Ct(i,c)}var va=ue.extend({options:{position:"topright"},initialize:function(i){E(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var c=this._map;return c&&c.removeControl(this),this.options.position=i,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var c=this._container=this.onAdd(i),h=this.getPosition(),y=i._controlCorners[h];return ot(c,"leaflet-control"),h.indexOf("bottom")!==-1?y.insertBefore(c,y.firstChild):y.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ut(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),js=function(i){return new va(i)};Ct.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},c="leaflet-",h=this._controlContainer=jt("div",c+"control-container",this._container);function y(N,C){var G=c+N+" "+c+C;i[N+C]=jt("div",G,h)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Ut(this._controlCorners[i]);Ut(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var yr=va.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,c,h,y){return h<y?-1:y<h?1:0}},initialize:function(i,c,h){E(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var y in i)this._addLayer(i[y],y);for(y in c)this._addLayer(c[y],y,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return va.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,c){return this._addLayer(i,c),this._map?this._update():this},addOverlay:function(i,c){return this._addLayer(i,c,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var c=this._getLayer(v(i));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){ot(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(ot(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):ln(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ln(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",c=this._container=jt("div",i),h=this.options.collapsed;c.setAttribute("aria-haspopup",!0),ai(c),as(c);var y=this._section=jt("section",i+"-list");h&&(this._map.on("click",this.collapse,this),it(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var N=this._layersLink=jt("a",i+"-toggle",c);N.href="#",N.title="Layers",N.setAttribute("role","button"),it(N,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){Cn(C),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=jt("div",i+"-base",y),this._separator=jt("div",i+"-separator",y),this._overlaysList=jt("div",i+"-overlays",y),c.appendChild(y)},_getLayer:function(i){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&v(this._layers[c].layer)===i)return this._layers[c]},_addLayer:function(i,c,h){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:c,overlay:h}),this.options.sortLayers&&this._layers.sort(f(function(y,N){return this.options.sortFunction(y.layer,N.layer,y.name,N.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ia(this._baseLayersList),ia(this._overlaysList),this._layerControlInputs=[];var i,c,h,y,N=0;for(h=0;h<this._layers.length;h++)y=this._layers[h],this._addItem(y),c=c||y.overlay,i=i||!y.overlay,N+=y.overlay?0:1;return this.options.hideSingleBase&&(i=i&&N>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=c&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var c=this._getLayer(v(i.target)),h=c.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;h&&this._map.fire(h,c)},_createRadioElement:function(i,c){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(c?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=h,y.firstChild},_addItem:function(i){var c=document.createElement("label"),h=this._map.hasLayer(i.layer),y;i.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=h):y=this._createRadioElement("leaflet-base-layers_"+v(this),h),this._layerControlInputs.push(y),y.layerId=v(i.layer),it(y,"click",this._onInputClick,this);var N=document.createElement("span");N.innerHTML=" "+i.name;var C=document.createElement("span");c.appendChild(C),C.appendChild(y),C.appendChild(N);var G=i.overlay?this._overlaysList:this._baseLayersList;return G.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,c,h,y=[],N=[];this._handlingClick=!0;for(var C=i.length-1;C>=0;C--)c=i[C],h=this._getLayer(c.layerId).layer,c.checked?y.push(h):c.checked||N.push(h);for(C=0;C<N.length;C++)this._map.hasLayer(N[C])&&this._map.removeLayer(N[C]);for(C=0;C<y.length;C++)this._map.hasLayer(y[C])||this._map.addLayer(y[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,c,h,y=this._map.getZoom(),N=i.length-1;N>=0;N--)c=i[N],h=this._getLayer(c.layerId).layer,c.disabled=h.options.minZoom!==void 0&&y<h.options.minZoom||h.options.maxZoom!==void 0&&y>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,it(i,"click",Cn),this.expand();var c=this;setTimeout(function(){Yt(i,"click",Cn),c._preventClick=!1})}}),wc=function(i,c,h){return new yr(i,c,h)},io=va.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var c="leaflet-control-zoom",h=jt("div",c+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,c+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,c+"-out",h,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,c,h,y,N){var C=jt("a",h,y);return C.innerHTML=i,C.href="#",C.title=c,C.setAttribute("role","button"),C.setAttribute("aria-label",c),ai(C),it(C,"click",Ds),it(C,"click",N,this),it(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var i=this._map,c="leaflet-disabled";ln(this._zoomInButton,c),ln(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(ot(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(ot(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ct.mergeOptions({zoomControl:!0}),Ct.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new io,this.addControl(this.zoomControl))});var Ud=function(i){return new io(i)},kc=va.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var c="leaflet-control-scale",h=jt("div",c),y=this.options;return this._addScales(y,c+"-line",h),i.on(y.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),h},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,c,h){i.metric&&(this._mScale=jt("div",c,h)),i.imperial&&(this._iScale=jt("div",c,h))},_update:function(){var i=this._map,c=i.getSize().y/2,h=i.distance(i.containerPointToLatLng([0,c]),i.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(h)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var c=this._getRoundNum(i),h=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,h,c/i)},_updateImperial:function(i){var c=i*3.2808399,h,y,N;c>5280?(h=c/5280,y=this._getRoundNum(h),this._updateScale(this._iScale,y+" mi",y/h)):(N=this._getRoundNum(c),this._updateScale(this._iScale,N+" ft",N/c))},_updateScale:function(i,c,h){i.style.width=Math.round(this.options.maxWidth*h)+"px",i.innerHTML=c},_getRoundNum:function(i){var c=Math.pow(10,(Math.floor(i)+"").length-1),h=i/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,c*h}}),ro=function(i){return new kc(i)},Fd='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',lo=va.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ue.inlineSvg?Fd+" ":"")+"Leaflet</a>"},initialize:function(i){E(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=jt("div","leaflet-control-attribution"),ai(this._container);for(var c in i._layers)i._layers[c].getAttribution&&this.addAttribution(i._layers[c].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var c in this._attributions)this._attributions[c]&&i.push(c);var h=[];this.options.prefix&&h.push(this.options.prefix),i.length&&h.push(i.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Ct.mergeOptions({attributionControl:!0}),Ct.addInitHook(function(){this.options.attributionControl&&new lo().addTo(this)});var qd=function(i){return new lo(i)};va.Layers=yr,va.Zoom=io,va.Scale=kc,va.Attribution=lo,js.layers=wc,js.zoom=Ud,js.scale=ro,js.attribution=qd;var ss=ue.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ss.addTo=function(i,c){return i.addHandler(c,this),this};var Zd={Events:Q},oo=Ue.touch?"touchstart mousedown":"mousedown",Ls=$.extend({options:{clickTolerance:3},initialize:function(i,c,h,y){E(this,y),this._element=i,this._dragStartTarget=c||i,this._preventOutline=h},enable:function(){this._enabled||(it(this._dragStartTarget,oo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ls._dragging===this&&this.finishDrag(!0),Yt(this._dragStartTarget,oo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!zs(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Ls._dragging===this&&this.finishDrag();return}if(!(Ls._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Ls._dragging=this,this._preventOutline&&ki(this._element),nl(),ra(),!this._moving)){this.fire("down");var c=i.touches?i.touches[0]:i,h=sl(this._element);this._startPoint=new ie(c.clientX,c.clientY),this._startPos=yt(this._element),this._parentScale=fr(h);var y=i.type==="mousedown";it(document,y?"mousemove":"touchmove",this._onMove,this),it(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var c=i.touches&&i.touches.length===1?i.touches[0]:i,h=new ie(c.clientX,c.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Cn(i),this._moved||(this.fire("dragstart"),this._moved=!0,ot(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ot(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Re(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){ln(document.body,"leaflet-dragging"),this._lastTarget&&(ln(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Yt(document,"mousemove touchmove",this._onMove,this),Yt(document,"mouseup touchend touchcancel",this._onUp,this),hr(),la();var c=this._moved&&this._moving;this._moving=!1,Ls._dragging=!1,c&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Ec(i,c,h){var y,N=[1,4,2,8],C,G,le,xe,Te,Le,Xe,vt;for(C=0,Le=i.length;C<Le;C++)i[C]._code=si(i[C],c);for(le=0;le<4;le++){for(Xe=N[le],y=[],C=0,Le=i.length,G=Le-1;C<Le;G=C++)xe=i[C],Te=i[G],xe._code&Xe?Te._code&Xe||(vt=rl(Te,xe,Xe,c,h),vt._code=si(vt,c),y.push(vt)):(Te._code&Xe&&(vt=rl(Te,xe,Xe,c,h),vt._code=si(vt,c),y.push(vt)),y.push(xe));i=y}return i}function Tc(i,c){var h,y,N,C,G,le,xe,Te,Le;if(!i||i.length===0)throw new Error("latlngs not passed");Ea(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Xe=Ee([0,0]),vt=me(i),Vn=vt.getNorthWest().distanceTo(vt.getSouthWest())*vt.getNorthEast().distanceTo(vt.getNorthWest());Vn<1700&&(Xe=co(i));var An=i.length,ba=[];for(h=0;h<An;h++){var Ft=Ee(i[h]);ba.push(c.project(Ee([Ft.lat-Xe.lat,Ft.lng-Xe.lng])))}for(le=xe=Te=0,h=0,y=An-1;h<An;y=h++)N=ba[h],C=ba[y],G=N.y*C.x-C.y*N.x,xe+=(N.x+C.x)*G,Te+=(N.y+C.y)*G,le+=G*3;le===0?Le=ba[0]:Le=[xe/le,Te/le];var qt=c.unproject(_e(Le));return Ee([qt.lat+Xe.lat,qt.lng+Xe.lng])}function co(i){for(var c=0,h=0,y=0,N=0;N<i.length;N++){var C=Ee(i[N]);c+=C.lat,h+=C.lng,y++}return Ee([c/y,h/y])}var uo={__proto__:null,clipPolygon:Ec,polygonCenter:Tc,centroid:co};function Cc(i,c){if(!c||!i.length)return i.slice();var h=c*c;return i=Kd(i,h),i=Mc(i,h),i}function Ac(i,c,h){return Math.sqrt(vr(i,c,h,!0))}function Hd(i,c,h){return vr(i,c,h)}function Mc(i,c){var h=i.length,y=typeof Uint8Array<"u"?Uint8Array:Array,N=new y(h);N[0]=N[h-1]=1,mo(i,N,c,0,h-1);var C,G=[];for(C=0;C<h;C++)N[C]&&G.push(i[C]);return G}function mo(i,c,h,y,N){var C=0,G,le,xe;for(le=y+1;le<=N-1;le++)xe=vr(i[le],i[y],i[N],!0),xe>C&&(G=le,C=xe);C>h&&(c[G]=1,mo(i,c,h,y,G),mo(i,c,h,G,N))}function Kd(i,c){for(var h=[i[0]],y=1,N=0,C=i.length;y<C;y++)Gd(i[y],i[N])>c&&(h.push(i[y]),N=y);return N<C-1&&h.push(i[C-1]),h}var zc;function Oc(i,c,h,y,N){var C=y?zc:si(i,h),G=si(c,h),le,xe,Te;for(zc=G;;){if(!(C|G))return[i,c];if(C&G)return!1;le=C||G,xe=rl(i,c,le,h,N),Te=si(xe,h),le===C?(i=xe,C=Te):(c=xe,G=Te)}}function rl(i,c,h,y,N){var C=c.x-i.x,G=c.y-i.y,le=y.min,xe=y.max,Te,Le;return h&8?(Te=i.x+C*(xe.y-i.y)/G,Le=xe.y):h&4?(Te=i.x+C*(le.y-i.y)/G,Le=le.y):h&2?(Te=xe.x,Le=i.y+G*(xe.x-i.x)/C):h&1&&(Te=le.x,Le=i.y+G*(le.x-i.x)/C),new ie(Te,Le,N)}function si(i,c){var h=0;return i.x<c.min.x?h|=1:i.x>c.max.x&&(h|=2),i.y<c.min.y?h|=4:i.y>c.max.y&&(h|=8),h}function Gd(i,c){var h=c.x-i.x,y=c.y-i.y;return h*h+y*y}function vr(i,c,h,y){var N=c.x,C=c.y,G=h.x-N,le=h.y-C,xe=G*G+le*le,Te;return xe>0&&(Te=((i.x-N)*G+(i.y-C)*le)/xe,Te>1?(N=h.x,C=h.y):Te>0&&(N+=G*Te,C+=le*Te)),G=i.x-N,le=i.y-C,y?G*G+le*le:new ie(N,C)}function Ea(i){return!z(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function ll(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ea(i)}function Ci(i,c){var h,y,N,C,G,le,xe,Te;if(!i||i.length===0)throw new Error("latlngs not passed");Ea(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Le=Ee([0,0]),Xe=me(i),vt=Xe.getNorthWest().distanceTo(Xe.getSouthWest())*Xe.getNorthEast().distanceTo(Xe.getNorthWest());vt<1700&&(Le=co(i));var Vn=i.length,An=[];for(h=0;h<Vn;h++){var ba=Ee(i[h]);An.push(c.project(Ee([ba.lat-Le.lat,ba.lng-Le.lng])))}for(h=0,y=0;h<Vn-1;h++)y+=An[h].distanceTo(An[h+1])/2;if(y===0)Te=An[0];else for(h=0,C=0;h<Vn-1;h++)if(G=An[h],le=An[h+1],N=G.distanceTo(le),C+=N,C>y){xe=(C-y)/N,Te=[le.x-xe*(le.x-G.x),le.y-xe*(le.y-G.y)];break}var Ft=c.unproject(_e(Te));return Ee([Ft.lat+Le.lat,Ft.lng+Le.lng])}var $d={__proto__:null,simplify:Cc,pointToSegmentDistance:Ac,closestPointOnSegment:Hd,clipSegment:Oc,_getEdgeIntersection:rl,_getBitCode:si,_sqClosestPointOnSegment:vr,isFlat:Ea,_flat:ll,polylineCenter:Ci},ol={project:function(i){return new ie(i.lng,i.lat)},unproject:function(i){return new de(i.y,i.x)},bounds:new D([-180,-90],[180,90])},cl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new D([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var c=Math.PI/180,h=this.R,y=i.lat*c,N=this.R_MINOR/h,C=Math.sqrt(1-N*N),G=C*Math.sin(y),le=Math.tan(Math.PI/4-y/2)/Math.pow((1-G)/(1+G),C/2);return y=-h*Math.log(Math.max(le,1e-10)),new ie(i.lng*c*h,y)},unproject:function(i){for(var c=180/Math.PI,h=this.R,y=this.R_MINOR/h,N=Math.sqrt(1-y*y),C=Math.exp(-i.y/h),G=Math.PI/2-2*Math.atan(C),le=0,xe=.1,Te;le<15&&Math.abs(xe)>1e-7;le++)Te=N*Math.sin(G),Te=Math.pow((1-Te)/(1+Te),N/2),xe=Math.PI/2-2*Math.atan(C*Te)-G,G+=xe;return new de(G*c,i.x*c/h)}},Rc={__proto__:null,LonLat:ol,Mercator:cl,SphericalMercator:Ve},Dc=d({},Qe,{code:"EPSG:3395",projection:cl,transformation:(function(){var i=.5/(Math.PI*cl.R);return Ot(i,.5,-i,.5)})()}),ho=d({},Qe,{code:"EPSG:4326",projection:ol,transformation:Ot(1/180,1,-1/180,.5)}),Ai=d({},Oe,{projection:ol,transformation:Ot(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,c){var h=c.lng-i.lng,y=c.lat-i.lat;return Math.sqrt(h*h+y*y)},infinite:!0});Oe.Earth=Qe,Oe.EPSG3395=Dc,Oe.EPSG3857=ft,Oe.EPSG900913=ze,Oe.EPSG4326=ho,Oe.Simple=Ai;var Ha=$.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[v(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[v(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var c=i.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var h=this.getEvents();c.on(h,this),this.once("remove",function(){c.off(h,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Ct.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var c=v(i);return this._layers[c]?this:(this._layers[c]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var c=v(i);return this._layers[c]?(this._loaded&&i.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return v(i)in this._layers},eachLayer:function(i,c){for(var h in this._layers)i.call(c,this._layers[h]);return this},_addLayers:function(i){i=i?z(i)?i:[i]:[];for(var c=0,h=i.length;c<h;c++)this.addLayer(i[c])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[v(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var c=v(i);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,c=-1/0,h=this._getZoomSpan();for(var y in this._zoomBoundLayers){var N=this._zoomBoundLayers[y].options;i=N.minZoom===void 0?i:Math.min(i,N.minZoom),c=N.maxZoom===void 0?c:Math.max(c,N.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=i===1/0?void 0:i,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Mi=Ha.extend({initialize:function(i,c){E(this,c),this._layers={};var h,y;if(i)for(h=0,y=i.length;h<y;h++)this.addLayer(i[h])},addLayer:function(i){var c=this.getLayerId(i);return this._layers[c]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var c=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(i){var c=typeof i=="number"?i:this.getLayerId(i);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var c=Array.prototype.slice.call(arguments,1),h,y;for(h in this._layers)y=this._layers[h],y[i]&&y[i].apply(y,c);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,c){for(var h in this._layers)i.call(c,this._layers[h]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return v(i)}}),Qd=function(i,c){return new Mi(i,c)},is=Mi.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Mi.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Mi.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new F;for(var c in this._layers){var h=this._layers[c];i.extend(h.getBounds?h.getBounds():h.getLatLng())}return i}}),Lc=function(i,c){return new is(i,c)},rs=ue.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){E(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,c){var h=this._getIconUrl(i);if(!h){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(h,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(y,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(i,c){var h=this.options,y=h[c+"Size"];typeof y=="number"&&(y=[y,y]);var N=_e(y),C=_e(c==="shadow"&&h.shadowAnchor||h.iconAnchor||N&&N.divideBy(2,!0));i.className="leaflet-marker-"+c+" "+(h.className||""),C&&(i.style.marginLeft=-C.x+"px",i.style.marginTop=-C.y+"px"),N&&(i.style.width=N.x+"px",i.style.height=N.y+"px")},_createImg:function(i,c){return c=c||document.createElement("img"),c.src=i,c},_getIconUrl:function(i){return Ue.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function br(i){return new rs(i)}var _r=rs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof _r.imagePath!="string"&&(_r.imagePath=this._detectIconPath()),(this.options.imagePath||_r.imagePath)+rs.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var c=function(h,y,N){var C=y.exec(h);return C&&C[N]};return i=c(i,/^url\((['"])?(.+)\1\)$/,2),i&&c(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=jt("div","leaflet-default-icon-path",document.body),c=ei(i,"background-image")||ei(i,"backgroundImage");if(document.body.removeChild(i),c=this._stripUrl(c),c)return c;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Nr=ss.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Ls(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ot(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ln(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var c=this._marker,h=c._map,y=this._marker.options.autoPanSpeed,N=this._marker.options.autoPanPadding,C=yt(c._icon),G=h.getPixelBounds(),le=h.getPixelOrigin(),xe=ae(G.min._subtract(le).add(N),G.max._subtract(le).subtract(N));if(!xe.contains(C)){var Te=_e((Math.max(xe.max.x,C.x)-xe.max.x)/(G.max.x-xe.max.x)-(Math.min(xe.min.x,C.x)-xe.min.x)/(G.min.x-xe.min.x),(Math.max(xe.max.y,C.y)-xe.max.y)/(G.max.y-xe.max.y)-(Math.min(xe.min.y,C.y)-xe.min.y)/(G.min.y-xe.min.y)).multiplyBy(y);h.panBy(Te,{animate:!1}),this._draggable._newPos._add(Te),this._draggable._startPos._add(Te),Re(c._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=te(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(oe(this._panRequest),this._panRequest=te(this._adjustPan.bind(this,i)))},_onDrag:function(i){var c=this._marker,h=c._shadow,y=yt(c._icon),N=c._map.layerPointToLatLng(y);h&&Re(h,y),c._latlng=N,i.latlng=N,i.oldLatLng=this._oldLatLng,c.fire("move",i).fire("drag",i)},_onDragEnd:function(i){oe(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),jr=Ha.extend({options:{icon:new _r,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,c){E(this,c),this._latlng=Ee(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var c=this._latlng;return this._latlng=Ee(i),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=i.icon.createIcon(this._icon),y=!1;h!==this._icon&&(this._icon&&this._removeIcon(),y=!0,i.title&&(h.title=i.title),h.tagName==="IMG"&&(h.alt=i.alt||"")),ot(h,c),i.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(h,"focus",this._panOnFocus,this);var N=i.icon.createShadow(this._shadow),C=!1;N!==this._shadow&&(this._removeShadow(),C=!0),N&&(ot(N,c),N.alt=""),this._shadow=N,i.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),N&&C&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Yt(this._icon,"focus",this._panOnFocus,this),Ut(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ut(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Re(this._icon,i),this._shadow&&Re(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(ot(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Nr)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Nr(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&en(this._icon,i),this._shadow&&en(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var c=this.options.icon.options,h=c.iconSize?_e(c.iconSize):_e(0,0),y=c.iconAnchor?_e(c.iconAnchor):_e(0,0);i.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:h.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Pc(i,c){return new jr(i,c)}var ls=Ha.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return E(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),zi=ls.extend({options:{fill:!0,radius:10},initialize:function(i,c){E(this,c),this._latlng=Ee(i),this._radius=this.options.radius},setLatLng:function(i){var c=this._latlng;return this._latlng=Ee(i),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var c=i&&i.radius||this._radius;return ls.prototype.setStyle.call(this,i),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,c=this._radiusY||i,h=this._clickTolerance(),y=[i+h,c+h];this._pxBounds=new D(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ic(i,c){return new zi(i,c)}var ul=zi.extend({initialize:function(i,c,h){if(typeof c=="number"&&(c=d({},h,{radius:c})),E(this,c),this._latlng=Ee(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new F(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:ls.prototype.setStyle,_project:function(){var i=this._latlng.lng,c=this._latlng.lat,h=this._map,y=h.options.crs;if(y.distance===Qe.distance){var N=Math.PI/180,C=this._mRadius/Qe.R/N,G=h.project([c+C,i]),le=h.project([c-C,i]),xe=G.add(le).divideBy(2),Te=h.unproject(xe).lat,Le=Math.acos((Math.cos(C*N)-Math.sin(c*N)*Math.sin(Te*N))/(Math.cos(c*N)*Math.cos(Te*N)))/N;(isNaN(Le)||Le===0)&&(Le=C/Math.cos(Math.PI/180*c)),this._point=xe.subtract(h.getPixelOrigin()),this._radius=isNaN(Le)?0:xe.x-h.project([Te,i-Le]).x,this._radiusY=xe.y-G.y}else{var Xe=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(Xe).x}this._updateBounds()}});function Bc(i,c,h){return new ul(i,c,h)}var Ss=ls.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,c){E(this,c),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var c=1/0,h=null,y=vr,N,C,G=0,le=this._parts.length;G<le;G++)for(var xe=this._parts[G],Te=1,Le=xe.length;Te<Le;Te++){N=xe[Te-1],C=xe[Te];var Xe=y(i,N,C,!0);Xe<c&&(c=Xe,h=y(i,N,C))}return h&&(h.distance=Math.sqrt(c)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ci(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,c){return c=c||this._defaultShape(),i=Ee(i),c.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new F,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Ea(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var c=[],h=Ea(i),y=0,N=i.length;y<N;y++)h?(c[y]=Ee(i[y]),this._bounds.extend(c[y])):c[y]=this._convertLatLngs(i[y]);return c},_project:function(){var i=new D;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),c=new ie(i,i);this._rawPxBounds&&(this._pxBounds=new D([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(i,c,h){var y=i[0]instanceof de,N=i.length,C,G;if(y){for(G=[],C=0;C<N;C++)G[C]=this._map.latLngToLayerPoint(i[C]),h.extend(G[C]);c.push(G)}else for(C=0;C<N;C++)this._projectLatlngs(i[C],c,h)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,h,y,N,C,G,le,xe;for(h=0,N=0,C=this._rings.length;h<C;h++)for(xe=this._rings[h],y=0,G=xe.length;y<G-1;y++)le=Oc(xe[y],xe[y+1],i,y,!0),le&&(c[N]=c[N]||[],c[N].push(le[0]),(le[1]!==xe[y+1]||y===G-2)&&(c[N].push(le[1]),N++))}},_simplifyPoints:function(){for(var i=this._parts,c=this.options.smoothFactor,h=0,y=i.length;h<y;h++)i[h]=Cc(i[h],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,c){var h,y,N,C,G,le,xe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(h=0,C=this._parts.length;h<C;h++)for(le=this._parts[h],y=0,G=le.length,N=G-1;y<G;N=y++)if(!(!c&&y===0)&&Ac(i,le[N],le[y])<=xe)return!0;return!1}});function Vd(i,c){return new Ss(i,c)}Ss._flat=ll;var Oi=Ss.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Tc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var c=Ss.prototype._convertLatLngs.call(this,i),h=c.length;return h>=2&&c[0]instanceof de&&c[0].equals(c[h-1])&&c.pop(),c},_setLatLngs:function(i){Ss.prototype._setLatLngs.call(this,i),Ea(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ea(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,c=this.options.weight,h=new ie(c,c);if(i=new D(i.min.subtract(h),i.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,N=this._rings.length,C;y<N;y++)C=Ec(this._rings[y],i,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var c=!1,h,y,N,C,G,le,xe,Te;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(C=0,xe=this._parts.length;C<xe;C++)for(h=this._parts[C],G=0,Te=h.length,le=Te-1;G<Te;le=G++)y=h[G],N=h[le],y.y>i.y!=N.y>i.y&&i.x<(N.x-y.x)*(i.y-y.y)/(N.y-y.y)+y.x&&(c=!c);return c||Ss.prototype._containsPoint.call(this,i,!0)}});function Yd(i,c){return new Oi(i,c)}var ws=is.extend({initialize:function(i,c){E(this,c),this._layers={},i&&this.addData(i)},addData:function(i){var c=z(i)?i:i.features,h,y,N;if(c){for(h=0,y=c.length;h<y;h++)N=c[h],(N.geometries||N.geometry||N.features||N.coordinates)&&this.addData(N);return this}var C=this.options;if(C.filter&&!C.filter(i))return this;var G=ea(i,C);return G?(G.feature=hl(i),G.defaultOptions=G.options,this.resetStyle(G),C.onEachFeature&&C.onEachFeature(i,G),this.addLayer(G)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=d({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(c){this._setLayerStyle(c,i)},this)},_setLayerStyle:function(i,c){i.setStyle&&(typeof c=="function"&&(c=c(i.feature)),i.setStyle(c))}});function ea(i,c){var h=i.type==="Feature"?i.geometry:i,y=h?h.coordinates:null,N=[],C=c&&c.pointToLayer,G=c&&c.coordsToLatLng||dl,le,xe,Te,Le;if(!y&&!h)return null;switch(h.type){case"Point":return le=G(y),Ri(C,i,le,c);case"MultiPoint":for(Te=0,Le=y.length;Te<Le;Te++)le=G(y[Te]),N.push(Ri(C,i,le,c));return new is(N);case"LineString":case"MultiLineString":return xe=Sr(y,h.type==="LineString"?0:1,G),new Ss(xe,c);case"Polygon":case"MultiPolygon":return xe=Sr(y,h.type==="Polygon"?1:2,G),new Oi(xe,c);case"GeometryCollection":for(Te=0,Le=h.geometries.length;Te<Le;Te++){var Xe=ea({geometry:h.geometries[Te],type:"Feature",properties:i.properties},c);Xe&&N.push(Xe)}return new is(N);case"FeatureCollection":for(Te=0,Le=h.features.length;Te<Le;Te++){var vt=ea(h.features[Te],c);vt&&N.push(vt)}return new is(N);default:throw new Error("Invalid GeoJSON object.")}}function Ri(i,c,h,y){return i?i(c,h):new jr(h,y&&y.markersInheritOptions&&y)}function dl(i){return new de(i[1],i[0],i[2])}function Sr(i,c,h){for(var y=[],N=0,C=i.length,G;N<C;N++)G=c?Sr(i[N],c-1,h):(h||dl)(i[N]),y.push(G);return y}function ml(i,c){return i=Ee(i),i.alt!==void 0?[k(i.lng,c),k(i.lat,c),k(i.alt,c)]:[k(i.lng,c),k(i.lat,c)]}function wr(i,c,h,y){for(var N=[],C=0,G=i.length;C<G;C++)N.push(c?wr(i[C],Ea(i[C])?0:c-1,h,y):ml(i[C],y));return!c&&h&&N.length>0&&N.push(N[0].slice()),N}function Ps(i,c){return i.feature?d({},i.feature,{geometry:c}):hl(c)}function hl(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Is={toGeoJSON:function(i){return Ps(this,{type:"Point",coordinates:ml(this.getLatLng(),i)})}};jr.include(Is),ul.include(Is),zi.include(Is),Ss.include({toGeoJSON:function(i){var c=!Ea(this._latlngs),h=wr(this._latlngs,c?1:0,!1,i);return Ps(this,{type:(c?"Multi":"")+"LineString",coordinates:h})}}),Oi.include({toGeoJSON:function(i){var c=!Ea(this._latlngs),h=c&&!Ea(this._latlngs[0]),y=wr(this._latlngs,h?2:c?1:0,!0,i);return c||(y=[y]),Ps(this,{type:(h?"Multi":"")+"Polygon",coordinates:y})}}),Mi.include({toMultiPoint:function(i){var c=[];return this.eachLayer(function(h){c.push(h.toGeoJSON(i).geometry.coordinates)}),Ps(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(i){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(i);var h=c==="GeometryCollection",y=[];return this.eachLayer(function(N){if(N.toGeoJSON){var C=N.toGeoJSON(i);if(h)y.push(C.geometry);else{var G=hl(C);G.type==="FeatureCollection"?y.push.apply(y,G.features):y.push(G)}}}),h?Ps(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function fl(i,c){return new ws(i,c)}var kr=fl,Di=Ha.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,c,h){this._url=i,this._bounds=me(c),E(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ot(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ut(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Ln(this._image),this},bringToBack:function(){return this._map&&wa(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=me(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",c=this._image=i?this._url:jt("img");if(ot(c,"leaflet-image-layer"),this._zoomAnimated&&ot(c,"leaflet-zoom-animated"),this.options.className&&ot(c,this.options.className),c.onselectstart=w,c.onmousemove=w,c.onload=f(this.fire,this,"load"),c.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(i){var c=this._map.getZoomScale(i.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;U(this._image,h,c)},_reset:function(){var i=this._image,c=new D(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=c.getSize();Re(i,c.min),i.style.width=h.x+"px",i.style.height=h.y+"px"},_updateOpacity:function(){en(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),Uc=function(i,c,h){return new Di(i,c,h)},Bs=Di.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",c=this._image=i?this._url:jt("video");if(ot(c,"leaflet-image-layer"),this._zoomAnimated&&ot(c,"leaflet-zoom-animated"),this.options.className&&ot(c,this.options.className),c.onselectstart=w,c.onmousemove=w,c.onloadeddata=f(this.fire,this,"load"),i){for(var h=c.getElementsByTagName("source"),y=[],N=0;N<h.length;N++)y.push(h[N].src);this._url=h.length>0?y:[c.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var G=jt("source");G.src=this._url[C],c.appendChild(G)}}});function Li(i,c,h){return new Bs(i,c,h)}var pl=Di.extend({_initImage:function(){var i=this._image=this._url;ot(i,"leaflet-image-layer"),this._zoomAnimated&&ot(i,"leaflet-zoom-animated"),this.options.className&&ot(i,this.options.className),i.onselectstart=w,i.onmousemove=w}});function Fc(i,c,h){return new pl(i,c,h)}var ta=Ha.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,c){i&&(i instanceof de||z(i))?(this._latlng=Ee(i),E(this,c)):(E(this,i),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&en(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&en(this._container,1),this.bringToFront(),this.options.interactive&&(ot(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(en(this._container,0),this._removeTimeout=setTimeout(f(Ut,void 0,this._container),200)):Ut(this._container),this.options.interactive&&(ln(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=Ee(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ln(this._container),this},bringToBack:function(){return this._map&&wa(this._container),this},_prepareOpen:function(i){var c=this._source;if(!c._map)return!1;if(c instanceof is){c=null;var h=this._source._layers;for(var y in h)if(h[y]._map){c=h[y];break}if(!c)return!1;this._source=c}if(!i)if(c.getCenter)i=c.getCenter();else if(c.getLatLng)i=c.getLatLng();else if(c.getBounds)i=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")i.innerHTML=c;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),c=_e(this.options.offset),h=this._getAnchor();this._zoomAnimated?Re(this._container,i.add(h)):c=c.add(i).add(h);var y=this._containerBottom=-c.y,N=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=y+"px",this._container.style.left=N+"px"}},_getAnchor:function(){return[0,0]}});Ct.include({_initOverlay:function(i,c,h,y){var N=c;return N instanceof i||(N=new i(y).setContent(c)),h&&N.setLatLng(h),N}}),Ha.include({_initOverlay:function(i,c,h,y){var N=h;return N instanceof i?(E(N,y),N._source=this):(N=c&&!y?c:new i(y,this),N.setContent(h)),N}});var Er=ta.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,ta.prototype.openOn.call(this,i)},onAdd:function(i){ta.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ls||this._source.on("preclick",Za))},onRemove:function(i){ta.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ls||this._source.off("preclick",Za))},getEvents:function(){var i=ta.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",c=this._container=jt("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=jt("div",i+"-content-wrapper",c);if(this._contentNode=jt("div",i+"-content",h),ai(c),as(this._contentNode),it(c,"contextmenu",Za),this._tipContainer=jt("div",i+"-tip-container",c),this._tip=jt("div",i+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=jt("a",i+"-close-button",c);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',it(y,"click",function(N){Cn(N),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,c=i.style;c.width="",c.whiteSpace="nowrap";var h=i.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),c.width=h+1+"px",c.whiteSpace="",c.height="";var y=i.offsetHeight,N=this.options.maxHeight,C="leaflet-popup-scrolled";N&&y>N?(c.height=N+"px",ot(i,C)):ln(i,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),h=this._getAnchor();Re(this._container,c.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,c=parseInt(ei(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+c,y=this._containerWidth,N=new ie(this._containerLeft,-h-this._containerBottom);N._add(yt(this._container));var C=i.layerPointToContainerPoint(N),G=_e(this.options.autoPanPadding),le=_e(this.options.autoPanPaddingTopLeft||G),xe=_e(this.options.autoPanPaddingBottomRight||G),Te=i.getSize(),Le=0,Xe=0;C.x+y+xe.x>Te.x&&(Le=C.x+y-Te.x+xe.x),C.x-Le-le.x<0&&(Le=C.x-le.x),C.y+h+xe.y>Te.y&&(Xe=C.y+h-Te.y+xe.y),C.y-Xe-le.y<0&&(Xe=C.y-le.y),(Le||Xe)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([Le,Xe]))}},_getAnchor:function(){return _e(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),qc=function(i,c){return new Er(i,c)};Ct.mergeOptions({closePopupOnClick:!0}),Ct.include({openPopup:function(i,c,h){return this._initOverlay(Er,i,c,h).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Ha.include({bindPopup:function(i,c){return this._popup=this._initOverlay(Er,this._popup,i,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof is||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Ds(i);var c=i.layer||i.target;if(this._popup._source===c&&!(c instanceof ls)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=c,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Tr=ta.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){ta.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){ta.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=ta.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",c=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=jt("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var c,h,y=this._map,N=this._container,C=y.latLngToContainerPoint(y.getCenter()),G=y.layerPointToContainerPoint(i),le=this.options.direction,xe=N.offsetWidth,Te=N.offsetHeight,Le=_e(this.options.offset),Xe=this._getAnchor();le==="top"?(c=xe/2,h=Te):le==="bottom"?(c=xe/2,h=0):le==="center"?(c=xe/2,h=Te/2):le==="right"?(c=0,h=Te/2):le==="left"?(c=xe,h=Te/2):G.x<C.x?(le="right",c=0,h=Te/2):(le="left",c=xe+(Le.x+Xe.x)*2,h=Te/2),i=i.subtract(_e(c,h,!0)).add(Le).add(Xe),ln(N,"leaflet-tooltip-right"),ln(N,"leaflet-tooltip-left"),ln(N,"leaflet-tooltip-top"),ln(N,"leaflet-tooltip-bottom"),ot(N,"leaflet-tooltip-"+le),Re(N,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&en(this._container,i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(c)},_getAnchor:function(){return _e(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Jd=function(i,c){return new Tr(i,c)};Ct.include({openTooltip:function(i,c,h){return this._initOverlay(Tr,i,c,h).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Ha.include({bindTooltip:function(i,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Tr,this._tooltip,i,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var c=i?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[c](h),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof is||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&(it(c,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),it(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var c=i.latlng,h,y;this._tooltip.options.sticky&&i.originalEvent&&(h=this._map.mouseEventToContainerPoint(i.originalEvent),y=this._map.containerPointToLayerPoint(h),c=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(c)}});var Zc=rs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var c=i&&i.tagName==="DIV"?i:document.createElement("div"),h=this.options;if(h.html instanceof Element?(ia(c),c.appendChild(h.html)):c.innerHTML=h.html!==!1?h.html:"",h.bgPos){var y=_e(h.bgPos);c.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function Xd(i){return new Zc(i)}rs.Default=_r;var Pi=Ha.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){E(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Ut(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ln(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(wa(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof ie?i:new ie(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var c=this.getPane().children,h=-i(-1/0,1/0),y=0,N=c.length,C;y<N;y++)C=c[y].style.zIndex,c[y]!==this._container&&C&&(h=i(h,+C));isFinite(h)&&(this.options.zIndex=h+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ue.ielt9){en(this._container,this.options.opacity);var i=+new Date,c=!1,h=!1;for(var y in this._tiles){var N=this._tiles[y];if(!(!N.current||!N.loaded)){var C=Math.min(1,(i-N.loaded)/200);en(N.el,C),C<1?c=!0:(N.active?h=!0:this._onOpaqueTile(N),N.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),c&&(oe(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=jt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,c=this.options.maxZoom;if(i!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===i?(this._levels[h].el.style.zIndex=c-Math.abs(i-h),this._onUpdateLevel(h)):(Ut(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var y=this._levels[i],N=this._map;return y||(y=this._levels[i]={},y.el=jt("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=c,y.origin=N.project(N.unproject(N.getPixelOrigin()),i).round(),y.zoom=i,this._setZoomTransform(y,N.getCenter(),N.getZoom()),w(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var i,c,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)c=this._tiles[i],c.retain=c.current;for(i in this._tiles)if(c=this._tiles[i],c.current&&!c.active){var y=c.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var c in this._tiles)this._tiles[c].coords.z===i&&this._removeTile(c)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Ut(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,c,h,y){var N=Math.floor(i/2),C=Math.floor(c/2),G=h-1,le=new ie(+N,+C);le.z=+G;var xe=this._tileCoordsToKey(le),Te=this._tiles[xe];return Te&&Te.active?(Te.retain=!0,!0):(Te&&Te.loaded&&(Te.retain=!0),G>y?this._retainParent(N,C,G,y):!1)},_retainChildren:function(i,c,h,y){for(var N=2*i;N<2*i+2;N++)for(var C=2*c;C<2*c+2;C++){var G=new ie(N,C);G.z=h+1;var le=this._tileCoordsToKey(G),xe=this._tiles[le];if(xe&&xe.active){xe.retain=!0;continue}else xe&&xe.loaded&&(xe.retain=!0);h+1<y&&this._retainChildren(N,C,h+1,y)}},_resetView:function(i){var c=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var c=this.options;return c.minNativeZoom!==void 0&&i<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<i?c.maxNativeZoom:i},_setView:function(i,c,h,y){var N=Math.round(c);this.options.maxZoom!==void 0&&N>this.options.maxZoom||this.options.minZoom!==void 0&&N<this.options.minZoom?N=void 0:N=this._clampZoom(N);var C=this.options.updateWhenZooming&&N!==this._tileZoom;(!y||C)&&(this._tileZoom=N,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),N!==void 0&&this._update(i),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(i,c)},_setZoomTransforms:function(i,c){for(var h in this._levels)this._setZoomTransform(this._levels[h],i,c)},_setZoomTransform:function(i,c,h){var y=this._map.getZoomScale(h,i.zoom),N=i.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(c,h)).round();Ue.any3d?U(i.el,N,y):Re(i.el,N)},_resetGrid:function(){var i=this._map,c=i.options.crs,h=this._tileSize=this.getTileSize(),y=this._tileZoom,N=this._map.getPixelWorldBounds(this._tileZoom);N&&(this._globalTileRange=this._pxBoundsToTileRange(N)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,c.wrapLng[0]],y).x/h.x),Math.ceil(i.project([0,c.wrapLng[1]],y).x/h.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([c.wrapLat[0],0],y).y/h.x),Math.ceil(i.project([c.wrapLat[1],0],y).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var c=this._map,h=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),y=c.getZoomScale(h,this._tileZoom),N=c.project(i,this._tileZoom).floor(),C=c.getSize().divideBy(y*2);return new D(N.subtract(C),N.add(C))},_update:function(i){var c=this._map;if(c){var h=this._clampZoom(c.getZoom());if(i===void 0&&(i=c.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(i),N=this._pxBoundsToTileRange(y),C=N.getCenter(),G=[],le=this.options.keepBuffer,xe=new D(N.getBottomLeft().subtract([le,-le]),N.getTopRight().add([le,-le]));if(!(isFinite(N.min.x)&&isFinite(N.min.y)&&isFinite(N.max.x)&&isFinite(N.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Te in this._tiles){var Le=this._tiles[Te].coords;(Le.z!==this._tileZoom||!xe.contains(new ie(Le.x,Le.y)))&&(this._tiles[Te].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(i,h);return}for(var Xe=N.min.y;Xe<=N.max.y;Xe++)for(var vt=N.min.x;vt<=N.max.x;vt++){var Vn=new ie(vt,Xe);if(Vn.z=this._tileZoom,!!this._isValidTile(Vn)){var An=this._tiles[this._tileCoordsToKey(Vn)];An?An.current=!0:G.push(Vn)}}if(G.sort(function(Ft,qt){return Ft.distanceTo(C)-qt.distanceTo(C)}),G.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ba=document.createDocumentFragment();for(vt=0;vt<G.length;vt++)this._addTile(G[vt],ba);this._level.el.appendChild(ba)}}}},_isValidTile:function(i){var c=this._map.options.crs;if(!c.infinite){var h=this._globalTileRange;if(!c.wrapLng&&(i.x<h.min.x||i.x>h.max.x)||!c.wrapLat&&(i.y<h.min.y||i.y>h.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(i);return me(this.options.bounds).overlaps(y)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var c=this._map,h=this.getTileSize(),y=i.scaleBy(h),N=y.add(h),C=c.unproject(y,i.z),G=c.unproject(N,i.z);return[C,G]},_tileCoordsToBounds:function(i){var c=this._tileCoordsToNwSe(i),h=new F(c[0],c[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var c=i.split(":"),h=new ie(+c[0],+c[1]);return h.z=+c[2],h},_removeTile:function(i){var c=this._tiles[i];c&&(Ut(c.el),delete this._tiles[i],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){ot(i,"leaflet-tile");var c=this.getTileSize();i.style.width=c.x+"px",i.style.height=c.y+"px",i.onselectstart=w,i.onmousemove=w,Ue.ielt9&&this.options.opacity<1&&en(i,this.options.opacity)},_addTile:function(i,c){var h=this._getTilePos(i),y=this._tileCoordsToKey(i),N=this.createTile(this._wrapCoords(i),f(this._tileReady,this,i));this._initTile(N),this.createTile.length<2&&te(f(this._tileReady,this,i,null,N)),Re(N,h),this._tiles[y]={el:N,coords:i,current:!0},c.appendChild(N),this.fire("tileloadstart",{tile:N,coords:i})},_tileReady:function(i,c,h){c&&this.fire("tileerror",{error:c,tile:h,coords:i});var y=this._tileCoordsToKey(i);h=this._tiles[y],h&&(h.loaded=+new Date,this._map._fadeAnimated?(en(h.el,0),oe(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),c||(ot(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ue.ielt9||!this._map._fadeAnimated?te(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var c=new ie(this._wrapX?S(i.x,this._wrapX):i.x,this._wrapY?S(i.y,this._wrapY):i.y);return c.z=i.z,c},_pxBoundsToTileRange:function(i){var c=this.getTileSize();return new D(i.min.unscaleBy(c).floor(),i.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Hc(i){return new Pi(i)}var Us=Pi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,c){this._url=i,c=E(this,c),c.detectRetina&&Ue.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,c){return this._url===i&&c===void 0&&(c=!0),this._url=i,c||this.redraw(),this},createTile:function(i,c){var h=document.createElement("img");return it(h,"load",f(this._tileOnLoad,this,c,h)),it(h,"error",f(this._tileOnError,this,c,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(i),h},getTileUrl:function(i){var c={r:Ue.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-i.y;this.options.tms&&(c.y=h),c["-y"]=h}return A(this._url,d(c,this.options))},_tileOnLoad:function(i,c){Ue.ielt9?setTimeout(f(i,this,null,c),0):i(null,c)},_tileOnError:function(i,c,h){var y=this.options.errorTileUrl;y&&c.getAttribute("src")!==y&&(c.src=y),i(h,c)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,c=this.options.maxZoom,h=this.options.zoomReverse,y=this.options.zoomOffset;return h&&(i=c-i),i+y},_getSubdomain:function(i){var c=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var i,c;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(c=this._tiles[i].el,c.onload=w,c.onerror=w,!c.complete)){c.src=I;var h=this._tiles[i].coords;Ut(c),delete this._tiles[i],this.fire("tileabort",{tile:c,coords:h})}},_removeTile:function(i){var c=this._tiles[i];if(c)return c.el.setAttribute("src",I),Pi.prototype._removeTile.call(this,i)},_tileReady:function(i,c,h){if(!(!this._map||h&&h.getAttribute("src")===I))return Pi.prototype._tileReady.call(this,i,c,h)}});function Ta(i,c){return new Us(i,c)}var Cr=Us.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,c){this._url=i;var h=d({},this.defaultWmsParams);for(var y in c)y in this.options||(h[y]=c[y]);c=E(this,c);var N=c.detectRetina&&Ue.retina?2:1,C=this.getTileSize();h.width=C.x*N,h.height=C.y*N,this.wmsParams=h},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Us.prototype.onAdd.call(this,i)},getTileUrl:function(i){var c=this._tileCoordsToNwSe(i),h=this._crs,y=ae(h.project(c[0]),h.project(c[1])),N=y.min,C=y.max,G=(this._wmsVersion>=1.3&&this._crs===ho?[N.y,N.x,C.y,C.x]:[N.x,N.y,C.x,C.y]).join(","),le=Us.prototype.getTileUrl.call(this,i);return le+R(this.wmsParams,le,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+G},setParams:function(i,c){return d(this.wmsParams,i),c||this.redraw(),this}});function Ca(i,c){return new Cr(i,c)}Us.WMS=Cr,Ta.wms=Ca;var fa=Ha.extend({options:{padding:.1},initialize:function(i){E(this,i),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ot(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,c){var h=this._map.getZoomScale(c,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),N=this._map.project(this._center,c),C=y.multiplyBy(-h).add(N).subtract(this._map._getNewPixelOrigin(i,c));Ue.any3d?U(this._container,C,h):Re(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,c=this._map.getSize(),h=this._map.containerPointToLayerPoint(c.multiplyBy(-i)).round();this._bounds=new D(h,h.add(c.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),xl=fa.extend({options:{tolerance:0},getEvents:function(){var i=fa.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){fa.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");it(i,"mousemove",this._onMouseMove,this),it(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),it(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){oe(this._redrawRequest),delete this._ctx,Ut(this._container),Yt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var c in this._layers)i=this._layers[c],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fa.prototype._update.call(this);var i=this._bounds,c=this._container,h=i.getSize(),y=Ue.retina?2:1;Re(c,i.min),c.width=y*h.x,c.height=y*h.y,c.style.width=h.x+"px",c.style.height=h.y+"px",Ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){fa.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[v(i)]=i;var c=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var c=i._order,h=c.next,y=c.prev;h?h.prev=y:this._drawLast=y,y?y.next=h:this._drawFirst=h,delete i._order,delete this._layers[v(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var c=i.options.dashArray.split(/[, ]+/),h=[],y,N;for(N=0;N<c.length;N++){if(y=Number(c[N]),isNaN(y))return;h.push(y)}i.options._dashArray=h}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||te(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var c=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new D,this._redrawBounds.extend(i._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(i._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var c=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,c=this._redrawBounds;if(this._ctx.save(),c){var h=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)i=y.layer,(!c||i._pxBounds&&i._pxBounds.intersects(c))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,c){if(this._drawing){var h,y,N,C,G=i._parts,le=G.length,xe=this._ctx;if(le){for(xe.beginPath(),h=0;h<le;h++){for(y=0,N=G[h].length;y<N;y++)C=G[h][y],xe[y?"lineTo":"moveTo"](C.x,C.y);c&&xe.closePath()}this._fillStroke(xe,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var c=i._point,h=this._ctx,y=Math.max(Math.round(i._radius),1),N=(Math.max(Math.round(i._radiusY),1)||y)/y;N!==1&&(h.save(),h.scale(1,N)),h.beginPath(),h.arc(c.x,c.y/N,y,0,Math.PI*2,!1),N!==1&&h.restore(),this._fillStroke(h,i)}},_fillStroke:function(i,c){var h=c.options;h.fill&&(i.globalAlpha=h.fillOpacity,i.fillStyle=h.fillColor||h.color,i.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(i.setLineDash&&i.setLineDash(c.options&&c.options._dashArray||[]),i.globalAlpha=h.opacity,i.lineWidth=h.weight,i.strokeStyle=h.color,i.lineCap=h.lineCap,i.lineJoin=h.lineJoin,i.stroke())},_onClick:function(i){for(var c=this._map.mouseEventToLayerPoint(i),h,y,N=this._drawFirst;N;N=N.next)h=N.layer,h.options.interactive&&h._containsPoint(c)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(h))&&(y=h);this._fireEvent(y?[y]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,c)}},_handleMouseOut:function(i){var c=this._hoveredLayer;c&&(ln(this._container,"leaflet-interactive"),this._fireEvent([c],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,c){if(!this._mouseHoverThrottled){for(var h,y,N=this._drawFirst;N;N=N.next)h=N.layer,h.options.interactive&&h._containsPoint(c)&&(y=h);y!==this._hoveredLayer&&(this._handleMouseOut(i),y&&(ot(this._container,"leaflet-interactive"),this._fireEvent([y],i,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,c,h){this._map._fireDOMEvent(c,h||c.type,i)},_bringToFront:function(i){var c=i._order;if(c){var h=c.next,y=c.prev;if(h)h.prev=y;else return;y?y.next=h:h&&(this._drawFirst=h),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(i)}},_bringToBack:function(i){var c=i._order;if(c){var h=c.next,y=c.prev;if(y)y.next=h;else return;h?h.prev=y:y&&(this._drawLast=y),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(i)}}});function Ar(i){return Ue.canvas?new xl(i):null}var Fs=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),fo={_initContainer:function(){this._container=jt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(fa.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var c=i._container=Fs("shape");ot(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",i._path=Fs("path"),c.appendChild(i._path),this._updateStyle(i),this._layers[v(i)]=i},_addPath:function(i){var c=i._container;this._container.appendChild(c),i.options.interactive&&i.addInteractiveTarget(c)},_removePath:function(i){var c=i._container;Ut(c),i.removeInteractiveTarget(c),delete this._layers[v(i)]},_updateStyle:function(i){var c=i._stroke,h=i._fill,y=i.options,N=i._container;N.stroked=!!y.stroke,N.filled=!!y.fill,y.stroke?(c||(c=i._stroke=Fs("stroke")),N.appendChild(c),c.weight=y.weight+"px",c.color=y.color,c.opacity=y.opacity,y.dashArray?c.dashStyle=z(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=y.lineCap.replace("butt","flat"),c.joinstyle=y.lineJoin):c&&(N.removeChild(c),i._stroke=null),y.fill?(h||(h=i._fill=Fs("fill")),N.appendChild(h),h.color=y.fillColor||y.color,h.opacity=y.fillOpacity):h&&(N.removeChild(h),i._fill=null)},_updateCircle:function(i){var c=i._point.round(),h=Math.round(i._radius),y=Math.round(i._radiusY||h);this._setPath(i,i._empty()?"M0 0":"AL "+c.x+","+c.y+" "+h+","+y+" 0,"+65535*360)},_setPath:function(i,c){i._path.v=c},_bringToFront:function(i){Ln(i._container)},_bringToBack:function(i){wa(i._container)}},os=Ue.vml?Fs:at,Ii=fa.extend({_initContainer:function(){this._container=os("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=os("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ut(this._container),Yt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fa.prototype._update.call(this);var i=this._bounds,c=i.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,h.setAttribute("width",c.x),h.setAttribute("height",c.y)),Re(h,i.min),h.setAttribute("viewBox",[i.min.x,i.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(i){var c=i._path=os("path");i.options.className&&ot(c,i.options.className),i.options.interactive&&ot(c,"leaflet-interactive"),this._updateStyle(i),this._layers[v(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Ut(i._path),i.removeInteractiveTarget(i._path),delete this._layers[v(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var c=i._path,h=i.options;c&&(h.stroke?(c.setAttribute("stroke",h.color),c.setAttribute("stroke-opacity",h.opacity),c.setAttribute("stroke-width",h.weight),c.setAttribute("stroke-linecap",h.lineCap),c.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?c.setAttribute("stroke-dasharray",h.dashArray):c.removeAttribute("stroke-dasharray"),h.dashOffset?c.setAttribute("stroke-dashoffset",h.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),h.fill?(c.setAttribute("fill",h.fillColor||h.color),c.setAttribute("fill-opacity",h.fillOpacity),c.setAttribute("fill-rule",h.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(i,c){this._setPath(i,pt(i._parts,c))},_updateCircle:function(i){var c=i._point,h=Math.max(Math.round(i._radius),1),y=Math.max(Math.round(i._radiusY),1)||h,N="a"+h+","+y+" 0 1,0 ",C=i._empty()?"M0 0":"M"+(c.x-h)+","+c.y+N+h*2+",0 "+N+-h*2+",0 ";this._setPath(i,C)},_setPath:function(i,c){i._path.setAttribute("d",c)},_bringToFront:function(i){Ln(i._path)},_bringToBack:function(i){wa(i._path)}});Ue.vml&&Ii.include(fo);function Mr(i){return Ue.svg||Ue.vml?new Ii(i):null}Ct.include({getRenderer:function(i){var c=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var c=this._paneRenderers[i];return c===void 0&&(c=this._createRenderer({pane:i}),this._paneRenderers[i]=c),c},_createRenderer:function(i){return this.options.preferCanvas&&Ar(i)||Mr(i)}});var ii=Oi.extend({initialize:function(i,c){Oi.prototype.initialize.call(this,this._boundsToLatLngs(i),c)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=me(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Wd(i,c){return new ii(i,c)}Ii.create=os,Ii.pointsToPath=pt,ws.geometryToLayer=ea,ws.coordsToLatLng=dl,ws.coordsToLatLngs=Sr,ws.latLngToCoords=ml,ws.latLngsToCoords=wr,ws.getFeature=Ps,ws.asFeature=hl,Ct.mergeOptions({boxZoom:!0});var pa=ss.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Yt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ut(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ra(),nl(),this._startPoint=this._map.mouseEventToContainerPoint(i),it(document,{contextmenu:Ds,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=jt("div","leaflet-zoom-box",this._container),ot(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var c=new D(this._point,this._startPoint),h=c.getSize();Re(this._box,c.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(Ut(this._box),ln(this._container,"leaflet-crosshair")),la(),hr(),Yt(document,{contextmenu:Ds,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var c=new F(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ct.addInitHook("addHandler","boxZoom",pa),Ct.mergeOptions({doubleClickZoom:!0});var gl=ss.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var c=this._map,h=c.getZoom(),y=c.options.zoomDelta,N=i.originalEvent.shiftKey?h-y:h+y;c.options.doubleClickZoom==="center"?c.setZoom(N):c.setZoomAround(i.containerPoint,N)}});Ct.addInitHook("addHandler","doubleClickZoom",gl),Ct.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var cs=ss.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Ls(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}ot(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ln(this._map._container,"leaflet-grab"),ln(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=me(this._map.options.maxBounds);this._offsetLimit=ae(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var c=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(c),this._prunePositions(c)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,c){return i-(i-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;i.x<c.min.x&&(i.x=this._viscousLimit(i.x,c.min.x)),i.y<c.min.y&&(i.y=this._viscousLimit(i.y,c.min.y)),i.x>c.max.x&&(i.x=this._viscousLimit(i.x,c.max.x)),i.y>c.max.y&&(i.y=this._viscousLimit(i.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,c=Math.round(i/2),h=this._initialWorldOffset,y=this._draggable._newPos.x,N=(y-c+h)%i+c-h,C=(y+c+h)%i-c-h,G=Math.abs(N+h)<Math.abs(C+h)?N:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=G},_onDragEnd:function(i){var c=this._map,h=c.options,y=!h.inertia||i.noInertia||this._times.length<2;if(c.fire("dragend",i),y)c.fire("moveend");else{this._prunePositions(+new Date);var N=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,G=h.easeLinearity,le=N.multiplyBy(G/C),xe=le.distanceTo([0,0]),Te=Math.min(h.inertiaMaxSpeed,xe),Le=le.multiplyBy(Te/xe),Xe=Te/(h.inertiaDeceleration*G),vt=Le.multiplyBy(-Xe/2).round();!vt.x&&!vt.y?c.fire("moveend"):(vt=c._limitOffset(vt,c.options.maxBounds),te(function(){c.panBy(vt,{duration:Xe,easeLinearity:G,noMoveStart:!0,animate:!0})}))}}});Ct.addInitHook("addHandler","dragging",cs),Ct.mergeOptions({keyboard:!0,keyboardPanDelta:80});var po=ss.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),it(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Yt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,c=document.documentElement,h=i.scrollTop||c.scrollTop,y=i.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(y,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var c=this._panKeys={},h=this.keyCodes,y,N;for(y=0,N=h.left.length;y<N;y++)c[h.left[y]]=[-1*i,0];for(y=0,N=h.right.length;y<N;y++)c[h.right[y]]=[i,0];for(y=0,N=h.down.length;y<N;y++)c[h.down[y]]=[0,i];for(y=0,N=h.up.length;y<N;y++)c[h.up[y]]=[0,-1*i]},_setZoomDelta:function(i){var c=this._zoomKeys={},h=this.keyCodes,y,N;for(y=0,N=h.zoomIn.length;y<N;y++)c[h.zoomIn[y]]=i;for(y=0,N=h.zoomOut.length;y<N;y++)c[h.zoomOut[y]]=-i},_addHooks:function(){it(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Yt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var c=i.keyCode,h=this._map,y;if(c in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(y=this._panKeys[c],i.shiftKey&&(y=_e(y).multiplyBy(3)),h.options.maxBounds&&(y=h._limitOffset(_e(y),h.options.maxBounds)),h.options.worldCopyJump){var N=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(y)));h.panTo(N)}else h.panBy(y)}else if(c in this._zoomKeys)h.setZoom(h.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;Ds(i)}}});Ct.addInitHook("addHandler","keyboard",po),Ct.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var zr=ss.extend({addHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Yt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var c=oa(i),h=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var y=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),y),Ds(i)},_performZoom:function(){var i=this._map,c=i.getZoom(),h=this._map.options.zoomSnap||0;i._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),N=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,C=h?Math.ceil(N/h)*h:N,G=i._limitZoom(c+(this._delta>0?C:-C))-c;this._delta=0,this._startTime=null,G&&(i.options.scrollWheelZoom==="center"?i.setZoom(c+G):i.setZoomAround(this._lastMousePos,c+G))}});Ct.addInitHook("addHandler","scrollWheelZoom",zr);var ri=600;Ct.mergeOptions({tapHold:Ue.touchNative&&Ue.safari&&Ue.mobile,tapTolerance:15});var yl=ss.extend({addHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Yt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var c=i.touches[0];this._startPos=this._newPos=new ie(c.clientX,c.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(it(document,"touchend",Cn),it(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),ri),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Yt(document,"touchend",Cn),Yt(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Yt(document,"touchend touchcancel contextmenu",this._cancel,this),Yt(document,"touchmove",this._onMove,this)},_onMove:function(i){var c=i.touches[0];this._newPos=new ie(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,c){var h=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});h._simulated=!0,c.target.dispatchEvent(h)}});Ct.addInitHook("addHandler","tapHold",yl),Ct.mergeOptions({touchZoom:Ue.touch,bounceAtZoomLimits:!0});var xo=ss.extend({addHooks:function(){ot(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ln(this._map._container,"leaflet-touch-zoom"),Yt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var c=this._map;if(!(!i.touches||i.touches.length!==2||c._animatingZoom||this._zooming)){var h=c.mouseEventToContainerPoint(i.touches[0]),y=c.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(h.add(y)._divideBy(2))),this._startDist=h.distanceTo(y),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),Cn(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var c=this._map,h=c.mouseEventToContainerPoint(i.touches[0]),y=c.mouseEventToContainerPoint(i.touches[1]),N=h.distanceTo(y)/this._startDist;if(this._zoom=c.getScaleZoom(N,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&N<1||this._zoom>c.getMaxZoom()&&N>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,N===1)return}else{var C=h._add(y)._divideBy(2)._subtract(this._centerPoint);if(N===1&&C.x===0&&C.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),oe(this._animRequest);var G=f(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=te(G,this,!0),Cn(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,oe(this._animRequest),Yt(document,"touchmove",this._onTouchMove,this),Yt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ct.addInitHook("addHandler","touchZoom",xo),Ct.BoxZoom=pa,Ct.DoubleClickZoom=gl,Ct.Drag=cs,Ct.Keyboard=po,Ct.ScrollWheelZoom=zr,Ct.TapHold=yl,Ct.TouchZoom=xo,l.Bounds=D,l.Browser=Ue,l.CRS=Oe,l.Canvas=xl,l.Circle=ul,l.CircleMarker=zi,l.Class=ue,l.Control=va,l.DivIcon=Zc,l.DivOverlay=ta,l.DomEvent=il,l.DomUtil=Ei,l.Draggable=Ls,l.Evented=$,l.FeatureGroup=is,l.GeoJSON=ws,l.GridLayer=Pi,l.Handler=ss,l.Icon=rs,l.ImageOverlay=Di,l.LatLng=de,l.LatLngBounds=F,l.Layer=Ha,l.LayerGroup=Mi,l.LineUtil=$d,l.Map=Ct,l.Marker=jr,l.Mixin=Zd,l.Path=ls,l.Point=ie,l.PolyUtil=uo,l.Polygon=Oi,l.Polyline=Ss,l.Popup=Er,l.PosAnimation=Ti,l.Projection=Rc,l.Rectangle=ii,l.Renderer=fa,l.SVG=Ii,l.SVGOverlay=pl,l.TileLayer=Us,l.Tooltip=Tr,l.Transformation=Ye,l.Util=je,l.VideoOverlay=Bs,l.bind=f,l.bounds=ae,l.canvas=Ar,l.circle=Bc,l.circleMarker=Ic,l.control=js,l.divIcon=Xd,l.extend=d,l.featureGroup=Lc,l.geoJSON=fl,l.geoJson=kr,l.gridLayer=Hc,l.icon=br,l.imageOverlay=Uc,l.latLng=Ee,l.latLngBounds=me,l.layerGroup=Qd,l.map=so,l.marker=Pc,l.point=_e,l.polygon=Yd,l.polyline=Vd,l.popup=qc,l.rectangle=Wd,l.setOptions=E,l.stamp=v,l.svg=Mr,l.svgOverlay=Fc,l.tileLayer=Ta,l.tooltip=Jd,l.transformation=Ot,l.version=o,l.videoOverlay=Li;var go=window.L;l.noConflict=function(){return window.L=go,this},window.L=l}))})(sc,sc.exports)),sc.exports}var ez=WM();const ga=Ed(ez);function tz(e){return e==="first"?{radius:10,color:"#7c3aed",fillColor:"#7c3aed",fillOpacity:.85,weight:2}:e==="recent"?{radius:7,color:"#1d4ed8",fillColor:"#bfdbfe",fillOpacity:.9,weight:2}:e==="checkin"?{radius:8,color:"#15803d",fillColor:"#15803d",fillOpacity:.85,weight:2}:e==="checkout"?{radius:11,color:"#be123c",fillColor:"#ffffff",fillOpacity:0,weight:3}:{radius:9,color:"#0f6a8c",fillColor:"#0f6a8c",fillOpacity:.9,weight:2}}function nz({markers:e,focusedMarkerId:s=null}){const l=b.useRef(null),o=b.useRef(null),d=b.useRef(null),m=b.useRef(new Map);return b.useEffect(()=>{if(!l.current||o.current)return;const f=e[0]?.lat??41.015137,g=e[0]?.lon??28.97953,v=ga.map(l.current,{center:[f,g],zoom:14,zoomControl:!0});return o.current=v,ga.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap katki saglayanlar"}).addTo(v),d.current=ga.layerGroup().addTo(v),()=>{o.current&&(o.current.remove(),o.current=null),d.current=null}},[e]),b.useEffect(()=>{if(!o.current||!d.current)return;const f=o.current,g=d.current;if(g.clearLayers(),m.current.clear(),!e.length)return;const v=[],_=new Map;for(const w of e){const k=`${w.lat.toFixed(6)}:${w.lon.toFixed(6)}`;_.set(k,(_.get(k)??0)+1)}const S=new Map;for(const w of e){const k=`${w.lat.toFixed(6)}:${w.lon.toFixed(6)}`,O=_.get(k)??1,T=S.get(k)??0;S.set(k,T+1);let E=w.lat,R=w.lon;if(O>1){const z=2*Math.PI*T/O,Z=12e-5;E=w.lat+Math.sin(z)*Z,R=w.lon+Math.cos(z)*Z}const B=tz(w.kind),A=ga.circleMarker([E,R],B).bindPopup(`${w.label}<br/>${w.lat.toFixed(6)}, ${w.lon.toFixed(6)}`).addTo(g);m.current.set(w.id,A),v.push([E,R])}if(v.length===1){f.setView(v[0],16,{animate:!0});return}f.fitBounds(ga.latLngBounds(v),{padding:[24,24],maxZoom:17,animate:!0})},[e]),b.useEffect(()=>{if(!s||!o.current)return;const f=m.current.get(s);if(!f)return;const g=f.getLatLng();o.current.setView(g,Math.max(o.current.getZoom(),16),{animate:!0}),f.openPopup()},[s,e]),n.jsx("div",{ref:l,className:"h-72 w-full rounded-lg border border-slate-300 bg-slate-100","aria-label":"Calisan konum haritasi"})}const az=Xa({home_lat:Kn().min(-90),home_lon:Kn().min(-180),radius_m:Kn().int().positive().max(2e3)}),sz=Xa({expires_in_minutes:Kn().int().positive().max(1440)});function La(e){if(!e)return"-";const s=new Date(e);return Number.isNaN(s.getTime())?e:s.toLocaleString("tr-TR",{timeZone:"Europe/Istanbul"})}function iz(e){return e==="OK"?"Tamam":e==="INCOMPLETE"?"Eksik":e==="LEAVE"?"Izinli":"Tatilde"}function rz(e){const s=new Date(`${e}T00:00:00`);return Number.isNaN(s.getTime())?"-":new Intl.DateTimeFormat("tr-TR",{timeZone:"Europe/Istanbul",weekday:"short"}).format(s)}function lz(e){return e.status==="INCOMPLETE"?"bg-rose-50/70":e.flags.length>0?"bg-amber-50/45":e.status==="LEAVE"||e.status==="OFF"?"bg-slate-50/70":""}function Wu(e,s){return e===null||s===null?"-":`${e.toFixed(6)}, ${s.toFixed(6)}`}function oz(e){return e.length?e.map(s=>`${Ya(s).label} (${s})`).join(", "):"-"}const cz=new Intl.DateTimeFormat("en-CA",{timeZone:"Europe/Istanbul",year:"numeric",month:"2-digit",day:"2-digit"});function ir(e){if(!e)return null;const s=new Date(e);return Number.isNaN(s.getTime())?null:cz.format(s)}function uz(e){return e.in_lat!==null&&e.in_lon!==null||e.out_lat!==null&&e.out_lon!==null}function _f(e){return`recent-${e.ts_utc}-${e.device_id}-${e.event_type}-${e.lat.toFixed(6)}-${e.lon.toFixed(6)}`}const dz=[10,20,35,50];function mz(){const e=qS(),s=Jl(),l=Xn(),{pushToast:o}=aa(),d=new Date,m=Number(e.id),f=Number.isFinite(m)&&sessionStorage.getItem("employee-detail-origin")==="employees"&&sessionStorage.getItem("employee-detail-id")===String(m),[g,v]=b.useState("41.0"),[_,S]=b.useState("29.0"),[w,k]=b.useState("120"),[O,T]=b.useState(null),[E,R]=b.useState(""),[B,A]=b.useState(""),[z,Z]=b.useState(""),[I,V]=b.useState(String(d.getFullYear())),[H,ee]=b.useState(String(d.getMonth()+1)),[X,P]=b.useState(null),[te,oe]=b.useState(null),[je,ue]=b.useState(""),[ce,Q]=b.useState("all"),[$,ie]=b.useState("all"),[Ae,_e]=b.useState("all"),[D,ae]=b.useState(""),[F,me]=b.useState(""),[de,Ee]=b.useState(1),[Oe,Qe]=b.useState(20),[pe,Ve]=b.useState({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),[Ye,Ot]=b.useState(!1),[ft,ze]=b.useState("30"),[at,pt]=b.useState(null),[Rt,It]=b.useState(null),[Qt,ne]=b.useState(null),Se=Fe({queryKey:["employee-detail",m],queryFn:()=>vA(m),enabled:Number.isFinite(m)}),Pe=Se.data?.employee,Tt=Fe({queryKey:["departments","employee-detail-edit"],queryFn:()=>ji(),enabled:Number.isFinite(m)}),se=Fe({queryKey:["department-shifts",Pe?.department_id],queryFn:()=>_c(Pe?.department_id?{department_id:Pe.department_id,active_only:!1}:void 0),enabled:!!Pe?.department_id}),He=Number(I),_t=Number(H),pn=Number.isFinite(He)&&Number.isFinite(_t)&&_t>=1&&_t<=12,Lt=Fe({queryKey:["employee-monthly",m,He,_t],queryFn:()=>uc({employee_id:m,year:He,month:_t}),enabled:Number.isFinite(m)&&pn}),rt=Fe({queryKey:["employee-monthly-current",m,d.getFullYear(),d.getMonth()+1],queryFn:()=>uc({employee_id:m,year:d.getFullYear(),month:d.getMonth()+1}),enabled:Number.isFinite(m)}),Gn=Ge({mutationFn:K=>jA(m,K),onSuccess:()=>{T(null),o({variant:"success",title:"Ev konumu guncellendi",description:`Calisan #${m} icin konum kaydedildi.`}),l.invalidateQueries({queryKey:["employee-detail",m]})},onError:K=>{const De=Be(K,"Konum kaydedilemedi.").message;T(De),o({variant:"error",title:"Konum kaydedilemedi",description:De})}}),be=Ge({mutationFn:K=>v_(m,{is_active:K}),onSuccess:K=>{o({variant:"success",title:K.is_active?"Calisan aktife alindi":"Calisan arsive alindi",description:`${K.full_name} icin durum guncellendi.`}),l.invalidateQueries({queryKey:["employees"]}),l.invalidateQueries({queryKey:["employee-detail",m]})},onError:K=>{o({variant:"error",title:"Durum guncellenemedi",description:Be(K,"Islem basarisiz.").message})}}),et=Ge({mutationFn:K=>bA(m,K),onSuccess:K=>{o({variant:"success",title:"Calisan bilgileri guncellendi",description:`${K.full_name} icin profil bilgileri kaydedildi.`}),l.invalidateQueries({queryKey:["employees"]}),l.invalidateQueries({queryKey:["employee-detail",m]}),l.invalidateQueries({queryKey:["employee-monthly"]}),l.invalidateQueries({queryKey:["department-shifts",K.department_id]})},onError:K=>{o({variant:"error",title:"Calisan bilgileri guncellenemedi",description:Be(K,"Islem basarisiz.").message})}}),lt=Ge({mutationFn:K=>_A(m,{shift_id:K}),onSuccess:K=>{o({variant:"success",title:"Vardiya atamasi guncellendi",description:`${K.full_name} icin vardiya kaydedildi.`}),l.invalidateQueries({queryKey:["employees"]}),l.invalidateQueries({queryKey:["employee-detail",m]}),l.invalidateQueries({queryKey:["employee-monthly"]})},onError:K=>{o({variant:"error",title:"Vardiya atamasi basarisiz",description:Be(K,"Islem basarisiz.").message})}}),Nt=Ge({mutationFn:k_,onSuccess:K=>{pt(null),It(K.token),ne(K.invite_url),o({variant:"success",title:"Cihaz daveti olusturuldu",description:`Calisan #${m} icin davet hazir.`}),l.invalidateQueries({queryKey:["employee-detail",m]})},onError:K=>{const De=Be(K,"Cihaz daveti olusturulamadi.").message;pt(De),o({variant:"error",title:"Davet olusturulamadi",description:De})}});b.useEffect(()=>{Se.data?.home_location&&(v(String(Se.data.home_location.home_lat)),S(String(Se.data.home_location.home_lon)),k(String(Se.data.home_location.radius_m)))},[Se.data?.home_location]),b.useEffect(()=>{Pe&&R(Pe.shift_id?String(Pe.shift_id):"")},[Pe]),b.useEffect(()=>{Pe&&(A(Pe.full_name),Z(Pe.department_id?String(Pe.department_id):""))},[Pe]),b.useEffect(()=>{Number.isFinite(m)&&(f||s("/employees",{replace:!0}))},[m,f,s]);const Vt=async K=>{try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(K);else{const De=document.createElement("textarea");De.value=K,document.body.appendChild(De),De.select(),document.execCommand("copy"),document.body.removeChild(De)}o({variant:"success",title:"Kopyalandi",description:"Deger panoya kopyalandi."})}catch{o({variant:"error",title:"Kopyalanamadi",description:"Tarayici kopyalama islemini engelledi."})}},Dt=()=>{pt(null),It(null),ne(null),ze("30"),Ot(!0)},Xt=K=>{K.preventDefault(),pt(null);const De=sz.safeParse({expires_in_minutes:ft});if(!De.success){const dt=De.error.issues[0]?.message??"Sure alanini kontrol edin.";pt(dt),o({variant:"error",title:"Form hatasi",description:dt});return}Nt.mutate({employee_id:m,expires_in_minutes:De.data.expires_in_minutes})},Bn=K=>{K.preventDefault(),T(null);const De=az.safeParse({home_lat:g,home_lon:_,radius_m:w});if(!De.success){const dt=De.error.issues[0]?.message??"Konum alanlarini kontrol edin.";T(dt),o({variant:"error",title:"Form hatasi",description:dt});return}Gn.mutate(De.data)},Pt=K=>{K.preventDefault();const De=B.trim();if(!De){o({variant:"error",title:"Form hatasi",description:"Ad Soyad alani bos birakilamaz."});return}const dt=z?Number(z):null;if(z&&(dt===null||!Number.isFinite(dt)||dt<=0)){o({variant:"error",title:"Form hatasi",description:"Departman secimi gecersiz."});return}et.mutate({full_name:De,department_id:dt})},ut=Lt.data?.days??[],dn=b.useMemo(()=>O_(ut),[ut]),jn=b.useMemo(()=>ut.filter(K=>K.flags.length>0).length,[ut]),We=b.useMemo(()=>ut.length?`%${Math.round((Lt.data?.totals.incomplete_days??0)/ut.length*100)}`:"%0",[Lt.data?.totals.incomplete_days,ut.length]),kn=Se.data?.ip_summary??[],gt=Se.data?.recent_locations??[],Wa=b.useMemo(()=>Array.from(new Set(gt.map(K=>K.device_id))).filter(K=>Number.isFinite(K)).sort((K,De)=>K-De),[gt]),Dn=b.useMemo(()=>{const K=je.trim().toLowerCase();return gt.filter(De=>{const dt=ir(De.ts_utc);return D&&dt&&dt<D||F&&dt&&dt>F||ce!=="all"&&De.event_type!==ce||$!=="all"&&De.location_status!==$||Ae!=="all"&&String(De.device_id)!==Ae?!1:K?[La(De.ts_utc),dt??"",De.event_type,De.location_status,String(De.device_id),Wu(De.lat,De.lon)].join(" ").toLowerCase().includes(K):!0})},[D,F,Ae,ce,je,$,gt]);b.useEffect(()=>{Ee(1)},[je,ce,$,Ae,D,F,Oe]);const Kt=b.useMemo(()=>Dn.length?Math.max(1,Math.ceil(Dn.length/Oe)):1,[Dn.length,Oe]);b.useEffect(()=>{de<=Kt||Ee(Kt)},[de,Kt]);const $n=b.useMemo(()=>{const K=(de-1)*Oe;return Dn.slice(K,K+Oe)},[Dn,de,Oe]),es=b.useMemo(()=>{if(!Dn.length)return{start:0,end:0};const K=(de-1)*Oe+1,De=Math.min(de*Oe,Dn.length);return{start:K,end:De}},[Dn.length,de,Oe]),J=b.useMemo(()=>{for(const K of gt){const De=ir(K.ts_utc);if(De)return De}for(let K=ut.length-1;K>=0;K-=1)if(uz(ut[K]))return ut[K].date;return null},[ut,gt]);b.useEffect(()=>{X||!J||P(J)},[J,X]),b.useEffect(()=>{if(!X)return;const K=ut.some(dt=>dt.date===X),De=gt.some(dt=>ir(dt.ts_utc)===X);!K&&!De&&(P(null),oe(null))},[ut,gt,X]);const qe=b.useMemo(()=>ut.find(K=>K.date===X)??null,[ut,X]),xn=b.useMemo(()=>X?gt.filter(K=>ir(K.ts_utc)===X):[],[gt,X]),ht=b.useMemo(()=>{const K=[],De=Se.data?.latest_location??null,dt=Se.data?.first_location??null,Qn=De&&X?ir(De.ts_utc)===X:!1,Tn=dt&&X?ir(dt.ts_utc)===X:!1;qe&&(qe.in_lat!==null&&qe.in_lon!==null&&K.push({id:`${qe.date}-in`,lat:qe.in_lat,lon:qe.in_lon,label:`${qe.date} - Mesai Baslangici`,kind:"checkin"}),qe.out_lat!==null&&qe.out_lon!==null&&K.push({id:`${qe.date}-out`,lat:qe.out_lat,lon:qe.out_lon,label:`${qe.date} - Mesai Bitisi`,kind:"checkout"})),De&&Qn&&K.push({id:"latest",lat:De.lat,lon:De.lon,label:`Son bildirilen konum - ${La(De.ts_utc)}`,kind:"latest"}),dt&&Tn&&K.push({id:"first",lat:dt.lat,lon:dt.lon,label:`Ilk konum kaydi - ${La(dt.ts_utc)}`,kind:"first"});for(const q of xn){const Ze=Qn&&De!==null&&De.ts_utc===q.ts_utc&&De.device_id===q.device_id,St=Tn&&dt!==null&&dt.ts_utc===q.ts_utc&&dt.device_id===q.device_id;Ze||St||K.push({id:_f(q),lat:q.lat,lon:q.lon,label:`${q.event_type} - ${La(q.ts_utc)}`,kind:"recent"})}return K},[Se.data?.first_location,Se.data?.latest_location,xn,X,qe]),Ue=b.useMemo(()=>ht.filter(K=>pe[K.kind]),[ht,pe]),sn=b.useMemo(()=>({checkin:ht.some(K=>K.kind==="checkin"),checkout:ht.some(K=>K.kind==="checkout"),first:ht.some(K=>K.kind==="first"),recent:ht.some(K=>K.kind==="recent"),latest:ht.some(K=>K.kind==="latest")}),[ht]);b.useEffect(()=>{ht.length&&(Ue.length||Ve({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}))},[Ue.length,ht.length]),b.useEffect(()=>{if(!te)return;ht.some(De=>De.id===te)||oe(null)},[ht,te]);const yn=K=>{if(!ht.some(Tn=>Tn.kind===K)){o({variant:"info",title:"Bu tipte konum yok",description:"Secili kayitta bu lejant turune ait konum bulunamadi."});return}const dt=Object.values(pe).filter(Boolean).length;if(pe[K]&&dt===1){Ve({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0});return}Ve({checkin:K==="checkin",checkout:K==="checkout",first:K==="first",recent:K==="recent",latest:K==="latest"});const Qn=ht.find(Tn=>Tn.kind===K);Qn&&oe(Qn.id)},En=()=>{Ve({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),oe(null)},Wt=(K,De)=>{const dt=K.in_lat!==null&&K.in_lon!==null,Qn=K.out_lat!==null&&K.out_lon!==null;if(!(De==="in"?dt:Qn)){o({variant:"info",title:"Konum bulunamadi",description:`${K.date} icin secilen konum kaydi yok.`});return}P(K.date),Ve({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),oe(De==="in"?`${K.date}-in`:`${K.date}-out`)},hn=K=>{const De=ir(K.ts_utc);if(!De){o({variant:"info",title:"Konum zamani okunamadi",description:"Secilen konum kaydi icin gun bilgisi hesaplanamadi."});return}P(De),Ve({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),oe(_f(K))},sa=b.useMemo(()=>`${Se.data?.devices.length??0} cihaz`,[Se.data?.devices.length]);return Number.isFinite(m)?f?Se.isLoading?n.jsx($t,{}):Se.isError||!Pe?n.jsx(zt,{message:"Calisan kaydi bulunamadi."}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:`Calisan Detayi #${Pe.id}`,description:`${Pe.full_name} icin puantaj, cihaz, aktivite ve konum bilgileri`,action:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{const K=!Pe.is_active;window.confirm(K?`${Pe.full_name} arsivden cikarilsin mi?`:`${Pe.full_name} arsivlensin mi?`)&&be.mutate(K)},disabled:be.isPending,className:`rounded-lg px-4 py-2 text-sm font-semibold text-white ${Pe.is_active?"bg-rose-600 hover:bg-rose-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:Pe.is_active?"Arsivle":"Arsivden Cikar"}),n.jsx("button",{type:"button",onClick:Dt,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Cihaz Baglama Linki Olustur"})]})}),n.jsx(Ie,{children:n.jsxs("div",{className:"grid gap-3 md:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Calisan"}),n.jsx("p",{className:"text-base font-semibold text-slate-900",children:Pe.full_name}),n.jsxs("p",{className:"text-xs text-slate-500",children:["ID: ",Pe.id]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Durum"}),n.jsx(cr,{value:Pe.is_active?"Aktif":"Pasif"}),n.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Bolge: ",Pe.region_name??"-"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Departman ID: ",Pe.department_id??"-"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Son employee portal aktivitesi"}),n.jsx("p",{className:"text-sm font-medium text-slate-800",children:La(Se.data?.last_portal_seen_utc)}),n.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Cihaz sayisi: ",sa]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Bu ay yasal fazla mesai"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx($e,{minutes:rt.data?.totals.legal_overtime_minutes??0})}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Plan ustu: ",n.jsx($e,{minutes:rt.data?.totals.plan_overtime_minutes??0})]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[d.getFullYear(),"-",String(d.getMonth()+1).padStart(2,"0")]})]})]})}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Calisan Bilgileri"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ad Soyad ve departman bilgisini bu alandan guncelleyebilirsiniz."}),n.jsxs("form",{onSubmit:Pt,className:"mt-3 grid gap-3 md:grid-cols-3 md:items-end",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Ad Soyad",n.jsx("input",{value:B,onChange:K=>A(K.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Calisan adi soyadi"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:z,onChange:K=>Z(K.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",disabled:Tt.isLoading,children:[n.jsx("option",{value:"",children:"Atanmamis"}),(Tt.data??[]).map(K=>n.jsx("option",{value:K.id,children:K.name},K.id))]})]}),n.jsx("button",{type:"submit",disabled:et.isPending||Tt.isLoading,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-700 disabled:opacity-60",children:et.isPending?"Kaydediliyor...":"Bilgileri Kaydet"})]}),Tt.isError?n.jsx("p",{className:"mt-2 text-xs text-amber-700",children:"Departman listesi alinamadi. Lutfen tekrar deneyin."}):null]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Vardiya Atamasi"}),n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-[1fr_auto] md:items-end",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya",n.jsxs("select",{value:E,onChange:K=>R(K.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",disabled:!Pe.department_id||se.isLoading,children:[n.jsx("option",{value:"",children:"Atanmamis"}),(se.data??[]).map(K=>n.jsxs("option",{value:K.id,children:[K.name," (",K.start_time_local,"-",K.end_time_local,")"]},K.id))]})]}),n.jsx("button",{type:"button",disabled:lt.isPending||!Pe.department_id,onClick:()=>{const K=E?Number(E):null;lt.mutate(K)},className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-700 disabled:opacity-60",children:lt.isPending?"Kaydediliyor...":"Vardiya Ata"})]})]}),n.jsxs(Ie,{children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Aylik Puantaj"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Aydan aya puantaj ve secili ay fazla mesai durumunu inceleyin."})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("label",{className:"text-xs text-slate-600",children:["Yil",n.jsx("input",{type:"number",value:I,onChange:K=>V(K.target.value),className:"mt-1 w-28 rounded-lg border border-slate-300 px-2 py-1 text-sm"})]}),n.jsxs("label",{className:"text-xs text-slate-600",children:["Ay",n.jsx("input",{type:"number",min:1,max:12,value:H,onChange:K=>ee(K.target.value),className:"mt-1 w-20 rounded-lg border border-slate-300 px-2 py-1 text-sm"})]})]})]}),pn?Lt.isLoading?n.jsx($t,{}):Lt.isError?n.jsx(zt,{message:Be(Lt.error,"Aylik puantaj alinamadi.").message}):n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-3 xl:grid-cols-7",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay net calisma"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx($e,{minutes:Lt.data?.totals.worked_minutes??0})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay plan ustu sure"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx($e,{minutes:Lt.data?.totals.plan_overtime_minutes??0})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[dn.planOvertimeDayCount," gun"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay yasal fazla sure"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx($e,{minutes:Lt.data?.totals.legal_extra_work_minutes??0})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Secili ay yasal fazla mesai"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n.jsx($e,{minutes:Lt.data?.totals.legal_overtime_minutes??0})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[dn.overtimeDayCount," gun fazla mesai"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Eksik gun"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:Lt.data?.totals.incomplete_days??0})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Calisilan gun"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:dn.workedDayCount}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Hafta ici: ",dn.weekdayWorkedDayCount," gun"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Pazar mesaisi"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[dn.sundayWorkedDayCount," gun"]}),n.jsx("p",{className:"text-xs text-slate-500",children:n.jsx($e,{minutes:dn.sundayWorkedMinutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Ozel gun mesaisi"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[dn.specialWorkedDayCount," gun"]}),n.jsx("p",{className:"text-xs text-slate-500",children:n.jsx($e,{minutes:dn.specialWorkedMinutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Bayrakli gun"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:jn}),n.jsx("p",{className:"text-xs text-slate-500",children:"Riskli veya kontrol gerektiren satir sayisi"})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Eksik gun orani"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:We}),n.jsxs("p",{className:"text-xs text-slate-500",children:[Lt.data?.totals.incomplete_days??0," / ",ut.length," gun"]})]})]}),n.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:"Ayni tabloda giris-cikis saatleri, konum koordinatlari ve bayraklar birlikte gosterilir. Satir renklendirmesi: kirmizi = eksik gun, amber = bayrakli gun, gri = izin/tatil."}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[1240px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Tarih"}),n.jsx("th",{className:"py-2",children:"Gun"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Gun Tipi"}),n.jsx("th",{className:"py-2",children:"Giris"}),n.jsx("th",{className:"py-2",children:"Cikis"}),n.jsx("th",{className:"py-2",children:"Giris Konum (lat/lon)"}),n.jsx("th",{className:"py-2",children:"Cikis Konum (lat/lon)"}),n.jsx("th",{className:"py-2",children:"Net Sure"}),n.jsx("th",{className:"py-2",children:"Plan Ustu"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Sure"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"}),n.jsx("th",{className:"py-2",children:"Bayraklar"})]})}),n.jsx("tbody",{children:ut.map(K=>{const De=lz(K);return n.jsxs("tr",{className:`border-t border-slate-100 ${De}`,children:[n.jsx("td",{className:"py-2 font-medium text-slate-800",children:K.date}),n.jsx("td",{className:"py-2 text-xs uppercase text-slate-600",children:rz(K.date)}),n.jsx("td",{className:"py-2",children:iz(K.status)}),n.jsx("td",{className:"py-2",children:Cp(K).label}),n.jsx("td",{className:"py-2",children:La(K.in)}),n.jsx("td",{className:"py-2",children:La(K.out)}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-mono text-xs",children:Wu(K.in_lat,K.in_lon)}),K.in_lat!==null&&K.in_lon!==null?n.jsx("button",{type:"button",className:"rounded-md border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",onClick:()=>Wt(K,"in"),title:"Mesai baslangic konumunu haritada goster",children:"Harita"}):null]})}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-mono text-xs",children:Wu(K.out_lat,K.out_lon)}),K.out_lat!==null&&K.out_lon!==null?n.jsx("button",{type:"button",className:"rounded-md border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",onClick:()=>Wt(K,"out"),title:"Mesai bitis konumunu haritada goster",children:"Harita"}):null]})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:K.worked_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:K.plan_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:K.legal_extra_work_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:K.legal_overtime_minutes})}),n.jsx("td",{className:"py-2 text-xs text-slate-600",children:oz(K.flags)})]},K.date)})})]})})]}):n.jsx("p",{className:"mt-3 text-sm text-amber-700",children:"Yil/ay degeri gecersiz."})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Kayitli Cihazlar ve IP Bilgisi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Cihazlar, son attendance zamani ve son gorulen IP bilgisi."}),n.jsx("div",{className:"mt-3 list-scroll-area",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Cihaz ID"}),n.jsx("th",{className:"py-2",children:"Parmak Izi"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Olusma"}),n.jsx("th",{className:"py-2",children:"Son Attendance"}),n.jsx("th",{className:"py-2",children:"Son Gorulen IP"}),n.jsx("th",{className:"py-2",children:"Son Islem Zamani"})]})}),n.jsx("tbody",{children:(Se.data?.devices??[]).map(K=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:K.id}),n.jsx("td",{className:"py-2 font-mono text-xs",children:K.device_fingerprint}),n.jsx("td",{className:"py-2",children:n.jsx(cr,{value:K.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2",children:La(K.created_at)}),n.jsx("td",{className:"py-2",children:La(K.last_attendance_ts_utc)}),n.jsx("td",{className:"py-2",children:K.last_seen_ip??"-"}),n.jsx("td",{className:"py-2",children:La(K.last_seen_at_utc)})]},K.id))})]})})]}),n.jsxs("div",{className:"grid gap-4 lg:grid-cols-2 lg:items-start",children:[n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Employee Portal Aktivite Akisi"}),n.jsx("div",{className:"mt-3 list-scroll-area rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Zaman"}),n.jsx("th",{className:"py-2",children:"Islem"}),n.jsx("th",{className:"py-2",children:"IP"}),n.jsx("th",{className:"py-2",children:"User Agent"})]})}),n.jsx("tbody",{children:(Se.data?.recent_activity??[]).map((K,De)=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:La(K.ts_utc)}),n.jsx("td",{className:"py-2",children:K.action}),n.jsx("td",{className:"py-2",children:K.ip??"-"}),n.jsx("td",{className:"py-2 max-w-[280px] truncate",title:K.user_agent??"-",children:K.user_agent??"-"})]},`${K.ts_utc}-${De}`))})]})})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Cihaz IP Ozeti"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"IP, son gorulme zamani ve son bilinen konum bilgisi."}),n.jsx("div",{className:"mt-3 list-scroll-area rounded-lg border border-slate-200",children:kn.length?n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"IP"}),n.jsx("th",{className:"py-2",children:"Son gorulme"}),n.jsx("th",{className:"py-2",children:"Aksiyon"}),n.jsx("th",{className:"py-2",children:"Son konum (lat/lon)"}),n.jsx("th",{className:"py-2",children:"Konum zamani"})]})}),n.jsx("tbody",{children:kn.map(K=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2 font-mono text-xs",children:K.ip}),n.jsx("td",{className:"py-2",children:La(K.last_seen_at_utc)}),n.jsx("td",{className:"py-2",children:K.last_action}),n.jsx("td",{className:"py-2",children:K.last_lat!==null&&K.last_lon!==null?`${K.last_lat.toFixed(6)}, ${K.last_lon.toFixed(6)}`:"-"}),n.jsx("td",{className:"py-2",children:K.last_location_ts_utc?La(K.last_location_ts_utc):"-"})]},K.ip))})]}):n.jsx("div",{className:"p-3 text-sm text-slate-500",children:"IP kaydi bulunamadi."})})]})]}),n.jsxs(Ie,{children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Konum Haritasi"}),X&&J&&X!==J?n.jsx("button",{type:"button",onClick:()=>{P(J),Ve({checkin:!0,checkout:!0,first:!0,recent:!0,latest:!0}),oe(null)},className:"rounded-md border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Son gune don"}):null]}),qe?n.jsxs("p",{className:"mt-2 text-sm text-slate-700",children:["Harita secimi: ",n.jsx("span",{className:"font-semibold",children:qe.date})," gununun giris/cikis konumlari"]}):X?n.jsxs("p",{className:"mt-2 text-sm text-slate-700",children:["Harita secimi: ",n.jsx("span",{className:"font-semibold",children:X})," gununun konum kayitlari"]}):n.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Calisan icin konum verisi henuz yok."}),Ue.length?n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsx(nz,{markers:Ue,focusedMarkerId:te}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-700",children:[n.jsxs("button",{type:"button",onClick:()=>yn("first"),disabled:!sn.first,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${pe.first?"border-violet-300 bg-violet-50 text-violet-800":"border-slate-300 bg-white text-slate-500"} ${sn.first?"":"cursor-not-allowed opacity-45"}`,title:"Yalnizca ilk konum noktasini goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-violet-600"}),"Ilk konum"]}),n.jsxs("button",{type:"button",onClick:()=>yn("recent"),disabled:!sn.recent,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${pe.recent?"border-blue-300 bg-blue-50 text-blue-800":"border-slate-300 bg-white text-slate-500"} ${sn.recent?"":"cursor-not-allowed opacity-45"}`,title:"Diger konum noktalarini goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-600"}),"Diger konumlar"]}),n.jsxs("button",{type:"button",onClick:()=>yn("checkin"),disabled:!sn.checkin,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${pe.checkin?"border-emerald-300 bg-emerald-50 text-emerald-800":"border-slate-300 bg-white text-slate-500"} ${sn.checkin?"":"cursor-not-allowed opacity-45"}`,title:"Yalnizca mesai baslangici noktalarini goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-600"}),"Mesai baslangici"]}),n.jsxs("button",{type:"button",onClick:()=>yn("checkout"),disabled:!sn.checkout,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${pe.checkout?"border-rose-300 bg-rose-50 text-rose-800":"border-slate-300 bg-white text-slate-500"} ${sn.checkout?"":"cursor-not-allowed opacity-45"}`,title:"Yalnizca mesai bitisi noktalarini goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-600"}),"Mesai bitisi"]}),n.jsxs("button",{type:"button",onClick:()=>yn("latest"),disabled:!sn.latest,className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 ${pe.latest?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-white text-slate-500"} ${sn.latest?"":"cursor-not-allowed opacity-45"}`,title:"Yalnizca son bildirilen konumu goster",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-sky-700"}),"Son bildirilen konum"]}),n.jsx("button",{type:"button",onClick:En,className:"ml-1 rounded-md border border-slate-300 px-2 py-1 text-[11px] font-semibold text-slate-700 hover:bg-slate-100",children:"Tumunu goster"})]})]}):n.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Secili filtrede gosterilecek konum noktasi yok."}),n.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200",children:[n.jsxs("div",{className:"border-b border-slate-200 px-3 py-2",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Konum Gecmisi (satira tiklayinca haritada odaklar)"}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-7",children:[n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500 md:col-span-2",children:["Ara",n.jsx("input",{value:je,onChange:K=>ue(K.target.value),placeholder:"Tarih, koordinat, cihaz, durum...",className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800"})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Tip",n.jsxs("select",{value:ce,onChange:K=>Q(K.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800",children:[n.jsx("option",{value:"all",children:"Tum tipler"}),n.jsx("option",{value:"IN",children:"IN"}),n.jsx("option",{value:"OUT",children:"OUT"})]})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Durum",n.jsxs("select",{value:$,onChange:K=>ie(K.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800",children:[n.jsx("option",{value:"all",children:"Tum durumlar"}),n.jsx("option",{value:"VERIFIED_HOME",children:"VERIFIED_HOME"}),n.jsx("option",{value:"UNVERIFIED_LOCATION",children:"UNVERIFIED_LOCATION"}),n.jsx("option",{value:"NO_LOCATION",children:"NO_LOCATION"})]})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Cihaz",n.jsxs("select",{value:Ae,onChange:K=>_e(K.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800",children:[n.jsx("option",{value:"all",children:"Tum cihazlar"}),Wa.map(K=>n.jsxs("option",{value:String(K),children:["#",K]},K))]})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Baslangic Tarihi",n.jsx("input",{type:"date",value:D,onChange:K=>ae(K.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800"})]}),n.jsxs("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Bitis Tarihi",n.jsx("input",{type:"date",value:F,min:D||void 0,onChange:K=>me(K.target.value),className:"mt-1 w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-800"})]})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("p",{className:"text-[11px] text-slate-500",children:["Gosterilen satir: ",es.start,"-",es.end," /"," ",Dn.length]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Sayfa basi",n.jsx("select",{value:Oe,onChange:K=>Qe(Number(K.target.value)),className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-800",children:dz.map(K=>n.jsx("option",{value:K,children:K},K))})]})]})]}),Dn.length?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"list-scroll-area-compact",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2 pl-3",children:"Zaman"}),n.jsx("th",{className:"py-2",children:"Gun"}),n.jsx("th",{className:"py-2",children:"Tip"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Cihaz"}),n.jsx("th",{className:"py-2 pr-3",children:"Koordinat"})]})}),n.jsx("tbody",{children:$n.map((K,De)=>{const dt=_f(K),Qn=ir(K.ts_utc)??"-",Tn=te===dt;return n.jsxs("tr",{className:`border-t border-slate-100 transition-colors ${Tn?"bg-sky-100/60":"cursor-pointer hover:bg-sky-50/70"}`,role:"button",tabIndex:0,onClick:()=>hn(K),onKeyDown:q=>{(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),hn(K))},title:"Haritada bu konumu odakla",children:[n.jsx("td",{className:"py-2 pl-3",children:La(K.ts_utc)}),n.jsx("td",{className:"py-2 font-mono text-xs text-slate-600",children:Qn}),n.jsx("td",{className:"py-2",children:K.event_type}),n.jsx("td",{className:"py-2",children:K.location_status}),n.jsxs("td",{className:"py-2",children:["#",K.device_id]}),n.jsx("td",{className:"py-2 pr-3",children:Wu(K.lat,K.lon)})]},`${dt}-${De}`)})})]})}),n.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 px-3 py-2",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Sayfa ",de," / ",Kt]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Ee(K=>Math.max(1,K-1)),disabled:de<=1,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Onceki"}),n.jsx("button",{type:"button",onClick:()=>Ee(K=>Math.min(Kt,K+1)),disabled:de>=Kt,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Sonraki"})]})]})]}):n.jsx("div",{className:"p-3 text-sm text-slate-500",children:"Filtreye uygun konum gecmisi bulunamadi."})]})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Ev Konumu"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Check-in konum dogrulamasi icin enlem, boylam ve yaricap metre bilgisini girin."}),Se.data?.home_location?null:n.jsx("p",{className:"mt-2 text-sm text-amber-700",children:"Kayitli konum bulunamadi. Ilk kaydi olusturabilirsiniz."}),n.jsxs("form",{onSubmit:Bn,className:"mt-4 grid gap-3 md:grid-cols-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Ev Enlem (Lat)",n.jsx("input",{value:g,onChange:K=>v(K.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ev Boylam (Lon)",n.jsx("input",{value:_,onChange:K=>S(K.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yaricap (metre)",n.jsx("input",{value:w,onChange:K=>k(K.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsx("div",{className:"md:col-span-3",children:n.jsx("button",{type:"submit",disabled:Gn.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Gn.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Kaydediliyor..."]}):Se.data?.home_location?"Konumu Guncelle":"Konumu Kaydet"})})]}),O?n.jsx("p",{className:"form-validation",children:O}):null]}),n.jsxs(_i,{open:Ye,title:"Cihaz Baglama Linki Olustur",onClose:()=>Ot(!1),children:[n.jsxs("form",{onSubmit:Xt,className:"space-y-4",children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Gecerlilik Suresi (dakika)",n.jsx("input",{value:ft,onChange:K=>ze(K.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsx("button",{type:"submit",disabled:Nt.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Nt.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Olusturuluyor..."]}):"Daveti Uret"})]}),n.jsx("p",{className:"mt-3 text-xs text-slate-500",children:"Bu linki calisana iletin. Calisan linki acinca cihazini otomatik olarak hesabina baglayabilir."}),at?n.jsx("p",{className:"form-validation",children:at}):null,Rt&&Qt?n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsx(Sv,{label:"Token",value:Rt,onCopy:Vt}),n.jsx(Sv,{label:"Baglanti Linki (invite_url)",value:Qt,onCopy:Vt})]}):null]})]}):n.jsx($t,{}):n.jsx(zt,{message:"Gecersiz calisan id degeri."})}const hz={NORMAL:"Normal",IZINLI:"Izinli",RESMI_TATIL:"Resmi Tatil",CALISMADI:"Calismadi"},fz={SHIFT:"Vardiya",WEEKLY:"Haftalik Kural",WORK_RULE:"Temel Kural"},ed={AUTO:"Otomatik (Oncelik: Vardiya > Haftalik > Temel)",SHIFT:"Vardiya",WEEKLY:"Haftalik Kural",WORK_RULE:"Temel Kural"},jc="Europe/Istanbul";function Nf(e){const s=[];e.status==="INCOMPLETE"&&s.push("EKSIK_GUN");for(const l of e.flags)s.push(l);return s}function pz(e){return e.length===0?void 0:`Supheli nedenleri:
${e.map((l,o)=>{const d=Ya(l);return`${o+1}. ${d.label}: ${d.description}`}).join(`
`)}`}function kv(e){if(!e)return"";const s=new Date(e);return Number.isNaN(s.getTime())?"":new Intl.DateTimeFormat("tr-TR",{timeZone:jc,hour:"2-digit",minute:"2-digit",hour12:!1}).format(s)}function Ev(e){if(!e)return"-";const s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat("tr-TR",{timeZone:jc,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(s)}function Tv(e){if(!e)return"-";const s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat("tr-TR",{timeZone:jc,hour:"2-digit",minute:"2-digit",hour12:!1}).format(s)}function xz(e){const s=new Date(`${e}T00:00:00`);return Number.isNaN(s.getTime())?"-":new Intl.DateTimeFormat("tr-TR",{timeZone:jc,weekday:"short"}).format(s)}function gz(e,s){return e.status==="INCOMPLETE"?"bg-rose-50/70":s?"bg-amber-50/55":e.status==="LEAVE"||e.status==="OFF"?"bg-slate-50/70":""}function Cv(e){if(!e)return{status:"NORMAL",reason:""};const s=(e.note??"").trim(),l=s.match(/^\[MANUAL_STATUS:(NORMAL|IZINLI|RESMI_TATIL|CALISMADI)\]\s*/i);return l?{status:l[1].toUpperCase(),reason:s.replace(l[0],"").trim()}:e.is_absent?{status:"CALISMADI",reason:s}:{status:"NORMAL",reason:s}}function yz(e,s){const l=s.trim();if(e==="NORMAL")return l||null;const o=`[MANUAL_STATUS:${e}]`;return l?`${o} ${l}`:o}function vz(){const e=Xn(),{pushToast:s}=aa(),l=new Date,o={employeeId:"",year:String(l.getFullYear()),month:String(l.getMonth()+1)},[d,m]=b.useState(o),[f,g]=b.useState(o),[v,_]=b.useState(!1),[S,w]=b.useState(null),[k,O]=b.useState(!1),[T,E]=b.useState(!1),[R,B]=b.useState(""),[A,z]=b.useState(""),[Z,I]=b.useState(""),[V,H]=b.useState(""),[ee,X]=b.useState("NORMAL"),[P,te]=b.useState("AUTO"),[oe,je]=b.useState(""),[ue,ce]=b.useState(null),[Q,$]=b.useState(null),ie=Fe({queryKey:["employees","all"],queryFn:()=>Xs({status:"all"})}),Ae=Number(f.employeeId),_e=Number(f.year),D=Number(f.month),ae=Number.isFinite(Ae)&&Ae>0&&Number.isFinite(_e)&&_e>0&&Number.isFinite(D)&&D>=1&&D<=12,F=Fe({queryKey:["employee-monthly",Ae,_e,D],queryFn:()=>uc({employee_id:Ae,year:_e,month:D}),enabled:ae}),me=Fe({queryKey:["manual-overrides",Ae,_e,D],queryFn:()=>w3(Ae,_e,D),enabled:ae}),de=Ge({mutationFn:({employeeId:be,dayDate:et,inTime:lt,outTime:Nt,status:Vt,ruleSource:Dt,ruleShiftId:Xt,reason:Bn})=>{const Pt=Vt!=="NORMAL";return S3(be,{day_date:et,in_time:Pt?null:lt||null,out_time:Pt?null:Nt||null,is_absent:Pt,rule_source_override:Dt,rule_shift_id_override:Dt==="SHIFT"&&Xt?Number(Xt):null,note:yz(Vt,Bn)})},onSuccess:()=>{s({variant:"success",title:"Manuel duzeltme kaydedildi",description:"Gunluk puantaj kaydi guncellendi."}),E(!1),$(null),je(""),e.invalidateQueries({queryKey:["employee-monthly"]}),e.invalidateQueries({queryKey:["manual-overrides"]})},onError:be=>{s({variant:"error",title:"Duzeltme kaydedilemedi",description:Be(be,"Islem basarisiz.").message})}}),Ee=Ge({mutationFn:k3,onSuccess:()=>{s({variant:"success",title:"Manuel duzeltme kaldirildi",description:"Secili gun icin manuel override silindi."}),E(!1),$(null),e.invalidateQueries({queryKey:["employee-monthly"]}),e.invalidateQueries({queryKey:["manual-overrides"]})},onError:be=>{s({variant:"error",title:"Silme islemi basarisiz",description:Be(be,"Islem basarisiz.").message})}}),Oe=b.useMemo(()=>ie.data?.find(be=>be.id===Ae),[ie.data,Ae]),Qe=Oe?.full_name,pe=Fe({queryKey:["monthly-manual-shifts",Oe?.department_id],queryFn:()=>_c(Oe?.department_id?{department_id:Oe.department_id,active_only:!1}:void 0),enabled:!!Oe?.department_id}),Ve=b.useMemo(()=>{const be=new Map;for(const et of me.data??[])be.set(et.day_date,et);return be},[me.data]),Ye=F.data?.days??[],Ot=b.useMemo(()=>Ye.reduce((be,et)=>be+(et.missing_minutes??0),0),[Ye]),ft=b.useMemo(()=>Ye.filter(be=>!(v&&Nf(be).length===0||S&&!be.flags.includes(S))),[Ye,S,v]),ze=b.useMemo(()=>Ye.filter(be=>Nf(be).length>0).length,[Ye]),at=b.useMemo(()=>Ye.filter(be=>be.legal_overtime_minutes>0).length,[Ye]),pt=b.useMemo(()=>Ye.filter(be=>be.status==="LEAVE").length,[Ye]),Rt=b.useMemo(()=>Ye.filter(be=>be.status==="OFF").length,[Ye]),It=b.useMemo(()=>Ye.filter(be=>be.status==="OK"||be.status==="INCOMPLETE").length,[Ye]),Qt=b.useMemo(()=>Ye.length?`%${Math.round(ze/Ye.length*100)}`:"%0",[Ye.length,ze]),ne=b.useMemo(()=>`${f.year}-${String(f.month).padStart(2,"0")}`,[f.month,f.year]),Se=b.useMemo(()=>{const be=["SHIFT_WEEKLY_RULE_OVERRIDE","NEEDS_SHIFT_REVIEW","MISSING_IN","MISSING_OUT","UNDERWORKED"],et=new Map;for(const lt of be)et.set(lt,0);for(const lt of Ye)for(const Nt of be)lt.flags.includes(Nt)&&et.set(Nt,(et.get(Nt)??0)+1);return be.map(lt=>({code:lt,count:et.get(lt)??0}))},[Ye]),Pe=b.useMemo(()=>{const be=[];return f.employeeId&&be.push(`Calisan: ${f.employeeId}`),be.push(`Yil: ${f.year}`),be.push(`Ay: ${f.month}`),v&&be.push("Sadece supheli gunler"),S&&be.push(`Cakisma: ${Ya(S).label}`),be},[f,S,v]),Tt=()=>g({...d}),se=()=>{m(o),g(o),_(!1),w(null)},He=async()=>{if(!ae){s({variant:"error",title:"Filtre hatasi",description:"Excel indirmek icin calisan, yil ve ay secin."});return}try{O(!0);const be=await A3({employee_id:Ae,year:_e,month:D}),et=window.URL.createObjectURL(be),lt=document.createElement("a");lt.href=et,lt.download=`puantaj-employee-${Ae}-${_e}-${String(D).padStart(2,"0")}.xlsx`,document.body.appendChild(lt),lt.click(),lt.remove(),window.URL.revokeObjectURL(et)}catch(be){s({variant:"error",title:"Excel indirilemedi",description:Be(be,"Dosya olusturulamadi.").message})}finally{O(!1)}},_t=be=>{const et=Ve.get(be.date),lt=Cv(et);B(be.date),ce(et?.id??null),X(lt.status),H(lt.reason),z(et?kv(et.in_ts):""),I(et?kv(et.out_ts):""),te(et?.rule_source_override??"AUTO"),je(et?.rule_shift_id_override?String(et.rule_shift_id_override):be.shift_id?String(be.shift_id):""),$(null),E(!0)},pn=()=>{if(!ae||Ye.length===0){s({variant:"error",title:"Rapor verisi yok",description:"Once calisan, yil ve ay secip raporu yukleyin."});return}_t(Ye[0])},Lt=()=>{if($(null),!R)return $("Duzeltme icin tarih secmelisiniz."),!1;if(ee==="NORMAL"){if(!A&&!Z)return $("Normal gun icin en az bir saat bilgisi girin."),!1;if(A&&Z&&Z<A)return $("Cikis saati giris saatinden kucuk olamaz."),!1}return P==="SHIFT"&&!oe?($("Vardiya kurali icin bir vardiya secmelisiniz."),!1):!0},rt=be=>{be.preventDefault(),ae&&Lt()&&de.mutate({employeeId:Ae,dayDate:R,inTime:A,outTime:Z,status:ee,ruleSource:P,ruleShiftId:oe,reason:V})};if(ie.isLoading)return n.jsx($t,{});if(ie.isError)return n.jsx(zt,{message:"Calisan listesi alinamadi."});const Gn=ie.data??[];return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"Aylik Calisan Puantaj Raporu",description:"Gunluk giris/cikis ve fazla mesai bilgilerini inceleyin, HR icin manuel duzeltme yapin.",action:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:pn,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Manuel Duzeltme"}),n.jsx("button",{type:"button",onClick:()=>{He()},disabled:k,className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:k?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner inline-spinner-dark","aria-hidden":"true"}),"Hazirlaniyor..."]}):"Excel Indir"}),n.jsx(Ys,{to:"/reports/excel-export",className:"btn-secondary rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Gelismis Export"})]})}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-4",children:[n.jsx(Js,{label:"Calisan",employees:Gn,value:d.employeeId,onChange:be=>m(et=>({...et,employeeId:be})),emptyLabel:"Seciniz",helperText:"Calisan adini veya ID bilgisini yazabilirsiniz.",className:"md:col-span-2"}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yil",n.jsx("input",{type:"number",value:d.year,onChange:be=>m(et=>({...et,year:be.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",n.jsx("input",{type:"number",value:d.month,onChange:be=>m(et=>({...et,month:be.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),n.jsx("div",{className:"mt-3",children:n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:v,onChange:be=>_(be.target.checked)}),"Sadece supheli gunleri goster"]})}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:Tt,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),n.jsx("button",{type:"button",onClick:se,className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Pe.map(be=>n.jsx("span",{className:"inline-flex rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:be},be))})]}),ae?null:n.jsx(zt,{message:"Rapor icin calisan, yil ve ay secmelisiniz."}),F.isLoading?n.jsx($t,{}):null,F.isError?n.jsx(zt,{message:Be(F.error,"Aylik rapor alinamadi.").message}):null,F.data?n.jsxs(n.Fragment,{children:[n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Toplamlar"}),n.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["alan: ",Qe??`#${F.data.employee_id}`," | Dnem: ",ne]}),n.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-5",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"lenen Gn"}),n.jsx("p",{className:"text-lg font-semibold",children:It}),n.jsxs("p",{className:"text-xs text-slate-500",children:["zin: ",pt," | Tatil: ",Rt]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"pheli Oran"}),n.jsx("p",{className:"text-lg font-semibold",children:Qt}),n.jsxs("p",{className:"text-xs text-slate-500",children:[ze," / ",Ye.length," gn"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Filtrelenen Gn"}),n.jsx("p",{className:"text-lg font-semibold",children:ft.length}),n.jsx("p",{className:"text-xs text-slate-500",children:S?`akma: ${Ya(S).label}`:"Tm gnler"})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Vardiya Kayna"}),n.jsx("p",{className:"text-lg font-semibold",children:"SHIFT > WEEKLY > WORK_RULE"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Otomatik ncelik zinciri"})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Saat Dilimi"}),n.jsx("p",{className:"text-lg font-semibold",children:jc}),n.jsx("p",{className:"text-xs text-slate-500",children:"Tm saatler yerel zamanda gsterilir"})]})]}),n.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-7",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam alma"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:F.data.totals.worked_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Plan st Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:F.data.totals.plan_overtime_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yasal Fazla Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:F.data.totals.legal_extra_work_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yasal Fazla Mesai"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:F.data.totals.legal_overtime_minutes})}),n.jsxs("p",{className:"text-xs text-slate-500",children:[at," gn"]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Eksik Gn"}),n.jsx("p",{className:"text-lg font-semibold",children:F.data.totals.incomplete_days})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"pheli Gn"}),n.jsx("p",{className:"text-lg font-semibold",children:ze})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Eksik Sre"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:Ot})})]})]})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Compliance (TR Is Kanunu)"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Net Calisma"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:F.data.worked_minutes_net})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yillik Fazla Mesai Kullanim"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:F.data.annual_overtime_used_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yillik Kalan Fazla Mesai"}),n.jsx("p",{className:"text-lg font-semibold",children:n.jsx($e,{minutes:F.data.annual_overtime_remaining_minutes})})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yillik Limit Durumu"}),n.jsx("p",{className:`text-sm font-semibold ${F.data.annual_overtime_cap_exceeded?"text-rose-700":"text-emerald-700"}`,children:F.data.annual_overtime_cap_exceeded?"Limit Asildi":"Limit Icinde"})]})]}),n.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Flag aciklamalari"}),n.jsx("ul",{className:"mt-2 space-y-1 text-xs text-slate-600",children:V3().map(be=>n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",title:Ya(be).description,children:Ya(be).label})," ","(",be,"): ",Ya(be).description]},be))})]})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Cakisma Analizi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Vardiya, haftalik kural ve event siralamasi arasinda tutarsiz gorunen gunlerin ozeti."}),S?n.jsx("button",{type:"button",onClick:()=>w(null),className:"mt-2 rounded-lg border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 hover:bg-slate-100",children:"Cakisma filtresini temizle"}):null,n.jsx("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:Se.map(be=>n.jsxs("button",{type:"button",onClick:()=>{w(et=>et===be.code?null:be.code),_(!0)},className:`rounded-lg border px-3 py-2 text-left transition ${S===be.code?"border-brand-500 bg-brand-50":"border-slate-200 bg-slate-50 hover:border-slate-300"}`,children:[n.jsx("p",{className:"text-xs text-slate-500",title:Ya(be.code).description,children:Ya(be.code).label}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:be.count})]},be.code))})]}),ft.length===0?n.jsx(Ie,{children:n.jsx("p",{className:"text-sm text-slate-600",children:"Secilen filtreye uygun gunluk kayit bulunamadi."})}):n.jsxs(Ie,{children:[n.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Gsterilen satr: ",ft.length," / ",Ye.length]}),n.jsx("p",{className:"text-xs text-slate-500",children:"pucu: satra gre renk tonu kayt riskini gsterir (krmz: eksik, amber: pheli)."})]}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[1220px] text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Tarih"}),n.jsx("th",{className:"py-2",children:"Gn"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Giris"}),n.jsx("th",{className:"py-2",children:"Cikis"}),n.jsx("th",{className:"py-2",children:"Calisma"}),n.jsx("th",{className:"py-2",children:"Plan Ustu"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Sure"}),n.jsx("th",{className:"py-2",children:"Yasal Fazla Mesai"}),n.jsx("th",{className:"py-2",children:"Eksik Sure"}),n.jsx("th",{className:"py-2",children:"Kural Kaynagi"}),n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Izin"}),n.jsx("th",{className:"py-2",children:"Supheli Neden"}),n.jsx("th",{className:"py-2",children:"Aksiyon"})]})}),n.jsx("tbody",{children:ft.map(be=>{const et=Nf(be),lt=et.length>0,Nt=pz(et),Vt=Ve.get(be.date),Dt=Cv(Vt),Xt=be.flags.includes("MANUAL_OVERRIDE")||be.flags.includes("MANUAL_EVENT")||!!Vt,Bn=Dt.status!=="NORMAL",Pt=gz(be,lt);return n.jsxs("tr",{className:`border-t border-slate-100 ${Pt}`,children:[n.jsx("td",{className:"py-2 font-medium text-slate-800",children:be.date}),n.jsx("td",{className:"py-2 text-xs uppercase text-slate-600",children:xz(be.date)}),n.jsxs("td",{className:"py-2",children:[n.jsx(cr,{value:be.status}),Xt?n.jsx("span",{className:"ml-2 inline-flex rounded-full bg-indigo-100 px-2 py-1 text-[11px] font-semibold text-indigo-700",children:"MANUEL"}):null,Bn?n.jsx("span",{className:"ml-2 inline-flex rounded-full bg-cyan-100 px-2 py-1 text-[11px] font-semibold text-cyan-700",children:hz[Dt.status]}):null,n.jsx("span",{className:"ml-2",children:n.jsx(A_,{suspicious:lt,tooltip:Nt})})]}),n.jsx("td",{className:"py-2",title:be.in??void 0,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:Ev(be.in)}),n.jsx("span",{className:"text-[11px] text-slate-500",children:Tv(be.in)})]})}),n.jsx("td",{className:"py-2",title:be.out??void 0,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:Ev(be.out)}),n.jsx("span",{className:"text-[11px] text-slate-500",children:Tv(be.out)})]})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:be.worked_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:be.plan_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:be.legal_extra_work_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:be.legal_overtime_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:be.missing_minutes??0})}),n.jsx("td",{className:"py-2",children:n.jsx("span",{className:"inline-flex rounded-full bg-slate-100 px-2 py-1 text-[11px] font-semibold text-slate-700",title:`Oncelik: Vardiya > Haftalik > Temel | Plan: ${be.applied_planned_minutes} dk | Mola: ${be.applied_break_minutes} dk`,children:fz[be.rule_source]})}),n.jsx("td",{className:"py-2",children:be.shift_name??"-"}),n.jsx("td",{className:"py-2",children:be.leave_type??"-"}),n.jsx("td",{className:"py-2",children:n.jsx(M_,{reasons:et})}),n.jsx("td",{className:"py-2",children:n.jsx("button",{type:"button",onClick:()=>_t(be),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Manuel Duzelt"})})]},be.date)})})]})})]})]}):null,n.jsx(_i,{open:T,title:R?`${R} - Manuel Duzeltme`:"Manuel Duzeltme",onClose:()=>E(!1),placement:"right",maxWidthClass:"max-w-2xl",children:n.jsxs("form",{onSubmit:rt,className:"space-y-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Tarih",n.jsx("input",{type:"date",value:R,onChange:be=>B(be.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gun Durumu",n.jsxs("select",{value:ee,onChange:be=>X(be.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"NORMAL",children:"Normal"}),n.jsx("option",{value:"IZINLI",children:"Izinli"}),n.jsx("option",{value:"RESMI_TATIL",children:"Resmi Tatil"}),n.jsx("option",{value:"CALISMADI",children:"Calismadi"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Kural Kaynagi",n.jsxs("select",{value:P,onChange:be=>{const et=be.target.value;te(et),et!=="SHIFT"&&je("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"AUTO",children:ed.AUTO}),n.jsx("option",{value:"SHIFT",children:ed.SHIFT}),n.jsx("option",{value:"WEEKLY",children:ed.WEEKLY}),n.jsx("option",{value:"WORK_RULE",children:ed.WORK_RULE})]})]}),P==="SHIFT"?n.jsxs("label",{className:"text-sm text-slate-700",children:["Kural Vardiyasi",n.jsxs("select",{value:oe,onChange:be=>je(be.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Vardiya seciniz"}),(pe.data??[]).map(be=>n.jsxs("option",{value:be.id,children:[be.name," (",be.start_time_local," - ",be.end_time_local,")"]},be.id))]})]}):null,n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Giris Saati",n.jsx("input",{type:"time",value:A,onChange:be=>z(be.target.value),disabled:ee!=="NORMAL",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Cikis Saati",n.jsx("input",{type:"time",value:Z,onChange:be=>I(be.target.value),disabled:ee!=="NORMAL",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),ee==="NORMAL"?n.jsx("p",{className:"text-xs text-slate-500",children:"Uyari: Cikis saati giris saatinden kucuk olamaz."}):n.jsx("p",{className:"text-xs text-slate-500",children:"Bu secim gunu calisilmadi olarak isaretler; giris/cikis saatleri devre disi kalir."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gerekce / Not (opsiyonel)",n.jsx("input",{type:"text",value:V,onChange:be=>H(be.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Saglik raporu / Sistem arizasi"})]}),Q?n.jsx("p",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-xs font-medium text-amber-800",children:Q}):null,n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"submit",disabled:de.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:de.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Kaydediliyor..."]}):"Kaydet"}),ue?n.jsx("button",{type:"button",onClick:()=>Ee.mutate(ue),disabled:Ee.isPending,className:"btn-danger rounded-lg bg-rose-600 px-4 py-2 text-sm font-semibold text-white hover:bg-rose-700 disabled:opacity-60",children:Ee.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Siliniyor..."]}):"Manuel Kaydi Sil"}):null]})]})})]})}const bz=Xa({full_name:ma().min(2,"Ad soyad en az 2 karakter olmali."),region_id:_d([Kn().int().positive(),Ff()]),department_id:_d([Kn().int().positive(),Ff()]),is_active:Rd()}),_z=[20,35,50,100];function Nz(){const e=Xn(),{pushToast:s}=aa(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState(!0),[S,w]=b.useState(""),[k,O]=b.useState(!1),[T,E]=b.useState(!1),[R,B]=b.useState(""),[A,z]=b.useState(""),[Z,I]=b.useState(35),[V,H]=b.useState(1),[ee,X]=b.useState(null),P=Fe({queryKey:["employees",T,R,A],queryFn:()=>Xs({...T?{include_inactive:!0}:{},...R?{region_id:Number(R)}:{},...A?{department_id:Number(A)}:{}})}),te=Fe({queryKey:["departments"],queryFn:ji}),oe=Fe({queryKey:["regions","employees-page"],queryFn:()=>eo({include_inactive:!0})}),je=Ge({mutationFn:yA,onSuccess:pe=>{o(""),m(""),g(""),_(!0),X(null),O(!1),s({variant:"success",title:"Calisan olusturuldu",description:`${pe.full_name} basariyla eklendi.`}),e.invalidateQueries({queryKey:["employees"]})},onError:pe=>{const Ve=Be(pe,"Calisan olusturulamadi.").message;X(Ve),s({variant:"error",title:"Calisan olusturulamadi",description:Ve})}}),ue=Ge({mutationFn:({employeeId:pe,nextStatus:Ve})=>v_(pe,{is_active:Ve}),onSuccess:pe=>{s({variant:"success",title:pe.is_active?"Calisan arsivden cikarildi":"Calisan arsivlendi",description:`${pe.full_name} icin durum guncellendi.`}),e.invalidateQueries({queryKey:["employees"]})},onError:pe=>{const Ve=Be(pe,"Calisan durumu guncellenemedi.").message;s({variant:"error",title:"Islem basarisiz",description:Ve})}}),ce=pe=>{pe.preventDefault(),X(null);const Ve=d.trim()===""?null:Number(d),Ye=f.trim()===""?null:Number(f),Ot=bz.safeParse({full_name:l,region_id:Ve,department_id:Ye,is_active:v});if(!Ot.success){const ft=Ot.error.issues[0]?.message??"Calisan formunu kontrol edin.";X(ft),s({variant:"error",title:"Form hatasi",description:ft});return}je.mutate(Ot.data)},Q=P.data??[],$=te.data??[],ie=oe.data??[],Ae=new Map($.map(pe=>[pe.id,pe.name])),_e=new Map(ie.map(pe=>[pe.id,pe.name])),D=b.useMemo(()=>{const pe=d?Number(d):null;return pe?$.filter(Ve=>Ve.region_id===pe):$},[$,d]),ae=b.useMemo(()=>{const pe=R?Number(R):null;return pe?$.filter(Ve=>Ve.region_id===pe):$},[$,R]),F=b.useMemo(()=>{const pe=S.trim().toLowerCase();return pe?Q.filter(Ve=>Ve.full_name.toLowerCase().includes(pe)):Q},[Q,S]),me=Math.max(1,Math.ceil(F.length/Z)),de=(V-1)*Z,Ee=b.useMemo(()=>F.slice(de,de+Z),[F,de,Z]),Oe=F.length===0?0:de+1,Qe=F.length===0?0:Math.min(de+Z,F.length);return b.useEffect(()=>{H(1)},[S,T,R,A,Z]),b.useEffect(()=>{H(pe=>Math.min(pe,me))},[me]),P.isLoading||te.isLoading||oe.isLoading?n.jsx($t,{}):P.isError||te.isError||oe.isError?n.jsx(zt,{message:"Calisan verileri alinamadi."}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"Calisanlar",description:"Calisan kayitlarini bolge ve departman bazli yonetin.",action:n.jsx("button",{type:"button",onClick:()=>O(pe=>!pe),className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Yeni Calisan"})}),k?n.jsxs(Ie,{children:[n.jsxs("form",{onSubmit:ce,className:"grid gap-3 md:grid-cols-5",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Ad Soyad",n.jsx("input",{value:l,onChange:pe=>o(pe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Ada Lovelace"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge",n.jsxs("select",{value:d,onChange:pe=>{m(pe.target.value),g("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Atanmamis"}),ie.map(pe=>n.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:f,onChange:pe=>g(pe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Atanmamis"}),D.map(pe=>n.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]}),n.jsxs("label",{className:"flex items-center gap-2 pt-7 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:v,onChange:pe=>_(pe.target.checked)}),"Aktif"]}),n.jsxs("div",{className:"flex gap-2 md:col-span-5",children:[n.jsx("button",{type:"submit",disabled:je.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:je.isPending?"Kaydediliyor...":"Kaydet"}),n.jsx("button",{type:"button",onClick:()=>{O(!1),X(null)},className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),ee?n.jsx("div",{className:"form-validation",children:ee}):null]}):null,n.jsxs(Ie,{children:[n.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-5",children:[n.jsx(As,{value:S,onChange:w,placeholder:"Calisan adina gore ara..."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bolge filtresi",n.jsxs("select",{value:R,onChange:pe=>{B(pe.target.value),z("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tum bolgeler"}),ie.map(pe=>n.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman filtresi",n.jsxs("select",{value:A,onChange:pe=>z(pe.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tum departmanlar"}),ae.map(pe=>n.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:T,onChange:pe=>E(pe.target.checked)}),"Arsivdekileri goster"]})]}),n.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2 text-xs text-slate-600",children:[n.jsxs("p",{children:["Gosterilen satir: ",Oe,"-",Qe," / ",F.length]}),n.jsxs("label",{className:"inline-flex items-center gap-2",children:["Sayfa basi",n.jsx("select",{value:Z,onChange:pe=>I(Number(pe.target.value)),className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-800",children:_z.map(pe=>n.jsx("option",{value:pe,children:pe},pe))})]})]}),n.jsx("div",{className:"list-scroll-area w-full max-w-full overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Calisan ID"}),n.jsx("th",{className:"py-2",children:"Ad Soyad"}),n.jsx("th",{className:"py-2",children:"Bolge"}),n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Islem"})]})}),n.jsx("tbody",{children:Ee.map(pe=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:pe.id}),n.jsx("td",{className:"py-2",children:pe.full_name}),n.jsx("td",{className:"py-2",children:pe.region_name??(pe.region_id?_e.get(pe.region_id):"-")??"-"}),n.jsx("td",{className:"py-2",children:pe.department_id?Ae.get(pe.department_id):"-"}),n.jsx("td",{className:"py-2",children:n.jsx(cr,{value:pe.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(Ys,{to:`/employees/${pe.id}`,onClick:()=>{sessionStorage.setItem("employee-detail-origin","employees"),sessionStorage.setItem("employee-detail-id",String(pe.id))},className:"employee-action-btn employee-action-edit",children:"Duzenle"}),n.jsx("button",{type:"button",disabled:ue.isPending,onClick:()=>{const Ve=!pe.is_active;window.confirm(Ve?`${pe.full_name} arsivden cikarilsin mi?`:`${pe.full_name} arsivlensin mi?`)&&ue.mutate({employeeId:pe.id,nextStatus:Ve})},className:`employee-action-btn ${pe.is_active?"employee-action-archive":"employee-action-restore"}`,children:pe.is_active?"Arsivle":"Arsivden Cikar"})]})})]},pe.id))})]})}),n.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Sayfa ",V," / ",me]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>H(pe=>Math.max(1,pe-1)),disabled:V<=1,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Onceki"}),n.jsx("button",{type:"button",onClick:()=>H(pe=>Math.min(me,pe+1)),disabled:V>=me,className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100 disabled:opacity-50",children:"Sonraki"})]})]}),F.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Arama kriterine uygun calisan bulunamadi."}):null]})]})}const jz=Xa({employee_id:Kn().int().positive(),start_date:ma().min(1),end_date:ma().min(1),type:Zf(["ANNUAL","SICK","UNPAID","EXCUSE","PUBLIC_HOLIDAY"]),status:Zf(["APPROVED","PENDING","REJECTED"]).default("APPROVED"),note:ma().trim().optional()}).refine(e=>e.end_date>=e.start_date,{message:"Biti tarihi balang tarihinden kk olamaz.",path:["end_date"]});function Sz(){const e=Xn(),{pushToast:s}=aa(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState("ANNUAL"),[S,w]=b.useState("APPROVED"),[k,O]=b.useState(""),[T,E]=b.useState(null),[R,B]=b.useState(""),[A,z]=b.useState(String(new Date().getFullYear())),[Z,I]=b.useState(String(new Date().getMonth()+1)),V=Fe({queryKey:["employees"],queryFn:()=>Xs({include_inactive:!0,status:"all"})}),H=b.useMemo(()=>{const ce=Number(R),Q=Number(A),$=Number(Z);return{employee_id:Number.isFinite(ce)&&ce>0?ce:void 0,year:Number.isFinite(Q)&&Q>0?Q:void 0,month:Number.isFinite($)&&$>0?$:void 0}},[R,A,Z]),ee=Fe({queryKey:["leaves",H.employee_id??"all",H.year??"all",H.month??"all"],queryFn:()=>w_(H)}),X=Ge({mutationFn:_3,onSuccess:ce=>{m(""),g(""),_("ANNUAL"),w("APPROVED"),O(""),E(null),s({variant:"success",title:"zin kayd oluturuldu",description:`zin #${ce.id} kaydedildi.`}),e.invalidateQueries({queryKey:["leaves"]})},onError:ce=>{const Q=Be(ce,"zin kayd oluturulamad.");E(Q.message),s({variant:"error",title:"zin oluturulamad",description:Q.message})}}),P=Ge({mutationFn:N3,onSuccess:(ce,Q)=>{s({variant:"success",title:"zin kayd silindi",description:`zin #${Q} silindi.`}),e.invalidateQueries({queryKey:["leaves"]})},onError:ce=>{const Q=Be(ce,"zin silinemedi.");s({variant:"error",title:"zin silinemedi",description:Q.message})}}),te=ce=>{ce.preventDefault(),E(null);const Q=jz.safeParse({employee_id:l,start_date:d,end_date:f,type:v,status:S,note:k});if(!Q.success){const $=Q.error.issues[0]?.message??"zin formunu kontrol edin.";E($),s({variant:"error",title:"Form hatas",description:$});return}X.mutate({...Q.data,note:Q.data.note||null})};if(V.isLoading)return n.jsx($t,{});if(V.isError)return n.jsx(zt,{message:"alan listesi alnamad."});const oe=V.data??[],je=ee.data??[],ue=new Map(oe.map(ce=>[ce.id,ce.full_name]));return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"zin Kaytlar",description:"Yllk izin, rapor ve mazeret kaytlarn ynetin."}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Yeni zin Kayd"}),n.jsxs("form",{onSubmit:te,className:"mt-4 grid gap-3 md:grid-cols-3",children:[n.jsx(Js,{label:"alan",employees:oe,value:l,onChange:o,emptyLabel:"Seiniz",helperText:"Ad-soyad veya ID ile arayn."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang Tarihi",n.jsx("input",{type:"date",value:d,onChange:ce=>m(ce.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti Tarihi",n.jsx("input",{type:"date",value:f,onChange:ce=>g(ce.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["zin Tipi",n.jsxs("select",{value:v,onChange:ce=>_(ce.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"ANNUAL",children:"YILLIK ZN"}),n.jsx("option",{value:"SICK",children:"RAPOR / HASTALIK"}),n.jsx("option",{value:"UNPAID",children:"CRETSZ ZN"}),n.jsx("option",{value:"EXCUSE",children:"MAZERET ZN"}),n.jsx("option",{value:"PUBLIC_HOLIDAY",children:"RESM TATL"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Onay Durumu",n.jsxs("select",{value:S,onChange:ce=>w(ce.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"APPROVED",children:"ONAYLI"}),n.jsx("option",{value:"PENDING",children:"BEKLEMEDE"}),n.jsx("option",{value:"REJECTED",children:"REDDEDLD"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-3",children:["Aklama Notu",n.jsx("textarea",{value:k,onChange:ce=>O(ce.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",rows:3})]}),n.jsx("div",{className:"md:col-span-3",children:n.jsx("button",{type:"submit",disabled:X.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:X.isPending?"Kaydediliyor...":"zin Kaydn Olutur"})})]}),T?n.jsx("div",{className:"form-validation",children:T}):null]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"zin Listesi Filtreleri"}),n.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-3",children:[n.jsx(Js,{label:"alan",employees:oe,value:R,onChange:B,emptyLabel:"Tm",helperText:"alana gre filtreleyin."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yl",n.jsx("input",{value:A,onChange:ce=>z(ce.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",n.jsx("input",{value:Z,onChange:ce=>I(ce.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]})]}),ee.isLoading?n.jsx($t,{}):null,ee.isError?n.jsx(zt,{message:"zin listesi alnamad."}):null,!ee.isLoading&&!ee.isError?n.jsxs(Ie,{children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"zin ID"}),n.jsx("th",{className:"py-2",children:"alan"}),n.jsx("th",{className:"py-2",children:"zin Tipi"}),n.jsx("th",{className:"py-2",children:"Tarih Aral"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"lem"})]})}),n.jsx("tbody",{children:je.map(ce=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:ce.id}),n.jsx("td",{className:"py-2",children:ue.get(ce.employee_id)??ce.employee_id}),n.jsx("td",{className:"py-2",children:ce.type}),n.jsxs("td",{className:"py-2",children:[ce.start_date," - ",ce.end_date]}),n.jsx("td",{className:"py-2",children:n.jsx(cr,{value:ce.status})}),n.jsx("td",{className:"py-2",children:n.jsx("button",{type:"button",onClick:()=>P.mutate(ce.id),className:"btn-danger rounded-lg border border-rose-300 px-3 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50",children:"Sil"})})]},ce.id))})]})}),je.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"zin kayd bulunamad."}):null]}):null]})}const wz=Xa({username:ma().min(1,"Kullanici adi gerekli."),password:ma().min(1,"Sifre gerekli."),mfaCode:ma().optional(),mfaRecoveryCode:ma().optional()});function kz(e){return e.code==="INVALID_CREDENTIALS"?"Giris bilgileri hatali":e.code==="MFA_REQUIRED"?"MFA kodu gerekli":e.code==="INVALID_MFA_CODE"?"MFA kodu gecersiz":e.code==="MFA_SETUP_REQUIRED"?"MFA kurulumu gerekli":e.code==="TOO_MANY_ATTEMPTS"?"Cok fazla deneme":e.code==="INTERNAL_ERROR"?"Sunucu hatasi":"Giris basarisiz"}function Ez(){const e=Jl(),s=ys(),{login:l}=to(),[o,d]=b.useState("admin"),[m,f]=b.useState(""),[g,v]=b.useState(""),[_,S]=b.useState(""),[w,k]=b.useState(null),[O,T]=b.useState(!1),E=b.useMemo(()=>{const B=s.state?.from,A=new URLSearchParams(s.search).get("redirect");return B??A??"/management-console"},[s.search,s.state]),R=async B=>{B.preventDefault(),k(null);const A=wz.safeParse({username:o,password:m,mfaCode:g,mfaRecoveryCode:_});if(!A.success){k({message:A.error.issues[0]?.message??"Form alanlarini kontrol et."});return}T(!0);try{await l(A.data.username,A.data.password,A.data.mfaCode,A.data.mfaRecoveryCode),e(E,{replace:!0})}catch(z){k(Be(z,"Giris basarisiz."))}finally{T(!1)}};return n.jsx("div",{className:"admin-auth-screen flex min-h-screen items-center justify-center px-4",children:n.jsxs("div",{className:"admin-auth-card w-full max-w-md rounded-2xl border border-slate-200 bg-white p-8 shadow-panel",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Admin Giris"}),n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Puantaj yonetim paneline giris yap."}),n.jsxs("form",{onSubmit:R,className:"mt-6 space-y-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Kullanici Adi"}),n.jsx("input",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:o,onChange:B=>d(B.target.value)})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Sifre"}),n.jsx("input",{type:"password",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:m,onChange:B=>f(B.target.value)})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"MFA Kodu (gerekliyse)"}),n.jsx("input",{inputMode:"numeric",pattern:"[0-9]*",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:g,onChange:B=>v(B.target.value),placeholder:"6 haneli kod"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Recovery Kodu (MFA yoksa)"}),n.jsx("input",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none ring-brand-200 focus:border-brand-500 focus:ring",value:_,onChange:B=>S(B.target.value),placeholder:"Ornek: ABCDE-FGHIJ"})]}),w?n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-3 text-sm text-rose-700",children:[n.jsx("p",{className:"font-semibold",children:kz(w)}),n.jsx("p",{className:"mt-1",children:w.message}),w.requestId?n.jsxs("p",{className:"mt-2 font-mono text-xs text-rose-800",children:["request_id: ",w.requestId]}):null]}):null,n.jsx("button",{type:"submit",disabled:O,className:"btn-animated w-full rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:O?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Giris yapiliyor..."]}):"Giris Yap"})]}),n.jsxs("p",{className:"admin-auth-signature mt-5 text-center text-xs tracking-wide text-slate-500",children:[ps.signatureText," | BUILD: ",ps.buildVersion]})]})})}const I_="Europe/Istanbul";function Pa(e){return e?new Intl.DateTimeFormat("tr-TR",{timeZone:I_,dateStyle:"short",timeStyle:"short"}).format(new Date(e)):"-"}function Wf(e){return e?new Intl.DateTimeFormat("tr-TR",{timeZone:I_,dateStyle:"medium"}).format(new Date(e)):"-"}function B_(e){if(!e)return"Veri yok";const s=Date.now()-new Date(e).getTime();if(!Number.isFinite(s))return"-";const l=Math.max(0,Math.round(s/6e4));if(l<1)return"imdi";if(l<60)return`${l} dk nce`;const o=Math.floor(l/60);return o<24?`${o} sa nce`:`${Math.floor(o/24)} gn nce`}function Tz(e){if(e==null||Number.isNaN(e))return"-";const s=Math.max(0,Math.round(e));return`${String(Math.floor(s/60)).padStart(2,"0")}:${String(s%60).padStart(2,"0")}`}function wd(e){return e==="CRITICAL"?"Kritik":e==="WATCH"?"zlemeli":"Normal"}function U_(e){return e==="IN_PROGRESS"?"Aktif vardiya":e==="FINISHED"?"Gn kapand":"Giri yok"}function F_(e){return e==="VERIFIED_HOME"?"Doruland":e==="UNVERIFIED_LOCATION"?"Sapma":"Konum yok"}function Cz(e){return e==="LIVE"?"Canl":e==="STALE"?"Yakn":e==="DORMANT"?"Eski":"Veri yok"}function dc(e){return e==="CRITICAL"||e==="Kritik"?"is-critical":e==="WATCH"||e==="Uyari"?"is-watch":"is-normal"}function zp(e){return e==="CRITICAL"?"Kritik":e==="ATTENTION"?"zlemeli":"Stabil"}function q_(e){return e==="CRITICAL"?"is-critical":e==="ATTENTION"?"is-watch":"is-normal"}function Az(e,s){return e?s==="asc"?"":"":""}function Z_(e){return e==="IN"?"Giri":"k"}function H_(e){return e==="MANUAL"?"Manuel":"Cihaz"}function Mz(e){return e==="admin"?"Ynetim":e==="employee"?"alan":"Belirtilmedi"}function K_(e){return e==="PENDING"?"Bekliyor":e==="SENDING"?"Gnderiliyor":e==="SENT"?"Gnderildi":e==="FAILED"?"Hata":"ptal"}function zz(){const e=new Date,s=e.getFullYear(),l=e.getMonth(),o=new Date(Date.UTC(s,l,1)),d=new Date(Date.UTC(s,l+1,0));return{year:s,month:l+1,start:o.toISOString().slice(0,10),end:d.toISOString().slice(0,10)}}function Oz(e){return e==="indefinite"?"Sresiz":`${e} gn`}function Rz({employeeId:e,open:s,onClose:l}){const o=Xn(),{pushToast:d}=aa(),m=b.useMemo(()=>zz(),[]),[f,g]=b.useState(null),[v,_]=b.useState(""),[S,w]=b.useState(""),[k,O]=b.useState("1"),[T,E]=b.useState("50");b.useEffect(()=>{s||(g(null),_(""),w(""),O("1"),E("50"))},[s]);const R=Fe({queryKey:["management-console-detail",e],queryFn:()=>p3(e),enabled:s&&e!=null}),B=Fe({queryKey:["management-console-detail-events",e,m.start,m.end],queryFn:()=>Nc({employee_id:e,start_date:m.start,end_date:m.end,limit:250}),enabled:s&&e!=null}),A=Fe({queryKey:["management-console-detail-monthly",e,m.year,m.month],queryFn:()=>uc({employee_id:e,year:m.year,month:m.month}),enabled:s&&e!=null}),z=Fe({queryKey:["management-console-detail-notifications",e,m.start,m.end],queryFn:()=>Ep({employee_id:e,start_date:m.start,end_date:m.end,offset:0,limit:6}),enabled:s&&e!=null}),Z=Ge({mutationFn:async()=>{if(!e||!f)throw new Error("Personel seilmedi.");return f.kind==="action"?x3({employee_id:e,action_type:f.actionType,reason:v,note:S,duration_days:k==="indefinite"?void 0:Number(k),indefinite:k==="indefinite"}):f.kind==="override"?g3({employee_id:e,override_score:Math.max(0,Math.min(100,Number(T)||0)),reason:v,note:S,duration_days:k==="indefinite"?void 0:Number(k),indefinite:k==="indefinite"}):y3({employee_id:e,note:S})},onSuccess:P=>{d({variant:"success",title:"Kaydedildi",description:P.message}),g(null),_(""),w(""),O("1"),E("50"),o.invalidateQueries({queryKey:["control-room-overview"]}),o.invalidateQueries({queryKey:["management-console-detail",e]}),o.invalidateQueries({queryKey:["management-console-detail-notifications",e,m.start,m.end]})},onError:P=>{d({variant:"error",title:"lem tamamlanamad",description:P instanceof Error?P.message:"Bilinmeyen hata"})}}),I=R.data,V=I?.employee_state??null,H=Math.max(1,...(I?.risk_history??[]).map(P=>P.value)),ee=b.useMemo(()=>[...B.data??[]].sort((P,te)=>new Date(te.ts_utc).getTime()-new Date(P.ts_utc).getTime()).slice(0,12),[B.data]),X=b.useMemo(()=>(A.data?.days??[]).filter(P=>P.overtime_minutes>0||P.plan_overtime_minutes>0||P.legal_overtime_minutes>0||P.legal_extra_work_minutes>0).sort((P,te)=>te.date.localeCompare(P.date)).slice(0,8),[A.data?.days]);return n.jsx(_i,{open:s,title:V?`${V.employee.full_name}  Operasyon dosyas`:"Operasyon dosyas",onClose:l,placement:"center",maxWidthClass:"max-w-none",panelClassName:"mc-modal__panel--detail",children:R.isLoading&&!I?n.jsx($t,{label:"Personel dosyas ykleniyor..."}):R.isError||!I||!V?n.jsx(zt,{message:"Personel detay bilgisi alnamad."}):n.jsxs("div",{className:"mc-detail",children:[n.jsxs("header",{className:"mc-detail__hero",children:[n.jsxs("div",{className:"mc-detail__identity",children:[n.jsx("p",{className:"mc-kicker",children:"PERSONEL DOSYASI"}),n.jsx("h3",{children:V.employee.full_name}),n.jsxs("p",{children:[V.department_name??"Departman yok","  ",V.shift_name??"Vardiya tanm yok"," "," ",U_(V.today_status)]}),n.jsxs("div",{className:"mc-detail__hero-tags",children:[n.jsx("span",{className:`mc-status-pill ${dc(V.risk_status)}`,children:wd(V.risk_status)}),n.jsx("span",{className:"mc-chip",children:V.shift_window_label??"Plan penceresi yok"}),n.jsx("span",{className:"mc-chip",children:V.location_label??"Konum bilgisi yok"})]})]}),n.jsxs("div",{className:`mc-detail__score ${dc(V.risk_status)}`,children:[n.jsx("strong",{children:V.risk_score}),n.jsx("span",{children:wd(V.risk_status)})]})]}),n.jsxs("section",{className:"mc-detail__summary-grid",children:[n.jsxs("article",{className:"mc-detail__stat",children:[n.jsx("span",{children:"Son giri"}),n.jsx("strong",{children:Pa(V.last_checkin_utc)})]}),n.jsxs("article",{className:"mc-detail__stat",children:[n.jsx("span",{children:"Son k"}),n.jsx("strong",{children:Pa(V.last_checkout_utc)})]}),n.jsxs("article",{className:"mc-detail__stat",children:[n.jsx("span",{children:"Bugnk sre"}),n.jsx("strong",{children:n.jsx($e,{minutes:V.worked_today_minutes})})]}),n.jsxs("article",{className:"mc-detail__stat",children:[n.jsx("span",{children:"Haftalk toplam"}),n.jsx("strong",{children:n.jsx($e,{minutes:V.weekly_total_minutes})})]}),n.jsxs("article",{className:"mc-detail__stat",children:[n.jsx("span",{children:"Son aktivite"}),n.jsx("strong",{children:B_(V.last_activity_utc)})]}),n.jsxs("article",{className:"mc-detail__stat",children:[n.jsx("span",{children:"Konum / IP"}),n.jsx("strong",{children:V.location_label??"-"}),n.jsx("small",{children:V.recent_ip??"IP yok"})]})]}),n.jsxs("div",{className:"mc-detail__content",children:[n.jsxs("main",{className:"mc-detail__primary",children:[n.jsxs("section",{className:"mc-detail__section",children:[n.jsxs("div",{className:"mc-detail__section-head",children:[n.jsxs("div",{children:[n.jsx("h4",{children:"Giri / k zaman izelgesi"}),n.jsx("p",{children:"Bu aya ait son olaylar ve kaynak bilgileri"})]}),n.jsx(Ys,{to:`/attendance-events?employee_id=${V.employee.id}&start_date=${m.start}&end_date=${m.end}`,className:"mc-button mc-button--ghost",children:"Manuel dzeltme"})]}),n.jsx("div",{className:"mc-timeline",children:B.isLoading?n.jsx("div",{className:"mc-empty-state",children:"Zaman izelgesi ykleniyor..."}):ee.length?ee.map(P=>n.jsxs("article",{className:"mc-timeline__item",children:[n.jsx("div",{className:"mc-timeline__icon",children:P.type==="IN"?"G":""}),n.jsxs("div",{className:"mc-timeline__body",children:[n.jsx("strong",{children:Z_(P.type)}),n.jsx("p",{children:Pa(P.ts_utc)})]}),n.jsxs("div",{className:"mc-timeline__meta",children:[n.jsx("span",{children:H_(P.source)}),n.jsx("span",{children:P.note??"Not yok"})]})]},P.id)):n.jsx("div",{className:"mc-empty-state",children:"Bu dnem iin giri-k kayd bulunmuyor."})})]}),n.jsxs("section",{className:"mc-detail__section",children:[n.jsx("div",{className:"mc-detail__section-head",children:n.jsxs("div",{children:[n.jsx("h4",{children:"Fazla mesai gemii"}),n.jsx("p",{children:"Ay iindeki mesai am grlen gnler"})]})}),n.jsx("div",{className:"mc-detail__list",children:A.isLoading?n.jsx("div",{className:"mc-empty-state",children:"Mesai zeti ykleniyor..."}):X.length?X.map(P=>n.jsxs("article",{className:"mc-detail__list-row",children:[n.jsxs("div",{children:[n.jsx("strong",{children:Wf(P.date)}),n.jsxs("p",{children:["Giri: ",P.in??"-","  k: ",P.out??"-"]})]}),n.jsxs("div",{className:"mc-detail__list-side",children:[n.jsx("strong",{children:n.jsx($e,{minutes:P.overtime_minutes})}),n.jsx("span",{children:"Toplam mesai"})]})]},P.date)):n.jsx("div",{className:"mc-empty-state",children:"Bu ay kaytl fazla mesai yok."})})]}),n.jsxs("section",{className:"mc-detail__section",children:[n.jsx("div",{className:"mc-detail__section-head",children:n.jsxs("div",{children:[n.jsx("h4",{children:"nceleme izi"}),n.jsx("p",{children:"Son ynetim ve sistem kaytlar"})]})}),n.jsx("div",{className:"mc-detail__list",children:I.recent_audit_entries.length?I.recent_audit_entries.slice(0,8).map(P=>n.jsxs("article",{className:"mc-detail__list-row",children:[n.jsxs("div",{children:[n.jsx("strong",{children:P.label}),n.jsx("p",{children:Pa(P.ts_utc)})]}),n.jsxs("div",{className:"mc-detail__list-side",children:[n.jsx("strong",{children:P.actor_id}),n.jsx("span",{children:P.ip??"IP yok"})]})]},P.audit_id)):n.jsx("div",{className:"mc-empty-state",children:"Audit kayd bulunmuyor."})})]})]}),n.jsxs("aside",{className:"mc-detail__secondary",children:[n.jsxs("section",{className:"mc-detail__section",children:[n.jsx("div",{className:"mc-detail__section-head",children:n.jsxs("div",{children:[n.jsx("h4",{children:"Risk gemii"}),n.jsx("p",{children:"Haftalk risk deiimi ve younluk trendi"})]})}),n.jsx("div",{className:"mc-risk-history",children:(I.risk_history??[]).length?I.risk_history.map(P=>n.jsxs("article",{className:"mc-risk-history__item",children:[n.jsx("span",{children:P.label}),n.jsx("div",{className:"mc-risk-history__bar",children:n.jsx("div",{className:"mc-risk-history__fill",style:{height:`${Math.max(12,P.value/H*100)}%`}})}),n.jsx("strong",{children:P.value.toFixed(1)})]},P.label)):n.jsx("div",{className:"mc-empty-state",children:"Risk gemii verisi bulunmuyor."})})]}),n.jsxs("section",{className:"mc-detail__section",children:[n.jsx("div",{className:"mc-detail__section-head",children:n.jsxs("div",{children:[n.jsx("h4",{children:"Risk faktrleri"}),n.jsx("p",{children:"Skoru etkileyen son sinyaller"})]})}),n.jsx("div",{className:"mc-detail__list",children:V.risk_factors.length?V.risk_factors.map(P=>n.jsxs("article",{className:"mc-detail__list-row",children:[n.jsxs("div",{children:[n.jsx("strong",{children:P.label}),n.jsx("p",{children:P.description})]}),n.jsxs("div",{className:"mc-detail__list-side",children:[n.jsxs("strong",{children:["+",P.impact_score]}),n.jsx("span",{children:P.value})]})]},P.code)):n.jsx("div",{className:"mc-empty-state",children:"Aktif risk faktr bulunmuyor."})})]}),n.jsxs("section",{className:"mc-detail__section",children:[n.jsx("div",{className:"mc-detail__section-head",children:n.jsxs("div",{children:[n.jsx("h4",{children:"Notlar ve nlemler"}),n.jsx("p",{children:"Son ynetim mdahaleleri ve aklamalar"})]})}),n.jsxs("div",{className:"mc-detail__list",children:[I.recent_measures.map((P,te)=>n.jsxs("article",{className:"mc-detail__list-row",children:[n.jsxs("div",{children:[n.jsx("strong",{children:P.label}),n.jsx("p",{children:P.reason})]}),n.jsxs("div",{className:"mc-detail__list-side",children:[n.jsx("strong",{children:Pa(P.created_at)}),n.jsx("span",{children:P.duration_days?`${P.duration_days} gn`:"Sresiz"})]})]},`${P.created_at}-${te}`)),I.recent_notes.map((P,te)=>n.jsxs("article",{className:"mc-detail__list-row",children:[n.jsxs("div",{children:[n.jsx("strong",{children:P.created_by}),n.jsx("p",{children:P.note})]}),n.jsxs("div",{className:"mc-detail__list-side",children:[n.jsx("strong",{children:Pa(P.created_at)}),n.jsx("span",{children:"Not"})]})]},`${P.created_at}-${te}`)),!I.recent_measures.length&&!I.recent_notes.length?n.jsx("div",{className:"mc-empty-state",children:"Kaytl not veya nlem bulunmuyor."}):null]})]}),n.jsxs("section",{className:"mc-detail__section",children:[n.jsx("div",{className:"mc-detail__section-head",children:n.jsxs("div",{children:[n.jsx("h4",{children:"Son bildirimler"}),n.jsx("p",{children:"Bu aya ait son notification kaytlar"})]})}),n.jsx("div",{className:"mc-detail__list",children:z.isLoading?n.jsx("div",{className:"mc-empty-state",children:"Bildirimler ykleniyor..."}):z.data?.items.length?z.data.items.map(P=>n.jsxs("article",{className:"mc-detail__list-row",children:[n.jsxs("div",{children:[n.jsx("strong",{children:P.title??P.notification_type??"Bildirim"}),n.jsx("p",{children:P.description??"Aklama bulunmuyor."})]}),n.jsxs("div",{className:"mc-detail__list-side",children:[n.jsx("strong",{children:K_(P.status)}),n.jsx("span",{children:Pa(P.created_at)})]})]},P.id)):n.jsx("div",{className:"mc-empty-state",children:"Bu dnem iin bildirim kayd bulunmuyor."})})]}),n.jsxs("section",{className:"mc-detail__section mc-detail__section--action",children:[n.jsx("div",{className:"mc-detail__section-head",children:n.jsxs("div",{children:[n.jsx("h4",{children:"Mdahale"}),n.jsx("p",{children:"Kontroll ilem, inceleme ve not ak"})]})}),n.jsxs("div",{className:"mc-action-strip",children:[n.jsx("button",{type:"button",className:"mc-button mc-button--primary",onClick:()=>g({kind:"action",actionType:"REVIEW"}),children:"ncelemeye al"}),n.jsx("button",{type:"button",className:"mc-button mc-button--secondary",onClick:()=>g({kind:"action",actionType:"DISABLE_TEMP"}),children:"Geici devre d"}),n.jsx("button",{type:"button",className:"mc-button mc-button--danger",onClick:()=>g({kind:"action",actionType:"SUSPEND"}),children:"Askya al"}),n.jsx("button",{type:"button",className:"mc-button mc-button--ghost",onClick:()=>g({kind:"override"}),children:"Risk override"}),n.jsx("button",{type:"button",className:"mc-button mc-button--ghost",onClick:()=>g({kind:"note"}),children:"Not ekle"})]}),f?n.jsxs("div",{className:"mc-action-composer",children:[f.kind!=="note"?n.jsxs(n.Fragment,{children:[n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Sebep"}),n.jsx("input",{value:v,onChange:P=>_(P.target.value),placeholder:"lem gerekesi"})]}),f.kind==="override"?n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Risk skoru"}),n.jsx("input",{type:"number",min:0,max:100,value:T,onChange:P=>E(P.target.value)})]}):null,n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Sre"}),n.jsxs("select",{value:k,onChange:P=>O(P.target.value),children:[n.jsx("option",{value:"1",children:"1 gn"}),n.jsx("option",{value:"3",children:"3 gn"}),n.jsx("option",{value:"7",children:"7 gn"}),n.jsx("option",{value:"indefinite",children:"Sresiz"})]})]})]}):null,n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:f.kind==="note"?"Not":"lem notu"}),n.jsx("textarea",{value:S,onChange:P=>w(P.target.value),rows:4})]}),n.jsxs("div",{className:"mc-action-composer__footer",children:[n.jsxs("span",{children:["Sre: ",f.kind==="note"?"Anlk kayt":Oz(k)]}),n.jsxs("div",{className:"mc-action-composer__actions",children:[n.jsx("button",{type:"button",className:"mc-button mc-button--ghost",onClick:()=>g(null),children:"Vazge"}),n.jsx("button",{type:"button",className:"mc-button mc-button--primary",disabled:Z.isPending||!S.trim()||f.kind!=="note"&&!v.trim(),onClick:()=>{Z.mutateAsync()},children:Z.isPending?"Kaydediliyor...":"Kaydet"})]})]})]}):null]})]})]})]})})}const Dz="Europe/Istanbul",Lz=50,Pz=[25,50,100],jf=400,Iz=[{value:"risk_score",label:"Risk skoru"},{value:"last_activity",label:"Son aktivite"},{value:"last_checkin",label:"Son giri"},{value:"last_checkout",label:"Son k"},{value:"worked_today",label:"Bugnk sre"},{value:"weekly_total",label:"Haftalk sre"},{value:"violation_count_7d",label:"hlal says"},{value:"employee_name",label:"Personel ad"},{value:"department_name",label:"Departman"}];function Sf(e=0){const s=new Date;return s.setDate(s.getDate()+e),new Intl.DateTimeFormat("en-CA",{timeZone:Dz,year:"numeric",month:"2-digit",day:"2-digit"}).format(s)}function wf(){return{q:"",region_id:"",department_id:"",start_date:Sf(-6),end_date:Sf(0),map_date:Sf(0),include_inactive:!1,risk_min:"",risk_max:"",risk_status:"",sort_by:"risk_score",sort_dir:"desc",limit:Lz}}function Hl(e){const s=e.trim();if(!s)return;const l=Number(s);return Number.isFinite(l)?l:void 0}function kf(e,s){return{q:e.q.trim()||void 0,region_id:Hl(e.region_id),department_id:Hl(e.department_id),start_date:e.start_date||void 0,end_date:e.end_date||void 0,map_date:e.map_date||void 0,include_inactive:e.include_inactive,risk_min:Hl(e.risk_min),risk_max:Hl(e.risk_max),risk_status:e.risk_status||void 0,sort_by:e.sort_by,sort_dir:e.sort_dir,limit:e.limit,offset:(s-1)*e.limit}}function Bz({filterForm:e,regions:s,departments:l,activeFilterEntries:o,onChange:d,onApply:m,onReset:f}){return n.jsxs("section",{className:"mc-panel",children:[n.jsx("div",{className:"mc-panel__head",children:n.jsxs("div",{children:[n.jsx("p",{className:"mc-kicker",children:"FLTRE VE KAPSAM"}),n.jsx("h3",{className:"mc-panel__title",children:"Analiz alann ve grnm davrann ynetin"})]})}),n.jsxs("div",{className:"mc-filter-grid",children:[n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Personel / ID"}),n.jsx("input",{value:e.q,onChange:g=>d({...e,q:g.target.value}),placeholder:"Ad, soyad veya #ID"})]}),n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Blge"}),n.jsxs("select",{value:e.region_id,onChange:g=>d({...e,region_id:g.target.value}),children:[n.jsx("option",{value:"",children:"Tm blgeler"}),s.map(g=>n.jsx("option",{value:g.id,children:g.name},g.id))]})]}),n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Departman"}),n.jsxs("select",{value:e.department_id,onChange:g=>d({...e,department_id:g.target.value}),children:[n.jsx("option",{value:"",children:"Tm departmanlar"}),l.map(g=>n.jsx("option",{value:g.id,children:g.name},g.id))]})]}),n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Balang tarihi"}),n.jsx("input",{type:"date",value:e.start_date,onChange:g=>d({...e,start_date:g.target.value})})]}),n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Biti tarihi"}),n.jsx("input",{type:"date",value:e.end_date,min:e.start_date||void 0,onChange:g=>d({...e,end_date:g.target.value})})]}),n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Harita gn"}),n.jsx("input",{type:"date",value:e.map_date,onChange:g=>d({...e,map_date:g.target.value})})]}),n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Risk alt snr"}),n.jsx("input",{type:"number",min:0,max:100,value:e.risk_min,onChange:g=>d({...e,risk_min:g.target.value}),placeholder:"0"})]}),n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Risk st snr"}),n.jsx("input",{type:"number",min:0,max:100,value:e.risk_max,onChange:g=>d({...e,risk_max:g.target.value}),placeholder:"100"})]}),n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Risk seviyesi"}),n.jsxs("select",{value:e.risk_status,onChange:g=>d({...e,risk_status:g.target.value}),children:[n.jsx("option",{value:"",children:"Tm seviyeler"}),n.jsx("option",{value:"NORMAL",children:"Normal"}),n.jsx("option",{value:"WATCH",children:"zlemeli"}),n.jsx("option",{value:"CRITICAL",children:"Kritik"})]})]}),n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Sralama"}),n.jsx("select",{value:e.sort_by,onChange:g=>d({...e,sort_by:g.target.value}),children:Iz.map(g=>n.jsx("option",{value:g.value,children:g.label},g.value))})]}),n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Yn"}),n.jsxs("select",{value:e.sort_dir,onChange:g=>d({...e,sort_dir:g.target.value}),children:[n.jsx("option",{value:"desc",children:"Azalan"}),n.jsx("option",{value:"asc",children:"Artan"})]})]}),n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Sayfa limiti"}),n.jsx("select",{value:e.limit,onChange:g=>d({...e,limit:Number(g.target.value)}),children:Pz.map(g=>n.jsx("option",{value:g,children:g},g))})]})]}),n.jsxs("div",{className:"mc-filter-footer",children:[n.jsxs("label",{className:"mc-check",children:[n.jsx("input",{type:"checkbox",checked:e.include_inactive,onChange:g=>d({...e,include_inactive:g.target.checked})}),n.jsx("span",{children:"Pasif personeli dahil et"})]}),n.jsxs("div",{className:"mc-filter-footer__actions",children:[n.jsx("button",{type:"button",className:"mc-button mc-button--ghost",onClick:f,children:"Sfrla"}),n.jsx("button",{type:"button",className:"mc-button mc-button--primary",onClick:m,children:"Uygula"})]})]}),o.length?n.jsx("div",{className:"mc-chip-row","aria-label":"Aktif filtreler",children:o.map(g=>n.jsx("span",{className:"mc-chip",children:g},g))}):null]})}function Uz({generatedAtUtc:e,systemStatus:s,onRefresh:l}){return n.jsxs("div",{className:"mc-header",children:[n.jsx(Wn,{title:"Ana Panel",description:"Ynetim Konsolu. Operasyon ak, risk analizi, harita izleme ve mdahale aralar tek kontrol yzeyinde birleir.",action:n.jsxs("div",{className:"mc-header__actions",children:[n.jsxs("div",{className:`mc-status-pill ${q_(s)}`,children:["Sistem durumu: ",zp(s)]}),n.jsx(Ys,{to:"/notifications",className:"mc-button mc-button--ghost",children:"Bildirimler"}),n.jsx(Ys,{to:"/attendance-events",className:"mc-button mc-button--ghost",children:"Yoklama kaytlar"}),n.jsx("button",{type:"button",className:"mc-button mc-button--secondary",onClick:l,children:"Yenile"})]})}),n.jsxs("section",{className:"mc-hero",children:[n.jsxs("div",{className:"mc-hero__copy",children:[n.jsx("p",{className:"mc-kicker",children:"YNETM KONSOLU"}),n.jsx("h2",{className:"mc-hero__title",children:"Tm organizasyonun canl ak burada toplanr."}),n.jsx("p",{className:"mc-hero__text",children:"Operasyonel Gvenlik Matrisi, risk younluu, personel hareketleri, bildirim ak ve mdahale aralar tek merkezde birlikte alr."})]}),n.jsxs("div",{className:"mc-hero__meta",children:[n.jsx("span",{children:"Son gncelleme"}),n.jsx("strong",{children:Pa(e)}),n.jsx("small",{children:"Kontrol katman evrim ii ve izleme aktif"})]})]})]})}function Hr({label:e,value:s,meta:l,emphasis:o=!1}){return n.jsxs("article",{className:`mc-kpi ${o?"mc-kpi--emphasis":""}`,children:[n.jsx("span",{className:"mc-kpi__label",children:e}),n.jsx("strong",{className:"mc-kpi__value",children:s}),n.jsx("span",{className:"mc-kpi__meta",children:l})]})}function Fz({summary:e}){return n.jsxs("section",{className:"mc-kpi-grid","aria-label":"Genel bak metrikleri",children:[n.jsx(Hr,{label:"Toplam aktif alan",value:e.active_employees,meta:`${e.total_employees} kayt iinden`,emphasis:!0}),n.jsx(Hr,{label:"Kritik riskli alan",value:e.critical_count,meta:"Anlk kritik eik"}),n.jsx(Hr,{label:"zlemeli alan",value:e.watch_count,meta:"Yakn takip gereken"}),n.jsx(Hr,{label:"Ortalama risk skoru",value:e.average_risk_score.toFixed(1),meta:"Filtrelenen evren ortalamas"}),n.jsx(Hr,{label:"Aktif mesai says",value:e.active_overtime_count,meta:"Planl sreyi aan ak vardiya"}),n.jsx(Hr,{label:"Gnlk ihlal says",value:e.daily_violation_count,meta:"Bugn oluan toplam ihlal"}),n.jsx(Hr,{label:"Sistem durumu",value:zp(e.system_status),meta:`Youn pencere: ${e.most_common_violation_window??"-"}`})]})}function qz(e,s){const[l,o]=b.useState(e);return b.useEffect(()=>{const d=window.setTimeout(()=>{o(e)},s);return()=>{window.clearTimeout(d)}},[s,e]),l}function Kr(e){return e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;")}function Zz(e){return e>=15?0:e>=13?.004:e>=11?.008:e>=9?.018:.03}function Hz(e,s){return e.eventType==="IN"?{radius:s?9:7,color:"#0f4c81",fillColor:"#2563eb",fillOpacity:.9,weight:s?3:2}:{radius:s?9:7,color:"#8a5a00",fillColor:"#d97706",fillOpacity:.9,weight:s?3:2}}function Kz(e){return ga.divIcon({className:"mc-map__cluster",html:`<span>${e}</span>`,iconSize:[36,36],iconAnchor:[18,18]})}function Gz(e,s){const l=[`<strong>${Kr(e.employeeName)}</strong>`,`<div>${Kr(Z_(e.eventType))} &bull; ${Kr(Pa(e.tsUtc))}</div>`,`<div>${Kr(e.departmentName??"Departman yok")}</div>`,`<div>Konum durumu: ${Kr(F_(e.locationStatus))}</div>`];return s&&(l.push(`<div>Cihaz: #${e.deviceId}</div>`),l.push(`<div>Kaynak: ${Kr(H_(e.source))}</div>`),l.push(`<div>Koordinat: ${e.lat.toFixed(5)}, ${e.lon.toFixed(5)}</div>`),e.accuracyM!=null&&l.push(`<div>Doruluk: ${Math.round(e.accuracyM)} m</div>`),e.note&&l.push(`<div>Not: ${Kr(e.note)}</div>`)),`<div class="mc-map__popup">${l.join("")}</div>`}function $z({events:e,focusedEventId:s=null,showTechnicalDetails:l,onSelectEmployee:o}){const d=b.useRef(null),m=b.useRef(null),f=b.useRef(null),g=b.useRef(new Map),v=b.useRef(!1),[_,S]=b.useState(0);b.useEffect(()=>{if(!d.current||m.current)return;const k=ga.map(d.current,{center:[39.92077,32.85411],zoom:6,zoomControl:!0,attributionControl:!1});return ga.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(k),k.on("moveend zoomend",()=>{S(O=>O+1)}),m.current=k,f.current=ga.layerGroup().addTo(k),S(O=>O+1),()=>{k.remove(),m.current=null,f.current=null,g.current.clear(),v.current=!1}},[]);const w=b.useMemo(()=>{if(!m.current)return[];const k=m.current,O=k.getBounds().pad(.25),T=k.getZoom(),E=e.filter(A=>O.contains([A.lat,A.lon])),R=Zz(T);if(R<=0)return E.map(A=>({kind:"single",event:A}));const B=new Map;for(const A of E){const z=Math.floor(A.lat/R),Z=Math.floor(A.lon/R),I=`${z}:${Z}`;B.set(I,[...B.get(I)??[],A])}return[...B.values()].map(A=>{if(A.length===1)return{kind:"single",event:A[0]};const z=A.reduce((I,V)=>I+V.lat,0)/A.length,Z=A.reduce((I,V)=>I+V.lon,0)/A.length;return{kind:"cluster",eventIds:A.map(I=>I.id),count:A.length,centerLat:z,centerLon:Z}})},[e,_]);return b.useEffect(()=>{if(!m.current||!f.current)return;const k=m.current,O=f.current;if(O.clearLayers(),g.current.clear(),!e.length){v.current=!1;return}const T=[];w.forEach(E=>{if(E.kind==="single"){const B=ga.circleMarker([E.event.lat,E.event.lon],Hz(E.event,s===E.event.id)).bindPopup(Gz(E.event,l)).on("click",()=>o(E.event.employeeId)).addTo(O);g.current.set(E.event.id,B),T.push([E.event.lat,E.event.lon]);return}const R=ga.marker([E.centerLat,E.centerLon],{icon:Kz(E.count)}).bindPopup(`<div class="mc-map__popup"><strong>${E.count} kayt</strong><div>Kme grnm</div></div>`).on("click",()=>{k.setView([E.centerLat,E.centerLon],Math.min(k.getZoom()+2,16),{animate:!0})}).addTo(O);E.eventIds.forEach(B=>g.current.set(B,R)),T.push([E.centerLat,E.centerLon])}),!v.current&&T.length&&(T.length===1?k.setView(T[0],14,{animate:!0}):k.fitBounds(ga.latLngBounds(T),{padding:[28,28],maxZoom:14,animate:!0}),v.current=!0),window.setTimeout(()=>k.invalidateSize(),80)},[w,e.length,s,o,l]),b.useEffect(()=>{if(!s||!m.current)return;const k=g.current.get(s);if(k){if("getLatLng"in k){const O=k;m.current.setView(O.getLatLng(),Math.max(m.current.getZoom(),14),{animate:!0})}"openPopup"in k&&k.openPopup()}},[s]),n.jsx("div",{ref:d,className:"mc-map","aria-label":"Ynetim konsolu haritas"})}function Qz({selectedEmployeeId:e,departmentId:s,regionId:l,startDate:o,endDate:d,onSelectEmployee:m}){const[f,g]=b.useState(""),[v,_]=b.useState(""),[S,w]=b.useState(""),[k,O]=b.useState(!1),[T,E]=b.useState(!1),[R,B]=b.useState(0),A=qz(f,250),z=b.useDeferredValue(A),Z=aS({queryKey:["management-console-map-events",{employeeId:T?e:null,departmentId:s,regionId:l,startDate:o,endDate:d,eventType:v,locationStatus:S}],queryFn:({pageParam:te})=>Nc({employee_id:T?e??void 0:void 0,department_id:s,region_id:l,start_date:o,end_date:d,type:v||void 0,location_status:S||void 0,offset:te,limit:jf}),initialPageParam:0,getNextPageParam:(te,oe)=>te.length<jf?void 0:oe.length*jf,staleTime:3e4}),I=b.useMemo(()=>(Z.data?.pages.flat()??[]).filter(te=>te.lat!=null&&te.lon!=null),[Z.data?.pages]),V=b.useMemo(()=>{const te=z.trim().toLocaleLowerCase("tr-TR");return I.filter(oe=>!(te&&![oe.employee_name??"",oe.department_name??"",String(oe.employee_id)].join(" ").toLocaleLowerCase("tr-TR").includes(te)))},[z,I]),H=b.useMemo(()=>V.map(te=>({id:te.id,employeeId:te.employee_id,employeeName:te.employee_name??`Personel #${te.employee_id}`,departmentName:te.department_name,lat:te.lat,lon:te.lon,accuracyM:te.accuracy_m,eventType:te.type,locationStatus:te.location_status,tsUtc:te.ts_utc,deviceId:te.device_id,source:te.source,note:te.note})),[V]),ee=b.useMemo(()=>e==null?[]:H.filter(te=>te.employeeId===e).sort((te,oe)=>new Date(te.tsUtc).getTime()-new Date(oe.tsUtc).getTime()),[H,e]);b.useEffect(()=>{if(!ee.length){B(0);return}B(ee.length-1)},[ee]);const X=ee[R]??null,P=X?.id??(e==null?null:H.find(te=>te.employeeId===e)?.id??null);return n.jsxs("section",{className:"mc-panel",children:[n.jsxs("div",{className:"mc-panel__head",children:[n.jsxs("div",{children:[n.jsx("p",{className:"mc-kicker",children:"HARTA ZLEME"}),n.jsx("h3",{className:"mc-panel__title",children:"Personel konum gemii ve giri-k hareketleri"})]}),n.jsxs("div",{className:"mc-meta",children:[n.jsxs("span",{children:[H.length," koordinatl kayt"]}),n.jsx("span",{children:o?`${Wf(o)} - ${Wf(d??o)}`:"Tarih seilmedi"})]})]}),n.jsxs("div",{className:"mc-map-panel__filters",children:[n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Personel ara"}),n.jsx("input",{value:f,onChange:te=>g(te.target.value),placeholder:"Ad, soyad veya ID"})]}),n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Olay tipi"}),n.jsxs("select",{value:v,onChange:te=>_(te.target.value),children:[n.jsx("option",{value:"",children:"Tm hareketler"}),n.jsx("option",{value:"IN",children:"Giri"}),n.jsx("option",{value:"OUT",children:"k"})]})]}),n.jsxs("label",{className:"mc-field",children:[n.jsx("span",{children:"Konum durumu"}),n.jsxs("select",{value:S,onChange:te=>w(te.target.value),children:[n.jsx("option",{value:"",children:"Tm durumlar"}),n.jsx("option",{value:"VERIFIED_HOME",children:"Doruland"}),n.jsx("option",{value:"UNVERIFIED_LOCATION",children:"Sapma"}),n.jsx("option",{value:"NO_LOCATION",children:"Konum yok"})]})]})]}),n.jsxs("div",{className:"mc-map-panel__toolbar",children:[n.jsxs("label",{className:"mc-check",children:[n.jsx("input",{type:"checkbox",checked:T,onChange:te=>E(te.target.checked),disabled:e==null}),n.jsx("span",{children:"Seili personeli filtrele"})]}),n.jsxs("label",{className:"mc-check",children:[n.jsx("input",{type:"checkbox",checked:k,onChange:te=>O(te.target.checked)}),n.jsx("span",{children:"Teknik detaylar gster"})]})]}),Z.isError?n.jsx("div",{className:"mc-empty-state",children:"Harita olaylar yklenemedi."}):H.length?n.jsx($z,{events:H,focusedEventId:P,showTechnicalDetails:k,onSelectEmployee:m}):n.jsx("div",{className:"mc-empty-state",children:Z.isLoading?"Harita olaylar ykleniyor...":"Seilen kapsam iin koordinatl hareket bulunamad."}),ee.length>1?n.jsxs("div",{className:"mc-playback",children:[n.jsxs("div",{className:"mc-playback__head",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Zaman oynatma"}),n.jsx("span",{children:"Seili personelin tarihsel hareketleri arasnda gezin"})]}),n.jsxs("div",{className:"mc-playback__meta",children:[n.jsx("strong",{children:Pa(X?.tsUtc)}),n.jsx("span",{children:X?F_(X.locationStatus):"-"})]})]}),n.jsx("input",{type:"range",min:0,max:ee.length-1,step:1,value:R,onChange:te=>B(Number(te.target.value))})]}):null,n.jsxs("div",{className:"mc-map-panel__footer",children:[n.jsxs("div",{className:"mc-legend",children:[n.jsxs("span",{className:"mc-legend__item",children:[n.jsx("i",{className:"mc-legend__dot mc-legend__dot--entry"}),"Giri"]}),n.jsxs("span",{className:"mc-legend__item",children:[n.jsx("i",{className:"mc-legend__dot mc-legend__dot--exit"}),"k"]})]}),n.jsxs("div",{className:"mc-meta",children:[Z.hasNextPage?n.jsx("button",{type:"button",className:"mc-button mc-button--secondary",onClick:()=>{Z.fetchNextPage()},disabled:Z.isFetchingNextPage,children:Z.isFetchingNextPage?"Ykleniyor...":"Daha fazla veri ykle"}):n.jsx("span",{children:"Tm yklenebilir kaytlar getirildi"}),n.jsxs("span",{children:["Son rnek: ",I[0]?Pa(I[0].ts_utc):"-"]})]})]})]})}const td=86,Vz=620,Av=6;function Yz({items:e,total:s,page:l,totalPages:o,filters:d,onSort:m,onOpenEmployee:f,selectedEmployeeId:g,onPageChange:v}){const[_,S]=b.useState(0),[w,k]=b.useState(!1);b.useEffect(()=>{const I=()=>{k(window.innerWidth<=960)};return I(),window.addEventListener("resize",I),()=>{window.removeEventListener("resize",I)}},[]);const O=w?0:Math.max(0,Math.floor(_/td)-Av),T=w?e.length:Math.ceil(Vz/td)+Av*2,E=Math.min(e.length,O+T),R=b.useMemo(()=>e.slice(O,E),[E,e,O]),B=w?0:O*td,A=w?0:Math.max(0,(e.length-E)*td),z=e.length?(l-1)*d.limit+1:0,Z=e.length?Math.min(l*d.limit,s):0;return n.jsxs("section",{className:"mc-panel mc-panel--table",children:[n.jsxs("div",{className:"mc-panel__head",children:[n.jsxs("div",{children:[n.jsx("p",{className:"mc-kicker",children:"OPERASYONEL GVENLK MATRS"}),n.jsx("h3",{className:"mc-panel__title",children:"Risk bazl davran, ihlal ve vardiya uyumu tablosu"})]}),n.jsxs("div",{className:"mc-meta",children:[n.jsxs("span",{children:[s," kayt"]}),n.jsxs("span",{children:["Sayfa ",l," / ",o]})]})]}),n.jsx("div",{className:"mc-table-head",role:"row",children:[["employee_name","Personel"],["department_name","Departman"],["risk_score","Risk"],["risk_status","Durum"],["worked_today","Bugn"],["weekly_total","Hafta"],["violation_count_7d","hlal"],["last_activity","Son aktivite"],["recent_ip","IP"],["location_label","Konum"]].map(([I,V])=>n.jsx("div",{className:"mc-table-head__cell",children:I==="risk_status"||I==="recent_ip"||I==="location_label"?V:n.jsxs("button",{type:"button",className:"mc-table-head__button",onClick:()=>m(I),children:[V,n.jsx("span",{children:Az(d.sort_by===I,d.sort_dir)})]})},I))}),n.jsxs("div",{className:"mc-table-viewport",onScroll:I=>S(I.currentTarget.scrollTop),children:[n.jsx("div",{style:{height:B},"aria-hidden":"true"}),R.map(I=>n.jsxs("button",{type:"button",className:`mc-table-row ${g===I.employee.id?"is-selected":""}`,onClick:()=>f(I.employee.id),children:[n.jsxs("div",{className:"mc-table-cell mc-table-cell--stack",children:[n.jsx("strong",{children:I.employee.full_name}),n.jsx("span",{children:U_(I.today_status)})]}),n.jsx("div",{className:"mc-table-cell",children:I.department_name??"-"}),n.jsx("div",{className:"mc-table-cell",children:n.jsx("span",{className:`mc-risk-pill ${dc(I.risk_status)}`,children:I.risk_score})}),n.jsx("div",{className:"mc-table-cell",children:n.jsx("span",{className:`mc-status-pill ${dc(I.risk_status)}`,children:wd(I.risk_status)})}),n.jsx("div",{className:"mc-table-cell",children:n.jsx($e,{minutes:I.worked_today_minutes})}),n.jsx("div",{className:"mc-table-cell",children:n.jsx($e,{minutes:I.weekly_total_minutes})}),n.jsxs("div",{className:"mc-table-cell mc-table-cell--stack",children:[n.jsx("strong",{children:I.violation_count_7d}),n.jsx("span",{children:I.shift_window_label??"Plan bilgisi yok"})]}),n.jsxs("div",{className:"mc-table-cell mc-table-cell--stack",children:[n.jsx("strong",{children:Pa(I.last_activity_utc)}),n.jsx("span",{children:B_(I.last_activity_utc)})]}),n.jsx("div",{className:"mc-table-cell",children:I.recent_ip??"-"}),n.jsxs("div",{className:"mc-table-cell mc-table-cell--stack",children:[n.jsx("strong",{children:I.location_label??"-"}),n.jsx("span",{children:Cz(I.location_state)})]})]},I.employee.id)),n.jsx("div",{style:{height:A},"aria-hidden":"true"})]}),n.jsxs("div",{className:"mc-pagination",children:[n.jsx("button",{type:"button",className:"mc-button mc-button--secondary",onClick:()=>v(Math.max(1,l-1)),disabled:l<=1,children:"nceki"}),n.jsxs("span",{children:["Grnen kaytlar: ",z," - ",Z]}),n.jsx("button",{type:"button",className:"mc-button mc-button--secondary",onClick:()=>v(Math.min(o,l+1)),disabled:l>=o,children:"Sonraki"})]})]})}function Jz({selectedEmployeeId:e,startDate:s,endDate:l,onOpenEmployee:o}){const d=Fe({queryKey:["management-console-notifications",{selectedEmployeeId:e,startDate:s,endDate:l}],queryFn:()=>Ep({employee_id:e??void 0,start_date:s,end_date:l,offset:0,limit:8}),staleTime:3e4});return n.jsxs("section",{className:"mc-panel",children:[n.jsxs("div",{className:"mc-panel__head",children:[n.jsxs("div",{children:[n.jsx("p",{className:"mc-kicker",children:"BLDRM AKII"}),n.jsx("h3",{className:"mc-panel__title",children:"Son kurallar, alarmlar ve gnderim durumu"})]}),n.jsxs("div",{className:"mc-meta",children:[n.jsxs("span",{children:[d.data?.total??0," kayt"]}),n.jsx("span",{children:e?`Personel #${e}`:"Tm kapsam"})]})]}),n.jsx("div",{className:"mc-notification-list",children:d.isLoading?n.jsx("div",{className:"mc-empty-state",children:"Bildirim ak ykleniyor..."}):d.isError?n.jsx("div",{className:"mc-empty-state",children:"Bildirim ak alnamad."}):d.data?.items.length?d.data.items.map(m=>n.jsxs("article",{className:"mc-notification-card",children:[n.jsxs("div",{className:"mc-notification-card__head",children:[n.jsxs("div",{children:[n.jsx("strong",{children:m.title??m.notification_type??"Bildirim"}),n.jsx("span",{children:m.notification_type??"Tanmsz tr"})]}),n.jsx("span",{className:`mc-status-pill ${dc(m.risk_level)}`,children:m.risk_level??"Bilgi"})]}),n.jsx("p",{children:m.description??"Aklama bulunmuyor."}),n.jsxs("div",{className:"mc-notification-card__meta",children:[n.jsx("span",{children:Mz(m.audience)}),n.jsx("span",{children:K_(m.status)}),n.jsx("span",{children:Pa(m.event_ts_utc??m.created_at)})]}),n.jsxs("div",{className:"mc-notification-card__footer",children:[n.jsxs("span",{children:["Event ID: ",m.event_id??"-"]}),m.employee_id?n.jsx("button",{type:"button",className:"mc-button mc-button--ghost",onClick:()=>o(m.employee_id),children:"Personeli a"}):null]})]},m.id)):n.jsx("div",{className:"mc-empty-state",children:"Seilen kapsam iin bildirim bulunmuyor."})})]})}function Xz(){const[e,s]=b.useState(wf()),[l,o]=b.useState(wf()),[d,m]=b.useState(1),[f,g]=b.useState(null),[v,_]=b.useState(!1),[S,w]=b.useState(!1),k=Fe({queryKey:["regions","management-console"],queryFn:()=>eo()}),O=Fe({queryKey:["departments","management-console"],queryFn:()=>ji()}),T=b.useMemo(()=>kf(l,d),[l,d]),E=Fe({queryKey:["control-room-overview",T],queryFn:()=>f3(T)}),R=Ge({mutationFn:v3}),B=P=>{g(P),_(!0)},A=()=>{const P={...e};o(P),m(1),R.mutate({filters:{...kf(P,1)},total_results:E.data?.total})},z=()=>{const P=wf();s(P),o(P),m(1)},Z=P=>{const te=l.sort_by===P&&l.sort_dir==="desc"?"asc":"desc",oe={...l,sort_by:P,sort_dir:te};s(oe),o(oe),m(1),R.mutate({filters:{...kf(oe,1)},total_results:E.data?.total})},I=b.useMemo(()=>{const P=E.data?.active_filters;return P?[P.q?`Sorgu: ${P.q}`:null,P.start_date&&P.end_date?`Analiz: ${P.start_date} - ${P.end_date}`:null,P.map_date?`Harita gn: ${P.map_date}`:null,P.region_id?`Blge #${P.region_id}`:null,P.department_id?`Departman #${P.department_id}`:null,P.risk_status?`Durum: ${wd(P.risk_status)}`:null,P.risk_min!=null||P.risk_max!=null?`Risk aral: ${P.risk_min??0}-${P.risk_max??100}`:null,P.include_inactive?"Pasif personel dahil":null,`Sralama: ${P.sort_by} / ${P.sort_dir==="desc"?"Azalan":"Artan"}`,`Limit: ${P.limit}`].filter(Boolean):[]},[E.data?.active_filters]),V=Math.max(1,Math.ceil((E.data?.total??0)/(E.data?.limit||l.limit))),H=E.data?.summary,ee=Math.max(1,...(H?.risk_histogram??[]).map(P=>P.count)),X=Math.max(1,...(H?.weekly_trend??[]).map(P=>P.value));return E.isLoading?n.jsx($t,{label:"Ynetim konsolu ykleniyor..."}):E.isError||!E.data?n.jsx(zt,{message:"Ynetim konsolu verileri alnamad."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mc-console",children:[n.jsx(Uz,{generatedAtUtc:E.data.generated_at_utc,systemStatus:H?.system_status??"HEALTHY",onRefresh:()=>{E.refetch()}}),n.jsx(Fz,{summary:E.data.summary}),n.jsx(Bz,{filterForm:e,regions:k.data??[],departments:O.data??[],activeFilterEntries:I,onChange:s,onApply:A,onReset:z}),n.jsxs("div",{className:"mc-layout-toolbar",children:[n.jsxs("div",{className:"mc-layout-toolbar__summary",children:[n.jsx("strong",{children:"Canl kapsam"}),n.jsxs("span",{children:["Son gncelleme ",Pa(E.data.generated_at_utc),"  Sistem durumu"," ",n.jsx("span",{className:`mc-status-pill ${q_(H?.system_status??"HEALTHY")}`,children:zp(H?.system_status??"HEALTHY")})]})]}),n.jsx("button",{type:"button",className:"mc-button mc-button--ghost",onClick:()=>w(P=>!P),children:S?"Sa paneli a":"Sa paneli daralt"})]}),n.jsxs("div",{className:`mc-layout ${S?"is-collapsed":""}`,children:[n.jsxs("div",{className:"mc-layout__main",children:[n.jsx(Yz,{items:E.data.items,total:E.data.total,page:d,totalPages:V,filters:l,onSort:Z,onOpenEmployee:B,selectedEmployeeId:f,onPageChange:m}),n.jsxs("div",{className:"mc-secondary-grid",children:[n.jsxs("section",{className:"mc-panel",children:[n.jsx("div",{className:"mc-panel__head",children:n.jsxs("div",{children:[n.jsx("p",{className:"mc-kicker",children:"RSK DAILIMI"}),n.jsx("h3",{className:"mc-panel__title",children:"Risk skoru younluu"})]})}),n.jsx("div",{className:"mc-histogram",children:(H?.risk_histogram??[]).map(P=>n.jsxs("article",{className:"mc-histogram__row",children:[n.jsx("span",{children:P.label}),n.jsx("div",{className:"mc-histogram__track",children:n.jsx("div",{className:"mc-histogram__fill",style:{width:`${P.count/ee*100}%`}})}),n.jsx("strong",{children:P.count})]},P.label))})]}),n.jsxs("section",{className:"mc-panel",children:[n.jsx("div",{className:"mc-panel__head",children:n.jsxs("div",{children:[n.jsx("p",{className:"mc-kicker",children:"HAFTALIK ELM"}),n.jsx("h3",{className:"mc-panel__title",children:"Risk ve ihlal trendi"})]})}),n.jsx("div",{className:"mc-trend",children:(H?.weekly_trend??[]).map(P=>n.jsxs("article",{className:"mc-trend__item",children:[n.jsx("strong",{children:P.value.toFixed(1)}),n.jsx("div",{className:"mc-trend__bar",children:n.jsx("div",{className:"mc-trend__fill",style:{height:`${Math.max(12,P.value/X*100)}%`}})}),n.jsx("span",{children:P.label})]},P.label))})]}),n.jsxs("section",{className:"mc-panel mc-panel--wide",children:[n.jsx("div",{className:"mc-panel__head",children:n.jsxs("div",{children:[n.jsx("p",{className:"mc-kicker",children:"DEPARTMAN PERFORMANSI"}),n.jsx("h3",{className:"mc-panel__title",children:"Operasyon ve vardiya disiplini zeti"})]})}),n.jsx("div",{className:"mc-department-grid",children:(H?.department_metrics??[]).slice(0,6).map(P=>n.jsxs("article",{className:"mc-department-card",children:[n.jsx("strong",{children:P.department_name}),n.jsxs("span",{children:[P.employee_count," personel"]}),n.jsxs("span",{children:["Ortalama giri: ",Tz(P.average_checkin_minutes)]}),n.jsxs("span",{children:["Ge kalma oran: %",P.late_rate_percent]}),n.jsxs("span",{children:["Ortalama aktif sre: ",n.jsx($e,{minutes:P.average_active_minutes})]})]},P.department_name))})]})]})]}),S?null:n.jsxs("aside",{className:"mc-layout__rail",children:[n.jsx(Qz,{selectedEmployeeId:f,departmentId:Hl(l.department_id),regionId:Hl(l.region_id),startDate:l.start_date,endDate:l.end_date,onSelectEmployee:B}),n.jsx(Jz,{selectedEmployeeId:f,startDate:l.start_date,endDate:l.end_date,onOpenEmployee:B})]})]})]}),n.jsx(Rz,{employeeId:f,open:v&&f!=null,onClose:()=>_(!1)})]})}function Wz(){return n.jsx(Xz,{})}function eO(){return n.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",children:n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm",children:[n.jsx("p",{className:"text-4xl font-bold text-slate-900",children:"404"}),n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Sayfa bulunamadi."}),n.jsx(Ys,{to:"/management-console",className:"mt-5 inline-block rounded-lg bg-brand-600 px-4 py-2 text-sm text-white hover:bg-brand-700",children:"Ana Panel'e dn"}),n.jsx("p",{className:"mt-5 text-center text-xs tracking-wide text-slate-500",children:ps.signatureText})]})})}function Mv(e,s){const l=URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=s,document.body.appendChild(o),o.click(),o.remove(),URL.revokeObjectURL(l)}function tO(){const{pushToast:e}=aa(),s=new Date,[l,o]=b.useState("employee"),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState(""),[S,w]=b.useState(String(s.getFullYear())),[k,O]=b.useState(String(s.getMonth()+1)),[T,E]=b.useState(""),[R,B]=b.useState(""),[A,z]=b.useState(!0),[Z,I]=b.useState(!1),[V,H]=b.useState(""),[ee,X]=b.useState(""),[P,te]=b.useState("consolidated"),[oe,je]=b.useState(""),[ue,ce]=b.useState(""),[Q,$]=b.useState(""),ie=Fe({queryKey:["employees","all"],queryFn:()=>Xs({status:"all",include_inactive:!0})}),Ae=Fe({queryKey:["departments"],queryFn:ji}),_e=Fe({queryKey:["regions","all","for-export"],queryFn:()=>eo({include_inactive:!0})}),D=Ge({mutationFn:C3,onSuccess:ze=>{Mv(ze,`puantaj-${l}-${Date.now()}.xlsx`),e({variant:"success",title:"Excel indirildi",description:"Puantaj Excel dosyas baaryla indirildi."})},onError:ze=>{e({variant:"error",title:"Da aktarma baarsz",description:Be(ze,"Excel dosyas retilemedi.").message})}}),ae=Ge({mutationFn:O3,onSuccess:ze=>{Mv(ze,`puantaj-range-${P}-${Date.now()}.xlsx`),e({variant:"success",title:"Aralkl Excel indirildi",description:"Tarih aral da aktarma dosyas indirildi."})},onError:ze=>{e({variant:"error",title:"Tarih aral da aktarma baarsz",description:Be(ze,"Excel dosyas retilemedi.").message})}}),F=b.useMemo(()=>{const ze=Number(S),at=Number(k),pt=Number(d),Rt=Number(f),It=Number(v);return l==="employee"?!pt||!ze||!at?null:{mode:l,employee_id:pt,year:ze,month:at}:l==="department"?!Rt||!ze||!at?null:{mode:l,department_id:Rt,year:ze,month:at,include_daily_sheet:A,include_inactive:Z}:l==="all"?!ze||!at?null:{mode:l,year:ze,month:at,region_id:It||void 0,include_daily_sheet:A,include_inactive:Z}:!T||!R?null:{mode:l,start_date:T,end_date:R,employee_id:pt||void 0,department_id:Rt||void 0,region_id:It||void 0,include_inactive:Z}},[l,d,f,v,S,k,T,R,A,Z]),me=b.useMemo(()=>{const ze=Number(Q),at=Number(oe),pt=Number(ue);return!V||!ee?null:{start_date:V,end_date:ee,mode:P,employee_id:ze>0?ze:void 0,department_id:at>0?at:void 0,region_id:pt>0?pt:void 0}},[V,ee,P,Q,oe,ue]),de=()=>{if(!F){e({variant:"error",title:"Eksik filtre",description:"Setiiniz da aktarma tipine gre gerekli alanlar doldurun."});return}D.mutate(F)},Ee=()=>{if(!me){e({variant:"error",title:"Eksik tarih aral filtresi",description:"Balang, biti ve gerekli filtreleri doldurun."});return}ae.mutate(me)};if(ie.isLoading||Ae.isLoading||_e.isLoading)return n.jsx($t,{});if(ie.isError||Ae.isError||_e.isError)return n.jsx(zt,{message:"alan/departman/blge bilgileri alnamad."});const Oe=ie.data??[],Qe=Ae.data??[],pe=_e.data??[],Ve=v?Number(v):null,Ye=ue?Number(ue):null,Ot=Ve&&Number.isFinite(Ve)?Qe.filter(ze=>ze.region_id===Ve):Qe,ft=Ye&&Number.isFinite(Ye)?Qe.filter(ze=>ze.region_id===Ye):Qe;return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"Puantaj Excel Da Aktar",description:"Mevcut endpoint veya tarih aral endpointi ile Excel da aktarm yapn."}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Mevcut Export Endpointi"}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Da aktarma tipi",n.jsxs("select",{value:l,onChange:ze=>o(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"employee",children:"alan Bazl"}),n.jsx("option",{value:"department",children:"Departman Bazl"}),n.jsx("option",{value:"all",children:"Tm alanlar (Aylk)"}),n.jsx("option",{value:"date_range",children:"Tarih Aral (Mevcut)"})]})]}),(l==="employee"||l==="date_range")&&n.jsx(Js,{label:"alan",employees:Oe,value:d,onChange:m,emptyLabel:"Seiniz",helperText:"Ad-soyad veya ID ile arayn."}),(l==="department"||l==="date_range")&&n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:f,onChange:ze=>g(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seiniz"}),Ot.map(ze=>n.jsxs("option",{value:ze.id,children:["#",ze.id," - ",ze.name]},ze.id))]})]}),(l==="all"||l==="date_range")&&n.jsxs("label",{className:"text-sm text-slate-700",children:["Blge (opsiyonel)",n.jsxs("select",{value:v,onChange:ze=>{_(ze.target.value),g("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tm"}),pe.map(ze=>n.jsxs("option",{value:ze.id,children:["#",ze.id," - ",ze.name]},ze.id))]})]}),(l==="employee"||l==="department"||l==="all")&&n.jsxs(n.Fragment,{children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Yl",n.jsx("input",{type:"number",value:S,onChange:ze=>w(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Ay",n.jsx("input",{type:"number",value:k,onChange:ze=>O(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),l==="date_range"&&n.jsxs(n.Fragment,{children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang Tarihi",n.jsx("input",{type:"date",value:T,onChange:ze=>E(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti Tarihi",n.jsx("input",{type:"date",value:R,onChange:ze=>B(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]})]}),(l==="department"||l==="all")&&n.jsxs("label",{className:"mt-3 inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:A,onChange:ze=>z(ze.target.checked)}),"Gnlk sheetleri de ekle"]}),n.jsxs("label",{className:"mt-3 inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:Z,onChange:ze=>I(ze.target.checked)}),"Arivdeki alanlar dahil et"]}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{type:"button",onClick:de,disabled:D.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:D.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Hazrlanyor..."]}):"Excel ndir"})})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Tarih Aral (Yeni Endpoint)"}),n.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Endpoint: ",n.jsx("code",{children:"/api/admin/export/puantaj-range.xlsx"})]}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang Tarihi",n.jsx("input",{type:"date",value:V,onChange:ze=>H(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti Tarihi",n.jsx("input",{type:"date",value:ee,onChange:ze=>X(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Sheet modu",n.jsxs("select",{value:P,onChange:ze=>te(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"consolidated",children:"Tek Konsolide Sheet"}),n.jsx("option",{value:"employee_sheets",children:"alan Bazl Sheet"}),n.jsx("option",{value:"department_sheets",children:"Departman Bazl Sheet"})]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman (opsiyonel)",n.jsxs("select",{value:oe,onChange:ze=>je(ze.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tm"}),ft.map(ze=>n.jsxs("option",{value:ze.id,children:["#",ze.id," - ",ze.name]},ze.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Blge (opsiyonel)",n.jsxs("select",{value:ue,onChange:ze=>{ce(ze.target.value),je("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Tm"}),pe.map(ze=>n.jsxs("option",{value:ze.id,children:["#",ze.id," - ",ze.name]},ze.id))]})]}),n.jsx(Js,{label:"alan (opsiyonel)",employees:Oe,value:Q,onChange:$,emptyLabel:"Tm",helperText:"stee bal alan filtresi.",className:"md:col-span-2"})]}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{type:"button",onClick:Ee,disabled:ae.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:ae.isPending?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-spinner","aria-hidden":"true"}),"Hazrlanyor..."]}):"Tarih Aral Excel ndir"})})]})]})}const nO=[41.0082,28.9784];function rr(e){return e.toFixed(6)}function aO({lat:e,lon:s,radiusM:l,onSelect:o}){const d=b.useRef(null),m=b.useRef(null),f=b.useRef(null),g=b.useRef(null),[v,_]=b.useState(!1),[S,w]=b.useState(""),[k,O]=b.useState(!1),[T,E]=b.useState(null),[R,B]=b.useState(null),A=b.useMemo(()=>e!==null&&s!==null?[e,s]:nO,[e,s]);b.useEffect(()=>{if(!(!d.current||m.current)){try{const I=ga.map(d.current,{center:A,zoom:e!==null&&s!==null?17:12,zoomControl:!0});m.current=I,ga.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap katkida bulunanlar"}).addTo(I);const V=ga.circleMarker(A,{radius:8,color:"#0f6a8c",fillColor:"#0f6a8c",fillOpacity:.85,weight:2}).addTo(I);f.current=V;const H=ga.circle(A,{radius:Number.isFinite(l)&&l>0?l:75,color:"#0f6a8c",fillColor:"#0f6a8c",fillOpacity:.14,weight:2}).addTo(I);g.current=H,I.on("click",ee=>{const X=ee.latlng.lat,P=ee.latlng.lng;o(X,P),B(`Haritadan secildi: ${rr(X)}, ${rr(P)}`)}),_(!0),E(null)}catch{E("Harita yuklenemedi. Lutfen tekrar deneyin."),_(!1)}return()=>{m.current&&(m.current.remove(),m.current=null),f.current=null,g.current=null,_(!1)}}},[A,e,s,o,l]),b.useEffect(()=>{if(!m.current||!f.current||!g.current)return;const I=m.current,V=f.current,H=g.current;if(e!==null&&s!==null){const X=[e,s];V.setLatLng(X),H.setLatLng(X),I.panTo(X,{animate:!0})}const ee=Number.isFinite(l)&&l>0?l:75;H.setRadius(ee)},[e,s,l]);const z=b.useCallback(async()=>{if(!v||!m.current)return;const I=S.trim();if(!I){B("Lutfen adres veya lokasyon adi girin.");return}O(!0);try{const V=new URL("https://nominatim.openstreetmap.org/search");V.searchParams.set("q",I),V.searchParams.set("format","json"),V.searchParams.set("limit","1"),V.searchParams.set("addressdetails","1"),V.searchParams.set("accept-language","tr");const H=await fetch(V.toString(),{headers:{Accept:"application/json"}});if(!H.ok)throw new Error("search_failed");const ee=await H.json();if(!Array.isArray(ee)||ee.length===0){B("Adres bulunamadi. Daha net bir sorgu deneyin.");return}const X=ee[0],P=Number(X.lat),te=Number(X.lon);if(!Number.isFinite(P)||!Number.isFinite(te)){B("Adres koordinata cevrilemedi.");return}o(P,te),m.current.setView([P,te],17,{animate:!0}),B(`Adres bulundu: ${rr(P)}, ${rr(te)}${X.display_name?` (${X.display_name})`:""}`)}catch{B("Adres aramasi gecici olarak kullanilamiyor. Lutfen tekrar deneyin.")}finally{O(!1)}},[v,o,S]),Z=b.useCallback(()=>{if(!navigator.geolocation){B("Tarayiciniz konum API destegi vermiyor.");return}navigator.geolocation.getCurrentPosition(I=>{const V=I.coords.latitude,H=I.coords.longitude;o(V,H),B(`Mevcut konum alindi: ${rr(V)}, ${rr(H)}`)},()=>{B("Konum alinamadi. Konum iznini kontrol edin.")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[o]);return n.jsxs("div",{className:"rounded-lg border border-brand-200 bg-brand-50/40 p-3",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-700",children:"Harita Nokta Secici (Ucretsiz)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-600",children:"OpenStreetMap uzerinden haritaya tiklayarak veya adres arayarak lat/lon alanlarini otomatik doldurabilirsiniz."}),T?n.jsx("div",{className:"mt-3 rounded-md border border-rose-300 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:T}):n.jsx("div",{className:"mt-3 rounded-md border border-emerald-300 bg-emerald-50 px-3 py-2 text-xs text-emerald-800",children:"API key gerektirmez. OpenStreetMap/Nominatim kullanilir."}),n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-[1fr_auto_auto]",children:[n.jsx("input",{value:S,onChange:I=>w(I.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Adres / isyeri / bolge adi ara",disabled:!v}),n.jsx("button",{type:"button",onClick:()=>{z()},disabled:!v||k,className:"rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-white disabled:opacity-60",children:k?"Araniyor...":"Ara"}),n.jsx("button",{type:"button",onClick:Z,disabled:!v,className:"rounded-lg border border-brand-300 px-3 py-2 text-sm font-semibold text-brand-700 hover:bg-brand-50 disabled:opacity-60",children:"Konumum"})]}),n.jsx("div",{ref:d,className:"mt-3 h-64 w-full rounded-lg border border-slate-300 bg-slate-100","aria-label":"OpenStreetMap qr point picker"}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-xs text-slate-600",children:[n.jsxs("span",{className:"rounded-md bg-white px-2 py-1",children:["Lat: ",e!==null?rr(e):"-"]}),n.jsxs("span",{className:"rounded-md bg-white px-2 py-1",children:["Lon: ",s!==null?rr(s):"-"]}),n.jsxs("span",{className:"rounded-md bg-white px-2 py-1",children:["Radius: ",l,"m"]})]}),R?n.jsx("p",{className:"mt-2 rounded-md border border-slate-200 bg-white px-2 py-1 text-xs text-slate-600",children:R}):null]})}const nd={name:"",codeValue:"",codeType:"BOTH",isActive:!0},ad={name:"",lat:"",lon:"",radiusM:"75",isActive:!0},sO={regionCode:"IST",locationCode:"MERKEZ",serialNo:"1"};function zv(e){return e==="CHECKIN"?"CHECKIN (Giris)":e==="CHECKOUT"?"CHECKOUT (Cikis)":"BOTH (Duruma gore)"}function Ov(e,s){return e.trim().toUpperCase().replace(/[^A-Z0-9]+/g,"-").replace(/^-+|-+$/g,"")||s}function iO(e){return e==="CHECKIN"?"IN":e==="CHECKOUT"?"OUT":"BOTH"}function rO(){const e=Xn(),{pushToast:s}=aa(),[l,o]=b.useState(null),[d,m]=b.useState(null),[f,g]=b.useState(null),[v,_]=b.useState(""),[S,w]=b.useState(""),[k,O]=b.useState(""),[T,E]=b.useState(nd),[R,B]=b.useState(sO),[A,z]=b.useState(ad),[Z,I]=b.useState([]),[V,H]=b.useState(null),ee=Fe({queryKey:["qr-codes"],queryFn:()=>kA()}),X=Fe({queryKey:["qr-points"],queryFn:()=>MA()}),P=Ge({mutationFn:EA,onSuccess:ne=>{s({variant:"success",title:"QR kod olusturuldu",description:`Kod ID: ${ne.id}`}),E(nd),o(ne.id),e.invalidateQueries({queryKey:["qr-codes"]})},onError:ne=>{s({variant:"error",title:"QR kod olusturulamadi",description:Be(ne,"Islem basarisiz.").message})}}),te=Ge({mutationFn:({codeId:ne,payload:Se})=>TA(ne,Se),onSuccess:ne=>{s({variant:"success",title:"QR kod guncellendi",description:`Kod ID: ${ne.id}`}),m(null),E(nd),e.invalidateQueries({queryKey:["qr-codes"]})},onError:ne=>{s({variant:"error",title:"QR kod guncellenemedi",description:Be(ne,"Islem basarisiz.").message})}}),oe=Ge({mutationFn:({codeId:ne,pointIds:Se})=>CA(ne,{point_ids:Se}),onSuccess:()=>{s({variant:"success",title:"Nokta atamasi guncellendi",description:"Secili noktalari QR koda baglandi."}),I([]),e.invalidateQueries({queryKey:["qr-codes"]}),e.invalidateQueries({queryKey:["qr-points"]})},onError:ne=>{s({variant:"error",title:"Atama basarisiz",description:Be(ne,"Nokta atamasi yapilamadi.").message})}}),je=Ge({mutationFn:({codeId:ne,pointId:Se})=>AA(ne,Se),onSuccess:()=>{s({variant:"success",title:"Nokta baglantisi kaldirildi",description:"Secili nokta bu QR koddan ayrildi."}),e.invalidateQueries({queryKey:["qr-codes"]}),e.invalidateQueries({queryKey:["qr-points"]})},onError:ne=>{s({variant:"error",title:"Islem basarisiz",description:Be(ne,"Nokta kaldirilamadi.").message})}}),ue=Ge({mutationFn:zA,onSuccess:ne=>{s({variant:"success",title:"QR nokta olusturuldu",description:`Nokta ID: ${ne.id}`}),z(ad),e.invalidateQueries({queryKey:["qr-points"]})},onError:ne=>{s({variant:"error",title:"QR nokta olusturulamadi",description:Be(ne,"Islem basarisiz.").message})}}),ce=Ge({mutationFn:({pointId:ne,payload:Se})=>OA(ne,Se),onSuccess:()=>{s({variant:"success",title:"QR nokta guncellendi",description:"Nokta bilgileri kaydedildi."}),g(null),z(ad),e.invalidateQueries({queryKey:["qr-points"]})},onError:ne=>{s({variant:"error",title:"QR nokta guncellenemedi",description:Be(ne,"Islem basarisiz.").message})}}),Q=Ge({mutationFn:RA,onSuccess:()=>{s({variant:"success",title:"QR nokta pasife alindi",description:"Nokta aktif listeden cikarildi."}),e.invalidateQueries({queryKey:["qr-points"]}),e.invalidateQueries({queryKey:["qr-codes"]})},onError:ne=>{s({variant:"error",title:"Islem basarisiz",description:Be(ne,"Nokta pasife alinamadi.").message})}}),$=ee.data??[],ie=X.data??[];b.useEffect(()=>{l===null&&$.length>0&&o($[0].id),l!==null&&!$.some(ne=>ne.id===l)&&o($.length>0?$[0].id:null)},[$,l]);const Ae=b.useMemo(()=>$.find(ne=>ne.id===l)??null,[$,l]);b.useEffect(()=>{if(!Ae){H(null);return}let ne=!1;return Xf.toDataURL(Ae.code_value,{errorCorrectionLevel:"M",margin:2,width:360}).then(Se=>{ne||H(Se)}).catch(()=>{ne||H(null)}),()=>{ne=!0}},[Ae?.id,Ae?.code_value]);const _e=b.useMemo(()=>{const ne=new Map;for(const Se of ie)ne.set(Se.id,Se);return ne},[ie]),D=b.useMemo(()=>Ae?Ae.point_ids.map(ne=>_e.get(ne)??null).filter(ne=>ne!==null):[],[Ae,_e]),ae=b.useMemo(()=>{const ne=v.trim().toLowerCase();return ne?$.filter(Se=>String(Se.id).includes(ne)||(Se.name??"").toLowerCase().includes(ne)||Se.code_value.toLowerCase().includes(ne)):$},[$,v]),F=b.useMemo(()=>{const ne=S.trim().toLowerCase();return ne?ie.filter(Se=>String(Se.id).includes(ne)||Se.name.toLowerCase().includes(ne)||String(Se.department_id??"").includes(ne)||String(Se.region_id??"").includes(ne)):ie},[ie,S]),me=b.useMemo(()=>{const ne=ie.filter(Pe=>Pe.is_active),Se=k.trim().toLowerCase();return Se?ne.filter(Pe=>String(Pe.id).includes(Se)||Pe.name.toLowerCase().includes(Se)||String(Pe.department_id??"").includes(Se)||String(Pe.region_id??"").includes(Se)):ne},[ie,k]),de=b.useMemo(()=>{const ne=$.filter(Tt=>Tt.is_active).length,Se=ie.filter(Tt=>Tt.is_active).length,Pe=$.filter(Tt=>Tt.point_ids.length===0).length;return{codeCount:$.length,activeCodes:ne,pointCount:ie.length,activePoints:Se,codesWithoutPoint:Pe}},[$,ie]),Ee=b.useMemo(()=>{const ne=Number(A.lat);return Number.isFinite(ne)?ne:null},[A.lat]),Oe=b.useMemo(()=>{const ne=Number(A.lon);return Number.isFinite(ne)?ne:null},[A.lon]),Qe=b.useMemo(()=>{const ne=Number(A.radiusM);return Number.isFinite(ne)&&ne>0?ne:75},[A.radiusM]),pe=ne=>{I(Se=>Se.includes(ne)?Se.filter(Pe=>Pe!==ne):[...Se,ne])},Ve=ne=>{m(ne.id),E({name:ne.name??"",codeValue:ne.code_value,codeType:ne.code_type,isActive:ne.is_active})},Ye=()=>{m(null),E(nd)},Ot=()=>{const ne=Ov(R.regionCode,"GEN"),Se=Ov(R.locationCode,"LOKASYON"),Pe=Number(R.serialNo),Tt=Number.isFinite(Pe)&&Pe>0?Math.floor(Pe):1,se=iO(T.codeType),He=`PF-${ne}-${Se}-${se}-${String(Tt).padStart(6,"0")}`;E(_t=>({..._t,codeValue:He}))},ft=ne=>{g(ne.id),z({name:ne.name,lat:String(ne.lat),lon:String(ne.lon),radiusM:String(ne.radius_m),isActive:ne.is_active})},ze=()=>{g(null),z(ad)},at=ne=>{ne.preventDefault();const Se=T.codeValue.trim();if(!Se){s({variant:"error",title:"Kod degeri zorunlu",description:"QR kod degerini bos birakamazsiniz."});return}const Pe={name:T.name.trim()||null,code_value:Se,code_type:T.codeType,is_active:T.isActive};if(d===null){P.mutate(Pe);return}te.mutate({codeId:d,payload:Pe})},pt=ne=>{ne.preventDefault();const Se=A.name.trim(),Pe=Number(A.lat),Tt=Number(A.lon),se=Number(A.radiusM);if(!Se){s({variant:"error",title:"Nokta adi zorunlu",description:"Lutfen bir nokta adi girin."});return}if(!Number.isFinite(Pe)||!Number.isFinite(Tt)||!Number.isFinite(se)||se<=0){s({variant:"error",title:"Gecersiz konum",description:"Lat/Lon/radius alanlarini kontrol edin."});return}const He={name:Se,lat:Pe,lon:Tt,radius_m:se,is_active:A.isActive};if(f===null){ue.mutate(He);return}ce.mutate({pointId:f,payload:He})},Rt=()=>{if(!Ae){s({variant:"error",title:"QR kod seciniz",description:"Nokta atamak icin once bir QR kod secin."});return}if(Z.length===0){s({variant:"error",title:"Nokta seciniz",description:"Atama icin en az bir nokta secin."});return}oe.mutate({codeId:Ae.id,pointIds:Z})},It=async ne=>{try{await navigator.clipboard.writeText(ne),s({variant:"success",title:"Kopyalandi",description:"QR kod degeri panoya kopyalandi."})}catch{s({variant:"error",title:"Kopyalama basarisiz",description:"Lutfen manuel olarak kopyalayin."})}},Qt=async ne=>{try{const Se=await Xf.toDataURL(ne.code_value,{errorCorrectionLevel:"M",margin:2,width:900}),Pe=document.createElement("a");Pe.href=Se,Pe.download=`qr-kod-${ne.id}.png`,document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),s({variant:"success",title:"PNG indirildi",description:`QR kod #${ne.id} dosyasi indirildi.`})}catch{s({variant:"error",title:"Indirme basarisiz",description:"QR kod PNG olusturulamadi."})}};return ee.isLoading||X.isLoading?n.jsx($t,{}):ee.isError||X.isError?n.jsx(Ie,{children:n.jsx("p",{className:"text-sm text-rose-700",children:"QR kod veya nokta listesi yuklenemedi."})}):n.jsxs("div",{className:"mx-auto w-full max-w-[1320px] space-y-4",children:[n.jsx(Wn,{title:"QR Kod Yonetimi",description:"Konuma bagli giris/cikis icin QR kod ve QR nokta yonetimi. Sirayla nokta olustur, kod olustur, nokta ata, sonra indir."}),n.jsx(Ie,{className:"min-w-0",children:n.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1.45fr)_minmax(260px,0.95fr)]",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Nasil Calisir?"}),n.jsxs("ol",{className:"mt-2 space-y-1 text-sm text-slate-700",children:[n.jsx("li",{children:"1) Once QR nokta olustur (ad + lat/lon + radius)."}),n.jsx("li",{children:"2) Sonra QR kod olustur (benzersiz code_value + tip)."}),n.jsx("li",{children:"3) QR koda bir veya birden fazla aktif nokta ata."}),n.jsx("li",{children:"4) Calisan sadece atanmis nokta icindeyse okutma basarili olur."})]}),n.jsx("div",{className:"mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:"Onemli: Noktasi olmayan QR kod okutulamaz. Pasif nokta ya da pasif QR kod da kullanilamaz."})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm sm:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Kod"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:de.codeCount}),n.jsxs("p",{className:"text-xs text-emerald-700",children:["Aktif: ",de.activeCodes]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Nokta"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:de.pointCount}),n.jsxs("p",{className:"text-xs text-emerald-700",children:["Aktif: ",de.activePoints]})]}),n.jsxs("div",{className:"col-span-2 rounded-lg border border-rose-200 bg-rose-50 p-3",children:[n.jsx("p",{className:"text-xs text-rose-700",children:"Noktasi Atanmamis Kod"}),n.jsx("p",{className:"text-lg font-semibold text-rose-800",children:de.codesWithoutPoint}),n.jsx("p",{className:"text-xs text-rose-700",children:"Bu kodlar okutuldugunda sistem izin vermez."})]})]})]})}),n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]",children:[n.jsxs(Ie,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:d===null?"2) QR Kod Olustur":`2) QR Kod Duzenle (#${d})`}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Code value benzersiz olmalidir. Asagidaki anlamli format yardimcisini kullanabilirsiniz."}),n.jsxs("form",{className:"mt-3 space-y-3",onSubmit:at,children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Kod adi (opsiyonel)",n.jsx("input",{value:T.name,onChange:ne=>E(Se=>({...Se,name:ne.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Merkez Giris"})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Anlamli Format Yardimcisi"}),n.jsxs("div",{className:"mt-2 grid gap-2 sm:grid-cols-2 xl:grid-cols-4",children:[n.jsx("input",{value:R.regionCode,onChange:ne=>B(Se=>({...Se,regionCode:ne.target.value})),className:"rounded-lg border border-slate-300 px-2 py-2 text-sm",placeholder:"Bolge (IST)"}),n.jsx("input",{value:R.locationCode,onChange:ne=>B(Se=>({...Se,locationCode:ne.target.value})),className:"rounded-lg border border-slate-300 px-2 py-2 text-sm",placeholder:"Lokasyon (MERKEZ)"}),n.jsx("input",{type:"number",min:1,value:R.serialNo,onChange:ne=>B(Se=>({...Se,serialNo:ne.target.value})),className:"rounded-lg border border-slate-300 px-2 py-2 text-sm",placeholder:"Seri No"}),n.jsx("button",{type:"button",onClick:Ot,className:"rounded-lg border border-brand-300 bg-white px-3 py-2 text-sm font-semibold text-brand-700 hover:bg-brand-50",children:"Deger Uret"})]}),n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Ornek: PF-IST-MERKEZ-IN-000001 / PF-ANK-SUBE1-BOTH-000014"})]}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["code_value",n.jsx("input",{value:T.codeValue,onChange:ne=>E(Se=>({...Se,codeValue:ne.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: IN|HQ-1"})]}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["Kod tipi",n.jsxs("select",{value:T.codeType,onChange:ne=>E(Se=>({...Se,codeType:ne.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"CHECKIN",children:"CHECKIN"}),n.jsx("option",{value:"CHECKOUT",children:"CHECKOUT"}),n.jsx("option",{value:"BOTH",children:"BOTH"})]}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"CHECKIN: sadece giris, CHECKOUT: sadece cikis, BOTH: sistem bugunku duruma gore secer."})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:T.isActive,onChange:ne=>E(Se=>({...Se,isActive:ne.target.checked}))}),"Aktif"]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"submit",disabled:P.isPending||te.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:d===null?"Olustur":"Guncelle"}),d!==null?n.jsx("button",{type:"button",onClick:Ye,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Iptal"}):null]})]})]}),n.jsxs(Ie,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"QR Kod Listesi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Detay ve nokta atama islemleri icin bir QR kod secin."}),n.jsx("div",{className:"mt-3",children:n.jsx(As,{value:v,onChange:_,placeholder:"Kod adi / degeri / ID ara"})}),n.jsx("div",{className:"mt-3 max-h-80 overflow-auto overscroll-contain rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-[980px] text-left text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2",children:"ID"}),n.jsx("th",{className:"px-3 py-2",children:"Kod"}),n.jsx("th",{className:"px-3 py-2",children:"Tip"}),n.jsx("th",{className:"px-3 py-2",children:"Durum"}),n.jsx("th",{className:"px-3 py-2",children:"Nokta"}),n.jsx("th",{className:"px-3 py-2",children:"Aksiyon"})]})}),n.jsxs("tbody",{children:[ae.map(ne=>n.jsxs("tr",{className:`border-t border-slate-100 ${l===ne.id?"bg-brand-50/60":""}`,children:[n.jsx("td",{className:"px-3 py-2",children:ne.id}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("button",{type:"button",onClick:()=>o(ne.id),className:"font-medium text-brand-700 hover:underline",children:ne.name||"-"}),n.jsx("div",{className:"max-w-[340px] break-all text-xs text-slate-500",children:ne.code_value})]}),n.jsx("td",{className:"px-3 py-2",children:zv(ne.code_type)}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-semibold ${ne.is_active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:ne.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"px-3 py-2",children:ne.point_ids.length}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.jsx("button",{type:"button",onClick:()=>Ve(ne),className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"}),n.jsx("button",{type:"button",onClick:()=>{Qt(ne)},className:"rounded-md border border-brand-300 px-2 py-1 text-xs font-medium text-brand-700 hover:bg-brand-50",children:"PNG"})]})})]},ne.id)),ae.length===0?n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4 text-sm text-slate-500",colSpan:6,children:"Arama kriterine uygun QR kod bulunamadi."})}):null]})]})})]})]}),n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]",children:[n.jsxs(Ie,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:Ae?`3) QR Kod Detay (#${Ae.id})`:"3) QR Kod Detay"}),Ae?n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 text-sm text-slate-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Ad:"})," ",Ae.name||"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Kod degeri:"})," ",Ae.code_value]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Tip:"})," ",zv(Ae.code_type)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Durum:"})," ",Ae.is_active?"Aktif":"Pasif"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Atanan nokta sayisi:"})," ",Ae.point_ids.length]})]}),Ae.point_ids.length===0?n.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 p-3 text-xs text-rose-800",children:"Bu QR kodda nokta atamasi yok. Okutma yapildiginda sistem izin vermez."}):null,n.jsxs("div",{className:"rounded-lg border border-brand-200 bg-brand-50/60 p-3",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-700",children:"QR Onizleme"}),n.jsx("p",{className:"mt-1 break-all text-xs text-slate-700",children:Ae.code_value}),V?n.jsxs("div",{className:"mt-3 flex flex-col items-start gap-3",children:[n.jsx("img",{src:V,alt:`QR Kod ${Ae.id}`,className:"h-52 w-52 rounded-lg border border-brand-200 bg-white p-2"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{Qt(Ae)},className:"rounded-md bg-brand-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-brand-700",children:"PNG Indir"}),n.jsx("button",{type:"button",onClick:()=>{It(Ae.code_value)},className:"rounded-md border border-slate-300 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-white",children:"Kodu Kopyala"})]})]}):n.jsx("p",{className:"mt-2 text-xs text-rose-700",children:"QR onizleme olusturulamadi."})]}),n.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:"Bu QR kod, sadece bu koda atanmis aktif konum noktalarinin radius alaninda okutuldugunda gecerli olur. Diger konumlarda sistem isleme izin vermez."}),n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Atanmis Noktalar"}),D.length===0?n.jsx("p",{className:"text-sm text-slate-600",children:"Bu QR kod icin henuz nokta atanmis degil."}):n.jsx("div",{className:"space-y-2",children:D.map(ne=>n.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-slate-200 px-3 py-2 text-sm",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-slate-800",children:["#",ne.id," - ",ne.name]}),n.jsxs("p",{className:"text-xs text-slate-500",children:["lat/lon: ",ne.lat,", ",ne.lon," | radius: ",ne.radius_m,"m"]})]}),n.jsx("button",{type:"button",onClick:()=>je.mutate({codeId:Ae.id,pointId:ne.id}),className:"rounded-md border border-rose-300 px-2 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50",children:"Kaldir"})]},ne.id))})]}):n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Detay gormek icin listeden bir QR kod secin."})]}),n.jsxs(Ie,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"4) Nokta Ata (Coklu Secim)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Arama ile nokta secip tek islemde birden fazla noktayi QR koda baglayabilirsiniz."}),n.jsx("div",{className:"mt-3",children:n.jsx(As,{value:k,onChange:O,placeholder:"Nokta adi / ID ara"})}),n.jsx("div",{className:"mt-3 max-h-56 overflow-auto overscroll-contain rounded-lg border border-slate-200 p-2",children:me.length===0?n.jsx("p",{className:"px-2 py-1 text-sm text-slate-600",children:"Aktif nokta bulunamadi."}):n.jsx("div",{className:"space-y-1",children:me.map(ne=>n.jsxs("label",{className:"flex items-center gap-2 rounded-md px-2 py-1 text-sm text-slate-700 hover:bg-slate-50",children:[n.jsx("input",{type:"checkbox",checked:Z.includes(ne.id),onChange:()=>pe(ne.id)}),n.jsxs("span",{children:["#",ne.id," - ",ne.name," (",ne.radius_m,"m)"]})]},ne.id))})}),n.jsxs("div",{className:"mt-3 flex items-center justify-between gap-3",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Secilen nokta: ",Z.length]}),n.jsx("button",{type:"button",onClick:Rt,disabled:oe.isPending||Ae===null,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:"Secilenleri Ata"})]})]})]}),n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]",children:[n.jsxs(Ie,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:f===null?"1) QR Nokta Olustur":`1) QR Nokta Duzenle (#${f})`}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"QR noktasi okutmanin izinli oldugu fiziksel konumu temsil eder."}),n.jsxs("form",{className:"mt-3 space-y-3",onSubmit:pt,children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Nokta adi",n.jsx("input",{value:A.name,onChange:ne=>z(Se=>({...Se,name:ne.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Merkez Ofis Kapi"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ornek: Istanbul Merkez Kapi, Ankara Sube Giris."})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"block text-sm text-slate-700",children:["Lat",n.jsx("input",{type:"number",step:"any",value:A.lat,onChange:ne=>z(Se=>({...Se,lat:ne.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["Lon",n.jsx("input",{type:"number",step:"any",value:A.lon,onChange:ne=>z(Se=>({...Se,lon:ne.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]})]}),n.jsx(aO,{lat:Ee,lon:Oe,radiusM:Qe,onSelect:(ne,Se)=>z(Pe=>({...Pe,lat:String(ne),lon:String(Se)}))}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["Radius (m)",n.jsx("input",{type:"number",min:1,value:A.radiusM,onChange:ne=>z(Se=>({...Se,radiusM:ne.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Oneri: bina ici 50-80m, acik alan 80-150m."})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:A.isActive,onChange:ne=>z(Se=>({...Se,isActive:ne.target.checked}))}),"Aktif"]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"submit",disabled:ue.isPending||ce.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:f===null?"Olustur":"Guncelle"}),f!==null?n.jsx("button",{type:"button",onClick:ze,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Iptal"}):null]})]})]}),n.jsxs(Ie,{className:"min-w-0",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"5) QR Nokta Listesi"}),n.jsx("div",{className:"mt-3",children:n.jsx(As,{value:S,onChange:w,placeholder:"Nokta adi / ID ara"})}),n.jsx("div",{className:"mt-3 max-h-96 overflow-auto overscroll-contain rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-[920px] text-left text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2",children:"ID"}),n.jsx("th",{className:"px-3 py-2",children:"Nokta"}),n.jsx("th",{className:"px-3 py-2",children:"Konum"}),n.jsx("th",{className:"px-3 py-2",children:"Durum"}),n.jsx("th",{className:"px-3 py-2",children:"Aksiyon"})]})}),n.jsxs("tbody",{children:[F.map(ne=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-3 py-2",children:ne.id}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("p",{className:"font-medium text-slate-800",children:ne.name}),n.jsxs("p",{className:"text-xs text-slate-500",children:["radius: ",ne.radius_m,"m"]})]}),n.jsxs("td",{className:"px-3 py-2 text-xs text-slate-600",children:[ne.lat,", ",ne.lon]}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-semibold ${ne.is_active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:ne.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.jsx("button",{type:"button",onClick:()=>ft(ne),className:"rounded-md border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"}),ne.is_active?n.jsx("button",{type:"button",onClick:()=>Q.mutate(ne.id),className:"rounded-md border border-rose-300 px-2 py-1 text-xs font-medium text-rose-700 hover:bg-rose-50",children:"Pasife Al"}):null]})})]},ne.id)),F.length===0?n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4 text-sm text-slate-500",colSpan:5,children:"Arama kriterine uygun nokta bulunamadi."})}):null]})]})})]})]})]})}const Rv=[{value:0,label:"Pazartesi"},{value:1,label:"Sal"},{value:2,label:"aramba"},{value:3,label:"Perembe"},{value:4,label:"Cuma"},{value:5,label:"Cumartesi"},{value:6,label:"Pazar"}];function lO(){const e=Xn(),{pushToast:s}=aa(),[l,o]=b.useState(""),[d,m]=b.useState(""),[f,g]=b.useState(""),[v,_]=b.useState({}),[S,w]=b.useState(""),[k,O]=b.useState("09:00"),[T,E]=b.useState("17:30"),[R,B]=b.useState("60"),[A,z]=b.useState(!0),[Z,I]=b.useState(null),V=Fe({queryKey:["departments"],queryFn:ji}),H=Fe({queryKey:["employees","all-for-quick-setup"],queryFn:()=>Xs({include_inactive:!0,status:"all"})}),ee=Fe({queryKey:["department-weekly-rules"],queryFn:()=>b_()}),X=Fe({queryKey:["department-shifts"],queryFn:()=>_c({active_only:!1})}),P=l?Number(l):null,te=Ge({mutationFn:({employeeId:F,departmentId:me})=>NA(F,{department_id:me}),onSuccess:F=>{s({variant:"success",title:"Departman atamas gncellendi",description:`${F.full_name} iin departman kayd gncellendi.`}),e.invalidateQueries({queryKey:["employees"]}),e.invalidateQueries({queryKey:["employee-device-overview"]})},onError:F=>{s({variant:"error",title:"Departman gncellenemedi",description:Be(F,"lem baarsz.").message})}}),oe=Ge({mutationFn:__,onSuccess:()=>{s({variant:"success",title:"Haftalk kural kaydedildi",description:"Seilen gn iin plan gncellendi."}),e.invalidateQueries({queryKey:["department-weekly-rules"]})},onError:F=>{s({variant:"error",title:"Haftalk kural kaydedilemedi",description:Be(F,"lem baarsz.").message})}}),je=Ge({mutationFn:Sd,onSuccess:()=>{s({variant:"success",title:"Vardiya kaydedildi",description:"Departman vardiyas eklendi/gncellendi."}),w(""),O("09:00"),E("17:30"),B("60"),z(!0),I(null),e.invalidateQueries({queryKey:["department-shifts"]})},onError:F=>{s({variant:"error",title:"Vardiya kaydedilemedi",description:Be(F,"lem baarsz.").message})}}),ue=Ge({mutationFn:N_,onSuccess:()=>{s({variant:"success",title:"Vardiya pasife alnd",description:"Vardiya kayd pasif duruma getirildi."}),Z!==null&&(I(null),w(""),O("09:00"),E("17:30"),B("60"),z(!0)),e.invalidateQueries({queryKey:["department-shifts"]})},onError:F=>{s({variant:"error",title:"Vardiya pasife alnamad",description:Be(F,"lem baarsz.").message})}}),ce=Ge({mutationFn:({shift:F,nextActive:me})=>Sd({id:F.id,department_id:F.department_id,name:F.name,start_time_local:F.start_time_local,end_time_local:F.end_time_local,break_minutes:F.break_minutes,is_active:me}),onSuccess:(F,me)=>{s({variant:"success",title:me.nextActive?"Vardiya aktif edildi":"Vardiya pasife alnd",description:me.nextActive?"Vardiya tekrar kullanma ald.":"Vardiya pasif duruma getirildi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:F=>{s({variant:"error",title:"Vardiya durumu gncellenemedi",description:Be(F,"lem baarsz.").message})}}),Q=V.data??[],$=H.data??[],ie=ee.data??[],Ae=X.data??[],_e=b.useMemo(()=>new Map(Q.map(F=>[F.id,F.name])),[Q]),D=b.useMemo(()=>P?Ae.filter(F=>F.department_id===P):[],[P,Ae]),ae=b.useMemo(()=>$.find(F=>String(F.id)===d),[$,d]);return b.useEffect(()=>{if(!P){_({});return}const F=new Map(ie.filter(de=>de.department_id===P).map(de=>[de.weekday,de])),me={};for(const de of Rv){const Ee=F.get(de.value);me[de.value]={is_workday:Ee?.is_workday??!0,planned_minutes:String(Ee?.planned_minutes??540),break_minutes:String(Ee?.break_minutes??60)}}_(me)},[P,ie]),V.isLoading||H.isLoading||ee.isLoading||X.isLoading?n.jsx($t,{}):V.isError||H.isError||ee.isError||X.isError?n.jsx(zt,{message:"Hzl ayarlar verileri alnamad."}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"Hzl Ayarlar",description:"Sadece gerekli kurulum admlar: alan-departman atamas, haftalk gn kurallar ve vardiyalar."}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"1) alan - Departman Atamas"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"alan adn veya ID bilgisini yazarak personeli bulun, departmann hzlca gncelleyin."}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-3",children:[n.jsx(Js,{label:"alan",employees:$,value:d,onChange:F=>{m(F);const me=$.find(de=>String(de.id)===F);g(me?.department_id?String(me.department_id):"")},helperText:"Ad-soyad veya personel ID ile arayn.",className:"md:col-span-2"}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Yeni departman",n.jsxs("select",{value:f,onChange:F=>g(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Atanmam"}),Q.map(F=>n.jsx("option",{value:F.id,children:F.name},F.id))]})]})]}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-3 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[n.jsxs("div",{children:[n.jsxs("p",{children:["Seili alan:"," ",ae?`#${ae.id} - ${ae.full_name}`:"-"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Mevcut departman:"," ",ae?.department_id?_e.get(ae.department_id)??"-":"Atanmam"]})]}),n.jsx("button",{type:"button",disabled:!ae||te.isPending,onClick:()=>{ae&&te.mutate({employeeId:ae.id,departmentId:f?Number(f):null})},className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Departman Kaydet"})]})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"2) Departman Haftalk Gn Kurallar"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Her gn iin alma gn, planlanan dakika ve mola dakikasn belirleyin."}),n.jsx("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:l,onChange:F=>o(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seiniz"}),Q.map(F=>n.jsx("option",{value:F.id,children:F.name},F.id))]})]})}),P?n.jsx("div",{className:"mt-4 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Gn"}),n.jsx("th",{className:"py-2",children:"alma Gn"}),n.jsx("th",{className:"py-2",children:"Planlanan Dakika"}),n.jsx("th",{className:"py-2",children:"Mola Dakika"}),n.jsx("th",{className:"py-2 text-right",children:"lem"})]})}),n.jsx("tbody",{children:Rv.map(F=>{const me=v[F.value]??{is_workday:!0,planned_minutes:"540",break_minutes:"60"};return n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:F.label}),n.jsx("td",{className:"py-2",children:n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:me.is_workday,onChange:de=>_(Ee=>({...Ee,[F.value]:{...me,is_workday:de.target.checked}}))}),"alma gn"]})}),n.jsx("td",{className:"py-2",children:n.jsx("input",{value:me.planned_minutes,onChange:de=>_(Ee=>({...Ee,[F.value]:{...me,planned_minutes:de.target.value}})),className:"w-full rounded-lg border border-slate-300 px-3 py-2"})}),n.jsx("td",{className:"py-2",children:n.jsx("input",{value:me.break_minutes,onChange:de=>_(Ee=>({...Ee,[F.value]:{...me,break_minutes:de.target.value}})),className:"w-full rounded-lg border border-slate-300 px-3 py-2"})}),n.jsx("td",{className:"py-2 text-right",children:n.jsx("button",{type:"button",disabled:oe.isPending,onClick:()=>{const de=Number(me.planned_minutes),Ee=Number(me.break_minutes);if(!Number.isFinite(de)||de<0){s({variant:"error",title:"Geersiz planlanan dakika",description:`${F.label} iin say giriniz.`});return}if(!Number.isFinite(Ee)||Ee<0){s({variant:"error",title:"Geersiz mola dakikas",description:`${F.label} iin say giriniz.`});return}oe.mutate({department_id:P,weekday:F.value,is_workday:me.is_workday,planned_minutes:Math.trunc(de),break_minutes:Math.trunc(Ee)})},className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Kaydet"})})]},F.value)})})]})}):n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Haftalk kural dzenlemek iin departman sein."})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"3) Departman Vardiyalar"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Bir departman iin birden fazla vardiya tanmlayabilirsiniz (r. 10:00-18:00 ve 14:00-22:00)."}),P?n.jsxs(n.Fragment,{children:[n.jsxs("form",{className:"mt-3 grid gap-3 md:grid-cols-5",onSubmit:F=>{if(F.preventDefault(),!S.trim()){s({variant:"error",title:"Vardiya ad zorunlu",description:"Ltfen vardiya ad girin."});return}const me=Number(R);if(!Number.isFinite(me)||me<0){s({variant:"error",title:"Geersiz mola dakikas",description:"Mola dakikasn say olarak girin."});return}je.mutate({id:Z??void 0,department_id:P,name:S.trim(),start_time_local:k,end_time_local:T,break_minutes:Math.trunc(me),is_active:A})},children:[Z?n.jsxs("div",{className:"md:col-span-5 rounded-lg border border-brand-200 bg-brand-50 px-3 py-2 text-xs font-medium text-brand-700",children:["Dzenleme modu: #",Z]}):null,n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya ad",n.jsx("input",{value:S,onChange:F=>w(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"rn: Sabah 10-18"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Balang",n.jsx("input",{type:"time",value:k,onChange:F=>O(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Biti",n.jsx("input",{type:"time",value:T,onChange:F=>E(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola dakika",n.jsx("input",{value:R,onChange:F=>B(F.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("div",{className:"flex items-end gap-3 pb-1",children:[n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:A,onChange:F=>z(F.target.checked)}),"Aktif"]}),n.jsx("button",{type:"submit",disabled:je.isPending,className:"rounded-lg bg-brand-600 px-3 py-2 text-xs font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:je.isPending?"Kaydediliyor...":Z?"Vardiya Gncelle":"Vardiya Kaydet"}),Z?n.jsx("button",{type:"button",onClick:()=>{I(null),w(""),O("09:00"),E("17:30"),B("60"),z(!0)},className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Vazge"}):null]})]}),n.jsx("div",{className:"mt-4 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Saat Aral"}),n.jsx("th",{className:"py-2",children:"Mola"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2 text-right",children:"Aksiyon"})]})}),n.jsx("tbody",{children:D.map(F=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:F.name}),n.jsxs("td",{className:"py-2",children:[F.start_time_local," - ",F.end_time_local]}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:F.break_minutes})}),n.jsx("td",{className:"py-2",children:F.is_active?"Aktif":"Pasif"}),n.jsx("td",{className:"py-2 text-right",children:n.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{I(F.id),w(F.name),O(F.start_time_local),E(F.end_time_local),B(String(F.break_minutes)),z(F.is_active)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Dzenle"}),F.is_active?n.jsx("button",{type:"button",disabled:ue.isPending||ce.isPending,onClick:()=>{window.confirm("Bu vardiya pasife alnsn m?")&&ue.mutate(F.id)},className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:"Pasife Al"}):n.jsx("button",{type:"button",disabled:ce.isPending||ue.isPending,onClick:()=>ce.mutate({shift:F,nextActive:!0}),className:"rounded-lg border border-emerald-300 px-3 py-1 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:"Aktif Et"})]})})]},F.id))})]})}),D.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Seilen departman iin vardiya bulunmuyor."}):null]}):n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Vardiya dzenlemek iin departman sein."})]})]})}const Dv=Xa({name:ma().min(2,"Bolge adi en az 2 karakter olmali.").max(255),is_active:Rd()});function Lv(e){return fn.isAxiosError(e)&&e.response?.status===409?"Bu bolge adi zaten mevcut. Farkli bir ad girin.":Be(e,"Bolge islemi basarisiz.").message}function oO(){const e=Xn(),{pushToast:s}=aa(),[l,o]=b.useState(""),[d,m]=b.useState(!0),[f,g]=b.useState(""),[v,_]=b.useState(!0),[S,w]=b.useState(null),[k,O]=b.useState(""),[T,E]=b.useState(!0),[R,B]=b.useState(null),A=Fe({queryKey:["regions",v],queryFn:()=>eo({include_inactive:v})}),z=Ge({mutationFn:iA,onSuccess:ee=>{o(""),m(!0),B(null),s({variant:"success",title:"Bolge olusturuldu",description:`${ee.name} basariyla eklendi.`}),e.invalidateQueries({queryKey:["regions"]})},onError:ee=>{const X=Lv(ee);B(X),s({variant:"error",title:"Bolge olusturulamadi",description:X})}}),Z=Ge({mutationFn:({regionId:ee,payload:X})=>rA(ee,X),onSuccess:ee=>{B(null),w(null),O(""),E(!0),s({variant:"success",title:"Bolge guncellendi",description:`${ee.name} guncellendi.`}),e.invalidateQueries({queryKey:["regions"]})},onError:ee=>{const X=Lv(ee);B(X),s({variant:"error",title:"Bolge guncellenemedi",description:X})}}),I=ee=>{ee.preventDefault(),B(null);const X=Dv.safeParse({name:l,is_active:d});if(!X.success){const P=X.error.issues[0]?.message??"Bolge formunu kontrol edin.";B(P);return}z.mutate(X.data)},V=ee=>{if(ee.preventDefault(),B(null),!S)return;const X=Dv.safeParse({name:k,is_active:T});if(!X.success){const P=X.error.issues[0]?.message??"Bolge formunu kontrol edin.";B(P);return}Z.mutate({regionId:S,payload:X.data})},H=b.useMemo(()=>{const ee=A.data??[],X=f.trim().toLowerCase();return X?ee.filter(P=>P.name.toLowerCase().includes(X)):ee},[A.data,f]);return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"Bolgeler",description:"Sube/sehir bazli yonetim icin bolge kayitlarini yonetin."}),n.jsxs(Ie,{children:[n.jsxs("form",{onSubmit:I,className:"grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Bolge adi",n.jsx("input",{value:l,onChange:ee=>o(ee.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Istanbul Avrupa"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:d,onChange:ee=>m(ee.target.checked)}),"Aktif"]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"submit",disabled:z.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:z.isPending?"Kaydediliyor...":"Bolge Ekle"})})]}),R?n.jsx("p",{className:"form-validation mt-2",children:R}):null]}),S?n.jsxs(Ie,{children:[n.jsxs("form",{onSubmit:V,className:"grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Bolge adi",n.jsx("input",{value:k,onChange:ee=>O(ee.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:T,onChange:ee=>E(ee.target.checked)}),"Aktif"]}),n.jsxs("div",{className:"flex items-end gap-2",children:[n.jsx("button",{type:"submit",disabled:Z.isPending,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Z.isPending?"Guncelleniyor...":"Kaydet"}),n.jsx("button",{type:"button",onClick:()=>{w(null),O(""),E(!0),B(null)},className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Vazgec"})]})]}),R?n.jsx("p",{className:"form-validation mt-2",children:R}):null]}):null,A.isLoading?n.jsx($t,{}):null,A.isError?n.jsx(zt,{message:"Bolge listesi alinamadi."}):null,!A.isLoading&&!A.isError?n.jsxs(Ie,{children:[n.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-3 md:items-end",children:[n.jsx(As,{value:f,onChange:g,placeholder:"Bolge adina gore ara..."}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:v,onChange:ee=>_(ee.target.checked)}),"Pasif bolgeleri goster"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Bolge ID"}),n.jsx("th",{className:"py-2",children:"Bolge Adi"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Islem"})]})}),n.jsx("tbody",{children:H.map(ee=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:ee.id}),n.jsx("td",{className:"py-2",children:ee.name}),n.jsx("td",{className:"py-2",children:n.jsx(cr,{value:ee.is_active?"Aktif":"Pasif"})}),n.jsx("td",{className:"py-2",children:n.jsx("button",{type:"button",onClick:()=>{w(ee.id),O(ee.name),E(ee.is_active),B(null)},className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Duzenle"})})]},ee.id))})]})}),H.length===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Arama kriterine uygun bolge bulunamadi."}):null]}):null]})}function G_(){return new Intl.DateTimeFormat("en-CA",{timeZone:"Europe/Istanbul",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date)}function sd(){return{id:null,name:"",title:"",message:"",target:"employees",employee_scope:"all",admin_scope:"all",employee_ids:[],admin_user_ids:[],schedule_kind:"once",run_date_local:G_(),run_time_local:"09:00",is_active:!0}}function Pv(e){return e?new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"short"}).format(new Date(e)):"-"}function cO(e){return e.target==="both"?"alan + Admin":e.target==="admins"?"Admin":"alan"}function Iv(e,s){return e==="all"?`Tm ${s}`:e==="selected"?`Seili ${s}`:"-"}function uO(e){return e.schedule_kind==="daily"?`Her gn ${e.run_time_local.slice(0,5)}`:`${e.run_date_local??"-"} ${e.run_time_local.slice(0,5)}`}function dO(e){return{id:e.id,name:e.name,title:e.title,message:e.message,target:e.target,employee_scope:e.employee_scope??"all",admin_scope:e.admin_scope??"all",employee_ids:e.employee_ids,admin_user_ids:e.admin_user_ids,schedule_kind:e.schedule_kind,run_date_local:e.run_date_local??G_(),run_time_local:e.run_time_local.slice(0,5),is_active:e.is_active}}function mO(e){return{name:e.name.trim(),title:e.title.trim(),message:e.message.trim(),target:e.target,employee_scope:e.target!=="admins"?e.employee_scope:null,admin_scope:e.target!=="employees"?e.admin_scope:null,employee_ids:e.target!=="admins"&&e.employee_scope==="selected"?e.employee_ids:[],admin_user_ids:e.target!=="employees"&&e.admin_scope==="selected"?e.admin_user_ids:[],schedule_kind:e.schedule_kind,run_date_local:e.schedule_kind==="once"?e.run_date_local:null,run_time_local:e.run_time_local,timezone_name:"Europe/Istanbul",is_active:e.is_active}}function hO({employees:e,admins:s}){const l=Xn(),{pushToast:o}=aa(),[d,m]=b.useState(sd()),[f,g]=b.useState(""),[v,_]=b.useState(""),S=Fe({queryKey:["scheduled-notification-tasks"],queryFn:()=>t3(),refetchInterval:15e3}),w=b.useMemo(()=>new Map(e.map(A=>[A.id,A.full_name])),[e]),k=b.useMemo(()=>new Map(s.map(A=>[A.id,A.username])),[s]),O=b.useMemo(()=>{const A=f.trim().toLocaleLowerCase("tr-TR");return A?e.filter(z=>`${z.full_name} ${z.id}`.toLocaleLowerCase("tr-TR").includes(A)).slice(0,120):e.slice(0,120)},[f,e]),T=b.useMemo(()=>{const A=v.trim().toLocaleLowerCase("tr-TR");return A?s.filter(z=>`${z.username} ${z.id}`.toLocaleLowerCase("tr-TR").includes(A)).slice(0,80):s.slice(0,80)},[v,s]),E=Ge({mutationFn:async A=>{const z=mO(A);return A.id!=null?a3(A.id,z):n3(z)},onSuccess:(A,z)=>{o({variant:"success",title:z.id!=null?"Grev gncellendi":"Grev oluturuldu",description:"Zamanlanm bildirim grevi sisteme kaydedildi."}),m(sd()),g(""),_(""),l.invalidateQueries({queryKey:["scheduled-notification-tasks"]})},onError:A=>{const z=Be(A,"Grev kaydedilemedi.");o({variant:"error",title:"Grev hatas",description:z.message})}}),R=Ge({mutationFn:s3,onSuccess:()=>{o({variant:"success",title:"Grev silindi",description:"Zamanlanm grev kaldrld."}),d.id!=null&&m(sd()),l.invalidateQueries({queryKey:["scheduled-notification-tasks"]})},onError:A=>{const z=Be(A,"Grev silinemedi.");o({variant:"error",title:"Silme hatas",description:z.message})}}),B=S.data?.items??[];return n.jsxs(n.Fragment,{children:[n.jsx(Ie,{children:n.jsxs("form",{className:"space-y-4",onSubmit:A=>{A.preventDefault(),E.mutateAsync(d)},children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Zamanlanm Bildirim Grevleri"}),n.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Tek seferlik veya her gn tekrarlayan grev tanmlayn. Tm alanlar, tek kii veya seili liste iin kullanlabilir."})]}),d.id!=null?n.jsx("button",{type:"button",className:"rounded border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700",onClick:()=>m(sd()),children:"Dzenlemeyi temizle"}):null]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Grev ad",n.jsx("input",{value:d.name,onChange:A=>m(z=>({...z,name:A.target.value})),className:"mt-1 w-full rounded border border-slate-300 px-3 py-2",placeholder:"rn: Sabah bilgilendirmesi"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bildirim bal",n.jsx("input",{value:d.title,onChange:A=>m(z=>({...z,title:A.target.value})),className:"mt-1 w-full rounded border border-slate-300 px-3 py-2",placeholder:"Balk"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Hedef",n.jsxs("select",{value:d.target,onChange:A=>m(z=>({...z,target:A.target.value})),className:"mt-1 w-full rounded border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"employees",children:"alanlar"}),n.jsx("option",{value:"admins",children:"Adminler"}),n.jsx("option",{value:"both",children:"Her ikisi"})]})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:d.is_active,onChange:A=>m(z=>({...z,is_active:A.target.checked}))}),"Aktif grev"]})]}),n.jsxs("label",{className:"block text-sm text-slate-700",children:["Bildirim mesaj",n.jsx("textarea",{value:d.message,onChange:A=>m(z=>({...z,message:A.target.value})),rows:4,className:"mt-1 w-full rounded border border-slate-300 px-3 py-2",placeholder:"Gnderilecek mesaj"})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Plan tipi",n.jsxs("select",{value:d.schedule_kind,onChange:A=>m(z=>({...z,schedule_kind:A.target.value})),className:"mt-1 w-full rounded border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"once",children:"Tek sefer"}),n.jsx("option",{value:"daily",children:"Her gn"})]})]}),d.schedule_kind==="once"?n.jsxs("label",{className:"text-sm text-slate-700",children:["Gnderim tarihi",n.jsx("input",{type:"date",value:d.run_date_local,onChange:A=>m(z=>({...z,run_date_local:A.target.value})),className:"mt-1 w-full rounded border border-slate-300 px-3 py-2"})]}):n.jsx("div",{className:"rounded border border-dashed border-slate-200 bg-slate-50 px-3 py-3 text-sm text-slate-500",children:"Bu grev her gn ayn saatte alr."}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gnderim saati",n.jsx("input",{type:"time",value:d.run_time_local,onChange:A=>m(z=>({...z,run_time_local:A.target.value})),className:"mt-1 w-full rounded border border-slate-300 px-3 py-2"})]})]}),d.target!=="admins"?n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"alan hedefi"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Tek alan iin bir kii, seili grup iin birden fazla kii iaretleyin."})]}),n.jsxs("select",{value:d.employee_scope,onChange:A=>m(z=>({...z,employee_scope:A.target.value,employee_ids:A.target.value==="all"?[]:z.employee_ids})),className:"rounded border border-slate-300 px-3 py-2 text-sm",children:[n.jsx("option",{value:"all",children:"Tm alanlar"}),n.jsx("option",{value:"selected",children:"Seili alanlar"})]})]}),d.employee_scope==="selected"?n.jsxs("div",{className:"mt-3",children:[n.jsx(As,{value:f,onChange:g,placeholder:"alan ara..."}),n.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto rounded border border-slate-200 p-2 text-sm",children:O.map(A=>n.jsxs("label",{className:"flex items-center justify-between gap-3 py-1",children:[n.jsxs("span",{children:["#",A.id," - ",A.full_name]}),n.jsx("input",{type:"checkbox",checked:d.employee_ids.includes(A.id),onChange:()=>m(z=>({...z,employee_ids:z.employee_ids.includes(A.id)?z.employee_ids.filter(Z=>Z!==A.id):[...z.employee_ids,A.id]}))})]},A.id))}),n.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Seili alan says: ",d.employee_ids.length]})]}):null]}):null,d.target!=="employees"?n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Admin hedefi"}),n.jsx("p",{className:"text-xs text-slate-500",children:"sterseniz tm adminlere, isterseniz seili adminlere grev oluturabilirsiniz."})]}),n.jsxs("select",{value:d.admin_scope,onChange:A=>m(z=>({...z,admin_scope:A.target.value,admin_user_ids:A.target.value==="all"?[]:z.admin_user_ids})),className:"rounded border border-slate-300 px-3 py-2 text-sm",children:[n.jsx("option",{value:"all",children:"Tm adminler"}),n.jsx("option",{value:"selected",children:"Seili adminler"})]})]}),d.admin_scope==="selected"?n.jsxs("div",{className:"mt-3",children:[n.jsx(As,{value:v,onChange:_,placeholder:"Admin ara..."}),n.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto rounded border border-slate-200 p-2 text-sm",children:T.map(A=>n.jsxs("label",{className:"flex items-center justify-between gap-3 py-1",children:[n.jsxs("span",{children:["#",A.id," - ",A.username]}),n.jsx("input",{type:"checkbox",checked:d.admin_user_ids.includes(A.id),onChange:()=>m(z=>({...z,admin_user_ids:z.admin_user_ids.includes(A.id)?z.admin_user_ids.filter(Z=>Z!==A.id):[...z.admin_user_ids,A.id]}))})]},A.id))}),n.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Seili admin says: ",d.admin_user_ids.length]})]}):null]}):null,n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("button",{type:"submit",disabled:E.isPending,className:"rounded bg-brand-600 px-4 py-2 text-sm font-semibold text-white",children:E.isPending?"Kaydediliyor...":d.id!=null?"Grevi gncelle":"Grev olutur"}),n.jsx("span",{className:"text-xs text-slate-500",children:"Bugn herkese gnderim iin: Tek sefer + bugnn tarihi + tm alanlar."})]})]})}),n.jsxs(Ie,{children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Kaytl grevler"}),n.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Sisteme tanmlanan bildirim grevleri burada grnr. Worker zaman geldiinde bunlar otomatik kuyrua alr."})]}),n.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-600",children:["Toplam: ",S.data?.total??0]})]}),S.isLoading?n.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Grevler ykleniyor..."}):S.isError?n.jsx("p",{className:"mt-4 text-sm text-rose-600",children:"Grev listesi alnamad."}):B.length?n.jsx("div",{className:"mt-4 space-y-3",children:B.map(A=>{const z=A.employee_ids.map(I=>w.get(I)??`#${I}`).slice(0,3),Z=A.admin_user_ids.map(I=>k.get(I)??`#${I}`).slice(0,3);return n.jsxs("article",{className:"rounded-xl border border-slate-200 p-4",children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:A.name}),n.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-medium ${A.is_active?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-600"}`,children:A.is_active?"Aktif":"Pasif"}),n.jsx("span",{className:"rounded-full bg-sky-100 px-2 py-1 text-xs font-medium text-sky-700",children:cO(A)})]}),n.jsx("p",{className:"mt-1 text-sm text-slate-700",children:A.title}),n.jsx("p",{className:"mt-1 text-sm text-slate-500",children:A.message})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",className:"rounded border border-slate-300 px-3 py-2 text-sm font-semibold text-slate-700",onClick:()=>m(dO(A)),children:"Dzenle"}),n.jsx("button",{type:"button",disabled:R.isPending,className:"rounded border border-rose-300 px-3 py-2 text-sm font-semibold text-rose-700",onClick:()=>{window.confirm(`"${A.name}" grevini silmek istiyor musunuz?`)&&R.mutateAsync(A.id)},children:"Sil"})]})]}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-600",children:[n.jsx("strong",{className:"block text-slate-900",children:"Plan"}),uO(A)]}),n.jsxs("div",{className:"rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-600",children:[n.jsx("strong",{className:"block text-slate-900",children:"Sonraki alma"}),Pv(A.next_run_at_utc)]}),n.jsxs("div",{className:"rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-600",children:[n.jsx("strong",{className:"block text-slate-900",children:"alan hedefi"}),Iv(A.employee_scope,"alan"),z.length?n.jsx("div",{className:"mt-1 text-xs text-slate-500",children:z.join(", ")}):null]}),n.jsxs("div",{className:"rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-600",children:[n.jsx("strong",{className:"block text-slate-900",children:"Admin hedefi"}),Iv(A.admin_scope,"admin"),Z.length?n.jsx("div",{className:"mt-1 text-xs text-slate-500",children:Z.join(", ")}):null]})]}),n.jsxs("div",{className:"mt-3 text-xs text-slate-500",children:["Son kuyruk tarihi: ",A.last_enqueued_at_utc?Pv(A.last_enqueued_at_utc):"-"]})]},A.id)})}):n.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Henz kaytl grev bulunmuyor."})]})]})}function Vs(e){return new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"medium"}).format(new Date(e))}function fO(e){return e==="SENT"?"bg-emerald-100 text-emerald-700":e==="FAILED"?"bg-rose-100 text-rose-700":e==="CANCELED"?"bg-slate-200 text-slate-700":e==="SENDING"?"bg-amber-100 text-amber-700":"bg-sky-100 text-sky-700"}function pO(e){return e==="SENT"?"bg-emerald-100 text-emerald-700":e==="FAILED"?"bg-rose-100 text-rose-700":"bg-amber-100 text-amber-700"}function id(e){return e==="admin"?"ADMIN":e==="employee"?"CALISAN":"-"}function xO(e){return e==="Kritik"?"bg-rose-100 text-rose-700":e==="Uyari"?"bg-amber-100 text-amber-700":"bg-sky-100 text-sky-700"}function gO(e){const s=typeof e.flags?.SHIFT_NAME=="string"?e.flags.SHIFT_NAME:null,l=e.source==="MANUAL"||e.created_by_admin?"Manuel":"Cihaz",o=e.type==="IN"?"Giris":"Cikis";return s?`${o}  ${l}  ${s}`:`${o}  ${l}`}function yO(e){return e==="DAILY_REPORT_JOB_MISSING"?"Job olusmamis":e==="DAILY_REPORT_ARCHIVE_MISSING"?"Arsiv olusmamis":e==="DAILY_REPORT_JOB_STUCK"?"Job takilmis":e==="DAILY_REPORT_JOB_FAILED"?"Job hatali":e==="DAILY_REPORT_DELIVERY_EMPTY"?"Teslimat bos":e==="DAILY_REPORT_TARGET_ZERO"?"Hedef 0":e==="DAILY_REPORT_ARCHIVE_MISMATCH"?"Arsiv eslesmiyor":e==="DAILY_REPORT_HEALTH_QUERY_FAILED"?"Health sorgusu hatali":e}function vO(e){return e?(e.alarms??[]).length>0?"border-rose-200 bg-rose-50 text-rose-800":!e.job_exists||!e.archive_exists?"border-amber-200 bg-amber-50 text-amber-800":e.status==="SENT"&&e.delivery_succeeded?"border-emerald-200 bg-emerald-50 text-emerald-800":e.status==="FAILED"?"border-rose-200 bg-rose-50 text-rose-800":"border-sky-200 bg-sky-50 text-sky-800":"border-slate-200 bg-slate-50 text-slate-700"}function bO(e,s){const l=window.URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=s,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l)}const hs=35,$_="pf_admin_push_vapid_public_key";async function _O(e){if(!("serviceWorker"in navigator)||!("PushManager"in window))throw new Error("Bu tarayici push bildirimlerini desteklemiyor.");if((Notification.permission==="granted"?"granted":await Notification.requestPermission())!=="granted")throw new Error("Bildirim izni verilmedi.");const o=await navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"});let d=await o.pushManager.getSubscription();const m=window.localStorage.getItem($_);if(d&&m&&m!==e){try{await d.unsubscribe()}catch{}d=null}return d||(d=await o.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Tp(e)})),d}function NO(){const e=Xn(),{pushToast:s}=aa(),{user:l}=to(),[o,d]=fc(),[m,f]=b.useState("Puantaj Bildirimi"),[g,v]=b.useState(""),[_,S]=b.useState(""),[w,k]=b.useState("employees"),[O,T]=b.useState(15),[E,R]=b.useState(""),[B,A]=b.useState(""),[z,Z]=b.useState(""),[I,V]=b.useState(""),[H,ee]=b.useState(""),[X,P]=b.useState(""),[te,oe]=b.useState(""),[je,ue]=b.useState(1),[ce,Q]=b.useState(1),[$,ie]=b.useState(""),[Ae,_e]=b.useState(""),[D,ae]=b.useState([]),[F,me]=b.useState([]),[de,Ee]=b.useState(null),[Oe,Qe]=b.useState(!1),[pe,Ve]=b.useState(""),[Ye,Ot]=b.useState(""),[ft,ze]=b.useState(""),[at,pt]=b.useState(1),[Rt,It]=b.useState(""),[Qt,ne]=b.useState(null),[Se,Pe]=b.useState(null),[Tt,se]=b.useState(""),[He,_t]=b.useState(""),[pn,Lt]=b.useState(""),[rt,Gn]=b.useState("Puantaj test email bildirimi"),[be,et]=b.useState("Bu mesaj admin bildirim email testidir."),lt=Fe({queryKey:["employees","notify"],queryFn:()=>Xs({status:"active"})}),Nt=Fe({queryKey:["admin-users","notify"],queryFn:y_}),Vt=Fe({queryKey:["admin-push-config"],queryFn:Jf}),Dt=Fe({queryKey:["admin-daily-report-health"],queryFn:GA,refetchInterval:3e4,retry:!1}),Xt=Fe({queryKey:["admin-notification-email-targets"],queryFn:$A,retry:!1}),Bn=Fe({queryKey:["admin-push-self-check"],queryFn:YA,refetchInterval:15e3,retry:!1}),Pt=Fe({queryKey:["notification-jobs",E,B,z,I,H,X,te,je],queryFn:()=>Ep({status:E||void 0,notification_type:B.trim()||void 0,risk_level:z||void 0,audience:I||void 0,employee_id:Number(H)>0?Number(H):void 0,start_date:X||void 0,end_date:te||void 0,offset:(je-1)*hs,limit:hs}),refetchInterval:1e4}),ut=Fe({queryKey:["notification-delivery-logs",ce],queryFn:()=>UA({offset:(ce-1)*hs,limit:hs}),refetchInterval:15e3}),dn=Fe({queryKey:["notify-subs-emp"],queryFn:()=>ZA({}),refetchInterval:15e3}),jn=Fe({queryKey:["notify-subs-admin"],queryFn:()=>HA({}),refetchInterval:15e3}),We=b.useMemo(()=>(Pt.data?.items??[]).find(U=>U.id===Qt)??null,[Pt.data,Qt]),kn=Fe({queryKey:["notification-job-timeline",We?.id,We?.employee_id,We?.local_day],queryFn:()=>Nc({employee_id:We?.employee_id??void 0,start_date:We?.local_day??void 0,end_date:We?.local_day??void 0,limit:50}),enabled:We!==null&&typeof We.employee_id=="number"&&We.employee_id>0&&typeof We.local_day=="string"&&We.local_day.length>0,refetchInterval:15e3}),gt=Fe({queryKey:["daily-archives",pe,Ye,ft,at],queryFn:()=>i3({offset:(at-1)*hs,limit:hs,start_date:pe||void 0,end_date:Ye||void 0,employee_query:ft.trim()||void 0})}),Wa=b.useMemo(()=>{const U=$.trim().toLowerCase();return U?(lt.data??[]).filter(Re=>`${Re.id} ${Re.full_name}`.toLowerCase().includes(U)):lt.data??[]},[lt.data,$]),Dn=b.useMemo(()=>{const U=Ae.trim().toLowerCase();return U?(Nt.data??[]).filter(Re=>`${Re.id} ${Re.username}`.toLowerCase().includes(U)):Nt.data??[]},[Nt.data,Ae]),Kt=b.useMemo(()=>{const U=Rt.trim().toLowerCase(),Re=ut.data?.items??[];return U?Re.filter(yt=>[yt.recipient_name??"",yt.recipient_address??"",String(yt.recipient_id??""),String(yt.device_id??""),yt.ip??"",yt.status,yt.channel,yt.notification_type??"",yt.audience??"",yt.event_id,yt.title??""].join(" ").toLowerCase().includes(U)):Re},[ut.data,Rt]),$n=b.useMemo(()=>Kt.filter(U=>U.status==="SENT").length,[Kt]),es=b.useMemo(()=>Kt.filter(U=>U.status==="FAILED").length,[Kt]),J=b.useMemo(()=>Kt.find(U=>U.id===Se)??null,[Kt,Se]),qe=Pt.data?.items??[],xn=Pt.data?.total??0,ht=Math.max(1,Math.ceil(xn/hs)),Ue=xn===0?0:(je-1)*hs+1,sn=qe.length===0?0:Ue+qe.length-1,yn=ut.data?.total??0,En=Math.max(1,Math.ceil(yn/hs)),Wt=yn===0?0:(ce-1)*hs+1,hn=Kt.length===0?0:Wt+Kt.length-1,sa=gt.data?.items??[],K=gt.data?.total??0,De=Math.max(1,Math.ceil(K/hs)),dt=K===0?0:(at-1)*hs+1,Qn=sa.length===0?0:dt+sa.length-1,Tn=(jn.data??[]).length,q=Tn>0,Ze=(l?.username??"").trim().toLowerCase(),St=typeof l?.admin_user_id=="number"&&l.admin_user_id>0?l.admin_user_id:null,Un=b.useMemo(()=>{const U=jn.data??[];let Re=0,yt=0,ra=0;for(const la of U){const wi=St!==null&&la.admin_user_id===St,_s=Ze.length>0&&(la.admin_username||"").trim().toLowerCase()===Ze;wi&&(Re+=1),_s&&(yt+=1),(wi||_s)&&(ra+=1)}return{total:ra,byId:Re,byUsername:yt}},[jn.data,St,Ze]),Sa=Bn.data,rn=Sa?.self_check_ok!==!1?Sa:void 0,mr=rn?.active_claims_for_actor??Un.total,bs=rn?.active_claims_for_actor_by_id??Un.byId,ts=rn?.active_claims_for_actor_by_username??Un.byUsername,ns=mr>0,Bt=Dt.data,Ws=Bt?.alarms?.length??0,ei=Bt?.status??(Bt?.job_exists?"BILINMIYOR":"YOK"),jt=Ws===0&&!!Bt?.job_exists&&!!Bt?.archive_exists&&Bt?.status==="SENT"&&!!Bt?.delivery_succeeded,Ut=Xt.data?.active_recipients??[],ia=Xt.data?.active_count??0;b.useEffect(()=>{Xt.data&&_t(U=>U.trim().length>0?U:Ut.join(`
`))},[Xt.data,Ut]);const Ln=Ge({mutationFn:XA,onSuccess:U=>{Ee(U),s({variant:"success",title:"Davet hazir",description:"Link admin cihaza gonderildi."}),navigator.clipboard.writeText(U.invite_url)},onError:U=>s({variant:"error",title:"Davet hatasi",description:Be(U,"Davet olusturulamadi").message})}),wa=Ge({mutationFn:JA,onSuccess:U=>{U.total_targets<=0||U.sent<=0?s({variant:"error",title:"Self-test basarisiz",description:`Hedef: ${U.total_targets} | Gonderilen: ${U.sent} | Hata: ${U.failed}`}):s({variant:"success",title:"Self-test bildirimi gonderildi",description:`Hedef: ${U.total_targets} | Gonderilen: ${U.sent}`}),e.invalidateQueries({queryKey:["admin-push-self-check"]}),e.invalidateQueries({queryKey:["notification-delivery-logs"]})},onError:U=>{const Re=Be(U,"Self-test bildirimi gonderilemedi.");s({variant:"error",title:"Self-test hatasi",description:Re.message})}}),zs=Ge({mutationFn:async()=>{const U=await Jf();if(!U.enabled||!U.vapid_public_key)throw new Error("Push bildirim servisi yapilandirilmamis.");const Re=await _O(U.vapid_public_key),yt=await S_({subscription:Re.toJSON(),send_test:!0});return window.localStorage.setItem($_,U.vapid_public_key),yt},onSuccess:U=>{s({variant:U.test_push_ok?"success":"error",title:U.test_push_ok?"Heal tamamlandi":"Heal tamamlandi ama test hatali",description:U.test_push_ok?`Abonelik yenilendi (#${U.subscription_id}) ve test bildirimi gonderildi.`:`Abonelik yenilendi (#${U.subscription_id}) ancak test bildirimi hatali.`}),e.invalidateQueries({queryKey:["admin-push-self-check"]}),e.invalidateQueries({queryKey:["notify-subs-admin"]}),e.invalidateQueries({queryKey:["notification-delivery-logs"]})},onError:U=>{if(U instanceof Error&&!("response"in U)){s({variant:"error",title:"Heal hatasi",description:U.message});return}const Re=Be(U,"Cihaz heal islemi basarisiz oldu.");s({variant:"error",title:"Heal hatasi",description:Re.message})}}),ot=Ge({mutationFn:async()=>{const U=Array.from(new Set(He.split(/[\n,;]+/g).map(Re=>Re.trim().toLowerCase()).filter(Re=>Re.length>0)));return QA({emails:U})},onSuccess:U=>{_t((U.active_recipients??[]).join(`
`)),s({variant:"success",title:"Mail alicilari guncellendi",description:`Aktif alici: ${U.active_count}`}),e.invalidateQueries({queryKey:["admin-notification-email-targets"]})},onError:U=>{const Re=Be(U,"Mail alicilari kaydedilemedi.");s({variant:"error",title:"Kayit hatasi",description:Re.message})}}),ln=Ge({mutationFn:async()=>{const U=pn.trim();return VA({recipients:U?[U]:void 0,subject:rt.trim()||void 0,message:be.trim()||void 0})},onSuccess:U=>{if(!U.ok){s({variant:"error",title:"Test mail gonderilemedi",description:`${U.error??U.mode} | Alici: ${U.recipients.join(", ")||"-"}`});return}s({variant:"success",title:"Test mail gonderildi",description:`Alici: ${U.recipients.join(", ")} | Sent: ${U.sent}`})},onError:U=>{const Re=Be(U,"Test mail gonderilemedi.");s({variant:"error",title:"Test mail hatasi",description:Re.message})}}),Os=Ge({mutationFn:e3,onSuccess:(U,Re)=>{const yt=Re.target==="admins"||Re.target==="both";U.total_targets<=0?s({variant:"error",title:"Bildirim gonderilemedi",description:"Hedef 0. Aktif abonelik yok; once cihaz claim edin."}):U.sent<=0?s({variant:"error",title:"Bildirim gonderilemedi",description:`Hedef: ${U.total_targets} / Gonderilen: ${U.sent} / Hata: ${U.failed}`}):(s({variant:"success",title:"Bildirim gonderildi",description:`Hedef: ${U.total_targets} / Gonderilen: ${U.sent}`}),yt&&!ns&&s({variant:"error",title:"Bu hesapta claim eksik",description:"Admin hedefli gonderim yapildi ancak bu hesapta aktif claim olmadigi icin sana dusmeyebilir."})),yt&&U.admin_target_missing&&s({variant:"error",title:"Admin hedefi 0",description:"Calisan bildirimi gitmis olabilir ama admin hedefinde aktif abonelik yok. Admin claim zorunlu."}),e.invalidateQueries({queryKey:["notification-jobs"]}),e.invalidateQueries({queryKey:["notification-delivery-logs"]}),e.invalidateQueries({queryKey:["admin-push-self-check"]})},onError:U=>s({variant:"error",title:"Gonderim hatasi",description:Be(U,"Bildirim gonderilemedi").message})}),Si=Ge({mutationFn:FA,onSuccess:()=>{e.invalidateQueries({queryKey:["notification-jobs"]})}}),en=Ge({mutationFn:({jobId:U,note:Re})=>qA(U,Re),onSuccess:()=>{s({variant:"success",title:"Bildirim notu kaydedildi",description:"Admin aciklamasi guncellendi."}),e.invalidateQueries({queryKey:["notification-jobs"]})},onError:U=>{const Re=Be(U,"Bildirim notu kaydedilemedi.");s({variant:"error",title:"Not kayit hatasi",description:Re.message})}}),ti=Ge({mutationFn:l3,onSuccess:(U,Re)=>{const yt=(gt.data?.items??[]).find(ra=>ra.id===Re);bO(U,yt?.file_name??`arsiv-${Re}.xlsx`)}}),Rs=Ge({mutationFn:U=>d3(U),onSuccess:U=>{U.total_targets<=0||U.sent<=0?s({variant:"error",title:"Arsiv bildirimi gonderilemedi",description:`Hedef: ${U.total_targets} | Gonderilen: ${U.sent} | Hata: ${U.failed}. Aktif admin cihazi claim edilmeli.`}):(s({variant:"success",title:"Arsiv bildirimi gonderildi",description:`Hedef: ${U.total_targets} | Gonderilen: ${U.sent} | Hata: ${U.failed}`}),ns||s({variant:"error",title:"Bu hesapta claim eksik",description:"Bildirim gitti ama bu admin hesabinda aktif cihaz claim olmadigi icin sana dusmeyebilir."})),e.invalidateQueries({queryKey:["notification-jobs"]}),e.invalidateQueries({queryKey:["admin-daily-report-health"]})},onError:U=>{const Re=Be(U,"Arsiv bildirimi gonderilemedi.");Re.code==="ADMIN_PUSH_SUBSCRIPTION_REQUIRED"?s({variant:"error",title:"Admin hedefi 0",description:"Aktif admin push aboneligi yok. Once admin cihazini claim edip tekrar deneyin."}):s({variant:"error",title:"Arsiv bildirimi basarisiz",description:Re.message}),e.invalidateQueries({queryKey:["admin-daily-report-health"]})}});return b.useEffect(()=>{if(Oe)return;const U=o.get("archive_id");if(!U)return;const Re=Number(U);if(!Number.isInteger(Re)||Re<=0){Qe(!0);return}if(!(gt.data?.items??[]).find(la=>la.id===Re))return;Qe(!0),ti.mutate(Re);const ra=new URLSearchParams(o);ra.delete("archive_id"),d(ra,{replace:!0})},[Oe,gt.data,ti,o,d]),b.useEffect(()=>{const U=o.get("job_id");if(!U)return;const Re=Number(U);!Number.isInteger(Re)||Re<=0||ne(Re)},[o]),b.useEffect(()=>{ue(1)},[E,B,z,I,H,X,te]),b.useEffect(()=>{Pt.data&&ue(U=>U<1?1:U>ht?ht:U)},[Pt.data,ht]),b.useEffect(()=>{const U=Pt.data?.items??[];if(U.length===0){ne(null);return}(Qt===null||!U.some(Re=>Re.id===Qt))&&ne(U[0].id)},[Pt.data,Qt]),b.useEffect(()=>{se(We?.admin_note??"")},[We?.id,We?.admin_note]),b.useEffect(()=>{Q(1)},[Rt]),b.useEffect(()=>{ut.data&&Q(U=>U<1?1:U>En?En:U)},[ut.data,En]),b.useEffect(()=>{pt(1)},[pe,Ye,ft]),b.useEffect(()=>{if(Kt.length===0){Pe(null);return}(Se===null||!Kt.some(U=>U.id===Se))&&Pe(Kt[0].id)},[Kt,Se]),b.useEffect(()=>{gt.data&&pt(U=>U<1?1:U>De?De:U)},[gt.data,De]),n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"Bildirim Merkezi",description:"Push, claim daveti, job yonetimi ve gunluk Excel arsivi."}),n.jsxs(Ie,{children:[n.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Admin davet suresi (dk)",n.jsx("input",{type:"number",min:1,max:1440,value:O,onChange:U=>T(Number(U.target.value||15)),className:"mt-1 w-40 rounded border border-slate-300 px-3 py-2"})]}),n.jsx("button",{type:"button",onClick:()=>Ln.mutate({expires_in_minutes:O}),className:"rounded bg-brand-600 px-4 py-2 text-sm font-semibold text-white",children:"Admin cihaz claim linki uret"}),n.jsxs("span",{className:"text-xs text-slate-500",children:["Push: ",Vt.data?.enabled?"Aktif":"Pasif"]})]}),n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Link otomatik kopyalanir. Guvenlik icin kisa sure onerilir (ornegin 10-30 dk). Ekran: /admin-panel/device-claim?token=..."}),de?n.jsxs("div",{className:"mt-2 rounded border border-emerald-200 bg-emerald-50 p-2 text-xs text-emerald-800",children:[n.jsxs("p",{children:["Token: ",de.token]}),n.jsxs("p",{className:"break-all",children:["Link: ",de.invite_url]}),n.jsxs("p",{children:["Bitis: ",Vs(de.expires_at)]})]}):null]}),n.jsx(Ie,{children:n.jsxs("form",{className:"space-y-3",onSubmit:U=>{U.preventDefault(),Os.mutate({title:m.trim(),message:g.trim(),password:_.trim(),target:w,employee_ids:w!=="admins"&&D.length>0?D:void 0,admin_user_ids:w!=="employees"&&F.length>0?F:void 0})},children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Manuel Push Gonder"}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[n.jsx("input",{value:m,onChange:U=>f(U.target.value),className:"rounded border border-slate-300 px-3 py-2",placeholder:"Baslik"}),n.jsx("input",{type:"password",value:_,onChange:U=>S(U.target.value),className:"rounded border border-slate-300 px-3 py-2",placeholder:"Admin sifresi"}),n.jsxs("select",{value:w,onChange:U=>k(U.target.value),className:"rounded border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"employees",children:"Calisanlara"}),n.jsx("option",{value:"admins",children:"Adminlere"}),n.jsx("option",{value:"both",children:"Her ikisine"})]})]}),n.jsx("textarea",{value:g,onChange:U=>v(U.target.value),rows:3,className:"w-full rounded border border-slate-300 px-3 py-2",placeholder:"Mesaj"}),w!=="admins"?n.jsxs("div",{children:[n.jsx(As,{value:$,onChange:ie,placeholder:"Calisan filtrele..."}),n.jsx("div",{className:"mt-2 max-h-36 overflow-y-auto rounded border border-slate-200 p-2 text-sm",children:Wa.map(U=>n.jsxs("label",{className:"flex items-center justify-between py-1",children:[n.jsxs("span",{children:["#",U.id," - ",U.full_name]}),n.jsx("input",{type:"checkbox",checked:D.includes(U.id),onChange:()=>ae(Re=>Re.includes(U.id)?Re.filter(yt=>yt!==U.id):[...Re,U.id])})]},U.id))})]}):null,w!=="employees"?n.jsxs("div",{children:[n.jsx(As,{value:Ae,onChange:_e,placeholder:"Admin filtrele..."}),n.jsx("div",{className:"mt-2 max-h-36 overflow-y-auto rounded border border-slate-200 p-2 text-sm",children:Dn.map(U=>n.jsxs("label",{className:"flex items-center justify-between py-1",children:[n.jsxs("span",{children:["#",U.id," - ",U.username]}),n.jsx("input",{type:"checkbox",checked:F.includes(U.id),onChange:()=>me(Re=>Re.includes(U.id)?Re.filter(yt=>yt!==U.id):[...Re,U.id])})]},U.id))})]}):null,n.jsx("button",{type:"submit",className:"rounded bg-brand-600 px-4 py-2 text-sm font-semibold text-white",children:"Bildirimi gonder"})]})}),n.jsx(hO,{employees:lt.data??[],admins:Nt.data??[]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Bildirim Isleri"}),n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-3 xl:grid-cols-6",children:[n.jsxs("select",{value:E,onChange:U=>R(U.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"Durum: Tumu"}),n.jsx("option",{value:"PENDING",children:"PENDING"}),n.jsx("option",{value:"SENDING",children:"SENDING"}),n.jsx("option",{value:"SENT",children:"SENT"}),n.jsx("option",{value:"FAILED",children:"FAILED"}),n.jsx("option",{value:"CANCELED",children:"CANCELED"})]}),n.jsx("input",{value:B,onChange:U=>A(U.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm",placeholder:"Tur or. erken_cikis"}),n.jsxs("select",{value:z,onChange:U=>Z(U.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"Risk: Tumu"}),n.jsx("option",{value:"Bilgi",children:"Bilgi"}),n.jsx("option",{value:"Uyari",children:"Uyari"}),n.jsx("option",{value:"Kritik",children:"Kritik"})]}),n.jsxs("select",{value:I,onChange:U=>V(U.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"Hedef: Tumu"}),n.jsx("option",{value:"employee",children:"Calisan"}),n.jsx("option",{value:"admin",children:"Admin"})]}),n.jsx("input",{value:H,onChange:U=>ee(U.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm",placeholder:"Personel ID"}),n.jsx("button",{type:"button",onClick:()=>{Pt.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Listeyi yenile"}),n.jsx("input",{type:"date",value:X,onChange:U=>P(U.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm"}),n.jsx("input",{type:"date",value:te,onChange:U=>oe(U.target.value),className:"rounded border border-slate-300 px-3 py-2 text-sm"})]}),Pt.isLoading?n.jsx($t,{label:"Yukleniyor..."}):null,Pt.isError?n.jsx(zt,{message:"Job listesi alinamadi."}):null,!Pt.isLoading&&!Pt.isError?n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:[n.jsxs("span",{children:["Gosterilen satir: ",Ue,"-",sn," / ",xn]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>ue(U=>Math.max(1,U-1)),disabled:je<=1,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Onceki"}),n.jsxs("span",{children:["Sayfa ",je," / ",ht]}),n.jsx("button",{type:"button",onClick:()=>ue(U=>Math.min(ht,U+1)),disabled:je>=ht,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}):null,n.jsxs("div",{className:"mt-3 grid gap-4 xl:grid-cols-[minmax(0,1fr)_420px]",children:[n.jsx("div",{className:"max-h-[620px] overflow-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"sticky top-0 bg-white",children:n.jsxs("tr",{className:"text-xs uppercase text-slate-500",children:[n.jsx("th",{className:"px-2 py-2",children:"Sira"}),n.jsx("th",{className:"px-2 py-2",children:"Tur"}),n.jsx("th",{className:"px-2 py-2",children:"Risk"}),n.jsx("th",{className:"px-2 py-2",children:"Hedef"}),n.jsx("th",{className:"px-2 py-2",children:"Personel"}),n.jsx("th",{className:"px-2 py-2",children:"Baslik"}),n.jsx("th",{className:"px-2 py-2",children:"Durum"}),n.jsx("th",{className:"px-2 py-2",children:"Olay"})]})}),n.jsx("tbody",{children:qe.map((U,Re)=>{const yt=U.id===Qt;return n.jsxs("tr",{className:`border-t border-slate-100 ${yt?"bg-sky-50":"hover:bg-slate-50"} cursor-pointer`,onClick:()=>ne(U.id),children:[n.jsx("td",{className:"px-2 py-2 text-slate-500",children:Ue+Re}),n.jsx("td",{className:"px-2 py-2 font-medium text-slate-700",children:U.notification_type??U.job_type}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("span",{className:`rounded px-2 py-1 text-xs ${xO(U.risk_level)}`,children:U.risk_level??"-"})}),n.jsx("td",{className:"px-2 py-2",children:id(U.audience)}),n.jsxs("td",{className:"px-2 py-2",children:["#",U.employee_id??"-"]}),n.jsx("td",{className:"px-2 py-2 max-w-56 truncate",title:U.title??"",children:U.title??"-"}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("span",{className:`rounded px-2 py-1 text-xs ${fO(U.status)}`,children:U.status})}),n.jsx("td",{className:"px-2 py-2",children:U.event_ts_utc?Vs(U.event_ts_utc):Vs(U.scheduled_at_utc)})]},U.id)})})]})}),n.jsxs("aside",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Secili bildirim detayi"}),We===null?n.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Listeden bir bildirim secin."}):n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3 text-sm text-slate-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Baslik:"})," ",We.title??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Aciklama:"})," ",We.description??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Olay Zamani:"})," ",We.event_ts_utc?Vs(We.event_ts_utc):"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Vardiya Bilgisi:"})," ",We.shift_summary??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Gerceklesen Saat:"})," ",We.actual_time_summary??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Risk Seviyesi:"})," ",We.risk_level??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Islem Onerisi:"})," ",We.suggested_action??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Event ID:"})," ",We.event_id??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Personel:"})," #",We.employee_id??"-"," "]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Hedef:"})," ",id(We.audience)]}),We.status==="PENDING"||We.status==="SENDING"?n.jsx("button",{type:"button",className:"mt-2 rounded border border-rose-300 px-3 py-2 text-xs text-rose-700",onClick:()=>Si.mutate(We.id),children:"Bildirimi iptal et"}):null]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("h6",{className:"text-sm font-semibold text-slate-900",children:"Gun timeline'i"}),We.employee_id&&We.local_day?n.jsx(Ys,{to:`/attendance-events?employee_id=${We.employee_id}&start_date=${We.local_day}&end_date=${We.local_day}`,className:"rounded border border-slate-300 px-2 py-1 text-xs text-slate-700",children:"Manuel duzeltme ekranini ac"}):null]}),kn.isLoading?n.jsx($t,{label:"Timeline yukleniyor..."}):null,kn.isError?n.jsx(zt,{message:"Timeline alinamadi."}):null,!kn.isLoading&&!kn.isError?n.jsx("div",{className:"mt-2 space-y-2",children:(kn.data??[]).length===0?n.jsx("p",{className:"text-sm text-slate-500",children:"Bu gun icin timeline kaydi bulunamadi."}):(kn.data??[]).map(U=>n.jsxs("div",{className:"rounded border border-slate-200 bg-slate-50 p-2 text-sm text-slate-700",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("strong",{children:gO(U)}),n.jsx("span",{children:Vs(U.ts_utc)})]}),U.note?n.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:["Not: ",U.note]}):null]},U.id))}):null]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsx("h6",{className:"text-sm font-semibold text-slate-900",children:"Admin aciklamasi"}),n.jsx("textarea",{value:Tt,onChange:U=>se(U.target.value),rows:4,className:"mt-2 w-full rounded border border-slate-300 px-2 py-1.5 text-sm",placeholder:"Bildirimle ilgili operasyon notu ekleyin"}),n.jsx("button",{type:"button",onClick:()=>en.mutate({jobId:We.id,note:Tt.trim()||null}),disabled:en.isPending,className:"mt-2 rounded border border-brand-300 px-3 py-2 text-sm text-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:en.isPending?"Kaydediliyor...":"Aciklamayi kaydet"})]})]})]})]}),!Pt.isLoading&&!Pt.isError&&xn===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Filtreye uygun bildirim isi bulunamadi."}):null]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Abonelik Ozeti"}),n.jsxs("div",{className:"grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Calisan abonelik: ",(dn.data??[]).length]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Admin abonelik: ",(jn.data??[]).length]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Arsiv dosyasi: ",K]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Teslimat log satiri: ",yn]})]}),q?null:n.jsx("p",{className:"mt-2 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:'Aktif admin push aboneligi yok. "Admin cihaz claim linki uret" adimini tamamlamadan bildirim gonderilemez.'})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Admin Push Self-Check"}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Login admin: ",n.jsx("strong",{children:l?.username??"-"})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Login admin ID: ",n.jsx("strong",{children:l?.admin_user_id??"-"})]}),n.jsxs("div",{className:`rounded border p-3 text-sm ${ns?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-rose-200 bg-rose-50 text-rose-800"}`,children:["Bu hesap claim: ",n.jsx("strong",{children:mr})," (id:",bs," / user:",ts,")"]}),n.jsxs("div",{className:`rounded border p-3 text-sm ${rn?.push_enabled??Vt.data?.enabled?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-rose-200 bg-rose-50 text-rose-800"}`,children:["Push config:"," ",n.jsx("strong",{children:rn?.push_enabled??Vt.data?.enabled?"Aktif":"Pasif"})]})]}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Toplam aktif admin claim: ",n.jsx("strong",{children:rn?.active_total_subscriptions??Tn})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Son claim gorulme:"," ",n.jsx("strong",{children:rn?.latest_claim_seen_at?Vs(rn.latest_claim_seen_at):"-"})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Claim saglik:"," ",n.jsxs("strong",{children:["saglikli ",rn?.active_claims_healthy??0," / ","hatali ",rn?.active_claims_with_error??0," / ","stale ",rn?.active_claims_stale??0]})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>wa.mutate(),disabled:wa.isPending||zs.isPending,className:"rounded border border-brand-300 px-3 py-2 text-sm text-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:wa.isPending?"Self-test gonderiliyor...":"Kendime test bildirimi gonder"}),n.jsx("button",{type:"button",onClick:()=>zs.mutate(),disabled:zs.isPending||wa.isPending,className:"rounded border border-emerald-300 px-3 py-2 text-sm text-emerald-700 disabled:cursor-not-allowed disabled:opacity-60",children:zs.isPending?"Heal calisiyor...":"Bu cihazi heal et"})]})})]}),n.jsxs("div",{className:"mt-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:["Son self-test:"," ",n.jsx("strong",{children:rn?.last_self_test_at?Vs(rn.last_self_test_at):"-"})," | ","Durum:"," ",n.jsx("strong",{children:rn?.last_self_test_success===null?"-":rn?.last_self_test_success?"BASARILI":"HATALI"})," | ","Hedef:"," ",n.jsx("strong",{children:rn?.last_self_test_total_targets??"-"})," | ","Gonderilen:"," ",n.jsx("strong",{children:rn?.last_self_test_sent??"-"})," | ","Hata:"," ",n.jsx("strong",{children:rn?.last_self_test_failed??"-"})]}),Bn.isError?n.jsx("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:"Self-check verisi alinamadi. Fallback olarak abonelik listesi kullaniliyor."}):null,Bn.data?.self_check_ok===!1?n.jsxs("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:["Self-check degradasyona dustu: ",Bn.data.self_check_error||"bilinmeyen hata",". Fallback olarak abonelik listesi kullaniliyor."]}):null,ns?null:n.jsx("p",{className:"mt-2 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:"Bu admin hesabinda aktif cihaz claim gorunmuyor. Bildirim almak icin telefonda claim linkini acip izin adimini tamamla."}),rn?.latest_claim_error?n.jsxs("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:["Son claim hatasi: ",rn.latest_claim_error]}):null]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Mail Bildirim Ayarlari"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Gece gunluk Excel arsiv job'unda mail gonderimi best-effort calisir; push teslimati onceliklidir."}),n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-3",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Aktif mail alicisi: ",n.jsx("strong",{children:ia})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Son health email: ",n.jsx("strong",{children:Bt?.email_sent??0})]}),n.jsx("button",{type:"button",onClick:()=>{Xt.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Mail listesini yenile"})]}),Xt.isError?n.jsx("p",{className:"mt-2 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:"Mail hedefleri yuklenemedi."}):null,ia<=0?n.jsx("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:"Aktif mail alicisi yok. Mail kanali devre disi kalir, push bildirimi calismaya devam eder."}):null,n.jsxs("label",{className:"mt-3 block text-xs text-slate-600",children:["Alici listesi (satir satir veya virgul ile)",n.jsx("textarea",{value:He,onChange:U=>_t(U.target.value),rows:5,placeholder:`ornek@domain.com
destek@domain.com`,className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>ot.mutate(),disabled:ot.isPending,className:"rounded border border-brand-300 bg-brand-50 px-3 py-2 text-sm text-brand-700 disabled:cursor-not-allowed disabled:opacity-60",children:ot.isPending?"Kaydediliyor...":"Mail alicilarini kaydet"}),n.jsx("button",{type:"button",onClick:()=>_t(Ut.join(`
`)),className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Listeyi geri al"})]}),n.jsxs("div",{className:"mt-4 rounded border border-slate-200 bg-slate-50 p-3",children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Test mail gonder"}),n.jsx("p",{className:"mt-1 text-xs text-slate-600",children:"Alici bos birakilirsa kayitli tum aktif adreslere test mail gonderilir."}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-3",children:[n.jsxs("label",{className:"text-xs text-slate-600",children:["Test alici (opsiyonel)",n.jsx("input",{value:pn,onChange:U=>Lt(U.target.value),placeholder:"tekbir@adres.com",className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsxs("label",{className:"text-xs text-slate-600 md:col-span-2",children:["Konu",n.jsx("input",{value:rt,onChange:U=>Gn(U.target.value),className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]})]}),n.jsxs("label",{className:"mt-2 block text-xs text-slate-600",children:["Mesaj",n.jsx("textarea",{value:be,onChange:U=>et(U.target.value),rows:3,className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsx("button",{type:"button",onClick:()=>ln.mutate(),disabled:ln.isPending,className:"mt-2 rounded border border-slate-300 px-3 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-60",children:ln.isPending?"Test gonderiliyor...":"Test mail gonder"})]})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Bildirim Teslimat Logu"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Kime gitti / gitmedi, isim-ID, cihaz, IP ve hata bilgisini izleyin."}),n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Toplam satir: ",yn]}),n.jsxs("div",{className:"rounded border border-emerald-200 bg-emerald-50 p-3 text-sm text-emerald-800",children:["Gonderildi: ",$n]}),n.jsxs("div",{className:"rounded border border-rose-200 bg-rose-50 p-3 text-sm text-rose-800",children:["Gonderilemedi: ",es]}),n.jsx("button",{type:"button",onClick:()=>{ut.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Logu yenile"})]}),n.jsx("div",{className:"mt-3",children:n.jsx(As,{value:Rt,onChange:It,placeholder:"Isim, ID, cihaz, IP, baslik, durum ara..."})}),!ut.isLoading&&!ut.isError?n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:[n.jsxs("span",{children:["Gosterilen satir: ",Wt,"-",hn," / ",yn]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Q(U=>Math.max(1,U-1)),disabled:ce<=1,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Onceki"}),n.jsxs("span",{children:["Sayfa ",ce," / ",En]}),n.jsx("button",{type:"button",onClick:()=>Q(U=>Math.min(En,U+1)),disabled:ce>=En,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}):null,ut.isLoading?n.jsx($t,{label:"Teslimat logu yukleniyor..."}):null,ut.isError?n.jsx(zt,{message:"Teslimat logu alinamadi."}):null,!ut.isLoading&&!ut.isError?n.jsxs("div",{className:"mt-3 grid gap-4 xl:grid-cols-[minmax(0,1fr)_360px]",children:[n.jsxs("section",{className:"overflow-hidden rounded-xl border border-slate-900 bg-[#09131d] text-slate-200 shadow-inner",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-slate-700 bg-slate-900/70 px-3 py-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-rose-400"}),n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-amber-300"}),n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-emerald-400"}),n.jsx("span",{className:"ml-2 text-xs font-semibold text-slate-300",children:"delivery-terminal"})]}),n.jsxs("span",{className:"text-[11px] text-slate-400",children:[Wt,"-",hn," / ",yn]})]}),n.jsxs("div",{className:"max-h-[520px] overflow-auto",children:[n.jsxs("table",{className:"min-w-full table-fixed text-left text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-900/95 text-[11px] uppercase text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"w-36 px-2 py-2",children:"Zaman"}),n.jsx("th",{className:"w-24 px-2 py-2",children:"Durum"}),n.jsx("th",{className:"w-24 px-2 py-2",children:"Kanal"}),n.jsx("th",{className:"w-24 px-2 py-2",children:"Kitle"}),n.jsx("th",{className:"w-56 px-2 py-2",children:"Kisi"}),n.jsx("th",{className:"w-40 px-2 py-2",children:"Tur"}),n.jsx("th",{className:"w-48 px-2 py-2",children:"Baslik"}),n.jsx("th",{className:"w-64 px-2 py-2",children:"Hata"})]})}),n.jsx("tbody",{children:Kt.map((U,Re)=>{const yt=U.id===Se;return n.jsxs("tr",{onClick:()=>Pe(U.id),className:`cursor-pointer border-t border-slate-800 ${yt?"bg-cyan-900/35":"hover:bg-slate-800/55"}`,children:[n.jsx("td",{className:"px-2 py-2 text-slate-300",children:Vs(U.sent_at_utc)}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("span",{className:`rounded px-2 py-0.5 text-[11px] font-semibold ${pO(U.status)}`,children:U.status})}),n.jsx("td",{className:"px-2 py-2 text-slate-300 uppercase",children:U.channel}),n.jsx("td",{className:"px-2 py-2 text-slate-300",children:id(U.audience)}),n.jsxs("td",{className:"px-2 py-2 text-slate-300 truncate",title:`#${U.recipient_id??"-"} - ${U.recipient_name??"-"}`,children:["#",U.recipient_id??"-"," - ",U.recipient_name??"-"]}),n.jsx("td",{className:"px-2 py-2 text-slate-300 truncate",title:U.notification_type??"-",children:U.notification_type??"-"}),n.jsx("td",{className:"px-2 py-2 text-slate-300 truncate",title:U.title??"-",children:U.title??"-"}),n.jsx("td",{className:"px-2 py-2 text-slate-300 truncate",title:U.error??"-",children:U.error??"-"})]},`${U.id}-${U.recipient_type}-${U.recipient_id??0}-${U.device_id??0}-${Re}`)})})]}),Kt.length===0?n.jsx("p",{className:"px-3 py-3 text-sm text-amber-300",children:"Filtreye uygun teslimat kaydi bulunamadi."}):null]})]}),n.jsxs("aside",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Secili teslimat detayi"}),J===null?n.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Listeden bir kayit secin."}):n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-2 text-sm text-slate-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Zaman:"})," ",Vs(J.sent_at_utc)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Durum:"})," ",J.status]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Hedef tipi:"})," ",J.recipient_type==="employee"?"CALISAN":"ADMIN"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Kitle:"})," ",id(J.audience)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Kisi:"})," #",J.recipient_id??"-"," -"," ",J.recipient_name??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"E-posta:"})," ",J.recipient_address??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Tur:"})," ",J.notification_type??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Kanal:"})," ",J.channel.toUpperCase()]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Cihaz:"})," ",J.device_id??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"IP:"})," ",J.ip??"-"]}),n.jsxs("p",{className:"break-words",children:[n.jsx("span",{className:"font-semibold",children:"Baslik:"})," ",J.title??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Event ID:"})," ",J.event_id]}),n.jsxs("p",{className:"break-all",children:[n.jsx("span",{className:"font-semibold",children:"Endpoint:"})," ",J.endpoint??"-"]}),n.jsxs("p",{className:"break-all",children:[n.jsx("span",{className:"font-semibold",children:"Hata:"})," ",J.error??"-"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-xs font-semibold text-slate-600",children:"JSON detay"}),n.jsx("pre",{className:"max-h-64 overflow-auto rounded-lg bg-slate-900 p-2 text-[11px] text-slate-100",children:JSON.stringify(J,null,2)})]})]})]})]}):null]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Gunluk Excel Arsivi"}),n.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:`rounded border p-3 text-sm ${vO(Bt)}`,children:["Gece job durumu: ",n.jsx("strong",{children:ei}),n.jsxs("div",{className:"mt-1 text-xs",children:["Alarm: ",n.jsx("strong",{children:Ws})]})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Rapor tarihi: ",n.jsx("strong",{children:Bt?.report_date??"-"}),n.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Son kontrol: ",Bt?.evaluated_at_utc?Vs(Bt.evaluated_at_utc):"-"]})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Teslimat: ",n.jsx("strong",{children:Bt?.push_sent??0})," / ",Bt?.push_total_targets??0,n.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Push hata: ",Bt?.push_failed??0," | Email: ",Bt?.email_sent??0]})]}),n.jsxs("div",{className:"rounded border border-slate-200 p-3 text-sm",children:["Arsiv: ",n.jsx("strong",{children:Bt?.archive_exists?`#${Bt.archive_id}`:"YOK"}),n.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Calisan: ",Bt?.archive_employee_count??0," | Boyut: ",((Bt?.archive_file_size_bytes??0)/1024).toFixed(1)," KB"]})]})]}),Dt.isError?n.jsx("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:"Gece 00:00 job health verisi alinamadi."}):null,!Dt.isError&&Bt?n.jsx("div",{className:"mt-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:Ws>0?n.jsx("div",{className:"flex flex-wrap gap-1",children:Bt.alarms.map(U=>n.jsx("span",{className:"rounded border border-rose-300 bg-rose-100 px-2 py-0.5 text-rose-800",children:yO(U)},U))}):n.jsx("span",{className:"text-emerald-700",children:"Alarm yok. Gece arsiv job durumu saglikli."})}):null,Bt?.target_zero?n.jsx("p",{className:"mt-2 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-800",children:"Gece job hedefi 0 gorunuyor. Push claim veya mail alici listesi bos olabilir."}):null,Bt?.last_error?n.jsxs("p",{className:"mt-2 rounded border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:["Son job hatasi: ",Bt.last_error]}):null,Bt&&jt?n.jsx("p",{className:"mt-2 rounded border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-800",children:"Gece 00:00 job olustu, teslimat yapildi ve alarm bulunmuyor."}):null,n.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-4",children:[n.jsxs("label",{className:"text-xs text-slate-600",children:["Baslangic",n.jsx("input",{type:"date",value:pe,onChange:U=>Ve(U.target.value),className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsxs("label",{className:"text-xs text-slate-600",children:["Bitis",n.jsx("input",{type:"date",value:Ye,onChange:U=>Ot(U.target.value),className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsxs("label",{className:"text-xs text-slate-600",children:["Calisan icerigi",n.jsx("input",{value:ft,onChange:U=>ze(U.target.value),placeholder:"ad veya ID",className:"mt-1 w-full rounded border border-slate-300 px-2 py-1.5 text-sm"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>{gt.refetch()},className:"rounded border border-slate-300 px-3 py-2 text-sm",children:"Arsivi yenile"})})]}),gt.isLoading?n.jsx($t,{label:"Arsiv yukleniyor..."}):null,gt.isError?n.jsx(zt,{message:"Arsiv listesi alinamadi."}):null,!gt.isLoading&&!gt.isError?n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 rounded border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:[n.jsxs("span",{children:["Gosterilen satir: ",dt,"-",Qn," / ",K]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>pt(U=>Math.max(1,U-1)),disabled:at<=1,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Onceki"}),n.jsxs("span",{children:["Sayfa ",at," / ",De]}),n.jsx("button",{type:"button",onClick:()=>pt(U=>Math.min(De,U+1)),disabled:at>=De,className:"rounded border border-slate-300 px-2 py-1 text-xs disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]}):null,n.jsx("div",{className:"mt-2 max-h-[520px] overflow-auto rounded-lg border border-slate-200",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"sticky top-0 bg-white",children:n.jsxs("tr",{className:"text-xs uppercase text-slate-500",children:[n.jsx("th",{className:"px-2 py-2",children:"Sira"}),n.jsx("th",{className:"px-2 py-2",children:"ID"}),n.jsx("th",{className:"px-2 py-2",children:"Tarih"}),n.jsx("th",{className:"px-2 py-2",children:"Dosya"}),n.jsx("th",{className:"px-2 py-2",children:"Calisan"}),n.jsx("th",{className:"px-2 py-2",children:"Boyut"}),n.jsx("th",{className:"px-2 py-2",children:"Islem"})]})}),n.jsx("tbody",{children:sa.map((U,Re)=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"px-2 py-2 text-slate-500",children:dt+Re}),n.jsx("td",{className:"px-2 py-2",children:U.id}),n.jsx("td",{className:"px-2 py-2",children:U.report_date}),n.jsx("td",{className:"px-2 py-2",children:U.file_name}),n.jsx("td",{className:"px-2 py-2",children:U.employee_count}),n.jsxs("td",{className:"px-2 py-2",children:[(U.file_size_bytes/1024).toFixed(1)," KB"]}),n.jsx("td",{className:"px-2 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",className:"rounded border border-brand-300 px-2 py-1 text-xs text-brand-700",onClick:()=>ti.mutate(U.id),children:"Excel indir"}),n.jsx("button",{type:"button",className:"rounded border border-slate-300 px-2 py-1 text-xs text-slate-700",title:q?void 0:"Aktif admin push aboneligi yok",onClick:()=>Rs.mutate(U.id),disabled:Rs.isPending||!q,children:"Adminlere bildir"})]})})]},U.id))})]})}),!gt.isLoading&&!gt.isError&&K===0?n.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Filtreye uygun arsiv kaydi bulunamadi."}):null]})]})}const ql={action:"",entityType:"",entityId:"",success:"all"},kd=35,jO=[{value:"",label:"Tum aksiyonlar"},{value:"ADMIN_LOGIN_SUCCESS",label:"Admin giris basarili"},{value:"ADMIN_LOGIN_FAIL",label:"Admin giris basarisiz"},{value:"ADMIN_REFRESH",label:"Admin token yeniledi"},{value:"ADMIN_LOGOUT",label:"Admin cikis yapti"},{value:"ATTENDANCE_EVENT_CREATED",label:"Yoklama kaydi olusturuldu"},{value:"DEVICE_INVITE_CREATED",label:"Cihaz daveti olusturuldu"},{value:"DEVICE_CLAIMED",label:"Cihaz eslestirildi"},{value:"LEAVE_CREATED",label:"Izin olusturuldu"},{value:"LEAVE_DELETED",label:"Izin silindi"}],SO={ADMIN_LOGIN_SUCCESS:"Admin giris basarili",ADMIN_LOGIN_FAIL:"Admin giris basarisiz",ADMIN_REFRESH:"Admin token yeniledi",ADMIN_LOGOUT:"Admin cikis yapti",ATTENDANCE_EVENT_CREATED:"Yoklama kaydi olusturuldu",DEVICE_INVITE_CREATED:"Cihaz daveti olusturuldu",DEVICE_CLAIMED:"Cihaz eslestirildi",LEAVE_CREATED:"Izin olusturuldu",LEAVE_DELETED:"Izin silindi"};function wO(e){return new Intl.DateTimeFormat("tr-TR",{dateStyle:"short",timeStyle:"medium"}).format(new Date(e))}function kO(e){return new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(e))}function EO(e){return e?"Basarili":"Hata"}function TO(e){const s=Object.entries(e);return s.length===0?"-":s.slice(0,3).map(([l,o])=>`${l}: ${String(o)}`).join(" | ")}function CO(e){return SO[e]??e}function AO(e,s){const l=Number.isInteger(s)&&s>0?s:1;return{action:e.action||void 0,entity_type:e.entityType||void 0,entity_id:e.entityId||void 0,success:e.success==="all"?void 0:e.success==="success",offset:(l-1)*kd,limit:kd}}function MO(e){const s=`${e.actor_type}:${e.actor_id}`,l=e.entity_type?`${e.entity_type}${e.entity_id?`#${e.entity_id}`:""}`:"-",o=e.ip??"-";return`[${kO(e.ts_utc)}] ${e.action} actor=${s} entity=${l} ip=${o}`}function zO(e){return e==="success"?"text-emerald-300":e==="warning"?"text-amber-300":e==="error"?"text-rose-300":"text-cyan-300"}function OO(){const[e,s]=b.useState(ql),[l,o]=b.useState(ql),[d,m]=b.useState(1),[f,g]=b.useState(""),[v,_]=b.useState(!0),[S,w]=b.useState(""),[k,O]=b.useState(null),[T,E]=b.useState([{id:1,level:"info",text:'Log terminali hazir. Yardim icin "help" yazin.'}]),R=b.useRef(2),B=b.useRef(null),A=b.useMemo(()=>AO(l,d),[l,d]),z=Fe({queryKey:["audit-logs",A],queryFn:()=>j_(A),refetchInterval:v?8e3:!1,refetchIntervalInBackground:!0}),Z=z.data?.items??[],I=z.data?.total??0,V=Math.max(1,Math.ceil(I/kd)),H=I===0?0:(d-1)*kd+1,ee=Z.length===0?0:H+Z.length-1,X=b.useMemo(()=>{if(!f.trim())return Z;const $=f.trim().toLowerCase();return Z.filter(ie=>[ie.action,ie.actor_type,ie.actor_id,ie.entity_type??"",ie.entity_id??"",ie.ip??"",ie.user_agent??"",JSON.stringify(ie.details)].join(" ").toLowerCase().includes($))},[Z,f]),P=b.useMemo(()=>{if(k!==null){const $=X.find(ie=>ie.id===k);if($)return $}return X[0]??null},[k,X]),te=b.useMemo(()=>{const $=Z.filter(_e=>!_e.success).length,ie=Z.filter(_e=>_e.action.startsWith("ADMIN_LOGIN")).length,Ae=Z.filter(_e=>_e.action==="ATTENDANCE_EVENT_CREATED").length;return{total:I,failed:$,loginEvents:ie,attendanceEvents:Ae}},[Z,I]);b.useEffect(()=>{!P&&k!==null&&O(null)},[P,k]),b.useEffect(()=>{z.data&&m($=>$<1?1:$>V?V:$)},[z.data,V]),b.useEffect(()=>{!v||B.current===null||(B.current.scrollTop=B.current.scrollHeight)},[v,X,T]);const oe=($,ie)=>{E(Ae=>{const _e=[...Ae,{id:R.current,level:$,text:ie}];return R.current+=1,_e.slice(-120)})},je=$=>{$.preventDefault(),o({...e}),m(1),oe("success","Filtreler uygulandi.")},ue=()=>{s(ql),o(ql),m(1),g(""),oe("info","Filtreler temizlendi.")},ce=$=>{const ie=$.trim();if(!ie)return;oe("info",`$ ${ie}`);const[Ae,..._e]=ie.split(/\s+/),D=Ae.toLowerCase(),ae=ie.slice(Ae.length).trim();if(D==="help"||D==="yardim"){oe("info","Komutlar: help, clear, apply, reset, refresh, follow on|off, status all|success|failed, action <AKSIYON>, search <METIN>, page <N>");return}if(D==="clear"||D==="temizle"){E([]),R.current=1,oe("success","Terminal cikti gecmisi temizlendi.");return}if(D==="apply"||D==="uygula"){o({...e}),m(1),oe("success","Taslak filtreler uygulandi.");return}if(D==="reset"||D==="sifirla"){s(ql),o(ql),m(1),g(""),oe("warning","Filtreler sifirlandi.");return}if(D==="refresh"||D==="yenile"){z.refetch(),oe("success","Log verisi yeniden cekiliyor.");return}if(D==="follow"||D==="takip"){const F=_e[0]?.toLowerCase();if(F==="on"||F==="ac"){_(!0),oe("success","Canli takip acildi.");return}if(F==="off"||F==="kapat"){_(!1),oe("warning","Canli takip kapatildi.");return}oe("error","Kullanim: follow on|off");return}if(D==="status"||D==="durum"){const F=_e[0]?.toLowerCase();let me=null;if((F==="all"||F==="tum")&&(me="all"),(F==="success"||F==="ok"||F==="basarili")&&(me="success"),(F==="failed"||F==="error"||F==="hata")&&(me="failed"),me===null){oe("error","Kullanim: status all|success|failed");return}s(de=>({...de,success:me})),o(de=>({...de,success:me})),m(1),oe("success",`Durum filtresi guncellendi: ${me}`);return}if(D==="action"||D==="aksiyon"){if(!ae){oe("error","Kullanim: action <AKSIYON_KODU>");return}s(F=>({...F,action:ae})),o(F=>({...F,action:ae})),m(1),oe("success",`Aksiyon filtresi guncellendi: ${ae}`);return}if(D==="search"||D==="ara"){g(ae),oe("success",ae?`Metin aramasi uygulandi: "${ae}"`:"Metin aramasi temizlendi.");return}if(D==="page"||D==="sayfa"){const F=Number(_e[0]);if(!Number.isFinite(F)||F<=0){oe("error","Kullanim: page <1-n>");return}const me=Math.max(Math.trunc(F),1);m(me),oe("success",`Sayfa guncellendi: ${me}`);return}oe("error",`Bilinmeyen komut: ${D}. Yardim icin "help" yazin.`)},Q=$=>{$.preventDefault(),ce(S),w("")};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"Sistem Loglari",description:"Program hareketleri, hata kayitlari, giris/cikis ve yoklama islemlerini terminal gorunumunde izleyin."}),n.jsxs(Ie,{children:[n.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Toplam log"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:te.total})]}),n.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-rose-700",children:"Hata logu"}),n.jsx("p",{className:"text-sm font-semibold text-rose-800",children:te.failed})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Login olaylari"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:te.loginEvents})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Yoklama eventleri"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:te.attendanceEvents})]})]}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{const $=!v;_($),oe("info",$?"Canli takip acildi.":"Canli takip kapatildi.")},className:`rounded-lg px-3 py-1.5 text-xs font-semibold ${v?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-700"}`,children:v?"Canli takip: Acik":"Canli takip: Kapali"}),n.jsx("button",{type:"button",onClick:()=>{z.refetch(),oe("success","Log listesi manuel yenilendi.")},className:"rounded-lg border border-slate-300 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Yenile"}),n.jsx("button",{type:"button",onClick:ue,className:"rounded-lg border border-slate-300 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Filtreleri temizle"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[n.jsxs("span",{children:["Gosterilen satir: ",H,"-",ee," / ",I]}),n.jsx("button",{type:"button",onClick:()=>m($=>Math.max(1,$-1)),disabled:d<=1,className:"rounded border border-slate-300 px-2 py-1 disabled:cursor-not-allowed disabled:opacity-50",children:"Onceki"}),n.jsxs("span",{children:["Sayfa ",d," / ",V]}),n.jsx("button",{type:"button",onClick:()=>m($=>Math.min(V,$+1)),disabled:d>=V,className:"rounded border border-slate-300 px-2 py-1 disabled:cursor-not-allowed disabled:opacity-50",children:"Sonraki"})]})]})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Filtreler"}),n.jsxs("form",{className:"mt-3 space-y-3",onSubmit:je,children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Aksiyon",n.jsx("select",{value:e.action,onChange:$=>s(ie=>({...ie,action:$.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:jO.map($=>n.jsx("option",{value:$.value,children:$.label},$.label))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Varlik turu",n.jsx("input",{type:"text",value:e.entityType,onChange:$=>s(ie=>({...ie,entityType:$.target.value})),placeholder:"attendance_event / leave",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Varlik ID",n.jsx("input",{type:"text",value:e.entityId,onChange:$=>s(ie=>({...ie,entityId:$.target.value})),placeholder:"Orn: 42",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Durum",n.jsxs("select",{value:e.success,onChange:$=>s(ie=>({...ie,success:$.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"all",children:"Tumu"}),n.jsx("option",{value:"success",children:"Basarili"}),n.jsx("option",{value:"failed",children:"Hata"})]})]})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-[1fr_auto_auto]",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Metin ara",n.jsx("input",{type:"text",value:f,onChange:$=>g($.target.value),placeholder:"Aksiyon, kullanici, IP, detay...",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsx("button",{type:"submit",className:"btn-primary self-end rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700",children:"Uygula"}),n.jsx("button",{type:"button",onClick:ue,className:"btn-secondary self-end rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Temizle"})]})]})]}),n.jsxs(Ie,{children:[z.isLoading?n.jsx($t,{label:"Log kayitlari yukleniyor..."}):null,z.isError?n.jsx(zt,{message:Be(z.error,"Log kayitlari alinamadi.").message}):null,!z.isLoading&&!z.isError?n.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1fr)_360px]",children:[n.jsxs("section",{className:"overflow-hidden rounded-xl border border-slate-900 bg-[#09131d] text-slate-200 shadow-inner",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-slate-700 bg-slate-900/70 px-3 py-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-rose-400"}),n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-amber-300"}),n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-emerald-400"}),n.jsx("span",{className:"ml-2 text-xs font-semibold text-slate-300",children:"audit-terminal"})]}),n.jsxs("span",{className:"text-[11px] text-slate-400",children:[v?"FOLLOW MODE":"MANUAL MODE","  ",H,"-",ee," / ",I]})]}),n.jsx("form",{onSubmit:Q,className:"border-b border-slate-700 bg-slate-900/50 p-2",children:n.jsxs("label",{className:"flex items-center gap-2 text-xs font-mono text-emerald-300",children:[n.jsx("span",{children:"admin@audit:~$"}),n.jsx("input",{value:S,onChange:$=>w($.target.value),placeholder:"help, follow on, status failed, action ATTENDANCE_EVENT_CREATED, search duplicate, page 2...",className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1.5 font-mono text-xs text-slate-100 placeholder:text-slate-500 focus:border-cyan-400"})]})}),n.jsxs("div",{ref:B,className:"h-[520px] overflow-y-auto px-3 py-2 font-mono text-xs",children:[T.map($=>n.jsx("p",{className:`leading-6 ${zO($.level)}`,children:$.text},$.id)),X.map($=>{const ie=P?.id===$.id;return n.jsxs("button",{type:"button",onClick:()=>O($.id),className:`mt-1 block w-full rounded px-2 py-1 text-left leading-6 ${ie?"bg-cyan-900/40 ring-1 ring-cyan-500/40":"hover:bg-slate-800/60"}`,children:[n.jsx("span",{className:$.success?"text-emerald-300":"text-rose-300",children:$.success?"[OK]":"[ERR]"})," ",n.jsx("span",{className:"text-slate-200",children:MO($)})]},$.id)}),X.length===0?n.jsx("p",{className:"mt-2 text-amber-300",children:"Filtreye uygun log kaydi bulunamadi."}):null]})]}),n.jsxs("aside",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[n.jsx("h5",{className:"text-sm font-semibold text-slate-900",children:"Secili log detayi"}),P===null?n.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Listeden bir kayit secin."}):n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Aksiyon"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:CO(P.action)}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:P.action})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-2 text-sm text-slate-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Zaman:"})," ",wO(P.ts_utc)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Aktor:"})," ",P.actor_type,":",P.actor_id]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Durum:"})," ",EO(P.success)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Varlik:"})," ",P.entity_type??"-",P.entity_id?` #${P.entity_id}`:""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"IP:"})," ",P.ip??"-"]}),n.jsxs("p",{className:"break-all",children:[n.jsx("span",{className:"font-semibold",children:"User Agent:"})," ",P.user_agent??"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Detay ozeti:"})," ",TO(P.details)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-xs font-semibold text-slate-600",children:"JSON detay"}),n.jsx("pre",{className:"max-h-64 overflow-auto rounded-lg bg-slate-900 p-2 text-[11px] text-slate-100",children:JSON.stringify(P.details,null,2)})]})]})]})]}):null]})]})}const RO=Xa({department_id:Kn().int().positive(),daily_minutes_planned:Kn().int().nonnegative(),break_minutes:Kn().int().nonnegative(),grace_minutes:Kn().int().nonnegative()}),DO=Xa({department_id:Kn().int().positive(),weekday:Kn().int().min(0).max(6),is_workday:Rd(),planned_minutes:Kn().int().nonnegative(),break_minutes:Kn().int().nonnegative()}),LO=Xa({department_id:Kn().int().positive(),name:ma().min(1).max(100),start_time_local:ma().regex(/^\d{2}:\d{2}$/),end_time_local:ma().regex(/^\d{2}:\d{2}$/),break_minutes:Kn().int().nonnegative(),is_active:Rd()}),Bv=[{value:0,label:"Pazartesi"},{value:1,label:"Sali"},{value:2,label:"Carsamba"},{value:3,label:"Persembe"},{value:4,label:"Cuma"},{value:5,label:"Cumartesi"},{value:6,label:"Pazar"}],PO=[{value:"DEPARTMENT",label:"Tum departman"},{value:"DEPARTMENT_EXCEPT_EMPLOYEE",label:"Departman (calisan haric)"},{value:"ONLY_EMPLOYEE",label:"Sadece secili calisan"}],IO={DEPARTMENT:"Departman geneli",DEPARTMENT_EXCEPT_EMPLOYEE:"Departman (haric)",ONLY_EMPLOYEE:"Sadece calisan"};function Ef(e){const s=e.trim();if(!s)return null;const l=Number(s);return!Number.isFinite(l)||l<0?null:Math.trunc(l)}function BO(e,s){const l=e.target_employee_ids&&e.target_employee_ids.length>0?e.target_employee_ids:e.target_employee_id?[e.target_employee_id]:[];return{id:e.id,department_id:e.department_id,target_type:e.target_type,target_employee_id:l.length>0?l[0]:null,target_employee_ids:l,shift_id:e.shift_id,daily_minutes_planned:e.daily_minutes_planned,break_minutes:e.break_minutes,grace_minutes:e.grace_minutes,start_date:e.start_date,end_date:e.end_date,is_locked:e.is_locked,is_active:s,note:e.note}}function UO(){const e=Xn(),{pushToast:s}=aa(),[l,o]=b.useState(""),[d,m]=b.useState("540"),[f,g]=b.useState("60"),[v,_]=b.useState("5"),[S,w]=b.useState(""),[k,O]=b.useState("0"),[T,E]=b.useState(!0),[R,B]=b.useState("540"),[A,z]=b.useState("60"),[Z,I]=b.useState(""),[V,H]=b.useState(""),[ee,X]=b.useState("10:00"),[P,te]=b.useState("18:00"),[oe,je]=b.useState("60"),[ue,ce]=b.useState(!0),[Q,$]=b.useState(null),[ie,Ae]=b.useState(null),[_e,D]=b.useState(""),[ae,F]=b.useState("DEPARTMENT"),[me,de]=b.useState([]),[Ee,Oe]=b.useState(""),[Qe,pe]=b.useState(""),[Ve,Ye]=b.useState(""),[Ot,ft]=b.useState(""),[ze,at]=b.useState(""),[pt,Rt]=b.useState(new Date().toISOString().slice(0,10)),[It,Qt]=b.useState(new Date().toISOString().slice(0,10)),[ne,Se]=b.useState(!1),[Pe,Tt]=b.useState(!0),[se,He]=b.useState(""),[_t,pn]=b.useState(!0),[Lt,rt]=b.useState(null),Gn=Fe({queryKey:["departments"],queryFn:ji}),be=Fe({queryKey:["employees","all"],queryFn:()=>Xs({status:"all"})}),et=Fe({queryKey:["work-rules"],queryFn:SA}),lt=Fe({queryKey:["department-weekly-rules"],queryFn:()=>b_()}),Nt=Fe({queryKey:["department-shifts"],queryFn:()=>_c()}),Vt=Fe({queryKey:["schedule-plans","all"],queryFn:()=>DA({active_only:!1})}),Dt=Ge({mutationFn:wA,onSuccess:()=>{rt(null),s({variant:"success",title:"Mesai kurali kaydedildi",description:"Departman mesai kurali kaydedildi."}),e.invalidateQueries({queryKey:["work-rules"]})},onError:q=>{const Ze=Be(q,"Mesai kurali kaydedilemedi.");rt(Ze.message),s({variant:"error",title:"Mesai kurali kaydedilemedi",description:Ze.message})}}),Xt=Ge({mutationFn:__,onSuccess:()=>{rt(null),s({variant:"success",title:"Haftalik plan kaydedildi",description:"Secilen gun icin departman plani guncellendi."}),e.invalidateQueries({queryKey:["department-weekly-rules"]})},onError:q=>{const Ze=Be(q,"Haftalik plan kaydedilemedi.");rt(Ze.message),s({variant:"error",title:"Haftalik plan kaydedilemedi",description:Ze.message})}}),Bn=Ge({mutationFn:Sd,onSuccess:()=>{rt(null),$(null),H(""),X("10:00"),te("18:00"),je("60"),ce(!0),s({variant:"success",title:"Vardiya kaydedildi",description:"Departman vardiyasi guncellendi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:q=>{const Ze=Be(q,"Vardiya kaydedilemedi.");rt(Ze.message),s({variant:"error",title:"Vardiya kaydedilemedi",description:Ze.message})}}),Pt=Ge({mutationFn:N_,onSuccess:()=>{rt(null),Q!==null&&($(null),H(""),X("10:00"),te("18:00"),je("60"),ce(!0)),s({variant:"success",title:"Vardiya pasife alindi",description:"Vardiya kaydi pasif duruma getirildi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:q=>{const Ze=Be(q,"Vardiya pasife alinamadi.");rt(Ze.message),s({variant:"error",title:"Vardiya pasife alinamadi",description:Ze.message})}}),ut=Ge({mutationFn:({shift:q,nextActive:Ze})=>Sd({id:q.id,department_id:q.department_id,name:q.name,start_time_local:q.start_time_local,end_time_local:q.end_time_local,break_minutes:q.break_minutes,is_active:Ze}),onSuccess:(q,Ze)=>{rt(null),s({variant:"success",title:Ze.nextActive?"Vardiya aktif edildi":"Vardiya pasife alindi",description:Ze.nextActive?"Vardiya tekrar kullanilabilir duruma getirildi.":"Vardiya kaydi pasif duruma getirildi."}),e.invalidateQueries({queryKey:["department-shifts"]})},onError:q=>{const Ze=Be(q,"Vardiya durumu guncellenemedi.");rt(Ze.message),s({variant:"error",title:"Vardiya durumu guncellenemedi",description:Ze.message})}}),dn=Ge({mutationFn:P0,onSuccess:()=>{rt(null),s({variant:"success",title:"Planlama kaydedildi",description:"Departman/calisan plani kaydedildi."}),e.invalidateQueries({queryKey:["schedule-plans"]}),Ae(null),de([]),pe(""),Ye(""),ft(""),at(""),Se(!1),Tt(!0),He("")},onError:q=>{const Ze=Be(q,"Planlama kaydedilemedi.");rt(Ze.message),s({variant:"error",title:"Planlama kaydedilemedi",description:Ze.message})}}),jn=Ge({mutationFn:LA,onSuccess:()=>{rt(null),s({variant:"success",title:"Planlama iptal edildi",description:"Plan pasife alindi."}),e.invalidateQueries({queryKey:["schedule-plans"]})},onError:q=>{const Ze=Be(q,"Planlama iptal edilemedi.");rt(Ze.message),s({variant:"error",title:"Planlama iptal edilemedi",description:Ze.message})}}),We=Ge({mutationFn:q=>P0(BO(q,!0)),onSuccess:()=>{rt(null),s({variant:"success",title:"Planlama aktif edildi",description:"Plan tekrar aktif olarak kaydedildi."}),e.invalidateQueries({queryKey:["schedule-plans"]})},onError:q=>{const Ze=Be(q,"Plan aktif edilemedi.");rt(Ze.message),s({variant:"error",title:"Plan aktif edilemedi",description:Ze.message})}}),kn=b.useMemo(()=>{const q=Number(d),Ze=Number(f),St=Number(v);return{daily:dd(q),breakValue:dd(Ze),grace:dd(St)}},[d,f,v]);if(Gn.isLoading||be.isLoading||et.isLoading||lt.isLoading||Nt.isLoading||Vt.isLoading)return n.jsx($t,{});if(Gn.isError||be.isError||et.isError||lt.isError||Nt.isError||Vt.isError)return n.jsx(zt,{message:"Mesai kurali verileri alinamadi."});const gt=Gn.data??[],Wa=be.data??[],Dn=et.data??[],Kt=lt.data??[],$n=Nt.data??[],es=Vt.data??[],J=new Map(gt.map(q=>[q.id,q.name])),qe=new Map(Wa.map(q=>[q.id,q.full_name])),xn=new Map($n.map(q=>[q.id,q.name])),ht=es.filter(q=>_t||q.is_active),Ue=Number(_e),sn=Number.isFinite(Ue)?$n.filter(q=>q.department_id===Ue):[],yn=Number.isFinite(Ue)?Wa.filter(q=>q.department_id===Ue):[],En=Ee.trim()?yn.filter(q=>{const Ze=Ee.trim().toLowerCase();return q.full_name.toLowerCase().includes(Ze)||String(q.id).includes(Ze.replace("#",""))}):yn,Wt=()=>{Ae(null),F("DEPARTMENT"),de([]),Oe(""),pe(""),Ye(""),ft(""),at(""),Rt(new Date().toISOString().slice(0,10)),Qt(new Date().toISOString().slice(0,10)),Se(!1),Tt(!0),He("")},hn=q=>{const Ze=q.target_employee_ids&&q.target_employee_ids.length>0?q.target_employee_ids:q.target_employee_id?[q.target_employee_id]:[];Ae(q.id),D(String(q.department_id)),F(q.target_type),de(Ze),Oe(""),pe(q.shift_id?String(q.shift_id):""),Ye(q.daily_minutes_planned!==null?String(q.daily_minutes_planned):""),ft(q.break_minutes!==null?String(q.break_minutes):""),at(q.grace_minutes!==null?String(q.grace_minutes):""),Rt(q.start_date),Qt(q.end_date),Se(q.is_locked),Tt(q.is_active),He(q.note??"")},sa=q=>{q.preventDefault(),rt(null);const Ze=RO.safeParse({department_id:l,daily_minutes_planned:d,break_minutes:f,grace_minutes:v});if(!Ze.success){const St=Ze.error.issues[0]?.message??"Mesai kurali formunu kontrol edin.";rt(St),s({variant:"error",title:"Form hatasi",description:St});return}Dt.mutate(Ze.data)},K=q=>{q.preventDefault(),rt(null);const Ze=DO.safeParse({department_id:S,weekday:k,is_workday:T,planned_minutes:R,break_minutes:A});if(!Ze.success){const St=Ze.error.issues[0]?.message??"Haftalik plan formunu kontrol edin.";rt(St),s({variant:"error",title:"Form hatasi",description:St});return}Xt.mutate(Ze.data)},De=q=>{q.preventDefault(),rt(null);const Ze=LO.safeParse({department_id:Z,name:V.trim(),start_time_local:ee,end_time_local:P,break_minutes:oe,is_active:ue});if(!Ze.success){const St=Ze.error.issues[0]?.message??"Vardiya formunu kontrol edin.";rt(St),s({variant:"error",title:"Form hatasi",description:St});return}Bn.mutate({id:Q??void 0,...Ze.data})},dt=q=>{$(q.id),I(String(q.department_id)),H(q.name),X(q.start_time_local),te(q.end_time_local),je(String(q.break_minutes)),ce(q.is_active),rt(null)},Qn=()=>{$(null),H(""),X("10:00"),te("18:00"),je("60"),ce(!0),rt(null)},Tn=q=>{q.preventDefault(),rt(null);const Ze=Number(_e);if(!Number.isFinite(Ze)||Ze<=0){rt("Planlama icin departman secmelisiniz.");return}if(!pt||!It){rt("Baslangic ve bitis tarihi zorunludur.");return}if(pt>It){rt("Baslangic tarihi bitis tarihinden buyuk olamaz.");return}const St=ae==="DEPARTMENT"?[]:[...me];if(ae!=="DEPARTMENT"&&St.length===0){rt("Secilen hedef tipi icin en az bir calisan secmelisiniz.");return}const Un=Qe?Number(Qe):null,Sa=Ef(Ve),vn=Ef(Ot),rn=Ef(ze);if(!Un&&Sa===null&&vn===null&&rn===null){rt("En az bir plan degeri girmelisiniz (vardiya veya dakika alanlari).");return}dn.mutate({id:ie??void 0,department_id:Ze,target_type:ae,target_employee_id:St.length>0?St[0]:null,target_employee_ids:St,shift_id:Un,daily_minutes_planned:Sa,break_minutes:vn,grace_minutes:rn,start_date:pt,end_date:It,is_locked:ne,is_active:Pe,note:se.trim()||null})};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Wn,{title:"Mesai Kurallari",description:"Departman bazinda gunluk plan, haftalik gun davranisi ve coklu vardiya tanimlarini yonetin."}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Temel Departman Kurali"}),n.jsxs("form",{onSubmit:sa,className:"mt-3 grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:l,onChange:q=>o(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),gt.map(q=>n.jsx("option",{value:q.id,children:q.name},q.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Planlanan Gunluk Dakika",n.jsx("input",{value:d,onChange:q=>m(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakikasi",n.jsx("input",{value:f,onChange:q=>g(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gecikme Toleransi (Dakika)",n.jsx("input",{value:v,onChange:q=>_(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("div",{className:"md:col-span-4 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:["Onizleme: Planlanan ",kn.daily," | Mola ",kn.breakValue," | Tolerans ",kn.grace]}),n.jsx("div",{className:"md:col-span-4",children:n.jsx("button",{type:"submit",disabled:Dt.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Dt.isPending?"Kaydediliyor...":"Kurali Kaydet"})})]})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Haftalik Gun Plani"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ornek: Cumartesi 5 saat, Pazar calisma yok gibi farkli gun davranislarini buradan tanimlayin."}),n.jsxs("form",{onSubmit:K,className:"mt-3 grid gap-3 md:grid-cols-5",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:S,onChange:q=>w(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),gt.map(q=>n.jsx("option",{value:q.id,children:q.name},q.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gun",n.jsx("select",{value:k,onChange:q=>O(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:Bv.map(q=>n.jsx("option",{value:q.value,children:q.label},q.value))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Planlanan Dakika",n.jsx("input",{value:R,onChange:q=>B(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakikasi",n.jsx("input",{value:A,onChange:q=>z(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:T,onChange:q=>E(q.target.checked)}),"Calisma Gunu"]}),n.jsx("div",{className:"md:col-span-5",children:n.jsx("button",{type:"submit",disabled:Xt.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Xt.isPending?"Kaydediliyor...":"Gunu Kaydet"})})]}),n.jsx("div",{className:"mt-4 list-scroll-area",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Gun"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Planlanan Sure"}),n.jsx("th",{className:"py-2",children:"Mola"})]})}),n.jsx("tbody",{children:Kt.map(q=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:J.get(q.department_id)??q.department_id}),n.jsx("td",{className:"py-2",children:Bv.find(Ze=>Ze.value===q.weekday)?.label??q.weekday}),n.jsx("td",{className:"py-2",children:q.is_workday?"Calisma":"Off"}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:q.planned_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:q.break_minutes})})]},q.id))})]})})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Departman Vardiyalari"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Ornek: Stant icin 10:00-18:00 ve 14:00-22:00 vardiyalarini ayri ayri tanimlayabilirsiniz."}),Q?n.jsxs("p",{className:"mt-2 text-xs font-medium text-brand-700",children:["Duzenleme modu: #",Q]}):null,n.jsxs("form",{onSubmit:De,className:"mt-3 grid gap-3 md:grid-cols-6",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:Z,onChange:q=>I(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),gt.map(q=>n.jsx("option",{value:q.id,children:q.name},q.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya Adi",n.jsx("input",{value:V,onChange:q=>H(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",placeholder:"Orn: Sabah 10-18"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Baslangic",n.jsx("input",{type:"time",value:ee,onChange:q=>X(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bitis",n.jsx("input",{type:"time",value:P,onChange:q=>te(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakikasi",n.jsx("input",{value:oe,onChange:q=>je(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:ue,onChange:q=>ce(q.target.checked)}),"Aktif"]}),n.jsx("div",{className:"md:col-span-6",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("button",{type:"submit",disabled:Bn.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:Bn.isPending?"Kaydediliyor...":Q?"Vardiya Guncelle":"Vardiya Kaydet"}),Q?n.jsx("button",{type:"button",onClick:Qn,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100",children:"Vazgec"}):null]})})]}),n.jsx("div",{className:"mt-4 list-scroll-area",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Saat"}),n.jsx("th",{className:"py-2",children:"Mola"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2 text-right",children:"Aksiyon"})]})}),n.jsx("tbody",{children:$n.map(q=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:J.get(q.department_id)??q.department_id}),n.jsx("td",{className:"py-2",children:q.name}),n.jsxs("td",{className:"py-2",children:[q.start_time_local," - ",q.end_time_local]}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:q.break_minutes})}),n.jsx("td",{className:"py-2",children:q.is_active?"Aktif":"Pasif"}),n.jsx("td",{className:"py-2 text-right",children:n.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>dt(q),className:"rounded-lg border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:"Duzenle"}),q.is_active?n.jsx("button",{type:"button",disabled:Pt.isPending||ut.isPending,onClick:()=>{window.confirm("Bu vardiya pasife alinsin mi?")&&Pt.mutate(q.id)},className:"rounded-lg border border-rose-300 px-3 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:"Pasife Al"}):n.jsx("button",{type:"button",disabled:ut.isPending||Pt.isPending,onClick:()=>ut.mutate({shift:q,nextActive:!0}),className:"rounded-lg border border-emerald-300 px-3 py-1 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:"Aktif Et"})]})})]},q.id))})]})})]}),n.jsxs(Ie,{children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Ileri Planlama (Departman/Calisan)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Gelecek tarihli vardiya ve sure kurali tanimlayin. Planlar duzenlenebilir, iptal edilebilir, tekrar aktif edilebilir."})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:_t,onChange:q=>pn(q.target.checked)}),"Pasif planlari goster"]})]}),n.jsxs("form",{onSubmit:Tn,className:"mt-4 grid gap-3 md:grid-cols-4",children:[n.jsxs("label",{className:"text-sm text-slate-700",children:["Departman",n.jsxs("select",{value:_e,onChange:q=>{D(q.target.value),de([]),pe("")},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),gt.map(q=>n.jsx("option",{value:q.id,children:q.name},q.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Hedef Tipi",n.jsx("select",{value:ae,onChange:q=>{const Ze=q.target.value;F(Ze),Ze==="DEPARTMENT"&&de([])},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:PO.map(q=>n.jsx("option",{value:q.value,children:q.label},q.value))})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Calisanlar (gerekliyse)",n.jsx("input",{type:"text",value:Ee,onChange:q=>Oe(q.target.value),disabled:ae==="DEPARTMENT",placeholder:"Calisan adi veya ID ile ara...",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 disabled:bg-slate-100"}),n.jsx("select",{multiple:!0,value:me.map(String),onChange:q=>{const Ze=Array.from(q.target.selectedOptions).map(St=>Number(St.value));de(Ze.filter(St=>Number.isFinite(St)&&St>0))},disabled:ae==="DEPARTMENT",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 disabled:bg-slate-100",children:En.map(q=>n.jsxs("option",{value:q.id,children:["#",q.id," - ",q.full_name]},q.id))}),n.jsx("span",{className:"mt-1 block text-xs text-slate-500",children:"Ctrl/Cmd ile birden fazla calisan secilebilir. Binlerce kayitta once arama yapin."})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Vardiya (opsiyonel)",n.jsxs("select",{value:Qe,onChange:q=>pe(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2",children:[n.jsx("option",{value:"",children:"Seciniz"}),sn.map(q=>n.jsxs("option",{value:q.id,children:[q.name," (",q.start_time_local," - ",q.end_time_local,")"]},q.id))]})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Gunluk Dakika (ops.)",n.jsx("input",{value:Ve,onChange:q=>Ye(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Mola Dakika (ops.)",n.jsx("input",{value:Ot,onChange:q=>ft(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Tolerans Dakika (ops.)",n.jsx("input",{value:ze,onChange:q=>at(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Baslangic Tarihi",n.jsx("input",{type:"date",value:pt,onChange:q=>Rt(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"text-sm text-slate-700",children:["Bitis Tarihi",n.jsx("input",{type:"date",value:It,onChange:q=>Qt(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:ne,onChange:q=>Se(q.target.checked)}),"Vardiya kilitli"]}),n.jsxs("label",{className:"inline-flex items-center gap-2 pt-8 text-sm text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:Pe,onChange:q=>Tt(q.target.checked)}),"Aktif"]}),n.jsxs("label",{className:"text-sm text-slate-700 md:col-span-2",children:["Not",n.jsx("input",{value:se,onChange:q=>He(q.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2"})]}),n.jsxs("div",{className:"md:col-span-4 flex flex-wrap gap-2",children:[n.jsx("button",{type:"submit",disabled:dn.isPending,className:"btn-primary rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:dn.isPending?"Kaydediliyor...":ie?"Plani Guncelle":"Plan Olustur"}),n.jsx("button",{type:"button",onClick:Wt,className:"btn-secondary rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Formu Temizle"})]})]}),n.jsx("div",{className:"mt-4 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Hedef"}),n.jsx("th",{className:"py-2",children:"Vardiya"}),n.jsx("th",{className:"py-2",children:"Plan/Mola"}),n.jsx("th",{className:"py-2",children:"Tarih Araligi"}),n.jsx("th",{className:"py-2",children:"Kilit"}),n.jsx("th",{className:"py-2",children:"Durum"}),n.jsx("th",{className:"py-2",children:"Aksiyon"})]})}),n.jsx("tbody",{children:ht.map(q=>{const St=(q.target_employee_ids&&q.target_employee_ids.length>0?q.target_employee_ids:q.target_employee_id?[q.target_employee_id]:[]).map(Un=>qe.get(Un)??`#${Un}`);return n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:J.get(q.department_id)??q.department_id}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:IO[q.target_type]}),St.length>0?n.jsx("span",{className:"text-xs text-slate-500",children:St.join(", ")}):null]})}),n.jsx("td",{className:"py-2",children:q.shift_id?xn.get(q.shift_id)??`#${q.shift_id}`:"-"}),n.jsxs("td",{className:"py-2 text-xs text-slate-700",children:[n.jsxs("div",{children:["Plan: ",q.daily_minutes_planned!==null?`${q.daily_minutes_planned} dk`:"-"]}),n.jsxs("div",{children:["Mola: ",q.break_minutes!==null?`${q.break_minutes} dk`:"-"]}),n.jsxs("div",{children:["Tolerans: ",q.grace_minutes!==null?`${q.grace_minutes} dk`:"-"]})]}),n.jsxs("td",{className:"py-2",children:[q.start_date," - ",q.end_date]}),n.jsx("td",{className:"py-2",children:q.is_locked?"Kilitli":"Serbest"}),n.jsx("td",{className:"py-2",children:q.is_active?"Aktif":"Pasif"}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>hn(q),className:"rounded-lg border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:"Duzenle"}),q.is_active?n.jsx("button",{type:"button",onClick:()=>jn.mutate(q.id),disabled:jn.isPending,className:"rounded-lg border border-rose-300 px-2 py-1 text-xs font-semibold text-rose-700 hover:bg-rose-50 disabled:opacity-60",children:"Iptal Et"}):n.jsx("button",{type:"button",onClick:()=>We.mutate(q),disabled:We.isPending,className:"rounded-lg border border-emerald-300 px-2 py-1 text-xs font-semibold text-emerald-700 hover:bg-emerald-50 disabled:opacity-60",children:"Aktif Et"})]})})]},q.id)})})]})})]}),n.jsxs(Ie,{children:[n.jsx("h4",{className:"text-base font-semibold text-slate-900",children:"Mevcut Temel Kurallar"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-left text-sm",children:[n.jsx("thead",{className:"text-xs uppercase text-slate-500",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2",children:"Departman"}),n.jsx("th",{className:"py-2",children:"Planlanan Gunluk Sure"}),n.jsx("th",{className:"py-2",children:"Mola Suresi"}),n.jsx("th",{className:"py-2",children:"Tolerans"})]})}),n.jsx("tbody",{children:Dn.map(q=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"py-2",children:J.get(q.department_id)??q.department_id}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:q.daily_minutes_planned})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:q.break_minutes})}),n.jsx("td",{className:"py-2",children:n.jsx($e,{minutes:q.grace_minutes})})]},q.id))})]})})]}),Lt?n.jsx("p",{className:"form-validation",children:Lt}):null]})}function FO(){return n.jsxs(aw,{children:[n.jsx(Jt,{element:n.jsx(F3,{}),children:n.jsx(Jt,{path:"/login",element:n.jsx(Ez,{})})}),n.jsx(Jt,{path:"/device-claim",element:n.jsx(Z3,{})}),n.jsx(Jt,{path:"/archive-download",element:n.jsx(_M,{})}),n.jsx(Jt,{path:"/attendance-extra-checkin-approval",element:n.jsx(wM,{})}),n.jsx(Jt,{element:n.jsx(U3,{}),children:n.jsxs(Jt,{element:n.jsx(B3,{}),children:[n.jsx(Jt,{path:"/",element:n.jsx(xd,{to:"/management-console",replace:!0})}),n.jsx(Jt,{path:"/management-console",element:n.jsx(Wz,{})}),n.jsx(Jt,{path:"/control-room",element:n.jsx(xd,{to:"/management-console?focus=matrix",replace:!0})}),n.jsx(Jt,{path:"/dashboard",element:n.jsx(dM,{})}),n.jsx(Jt,{path:"/regions",element:n.jsx(oO,{})}),n.jsx(Jt,{path:"/departments",element:n.jsx(fM,{})}),n.jsx(Jt,{path:"/employees",element:n.jsx(Nz,{})}),n.jsx(Jt,{path:"/employees/:id",element:n.jsx(mz,{})}),n.jsx(Jt,{path:"/quick-setup",element:n.jsx(lO,{})}),n.jsx(Jt,{path:"/work-rules",element:n.jsx(UO,{})}),n.jsx(Jt,{path:"/attendance-events",element:n.jsx(oM,{})}),n.jsx(Jt,{path:"/devices",element:n.jsx(xM,{})}),n.jsx(Jt,{path:"/compliance-settings",element:n.jsx(gM,{})}),n.jsx(Jt,{path:"/leaves",element:n.jsx(Sz,{})}),n.jsx(Jt,{path:"/qr-kodlar",element:n.jsx(rO,{})}),n.jsx(Jt,{path:"/reports/employee-monthly",element:n.jsx(vz,{})}),n.jsx(Jt,{path:"/reports/department-summary",element:n.jsx(hM,{})}),n.jsx(Jt,{path:"/reports/excel-export",element:n.jsx(tO,{})}),n.jsx(Jt,{path:"/notifications",element:n.jsx(NO,{})}),n.jsx(Jt,{path:"/audit-logs",element:n.jsx(OO,{})}),n.jsx(Jt,{path:"/admin-users",element:n.jsx(JM,{})})]})}),n.jsx(Jt,{path:"*",element:n.jsx(eO,{})})]})}const qO=new Kj({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});bj.createRoot(document.getElementById("root")).render(n.jsx(hj.StrictMode,{children:n.jsx(Gj,{client:qO,children:n.jsx(Tw,{basename:"/admin-panel/",children:n.jsx(X3,{children:n.jsx(R3,{children:n.jsx(FO,{})})})})})}));typeof window<"u"&&"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/admin-panel/admin-sw.js",{scope:"/admin-panel/"}).catch(()=>{})});
